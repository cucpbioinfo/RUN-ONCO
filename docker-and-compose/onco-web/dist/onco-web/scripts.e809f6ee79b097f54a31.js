!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n=[],r=t.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,l=n.indexOf,u={},c=u.toString,f=u.hasOwnProperty,h=f.toString,d=h.call(Object),p={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},v=function(t){return null!=t&&t===t.window},m={type:!0,src:!0,nonce:!0,noModule:!0};function y(t,e,n){var i,o,a=(n=n||r).createElement("script");if(a.text=t,e)for(i in m)(o=e[i]||e.getAttribute&&e.getAttribute(i))&&a.setAttribute(i,o);n.head.appendChild(a).parentNode.removeChild(a)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[c.call(t)]||"object":typeof t}var b="3.4.1",w=function(t,e){return new w.fn.init(t,e)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!g(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}w.fn=w.prototype={jquery:b,constructor:w,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(u&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,a[e]=w.extend(u,o,r)):void 0!==r&&(a[e]=r));return a},w.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==c.call(t)||(e=i(t))&&("function"!=typeof(n=f.call(e,"constructor")&&e.constructor)||h.call(n)!==d))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){y(t,{nonce:e&&e.nonce})},each:function(t,e){var n,r=0;if(k(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(x,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?w.merge(n,"string"==typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(k(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:p}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){u["[object "+e+"]"]=e.toLowerCase()});var E=function(t){var e,n,r,i,o,a,s,l,u,c,f,h,d,p,g,v,m,y,_,b="sizzle"+1*new Date,w=t.document,x=0,k=0,E=lt(),z=lt(),A=lt(),C=lt(),S=function(t,e){return t===e&&(f=!0),0},T={}.hasOwnProperty,M=[],N=M.pop,D=M.push,I=M.push,O=M.slice,L=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+B+"*("+F+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",H=new RegExp(B+"+","g"),q=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),W=new RegExp("^"+B+"*,"+B+"*"),$=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),U=new RegExp(B+"|>"),V=new RegExp(R),Y=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,G=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),nt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){h()},at=bt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(M=O.call(w.childNodes),w.childNodes)}catch(e){I={apply:M.length?function(t,e){D.apply(t,O.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function st(t,e,r,i){var o,s,u,c,f,p,m,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return r;if(!i&&((e?e.ownerDocument||e:w)!==d&&h(e),e=e||d,g)){if(11!==x&&(f=J.exec(t)))if(o=f[1]){if(9===x){if(!(u=e.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&_(e,u)&&u.id===o)return r.push(u),r}else{if(f[2])return I.apply(r,e.getElementsByTagName(t)),r;if((o=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return I.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!C[t+" "]&&(!v||!v.test(t))&&(1!==x||"object"!==e.nodeName.toLowerCase())){if(m=t,y=e,1===x&&U.test(t)){for((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=b),s=(p=a(t)).length;s--;)p[s]="#"+c+" "+_t(p[s]);m=p.join(","),y=tt.test(t)&&mt(e.parentNode)||e}try{return I.apply(r,y.querySelectorAll(m)),r}catch(e){C(t,!0)}finally{c===b&&e.removeAttribute("id")}}}return l(t.replace(q,"$1"),e,r,i)}function lt(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ut(t){return t[b]=!0,t}function ct(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ft(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ht(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return ut(function(e){return e=+e,ut(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!K.test(t.namespaceURI||e&&e.nodeName||"HTML")},h=st.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:w;return a!==d&&9===a.nodeType&&a.documentElement&&(p=(d=a).documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ct(function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ct(function(t){return p.appendChild(t).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],v=[],(n.qsa=Q.test(d.querySelectorAll))&&(ct(function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+B+"*(?:value|"+P+")"),t.querySelectorAll("[id~="+b+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+B+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ct(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),m.push("!=",R)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),e=Q.test(p.compareDocumentPosition),_=e||Q.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},S=e?function(t,e){if(t===e)return f=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===d||t.ownerDocument===w&&_(w,t)?-1:e===d||e.ownerDocument===w&&_(w,e)?1:c?L(c,t)-L(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return f=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===d?-1:e===d?1:i?-1:o?1:c?L(c,t)-L(c,e):0;if(i===o)return ht(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ht(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0}),d},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&h(t),n.matchesSelector&&g&&!C[e+" "]&&(!m||!m.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){C(e,!0)}return 0<st(e,d,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!==d&&h(t),_(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==d&&h(t);var i=r.attrHandle[e.toLowerCase()],o=i&&T.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(rt,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(S),f){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return c=null,t},i=st.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=st.selectors={cacheLength:50,createPseudo:ut,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&E(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&-1<i.indexOf(n):"$="===e?n&&i.slice(-n.length)===n:"~="===e?-1<(" "+i.replace(H," ")+" ").indexOf(n):"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,f,h,d,p,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(v){if(o){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===m:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(_=(d=(u=(c=(f=(h=v)[b]||(h[b]={}))[h.uniqueID]||(f[h.uniqueID]={}))[t]||[])[0]===x&&u[1])&&u[2],h=d&&v.childNodes[d];h=++d&&h&&h[g]||(_=d=0)||p.pop();)if(1===h.nodeType&&++_&&h===e){c[t]=[x,d,_];break}}else if(y&&(_=d=(u=(c=(f=(h=e)[b]||(h[b]={}))[h.uniqueID]||(f[h.uniqueID]={}))[t]||[])[0]===x&&u[1]),!1===_)for(;(h=++d&&h&&h[g]||(_=d=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==m:1!==h.nodeType)||!++_||(y&&((c=(f=h[b]||(h[b]={}))[h.uniqueID]||(f[h.uniqueID]={}))[t]=[x,_]),h!==e)););return(_-=i)===r||_%r==0&&0<=_/r}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return i[b]?i(e):1<i.length?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=L(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:ut(function(t){var e=[],n=[],r=s(t.replace(q,"$1"));return r[b]?ut(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:ut(function(t){return function(e){return 0<st(t,e).length}}),contains:ut(function(t){return t=t.replace(et,nt),function(e){return-1<(e.textContent||i(e)).indexOf(t)}}),lang:ut(function(t){return Y.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return G.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt(function(){return[0]}),last:vt(function(t,e){return[e-1]}),eq:vt(function(t,e,n){return[n<0?n+e:n]}),even:vt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:vt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:vt(function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t}),gt:vt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function yt(){}function _t(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function bt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=k++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,l){var u,c,f,h=[x,s];if(l){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(c=(f=e[b]||(e[b]={}))[e.uniqueID]||(f[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((u=c[o])&&u[0]===x&&u[1]===s)return h[2]=u[2];if((c[o]=h)[2]=t(e,n,l))return!0}return!1}}function wt(t){return 1<t.length?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function xt(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),u&&e.push(s)));return a}function kt(t,e,n,r,i,o){return r&&!r[b]&&(r=kt(r)),i&&!i[b]&&(i=kt(i,o)),ut(function(o,a,s,l){var u,c,f,h=[],d=[],p=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)st(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!o&&e?g:xt(g,h,t,s,l),m=n?i||(o?t:p||r)?[]:a:v;if(n&&n(v,m,s,l),r)for(u=xt(m,d),r(u,[],s,l),c=u.length;c--;)(f=u[c])&&(m[d[c]]=!(v[d[c]]=f));if(o){if(i||t){if(i){for(u=[],c=m.length;c--;)(f=m[c])&&u.push(v[c]=f);i(null,m=[],u,l)}for(c=m.length;c--;)(f=m[c])&&-1<(u=i?L(o,f):h[c])&&(o[u]=!(a[u]=f))}}else m=xt(m===a?m.splice(p,m.length):m),i?i(null,a,m,l):I.apply(a,m)})}function Et(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],l=a?1:0,c=bt(function(t){return t===e},s,!0),f=bt(function(t){return-1<L(e,t)},s,!0),h=[function(t,n,r){var i=!a&&(r||n!==u)||((e=n).nodeType?c(t,n,r):f(t,n,r));return e=null,i}];l<o;l++)if(n=r.relative[t[l].type])h=[bt(wt(h),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[b]){for(i=++l;i<o&&!r.relative[t[i].type];i++);return kt(1<l&&wt(h),1<l&&_t(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(q,"$1"),n,l<i&&Et(t.slice(l,i)),i<o&&Et(t=t.slice(i)),i<o&&_t(t))}h.push(n)}return wt(h)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,a=st.tokenize=function(t,e){var n,i,o,a,s,l,u,c=z[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=r.preFilter;s;){for(a in n&&!(i=W.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=$.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(q," ")}),s=s.slice(n.length)),r.filter)!(i=X[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):z(t,l).slice(0)},s=st.compile=function(t,e){var n,i,o,s,l,c,f=[],p=[],v=A[t+" "];if(!v){for(e||(e=a(t)),n=e.length;n--;)(v=Et(e[n]))[b]?f.push(v):p.push(v);(v=A(t,(i=p,s=0<(o=f).length,l=0<i.length,c=function(t,e,n,a,c){var f,p,v,m=0,y="0",_=t&&[],b=[],w=u,k=t||l&&r.find.TAG("*",c),E=x+=null==w?1:Math.random()||.1,z=k.length;for(c&&(u=e===d||e||c);y!==z&&null!=(f=k[y]);y++){if(l&&f){for(p=0,e||f.ownerDocument===d||(h(f),n=!g);v=i[p++];)if(v(f,e||d,n)){a.push(f);break}c&&(x=E)}s&&((f=!v&&f)&&m--,t&&_.push(f))}if(m+=y,s&&y!==m){for(p=0;v=o[p++];)v(_,b,e,n);if(t){if(0<m)for(;y--;)_[y]||b[y]||(b[y]=N.call(a));b=xt(b)}I.apply(a,b),c&&!t&&0<b.length&&1<m+o.length&&st.uniqueSort(a)}return c&&(x=E,u=w),_},s?ut(c):c))).selector=t}return v},l=st.select=function(t,e,n,i){var o,l,u,c,f,h="function"==typeof t&&t,d=!i&&a(t=h.selector||t);if(n=n||[],1===d.length){if(2<(l=d[0]=d[0].slice(0)).length&&"ID"===(u=l[0]).type&&9===e.nodeType&&g&&r.relative[l[1].type]){if(!(e=(r.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=X.needsContext.test(t)?0:l.length;o--&&!r.relative[c=(u=l[o]).type];)if((f=r.find[c])&&(i=f(u.matches[0].replace(et,nt),tt.test(l[0].type)&&mt(e.parentNode)||e))){if(l.splice(o,1),!(t=i.length&&_t(l)))return I.apply(n,i),n;break}}return(h||s(t,d))(i,e,!g,n,!e||tt.test(t)&&mt(e.parentNode)||e),n},n.sortStable=b.split("").sort(S).join("")===b,n.detectDuplicates=!!f,h(),n.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ft("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ft("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ft(P,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),st}(t);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var z=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&w(t).is(n))break;r.push(t)}return r},A=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},C=w.expr.match.needsContext;function S(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,e,n){return g(e)?w.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?w.grep(t,function(t){return t===e!==n}):"string"!=typeof e?w.grep(t,function(t){return-1<l.call(e,t)!==n}):w.filter(e,t,n)}w.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?w.find.matchesSelector(r,t)?[r]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<r;e++)if(w.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)w.find(t,i[e],n);return 1<r?w.uniqueSort(n):n},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&C.test(t)?w(t):t||[],!1).length}});var N,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||N,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:D.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(w.merge(this,w.parseHTML(i[1],(e=e instanceof w?e[0]:e)&&e.nodeType?e.ownerDocument||e:r,!0)),T.test(i[1])&&w.isPlainObject(e))for(i in e)g(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,N=w(r);var I=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&w(t);if(!C.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&w.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?w.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?l.call(w(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return z(t,"parentNode")},parentsUntil:function(t,e,n){return z(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return z(t,"nextSibling")},prevAll:function(t){return z(t,"previousSibling")},nextUntil:function(t,e,n){return z(t,"nextSibling",n)},prevUntil:function(t,e,n){return z(t,"previousSibling",n)},siblings:function(t){return A((t.parentNode||{}).firstChild,t)},children:function(t){return A(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(S(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},function(t,e){w.fn[t]=function(n,r){var i=w.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),1<this.length&&(O[t]||w.uniqueSort(i),I.test(t)&&i.reverse()),this.pushStack(i)}});var P=/[^\x20\t\r\n\f]+/g;function B(t){return t}function F(t){throw t}function j(t,e,n,r){var i;try{t&&g(i=t.promise)?i.call(t).done(e).fail(n):t&&g(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}w.Callbacks=function(t){var e;t="string"==typeof t?(e={},w.each(t.match(P)||[],function(t,n){e[n]=!0}),e):w.extend({},t);var n,r,i,o,a=[],s=[],l=-1,u=function(){for(o=o||t.once,i=n=!0;s.length;l=-1)for(r=s.shift();++l<a.length;)!1===a[l].apply(r[0],r[1])&&t.stopOnFalse&&(l=a.length,r=!1);t.memory||(r=!1),n=!1,o&&(a=r?[]:"")},c={add:function(){return a&&(r&&!n&&(l=a.length-1,s.push(r)),function e(n){w.each(n,function(n,r){g(r)?t.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==_(r)&&e(r)})}(arguments),r&&!n&&u()),this},remove:function(){return w.each(arguments,function(t,e){for(var n;-1<(n=w.inArray(e,a,n));)a.splice(n,1),n<=l&&l--}),this},has:function(t){return t?-1<w.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=r="",this},disabled:function(){return!a},lock:function(){return o=s=[],r||n||(a=r=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],s.push(e),n||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return w.Deferred(function(e){w.each(n,function(n,r){var i=g(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&g(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(e,r,i){var o=0;function a(e,n,r,i){return function(){var s=this,l=arguments,u=function(){var t,u;if(!(e<o)){if((t=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");g(u=t&&("object"==typeof t||"function"==typeof t)&&t.then)?i?u.call(t,a(o,n,B,i),a(o,n,F,i)):u.call(t,a(++o,n,B,i),a(o,n,F,i),a(o,n,B,n.notifyWith)):(r!==B&&(s=void 0,l=[t]),(i||n.resolveWith)(s,l))}},c=i?u:function(){try{u()}catch(u){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(u,c.stackTrace),o<=e+1&&(r!==F&&(s=void 0,l=[u]),n.rejectWith(s,l))}};e?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),t.setTimeout(c))}}return w.Deferred(function(t){n[0][3].add(a(0,t,g(i)?i:B,t.notifyWith)),n[1][3].add(a(0,t,g(e)?e:B)),n[2][3].add(a(0,t,g(r)?r:F))}).promise()},promise:function(t){return null!=t?w.extend(t,i):i}},o={};return w.each(n,function(t,e){var a=e[2],s=e[5];i[e[1]]=a.add,s&&a.add(function(){r=s},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=1<arguments.length?o.call(arguments):n,--e||a.resolveWith(r,i)}};if(e<=1&&(j(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)j(i[n],s(n),a.reject);return a.promise()}});var R=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&R.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},w.readyException=function(e){t.setTimeout(function(){throw e})};var H=w.Deferred();function q(){r.removeEventListener("DOMContentLoaded",q),t.removeEventListener("load",q),w.ready()}w.fn.ready=function(t){return H.then(t).catch(function(t){w.readyException(t)}),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||H.resolveWith(r,[w])}}),w.ready.then=H.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?t.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",q),t.addEventListener("load",q));var W=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===_(n))for(s in i=!0,n)W(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(w(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},$=/^-ms-/,U=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function Y(t){return t.replace($,"ms-").replace(U,V)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function K(){this.expando=w.expando+K.uid++}K.uid=1,K.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[Y(e)]=n;else for(r in e)i[Y(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in r?[e]:e.match(P)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||w.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var G=new K,Z=new K,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function tt(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:Q.test(i)?JSON.parse(i):i)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}w.extend({hasData:function(t){return Z.hasData(t)||G.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return G.access(t,e,n)},_removeData:function(t,e){G.remove(t,e)}}),w.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Z.get(o),1===o.nodeType&&!G.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=Y(r.slice(5)),tt(o,r,i[r]));G.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Z.set(this,t)}):W(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Z.get(o,t))?n:void 0!==(n=tt(o,t))?n:void 0;this.each(function(){Z.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Z.remove(this,t)})}}),w.extend({queue:function(t,e,n){var r;if(t)return r=G.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=G.access(t,e,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=w.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=w._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){w.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return G.get(t,n)||G.access(t,n,{empty:w.Callbacks("once memory").add(function(){G.remove(t,[e+"queue",n])})})}}),w.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?w.queue(this[0],t):void 0===e?this:this.each(function(){var n=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&w.dequeue(this,t)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=G.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,nt=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],it=r.documentElement,ot=function(t){return w.contains(t.ownerDocument,t)},at={composed:!0};it.getRootNode&&(ot=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(at)===t.ownerDocument});var st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===w.css(t,"display")},lt=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};function ut(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(t,e,"")},l=s(),u=n&&n[3]||(w.cssNumber[e]?"":"px"),c=t.nodeType&&(w.cssNumber[e]||"px"!==u&&+l)&&nt.exec(w.css(t,e));if(c&&c[3]!==u){for(u=u||c[3],c=+(l/=2)||1;a--;)w.style(t,e,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;w.style(t,e,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var ct={};function ft(t,e){for(var n,r,i,o,a,s,l,u=[],c=0,f=t.length;c<f;c++)(r=t[c]).style&&(n=r.style.display,e?("none"===n&&(u[c]=G.get(r,"display")||null,u[c]||(r.style.display="")),""===r.style.display&&st(r)&&(u[c]=(l=a=o=void 0,a=(i=r).ownerDocument,(l=ct[s=i.nodeName])||(o=a.body.appendChild(a.createElement(s)),l=w.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),ct[s]=l)))):"none"!==n&&(u[c]="none",G.set(r,"display",n)));for(c=0;c<f;c++)null!=u[c]&&(t[c].style.display=u[c]);return t}w.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){st(this)?w(this).show():w(this).hide()})}});var ht=/^(?:checkbox|radio)$/i,dt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pt=/^$|^module$|\/(?:java|ecma)script/i,gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&S(t,e)?w.merge([t],n):n}function mt(t,e){for(var n=0,r=t.length;n<r;n++)G.set(t[n],"globalEval",!e||G.get(e[n],"globalEval"))}gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td;var yt,_t,bt=/<|&#?\w+;/;function wt(t,e,n,r,i){for(var o,a,s,l,u,c,f=e.createDocumentFragment(),h=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===_(o))w.merge(h,o.nodeType?[o]:o);else if(bt.test(o)){for(a=a||f.appendChild(e.createElement("div")),s=(dt.exec(o)||["",""])[1].toLowerCase(),a.innerHTML=(l=gt[s]||gt._default)[1]+w.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;w.merge(h,a.childNodes),(a=f.firstChild).textContent=""}else h.push(e.createTextNode(o));for(f.textContent="",d=0;o=h[d++];)if(r&&-1<w.inArray(o,r))i&&i.push(o);else if(u=ot(o),a=vt(f.appendChild(o),"script"),u&&mt(a),n)for(c=0;o=a[c++];)pt.test(o.type||"")&&n.push(o);return f}yt=r.createDocumentFragment().appendChild(r.createElement("div")),(_t=r.createElement("input")).setAttribute("type","radio"),_t.setAttribute("checked","checked"),_t.setAttribute("name","t"),yt.appendChild(_t),p.checkClone=yt.cloneNode(!0).cloneNode(!0).lastChild.checked,yt.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!yt.cloneNode(!0).lastChild.defaultValue;var xt=/^key/,kt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Et=/^([^.]*)(?:\.(.+)|)/;function zt(){return!0}function At(){return!1}function Ct(t,e){return t===function(){try{return r.activeElement}catch(t){}}()==("focus"===e)}function St(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)St(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=At;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return w().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),t.each(function(){w.event.add(this,e,i,r,n)})}function Tt(t,e,n){n?(G.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var r,i,a=G.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=o.call(arguments),G.set(this,e,a),r=n(this,e),this[e](),a!==(i=G.get(this,e))||r?G.set(this,e,!1):i={},a!==i)return t.stopImmediatePropagation(),t.preventDefault(),i.value}else a.length&&(G.set(this,e,{value:w.event.trigger(w.extend(a[0],w.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===G.get(t,e)&&w.event.add(t,e,zt)}w.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,f,h,d,p,g,v=G.get(t);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(it,i),n.guid||(n.guid=w.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(P)||[""]).length;u--;)d=g=(s=Et.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},f=w.event.special[d=(i?f.delegateType:f.bindType)||d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:p.join(".")},o),(h=l[d])||((h=l[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),w.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,f,h,d,p,g,v=G.hasData(t)&&G.get(t);if(v&&(l=v.events)){for(u=(e=(e||"").match(P)||[""]).length;u--;)if(d=g=(s=Et.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=w.event.special[d]||{},h=l[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(t,c));a&&!h.length&&(f.teardown&&!1!==f.teardown.call(t,p,v.handle)||w.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)w.event.remove(t,d+e[u],n,r,!0);w.isEmptyObject(l)&&G.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=w.event.fix(t),l=new Array(arguments.length),u=(G.get(this,"events")||{})[s.type]||[],c=w.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=w.event.handlers.call(this,s,u),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?-1<w(i,this).index(u):w.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ht.test(e.type)&&e.click&&S(e,"input")&&Tt(e,"click",zt),!1},trigger:function(t){var e=this||t;return ht.test(e.type)&&e.click&&S(e,"input")&&Tt(e,"click"),!0},_default:function(t){var e=t.target;return ht.test(e.type)&&e.click&&S(e,"input")&&G.get(e,"click")||S(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?zt:At,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:At,isPropagationStopped:At,isImmediatePropagationStopped:At,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=zt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=zt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=zt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&kt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(t,e){w.event.special[t]={setup:function(){return Tt(this,t,Ct),!1},trigger:function(){return Tt(this,t),!0},delegateType:e}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||w.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),w.fn.extend({on:function(t,e,n,r){return St(this,t,e,n,r)},one:function(t,e,n,r){return St(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,w(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=At),this.each(function(){w.event.remove(this,t,n,e)})}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Nt=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return S(t,"table")&&S(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Pt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Bt(t,e){var n,r,i,o,a,s,l,u;if(1===e.nodeType){if(G.hasData(t)&&(o=G.access(t),a=G.set(e,o),u=o.events))for(i in delete a.handle,a.events={},u)for(n=0,r=u[i].length;n<r;n++)w.event.add(e,i,u[i][n]);Z.hasData(t)&&(s=Z.access(t),l=w.extend({},s),Z.set(e,l))}}function Ft(t,e,n,r){e=a.apply([],e);var i,o,s,l,u,c,f=0,h=t.length,d=h-1,v=e[0],m=g(v);if(m||1<h&&"string"==typeof v&&!p.checkClone&&Dt.test(v))return t.each(function(i){var o=t.eq(i);m&&(e[0]=v.call(this,i,o.html())),Ft(o,e,n,r)});if(h&&(o=(i=wt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(l=(s=w.map(vt(i,"script"),Lt)).length;f<h;f++)u=i,f!==d&&(u=w.clone(u,!0,!0),l&&w.merge(s,vt(u,"script"))),n.call(t[f],u,f);if(l)for(c=s[s.length-1].ownerDocument,w.map(s,Pt),f=0;f<l;f++)pt.test((u=s[f]).type||"")&&!G.access(u,"globalEval")&&w.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):y(u.textContent.replace(It,""),u,c))}return t}function jt(t,e,n){for(var r,i=e?w.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(vt(r)),r.parentNode&&(n&&ot(r)&&mt(vt(r,"script")),r.parentNode.removeChild(r));return t}w.extend({htmlPrefilter:function(t){return t.replace(Mt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s,l,u,c=t.cloneNode(!0),f=ot(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(a=vt(c),r=0,i=(o=vt(t)).length;r<i;r++)s=o[r],"input"===(u=(l=a[r]).nodeName.toLowerCase())&&ht.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||vt(t),a=a||vt(c),r=0,i=o.length;r<i;r++)Bt(o[r],a[r]);else Bt(t,c);return 0<(a=vt(c,"script")).length&&mt(a,!f&&vt(t,"script")),c},cleanData:function(t){for(var e,n,r,i=w.event.special,o=0;void 0!==(n=t[o]);o++)if(X(n)){if(e=n[G.expando]){if(e.events)for(r in e.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,e.handle);n[G.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),w.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return W(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ft(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)})},prepend:function(){return Ft(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Nt.test(t)&&!gt[(dt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(w.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,function(e){var n=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(vt(this)),n&&n.replaceChild(e,this))},t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){w.fn[t]=function(t){for(var n,r=[],i=w(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[e](n),s.apply(r,n.get());return this.pushStack(r)}});var Rt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),Ht=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},qt=new RegExp(rt.join("|"),"i");function Wt(t,e,n){var r,i,o,a,s=t.style;return(n=n||Ht(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||ot(t)||(a=w.style(t,e)),!p.pixelBoxStyles()&&Rt.test(a)&&qt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $t(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(u).appendChild(c);var e=t.getComputedStyle(c);i="1%"!==e.top,l=12===n(e.marginLeft),c.style.right="60%",s=36===n(e.right),o=36===n(e.width),c.style.position="absolute",a=12===n(c.offsetWidth/3),it.removeChild(u),c=null}}function n(t){return Math.round(parseFloat(t))}var i,o,a,s,l,u=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(p,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a}}))}();var Ut=["Webkit","Moz","ms"],Vt=r.createElement("div").style,Yt={};function Xt(t){return w.cssProps[t]||Yt[t]||(t in Vt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Ut.length;n--;)if((t=Ut[n]+e)in Vt)return t}(t)||t)}var Kt=/^(none|table(?!-c[ea]).+)/,Gt=/^--/,Zt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,n){var r=nt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function te(t,e,n,r,i,o){var a="width"===e?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=w.css(t,n+rt[a],!0,i)),r?("content"===n&&(l-=w.css(t,"padding"+rt[a],!0,i)),"margin"!==n&&(l-=w.css(t,"border"+rt[a]+"Width",!0,i))):(l+=w.css(t,"padding"+rt[a],!0,i),"padding"!==n?l+=w.css(t,"border"+rt[a]+"Width",!0,i):s+=w.css(t,"border"+rt[a]+"Width",!0,i));return!r&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function ee(t,e,n){var r=Ht(t),i=(!p.boxSizingReliable()||n)&&"border-box"===w.css(t,"boxSizing",!1,r),o=i,a=Wt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Rt.test(a)){if(!n)return a;a="auto"}return(!p.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===w.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===w.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+te(t,e,n||(i?"border":"content"),o,r,a)+"px"}function ne(t,e,n,r,i){return new ne.prototype.init(t,e,n,r,i)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Wt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=Y(e),l=Gt.test(e),u=t.style;if(l||(e=Xt(s)),a=w.cssHooks[e]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e];"string"==(o=typeof n)&&(i=nt.exec(n))&&i[1]&&(n=ut(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,r){var i,o,a,s=Y(e);return Gt.test(e)||(e=Xt(s)),(a=w.cssHooks[e]||w.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Wt(t,e,r)),"normal"===i&&e in Qt&&(i=Qt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(t,e){w.cssHooks[e]={get:function(t,n,r){if(n)return!Kt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ee(t,e,r):lt(t,Zt,function(){return ee(t,e,r)})},set:function(t,n,r){var i,o=Ht(t),a=!p.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===w.css(t,"boxSizing",!1,o),l=r?te(t,e,r,s,o):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-te(t,e,"border",!1,o)-.5)),l&&(i=nt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=w.css(t,e)),Jt(0,n,l)}}}),w.cssHooks.marginLeft=$t(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-lt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(t,e){w.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+rt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(w.cssHooks[t+e].set=Jt)}),w.fn.extend({css:function(t,e){return W(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Ht(t),i=e.length;a<i;a++)o[e[a]]=w.css(t,e[a],!1,r);return o}return void 0!==n?w.style(t,e,n):w.css(t,e)},t,e,1<arguments.length)}}),((w.Tween=ne).prototype={constructor:ne,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var t=ne.propHooks[this.prop];return t&&t.get?t.get(this):ne.propHooks._default.get(this)},run:function(t){var e,n=ne.propHooks[this.prop];return this.pos=e=this.options.duration?w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ne.propHooks._default.set(this),this}}).init.prototype=ne.prototype,(ne.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Xt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ne.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ne.prototype.init,w.fx.step={};var re,ie,oe,ae,se=/^(?:toggle|show|hide)$/,le=/queueHooks$/;function ue(){ie&&(!1===r.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ue):t.setTimeout(ue,w.fx.interval),w.fx.tick())}function ce(){return t.setTimeout(function(){re=void 0}),re=Date.now()}function fe(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=rt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function he(t,e,n){for(var r,i=(de.tweeners[e]||[]).concat(de.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function de(t,e,n){var r,i,o=0,a=de.prefilters.length,s=w.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=re||ce(),n=Math.max(0,u.startTime+u.duration-e),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(t,[u,r,n]),r<1&&a?n:(a||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var r=w.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=Y(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=w.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);o<a;o++)if(r=de.prefilters[o].call(u,t,c,u.opts))return g(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,he,u),g(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(de,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,nt.exec(e),n),n}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(P);for(var n,r=0,i=t.length;r<i;r++)(de.tweeners[n=t[r]]=de.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,l,u,c,f="width"in e||"height"in e,h=this,d={},p=t.style,g=t.nodeType&&st(t),v=G.get(t,"fxshow");for(r in n.queue||(null==(a=w._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,w.queue(t,"fx").length||a.empty.fire()})})),e)if(se.test(i=e[r])){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||w.style(t,r)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(d))for(r in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=v&&v.display)&&(u=G.get(t,"display")),"none"===(c=w.css(t,"display"))&&(u?c=u:(ft([t],!0),u=t.style.display||u,c=w.css(t,"display"),ft([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===w.css(t,"float")&&(l||(h.done(function(){p.display=u}),null==u&&(u="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,d)l||(v?"hidden"in v&&(g=v.hidden):v=G.access(t,"fxshow",{display:u}),o&&(v.hidden=!g),g&&ft([t],!0),h.done(function(){for(r in g||ft([t]),G.remove(t,"fxshow"),d)w.style(t,r,d[r])})),l=he(g?v[r]:0,r,h),r in v||(v[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),w.speed=function(t,e,n){var r=t&&"object"==typeof t?w.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(t,e,n,r){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=w.isEmptyObject(t),o=w.speed(e,n,r),a=function(){var e=de(this,w.extend({},t),o);(i||G.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=w.timers,a=G.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&le.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||w.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=G.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(t,e){var n=w.fn[e];w.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(fe(e,!0),t,r,i)}}),w.each({slideDown:fe("show"),slideUp:fe("hide"),slideToggle:fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){w.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),w.timers=[],w.fx.tick=function(){var t,e=0,n=w.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||w.fx.stop(),re=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ie||(ie=!0,ue())},w.fx.stop=function(){ie=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,n){return e=w.fx&&w.fx.speeds[e]||e,this.queue(n=n||"fx",function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},oe=r.createElement("input"),ae=r.createElement("select").appendChild(r.createElement("option")),oe.type="checkbox",p.checkOn=""!==oe.value,p.optSelected=ae.selected,(oe=r.createElement("input")).value="t",oe.type="radio",p.radioValue="t"===oe.value;var pe,ge=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return W(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?w.prop(t,e,n):(1===o&&w.isXMLDoc(t)||(i=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void w.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=w.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&S(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(P);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?w.removeAttr(t,n):t.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ge[e]||w.find.attr;ge[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=ge[a],ge[a]=i,i=null!=n(t,e,r)?a:null,ge[a]=o),i}});var ve=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ye(t){return(t.match(P)||[]).join(" ")}function _e(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(P)||[]}w.fn.extend({prop:function(t,e){return W(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(t)||(i=w.propHooks[e=w.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(w.propHooks.selected={get:function(t){return null},set:function(t){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(g(t))return this.each(function(e){w(this).addClass(t.call(this,e,_e(this)))});if((e=be(t)).length)for(;n=this[l++];)if(i=_e(n),r=1===n.nodeType&&" "+ye(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ye(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(g(t))return this.each(function(e){w(this).removeClass(t.call(this,e,_e(this)))});if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[l++];)if(i=_e(n),r=1===n.nodeType&&" "+ye(i)+" "){for(a=0;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=ye(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):g(t)?this.each(function(n){w(this).toggleClass(t.call(this,n,_e(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=w(this),a=be(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=_e(this))&&G.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":G.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+ye(_e(n))+" ").indexOf(e))return!0;return!1}});var we=/\r/g;w.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=g(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,w(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(t){return null==t?"":t+""})),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(we,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ye(w.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(e=w(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=w.makeArray(e),a=i.length;a--;)((r=i[a]).selected=-1<w.inArray(w.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},p.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),p.focusin="onfocusin"in t;var xe=/^(?:focusinfocus|focusoutblur)$/,ke=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,n,i,o){var a,s,l,u,c,h,d,p,m=[i||r],y=f.call(e,"type")?e.type:e,_=f.call(e,"namespace")?e.namespace.split("."):[];if(s=p=l=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!xe.test(y+w.event.triggered)&&(-1<y.indexOf(".")&&(y=(_=y.split(".")).shift(),_.sort()),c=y.indexOf(":")<0&&"on"+y,(e=e[w.expando]?e:new w.Event(y,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=_.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:w.makeArray(n,[e]),d=w.event.special[y]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!v(i)){for(xe.test((u=d.delegateType||y)+y)||(s=s.parentNode);s;s=s.parentNode)m.push(s),l=s;l===(i.ownerDocument||r)&&m.push(l.defaultView||l.parentWindow||t)}for(a=0;(s=m[a++])&&!e.isPropagationStopped();)p=s,e.type=1<a?u:d.bindType||y,(h=(G.get(s,"events")||{})[e.type]&&G.get(s,"handle"))&&h.apply(s,n),(h=c&&s[c])&&h.apply&&X(s)&&(e.result=h.apply(s,n),!1===e.result&&e.preventDefault());return e.type=y,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),n)||!X(i)||c&&g(i[y])&&!v(i)&&((l=i[c])&&(i[c]=null),w.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,ke),i[y](),e.isPropagationStopped()&&p.removeEventListener(y,ke),w.event.triggered=void 0,l&&(i[c]=l)),e.result}},simulate:function(t,e,n){var r=w.extend(new w.Event,n,{type:t,isSimulated:!0});w.event.trigger(r,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return w.event.trigger(t,e,n,!0)}}),p.focusin||w.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=G.access(r,e);i||r.addEventListener(t,n,!0),G.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=G.access(r,e)-1;i?G.access(r,e,i):(r.removeEventListener(t,n,!0),G.remove(r,e))}}});var Ee=t.location,ze=Date.now(),Ae=/\?/;w.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),n};var Ce=/\[\]$/,Se=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;function Ne(t,e,n,r){var i;if(Array.isArray(e))w.each(e,function(e,i){n||Ce.test(t)?r(t,i):Ne(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==_(e))r(t,e);else for(i in e)Ne(t+"["+i+"]",e[i],n,r)}w.param=function(t,e){var n,r=[],i=function(t,e){var n=g(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){i(this.name,this.value)});else for(n in t)Ne(n,t[n],e,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Me.test(this.nodeName)&&!Te.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:n.replace(Se,"\r\n")}}).get()}});var De=/%20/g,Ie=/#.*$/,Oe=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pe=/^(?:GET|HEAD)$/,Be=/^\/\//,Fe={},je={},Re="*/".concat("*"),He=r.createElement("a");function qe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(P)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function We(t,e,n,r){var i={},o=t===je;function a(s){var l;return i[s]=!0,w.each(t[s]||[],function(t,s){var u=s(e,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)}),l}return a(e.dataTypes[0])||!i["*"]&&a("*")}function $e(t,e){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&w.extend(!0,t,r),t}He.href=Ee.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ee.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ee.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Re,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$e($e(t,w.ajaxSettings),e):$e(w.ajaxSettings,t)},ajaxPrefilter:qe(Fe),ajaxTransport:qe(je),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0);var i,o,a,s,l,u,c,f,h,d,p=w.ajaxSetup({},n=n||{}),g=p.context||p,v=p.context&&(g.nodeType||g.jquery)?w(g):w.event,m=w.Deferred(),y=w.Callbacks("once memory"),_=p.statusCode||{},b={},x={},k="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Le.exec(a);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(t,e){return null==c&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)E.always(t[E.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||k;return i&&i.abort(e),z(0,e),this}};if(m.promise(E),p.url=((e||p.url||Ee.href)+"").replace(Be,Ee.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(P)||[""],null==p.crossDomain){u=r.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=He.protocol+"//"+He.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),We(Fe,p,n,E),c)return E;for(h in(f=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pe.test(p.type),o=p.url.replace(Ie,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(De,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ae.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Oe,"$1"),d=(Ae.test(o)?"&":"?")+"_="+ze+++d),p.url=o+d),p.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Re+"; q=0.01":""):p.accepts["*"]),p.headers)E.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(g,E,p)||c))return E.abort();if(k="abort",y.add(p.complete),E.done(p.success),E.fail(p.error),i=We(je,p,n,E)){if(E.readyState=1,f&&v.trigger("ajaxSend",[E,p]),c)return E;p.async&&0<p.timeout&&(l=t.setTimeout(function(){E.abort("timeout")},p.timeout));try{c=!1,i.send(b,z)}catch(e){if(c)throw e;z(-1,e)}}else z(-1,"No Transport");function z(e,n,r,s){var u,h,d,b,x,k=n;c||(c=!0,l&&t.clearTimeout(l),i=void 0,a=s||"",E.readyState=0<e?4:0,u=200<=e&&e<300||304===e,r&&(b=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,E,r)),b=function(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(p,b,E,u),u?(p.ifModified&&((x=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=x),(x=E.getResponseHeader("etag"))&&(w.etag[o]=x)),204===e||"HEAD"===p.type?k="nocontent":304===e?k="notmodified":(k=b.state,h=b.data,u=!(d=b.error))):(d=k,!e&&k||(k="error",e<0&&(e=0))),E.status=e,E.statusText=(n||k)+"",u?m.resolveWith(g,[h,k,E]):m.rejectWith(g,[E,k,d]),E.statusCode(_),_=void 0,f&&v.trigger(u?"ajaxSuccess":"ajaxError",[E,p,u?h:d]),y.fireWith(g,[E,k]),f&&(v.trigger("ajaxComplete",[E,p]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return w.get(t,e,n,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,e){w[e]=function(t,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:t,type:e,dataType:i,data:n,success:r},w.isPlainObject(t)&&t))}}),w._evalUrl=function(t,e){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return g(t)?this.each(function(e){w(this).wrapInner(t.call(this,e))}):this.each(function(){var e=w(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=g(t);return this.each(function(n){w(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Ue={0:200,1223:204},Ve=w.ajaxSettings.xhr();p.cors=!!Ve&&"withCredentials"in Ve,p.ajax=Ve=!!Ve,w.ajaxTransport(function(e){var n,r;if(p.cors||Ve&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ue[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(i){if(n)throw i}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,o){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),r.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ye,Xe=[],Ke=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||w.expando+"_"+ze++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(Ke.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ke,"$1"+i):!1!==e.jsonp&&(e.url+=(Ae.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?w(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Xe.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),p.createHTMLDocument=((Ye=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ye.childNodes.length),w.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((i=(e=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,e.head.appendChild(i)):e=r),a=!n&&[],(o=T.exec(t))?[e.createElement(o[1])]:(o=wt([t],e,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes)));var i,o,a},w.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return-1<s&&(r=ye(t.slice(s)),t=t.slice(0,s)),g(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<a.length&&w.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?w("<div>").append(w.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w.expr.pseudos.animated=function(t){return w.grep(w.timers,function(e){return t===e.elem}).length},w.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u=w.css(t,"position"),c=w(t),f={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=w.css(t,"top"),l=w.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),g(e)&&(e=e.call(t,n,w.extend({},s))),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):c.css(f)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){w.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),i.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-w.css(r,"marginTop",!0),left:e.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||it})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;w.fn[t]=function(r){return W(this,function(t,r,i){var o;if(v(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),w.each(["top","left"],function(t,e){w.cssHooks[e]=$t(p.pixelPosition,function(t,n){if(n)return n=Wt(t,e),Rt.test(n)?w(t).position()[e]+"px":n})}),w.each({Height:"height",Width:"width"},function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return W(this,function(e,n,i){var o;return v(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?w.css(e,n,s):w.style(e,n,i,s)},e,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){w.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}}),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),w.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return r=o.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(o.call(arguments)))}).guid=t.guid=t.guid||w.guid++,i},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=S,w.isFunction=g,w.isWindow=v,w.camelCase=Y,w.type=_,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Ge=t.jQuery,Ze=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Ze),e&&t.jQuery===w&&(t.jQuery=Ge),w},e||(t.jQuery=t.$=w),w}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,function(){"use strict";function t(t){return t&&"[object Function]"==={}.toString.call(t)}function e(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function n(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function r(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var i=e(t);return/(auto|scroll|overlay)/.test(i.overflow+i.overflowY+i.overflowX)?t:r(n(t))}function i(t){return 11===t?$:10===t?U:$||U}function o(t){if(!t)return document.documentElement;for(var n=i(10)?document.body:null,r=t.offsetParent||null;r===n&&t.nextElementSibling;)r=(t=t.nextElementSibling).offsetParent;var a=r&&r.nodeName;return a&&"BODY"!==a&&"HTML"!==a?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===e(r,"position")?o(r):r:t?t.ownerDocument.documentElement:document.documentElement}function a(t){return null===t.parentNode?t:a(t.parentNode)}function s(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,l=document.createRange();l.setStart(r,0),l.setEnd(i,0);var u=l.commonAncestorContainer;if(t!==u&&e!==u||r.contains(i))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||o(t.firstElementChild)===t)}(u)?u:o(u);var c=a(t);return c.host?s(c.host,e):s(t,a(e).host)}function l(t){var e="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;return"BODY"===n||"HTML"===n?(t.ownerDocument.scrollingElement||t.ownerDocument.documentElement)[e]:t[e]}function u(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=l(e,"top"),i=l(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}function c(t,e){var n="x"===e?"Left":"Top",r="Left"==n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+r+"Width"],10)}function f(t,e,n,r){return F(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],i(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function h(t){var e=t.body,n=t.documentElement,r=i(10)&&getComputedStyle(n);return{height:f("Height",e,n,r),width:f("Width",e,n,r)}}function d(t){return K({},t,{right:t.left+t.width,bottom:t.top+t.height})}function p(t){var n={};try{if(i(10)){n=t.getBoundingClientRect();var r=l(t,"top"),o=l(t,"left");n.top+=r,n.left+=o,n.bottom+=r,n.right+=o}else n=t.getBoundingClientRect()}catch(e){}var a={left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top},s="HTML"===t.nodeName?h(t.ownerDocument):{},u=t.offsetWidth-(s.width||t.clientWidth||a.right-a.left),f=t.offsetHeight-(s.height||t.clientHeight||a.bottom-a.top);if(u||f){var p=e(t);u-=c(p,"x"),f-=c(p,"y"),a.width-=u,a.height-=f}return d(a)}function g(t,n){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=i(10),s="HTML"===n.nodeName,l=p(t),c=p(n),f=r(t),h=e(n),g=parseFloat(h.borderTopWidth,10),v=parseFloat(h.borderLeftWidth,10);o&&s&&(c.top=F(c.top,0),c.left=F(c.left,0));var m=d({top:l.top-c.top-g,left:l.left-c.left-v,width:l.width,height:l.height});if(m.marginTop=0,m.marginLeft=0,!a&&s){var y=parseFloat(h.marginTop,10),_=parseFloat(h.marginLeft,10);m.top-=g-y,m.bottom-=g-y,m.left-=v-_,m.right-=v-_,m.marginTop=y,m.marginLeft=_}return(a&&!o?n.contains(f):n===f&&"BODY"!==f.nodeName)&&(m=u(m,n)),m}function v(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=g(t,n),i=F(n.clientWidth,window.innerWidth||0),o=F(n.clientHeight,window.innerHeight||0),a=e?0:l(n),s=e?0:l(n,"left");return d({top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o})}function m(t){var r=t.nodeName;return"BODY"!==r&&"HTML"!==r&&("fixed"===e(t,"position")||m(n(t)))}function y(t){if(!t||!t.parentElement||i())return document.documentElement;for(var n=t.parentElement;n&&"none"===e(n,"transform");)n=n.parentElement;return n||document.documentElement}function _(t,e,i,o){var a=4<arguments.length&&void 0!==arguments[4]&&arguments[4],l={top:0,left:0},u=a?y(t):s(t,e);if("viewport"===o)l=v(u,a);else{var c;"scrollParent"===o?"BODY"===(c=r(n(e))).nodeName&&(c=t.ownerDocument.documentElement):c="window"===o?t.ownerDocument.documentElement:o;var f=g(c,u,a);if("HTML"!==c.nodeName||m(u))l=f;else{var d=h(t.ownerDocument),p=d.height,_=d.width;l.top+=f.top-f.marginTop,l.bottom=p+f.top,l.left+=f.left-f.marginLeft,l.right=_+f.left}}var b="number"==typeof(i=i||0);return l.left+=b?i:i.left||0,l.top+=b?i:i.top||0,l.right-=b?i:i.right||0,l.bottom-=b?i:i.bottom||0,l}function b(t){return t.width*t.height}function w(t,e,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=_(n,r,o,i),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},l=Object.keys(s).map(function(t){return K({key:t},s[t],{area:b(s[t])})}).sort(function(t,e){return e.area-t.area}),u=l.filter(function(t){return t.width>=n.clientWidth&&t.height>=n.clientHeight}),c=0<u.length?u[0].key:l[0].key,f=t.split("-")[1];return c+(f?"-"+f:"")}function x(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return g(n,r?y(e):s(e,n),r)}function k(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function E(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function z(t,e,n){n=n.split("-")[0];var r=k(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",u=o?"width":"height";return i[a]=e[a]+e[l]/2-r[l]/2,i[s]=n===s?e[s]-r[u]:e[E(s)],i}function A(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function C(e,n,r){return(void 0===r?e:e.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var r=A(t,function(t){return t[e]===n});return t.indexOf(r)}(e,"name",r))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=e.function||e.fn;e.enabled&&t(r)&&(n.offsets.popper=d(n.offsets.popper),n.offsets.reference=d(n.offsets.reference),n=r(n,e))}),n}function S(t,e){return t.some(function(t){return t.enabled&&t.name===e})}function T(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function M(t){var e=t.ownerDocument;return e?e.defaultView:window}function N(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function D(t,e){Object.keys(e).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&N(e[n])&&(r="px"),t.style[n]=e[n]+r})}function I(t,e,n){var r=A(t,function(t){return t.name===e}),i=!!r&&t.some(function(t){return t.name===n&&t.enabled&&t.order<r.order});if(!i){var o="`"+e+"`";console.warn("`"+n+"` modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}function O(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=Q.indexOf(t),r=Q.slice(n+1).concat(Q.slice(0,n));return e?r.reverse():r}for(var L=Math.min,P=Math.floor,B=Math.round,F=Math.max,j="undefined"!=typeof window&&"undefined"!=typeof document,R=["Edge","Trident","Firefox"],H=0,q=0;q<R.length;q+=1)if(j&&0<=navigator.userAgent.indexOf(R[q])){H=1;break}var W=j&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},H))}},$=j&&!(!window.MSInputMethodContext||!document.documentMode),U=j&&/MSIE 10/.test(navigator.userAgent),V=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Y=function(){function t(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),X=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},K=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},G=j&&/Firefox/i.test(navigator.userAgent),Z=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Q=Z.slice(3),J=function(){function e(n,r){var i=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};V(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=W(this.update.bind(this)),this.options=K({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=n&&n.jquery?n[0]:n,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(K({},e.Defaults.modifiers,o.modifiers)).forEach(function(t){i.options.modifiers[t]=K({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return K({name:t},i.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(e){e.enabled&&t(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return Y(e,[{key:"update",value:function(){return(function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=x(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=w(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=z(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=C(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}).call(this)}},{key:"destroy",value:function(){return(function(){return this.state.isDestroyed=!0,S(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[T("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}).call(this)}},{key:"enableEventListeners",value:function(){return(function(){this.state.eventsEnabled||(this.state=function(t,e,n,i){n.updateBound=i,M(t).addEventListener("resize",n.updateBound,{passive:!0});var o=r(t);return function t(e,n,i,o){var a="BODY"===e.nodeName,s=a?e.ownerDocument.defaultView:e;s.addEventListener(n,i,{passive:!0}),a||t(r(s.parentNode),n,i,o),o.push(s)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}(this.reference,0,this.state,this.scheduleUpdate))}).call(this)}},{key:"disableEventListeners",value:function(){return(function(){var t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.state,M(this.reference).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}).call(this)}}]),e}();return J.Utils=("undefined"==typeof window?global:window).PopperUtils,J.placements=Z,J.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",c={start:X({},l,o[l]),end:X({},l,o[l]+o[u]-a[u])};t.offsets.popper=K({},a,c[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n,r=e.offset,i=t.offsets,o=i.popper,a=i.reference,s=t.placement.split("-")[0];return n=N(+r)?[+r,0]:function(t,e,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=t.split(/(\+|\-)/).map(function(t){return t.trim()}),s=a.indexOf(A(a,function(t){return-1!==t.search(/,|\s/)}));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1===s?[a]:[a.slice(0,s).concat([a[s].split(l)[0]]),[a[s].split(l)[1]].concat(a.slice(s+1))];return(u=u.map(function(t,r){var i=(1===r?!o:o)?"height":"width",a=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return t;if(0===a.indexOf("%")){var s;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return d(s)[e]/100*o}return"vh"===a||"vw"===a?("vh"===a?F(document.documentElement.clientHeight,window.innerHeight||0):F(document.documentElement.clientWidth,window.innerWidth||0))/100*o:o}(t,i,e,n)})})).forEach(function(t,e){t.forEach(function(n,r){N(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))})}),i}(r,o,a,s),"left"===s?(o.top+=n[0],o.left-=n[1]):"right"===s?(o.top+=n[0],o.left+=n[1]):"top"===s?(o.left+=n[0],o.top-=n[1]):"bottom"===s&&(o.left+=n[0],o.top+=n[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||o(t.instance.popper);t.instance.reference===n&&(n=o(n));var r=T("transform"),i=t.instance.popper.style,a=i.top,s=i.left,l=i[r];i.top="",i.left="",i[r]="";var u=_(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=a,i.left=s,i[r]=l,e.boundaries=u;var c=t.offsets.popper,f={primary:function(t){var n=c[t];return c[t]<u[t]&&!e.escapeWithReference&&(n=F(c[t],u[t])),X({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=c[n];return c[t]>u[t]&&!e.escapeWithReference&&(r=L(c[n],u[t]-("right"===t?c.width:c.height))),X({},n,r)}};return e.priority.forEach(function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";c=K({},c,f[e](t))}),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=P,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",l=a?"left":"top",u=a?"width":"height";return n[s]<o(r[l])&&(t.offsets.popper[l]=o(r[l])-n[u]),n[l]>o(r[s])&&(t.offsets.popper[l]=o(r[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,n){var r;if(!I(t.instance.modifiers,"arrow","keepTogether"))return t;var i=n.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],a=t.offsets,s=a.popper,l=a.reference,u=-1!==["left","right"].indexOf(o),c=u?"height":"width",f=u?"Top":"Left",h=f.toLowerCase(),p=u?"left":"top",g=u?"bottom":"right",v=k(i)[c];l[g]-v<s[h]&&(t.offsets.popper[h]-=s[h]-(l[g]-v)),l[h]+v>s[g]&&(t.offsets.popper[h]+=l[h]+v-s[g]),t.offsets.popper=d(t.offsets.popper);var m=l[h]+l[c]/2-v/2,y=e(t.instance.popper),_=parseFloat(y["margin"+f],10),b=parseFloat(y["border"+f+"Width"],10),w=m-t.offsets.popper[h]-_-b;return w=F(L(s[c]-v,w),0),t.arrowElement=i,t.offsets.arrow=(X(r={},h,B(w)),X(r,p,""),r),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(S(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=_(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=E(r),o=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case"flip":a=[r,i];break;case"clockwise":a=O(r);break;case"counterclockwise":a=O(r,!0);break;default:a=e.behavior}return a.forEach(function(s,l){if(r!==s||a.length===l+1)return t;r=t.placement.split("-")[0],i=E(r);var u=t.offsets.popper,c=t.offsets.reference,f=P,h="left"===r&&f(u.right)>f(c.left)||"right"===r&&f(u.left)<f(c.right)||"top"===r&&f(u.bottom)>f(c.top)||"bottom"===r&&f(u.top)<f(c.bottom),d=f(u.left)<f(n.left),p=f(u.right)>f(n.right),g=f(u.top)<f(n.top),v=f(u.bottom)>f(n.bottom),m="left"===r&&d||"right"===r&&p||"top"===r&&g||"bottom"===r&&v,y=-1!==["top","bottom"].indexOf(r),_=!!e.flipVariations&&(y&&"start"===o&&d||y&&"end"===o&&p||!y&&"start"===o&&g||!y&&"end"===o&&v);(h||m||_)&&(t.flipped=!0,(h||m)&&(r=a[l+1]),_&&(o="end"===o?"start":"start"===o?"end":o),t.placement=r+(o?"-"+o:""),t.offsets.popper=K({},t.offsets.popper,z(t.instance.popper,t.offsets.reference,t.placement)),t=C(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),t.placement=E(e),t.offsets.popper=d(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!I(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=A(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,a=A(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,l,u=void 0===a?e.gpuAcceleration:a,c=o(t.instance.popper),f=p(c),h={position:i.position},d=function(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=-1!==["left","right"].indexOf(t.placement),a=-1!==t.placement.indexOf("-"),s=function(t){return t},l=e?o||a||i.width%2==r.width%2?B:P:s,u=e?B:s;return{left:l(1==i.width%2&&1==r.width%2&&!a&&e?r.left-1:r.left),top:u(r.top),bottom:u(r.bottom),right:l(r.right)}}(t,2>window.devicePixelRatio||!G),g="bottom"===n?"top":"bottom",v="right"===r?"left":"right",m=T("transform");if(l="bottom"==g?"HTML"===c.nodeName?-c.clientHeight+d.bottom:-f.height+d.bottom:d.top,s="right"==v?"HTML"===c.nodeName?-c.clientWidth+d.right:-f.width+d.right:d.left,u&&m)h[m]="translate3d("+s+"px, "+l+"px, 0)",h[g]=0,h[v]=0,h.willChange="transform";else{var y="right"==v?-1:1;h[g]=l*("bottom"==g?-1:1),h[v]=s*y,h.willChange=g+", "+v}return t.attributes=K({},{"x-placement":t.placement},t.attributes),t.styles=K({},h,t.styles),t.arrowStyles=K({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return D(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach(function(n){!1===e[n]?t.removeAttribute(n):t.setAttribute(n,e[n])})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&D(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var o=x(i,e,t,n.positionFixed),a=w(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",a),D(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},J}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e((t=t||self).bootstrap={},t.jQuery,t.Popper)}(this,function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){var r,i,o;o=n[i=e],i in(r=t)?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})}return t}e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var a="transitionend",s={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var n=e(t).css("transition-duration"),r=e(t).css("transition-delay"),i=parseFloat(n),o=parseFloat(r);return i||o?(n=n.split(",")[0],r=r.split(",")[0],1e3*(parseFloat(n)+parseFloat(r))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){e(t).trigger(a)},supportsTransitionEnd:function(){return Boolean(a)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r],o=e[r],a=o&&s.isElement(o)?"element":{}.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(a))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+a+'" but expected type "'+i+'".')}},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?s.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null}};e.fn.emulateTransitionEnd=function(t){var n=this,r=!1;return e(this).one(s.TRANSITION_END,function(){r=!0}),setTimeout(function(){r||s.triggerTransitionEnd(n)},t),this},e.event.special[s.TRANSITION_END]={bindType:a,delegateType:a,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var l="alert",u="bs.alert",c="."+u,f=e.fn[l],h={CLOSE:"close"+c,CLOSED:"closed"+c,CLICK_DATA_API:"click"+c+".data-api"},d=function(){function t(t){this._element=t}var n=t.prototype;return n.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},n.dispose=function(){e.removeData(this._element,u),this._element=null},n._getRootElement=function(t){var n=s.getSelectorFromElement(t),r=!1;return n&&(r=document.querySelector(n)),r||(r=e(t).closest(".alert")[0]),r},n._triggerCloseEvent=function(t){var n=e.Event(h.CLOSE);return e(t).trigger(n),n},n._removeElement=function(t){var n=this;if(e(t).removeClass("show"),e(t).hasClass("fade")){var r=s.getTransitionDurationFromElement(t);e(t).one(s.TRANSITION_END,function(e){return n._destroyElement(t,e)}).emulateTransitionEnd(r)}else this._destroyElement(t)},n._destroyElement=function(t){e(t).detach().trigger(h.CLOSED).remove()},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),i=r.data(u);i||(i=new t(this),r.data(u,i)),"close"===n&&i[n](this)})},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),t}();e(document).on(h.CLICK_DATA_API,'[data-dismiss="alert"]',d._handleDismiss(new d)),e.fn[l]=d._jQueryInterface,e.fn[l].Constructor=d,e.fn[l].noConflict=function(){return e.fn[l]=f,d._jQueryInterface};var p="button",g="bs.button",v="."+g,m=".data-api",y=e.fn[p],_="active",b='[data-toggle^="button"]',w=".btn",x={CLICK_DATA_API:"click"+v+m,FOCUS_BLUR_DATA_API:"focus"+v+m+" blur"+v+m},k=function(){function t(t){this._element=t}var n=t.prototype;return n.toggle=function(){var t=!0,n=!0,r=e(this._element).closest('[data-toggle="buttons"]')[0];if(r){var i=this._element.querySelector('input:not([type="hidden"])');if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(_))t=!1;else{var o=r.querySelector(".active");o&&e(o).removeClass(_)}if(t){if(i.hasAttribute("disabled")||r.hasAttribute("disabled")||i.classList.contains("disabled")||r.classList.contains("disabled"))return;i.checked=!this._element.classList.contains(_),e(i).trigger("change")}i.focus(),n=!1}}n&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(_)),t&&e(this._element).toggleClass(_)},n.dispose=function(){e.removeData(this._element,g),this._element=null},t._jQueryInterface=function(n){return this.each(function(){var r=e(this).data(g);r||(r=new t(this),e(this).data(g,r)),"toggle"===n&&r[n]()})},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),t}();e(document).on(x.CLICK_DATA_API,b,function(t){t.preventDefault();var n=t.target;e(n).hasClass("btn")||(n=e(n).closest(w)),k._jQueryInterface.call(e(n),"toggle")}).on(x.FOCUS_BLUR_DATA_API,b,function(t){var n=e(t.target).closest(w)[0];e(n).toggleClass("focus",/^focus(in)?$/.test(t.type))}),e.fn[p]=k._jQueryInterface,e.fn[p].Constructor=k,e.fn[p].noConflict=function(){return e.fn[p]=y,k._jQueryInterface};var E="carousel",z="bs.carousel",A="."+z,C=".data-api",S=e.fn[E],T={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},M={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},N="next",D="prev",I={SLIDE:"slide"+A,SLID:"slid"+A,KEYDOWN:"keydown"+A,MOUSEENTER:"mouseenter"+A,MOUSELEAVE:"mouseleave"+A,TOUCHSTART:"touchstart"+A,TOUCHMOVE:"touchmove"+A,TOUCHEND:"touchend"+A,POINTERDOWN:"pointerdown"+A,POINTERUP:"pointerup"+A,DRAG_START:"dragstart"+A,LOAD_DATA_API:"load"+A+C,CLICK_DATA_API:"click"+A+C},O="active",L=".active.carousel-item",P=".carousel-indicators",B={TOUCH:"touch",PEN:"pen"},F=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(P),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var n=t.prototype;return n.next=function(){this._isSliding||this._slide(N)},n.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},n.prev=function(){this._isSliding||this._slide(D)},n.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(s.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},n.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},n.to=function(t){var n=this;this._activeElement=this._element.querySelector(L);var r=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)e(this._element).one(I.SLID,function(){return n.to(t)});else{if(r===t)return this.pause(),void this.cycle();this._slide(r<t?N:D,this._items[t])}},n.dispose=function(){e(this._element).off(A),e.removeData(this._element,z),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},n._getConfig=function(t){return t=o({},T,t),s.typeCheckConfig(E,t,M),t},n._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;0<e&&this.prev(),e<0&&this.next()}},n._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on(I.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&e(this._element).on(I.MOUSEENTER,function(e){return t.pause(e)}).on(I.MOUSELEAVE,function(e){return t.cycle(e)}),this._config.touch&&this._addTouchEventListeners()},n._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var n=function(e){t._pointerEvent&&B[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},r=function(e){t._pointerEvent&&B[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval))};e(this._element.querySelectorAll(".carousel-item img")).on(I.DRAG_START,function(t){return t.preventDefault()}),this._pointerEvent?(e(this._element).on(I.POINTERDOWN,function(t){return n(t)}),e(this._element).on(I.POINTERUP,function(t){return r(t)}),this._element.classList.add("pointer-event")):(e(this._element).on(I.TOUCHSTART,function(t){return n(t)}),e(this._element).on(I.TOUCHMOVE,function(e){var n;t.touchDeltaX=(n=e).originalEvent.touches&&1<n.originalEvent.touches.length?0:n.originalEvent.touches[0].clientX-t.touchStartX}),e(this._element).on(I.TOUCHEND,function(t){return r(t)}))}},n._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},n._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},n._getItemByDirection=function(t,e){var n=t===N,r=t===D,i=this._getItemIndex(e);if((r&&0===i||n&&i===this._items.length-1)&&!this._config.wrap)return e;var o=(i+(t===D?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},n._triggerSlideEvent=function(t,n){var r=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(L)),o=e.Event(I.SLIDE,{relatedTarget:t,direction:n,from:i,to:r});return e(this._element).trigger(o),o},n._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var n=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));e(n).removeClass(O);var r=this._indicatorsElement.children[this._getItemIndex(t)];r&&e(r).addClass(O)}},n._slide=function(t,n){var r,i,o,a=this,l=this._element.querySelector(L),u=this._getItemIndex(l),c=n||l&&this._getItemByDirection(t,l),f=this._getItemIndex(c),h=Boolean(this._interval);if(o=t===N?(r="carousel-item-left",i="carousel-item-next","left"):(r="carousel-item-right",i="carousel-item-prev","right"),c&&e(c).hasClass(O))this._isSliding=!1;else if(!this._triggerSlideEvent(c,o).isDefaultPrevented()&&l&&c){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(c);var d=e.Event(I.SLID,{relatedTarget:c,direction:o,from:u,to:f});if(e(this._element).hasClass("slide")){e(c).addClass(i),s.reflow(c),e(l).addClass(r),e(c).addClass(r);var p=parseInt(c.getAttribute("data-interval"),10);this._config.interval=p?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,p):this._config.defaultInterval||this._config.interval;var g=s.getTransitionDurationFromElement(l);e(l).one(s.TRANSITION_END,function(){e(c).removeClass(r+" "+i).addClass(O),e(l).removeClass(O+" "+i+" "+r),a._isSliding=!1,setTimeout(function(){return e(a._element).trigger(d)},0)}).emulateTransitionEnd(g)}else e(l).removeClass(O),e(c).addClass(O),this._isSliding=!1,e(this._element).trigger(d);h&&this.cycle()}},t._jQueryInterface=function(n){return this.each(function(){var r=e(this).data(z),i=o({},T,e(this).data());"object"==typeof n&&(i=o({},i,n));var a="string"==typeof n?n:i.slide;if(r||(r=new t(this,i),e(this).data(z,r)),"number"==typeof n)r.to(n);else if("string"==typeof a){if(void 0===r[a])throw new TypeError('No method named "'+a+'"');r[a]()}else i.interval&&i.ride&&(r.pause(),r.cycle())})},t._dataApiClickHandler=function(n){var r=s.getSelectorFromElement(this);if(r){var i=e(r)[0];if(i&&e(i).hasClass("carousel")){var a=o({},e(i).data(),e(this).data()),l=this.getAttribute("data-slide-to");l&&(a.interval=!1),t._jQueryInterface.call(e(i),a),l&&e(i).data(z).to(l),n.preventDefault()}}},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return T}}]),t}();e(document).on(I.CLICK_DATA_API,"[data-slide], [data-slide-to]",F._dataApiClickHandler),e(window).on(I.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),n=0,r=t.length;n<r;n++){var i=e(t[n]);F._jQueryInterface.call(i,i.data())}}),e.fn[E]=F._jQueryInterface,e.fn[E].Constructor=F,e.fn[E].noConflict=function(){return e.fn[E]=S,F._jQueryInterface};var j="collapse",R="bs.collapse",H="."+R,q=e.fn[j],W={toggle:!0,parent:""},$={toggle:"boolean",parent:"(string|element)"},U={SHOW:"show"+H,SHOWN:"shown"+H,HIDE:"hide"+H,HIDDEN:"hidden"+H,CLICK_DATA_API:"click"+H+".data-api"},V="show",Y="collapse",X="collapsing",K="collapsed",G='[data-toggle="collapse"]',Z=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(G)),r=0,i=n.length;r<i;r++){var o=n[r],a=s.getSelectorFromElement(o),l=[].slice.call(document.querySelectorAll(a)).filter(function(e){return e===t});null!==a&&0<l.length&&(this._selector=a,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var n=t.prototype;return n.toggle=function(){e(this._element).hasClass(V)?this.hide():this.show()},n.show=function(){var n,r,i=this;if(!(this._isTransitioning||e(this._element).hasClass(V)||(this._parent&&0===(n=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(t){return"string"==typeof i._config.parent?t.getAttribute("data-parent")===i._config.parent:t.classList.contains(Y)})).length&&(n=null),n&&(r=e(n).not(this._selector).data(R))&&r._isTransitioning))){var o=e.Event(U.SHOW);if(e(this._element).trigger(o),!o.isDefaultPrevented()){n&&(t._jQueryInterface.call(e(n).not(this._selector),"hide"),r||e(n).data(R,null));var a=this._getDimension();e(this._element).removeClass(Y).addClass(X),this._element.style[a]=0,this._triggerArray.length&&e(this._triggerArray).removeClass(K).attr("aria-expanded",!0),this.setTransitioning(!0);var l="scroll"+(a[0].toUpperCase()+a.slice(1)),u=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(){e(i._element).removeClass(X).addClass(Y).addClass(V),i._element.style[a]="",i.setTransitioning(!1),e(i._element).trigger(U.SHOWN)}).emulateTransitionEnd(u),this._element.style[a]=this._element[l]+"px"}}},n.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass(V)){var n=e.Event(U.HIDE);if(e(this._element).trigger(n),!n.isDefaultPrevented()){var r=this._getDimension();this._element.style[r]=this._element.getBoundingClientRect()[r]+"px",s.reflow(this._element),e(this._element).addClass(X).removeClass(Y).removeClass(V);var i=this._triggerArray.length;if(0<i)for(var o=0;o<i;o++){var a=this._triggerArray[o],l=s.getSelectorFromElement(a);null!==l&&(e([].slice.call(document.querySelectorAll(l))).hasClass(V)||e(a).addClass(K).attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[r]="";var u=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(){t.setTransitioning(!1),e(t._element).removeClass(X).addClass(Y).trigger(U.HIDDEN)}).emulateTransitionEnd(u)}}},n.setTransitioning=function(t){this._isTransitioning=t},n.dispose=function(){e.removeData(this._element,R),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},n._getConfig=function(t){return(t=o({},W,t)).toggle=Boolean(t.toggle),s.typeCheckConfig(j,t,$),t},n._getDimension=function(){return e(this._element).hasClass("width")?"width":"height"},n._getParent=function(){var n,r=this;s.isElement(this._config.parent)?(n=this._config.parent,void 0!==this._config.parent.jquery&&(n=this._config.parent[0])):n=document.querySelector(this._config.parent);var i=[].slice.call(n.querySelectorAll('[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'));return e(i).each(function(e,n){r._addAriaAndCollapsedClass(t._getTargetFromElement(n),[n])}),n},n._addAriaAndCollapsedClass=function(t,n){var r=e(t).hasClass(V);n.length&&e(n).toggleClass(K,!r).attr("aria-expanded",r)},t._getTargetFromElement=function(t){var e=s.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),i=r.data(R),a=o({},W,r.data(),"object"==typeof n&&n?n:{});if(!i&&a.toggle&&/show|hide/.test(n)&&(a.toggle=!1),i||(i=new t(this,a),r.data(R,i)),"string"==typeof n){if(void 0===i[n])throw new TypeError('No method named "'+n+'"');i[n]()}})},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return W}}]),t}();e(document).on(U.CLICK_DATA_API,G,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=e(this),r=s.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(r));e(i).each(function(){var t=e(this),r=t.data(R)?"toggle":n.data();Z._jQueryInterface.call(t,r)})}),e.fn[j]=Z._jQueryInterface,e.fn[j].Constructor=Z,e.fn[j].noConflict=function(){return e.fn[j]=q,Z._jQueryInterface};var Q="dropdown",J="bs.dropdown",tt="."+J,et=".data-api",nt=e.fn[Q],rt=new RegExp("38|40|27"),it={HIDE:"hide"+tt,HIDDEN:"hidden"+tt,SHOW:"show"+tt,SHOWN:"shown"+tt,CLICK:"click"+tt,CLICK_DATA_API:"click"+tt+et,KEYDOWN_DATA_API:"keydown"+tt+et,KEYUP_DATA_API:"keyup"+tt+et},ot="disabled",at="show",st="dropdown-menu-right",lt='[data-toggle="dropdown"]',ut=".dropdown-menu",ct={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},ft={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},ht=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var r=t.prototype;return r.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass(ot)){var r=t._getParentFromElement(this._element),i=e(this._menu).hasClass(at);if(t._clearMenus(),!i){var o={relatedTarget:this._element},a=e.Event(it.SHOW,o);if(e(r).trigger(a),!a.isDefaultPrevented()){if(!this._inNavbar){if(void 0===n)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var l=this._element;"parent"===this._config.reference?l=r:s.isElement(this._config.reference)&&(l=this._config.reference,void 0!==this._config.reference.jquery&&(l=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(r).addClass("position-static"),this._popper=new n(l,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(r).closest(".navbar-nav").length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass(at),e(r).toggleClass(at).trigger(e.Event(it.SHOWN,o))}}}},r.show=function(){if(!(this._element.disabled||e(this._element).hasClass(ot)||e(this._menu).hasClass(at))){var n={relatedTarget:this._element},r=e.Event(it.SHOW,n),i=t._getParentFromElement(this._element);e(i).trigger(r),r.isDefaultPrevented()||(e(this._menu).toggleClass(at),e(i).toggleClass(at).trigger(e.Event(it.SHOWN,n)))}},r.hide=function(){if(!this._element.disabled&&!e(this._element).hasClass(ot)&&e(this._menu).hasClass(at)){var n={relatedTarget:this._element},r=e.Event(it.HIDE,n),i=t._getParentFromElement(this._element);e(i).trigger(r),r.isDefaultPrevented()||(e(this._menu).toggleClass(at),e(i).toggleClass(at).trigger(e.Event(it.HIDDEN,n)))}},r.dispose=function(){e.removeData(this._element,J),e(this._element).off(tt),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},r.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},r._addEventListeners=function(){var t=this;e(this._element).on(it.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},r._getConfig=function(t){return t=o({},this.constructor.Default,e(this._element).data(),t),s.typeCheckConfig(Q,t,this.constructor.DefaultType),t},r._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(ut))}return this._menu},r._getPlacement=function(){var t=e(this._element.parentNode),n="bottom-start";return t.hasClass("dropup")?(n="top-start",e(this._menu).hasClass(st)&&(n="top-end")):t.hasClass("dropright")?n="right-start":t.hasClass("dropleft")?n="left-start":e(this._menu).hasClass(st)&&(n="bottom-end"),n},r._detectNavbar=function(){return 0<e(this._element).closest(".navbar").length},r._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=o({},e.offsets,t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},r._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},t._jQueryInterface=function(n){return this.each(function(){var r=e(this).data(J);if(r||(r=new t(this,"object"==typeof n?n:null),e(this).data(J,r)),"string"==typeof n){if(void 0===r[n])throw new TypeError('No method named "'+n+'"');r[n]()}})},t._clearMenus=function(n){if(!n||3!==n.which&&("keyup"!==n.type||9===n.which))for(var r=[].slice.call(document.querySelectorAll(lt)),i=0,o=r.length;i<o;i++){var a=t._getParentFromElement(r[i]),s=e(r[i]).data(J),l={relatedTarget:r[i]};if(n&&"click"===n.type&&(l.clickEvent=n),s){var u=s._menu;if(e(a).hasClass(at)&&!(n&&("click"===n.type&&/input|textarea/i.test(n.target.tagName)||"keyup"===n.type&&9===n.which)&&e.contains(a,n.target))){var c=e.Event(it.HIDE,l);e(a).trigger(c),c.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),r[i].setAttribute("aria-expanded","false"),e(u).removeClass(at),e(a).removeClass(at).trigger(e.Event(it.HIDDEN,l)))}}}},t._getParentFromElement=function(t){var e,n=s.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},t._dataApiKeydownHandler=function(n){if((/input|textarea/i.test(n.target.tagName)?!(32===n.which||27!==n.which&&(40!==n.which&&38!==n.which||e(n.target).closest(ut).length)):rt.test(n.which))&&(n.preventDefault(),n.stopPropagation(),!this.disabled&&!e(this).hasClass(ot))){var r=t._getParentFromElement(this),i=e(r).hasClass(at);if(i&&(!i||27!==n.which&&32!==n.which)){var o=[].slice.call(r.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"));if(0!==o.length){var a=o.indexOf(n.target);38===n.which&&0<a&&a--,40===n.which&&a<o.length-1&&a++,a<0&&(a=0),o[a].focus()}}else{if(27===n.which){var s=r.querySelector(lt);e(s).trigger("focus")}e(this).trigger("click")}}},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ct}},{key:"DefaultType",get:function(){return ft}}]),t}();e(document).on(it.KEYDOWN_DATA_API,lt,ht._dataApiKeydownHandler).on(it.KEYDOWN_DATA_API,ut,ht._dataApiKeydownHandler).on(it.CLICK_DATA_API+" "+it.KEYUP_DATA_API,ht._clearMenus).on(it.CLICK_DATA_API,lt,function(t){t.preventDefault(),t.stopPropagation(),ht._jQueryInterface.call(e(this),"toggle")}).on(it.CLICK_DATA_API,".dropdown form",function(t){t.stopPropagation()}),e.fn[Q]=ht._jQueryInterface,e.fn[Q].Constructor=ht,e.fn[Q].noConflict=function(){return e.fn[Q]=nt,ht._jQueryInterface};var dt="modal",pt="bs.modal",gt="."+pt,vt=e.fn[dt],mt={backdrop:!0,keyboard:!0,focus:!0,show:!0},yt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},_t={HIDE:"hide"+gt,HIDDEN:"hidden"+gt,SHOW:"show"+gt,SHOWN:"shown"+gt,FOCUSIN:"focusin"+gt,RESIZE:"resize"+gt,CLICK_DISMISS:"click.dismiss"+gt,KEYDOWN_DISMISS:"keydown.dismiss"+gt,MOUSEUP_DISMISS:"mouseup.dismiss"+gt,MOUSEDOWN_DISMISS:"mousedown.dismiss"+gt,CLICK_DATA_API:"click"+gt+".data-api"},bt="modal-open",wt="fade",xt="show",kt=".modal-dialog",Et=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zt=".sticky-top",At=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(kt),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var n=t.prototype;return n.toggle=function(t){return this._isShown?this.hide():this.show(t)},n.show=function(t){var n=this;if(!this._isShown&&!this._isTransitioning){e(this._element).hasClass(wt)&&(this._isTransitioning=!0);var r=e.Event(_t.SHOW,{relatedTarget:t});e(this._element).trigger(r),this._isShown||r.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on(_t.CLICK_DISMISS,'[data-dismiss="modal"]',function(t){return n.hide(t)}),e(this._dialog).on(_t.MOUSEDOWN_DISMISS,function(){e(n._element).one(_t.MOUSEUP_DISMISS,function(t){e(t.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(t)}))}},n.hide=function(t){var n=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var r=e.Event(_t.HIDE);if(e(this._element).trigger(r),this._isShown&&!r.isDefaultPrevented()){this._isShown=!1;var i=e(this._element).hasClass(wt);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off(_t.FOCUSIN),e(this._element).removeClass(xt),e(this._element).off(_t.CLICK_DISMISS),e(this._dialog).off(_t.MOUSEDOWN_DISMISS),i){var o=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(o)}else this._hideModal()}}},n.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return e(t).off(gt)}),e(document).off(_t.FOCUSIN),e.removeData(this._element,pt),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},n.handleUpdate=function(){this._adjustDialog()},n._getConfig=function(t){return t=o({},mt,t),s.typeCheckConfig(dt,t,yt),t},n._showElement=function(t){var n=this,r=e(this._element).hasClass(wt);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),e(this._dialog).hasClass("modal-dialog-scrollable")?this._dialog.querySelector(".modal-body").scrollTop=0:this._element.scrollTop=0,r&&s.reflow(this._element),e(this._element).addClass(xt),this._config.focus&&this._enforceFocus();var i=e.Event(_t.SHOWN,{relatedTarget:t}),o=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,e(n._element).trigger(i)};if(r){var a=s.getTransitionDurationFromElement(this._dialog);e(this._dialog).one(s.TRANSITION_END,o).emulateTransitionEnd(a)}else o()},n._enforceFocus=function(){var t=this;e(document).off(_t.FOCUSIN).on(_t.FOCUSIN,function(n){document!==n.target&&t._element!==n.target&&0===e(t._element).has(n.target).length&&t._element.focus()})},n._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on(_t.KEYDOWN_DISMISS,function(e){27===e.which&&(e.preventDefault(),t.hide())}):this._isShown||e(this._element).off(_t.KEYDOWN_DISMISS)},n._setResizeEvent=function(){var t=this;this._isShown?e(window).on(_t.RESIZE,function(e){return t.handleUpdate(e)}):e(window).off(_t.RESIZE)},n._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){e(document.body).removeClass(bt),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger(_t.HIDDEN)})},n._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},n._showBackdrop=function(t){var n=this,r=e(this._element).hasClass(wt)?wt:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",r&&this._backdrop.classList.add(r),e(this._backdrop).appendTo(document.body),e(this._element).on(_t.CLICK_DISMISS,function(t){n._ignoreBackdropClick?n._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),r&&s.reflow(this._backdrop),e(this._backdrop).addClass(xt),!t)return;if(!r)return void t();var i=s.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(s.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass(xt);var o=function(){n._removeBackdrop(),t&&t()};if(e(this._element).hasClass(wt)){var a=s.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(s.TRANSITION_END,o).emulateTransitionEnd(a)}else o()}else t&&t()},n._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},n._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},n._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},n._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var n=[].slice.call(document.querySelectorAll(Et)),r=[].slice.call(document.querySelectorAll(zt));e(n).each(function(n,r){var i=r.style.paddingRight,o=e(r).css("padding-right");e(r).data("padding-right",i).css("padding-right",parseFloat(o)+t._scrollbarWidth+"px")}),e(r).each(function(n,r){var i=r.style.marginRight,o=e(r).css("margin-right");e(r).data("margin-right",i).css("margin-right",parseFloat(o)-t._scrollbarWidth+"px")});var i=document.body.style.paddingRight,o=e(document.body).css("padding-right");e(document.body).data("padding-right",i).css("padding-right",parseFloat(o)+this._scrollbarWidth+"px")}e(document.body).addClass(bt)},n._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(Et));e(t).each(function(t,n){var r=e(n).data("padding-right");e(n).removeData("padding-right"),n.style.paddingRight=r||""});var n=[].slice.call(document.querySelectorAll(""+zt));e(n).each(function(t,n){var r=e(n).data("margin-right");void 0!==r&&e(n).css("margin-right",r).removeData("margin-right")});var r=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=r||""},n._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(n,r){return this.each(function(){var i=e(this).data(pt),a=o({},mt,e(this).data(),"object"==typeof n&&n?n:{});if(i||(i=new t(this,a),e(this).data(pt,i)),"string"==typeof n){if(void 0===i[n])throw new TypeError('No method named "'+n+'"');i[n](r)}else a.show&&i.show(r)})},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return mt}}]),t}();e(document).on(_t.CLICK_DATA_API,'[data-toggle="modal"]',function(t){var n,r=this,i=s.getSelectorFromElement(this);i&&(n=document.querySelector(i));var a=e(n).data(pt)?"toggle":o({},e(n).data(),e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var l=e(n).one(_t.SHOW,function(t){t.isDefaultPrevented()||l.one(_t.HIDDEN,function(){e(r).is(":visible")&&r.focus()})});At._jQueryInterface.call(e(n),a,this)}),e.fn[dt]=At._jQueryInterface,e.fn[dt].Constructor=At,e.fn[dt].noConflict=function(){return e.fn[dt]=vt,At._jQueryInterface};var Ct=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],St=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Tt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Mt(t,e,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);for(var r=(new window.DOMParser).parseFromString(t,"text/html"),i=Object.keys(e),o=[].slice.call(r.body.querySelectorAll("*")),a=function(t,n){var r=o[t],a=r.nodeName.toLowerCase();if(-1===i.indexOf(r.nodeName.toLowerCase()))return r.parentNode.removeChild(r),"continue";var s=[].slice.call(r.attributes),l=[].concat(e["*"]||[],e[a]||[]);s.forEach(function(t){(function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===Ct.indexOf(n)||Boolean(t.nodeValue.match(St)||t.nodeValue.match(Tt));for(var r=e.filter(function(t){return t instanceof RegExp}),i=0,o=r.length;i<o;i++)if(n.match(r[i]))return!0;return!1})(t,l)||r.removeAttribute(t.nodeName)})},s=0,l=o.length;s<l;s++)a(s);return r.body.innerHTML}var Nt="tooltip",Dt="bs.tooltip",It="."+Dt,Ot=e.fn[Nt],Lt="bs-tooltip",Pt=new RegExp("(^|\\s)"+Lt+"\\S+","g"),Bt=["sanitize","whiteList","sanitizeFn"],Ft={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},jt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Rt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},Ht="show",qt={HIDE:"hide"+It,HIDDEN:"hidden"+It,SHOW:"show"+It,SHOWN:"shown"+It,INSERTED:"inserted"+It,CLICK:"click"+It,FOCUSIN:"focusin"+It,FOCUSOUT:"focusout"+It,MOUSEENTER:"mouseenter"+It,MOUSELEAVE:"mouseleave"+It},Wt="fade",$t="show",Ut="hover",Vt="focus",Yt=function(){function t(t,e){if(void 0===n)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var r=t.prototype;return r.enable=function(){this._isEnabled=!0},r.disable=function(){this._isEnabled=!1},r.toggleEnabled=function(){this._isEnabled=!this._isEnabled},r.toggle=function(t){if(this._isEnabled)if(t){var n=this.constructor.DATA_KEY,r=e(t.currentTarget).data(n);r||(r=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,r)),r._activeTrigger.click=!r._activeTrigger.click,r._isWithActiveTrigger()?r._enter(null,r):r._leave(null,r)}else{if(e(this.getTipElement()).hasClass($t))return void this._leave(null,this);this._enter(null,this)}},r.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},r.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var r=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(r);var i=s.findShadowRoot(this.element),o=e.contains(null!==i?i:this.element.ownerDocument.documentElement,this.element);if(r.isDefaultPrevented()||!o)return;var a=this.getTipElement(),l=s.getUID(this.constructor.NAME);a.setAttribute("id",l),this.element.setAttribute("aria-describedby",l),this.setContent(),this.config.animation&&e(a).addClass(Wt);var u="function"==typeof this.config.placement?this.config.placement.call(this,a,this.element):this.config.placement,c=this._getAttachment(u);this.addAttachmentClass(c);var f=this._getContainer();e(a).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(a).appendTo(f),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n(this.element,a,{placement:c,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}}),e(a).addClass($t),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var h=function(){t.config.animation&&t._fixTransition();var n=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),"out"===n&&t._leave(null,t)};if(e(this.tip).hasClass(Wt)){var d=s.getTransitionDurationFromElement(this.tip);e(this.tip).one(s.TRANSITION_END,h).emulateTransitionEnd(d)}else h()}},r.hide=function(t){var n=this,r=this.getTipElement(),i=e.Event(this.constructor.Event.HIDE),o=function(){n._hoverState!==Ht&&r.parentNode&&r.parentNode.removeChild(r),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),e(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()};if(e(this.element).trigger(i),!i.isDefaultPrevented()){if(e(r).removeClass($t),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger.click=!1,this._activeTrigger[Vt]=!1,this._activeTrigger[Ut]=!1,e(this.tip).hasClass(Wt)){var a=s.getTransitionDurationFromElement(r);e(r).one(s.TRANSITION_END,o).emulateTransitionEnd(a)}else o();this._hoverState=""}},r.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},r.isWithContent=function(){return Boolean(this.getTitle())},r.addAttachmentClass=function(t){e(this.getTipElement()).addClass(Lt+"-"+t)},r.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},r.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(".tooltip-inner")),this.getTitle()),e(t).removeClass(Wt+" "+$t)},r.setElementContent=function(t,n){"object"!=typeof n||!n.nodeType&&!n.jquery?this.config.html?(this.config.sanitize&&(n=Mt(n,this.config.whiteList,this.config.sanitizeFn)),t.html(n)):t.text(n):this.config.html?e(n).parent().is(t)||t.empty().append(n):t.text(e(n).text())},r.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},r._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=o({},e.offsets,t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},r._getContainer=function(){return!1===this.config.container?document.body:s.isElement(this.config.container)?e(this.config.container):e(document).find(this.config.container)},r._getAttachment=function(t){return jt[t.toUpperCase()]},r._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach(function(n){if("click"===n)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if("manual"!==n){var r=n===Ut?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,i=n===Ut?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(r,t.config.selector,function(e){return t._enter(e)}).on(i,t.config.selector,function(e){return t._leave(e)})}}),e(this.element).closest(".modal").on("hide.bs.modal",function(){t.element&&t.hide()}),this.config.selector?this.config=o({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},r._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},r._enter=function(t,n){var r=this.constructor.DATA_KEY;(n=n||e(t.currentTarget).data(r))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,n)),t&&(n._activeTrigger["focusin"===t.type?Vt:Ut]=!0),e(n.getTipElement()).hasClass($t)||n._hoverState===Ht?n._hoverState=Ht:(clearTimeout(n._timeout),n._hoverState=Ht,n.config.delay&&n.config.delay.show?n._timeout=setTimeout(function(){n._hoverState===Ht&&n.show()},n.config.delay.show):n.show())},r._leave=function(t,n){var r=this.constructor.DATA_KEY;(n=n||e(t.currentTarget).data(r))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,n)),t&&(n._activeTrigger["focusout"===t.type?Vt:Ut]=!1),n._isWithActiveTrigger()||(clearTimeout(n._timeout),n._hoverState="out",n.config.delay&&n.config.delay.hide?n._timeout=setTimeout(function(){"out"===n._hoverState&&n.hide()},n.config.delay.hide):n.hide())},r._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},r._getConfig=function(t){var n=e(this.element).data();return Object.keys(n).forEach(function(t){-1!==Bt.indexOf(t)&&delete n[t]}),"number"==typeof(t=o({},this.constructor.Default,n,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),s.typeCheckConfig(Nt,t,this.constructor.DefaultType),t.sanitize&&(t.template=Mt(t.template,t.whiteList,t.sanitizeFn)),t},r._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},r._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(Pt);null!==n&&n.length&&t.removeClass(n.join(""))},r._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},r._fixTransition=function(){var t=this.getTipElement(),n=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass(Wt),this.config.animation=!1,this.hide(),this.show(),this.config.animation=n)},t._jQueryInterface=function(n){return this.each(function(){var r=e(this).data(Dt),i="object"==typeof n&&n;if((r||!/dispose|hide/.test(n))&&(r||(r=new t(this,i),e(this).data(Dt,r)),"string"==typeof n)){if(void 0===r[n])throw new TypeError('No method named "'+n+'"');r[n]()}})},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Rt}},{key:"NAME",get:function(){return Nt}},{key:"DATA_KEY",get:function(){return Dt}},{key:"Event",get:function(){return qt}},{key:"EVENT_KEY",get:function(){return It}},{key:"DefaultType",get:function(){return Ft}}]),t}();e.fn[Nt]=Yt._jQueryInterface,e.fn[Nt].Constructor=Yt,e.fn[Nt].noConflict=function(){return e.fn[Nt]=Ot,Yt._jQueryInterface};var Xt="popover",Kt="bs.popover",Gt="."+Kt,Zt=e.fn[Xt],Qt="bs-popover",Jt=new RegExp("(^|\\s)"+Qt+"\\S+","g"),te=o({},Yt.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ee=o({},Yt.DefaultType,{content:"(string|element|function)"}),ne={HIDE:"hide"+Gt,HIDDEN:"hidden"+Gt,SHOW:"show"+Gt,SHOWN:"shown"+Gt,INSERTED:"inserted"+Gt,CLICK:"click"+Gt,FOCUSIN:"focusin"+Gt,FOCUSOUT:"focusout"+Gt,MOUSEENTER:"mouseenter"+Gt,MOUSELEAVE:"mouseleave"+Gt},re=function(t){var n,r;function o(){return t.apply(this,arguments)||this}r=t,(n=o).prototype=Object.create(r.prototype),(n.prototype.constructor=n).__proto__=r;var a=o.prototype;return a.isWithContent=function(){return this.getTitle()||this._getContent()},a.addAttachmentClass=function(t){e(this.getTipElement()).addClass(Qt+"-"+t)},a.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},a.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var n=this._getContent();"function"==typeof n&&(n=n.call(this.element)),this.setElementContent(t.find(".popover-body"),n),t.removeClass("fade show")},a._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},a._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(Jt);null!==n&&0<n.length&&t.removeClass(n.join(""))},o._jQueryInterface=function(t){return this.each(function(){var n=e(this).data(Kt),r="object"==typeof t?t:null;if((n||!/dispose|hide/.test(t))&&(n||(n=new o(this,r),e(this).data(Kt,n)),"string"==typeof t)){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},i(o,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return te}},{key:"NAME",get:function(){return Xt}},{key:"DATA_KEY",get:function(){return Kt}},{key:"Event",get:function(){return ne}},{key:"EVENT_KEY",get:function(){return Gt}},{key:"DefaultType",get:function(){return ee}}]),o}(Yt);e.fn[Xt]=re._jQueryInterface,e.fn[Xt].Constructor=re,e.fn[Xt].noConflict=function(){return e.fn[Xt]=Zt,re._jQueryInterface};var ie="scrollspy",oe="bs.scrollspy",ae="."+oe,se=e.fn[ie],le={offset:10,method:"auto",target:""},ue={offset:"number",method:"string",target:"(string|element)"},ce={ACTIVATE:"activate"+ae,SCROLL:"scroll"+ae,LOAD_DATA_API:"load"+ae+".data-api"},fe="active",he=".nav, .list-group",de=".nav-link",pe=".list-group-item",ge=".dropdown-item",ve="position",me=function(){function t(t,n){var r=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(n),this._selector=this._config.target+" "+de+","+this._config.target+" "+pe+","+this._config.target+" "+ge,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on(ce.SCROLL,function(t){return r._process(t)}),this.refresh(),this._process()}var n=t.prototype;return n.refresh=function(){var t=this,n="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":ve:this._config.method,r=n===ve?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var i,o=s.getSelectorFromElement(t);if(o&&(i=document.querySelector(o)),i){var a=i.getBoundingClientRect();if(a.width||a.height)return[e(i)[n]().top+r,o]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},n.dispose=function(){e.removeData(this._element,oe),e(this._scrollElement).off(ae),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},n._getConfig=function(t){if("string"!=typeof(t=o({},le,"object"==typeof t&&t?t:{})).target){var n=e(t.target).attr("id");n||(n=s.getUID(ie),e(t.target).attr("id",n)),t.target="#"+n}return s.typeCheckConfig(ie,t,ue),t},n._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},n._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},n._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},n._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;)this._activeTarget!==this._targets[i]&&t>=this._offsets[i]&&(void 0===this._offsets[i+1]||t<this._offsets[i+1])&&this._activate(this._targets[i])}},n._activate=function(t){this._activeTarget=t,this._clear();var n=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),r=e([].slice.call(document.querySelectorAll(n.join(","))));r.hasClass("dropdown-item")?(r.closest(".dropdown").find(".dropdown-toggle").addClass(fe),r.addClass(fe)):(r.addClass(fe),r.parents(he).prev(de+", "+pe).addClass(fe),r.parents(he).prev(".nav-item").children(de).addClass(fe)),e(this._scrollElement).trigger(ce.ACTIVATE,{relatedTarget:t})},n._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(fe)}).forEach(function(t){return t.classList.remove(fe)})},t._jQueryInterface=function(n){return this.each(function(){var r=e(this).data(oe);if(r||(r=new t(this,"object"==typeof n&&n),e(this).data(oe,r)),"string"==typeof n){if(void 0===r[n])throw new TypeError('No method named "'+n+'"');r[n]()}})},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return le}}]),t}();e(window).on(ce.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),n=t.length;n--;){var r=e(t[n]);me._jQueryInterface.call(r,r.data())}}),e.fn[ie]=me._jQueryInterface,e.fn[ie].Constructor=me,e.fn[ie].noConflict=function(){return e.fn[ie]=se,me._jQueryInterface};var ye="bs.tab",_e="."+ye,be=e.fn.tab,we={HIDE:"hide"+_e,HIDDEN:"hidden"+_e,SHOW:"show"+_e,SHOWN:"shown"+_e,CLICK_DATA_API:"click"+_e+".data-api"},xe="active",ke=".active",Ee="> li > .active",ze=function(){function t(t){this._element=t}var n=t.prototype;return n.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass(xe)||e(this._element).hasClass("disabled"))){var n,r,i=e(this._element).closest(".nav, .list-group")[0],o=s.getSelectorFromElement(this._element);if(i){var a="UL"===i.nodeName||"OL"===i.nodeName?Ee:ke;r=(r=e.makeArray(e(i).find(a)))[r.length-1]}var l=e.Event(we.HIDE,{relatedTarget:this._element}),u=e.Event(we.SHOW,{relatedTarget:r});if(r&&e(r).trigger(l),e(this._element).trigger(u),!u.isDefaultPrevented()&&!l.isDefaultPrevented()){o&&(n=document.querySelector(o)),this._activate(this._element,i);var c=function(){var n=e.Event(we.HIDDEN,{relatedTarget:t._element}),i=e.Event(we.SHOWN,{relatedTarget:r});e(r).trigger(n),e(t._element).trigger(i)};n?this._activate(n,n.parentNode,c):c()}}},n.dispose=function(){e.removeData(this._element,ye),this._element=null},n._activate=function(t,n,r){var i=this,o=(!n||"UL"!==n.nodeName&&"OL"!==n.nodeName?e(n).children(ke):e(n).find(Ee))[0],a=r&&o&&e(o).hasClass("fade"),l=function(){return i._transitionComplete(t,o,r)};if(o&&a){var u=s.getTransitionDurationFromElement(o);e(o).removeClass("show").one(s.TRANSITION_END,l).emulateTransitionEnd(u)}else l()},n._transitionComplete=function(t,n,r){if(n){e(n).removeClass(xe);var i=e(n.parentNode).find("> .dropdown-menu .active")[0];i&&e(i).removeClass(xe),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(e(t).addClass(xe),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),s.reflow(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&e(t.parentNode).hasClass("dropdown-menu")){var o=e(t).closest(".dropdown")[0];if(o){var a=[].slice.call(o.querySelectorAll(".dropdown-toggle"));e(a).addClass(xe)}t.setAttribute("aria-expanded",!0)}r&&r()},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),i=r.data(ye);if(i||(i=new t(this),r.data(ye,i)),"string"==typeof n){if(void 0===i[n])throw new TypeError('No method named "'+n+'"');i[n]()}})},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),t}();e(document).on(we.CLICK_DATA_API,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(t){t.preventDefault(),ze._jQueryInterface.call(e(this),"show")}),e.fn.tab=ze._jQueryInterface,e.fn.tab.Constructor=ze,e.fn.tab.noConflict=function(){return e.fn.tab=be,ze._jQueryInterface};var Ae="toast",Ce="bs.toast",Se="."+Ce,Te=e.fn[Ae],Me={CLICK_DISMISS:"click.dismiss"+Se,HIDE:"hide"+Se,HIDDEN:"hidden"+Se,SHOW:"show"+Se,SHOWN:"shown"+Se},Ne="show",De="showing",Ie={animation:"boolean",autohide:"boolean",delay:"number"},Oe={animation:!0,autohide:!0,delay:500},Le=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var n=t.prototype;return n.show=function(){var t=this;e(this._element).trigger(Me.SHOW),this._config.animation&&this._element.classList.add("fade");var n=function(){t._element.classList.remove(De),t._element.classList.add(Ne),e(t._element).trigger(Me.SHOWN),t._config.autohide&&t.hide()};if(this._element.classList.remove("hide"),this._element.classList.add(De),this._config.animation){var r=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,n).emulateTransitionEnd(r)}else n()},n.hide=function(t){var n=this;this._element.classList.contains(Ne)&&(e(this._element).trigger(Me.HIDE),t?this._close():this._timeout=setTimeout(function(){n._close()},this._config.delay))},n.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Ne)&&this._element.classList.remove(Ne),e(this._element).off(Me.CLICK_DISMISS),e.removeData(this._element,Ce),this._element=null,this._config=null},n._getConfig=function(t){return t=o({},Oe,e(this._element).data(),"object"==typeof t&&t?t:{}),s.typeCheckConfig(Ae,t,this.constructor.DefaultType),t},n._setListeners=function(){var t=this;e(this._element).on(Me.CLICK_DISMISS,'[data-dismiss="toast"]',function(){return t.hide(!0)})},n._close=function(){var t=this,n=function(){t._element.classList.add("hide"),e(t._element).trigger(Me.HIDDEN)};if(this._element.classList.remove(Ne),this._config.animation){var r=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,n).emulateTransitionEnd(r)}else n()},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),i=r.data(Ce);if(i||(i=new t(this,"object"==typeof n&&n),r.data(Ce,i)),"string"==typeof n){if(void 0===i[n])throw new TypeError('No method named "'+n+'"');i[n](this)}})},i(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return Ie}},{key:"Default",get:function(){return Oe}}]),t}();e.fn[Ae]=Le._jQueryInterface,e.fn[Ae].Constructor=Le,e.fn[Ae].noConflict=function(){return e.fn[Ae]=Te,Le._jQueryInterface},function(){if(void 0===e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=s,t.Alert=d,t.Button=k,t.Carousel=F,t.Collapse=Z,t.Dropdown=ht,t.Modal=At,t.Popover=re,t.Scrollspy=me,t.Tab=ze,t.Toast=Le,t.Tooltip=Yt,Object.defineProperty(t,"__esModule",{value:!0})}),function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function r(t){return null===t?NaN:+t}function i(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function a(t){return t.length}function s(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function l(){this._=Object.create(null)}function u(t){return(t+="")===lo||t[0]===uo?uo+t:t}function c(t){return(t+="")[0]===uo?t.slice(1):t}function f(t){return u(t)in this._}function h(t){return(t=u(t))in this._&&delete this._[t]}function d(){var t=[];for(var e in this._)t.push(c(e));return t}function p(){var t=0;for(var e in this._)++t;return t}function g(){for(var t in this._)return!1;return!0}function v(){this._=Object.create(null)}function m(t){return t}function y(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function _(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=co.length;r>n;++n){var i=co[n]+e;if(i in t)return i}}function b(){}function w(){}function x(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new l;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function k(){Zi.event.preventDefault()}function E(){for(var t,e=Zi.event;t=e.sourceEvent;)e=t;return e}function z(t){for(var e=new w,n=0,r=arguments.length;++n<r;)e[arguments[n]]=x(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=Zi.event;i.target=t,Zi.event=i,e[i.type].apply(n,r)}finally{Zi.event=o}}},e}function A(t){return ho(t,mo),t}function C(t){return"function"==typeof t?t:function(){return po(t,this)}}function S(t){return"function"==typeof t?t:function(){return go(t,this)}}function T(t,e){return t=Zi.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function M(t){return t.trim().replace(/\s+/g," ")}function N(t){return new RegExp("(?:^|\\s+)"+Zi.requote(t)+"(?:\\s+|$)","g")}function D(t){return(t+"").trim().split(/^|\s+/)}function I(t,e){var n=(t=D(t).map(O)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function O(t){var e=N(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",M(i+" "+t))):n.setAttribute("class",M(i.replace(e," ")))}}function L(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function P(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function B(t){return"function"==typeof t?t:(t=Zi.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}}function F(){var t=this.parentNode;t&&t.removeChild(this)}function j(t){return{__data__:t}}function R(t){return function(){return vo(this,t)}}function H(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function q(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,n);return t}function W(t){return ho(t,_o),t}function $(t,e,n){function r(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}var i="__on"+t,o=t.indexOf("."),a=U;o>0&&(t=t.slice(0,o));var s=bo.get(t);return s&&(t=s,a=V),o?e?function(){var o=a(e,Ji(arguments));r.call(this),this.addEventListener(t,this[i]=o,o.$=n),o._=e}:r:e?b:function(){var e,n=new RegExp("^__on([^.]+)"+Zi.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}function U(t,e){return function(n){var r=Zi.event;Zi.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Zi.event=r}}}function V(t,e){var n=U(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function Y(n){var r=".dragsuppress-"+ ++xo,i="click"+r,o=Zi.select(e(n)).on("touchmove"+r,k).on("dragstart"+r,k).on("selectstart"+r,k);if(null==wo&&(wo=!("onselectstart"in n)&&_(n.style,"userSelect")),wo){var a=t(n).style,s=a[wo];a[wo]="none"}return function(t){if(o.on(r,null),wo&&(a[wo]=s),t){var e=function(){o.on(i,null)};o.on(i,function(){k(),e()},!0),setTimeout(e,0)}}}function X(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>ko){var o=e(t);if(o.scrollX||o.scrollY){var a=(r=Zi.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();ko=!(a.f||a.e),r.remove()}}return ko?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function K(){return Zi.event.changedTouches[0].identifier}function G(t){return t>0?1:0>t?-1:0}function Z(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Q(t){return t>1?0:-1>t?Ao:Math.acos(t)}function J(t){return t>1?To:-1>t?-To:Math.asin(t)}function tt(t){return((t=Math.exp(t))+1/t)/2}function et(t){return(t=Math.sin(t/2))*t}function nt(){}function rt(t,e,n){return this instanceof rt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof rt?new rt(t.h,t.s,t.l):vt(""+t,mt,rt):new rt(t,e,n)}function it(t,e,n){function r(t){return Math.round(255*function(t){return t>360?t-=360:0>t&&(t+=360),60>t?i+(o-i)*t/60:180>t?o:240>t?i+(o-i)*(240-t)/60:i}(t))}var i,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,i=2*(n=0>n?0:n>1?1:n)-(o=.5>=n?n*(1+e):n+e-n*e),new ht(r(t+120),r(t),r(t-120))}function ot(t,e,n){return this instanceof ot?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ot?new ot(t.h,t.c,t.l):function(t,e,n){return t>0?new ot(Math.atan2(n,e)*No,Math.sqrt(e*e+n*n),t):new ot(NaN,NaN,t)}(t instanceof st?t.l:(t=yt((t=Zi.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ot(t,e,n)}function at(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new st(n,Math.cos(t*=Mo)*e,Math.sin(t)*e)}function st(t,e,n){return this instanceof st?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof st?new st(t.l,t.a,t.b):t instanceof ot?at(t.h,t.c,t.l):yt((t=ht(t)).r,t.g,t.b):new st(t,e,n)}function lt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new ht(ft(3.2404542*(i=ut(i)*jo)-1.5371385*(r=ut(r)*Ro)-.4985314*(o=ut(o)*Ho)),ft(-.969266*i+1.8760108*r+.041556*o),ft(.0556434*i-.2040259*r+1.0572252*o))}function ut(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ct(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ft(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ht(t,e,n){return this instanceof ht?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ht?new ht(t.r,t.g,t.b):vt(""+t,ht,it):new ht(t,e,n)}function dt(t){return new ht(t>>16,t>>8&255,255&t)}function pt(t){return dt(t)+""}function gt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function vt(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(bt(i[0]),bt(i[1]),bt(i[2]))}return(o=$o.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function mt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=.5>l?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new rt(r,i,l)}function yt(t,e,n){var r=ct((.4124564*(t=_t(t))+.3575761*(e=_t(e))+.1804375*(n=_t(n)))/jo),i=ct((.2126729*t+.7151522*e+.072175*n)/Ro);return st(116*i-16,500*(r-i),200*(i-ct((.0193339*t+.119192*e+.9503041*n)/Ho)))}function _t(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function bt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function wt(t){return"function"==typeof t?t:function(){return t}}function xt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),kt(e,n,t,r)}}function kt(t,e,n,r){function i(){var t,e=l.status;if(!e&&function(t){var e=l.responseType;return e&&"text"!==e?l.response:l.responseText}()||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=Zi.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var e=Zi.event;Zi.event=t;try{a.progress.call(o,l)}finally{Zi.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(Ji(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},Zi.rebind(o,a,"on"),null==r?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}function Et(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i={c:t,t:n+e,n:null};return Vo?Vo.n=i:Uo=i,Vo=i,Yo||(Xo=clearTimeout(Xo),Yo=1,Ko(zt)),i}function zt(){var t=At(),e=Ct()-t;e>24?(isFinite(e)&&(clearTimeout(Xo),Xo=setTimeout(zt,e)),Yo=0):(Yo=1,Ko(zt))}function At(){for(var t=Date.now(),e=Uo;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ct(){for(var t,e=Uo,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Uo=e.n;return Vo=t,n}function St(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Tt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:m;return function(t){var n=Zo.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],h=n[8],d=n[9],p=1,g="",v="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),d){case"n":f=!0,d="g";break;case"%":p=100,v="%",d="f";break;case"p":p=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,d="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=Qo.get(d)||Mt;var _=u&&f;return function(t){var n=v;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>p){var l=Zi.formatPrefix(t,h);t=l.scale(t),n=l.symbol+v}else t*=p;var b,w,x=(t=d(t,h)).lastIndexOf(".");if(0>x){var k=y?t.lastIndexOf("e"):-1;0>k?(b=t,w=""):(b=t.substring(0,k),w=t.substring(k))}else b=t.substring(0,x),w=e+t.substring(x+1);!u&&f&&(b=o(b,1/0));var E=g.length+b.length+w.length+(_?0:i.length),z=c>E?new Array(E=c-E+1).join(r):"";return _&&(b=o(z+b,z.length?c-w.length:1/0)),i+=g,t=b+w,("<"===a?i+t+z:">"===a?z+i+t:"^"===a?z.substring(0,E>>=1)+i+t+z.substring(E):i+(_?t:z+t))+n}}}function Mt(t){return t+""}function Nt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Dt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new ta(n-1)),1),n}function o(t,n){return e(t=new ta(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;r>a;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=It(t);return s.floor=s,s.round=It(r),s.ceil=It(i),s.offset=It(o),s.range=function(t,e,n){try{ta=Nt;var r=new Nt;return r._=t,a(r,e,n)}finally{ta=Date}},t}function It(t){return function(e,n){try{ta=Nt;var r=new Nt;return r._=e,t(r,n)._}finally{ta=Date}}}function Ot(t){function e(t){function e(e){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=na[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=b[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&ta!==Nt,o=new(i?Nt:ta);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;l>s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=w[a in na?e.charAt(s++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var r=t.dateTime,i=t.date,o=t.time,a=t.periods,s=t.days,l=t.shortDays,u=t.months,c=t.shortMonths;e.utc=function(t){function n(t){try{var e=new(ta=Nt);return e._=t,r(e)}finally{ta=Date}}var r=e(t);return n.parse=function(t){try{ta=Nt;var e=r.parse(t);return e&&e._}finally{ta=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=Jt;var f=Zi.map(),h=Pt(s),d=Bt(s),p=Pt(l),g=Bt(l),v=Pt(u),m=Bt(u),y=Pt(c),_=Bt(c);a.forEach(function(t,e){f.set(t.toLowerCase(),e)});var b={a:function(t){return l[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:e(r),d:function(t,e){return Lt(t.getDate(),e,2)},e:function(t,e){return Lt(t.getDate(),e,2)},H:function(t,e){return Lt(t.getHours(),e,2)},I:function(t,e){return Lt(t.getHours()%12||12,e,2)},j:function(t,e){return Lt(1+Jo.dayOfYear(t),e,3)},L:function(t,e){return Lt(t.getMilliseconds(),e,3)},m:function(t,e){return Lt(t.getMonth()+1,e,2)},M:function(t,e){return Lt(t.getMinutes(),e,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,e){return Lt(t.getSeconds(),e,2)},U:function(t,e){return Lt(Jo.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Lt(Jo.mondayOfYear(t),e,2)},x:e(i),X:e(o),y:function(t,e){return Lt(t.getFullYear()%100,e,2)},Y:function(t,e){return Lt(t.getFullYear()%1e4,e,4)},Z:Zt,"%":function(){return"%"}},w={a:function(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){h.lastIndex=0;var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,r){return n(t,b.c.toString(),e,r)},d:Ut,e:Ut,H:Yt,I:Yt,j:Vt,L:Gt,m:$t,M:Xt,p:function(t,e,n){var r=f.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:Kt,U:jt,w:Ft,W:Rt,x:function(t,e,r){return n(t,b.x.toString(),e,r)},X:function(t,e,r){return n(t,b.X.toString(),e,r)},y:qt,Y:Ht,Z:Wt,"%":Qt};return e}function Lt(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Pt(t){return new RegExp("^(?:"+t.map(Zi.requote).join("|")+")","i")}function Bt(t){for(var e=new l,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ft(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function jt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Rt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Ht(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+2));return r?(t.y=function(t){return t+(t>68?1900:2e3)}(+r[0]),n+r[0].length):-1}function Wt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function $t(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ut(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Vt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Yt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Xt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Kt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Gt(t,e,n){ra.lastIndex=0;var r=ra.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Zt(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=so(e)/60|0,i=so(e)%60;return n+Lt(r,"0",2)+Lt(i,"0",2)}function Qt(t,e,n){ia.lastIndex=0;var r=ia.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Jt(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function te(){}function ee(t,e,n){var r=n.s=t+e,i=r-t;n.t=t-(r-i)+(e-i)}function ne(t,e){t&&la.hasOwnProperty(t.type)&&la[t.type](t,e)}function re(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function ie(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)re(t[n],e,1);e.polygonEnd()}function oe(){function t(t,e){e=e*Mo/2+Ao/4;var n=(t*=Mo)-r,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,f=i*l+c*Math.cos(s),h=c*a*Math.sin(s);ca.add(Math.atan2(h,f)),r=t,i=l,o=u}var e,n,r,i,o;fa.point=function(a,s){fa.point=t,r=(e=a)*Mo,i=Math.cos(s=(n=s)*Mo/2+Ao/4),o=Math.sin(s)},fa.lineEnd=function(){t(e,n)}}function ae(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function se(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function le(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ue(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ce(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function fe(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function he(t){return[Math.atan2(t[1],t[0]),J(t[2])]}function de(t,e){return so(t[0]-e[0])<Eo&&so(t[1]-e[1])<Eo}function pe(t,e){t*=Mo;var n=Math.cos(e*=Mo);ge(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ge(t,e,n){pa+=(t-pa)/++ha,ga+=(e-ga)/ha,va+=(n-va)/ha}function ve(){function t(t,i){t*=Mo;var o=Math.cos(i*=Mo),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+r*l);da+=u,ma+=u*(e+(e=a)),ya+=u*(n+(n=s)),_a+=u*(r+(r=l)),ge(e,n,r)}var e,n,r;ka.point=function(i,o){i*=Mo;var a=Math.cos(o*=Mo);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),ka.point=t,ge(e,n,r)}}function me(){ka.point=pe}function ye(){function t(t,e){t*=Mo;var n=Math.cos(e*=Mo),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=i*l-o*s,c=o*a-r*l,f=r*s-i*a,h=Math.sqrt(u*u+c*c+f*f),d=r*a+i*s+o*l,p=h&&-Q(d)/h,g=Math.atan2(h,d);ba+=p*u,wa+=p*c,xa+=p*f,da+=g,ma+=g*(r+(r=a)),ya+=g*(i+(i=s)),_a+=g*(o+(o=l)),ge(r,i,o)}var e,n,r,i,o;ka.point=function(a,s){e=a,n=s,ka.point=t,a*=Mo;var l=Math.cos(s*=Mo);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),ge(r,i,o)},ka.lineEnd=function(){t(e,n),ka.lineEnd=me,ka.point=pe}}function _e(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function be(){return!0}function we(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(de(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var l=new ke(n,t,null,!0),u=new ke(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new ke(r,t,null,!1),u=new ke(r,null,l,!0),l.o=u,o.push(l),a.push(u)}}),a.sort(e),xe(o),xe(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,f,h=o[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,u=c.length;u>s;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(s=(c=d.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function xe(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ke(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ee(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);v.point(n[0],n[1])}function l(){y.point=s,v.lineStart()}function u(){y.point=a,v.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=_.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&e){var i,a=-1;if((r=(t=n[0]).length-1)>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(ze))}var d,p,g,v=e(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=h,d=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,d=Zi.merge(d);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;ca.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],c=u.length;if(c)for(var f=u[0],h=f[0],d=f[1]/2+Ao/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===c&&(v=0);var m=(t=u[v])[0],y=t[1]/2+Ao/4,_=Math.sin(y),b=Math.cos(y),w=m-h,x=w>=0?1:-1,k=x*w,E=k>Ao,z=p*_;if(ca.add(Math.atan2(z*x*Math.sin(k),g*b+z*Math.cos(k))),o+=E?w+x*Co:w,E^h>=n^m>=n){var A=le(ae(f),ae(t));fe(A);var C=le(i,A);fe(C);var S=(E^w>=0?-1:1)*J(C[2]);(r>S||r===S&&(A[0]||A[1]))&&(a+=E^w>=0?1:-1)}if(!v++)break;h=m,p=_,g=b,f=t}}return(-Eo>o||Eo>o&&0>ca)^1&a}(m,p);d.length?(w||(o.polygonStart(),w=!0),we(d,Ce,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},_=Ae(),b=e(_),w=!1;return y}}function ze(t){return t.length>1}function Ae(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:b,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ce(t,e){return((t=t.x)[0]<0?t[1]-To-Eo:To-t[1])-((e=e.x)[0]<0?e[1]-To-Eo:To-e[1])}function Se(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=0,f=1,h=s.x-l,d=s.y-u;if(o=t-l,h||!(o>0)){if(o/=h,0>h){if(c>o)return;f>o&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=n-l,h||!(0>o)){if(o/=h,0>h){if(o>f)return;o>c&&(c=o)}else if(h>0){if(c>o)return;f>o&&(f=o)}if(o=e-u,d||!(o>0)){if(o/=d,0>d){if(c>o)return;f>o&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=r-u,d||!(0>o)){if(o/=d,0>d){if(o>f)return;o>c&&(c=o)}else if(d>0){if(c>o)return;f>o&&(f=o)}return c>0&&(i.a={x:l+c*h,y:u+c*d}),1>f&&(i.b={x:l+f*h,y:u+f*d}),i}}}}}}function Te(t,e,n,r){function i(r,i){return so(r[0]-t)<Eo?i>0?0:3:so(r[0]-n)<Eo?i>0?2:1:so(r[1]-e)<Eo?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(o,s,l,u){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(s,l))||a(o,s)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+l+4)%4)!==f);else u.point(s[0],s[1])}function u(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function c(t,e){u(t,e)&&s.point(t,e)}function f(t,e){var n=u(t=Math.max(-za,Math.min(za,t)),e=Math.max(-za,Math.min(za,e)));if(d&&p.push([t,e]),w)g=t,v=e,m=n,w=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&b)s.point(t,e);else{var r={a:{x:y,y:_},b:{x:t,y:e}};z(r)?(b||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),x=!1):n&&(s.lineStart(),s.point(t,e),x=!1)}y=t,_=e,b=n}var h,d,p,g,v,m,y,_,b,w,x,k=s,E=Ae(),z=Se(t,e,n,r),A={point:c,lineStart:function(){A.point=f,d&&d.push(p=[]),w=!0,b=!1,y=_=NaN},lineEnd:function(){h&&(f(g,v),m&&b&&E.rejoin(),h.push(E.buffer())),A.point=c,b&&s.lineEnd()},polygonStart:function(){s=E,h=[],d=[],x=!0},polygonEnd:function(){s=k,h=Zi.merge(h);var e=function(t){for(var e=0,n=d.length,r=t[1],i=0;n>i;++i)for(var o,a=1,s=d[i],l=s.length,u=s[0];l>a;++a)o=s[a],u[1]<=r?o[1]>r&&Z(u,o,t)>0&&++e:o[1]<=r&&Z(u,o,t)<0&&--e,u=o;return 0!==e}([t,r]),n=x&&e,i=h.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&we(h,o,e,l,s),s.polygonEnd()),h=d=p=null}};return A}}function Me(t){var e=0,n=Ao/3,r=$e(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ao/180,n=t[1]*Ao/180):[e/Ao*180,n/Ao*180]},i}function Ne(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,J((o-(t*t+n*n)*i*i)/(2*i))]},n}function De(){function t(t,e){Ca+=i*t-r*e,r=t,i=e}var e,n,r,i;Da.point=function(o,a){Da.point=t,e=r=o,n=i=a},Da.lineEnd=function(){t(e,n)}}function Ie(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=Oe(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=Oe(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Oe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Le(t,e){pa+=t,ga+=e,++va}function Pe(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);ma+=a*(e+t)/2,ya+=a*(n+r)/2,_a+=a,Le(e=t,n=r)}var e,n;Oa.point=function(r,i){Oa.point=t,Le(e=r,n=i)}}function Be(){Oa.point=Le}function Fe(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);ma+=a*(r+t)/2,ya+=a*(i+e)/2,_a+=a,ba+=(a=i*t-r*e)*(r+t),wa+=a*(i+e),xa+=3*a,Le(r=t,i=e)}var e,n,r,i;Oa.point=function(o,a){Oa.point=t,Le(e=r=o,n=i=a)},Oa.lineEnd=function(){t(e,n)}}function je(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,Co)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:b};return s}function Re(t){function e(t){return(s?r:n)(t)}function n(e){return qe(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){y=NaN,k.point=o,e.lineStart()}function o(n,r){var o=ae([n,r]),a=t(n,r);i(y,_,m,b,w,x,y=a[0],_=a[1],m=n,b=o[0],w=o[1],x=o[2],s,e),e.point(y,_)}function a(){k.point=n,e.lineEnd()}function l(){r(),k.point=u,k.lineEnd=c}function u(t,e){o(f=t,e),h=y,d=_,p=b,g=w,v=x,k.point=o}function c(){i(y,_,m,b,w,x,h,d,f,p,g,v,s,e),k.lineEnd=a,a()}var f,h,d,p,g,v,m,y,_,b,w,x,k={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),k.lineStart=l},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}function i(e,n,r,s,l,u,c,f,h,d,p,g,v,m){var y=c-e,_=f-n,b=y*y+_*_;if(b>4*o&&v--){var w=s+d,x=l+p,k=u+g,E=Math.sqrt(w*w+x*x+k*k),z=Math.asin(k/=E),A=so(so(k)-1)<Eo||so(r-h)<Eo?(r+h)/2:Math.atan2(x,w),C=t(A,z),S=C[0],T=C[1],M=S-e,N=T-n,D=_*M-y*N;(D*D/b>o||so((y*M+_*N)/b-.5)>.3||a>s*d+l*p+u*g)&&(i(e,n,r,s,l,u,S,T,A,w/=E,x/=E,k,v,m),m.point(S,T),i(S,T,A,w,x,k,c,f,h,d,p,g,v,m))}}var o=.5,a=Math.cos(30*Mo),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function He(t){this.stream=t}function qe(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function We(t){return $e(function(){return t})()}function $e(t){function e(t){return[(t=s(t[0]*Mo,t[1]*Mo))[0]*h+l,u-t[1]*h]}function n(t){return(t=s.invert((t[0]-l)/h,(u-t[1])/h))&&[t[0]*No,t[1]*No]}function r(){s=_e(a=Xe(y,_,b),o);var t=o(g,v);return l=d-t[0]*h,u=p+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,f=Re(function(t,e){return[(t=o(t,e))[0]*h+l,u-t[1]*h]}),h=150,d=480,p=250,g=0,v=0,y=0,_=0,b=0,w=Ea,x=m,k=null,E=null;return e.stream=function(t){return c&&(c.valid=!1),(c=Ue(w(a,f(x(t))))).valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(k=t,Ea):function(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t,e,n){var r=[1,0,0],o=le(ae(t),ae(e)),a=se(o,o),s=o[0],l=a-s*s;if(!l)return!n&&t;var u=i*a/l,c=-i*s/l,f=le(r,o),h=ce(r,u);ue(h,ce(o,c));var d=f,p=se(h,d),g=se(d,d),v=p*p-g*(se(h,h)-1);if(!(0>v)){var m=Math.sqrt(v),y=ce(d,(-p-m)/g);if(ue(y,h),y=he(y),!n)return y;var _,b=t[0],w=e[0],x=t[1],k=e[1];b>w&&(_=b,b=w,w=_);var E=w-b,z=so(E-Ao)<Eo;if(!z&&x>k&&(_=x,x=k,k=_),z||Eo>E?z?x+k>0^y[1]<(so(y[0]-b)<Eo?x:k):x<=y[1]&&y[1]<=k:E>Ao^(b<=y[0]&&y[0]<=w)){var A=ce(d,(-p+m)/g);return ue(A,h),[y,he(A)]}}}function r(e,n){var r=o?t:Ao-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var i=Math.cos(t),o=i>0,a=so(i)>Eo;return Ee(e,function(t){var i,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,h){var d,p=[f,h],g=e(f,h),v=o?g?0:r(f,h):g?r(f+(0>f?Ao:-Ao),h):0;if(!i&&(u=l=g)&&t.lineStart(),g!==l&&(d=n(i,p),(de(i,d)||de(p,d))&&(p[0]+=Eo,p[1]+=Eo,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),d=n(p,i),t.point(d[0],d[1])):(d=n(i,p),t.point(d[0],d[1]),t.lineEnd()),i=d;else if(a&&i&&o^g){var m;v&s||!(m=n(p,i,!0))||(c=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||i&&de(i,p)||t.point(p[0],p[1]),i=p,l=g,s=v},lineEnd:function(){l&&t.lineEnd(),i=null},clean:function(){return c|(u&&l)<<1}}},Qe(t,6*Mo),o?[0,-t]:[-Ao,t-Ao])}((k=+t)*Mo),i()):k},e.clipExtent=function(t){return arguments.length?(E=t,x=t?Te(t[0][0],t[0][1],t[1][0],t[1][1]):m,i()):E},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],r()):[d,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Mo,v=t[1]%360*Mo,r()):[g*No,v*No]},e.rotate=function(t){return arguments.length?(y=t[0]%360*Mo,_=t[1]%360*Mo,b=t.length>2?t[2]%360*Mo:0,r()):[y*No,_*No,b*No]},Zi.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function Ue(t){return qe(t,function(e,n){t.point(e*Mo,n*Mo)})}function Ve(t,e){return[t,e]}function Ye(t,e){return[t>Ao?t-Co:-Ao>t?t+Co:t,e]}function Xe(t,e,n){return t?e||n?_e(Ge(t),Ze(e,n)):Ge(t):e||n?Ze(e,n):Ye}function Ke(t){return function(e,n){return[(e+=t)>Ao?e-Co:-Ao>e?e+Co:e,n]}}function Ge(t){var e=Ke(t);return e.invert=Ke(-t),e}function Ze(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),J(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),J(c*r-s*i)]},n}function Qe(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=Je(n,i),o=Je(n,o),(a>0?o>i:i>o)&&(i+=a*Co)):(i=t+a*Co,o=t-.5*l);for(var u,c=i;a>0?c>o:o>c;c-=l)s.point((u=he([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function Je(t,e){var n=ae(e);n[0]-=t,fe(n);var r=Q(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Eo)%(2*Math.PI)}function tn(t,e,n){var r=Zi.range(t,e-Eo,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function en(t,e,n){var r=Zi.range(t,e-Eo,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function nn(t){return t.source}function rn(t){return t.target}function on(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function an(t,e){function n(t,e){a>0?-To+Eo>e&&(e=-To+Eo):e>To-Eo&&(e=To-Eo);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Ao/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=G(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-To]},n):ln}function sn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return so(i)<Eo?Ve:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-G(i)*Math.sqrt(t*t+n*n)]},n)}function ln(t,e){return[t,Math.log(Math.tan(Ao/4+e/2))]}function un(t){var e,n=We(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ao*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function cn(t,e){return[Math.log(Math.tan(Ao/4+e/2)),-t]}function fn(t){return t[0]}function hn(t){return t[1]}function dn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&Z(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function pn(t,e){return t[0]-e[0]||t[1]-e[1]}function gn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function vn(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,f=r[1]-u,h=(s*(l-u)-f*(i-o))/(f*a-s*c);return[i+h*a,l+h*c]}function mn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function yn(){Bn(this),this.edge=this.site=this.circle=null}function _n(t){var e=Xa.pop()||new yn;return e.site=t,e}function bn(t){Tn(t),Ua.remove(t),Xa.push(t),Bn(t)}function wn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];bn(t);for(var l=o;l.circle&&so(n-l.circle.x)<Eo&&so(r-l.circle.cy)<Eo;)o=l.P,s.unshift(l),bn(l),l=o;s.unshift(l),Tn(l);for(var u=a;u.circle&&so(n-u.circle.x)<Eo&&so(r-u.circle.cy)<Eo;)a=u.N,s.push(u),bn(u),u=a;s.push(u),Tn(u);var c,f=s.length;for(c=1;f>c;++c)On((u=s[c]).edge,(l=s[c-1]).site,u.site,i);(u=s[f-1]).edge=Dn((l=s[0]).site,u.site,null,i),Sn(l),Sn(u)}function xn(t){for(var e,n,r,i,o=t.x,a=t.y,s=Ua._;s;)if((r=kn(s,a)-o)>Eo)s=s.L;else{if(!((i=o-En(s,a))>Eo)){r>-Eo?(e=s.P,n=s):i>-Eo?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=_n(t);if(Ua.insert(e,l),e||n){if(e===n)return Tn(e),n=_n(e.site),Ua.insert(l,n),l.edge=n.edge=Dn(e.site,l.site),Sn(e),void Sn(n);if(!n)return void(l.edge=Dn(e.site,l.site));Tn(e),Tn(n);var u=e.site,c=u.x,f=u.y,h=t.x-c,d=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(h*v-d*g),y=h*h+d*d,_=g*g+v*v,b={x:(v*y-d*_)/m+c,y:(h*_-g*y)/m+f};On(n.edge,u,p,b),l.edge=Dn(u,t,null,b),n.edge=Dn(t,p,null,b),Sn(e),Sn(n)}}function kn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,u=l-e;if(!u)return s;var c=s-r,f=1/o-1/u,h=c/u;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*u)-l+u/2+i-o/2)))/f+r:(r+s)/2}function En(t,e){var n=t.N;if(n)return kn(n,e);var r=t.site;return r.y===e?r.x:1/0}function zn(t){this.site=t,this.edges=[]}function An(t,e){return e.angle-t.angle}function Cn(){Bn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Sn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,f=2*(l*(v=o.y-s)-u*c);if(!(f>=-zo)){var h=l*l+u*u,d=c*c+v*v,p=(v*h-u*d)/f,g=(l*d-c*h)/f,v=g+s,m=Ka.pop()||new Cn;m.arc=t,m.site=i,m.x=p+a,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,_=Ya._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}Ya.insert(y,m),y||(Va=m)}}}}function Tn(t){var e=t.circle;e&&(e.P||(Va=e.N),Ya.remove(e),Ka.push(e),Bn(e),t.circle=null)}function Mn(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,v=(h+p)/2;if(g===d){if(a>v||v>=s)return;if(h>p){if(o){if(o.y>=u)return}else o={x:v,y:l};n={x:v,y:u}}else{if(o){if(o.y<l)return}else o={x:v,y:u};n={x:v,y:l}}}else if(i=(d+g)/2-(r=(h-p)/(g-d))*v,-1>r||r>1)if(h>p){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(g>d){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Nn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Dn(t,e,n,r){var i=new Nn(t,e);return Wa.push(i),n&&On(i,t,e,n),r&&On(i,e,t,r),$a[t.i].edges.push(new Ln(i,t,e)),$a[e.i].edges.push(new Ln(i,e,t)),i}function In(t,e,n){var r=new Nn(t,null);return r.a=e,r.b=n,Wa.push(r),r}function On(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Ln(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Pn(){this._=null}function Bn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Fn(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function jn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Rn(t){for(;t.L;)t=t.L;return t}function Hn(t,e){var n,r,i,o=t.sort(qn).pop();for(Wa=[],$a=new Array(t.length),Ua=new Pn,Ya=new Pn;;)if(i=Va,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&($a[o.i]=new zn(o),xn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;wn(i.arc)}e&&(function(t){for(var e,n=Wa,r=Se(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Mn(e=n[i],t)||!r(e)||so(e.a.x-e.b.x)<Eo&&so(e.a.y-e.b.y)<Eo)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,s,l,u,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=$a,v=g.length;v--;)if((o=g[v])&&o.prepare())for(l=(s=o.edges).length,a=0;l>a;)r=(c=s[a].end()).x,i=c.y,n=(u=s[++a%l].start()).y,(so(r-(e=u.x))>Eo||so(i-n)>Eo)&&(s.splice(a,0,new Ln(In(o.site,c,so(r-f)<Eo&&p-i>Eo?{x:f,y:so(e-f)<Eo?n:p}:so(i-p)<Eo&&h-r>Eo?{x:so(n-p)<Eo?e:h,y:p}:so(r-h)<Eo&&i-d>Eo?{x:h,y:so(e-h)<Eo?n:d}:so(i-d)<Eo&&r-f>Eo?{x:so(n-d)<Eo?e:f,y:d}:null),o.site,null)),++l)}(e));var a={cells:$a,edges:Wa};return Ua=Ya=Wa=$a=null,a}function qn(t,e){return e.y-t.y||e.x-t.x}function Wn(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function $n(t){return t.x}function Un(t){return t.y}function Vn(t,e){t=Zi.rgb(t),e=Zi.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+gt(Math.round(n+o*t))+gt(Math.round(r+a*t))+gt(Math.round(i+s*t))}}function Yn(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Gn(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Xn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Kn(t,e){var n,r,i,o=Za.lastIndex=Qa.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Za.exec(t))&&(r=Qa.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Xn(n,r)})),o=Qa.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;e>r;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Gn(t,e){for(var n,r=Zi.interpolators.length;--r>=0&&!(n=Zi.interpolators[r](t,e)););return n}function Zn(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(Gn(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function Qn(t){return function(e){return 1-t(1-e)}}function Jn(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function tr(t){return t*t}function er(t){return t*t*t}function nr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function rr(t){return 1-Math.cos(t*To)}function ir(t){return Math.pow(2,10*(t-1))}function or(t){return 1-Math.sqrt(1-t*t)}function ar(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function sr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function lr(t){var e=[t.a,t.b],n=[t.c,t.d],r=cr(e),i=ur(e,n),o=cr(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*No,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*No:0}function ur(t,e){return t[0]*e[0]+t[1]*e[1]}function cr(t){var e=Math.sqrt(ur(t,t));return e&&(t[0]/=e,t[1]/=e),e}function fr(t){return t.length?t.pop()+",":""}function hr(t,e){var n=[],r=[];return t=Zi.transform(t),e=Zi.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Xn(t[0],e[0])},{i:i-2,x:Xn(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(fr(n)+"rotate(",null,")")-2,x:Xn(t,e)})):e&&n.push(fr(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(fr(n)+"skewX(",null,")")-2,x:Xn(t,e)}):e&&n.push(fr(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(fr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Xn(t[0],e[0])},{i:i-2,x:Xn(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(fr(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function dr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function pr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function gr(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;for(var n=vr(t),r=vr(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)i.push(e=e.parent);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function vr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function mr(t){t.fixed|=2}function yr(t){t.fixed&=-7}function _r(t){t.fixed|=4,t.px=t.x,t.py=t.y}function br(t){t.fixed&=-5}function wr(t,e){return Zi.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Cr,t}function xr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function kr(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Er(t){return t.children}function zr(t){return t.value}function Ar(t,e){return e.value-t.value}function Cr(t){return Zi.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function Sr(t){return t.x}function Tr(t){return t.y}function Mr(t,e,n){t.y0=e,t.y=n}function Nr(t){return Zi.range(t.length)}function Dr(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Ir(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Or(t){return t.reduce(Lr,0)}function Lr(t,e){return t+e[1]}function Pr(t,e){return Br(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Br(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Fr(t){return[Zi.min(t),Zi.max(t)]}function jr(t,e){return t.value-e.value}function Rr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Hr(t,e){t._pack_next=e,e._pack_prev=t}function qr(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Wr(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,f=-1/0,h=1/0,d=-1/0;if(n.forEach($r),(r=n[0]).x=-r.r,r.y=0,e(r),u>1&&((i=n[1]).x=i.r,i.y=0,e(i),u>2))for(Vr(r,i,o=n[2]),e(o),Rr(r,o),r._pack_prev=o,Rr(o,i),i=r._pack_next,a=3;u>a;a++){Vr(r,i,o=n[a]);var p=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(qr(s,o)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!qr(l,o);l=l._pack_prev,v++);p?(v>g||g==v&&i.r<r.r?Hr(r,i=s):Hr(r=l,i),a--):(Rr(r,o),i=o,e(o))}var m=(c+f)/2,y=(h+d)/2,_=0;for(a=0;u>a;a++)(o=n[a]).x-=m,o.y-=y,_=Math.max(_,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=_,n.forEach(Ur)}}function $r(t){t._pack_next=t._pack_prev=t}function Ur(t){delete t._pack_next,delete t._pack_prev}function Vr(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function Yr(t,e){return t.parent==e.parent?1:2}function Xr(t){var e=t.children;return e.length?e[0]:t.t}function Kr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Gr(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Zr(t,e,n){return t.a.parent===e.parent?t.a:n}function Qr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Jr(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function ti(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function ei(t){return t.rangeExtent?t.rangeExtent():ti(t.range())}function ni(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function ri(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function ii(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=Zi.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function oi(t,e){return Zi.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ai(t,e){return ri(t,function(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:us}(si(t,e)[2]))}function si(t,e){null==e&&(e=10);var n=ti(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function li(t,e){return Zi.range.apply(Zi,si(t,e))}function ui(t,e,n){var r=si(t,e);if(n){var i=Zo.exec(n);if(i.shift(),"s"===i[8]){var o=Zi.formatPrefix(Math.max(so(r[0]),so(r[1])));return i[7]||(i[7]="."+ci(o.scale(r[2]))),i[8]="f",n=Zi.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+function(t,e){var n=ci(e[2]);return t in cs?Math.abs(n-ci(Math.max(so(e[0]),so(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+ci(r[2])+"f";return Zi.format(n)}function ci(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function fi(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function hi(){return 0}function di(t){return t.innerRadius}function pi(t){return t.outerRadius}function gi(t){return t.startAngle}function vi(t){return t.endAngle}function mi(t){return t&&t.padAngle}function yi(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function _i(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,f=t[1]+u,h=e[0]+l,d=e[1]+u,p=(c+h)/2,g=(f+d)/2,v=h-c,m=d-f,y=v*v+m*m,_=n-r,b=c*d-h*f,w=(0>m?-1:1)*Math.sqrt(Math.max(0,_*_*y-b*b)),x=(b*m-v*w)/y,k=(-b*v-m*w)/y,E=(b*m+v*w)/y,z=(-b*v+m*w)/y,A=x-p,C=k-g,S=E-p,T=z-g;return A*A+C*C>S*S+T*T&&(x=E,k=z),[[x-l,k-u],[x*n/_,k*n/_]]}function bi(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],f=-1,h=e.length,d=wt(n),p=wt(r);++f<h;)i.call(this,l=e[f],f)?c.push([+d.call(this,l,f),+p.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=fn,r=hn,i=be,o=wi,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=ys.get(t)||wi).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function wi(t){return t.length>1?t.join("L"):t+"Z"}function xi(t){return t.join("L")+"Z"}function ki(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Ei(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function zi(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return wi(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-(s=e[1])[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)r+="S"+((o=t[l])[0]-(s=e[u])[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Ai(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,r.push([i*((a=t[s])[0]-n[0]),i*(a[1]-n[1])]);return r}function Ci(t){if(t.length<3)return wi(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Si(ws,a),",",Si(ws,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Ti(l,a,s);return t.pop(),l.push("L",r),l.join("")}function Si(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ti(t,e,n){t.push("C",Si(_s,e),",",Si(_s,n),",",Si(bs,e),",",Si(bs,n),",",Si(ws,e),",",Si(ws,n))}function Mi(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ni(t){for(var e,n,r,i=-1,o=t.length;++i<o;)r=(e=t[i])[1]-To,e[0]=(n=e[0])*Math.cos(r),e[1]=n*Math.sin(r);return t}function Di(t){function e(e){function l(){g.push("M",s(t(m),f),c,u(t(v.reverse()),f),"Z")}for(var h,d,p,g=[],v=[],m=[],y=-1,_=e.length,b=wt(n),w=wt(i),x=n===r?function(){return d}:wt(r),k=i===o?function(){return p}:wt(o);++y<_;)a.call(this,h=e[y],y)?(v.push([d=+b.call(this,h,y),p=+w.call(this,h,y)]),m.push([+x.call(this,h,y),+k.call(this,h,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=fn,r=fn,i=0,o=hn,a=be,s=wi,l=s.key,u=s,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=ys.get(t)||wi).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Ii(t){return t.radius}function Oi(t){return[t.x,t.y]}function Li(){return 64}function Pi(){return"circle"}function Bi(t){var e=Math.sqrt(t/Ao);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Fi(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ji(t,e,n){return ho(t,Ss),t.namespace=e,t.id=n,t}function Ri(t,e,n,r){var i=t.id,o=t.namespace;return q(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Hi(t){return null==t&&(t=""),function(){this.textContent=t}}function qi(t){return null==t?"__transition__":"__transition_"+t+"__"}function Wi(t,e,n,r,i){function o(n){var i=d.active,o=d[i];for(var l in o&&(o.timer.c=null,o.timer.t=NaN,--d.count,delete d[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index)),d)if(r>+l){var g=d[l];g.timer.c=null,g.timer.t=NaN,--d.count,delete d[l]}d.active=r,p.event&&p.event.start.call(t,t.__data__,e),h=[],p.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&h.push(r)}),f=p.ease,c=p.duration,u.c=a,Et(function(){return u.c&&a(n||1)&&(u.c=null,u.t=NaN),1},0,s)}function a(i){for(var o=i/c,a=f(o),s=h.length;s>0;)h[--s].call(t,a);return o>=1?(p.event&&p.event.end.call(t,t.__data__,e),--d.count?delete d[r]:delete t[n],1):void 0}var s,u,c,f,h,d=t[n]||(t[n]={active:0,count:0}),p=d[r];p||(u=Et(function(t){var e=p.delay;return u.t=e+s,t>=e?o(t-e):void(u.c=o)},0,s=i.time),p=d[r]={tween:new l,time:s,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++d.count)}function $i(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Ui(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function Vi(t){return t.toISOString()}function Yi(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=Zi.bisect(Bs,r);return i==Bs.length?[e.year,si(t.map(function(t){return t/31536e6}),n)[2]]:i?e[r/Bs[i-1]<Bs[i]/r?i-1:i]:[Rs,si(t,n)[2]]}return r.invert=function(e){return Xi(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Xi)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Xi(+n+1),e).length}var o=r.domain(),a=ti(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(ri(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Xi(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Xi(+e+1);return e}}:t))},r.ticks=function(t,e){var n=ti(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Xi(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Yi(t.copy(),e,n)},oi(r,t)}function Xi(t){return new Date(t)}function Ki(t){return JSON.parse(t.responseText)}function Gi(t){var e=to.createRange();return e.selectNode(to.body),e.createContextualFragment(t.responseText)}var Zi={version:"3.5.8"},Qi=[].slice,Ji=function(t){return Qi.call(t)},to=this.document;if(to)try{Ji(to.documentElement.childNodes)}catch(Ws){Ji=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),to)try{to.createElement("DIV").style.setProperty("opacity",0,"")}catch($s){var eo=this.Element.prototype,no=eo.setAttribute,ro=eo.setAttributeNS,io=this.CSSStyleDeclaration.prototype,oo=io.setProperty;eo.setAttribute=function(t,e){no.call(this,t,e+"")},eo.setAttributeNS=function(t,e,n){ro.call(this,t,e,n+"")},io.setProperty=function(t,e,n){oo.call(this,t,e+"",n)}}Zi.ascending=n,Zi.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},Zi.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},Zi.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},Zi.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},Zi.sum=function(t,e){var n,r=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)i(n=+t[a])&&(r+=n);else for(;++a<o;)i(n=+e.call(t,t[a],a))&&(r+=n);return r},Zi.mean=function(t,e){var n,o=0,a=t.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)i(n=r(t[s]))?o+=n:--l;else for(;++s<a;)i(n=r(e.call(t,t[s],s)))?o+=n:--l;return l?o/l:void 0},Zi.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},Zi.median=function(t,e){var o,a=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)i(o=r(t[l]))&&a.push(o);else for(;++l<s;)i(o=r(e.call(t,t[l],l)))&&a.push(o);return a.length?Zi.quantile(a.sort(n),.5):void 0},Zi.variance=function(t,e){var n,o,a=t.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)i(n=r(t[u]))&&(l+=(o=n-s)*(n-(s+=o/++c)));else for(;++u<a;)i(n=r(e.call(t,t[u],u)))&&(l+=(o=n-s)*(n-(s+=o/++c)));return c>1?l/(c-1):void 0},Zi.deviation=function(){var t=Zi.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ao=o(n);Zi.bisectLeft=ao.left,Zi.bisect=Zi.bisectRight=ao.right,Zi.bisector=function(t){return o(1===t.length?function(e,r){return n(t(e),r)}:t)},Zi.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},Zi.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},Zi.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(0>n?0:n);n>e;)i[e]=[r,r=t[++e]];return i},Zi.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=Zi.min(arguments,a),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},Zi.transpose=function(t){return Zi.zip.apply(Zi,t)},Zi.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Zi.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Zi.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Zi.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var so=Math.abs;Zi.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(t){for(var e=1;t*e%1;)e*=10;return e}(so(n)),a=-1;if(t*=o,e*=o,0>(n*=o))for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},Zi.map=function(t,e){var n=new l;if(t instanceof l)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var lo="__proto__",uo="\0";s(l,{has:f,get:function(t){return this._[u(t)]},set:function(t,e){return this._[u(t)]=e},remove:h,keys:d,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:c(e),value:this._[e]});return t},size:p,empty:g,forEach:function(t){for(var e in this._)t.call(this,c(e),this._[e])}}),Zi.nest=function(){function t(o,a,s){if(s>=i.length)return n?n.call(r,a):e?a.sort(e):a;for(var u,c,f,h,d=-1,p=a.length,g=i[s++],v=new l;++d<p;)(h=v.get(u=g(c=a[d])))?h.push(c):v.set(u,[c]);return o?(c=o(),f=function(e,n){c.set(e,t(o,n,s))}):(c={},f=function(e,n){c[e]=t(o,n,s)}),v.forEach(f),c}var e,n,r={},i=[],o=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(e){return function t(e,n){if(n>=i.length)return e;var r=[],a=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}(t(Zi.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return o[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},Zi.set=function(t){var e=new v;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},s(v,{has:f,add:function(t){return this._[u(t+="")]=!0,t},remove:h,values:d,size:p,empty:g,forEach:function(t){for(var e in this._)t.call(this,c(e))}}),Zi.behavior={},Zi.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=y(t,e,e[n]);return t};var co=["webkit","ms","moz","Moz","o","O"];Zi.dispatch=function(){for(var t=new w,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=x(t);return t},w.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},Zi.event=null,Zi.requote=function(t){return t.replace(fo,"\\$&")};var fo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ho={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},po=function(t,e){return e.querySelector(t)},go=function(t,e){return e.querySelectorAll(t)},vo=function(t,e){var n=t.matches||t[_(t,"matchesSelector")];return(vo=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(po=function(t,e){return Sizzle(t,e)[0]||null},go=Sizzle,vo=Sizzle.matchesSelector),Zi.selection=function(){return Zi.select(to.documentElement)};var mo=Zi.selection.prototype=[];mo.select=function(t){var e,n,r,i,o=[];t=C(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return A(o)},mo.selectAll=function(t){var e,n,r=[];t=S(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(e=Ji(t.call(n,n.__data__,s,i))),e.parentNode=n);return A(r)};var yo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zi.ns={prefix:yo,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),yo.hasOwnProperty(n)?{space:yo[n],local:t}:t}},mo.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=Zi.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},mo.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=D(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!N(t[i]).test(e))return!1;return!0}for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},mo.style=function(t,n,r){var i=arguments.length;if(3>i){if("string"!=typeof t){for(r in 2>i&&(n=""),t)this.each(L(r,t[r],n));return this}if(2>i){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(L(t,n,r))},mo.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},mo.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},mo.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},mo.append=function(t){return t=B(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},mo.insert=function(t,e){return t=B(t),e=C(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},mo.remove=function(){return this.each(F)},mo.data=function(t,e){function n(t,n){var r,i,o,a=t.length,f=n.length,h=Math.min(a,f),d=new Array(f),p=new Array(f),g=new Array(a);if(e){var v,m=new l,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(m.has(v=e.call(i,i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<f;)(i=m.get(v=e.call(n,o=n[r],r)))?!0!==i&&(d[r]=i,i.__data__=o):p[r]=j(o),m.set(v,!0);for(r=-1;++r<a;)r in y&&!0!==m.get(y[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)o=n[r],(i=t[r])?(i.__data__=o,d[r]=i):p[r]=j(o);for(;f>r;++r)p[r]=j(n[r]);for(;a>r;++r)g[r]=t[r]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,s.push(p),u.push(d),c.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=W([]),u=A([]),c=A([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return u.enter=function(){return s},u.exit=function(){return c},u},mo.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},mo.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=R(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return A(i)},mo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},mo.sort=function(t){t=H.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},mo.each=function(t){return q(this,function(e,n,r){t.call(e,e.__data__,n,r)})},mo.call=function(t){var e=Ji(arguments);return t.apply(e[0]=this,e),this},mo.empty=function(){return!this.node()},mo.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},mo.size=function(){var t=0;return q(this,function(){++t}),t};var _o=[];Zi.selection.enter=W,Zi.selection.enter.prototype=_o,_o.append=mo.append,_o.empty=mo.empty,_o.node=mo.node,_o.call=mo.call,_o.size=mo.size,_o.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return A(a)},_o.insert=function(t,e){return arguments.length<2&&(e=function(t){var e,n;return function(r,i,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<l;);return a}}(this)),mo.insert.call(this,t,e)},Zi.select=function(e){var n;return"string"==typeof e?(n=[po(e,to)]).parentNode=to.documentElement:(n=[e]).parentNode=t(e),A([n])},Zi.selectAll=function(t){var e;return"string"==typeof t?(e=Ji(go(t,to))).parentNode=to.documentElement:(e=Ji(t)).parentNode=null,A([e])},mo.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){for(n in 2>r&&(e=!1),t)this.each($(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each($(t,e,n))};var bo=Zi.map({mouseenter:"mouseover",mouseleave:"mouseout"});to&&bo.forEach(function(t){"on"+t in to&&bo.remove(t)});var wo,xo=0;Zi.mouse=function(t){return X(t,E())};var ko=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Zi.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=E().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return X(t,r)},Zi.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,e,n,o,a){return function(){var s,l=this,u=Zi.event.target,c=l.parentNode,f=r.of(l,arguments),h=0,d=t(),p=".drag"+(null==d?"":"-"+d),g=Zi.select(n(u)).on(o+p,function(){var t,n,r=e(c,d);r&&(h|=(t=r[0]-m[0])|(n=r[1]-m[1]),m=r,f({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:n}))}).on(a+p,function(){e(c,d)&&(g.on(o+p,null).on(a+p,null),v(h&&Zi.event.target===u),f({type:"dragend"}))}),v=Y(u),m=e(c,d);s=i?[(s=i.apply(l,arguments)).x-m[0],s.y-m[1]]:[0,0],f({type:"dragstart"})}}var r=z(t,"drag","dragstart","dragend"),i=null,o=n(b,Zi.mouse,e,"mousemove","mouseup"),a=n(K,Zi.touch,m,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},Zi.rebind(t,r,"on")},Zi.touches=function(t,e){return arguments.length<2&&(e=E().touches),e?Ji(e).map(function(e){var n=X(t,e);return n.identifier=e.identifier,n}):[]};var Eo=1e-6,zo=Eo*Eo,Ao=Math.PI,Co=2*Ao,So=Co-Eo,To=Ao/2,Mo=Ao/180,No=180/Ao,Do=Math.SQRT2;Zi.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[2],l=e[0]-i,u=e[1]-o,c=l*l+u*u;if(zo>c)r=Math.log(s/a)/Do,n=function(t){return[i+t*l,o+t*u,a*Math.exp(Do*t*r)]};else{var f=Math.sqrt(c),h=(s*s-a*a+4*c)/(2*a*2*f),d=(s*s-a*a-4*c)/(2*s*2*f),p=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(d*d+1)-d);r=(g-p)/Do,n=function(t){var e=t*r,n=tt(p),s=a/(2*f)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Do*e+p)-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[i+s*l,o+s*u,a*n/tt(Do*e+p)]}}return n.duration=1e3*r,n},Zi.behavior.zoom=function(){function t(t){t.on(M,c).on(Oo+".zoom",h).on("dblclick.zoom",d).on(I,f)}function n(t){return[(t[0]-E.x)/E.k,(t[1]-E.y)/E.k]}function r(t){E.k=Math.max(C[0],Math.min(C[1],t))}function i(t,e){E.x+=t[0]-(e=[e[0]*E.k+E.x,e[1]*E.k+E.y])[0],E.y+=t[1]-e[1]}function o(e,n,o,a){e.__chart__={x:E.x,y:E.y,k:E.k},r(Math.pow(2,a)),i(g=n,o),e=Zi.select(e),S>0&&(e=e.transition().duration(S)),e.call(t.event)}function a(){b&&b.domain(_.range().map(function(t){return(t-E.x)/E.k}).map(_.invert)),x&&x.domain(w.range().map(function(t){return(t-E.y)/E.k}).map(w.invert))}function s(t){T++||t({type:"zoomstart"})}function l(t){a(),t({type:"zoom",scale:E.k,translate:[E.x,E.y]})}function u(t){--T||(t({type:"zoomend"}),g=null)}function c(){var t=this,r=Zi.event.target,o=O.of(t,arguments),a=0,c=Zi.select(e(t)).on(N,function(){a=1,i(Zi.mouse(t),f),l(o)}).on(D,function(){c.on(N,null).on(D,null),h(a&&Zi.event.target===r),u(o)}),f=n(Zi.mouse(t)),h=Y(t);Cs.call(t),s(o)}function f(){function t(){var t=Zi.touches(p);return d=E.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var e=Zi.event.target;Zi.select(e).on(b,a).on(w,h),x.push(e);for(var n=Zi.event.changedTouches,r=0,i=n.length;i>r;++r)v[n[r].identifier]=null;var s=t(),l=Date.now();if(1===s.length)500>l-y&&(o(p,u=s[0],v[u.identifier],Math.floor(Math.log(E.k)/Math.LN2)+1),k()),y=l;else if(s.length>1){var u,c=s[1],f=(u=s[0])[0]-c[0],d=u[1]-c[1];m=f*f+d*d}}function a(){var t,e,n,o,a=Zi.touches(p);Cs.call(p);for(var s=0,u=a.length;u>s;++s,o=null)if(o=v[(n=a[s]).identifier]){if(e)break;t=n,e=o}if(o){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r(f*d)}y=null,i(t,e),l(g)}function h(){if(Zi.event.touches.length){for(var e=Zi.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var i in v)return void t()}Zi.selectAll(x).on(_,null),z.on(M,c).on(I,f),A(),u(g)}var d,p=this,g=O.of(p,arguments),v={},m=0,_=".zoom-"+Zi.event.changedTouches[0].identifier,b="touchmove"+_,w="touchend"+_,x=[],z=Zi.select(p),A=Y(p);e(),s(g),z.on(M,null).on(I,e)}function h(){var t=O.of(this,arguments);m?clearTimeout(m):(Cs.call(this),p=n(g=v||Zi.mouse(this)),s(t)),m=setTimeout(function(){m=null,u(t)},50),k(),r(Math.pow(2,.002*Io())*E.k),i(g,p),l(t)}function d(){var t=Zi.mouse(this),e=Math.log(E.k)/Math.LN2;o(this,t,n(t),Zi.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var p,g,v,m,y,_,b,w,x,E={x:0,y:0,k:1},A=[960,500],C=Lo,S=250,T=0,M="mousedown.zoom",N="mousemove.zoom",D="mouseup.zoom",I="touchstart.zoom",O=z(t,"zoomstart","zoom","zoomend");return Oo||(Oo="onwheel"in to?(Io=function(){return-Zi.event.deltaY*(Zi.event.deltaMode?120:1)},"wheel"):"onmousewheel"in to?(Io=function(){return Zi.event.wheelDelta},"mousewheel"):(Io=function(){return-Zi.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=O.of(this,arguments),e=E;zs?Zi.select(this).transition().each("start.zoom",function(){E=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=A[0],r=g?g[0]:n/2,i=g?g[1]:A[1]/2,o=Zi.interpolateZoom([(r-E.x)/E.k,(i-E.y)/E.k,n/E.k],[(r-e.x)/e.k,(i-e.y)/e.k,n/e.k]);return function(e){var a=o(e),s=n/a[2];this.__chart__=E={x:r-a[0]*s,y:i-a[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){u(t)}).each("end.zoom",function(){u(t)}):(this.__chart__=E,s(t),l(t),u(t))})},t.translate=function(e){return arguments.length?(E={x:+e[0],y:+e[1],k:E.k},a(),t):[E.x,E.y]},t.scale=function(e){return arguments.length?(E={x:E.x,y:E.y,k:null},r(+e),a(),t):E.k},t.scaleExtent=function(e){return arguments.length?(C=null==e?Lo:[+e[0],+e[1]],t):C},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(A=e&&[+e[0],+e[1]],t):A},t.duration=function(e){return arguments.length?(S=+e,t):S},t.x=function(e){return arguments.length?(b=e,_=e.copy(),E={x:0,y:0,k:1},t):b},t.y=function(e){return arguments.length?(x=e,w=e.copy(),E={x:0,y:0,k:1},t):x},Zi.rebind(t,O,"on")};var Io,Oo,Lo=[0,1/0];Zi.color=nt,nt.prototype.toString=function(){return this.rgb()+""},Zi.hsl=rt;var Po=rt.prototype=new nt;Po.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new rt(this.h,this.s,this.l/t)},Po.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new rt(this.h,this.s,t*this.l)},Po.rgb=function(){return it(this.h,this.s,this.l)},Zi.hcl=ot;var Bo=ot.prototype=new nt;Bo.brighter=function(t){return new ot(this.h,this.c,Math.min(100,this.l+Fo*(arguments.length?t:1)))},Bo.darker=function(t){return new ot(this.h,this.c,Math.max(0,this.l-Fo*(arguments.length?t:1)))},Bo.rgb=function(){return at(this.h,this.c,this.l).rgb()},Zi.lab=st;var Fo=18,jo=.95047,Ro=1,Ho=1.08883,qo=st.prototype=new nt;qo.brighter=function(t){return new st(Math.min(100,this.l+Fo*(arguments.length?t:1)),this.a,this.b)},qo.darker=function(t){return new st(Math.max(0,this.l-Fo*(arguments.length?t:1)),this.a,this.b)},qo.rgb=function(){return lt(this.l,this.a,this.b)},Zi.rgb=ht;var Wo=ht.prototype=new nt;Wo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new ht(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ht(i,i,i)},Wo.darker=function(t){return new ht((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},Wo.hsl=function(){return mt(this.r,this.g,this.b)},Wo.toString=function(){return"#"+gt(this.r)+gt(this.g)+gt(this.b)};var $o=Zi.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$o.forEach(function(t,e){$o.set(t,dt(e))}),Zi.functor=wt,Zi.xhr=xt(m),Zi.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=kt(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(r=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u>c;){var r,s=1;if(10===(r=t.charCodeAt(c++)))i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,o={},a={},s=[],u=t.length,c=0,f=0;(r=n())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=n();e&&null==(h=e(h,f++))||s.push(h)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new v,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},Zi.csv=Zi.dsv(",","text/csv"),Zi.tsv=Zi.dsv("\t","text/tab-separated-values");var Uo,Vo,Yo,Xo,Ko=this[_(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Zi.timer=function(){Et.apply(this,arguments)},Zi.timer.flush=function(){At(),Ct()},Zi.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Go=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*so(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});Zi.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=Zi.round(t,St(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Go[8+n/3]};var Zo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Qo=Zi.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Zi.round(t,St(t,e))).toFixed(Math.max(0,Math.min(20,St(t*(1+1e-15),e))))}}),Jo=Zi.time={},ta=Date;Nt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ea.setUTCDate.apply(this._,arguments)},setDay:function(){ea.setUTCDay.apply(this._,arguments)},setFullYear:function(){ea.setUTCFullYear.apply(this._,arguments)},setHours:function(){ea.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ea.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ea.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ea.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ea.setUTCSeconds.apply(this._,arguments)},setTime:function(){ea.setTime.apply(this._,arguments)}};var ea=Date.prototype;Jo.year=Dt(function(t){return(t=Jo.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Jo.years=Jo.year.range,Jo.years.utc=Jo.year.utc.range,Jo.day=Dt(function(t){var e=new ta(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Jo.days=Jo.day.range,Jo.days.utc=Jo.day.utc.range,Jo.dayOfYear=function(t){var e=Jo.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Jo[t]=Dt(function(t){return(t=Jo.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Jo.year(t).getDay();return Math.floor((Jo.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Jo[t+"s"]=n.range,Jo[t+"s"].utc=n.utc.range,Jo[t+"OfYear"]=function(t){var n=Jo.year(t).getDay();return Math.floor((Jo.dayOfYear(t)+(n+e)%7)/7)}}),Jo.week=Jo.sunday,Jo.weeks=Jo.sunday.range,Jo.weeks.utc=Jo.sunday.utc.range,Jo.weekOfYear=Jo.sundayOfYear;var na={"-":"",_:" ",0:"0"},ra=/^\s*\d+/,ia=/^%/;Zi.locale=function(t){return{numberFormat:Tt(t),timeFormat:Ot(t)}};var oa=Zi.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Zi.format=oa.numberFormat,Zi.geo={},te.prototype={s:0,t:0,add:function(t){ee(t,this.t,aa),ee(aa.s,this.s,this),this.s?this.t+=aa.t:this.s=aa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var aa=new te;Zi.geo.stream=function(t,e){t&&sa.hasOwnProperty(t.type)?sa[t.type](t,e):ne(t,e)};var sa={Feature:function(t,e){ne(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ne(n[r].geometry,e)}},la={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){re(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)re(n[r],e,0)},Polygon:function(t,e){ie(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ie(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ne(n[r],e)}};Zi.geo.area=function(t){return ua=0,Zi.geo.stream(t,fa),ua};var ua,ca=new te,fa={sphere:function(){ua+=4*Ao},point:b,lineStart:b,lineEnd:b,polygonStart:function(){ca.reset(),fa.lineStart=oe},polygonEnd:function(){var t=2*ca;ua+=0>t?4*Ao+t:t,fa.lineStart=fa.lineEnd=fa.point=b}};Zi.geo.bounds=function(){function t(t,e){_.push(b=[c=t,h=t]),f>e&&(f=e),e>d&&(d=e)}function e(e,n){var r=ae([e*Mo,n*Mo]);if(m){var i=le(m,r),o=le([i[1],-i[0],0],i);fe(o),o=he(o);var a=e-p,l=a>0?1:-1,u=o[0]*No*l,g=so(a)>180;if(g^(u>l*p&&l*e>u))(v=o[1]*No)>d&&(d=v);else if(g^((u=(u+360)%360-180)>l*p&&l*e>u)){var v;f>(v=-o[1]*No)&&(f=v)}else f>n&&(f=n),n>d&&(d=n);g?p>e?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>p?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e)}else t(e,n);m=r,p=e}function n(){w.point=e}function r(){b[0]=c,b[1]=h,w.point=t,m=null}function i(t,n){if(m){var r=t-p;y+=so(r)>180?r+(r>0?360:-360):r}else g=t,v=n;fa.point(t,n),e(t,n)}function o(){fa.lineStart()}function a(){i(g,v),fa.lineEnd(),so(y)>Eo&&(c=-(h=180)),b[0]=c,b[1]=h,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,h,d,p,g,v,m,y,_,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,fa.polygonStart()},polygonEnd:function(){fa.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,0>ca?(c=-(h=180),f=-(d=90)):y>Eo?d=90:-Eo>y&&(f=-90),b[0]=c,b[1]=h}};return function(t){if(d=h=-(c=f=1/0),_=[],Zi.geo.stream(t,w),o=_.length){_.sort(l);for(var e=1,n=[p=_[0]];o>e;++e)u((i=_[e])[0],p)||u(i[1],p)?(s(p[0],i[1])>s(p[0],p[1])&&(p[1]=i[1]),s(i[0],p[1])>s(p[0],p[1])&&(p[0]=i[0])):n.push(p=i);for(var r,i,o,a=-1/0,p=(e=0,n[o=n.length-1]);o>=e;p=i,++e)(r=s(p[1],(i=n[e])[0]))>a&&(a=r,c=i[0],h=p[1])}return _=b=null,1/0===c||1/0===f?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,d]]}}(),Zi.geo.centroid=function(t){ha=da=pa=ga=va=ma=ya=_a=ba=wa=xa=0,Zi.geo.stream(t,ka);var e=ba,n=wa,r=xa,i=e*e+n*n+r*r;return zo>i&&(e=ma,n=ya,r=_a,Eo>da&&(e=pa,n=ga,r=va),zo>(i=e*e+n*n+r*r))?[NaN,NaN]:[Math.atan2(n,e)*No,J(r/Math.sqrt(i))*No]};var ha,da,pa,ga,va,ma,ya,_a,ba,wa,xa,ka={sphere:b,point:pe,lineStart:ve,lineEnd:me,polygonStart:function(){ka.lineStart=ye},polygonEnd:function(){ka.lineStart=ve}},Ea=Ee(be,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ao:-Ao,l=so(o-n);so(l-Ao)<Eo?(t.point(n,r=(r+a)/2>0?To:-To),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Ao&&(so(n-i)<Eo&&(n-=i*Eo),so(o-s)<Eo&&(o-=s*Eo),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return so(a)>Eo?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-Ao,i=n*To),r.point(0,i),r.point(Ao,i),r.point(Ao,0),r.point(Ao,-i),r.point(0,-i),r.point(-Ao,-i),r.point(-Ao,0),r.point(-Ao,i);else if(so(t[0]-e[0])>Eo){var o=t[0]<e[0]?Ao:-Ao;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Ao,-Ao/2]),za=1e9;Zi.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=Te(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(Zi.geo.conicEqualArea=function(){return Me(Ne)}).raw=Ne,Zi.geo.albers=function(){return Zi.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Zi.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=Zi.geo.albers(),a=Zi.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Zi.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Eo,f+.12*u+Eo],[c-.214*u-Eo,f+.234*u-Eo]]).stream(l).point,i=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Eo,f+.166*u+Eo],[c-.115*u-Eo,f+.234*u-Eo]]).stream(l).point,t},t.scale(1070)};var Aa,Ca,Sa,Ta,Ma,Na,Da={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Ca=0,Da.lineStart=De},polygonEnd:function(){Da.lineStart=Da.lineEnd=Da.point=b,Aa+=so(Ca/2)}},Ia={point:function(t,e){Sa>t&&(Sa=t),t>Ma&&(Ma=t),Ta>e&&(Ta=e),e>Na&&(Na=e)},lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Oa={point:Le,lineStart:Pe,lineEnd:Be,polygonStart:function(){Oa.lineStart=Fe},polygonEnd:function(){Oa.point=Le,Oa.lineStart=Pe,Oa.lineEnd=Be}};Zi.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),Zi.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,s=4.5;return t.area=function(t){return Aa=0,Zi.geo.stream(t,i(Da)),Aa},t.centroid=function(t){return pa=ga=va=ma=ya=_a=ba=wa=xa=0,Zi.geo.stream(t,i(Oa)),xa?[ba/xa,wa/xa]:_a?[ma/_a,ya/_a]:va?[pa/va,ga/va]:[NaN,NaN]},t.bounds=function(t){return Ma=Na=-(Sa=Ta=1/0),Zi.geo.stream(t,i(Ia)),[[Sa,Ta],[Ma,Na]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||function(t){var e=Re(function(e,n){return t([e*No,n*No])});return function(t){return Ue(e(t))}}(t):m,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Ie:new je(t),"function"!=typeof s&&o.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(Zi.geo.albersUsa()).context(null)},Zi.geo.transform=function(t){return{stream:function(e){var n=new He(e);for(var r in t)n[r]=t[r];return n}}},He.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Zi.geo.projection=We,Zi.geo.projectionMutator=$e,(Zi.geo.equirectangular=function(){return We(Ve)}).raw=Ve.invert=Ve,Zi.geo.rotation=function(t){function e(e){return(e=t(e[0]*Mo,e[1]*Mo))[0]*=No,e[1]*=No,e}return t=Xe(t[0]%360*Mo,t[1]*Mo,t.length>2?t[2]*Mo:0),e.invert=function(e){return(e=t.invert(e[0]*Mo,e[1]*Mo))[0]*=No,e[1]*=No,e},e},Ye.invert=Ve,Zi.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=Xe(-t[0]*Mo,-t[1]*Mo,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=No,t[1]*=No}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=Qe((e=+r)*Mo,i*Mo),t):e},t.precision=function(r){return arguments.length?(n=Qe(e*Mo,(i=+r)*Mo),t):i},t.angle(90)},Zi.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Mo,i=t[1]*Mo,o=e[1]*Mo,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},Zi.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Zi.range(Math.ceil(o/v)*v,i,v).map(h).concat(Zi.range(Math.ceil(u/m)*m,l,m).map(d)).concat(Zi.range(Math.ceil(r/p)*p,n,p).filter(function(t){return so(t%v)>Eo}).map(c)).concat(Zi.range(Math.ceil(s/g)*g,a,g).filter(function(t){return so(t%m)>Eo}).map(f))}var n,r,i,o,a,s,l,u,c,f,h,d,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(d(l).slice(1),h(i).reverse().slice(1),d(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(u=+e[0][1],l=+e[1][1],(o=+e[0][0])>(i=+e[1][0])&&(e=o,o=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[i,l]]},t.minorExtent=function(e){return arguments.length?(s=+e[0][1],a=+e[1][1],(r=+e[0][0])>(n=+e[1][0])&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=tn(s,a,90),f=en(r,n,y),h=tn(u,l,90),d=en(o,i,y),t):y},t.majorExtent([[-180,-90+Eo],[180,90-Eo]]).minorExtent([[-180,-80-Eo],[180,80+Eo]])},Zi.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=nn,i=rn;return t.distance=function(){return Zi.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},Zi.geo.interpolate=function(t,e){return function(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),u=i*Math.sin(t),c=a*Math.cos(n),f=a*Math.sin(n),h=2*Math.asin(Math.sqrt(et(r-e)+i*a*et(n-t))),d=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*l+e*c,i=n*u+e*f,a=n*o+e*s;return[Math.atan2(i,r)*No,Math.atan2(a,Math.sqrt(r*r+i*i))*No]}:function(){return[t*No,e*No]};return p.distance=h,p}(t[0]*Mo,t[1]*Mo,e[0]*Mo,e[1]*Mo)},Zi.geo.length=function(t){return La=0,Zi.geo.stream(t,Pa),La};var La,Pa={sphere:b,point:b,lineStart:function(){function t(t,i){var o=Math.sin(i*=Mo),a=Math.cos(i),s=so((t*=Mo)-e),l=Math.cos(s);La+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),e=t,n=o,r=a}var e,n,r;Pa.point=function(i,o){e=i*Mo,n=Math.sin(o*=Mo),r=Math.cos(o),Pa.point=t},Pa.lineEnd=function(){Pa.point=Pa.lineEnd=b}},lineEnd:b,polygonStart:b,polygonEnd:b},Ba=on(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Zi.geo.azimuthalEqualArea=function(){return We(Ba)}).raw=Ba;var Fa=on(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},m);(Zi.geo.azimuthalEquidistant=function(){return We(Fa)}).raw=Fa,(Zi.geo.conicConformal=function(){return Me(an)}).raw=an,(Zi.geo.conicEquidistant=function(){return Me(sn)}).raw=sn;var ja=on(function(t){return 1/t},Math.atan);(Zi.geo.gnomonic=function(){return We(ja)}).raw=ja,ln.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-To]},(Zi.geo.mercator=function(){return un(ln)}).raw=ln;var Ra=on(function(){return 1},Math.asin);(Zi.geo.orthographic=function(){return We(Ra)}).raw=Ra;var Ha=on(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Zi.geo.stereographic=function(){return We(Ha)}).raw=Ha,cn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-To]},(Zi.geo.transverseMercator=function(){var t=un(cn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=cn,Zi.geom={},Zi.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=wt(n),o=wt(r),a=t.length,s=[],l=[];for(e=0;a>e;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(pn),e=0;a>e;e++)l.push([s[e][0],-s[e][1]]);var u=dn(s),c=dn(l),f=c[0]===u[0],h=c[c.length-1]===u[u.length-1],d=[];for(e=u.length-1;e>=0;--e)d.push(t[s[u[e]][2]]);for(e=+f;e<c.length-h;++e)d.push(t[s[c[e]][2]]);return d}var n=fn,r=hn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},Zi.geom.polygon=function(t){return ho(t,qa),t};var qa=Zi.geom.polygon.prototype=[];qa.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)i+=(t=r)[1]*(r=this[e])[0]-t[0]*r[1];return.5*i},qa.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)o+=((e=s)[0]+(s=this[r])[0])*(n=e[0]*s[1]-s[0]*e[1]),a+=(e[1]+s[1])*n;return[o*t,a*t]},qa.clip=function(t){for(var e,n,r,i,o,a,s=mn(t),l=-1,u=this.length-mn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)gn(a=e[n],c,i)?(gn(o,c,i)||t.push(vn(o,a,c,i)),t.push(a)):gn(o,c,i)&&t.push(vn(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var Wa,$a,Ua,Va,Ya,Xa=[],Ka=[];zn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(An),e.length},Ln.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Pn.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Rn(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Fn(this,n),n=(t=n).U),n.C=!1,r.C=!0,jn(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(jn(this,n),n=(t=n).U),n.C=!1,r.C=!0,Fn(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Rn(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Fn(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,jn(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Fn(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,jn(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Fn(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,jn(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},Zi.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return Hn(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[]).point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Eo)*Eo,y:Math.round(a(t,e)/Eo)*Eo,i:e}})}var r=fn,i=hn,o=r,a=i,s=Ga;return t?e(t):(e.links=function(t){return Hn(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return Hn(n(t)).cells.forEach(function(n,r){for(var i,o=n.site,a=n.edges.sort(An),s=-1,l=a.length,u=a[l-1].edge,c=u.l===o?u.r:u.l;++s<l;)i=c,c=(u=a[s].edge).l===o?u.r:u.l,r<i.i&&r<c.i&&Wn(o,i,c)<0&&e.push([t[r],t[i.i],t[c.i]])}),e},e.x=function(t){return arguments.length?(o=wt(r=t),e):r},e.y=function(t){return arguments.length?(a=wt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?Ga:t,e):s===Ga?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===Ga?null:s&&s[1]},e)};var Ga=[[-1e6,-1e6],[1e6,1e6]];Zi.geom.delaunay=function(t){return Zi.geom.voronoi().triangles(t)},Zi.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(so(l-n)+so(c-r)<.01)u(t,e,n,r,i,o,a,s);else{var f=t.point;t.x=t.y=t.point=null,u(t,f,l,c,i,o,a,s),u(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,i,o,a,s)}function u(t,e,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),f=n>=u,h=r>=c,d=h<<1|f;t.leaf=!1,f?i=u:s=u,h?a=c:l=c,o(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,a,s,l)}var c,f,h,d,p,g,v,m,y,_=wt(s),b=wt(l);if(null!=e)g=e,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],h=[],p=t.length,a)for(d=0;p>d;++d)(c=t[d]).x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),h.push(c.y);else for(d=0;p>d;++d){var w=+_(c=t[d],d),x=+b(c,d);g>w&&(g=w),v>x&&(v=x),w>m&&(m=w),x>y&&(y=x),f.push(w),h.push(x)}var k=m-g,E=y-v;k>E?y=v+k:m=g+E;var z={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){o(z,t,+_(t,++d),+b(t,d),g,v,m,y)},visit:function(t){!function t(e,n,r,i,o,a){if(!e(n,r,i,o,a)){var s=.5*(r+o),l=.5*(i+a),u=n.nodes;u[0]&&t(e,u[0],r,i,s,l),u[1]&&t(e,u[1],s,i,o,l),u[2]&&t(e,u[2],r,l,s,a),u[3]&&t(e,u[3],s,l,o,a)}}(t,z,g,v,m,y)},find:function(t){return e=t[0],n=t[1],l=1/0,function t(u,c,f,h,d){if(!(c>o||f>a||r>h||i>d)){if(p=u.point){var p,g=e-u.x,v=n-u.y,m=g*g+v*v;if(l>m){var y=Math.sqrt(l=m);r=e-y,i=n-y,o=e+y,a=n+y,s=p}}for(var _=u.nodes,b=.5*(c+h),w=.5*(f+d),x=(n>=w)<<1|e>=b,k=x+4;k>x;++x)if(u=_[3&x])switch(3&x){case 0:t(u,c,f,b,w);break;case 1:t(u,b,f,h,w);break;case 2:t(u,c,w,b,d);break;case 3:t(u,b,w,h,d)}}}(z,r=g,i=v,o=m,a=y),s;var e,n,r,i,o,a,s,l}};if(d=-1,null==e){for(;++d<p;)o(z,t[d],f[d],h[d],g,v,m,y);--d}else t.forEach(z.add);return f=h=t=c=null,z}var a,s=fn,l=hn;return(a=arguments.length)?(s=$n,l=Un,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},Zi.interpolateRgb=Vn,Zi.interpolateObject=Yn,Zi.interpolateNumber=Xn,Zi.interpolateString=Kn;var Za=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qa=new RegExp(Za.source,"g");Zi.interpolate=Gn,Zi.interpolators=[function(t,e){var n=typeof e;return("string"===n?$o.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Vn:Kn:e instanceof nt?Vn:Array.isArray(e)?Zn:"object"===n&&isNaN(e)?Yn:Xn)(t,e)}],Zi.interpolateArray=Zn;var Ja=function(){return m},ts=Zi.map({linear:Ja,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return tr},cubic:function(){return er},sin:function(){return rr},exp:function(){return ir},circle:function(){return or},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Co*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Co/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ar}}),es=Zi.map({in:m,out:Qn,"in-out":Jn,"out-in":function(t){return Jn(Qn(t))}});Zi.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=ts.get(n)||Ja,function(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}((r=es.get(r)||m)(n.apply(null,Qi.call(arguments,1))))},Zi.interpolateHcl=function(t,e){t=Zi.hcl(t),e=Zi.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return at(n+o*t,r+a*t,i+s*t)+""}},Zi.interpolateHsl=function(t,e){t=Zi.hsl(t),e=Zi.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return it(n+o*t,r+a*t,i+s*t)+""}},Zi.interpolateLab=function(t,e){t=Zi.lab(t),e=Zi.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return lt(n+o*t,r+a*t,i+s*t)+""}},Zi.interpolateRound=sr,Zi.transform=function(t){var e=to.createElementNS(Zi.ns.prefix.svg,"g");return(Zi.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new lr(n?n.matrix:ns)})(t)},lr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ns={a:1,b:0,c:0,d:1,e:0,f:0};Zi.interpolateTransform=hr,Zi.layout={},Zi.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(gr(t[n]));return e}},Zi.layout.chord=function(){function t(){var t,u,f,h,d,p={},g=[],v=Zi.range(o),m=[];for(n=[],r=[],t=0,h=-1;++h<o;){for(u=0,d=-1;++d<o;)u+=i[h][d];g.push(u),m.push(Zi.range(o)),t+=u}for(a&&v.sort(function(t,e){return a(g[t],g[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(Co-c*o)/t,u=0,h=-1;++h<o;){for(f=u,d=-1;++d<o;){var y=v[h],_=m[y][d],b=i[y][_],w=u,x=u+=b*t;p[y+"-"+_]={index:y,subindex:_,startAngle:w,endAngle:x,value:b}}r[y]={index:y,startAngle:f,endAngle:u,value:(u-f)/t},u+=c}for(h=-1;++h<o;)for(d=h-1;++d<o;){var k=p[h+"-"+d],E=p[d+"-"+h];(k.value||E.value)&&n.push(k.value<E.value?{source:E,target:k}:{source:k,target:E})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,u):i},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=r=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},Zi.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o,a=e.cx-t.x,s=e.cy-t.y,l=i-n,u=a*a+s*s;if(u>l*l/y)return g>u&&(t.px-=a*(o=e.charge/u),t.py-=s*o),!0;e.point&&u&&g>u&&(t.px-=a*(o=e.pointCharge/u),t.py-=s*o)}return!e.charge}}function e(t){t.px=Zi.event.x,t.py=Zi.event.y,l.resume()}var n,r,i,o,a,s,l={},u=Zi.dispatch("start","tick","end"),c=[1,1],f=.9,h=rs,d=is,p=-30,g=os,v=.1,y=.64,_=[],b=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var e,r,l,h,d,g,m,y,w,x=_.length,k=b.length;for(r=0;k>r;++r)(g=(y=(d=(l=b[r]).target).x-(h=l.source).x)*y+(w=d.y-h.y)*w)&&(w*=g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,d.x-=(y*=g)*(m=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=w*m,h.x+=y*(m=1-m),h.y+=w*m);if((m=i*v)&&(y=c[0]/2,w=c[1]/2,r=-1,m))for(;++r<x;)(l=_[r]).x+=(y-l.x)*m,l.y+=(w-l.y)*m;if(p)for(function t(e,n,r){var i=0,o=0;if(e.charge=0,!e.leaf)for(var a,s=e.nodes,l=s.length,u=-1;++u<l;)null!=(a=s[u])&&(t(a,n,r),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*r[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,o+=c*e.point.y}e.cx=i/e.charge,e.cy=o/e.charge}(e=Zi.geom.quadtree(_),i,s),r=-1;++r<x;)(l=_[r]).fixed||e.visit(t(l));for(r=-1;++r<x;)(l=_[r]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);u.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(_=t,l):_},l.links=function(t){return arguments.length?(b=t,l):b},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(y=t*t,l):Math.sqrt(y)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,u.start({type:"end",alpha:i=0})):t>0&&(u.start({type:"start",alpha:i=t}),n=Et(l.tick)),l):i},l.start=function(){function t(t,r){if(!n){for(n=new Array(i),l=0;i>l;++l)n[l]=[];for(l=0;u>l;++l){var o=b[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[e],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][t]))return a;return Math.random()*r}var e,n,r,i=_.length,u=b.length,f=c[0],g=c[1];for(e=0;i>e;++e)(r=_[e]).index=e,r.weight=0;for(e=0;u>e;++e)"number"==typeof(r=b[e]).source&&(r.source=_[r.source]),"number"==typeof r.target&&(r.target=_[r.target]),++r.source.weight,++r.target.weight;for(e=0;i>e;++e)r=_[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(e=0;u>e;++e)o[e]=+h.call(this,b[e],e);else for(e=0;u>e;++e)o[e]=h;if(a=[],"function"==typeof d)for(e=0;u>e;++e)a[e]=+d.call(this,b[e],e);else for(e=0;u>e;++e)a[e]=d;if(s=[],"function"==typeof p)for(e=0;i>e;++e)s[e]=+p.call(this,_[e],e);else for(e=0;i>e;++e)s[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=Zi.behavior.drag().origin(m).on("dragstart.force",mr).on("drag.force",e).on("dragend.force",yr)),arguments.length?void this.on("mouseover.force",_r).on("mouseout.force",br).call(r):r},Zi.rebind(l,u,"on")};var rs=20,is=1,os=1/0;Zi.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return kr(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=Ar,n=Er,r=zr;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(xr(e,function(t){t.children&&(t.value=0)}),kr(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Zi.layout.partition=function(){function t(t,r){var i=e.call(this,t,r);return function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=e.value?r/e.value:0;++u<a;)t(s=o[u],n,l=s.value*r,i),n+=l}}(i[0],0,n[0],n[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}(i[0])),i}var e=Zi.layout.hierarchy(),n=[1,1];return t.size=function(e){return arguments.length?(n=e,t):n},wr(t,e)},Zi.layout.pie=function(){function t(a){var s,l=a.length,u=a.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),d=h*(0>f?-1:1),p=Zi.sum(u),g=p?(f-l*d)/p:0,v=Zi.range(l),m=[];return null!=n&&v.sort(n===as?function(t,e){return u[e]-u[t]}:function(t,e){return n(a[t],a[e])}),v.forEach(function(t){m[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*g+d,padAngle:h}}),m}var e=Number,n=as,r=0,i=Co,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var as={};Zi.layout.stack=function(){function t(s,l){if(!(h=s.length))return s;var u=s.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),f=n.call(t,c,l);u=Zi.permute(u,f),c=Zi.permute(c,f);var h,d,p,g,v=r.call(t,c,l),m=u[0].length;for(p=0;m>p;++p)for(i.call(t,u[0][p],g=v[p],c[0][p][1]),d=1;h>d;++d)i.call(t,u[d][p],g+=c[d-1][p][1],c[d][p][1]);return s}var e=m,n=Nr,r=Dr,i=Mr,o=Sr,a=Tr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:ss.get(e)||Nr,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:ls.get(e)||Dr,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var ss=Zi.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(Ir),o=t.map(Or),a=Zi.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,u=[],c=[];for(e=0;r>e;++e)n=a[e],l>s?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return Zi.range(t.length).reverse()},default:Nr}),ls=Zi.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,u,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=l=u=0,n=1;h>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,o=0,s=f[n][0]-f[n-1][0];c>e;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}d[n]=l-=i?o/i*s:0,u>l&&(u=l)}for(n=0;h>n;++n)d[n]-=u;return d},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:Dr});Zi.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=r.call(this,u,o),f=i.call(this,c,u,o),h=(o=-1,u.length),d=f.length-1,p=e?1:1/h;++o<d;)(a=l[o]=[]).dx=f[o+1]-(a.x=f[o]),a.y=0;if(d>0)for(o=-1;++o<h;)(s=u[o])>=c[0]&&s<=c[1]&&((a=l[Zi.bisect(f,s,1,d)-1]).y+=p,a.push(t[o]));return l}var e=!0,n=Number,r=Fr,i=Pr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=wt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return Br(t,e)}:wt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Zi.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=i[0],u=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,kr(s,function(t){t.r=+c(t.value)}),kr(s,Wr),r){var f=r*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;kr(s,function(t){t.r+=f}),kr(s,Wr),kr(s,function(t){t.r-=f})}return function t(e,n,r,i){var o=e.children;if(e.x=n+=i*e.x,e.y=r+=i*e.y,e.r*=i,o)for(var a=-1,s=o.length;++a<s;)t(o[a],n,r,i)}(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=Zi.layout.hierarchy().sort(jr),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},wr(t,n)},Zi.layout.tree=function(){function t(t,l){var u=i.call(this,t,l),c=u[0],f=function(t){for(var e,n={A:null,children:[c]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}();if(kr(f,e),f.parent.m=-f.z,xr(f,n),s)xr(c,r);else{var h=c,d=c,p=c;xr(c,function(t){t.x<h.x&&(h=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)});var g=o(h,d)/2-h.x,v=a[0]/(d.x+o(d,h)/2+g),m=a[1]/(p.depth||1);xr(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*m})}return u}function e(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var i=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+o(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+o(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,i=t,a=t,s=e,l=i.parent.children[0],u=i.m,c=a.m,f=s.m,h=l.m;s=Kr(s),i=Xr(i),s&&i;)l=Xr(l),(a=Kr(a)).a=t,(r=s.z+f-i.z-u+o(s._,i._))>0&&(Gr(Zr(s,t,n),t,r),u+=r,c+=r),f+=s.m,u+=i.m,h+=l.m,c+=a.m;s&&!Kr(a)&&(a.t=s,a.m+=f-c),i&&!Xr(l)&&(l.t=i,l.m+=u-h,n=t)}return n}(t,r,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=a[0],t.y=t.depth*a[1]}var i=Zi.layout.hierarchy().sort(null).value(null),o=Yr,a=[1,1],s=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(s=null==(a=e)?r:null,t):s?null:a},t.nodeSize=function(e){return arguments.length?(s=null==(a=e)?null:r,t):s?a:null},wr(t,i)},Zi.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;kr(l,function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(e),t.y=1+Zi.max(e,function(t){return t.y})):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var c=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(l),f=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(l),h=c.x-n(c,f)/2,d=f.x+n(f,c)/2;return kr(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),s}var e=Zi.layout.hierarchy().sort(null).value(null),n=Yr,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},wr(t,e)},Zi.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=f(n),c=[],h=o.slice(),p=1/0,g="slice"===d?u.dx:"dice"===d?u.dy:"slice-dice"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(h,u.dx*u.dy/n.value),c.area=0;(l=h.length)>0;)c.push(a=h[l-1]),c.area+=a.area,"squarify"!==d||(s=r(c,g))<=p?(h.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=f(e),s=r.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*p/r,r/(e*o*p)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)(i=t[o]).x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)(i=t[o]).x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),h&&(a=i),i}var a,s=Zi.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=Qr,h=!1,d="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){return Jr(e,t)}return arguments.length?(f=null==(c=t)?Qr:"function"==(n=typeof t)?function(e){var n=t.call(o,e,e.depth);return null==n?Qr(e):Jr(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,o):c;var n},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(d=t+"",o):d},wr(o,s)},Zi.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=Zi.random.normal.apply(Zi,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Zi.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Zi.scale={};var us={floor:m,ceil:m};Zi.scale.linear=function(){return function t(e,n,r,i){function o(){var t=Math.min(e.length,n.length)>2?ii:ni,o=i?pr:dr;return s=t(e,n,o,r),l=t(n,e,o,Gn),a}function a(t){return s(t)}var s,l;return a.invert=function(t){return l(t)},a.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},a.range=function(t){return arguments.length?(n=t,o()):n},a.rangeRound=function(t){return a.range(t).interpolate(sr)},a.clamp=function(t){return arguments.length?(i=t,o()):i},a.interpolate=function(t){return arguments.length?(r=t,o()):r},a.ticks=function(t){return li(e,t)},a.tickFormat=function(t,n){return ui(e,t,n)},a.nice=function(t){return ai(e,t),o()},a.copy=function(){return t(e,n,r,i)},o()}([0,1],[0,1],Gn,!1)};var cs={s:1,g:1,p:1,r:1,e:1};Zi.scale.log=function(){return function t(e,n,r,i){function o(t){return(r?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function a(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function s(t){return e(o(t))}return s.invert=function(t){return a(e.invert(t))},s.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((i=t.map(Number)).map(o)),s):i},s.base=function(t){return arguments.length?(n=+t,e.domain(i.map(o)),s):n},s.nice=function(){var t=ri(i.map(o),r?Math:hs);return e.domain(t),i=t.map(a),s},s.ticks=function(){var t=ti(i),e=[],s=t[0],l=t[1],u=Math.floor(o(s)),c=Math.ceil(o(l)),f=n%1?2:n;if(isFinite(c-u)){if(r){for(;c>u;u++)for(var h=1;f>h;h++)e.push(a(u)*h);e.push(a(u))}else for(e.push(a(u));u++<c;)for(h=f-1;h>0;h--)e.push(a(u)*h);for(u=0;e[u]<s;u++);for(c=e.length;e[c-1]>l;c--);e=e.slice(u,c)}return e},s.tickFormat=function(t,e){if(!arguments.length)return fs;arguments.length<2?e=fs:"function"!=typeof e&&(e=Zi.format(e));var n,i=Math.max(.1,t/s.ticks().length),l=r?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/a(l(o(t)+n))<=i?e(t):""}},s.copy=function(){return t(e.copy(),n,r,i)},oi(s,e)}(Zi.scale.linear().domain([0,1]),10,!0,[1,10])};var fs=Zi.format(".0e"),hs={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Zi.scale.pow=function(){return function t(e,n,r){function i(t){return e(o(t))}var o=fi(n),a=fi(1/n);return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(o)),i):r},i.ticks=function(t){return li(r,t)},i.tickFormat=function(t,e){return ui(r,t,e)},i.nice=function(t){return i.domain(ai(r,t))},i.exponent=function(t){return arguments.length?(o=fi(n=t),a=fi(1/n),e.domain(r.map(o)),i):n},i.copy=function(){return t(e.copy(),n,r)},oi(i,e)}(Zi.scale.linear(),1,[0,1])},Zi.scale.sqrt=function(){return Zi.scale.pow().exponent(.5)},Zi.scale.ordinal=function(){return function t(e,n){function r(t){return a[((o.get(t)||("range"===n.t?o.set(t,e.push(t)):NaN))-1)%a.length]}function i(t,n){return Zi.range(e.length).map(function(e){return t+n*e})}var o,a,s;return r.domain=function(t){if(!arguments.length)return e;e=[],o=new l;for(var i,a=-1,s=t.length;++a<s;)o.has(i=t[a])||o.set(i,e.push(i));return r[n.t].apply(r,n.a)},r.range=function(t){return arguments.length?(a=t,s=0,n={t:"range",a:arguments},r):a},r.rangePoints=function(t,o){arguments.length<2&&(o=0);var l=t[0],u=t[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+o);return a=i(l+c*o/2,c),s=0,n={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(t,o){arguments.length<2&&(o=0);var l=t[0],u=t[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+o)|0;return a=i(l+Math.round(c*o/2+(u-l-(e.length-1+o)*c)/2),c),s=0,n={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(t,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=t[1]<t[0],c=t[u-0],f=(t[1-u]-c)/(e.length-o+2*l);return a=i(c+f*l,f),u&&a.reverse(),s=f*(1-o),n={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(t,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=t[1]<t[0],c=t[u-0],f=t[1-u],h=Math.floor((f-c)/(e.length-o+2*l));return a=i(c+Math.round((f-c-(e.length-o)*h)/2),h),u&&a.reverse(),s=Math.round(h*(1-o)),n={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return s},r.rangeExtent=function(){return ti(n.a[0])},r.copy=function(){return t(e,n)},r.domain(e)}([],{t:"range",a:[[]]})},Zi.scale.category10=function(){return Zi.scale.ordinal().range(ds)},Zi.scale.category20=function(){return Zi.scale.ordinal().range(ps)},Zi.scale.category20b=function(){return Zi.scale.ordinal().range(gs)},Zi.scale.category20c=function(){return Zi.scale.ordinal().range(vs)};var ds=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pt),ps=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pt),gs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pt),vs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pt);Zi.scale.quantile=function(){return function t(e,o){function a(){var t=0,n=o.length;for(l=[];++t<n;)l[t-1]=Zi.quantile(e,t/n);return s}function s(t){return isNaN(t=+t)?void 0:o[Zi.bisect(l,t)]}var l;return s.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),a()):e},s.range=function(t){return arguments.length?(o=t,a()):o},s.quantiles=function(){return l},s.invertExtent=function(t){return 0>(t=o.indexOf(t))?[NaN,NaN]:[t>0?l[t-1]:e[0],t<l.length?l[t]:e[e.length-1]]},s.copy=function(){return t(e,o)},a()}([],[])},Zi.scale.quantize=function(){return function t(e,n,r){function i(t){return r[Math.max(0,Math.min(s,Math.floor(a*(t-e))))]}function o(){return a=r.length/(n-e),s=r.length-1,i}var a,s;return i.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],o()):[e,n]},i.range=function(t){return arguments.length?(r=t,o()):r},i.invertExtent=function(t){return[t=0>(t=r.indexOf(t))?NaN:t/a+e,t+1/a]},i.copy=function(){return t(e,n,r)},o()}(0,1,[0,1])},Zi.scale.threshold=function(){return function t(e,n){function r(t){return t>=t?n[Zi.bisect(e,t)]:void 0}return r.domain=function(t){return arguments.length?(e=t,r):e},r.range=function(t){return arguments.length?(n=t,r):n},r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},r.copy=function(){return t(e,n)},r}([.5],[0,1])},Zi.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return li(e,t)},n.tickFormat=function(t,n){return ui(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},Zi.svg={},Zi.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-To,f=s.apply(this,arguments)-To,h=Math.abs(f-c),d=c>f?0:1;if(t>u&&(p=u,u=t,t=p),h>=So)return e(u,d)+(t?e(t,1-d):"")+"Z";var p,g,v,m,y,_,b,w,x,k,E,z,A=0,C=0,S=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=o===ms?Math.sqrt(t*t+u*u):+o.apply(this,arguments),d||(C*=-1),u&&(C=J(v/u*Math.sin(m))),t&&(A=J(v/t*Math.sin(m)))),u){y=u*Math.cos(c+C),_=u*Math.sin(c+C),b=u*Math.cos(f-C),w=u*Math.sin(f-C);var T=Math.abs(f-c-2*C)<=Ao?0:1;if(C&&yi(y,_,b,w)===d^T){var M=(c+f)/2;y=u*Math.cos(M),_=u*Math.sin(M),b=w=null}}else y=_=0;if(t){x=t*Math.cos(f-A),k=t*Math.sin(f-A),E=t*Math.cos(c+A),z=t*Math.sin(c+A);var N=Math.abs(c-f+2*A)<=Ao?0:1;if(A&&yi(x,k,E,z)===1-d^N){var D=(c+f)/2;x=t*Math.cos(D),k=t*Math.sin(D),E=z=null}}else x=k=0;if(h>Eo&&(p=Math.min(Math.abs(u-t)/2,+i.apply(this,arguments)))>.001){g=u>t^d?0:1;var I=p,O=p;if(Ao>h){var L=null==E?[x,k]:null==b?[y,_]:vn([y,_],[E,z],[b,w],[x,k]),P=y-L[0],B=_-L[1],F=b-L[0],j=w-L[1],R=1/Math.sin(Math.acos((P*F+B*j)/(Math.sqrt(P*P+B*B)*Math.sqrt(F*F+j*j)))/2),H=Math.sqrt(L[0]*L[0]+L[1]*L[1]);O=Math.min(p,(t-H)/(R-1)),I=Math.min(p,(u-H)/(R+1))}if(null!=b){var q=_i(null==E?[x,k]:[E,z],[y,_],u,I,d),W=_i([b,w],[x,k],u,I,d);p===I?S.push("M",q[0],"A",I,",",I," 0 0,",g," ",q[1],"A",u,",",u," 0 ",1-d^yi(q[1][0],q[1][1],W[1][0],W[1][1]),",",d," ",W[1],"A",I,",",I," 0 0,",g," ",W[0]):S.push("M",q[0],"A",I,",",I," 0 1,",g," ",W[0])}else S.push("M",y,",",_);if(null!=E){var $=_i([y,_],[E,z],t,-O,d),U=_i([x,k],null==b?[y,_]:[b,w],t,-O,d);p===O?S.push("L",U[0],"A",O,",",O," 0 0,",g," ",U[1],"A",t,",",t," 0 ",d^yi(U[1][0],U[1][1],$[1][0],$[1][1]),",",1-d," ",$[1],"A",O,",",O," 0 0,",g," ",$[0]):S.push("L",U[0],"A",O,",",O," 0 0,",g," ",$[0])}else S.push("L",x,",",k)}else S.push("M",y,",",_),null!=b&&S.push("A",u,",",u," 0 ",T,",",d," ",b,",",w),S.push("L",x,",",k),null!=E&&S.push("A",t,",",t," 0 ",N,",",1-d," ",E,",",z);return S.push("Z"),S.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=di,r=pi,i=hi,o=ms,a=gi,s=vi,l=mi;return t.innerRadius=function(e){return arguments.length?(n=wt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=wt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=wt(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==ms?ms:wt(e),t):o},t.startAngle=function(e){return arguments.length?(a=wt(e),t):a},t.endAngle=function(e){return arguments.length?(s=wt(e),t):s},t.padAngle=function(e){return arguments.length?(l=wt(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-To;return[Math.cos(e)*t,Math.sin(e)*t]},t};var ms="auto";Zi.svg.line=function(){return bi(m)};var ys=Zi.map({linear:wi,"linear-closed":xi,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":ki,"step-after":Ei,basis:Ci,"basis-open":function(t){if(t.length<4)return wi(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)o.push((e=t[r])[0]),a.push(e[1]);for(n.push(Si(ws,o)+","+Si(ws,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Ti(n,o,a);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)a.push((n=t[r%i])[0]),s.push(n[1]);for(e=[Si(ws,a),",",Si(ws,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Ti(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)(r=t[u])[0]=e*r[0]+(1-e)*(o+(i=u/n)*s),r[1]=e*r[1]+(1-e)*(a+i*l);return Ci(t)},cardinal:function(t,e){return t.length<3?wi(t):t[0]+zi(t,Ai(t,e))},"cardinal-open":function(t,e){return t.length<4?wi(t):t[1]+zi(t.slice(1,-1),Ai(t,e))},"cardinal-closed":function(t,e){return t.length<3?xi(t):t[0]+zi((t.push(t[0]),t),Ai([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?wi(t):t[0]+zi(t,function(t){for(var e,n,r,i,o=[],a=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Mi(i,o);++e<n;)r[e]=(a+(a=Mi(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),s=-1,l=t.length-1;++s<l;)e=Mi(t[s],t[s+1]),so(e)<Eo?a[s]=a[s+1]=0:(i=(n=a[s]/e)*n+(r=a[s+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r);for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});ys.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var _s=[0,2/3,1/3,0],bs=[0,1/3,2/3,0],ws=[0,1/6,2/3,1/6];Zi.svg.line.radial=function(){var t=bi(Ni);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ki.reverse=Ei,Ei.reverse=ki,Zi.svg.area=function(){return Di(m)},Zi.svg.area.radial=function(){var t=Di(Ni);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Zi.svg.chord=function(){function t(t,a){var s=e(this,i,t,a),l=e(this,o,t,a);return"M"+s.p0+n(s.r,s.p1,s.a1-s.a0)+(s.a0==l.a0&&s.a1==l.a1?r(0,0,0,s.p0):r(0,0,0,l.p0)+n(l.r,l.p1,l.a1-l.a0)+r(0,0,0,s.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=a.call(t,i,r),u=s.call(t,i,r)-To,c=l.call(t,i,r)-To;return{r:o,a0:u,a1:c,p0:[o*Math.cos(u),o*Math.sin(u)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ao)+",1 "+e}function r(t,e,n,r){return"Q 0,0 "+r}var i=nn,o=rn,a=Ii,s=gi,l=vi;return t.radius=function(e){return arguments.length?(a=wt(e),t):a},t.source=function(e){return arguments.length?(i=wt(e),t):i},t.target=function(e){return arguments.length?(o=wt(e),t):o},t.startAngle=function(e){return arguments.length?(s=wt(e),t):s},t.endAngle=function(e){return arguments.length?(l=wt(e),t):l},t},Zi.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=nn,n=rn,r=Oi;return t.source=function(n){return arguments.length?(e=wt(n),t):e},t.target=function(e){return arguments.length?(n=wt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},Zi.svg.diagonal.radial=function(){var t=Zi.svg.diagonal(),e=Oi,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-To;return[n*Math.cos(r),n*Math.sin(r)]}}(e=t)):e},t},Zi.svg.symbol=function(){function t(t,r){return(xs.get(e.call(this,t,r))||Bi)(n.call(this,t,r))}var e=Pi,n=Li;return t.type=function(n){return arguments.length?(e=wt(n),t):e},t.size=function(e){return arguments.length?(n=wt(e),t):n},t};var xs=Zi.map({circle:Bi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Es)),n=e*Es;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ks),n=e*ks/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ks),n=e*ks/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Zi.svg.symbolTypes=xs.keys();var ks=Math.sqrt(3),Es=Math.tan(30*Mo);mo.transition=function(t){for(var e,n,r=zs||++Ts,i=qi(t),o=[],a=As||{time:Date.now(),ease:nr,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Wi(n,c,i,r,a),e.push(n)}return ji(o,i,r)},mo.interrupt=function(t){return this.each(null==t?Cs:Fi(qi(t)))};var zs,As,Cs=Fi(qi()),Ss=[],Ts=0;Ss.call=mo.call,Ss.empty=mo.empty,Ss.node=mo.node,Ss.size=mo.size,Zi.transition=function(t,e){return t&&t.transition?zs?t.transition(e):t:Zi.selection().transition(t)},Zi.transition.prototype=Ss,Ss.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=C(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Wi(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return ji(a,o,i)},Ss.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=S(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],h=-1,d=f.length;++h<d;)if(r=f[h]){o=r[s][a],n=t.call(r,r.__data__,h,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Wi(i,p,s,a,o),e.push(i)}return ji(l,s,a)},Ss.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=R(t));for(var i=0,o=this.length;o>i;i++){r.push(e=[]);for(var a,s=0,l=(a=this[i]).length;l>s;s++)(n=a[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return ji(r,this.namespace,this.id)},Ss.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):q(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Ss.attr=function(t,e){function n(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?hr:Gn,o=Zi.ns.qualify(t);return Ri(this,"attr."+t,e,o.local?function(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(o.space,o.local);return n!==t&&(e=i(n,t),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}:function(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(o);return n!==t&&(e=i(n,t),function(t){this.setAttribute(o,e(t))})})})},Ss.attrTween=function(t,e){var n=Zi.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},Ss.style=function(t,n,r){function i(){this.style.removeProperty(t)}var o=arguments.length;if(3>o){if("string"!=typeof t){for(r in 2>o&&(n=""),t)this.style(r,t[r],n);return this}r=""}return Ri(this,"style."+t,n,function(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=Gn(o,n),function(e){this.style.setProperty(t,i(e),r)})})})},Ss.styleTween=function(t,n,r){return arguments.length<3&&(r=""),this.tween("style."+t,function(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}})},Ss.text=function(t){return Ri(this,"text",t,Hi)},Ss.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ss.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=Zi.ease.apply(Zi,arguments)),q(this,function(r){r[n][e].ease=t}))},Ss.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:q(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Ss.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:q(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Ss.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=As,o=zs;try{zs=n,q(this,function(e,i,o){As=e[r][n],t.call(e,e.__data__,i,o)})}finally{As=i,zs=o}}else q(this,function(i){var o=i[r][n];(o.event||(o.event=Zi.dispatch("start","end","interrupt"))).on(t,e)});return this},Ss.transition=function(){for(var t,e,n,r=this.id,i=++Ts,o=this.namespace,a=[],s=0,l=this.length;l>s;s++){a.push(t=[]);for(var u,c=0,f=(u=this[s]).length;f>c;c++)(e=u[c])&&Wi(e,c,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ji(a,o,i)},Zi.svg.axis=function(){function t(t){t.each(function(){var t,u=Zi.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),h=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,d=null==e?f.tickFormat?f.tickFormat.apply(f,s):m:e,p=u.selectAll(".tick").data(h,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Eo),v=Zi.transition(p.exit()).style("opacity",Eo).remove(),y=Zi.transition(p.order()).style("opacity",1),_=Math.max(i,0)+a,b=ei(f),w=u.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),Zi.transition(w));g.append("line"),g.append("text");var k,E,z,A,C=g.select("line"),S=y.select("line"),T=p.select("text").text(d),M=g.select("text"),N=y.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=$i,k="x",z="y",E="x2",A="y2",T.attr("dy",0>D?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+D*o+"V0H"+b[1]+"V"+D*o)):(t=Ui,k="y",z="x",E="y2",A="x2",T.attr("dy",".32em").style("text-anchor",0>D?"end":"start"),x.attr("d","M"+D*o+","+b[0]+"H0V"+b[1]+"H"+D*o)),C.attr(A,D*i),M.attr(z,D*_),S.attr(E,0).attr(A,D*i),N.attr(k,0).attr(z,D*_),f.rangeBand){var I=f,O=I.rangeBand()/2;c=f=function(t){return I(t)+O}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),y.call(t,f,f)})}var e,n=Zi.scale.linear(),r=Ms,i=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Ns?e+"":Ms,t):r},t.ticks=function(){return arguments.length?(s=Ji(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Ms="bottom",Ns={top:1,right:1,bottom:1,left:1};Zi.svg.brush=function(){function t(e){e.each(function(){var e=Zi.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(g,m);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ds[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,f=Zi.transition(e),h=Zi.transition(a);u&&(l=ei(u),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=ei(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){var t=Zi.mouse(_),e=!1;y&&(t[0]+=y[0],t[1]+=y[1]),C||(Zi.event.altKey?(m||(m=[(f[0]+f[1])/2,(h[0]+h[1])/2]),T[0]=f[+(t[0]<m[0])],T[1]=h[+(t[1]<m[1])]):m=null),z&&g(t,u,0)&&(r(x),e=!0),A&&g(t,c,1)&&(i(x),e=!0),e&&(n(x),w({type:"brush",mode:C?"move":"resize"}))}function g(t,e,n){var r,i,o=ei(e),l=o[0],u=o[1],c=T[n],g=n?h:f,v=g[1]-g[0];return C&&(l-=c,u-=v+c),r=(n?p:d)?Math.max(l,Math.min(u,t[n])):t[n],C?i=(r+=c)+v:(m&&(c=Math.max(l,Math.min(u,2*m[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:a=null,g[0]=r,g[1]=i,!0):void 0}function v(){o(),x.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Zi.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),w({type:"brushend"})}var m,y,_=this,b=Zi.select(Zi.event.target),w=l.of(_,arguments),x=Zi.select(_),E=b.datum(),z=!/^(n|s)$/.test(E)&&u,A=!/^(e|w)$/.test(E)&&c,C=b.classed("extent"),S=Y(_),T=Zi.mouse(_),M=Zi.select(e(_)).on("keydown.brush",function(){32==Zi.event.keyCode&&(C||(m=null,T[0]-=f[1],T[1]-=h[1],C=2),k())}).on("keyup.brush",function(){32==Zi.event.keyCode&&2==C&&(T[0]+=f[1],T[1]+=h[1],C=0,k())});if(Zi.event.changedTouches?M.on("touchmove.brush",o).on("touchend.brush",v):M.on("mousemove.brush",o).on("mouseup.brush",v),x.interrupt().selectAll("*").interrupt(),C)T[0]=f[0]-T[0],T[1]=h[0]-T[1];else if(E){var N=+/w$/.test(E),D=+/^n/.test(E);y=[f[1-N]-T[0],h[1-D]-T[1]],T[0]=f[N],T[1]=h[D]}else Zi.event.altKey&&(m=T.slice());x.style("pointer-events","none").selectAll(".resize").style("display",null),Zi.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),o()}var a,s,l=z(t,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],h=[0,0],d=!0,p=!0,g=Is[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:f,y:h,i:a,j:s},n=this.__chart__||e;this.__chart__=e,zs?Zi.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,f=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Zn(f,e.x),r=Zn(h,e.y);return a=s=null,function(i){f=e.x=n(i),h=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(g=Is[!(u=e)<<1|!c],t):u},t.y=function(e){return arguments.length?(g=Is[!u<<1|!(c=e)],t):c},t.clamp=function(e){return arguments.length?(u&&c?(d=!!e[0],p=!!e[1]):u?d=!!e:c&&(p=!!e),t):u&&c?[d,p]:u?d:c?p:null},t.extent=function(e){var n,r,i,o,l;return arguments.length?(u&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(l=n,n=r,r=l),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=e[0],o=e[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(l=i,i=o,o=l),(i!=h[0]||o!=h[1])&&(h=[i,o])),t):(u&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],a=s=null),t},t.empty=function(){return!!u&&f[0]==f[1]||!!c&&h[0]==h[1]},Zi.rebind(t,l,"on")};var Ds={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Is=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Os=Jo.format=oa.timeFormat,Ls=Os.utc,Ps=Ls("%Y-%m-%dT%H:%M:%S.%LZ");Os.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Vi:Ps,Vi.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Vi.toString=Ps.toString,Jo.second=Dt(function(t){return new ta(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Jo.seconds=Jo.second.range,Jo.seconds.utc=Jo.second.utc.range,Jo.minute=Dt(function(t){return new ta(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Jo.minutes=Jo.minute.range,Jo.minutes.utc=Jo.minute.utc.range,Jo.hour=Dt(function(t){var e=t.getTimezoneOffset()/60;return new ta(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Jo.hours=Jo.hour.range,Jo.hours.utc=Jo.hour.utc.range,Jo.month=Dt(function(t){return(t=Jo.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Jo.months=Jo.month.range,Jo.months.utc=Jo.month.utc.range;var Bs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Fs=[[Jo.second,1],[Jo.second,5],[Jo.second,15],[Jo.second,30],[Jo.minute,1],[Jo.minute,5],[Jo.minute,15],[Jo.minute,30],[Jo.hour,1],[Jo.hour,3],[Jo.hour,6],[Jo.hour,12],[Jo.day,1],[Jo.day,2],[Jo.week,1],[Jo.month,1],[Jo.month,3],[Jo.year,1]],js=Os.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",be]]),Rs={range:function(t,e,n){return Zi.range(Math.ceil(t/n)*n,+e,n).map(Xi)},floor:m,ceil:m};Fs.year=Jo.year,Jo.scale=function(){return Yi(Zi.scale.linear(),Fs,js)};var Hs=Fs.map(function(t){return[t[0].utc,t[1]]}),qs=Ls.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",be]]);Hs.year=Jo.year.utc,Jo.scale.utc=function(){return Yi(Zi.scale.linear(),Hs,qs)},Zi.text=xt(function(t){return t.responseText}),Zi.json=function(t,e){return kt(t,"application/json",Ki,e)},Zi.html=function(t,e){return kt(t,"text/html",Gi,e)},Zi.xml=xt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(this.d3=Zi):"object"==typeof module&&module.exports?module.exports=Zi:this.d3=Zi}(),function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},e=t._,n=Array.prototype,r=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,o=n.push,a=n.slice,s=r.toString,l=r.hasOwnProperty,u=Array.isArray,c=Object.keys,f=Object.create,h=function(){},d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};"undefined"==typeof exports||exports.nodeType?t._=d:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=d),exports._=d),d.VERSION="1.9.1";var p,g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},v=function(t,e,n){return d.iteratee!==p?d.iteratee(t,e):null==t?d.identity:d.isFunction(t)?g(t,e,n):d.isObject(t)&&!d.isArray(t)?d.matcher(t):d.property(t)};d.iteratee=p=function(t,e){return v(t,e,1/0)};var m=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},y=function(t){if(!d.isObject(t))return{};if(f)return f(t);h.prototype=t;var e=new h;return h.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},b=function(t,e){return null!=t&&l.call(t,e)},w=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},x=Math.pow(2,53)-1,k=_("length"),E=function(t){var e=k(t);return"number"==typeof e&&0<=e&&e<=x};d.each=d.forEach=function(t,e,n){var r,i;if(e=g(e,n),E(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=d.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},d.map=d.collect=function(t,e,n){e=v(e,n);for(var r=!E(t)&&d.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o};var z=function(t){return function(e,n,r,i){var o=3<=arguments.length;return function(e,n,r,i){var o=!E(e)&&d.keys(e),a=(o||e).length,s=0<t?0:a-1;for(i||(r=e[o?o[s]:s],s+=t);0<=s&&s<a;s+=t){var l=o?o[s]:s;r=n(r,e[l],l,e)}return r}(e,g(n,i,4),r,o)}};d.reduce=d.foldl=d.inject=z(1),d.reduceRight=d.foldr=z(-1),d.find=d.detect=function(t,e,n){var r=(E(t)?d.findIndex:d.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},d.filter=d.select=function(t,e,n){var r=[];return e=v(e,n),d.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},d.reject=function(t,e,n){return d.filter(t,d.negate(v(e)),n)},d.every=d.all=function(t,e,n){e=v(e,n);for(var r=!E(t)&&d.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},d.some=d.any=function(t,e,n){e=v(e,n);for(var r=!E(t)&&d.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,n,r){return E(t)||(t=d.values(t)),("number"!=typeof n||r)&&(n=0),0<=d.indexOf(t,e,n)},d.invoke=m(function(t,e,n){var r,i;return d.isFunction(e)?i=e:d.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),d.map(t,function(t){var o=i;if(!o){if(r&&r.length&&(t=w(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)})}),d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=E(t)?t:d.values(t)).length;s<l;s++)null!=(r=t[s])&&o<r&&(o=r);else e=v(e,n),d.each(t,function(t,n,r){i=e(t,n,r),(a<i||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},d.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=E(t)?t:d.values(t)).length;s<l;s++)null!=(r=t[s])&&r<o&&(o=r);else e=v(e,n),d.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},d.shuffle=function(t){return d.sample(t,1/0)},d.sample=function(t,e,n){if(null==e||n)return E(t)||(t=d.values(t)),t[d.random(t.length-1)];var r=E(t)?d.clone(t):d.values(t),i=k(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var s=d.random(a,o),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,e)},d.sortBy=function(t,e,n){var r=0;return e=v(e,n),d.pluck(d.map(t,function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var A=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=v(r,i),d.each(n,function(e,i){var a=r(e,i,n);t(o,e,a)}),o}};d.groupBy=A(function(t,e,n){b(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=A(function(t,e,n){t[n]=e}),d.countBy=A(function(t,e,n){b(t,n)?t[n]++:t[n]=1});var C=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;d.toArray=function(t){return t?d.isArray(t)?a.call(t):d.isString(t)?t.match(C):E(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:E(t)?t.length:d.keys(t).length},d.partition=A(function(t,e,n){t[n?0:1].push(e)},!0),d.first=d.head=d.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,Boolean)};var S=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,a=k(t);o<a;o++){var s=t[o];if(E(s)&&(d.isArray(s)||d.isArguments(s)))if(e)for(var l=0,u=s.length;l<u;)r[i++]=s[l++];else S(s,e,n,r),i=r.length;else n||(r[i++]=s)}return r};d.flatten=function(t,e){return S(t,e,!1)},d.without=m(function(t,e){return d.difference(t,e)}),d.uniq=d.unique=function(t,e,n,r){d.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=v(n,r));for(var i=[],o=[],a=0,s=k(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e&&!n?(a&&o===u||i.push(l),o=u):n?d.contains(o,u)||(o.push(u),i.push(l)):d.contains(i,l)||i.push(l)}return i},d.union=m(function(t){return d.uniq(S(t,!0,!0))}),d.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=k(t);r<i;r++){var o=t[r];if(!d.contains(e,o)){var a;for(a=1;a<n&&d.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},d.difference=m(function(t,e){return e=S(e,!0,!0),d.filter(t,function(t){return!d.contains(e,t)})}),d.unzip=function(t){for(var e=t&&d.max(t,k).length||0,n=Array(e),r=0;r<e;r++)n[r]=d.pluck(t,r);return n},d.zip=m(d.unzip),d.object=function(t,e){for(var n={},r=0,i=k(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var T=function(t){return function(e,n,r){n=v(n,r);for(var i=k(e),o=0<t?0:i-1;0<=o&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};d.findIndex=T(1),d.findLastIndex=T(-1),d.sortedIndex=function(t,e,n,r){for(var i=(n=v(n,r,1))(e),o=0,a=k(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o};var M=function(t,e,n){return function(r,i,o){var s=0,l=k(r);if("number"==typeof o)0<t?s=0<=o?o:Math.max(o+l,s):l=0<=o?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return r[o=n(r,i)]===i?o:-1;if(i!=i)return 0<=(o=e(a.call(r,s,l),d.isNaN))?o+s:-1;for(o=0<t?s:l-1;0<=o&&o<l;o+=t)if(r[o]===i)return o;return-1}};d.indexOf=M(1,d.findIndex,d.sortedIndex),d.lastIndexOf=M(-1,d.findLastIndex),d.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},d.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(a.call(t,r,r+=e));return n};var N=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=y(t.prototype),a=t.apply(o,i);return d.isObject(a)?a:o};d.bind=m(function(t,e,n){if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");var r=m(function(i){return N(t,r,e,this,n.concat(i))});return r}),d.partial=m(function(t,e){var n=d.partial.placeholder,r=function(){for(var i=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[i++]:e[s];for(;i<arguments.length;)a.push(arguments[i++]);return N(t,r,this,this,a)};return r}),(d.partial.placeholder=d).bindAll=m(function(t,e){var n=(e=S(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=d.bind(t[r],t)}}),d.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},d.delay=m(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),d.defer=d.partial(d.delay,d,1),d.throttle=function(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:d.now(),r=null,a=t.apply(i,o),r||(i=o=null)},u=function(){var u=d.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return i=this,o=arguments,c<=0||e<c?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u},d.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},a=m(function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,e),s&&(i=t.apply(this,a))}else r=d.delay(o,e,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},d.once=d.partial(d.before,2),d.restArguments=m;var D=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],O=function(t,e){var n=I.length,i=t.constructor,o=d.isFunction(i)&&i.prototype||r,a="constructor";for(b(t,a)&&!d.contains(e,a)&&e.push(a);n--;)(a=I[n])in t&&t[a]!==o[a]&&!d.contains(e,a)&&e.push(a)};d.keys=function(t){if(!d.isObject(t))return[];if(c)return c(t);var e=[];for(var n in t)b(t,n)&&e.push(n);return D&&O(t,e),e},d.allKeys=function(t){if(!d.isObject(t))return[];var e=[];for(var n in t)e.push(n);return D&&O(t,e),e},d.values=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},d.mapObject=function(t,e,n){e=v(e,n);for(var r=d.keys(t),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=e(t[s],s,t)}return o},d.pairs=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},d.invert=function(t){for(var e={},n=d.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()};var L=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}};d.extend=L(d.allKeys),d.extendOwn=d.assign=L(d.keys),d.findKey=function(t,e,n){e=v(e,n);for(var r,i=d.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};var P,B,F=function(t,e,n){return e in n};d.pick=m(function(t,e){var n={},r=e[0];if(null==t)return n;d.isFunction(r)?(1<e.length&&(r=g(r,e[1])),e=d.allKeys(t)):(r=F,e=S(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],s=t[a];r(s,a,t)&&(n[a]=s)}return n}),d.omit=m(function(t,e){var n,r=e[0];return d.isFunction(r)?(r=d.negate(r),1<e.length&&(n=e[1])):(e=d.map(S(e,!1,!1),String),r=function(t,n){return!d.contains(e,n)}),d.pick(t,r,n)}),d.defaults=L(d.allKeys,!0),d.create=function(t,e){var n=y(t);return e&&d.extendOwn(n,e),n},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var n=d.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},P=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&B(t,e,n,r)},B=function(t,e,n,r){t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var o=s.call(t);if(o!==s.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return i.valueOf.call(t)===i.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,u=e.constructor;if(l!==u&&!(d.isFunction(l)&&l instanceof l&&d.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),a){if((c=t.length)!==e.length)return!1;for(;c--;)if(!P(t[c],e[c],n,r))return!1}else{var f,h=d.keys(t);if(c=h.length,d.keys(e).length!==c)return!1;for(;c--;)if(!b(e,f=h[c])||!P(t[f],e[f],n,r))return!1}return n.pop(),r.pop(),!0},d.isEqual=function(t,e){return P(t,e)},d.isEmpty=function(t){return null==t||(E(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length)},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=u||function(t){return"[object Array]"===s.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){d["is"+t]=function(e){return s.call(e)==="[object "+t+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return b(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof(t.document&&t.document.childNodes)&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return!d.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&isNaN(t)},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===s.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){if(!d.isArray(e))return b(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!l.call(t,i))return!1;t=t[i]}return!!n},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return d.isArray(t)?function(e){return w(e,t)}:_(t)},d.propertyOf=function(t){return null==t?function(){}:function(e){return d.isArray(e)?w(t,e):t[e]}},d.matcher=d.matches=function(t){return t=d.extendOwn({},t),function(e){return d.isMatch(e,t)}},d.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=d.invert(j),H=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(i,e):t}};d.escape=H(j),d.unescape=H(R),d.result=function(t,e,n){d.isArray(e)||(e=[e]);var r=e.length;if(!r)return d.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=d.isFunction(o)?o.call(t):o}return t};var q=0;d.uniqueId=function(t){var e=++q+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+$[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var r,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,n,r,i,s){return a+=t.slice(o,s).replace(U,V),o=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(t){return r.call(this,t,d)};return s.source="function("+(e.variable||"obj")+"){\n"+a+"}",s},d.chain=function(t){var e=d(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?d(e).chain():e};d.mixin=function(t){return d.each(d.functions(t),function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),Y(this,n.apply(d,t))}}),d},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}}),d.each(["concat","join","slice"],function(t){var e=n[t];d.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}();var Clustergrammer=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){var r=n(1),i=n(10),o=n(89),a=n(154),s=n(197),l=n(237),u=n(240),c=n(241),f=n(242),h=n(243),d=n(146),p=n(245),g=n(248),v=n(252),m=n(155),y=n(100),_=n(145),b=n(250);d3.slider=n(254),n(256),n(257),n(261),t.exports=function(t){var e=r(t),w={};function x(t){a(t)}return w.params=i(e),w.config=e,w.params.zoom_behavior=d3.behavior.zoom().scaleExtent([1,w.params.viz.square_zoom*w.params.viz.zoom_ratio.x]).on("zoom",function(){m(w)}),w.params.zoom_behavior.translate([w.params.viz.clust.margin.left,w.params.viz.clust.margin.top]),w.params.use_sidebar&&n(263)(w),o(w),w.update_view=p,w.resize_viz=function(){d3.select(w.params.viz.viz_svg).style("opacity",.5);var t=500;!0===this.params.viz.run_trans&&(t=2500),setTimeout(x,t,this)},w.play_demo=s,w.ini_demo=l,w.filter_viz_using_nodes=u,w.filter_viz_using_names=c,w.update_cats=function(t){f(this,t)},w.reset_cats=h,w.zoom=function(t,e,n){d(this,t,e,n)},w.save_matrix=g,w.brush_crop_matrix=v,w.d3_tip_custom=function(){return y},w.reorder=function(t,e){"sum"===e&&(e="rank"),"var"===e&&(e="rankvar"),_(this,e,t)},w.export_matrix_string=function(){return b(this.params)},w.update_view=function(t,e){p(this,t,e)},w}},function(t,e,n){var r=n(2),i=n(4),o=n(5),a=n(6),s=n(7),l=n(8),u=n(9),c=n(3);t.exports=function(t){var e=s(),n=r.extend(e,t);n.network_data=t.network_data,c.each(["row","col"],function(t){var e=n.network_data[t+"_nodes"],r=u(e);e.forEach(function(e,i){e[t+"_index"]=i,r&&(n.super_labels=!0,n.super[t]=e.name.split(": ")[0],e.name=e.name.split(": ")[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")})}),n.network_data.row_nodes_names=r.pluck(n.network_data.row_nodes,"name"),n.network_data.col_nodes_names=r.pluck(n.network_data.col_nodes,"name"),n.sim_mat=l(n);var f=o(n.network_data.views),h={};c.each(c.keys(f.possible_filters),function(t){var e=a(f.filter_data,t);h[t]=e}),_.has(n.network_data,"views")&&n.network_data.views.forEach(function(t){c.each(c.keys(f.possible_filters),function(e){_.has(t,e)||(t[e]=h[e])});var e=t.nodes;c.each(["row","col"],function(t){var n=u(e[t+"_nodes"]);e[t+"_nodes"].forEach(function(e,r){e[t+"_index"]=r,n&&(e.name=e.name.split(": ")[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")})})});var d=n.network_data.col_nodes,p=n.network_data.row_nodes;if(_.has(n.network_data,"mat")){for(var g=[],v=n.network_data.mat,m={},y=0;y<v.length;y++)for(var b=0;b<v[0].length;b++)(m={}).source=y,m.target=b,m.value=v[y][b],g.push(m);n.network_data.links=g}if(n.network_data.links.forEach(function(t){t.name=p[t.source].name+"_"+d[t.target].name,t.row_name=p[t.source].name,t.col_name=d[t.target].name}),n.transpose){n.network_data=i(n.network_data);var w=t.row_label;t.row_label=t.col_label,t.col_label=w}r.is_undefined(t.row_label)||r.is_undefined(t.col_label)||(n.super_labels=!0,n.super={},n.super.row=t.row_label,n.super.col=t.col_label),n.inst_order={},!r.is_undefined(t.order)&&r.is_supported_order(t.order)?(n.inst_order.row=t.order,n.inst_order.col=t.order):(n.inst_order.row="clust",n.inst_order.col="clust"),!r.is_undefined(t.row_order)&&r.is_supported_order(t.row_order)&&(n.inst_order.col=t.row_order),!r.is_undefined(t.col_order)&&r.is_supported_order(t.col_order)&&(n.inst_order.row=t.col_order);var x=r.has(n.network_data.row_nodes[0],"group"),k=r.has(n.network_data.col_nodes[0],"group");return n.show_dendrogram=x||k,n.keep_orig=!!r.has(n.network_data.links[0],"value_orig"),n}},function(t,e,n){var r=n(3);t.exports={normal_name:function(t){return t.name.replace(/_/g," ").split("#")[0]},is_supported_order:function(t){return"ini"===t||"clust"===t||"rank_var"===t||"rank"===t||"class"===t||"alpha"==t},has:function(t,e){return null!=t&&hasOwnProperty.call(t,e)},property:function(t){return function(e){return null==e?void 0:e[t]}},pluck:function(t,e){if(window._){if("function"==typeof r.pluck)return r.pluck(t,e);if("function"==typeof r.map)return r.map(t,this.property(e))}else if(t.map&&"function"==typeof t.map)return t.map(this.property(e))},is_undefined:function(t){return void 0===t},extend:function(t,e){for(var n in t=t||{},e)t[n]="object"==typeof e[n]?this.extend(t[n],e[n]):e[n];return t}}},function(t,e,n){var r;(function(){var n=this,i=n._,o=Array.prototype,a=Object.prototype,s=Function.prototype,l=o.push,u=o.slice,c=a.toString,f=a.hasOwnProperty,h=Array.isArray,d=Object.keys,p=s.bind,g=Object.create,v=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};void 0!==t&&t.exports&&(e=t.exports=m),e._=m,m.VERSION="1.8.3";var y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?m.identity:m.isFunction(t)?y(t,e,n):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return _(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}},w=function(t){if(!m.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},x=function(t){return function(e){return null==e?void 0:e[t]}},k=Math.pow(2,53)-1,E=x("length"),z=function(t){var e=E(t);return"number"==typeof e&&e>=0&&e<=k};function A(t){return function(e,n,r,i){n=y(n,i,4);var o=!z(e)&&m.keys(e),a=(o||e).length,s=t>0?0:a-1;return arguments.length<3&&(r=e[o?o[s]:s],s+=t),function(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}(e,n,r,o,s,a)}}m.each=m.forEach=function(t,e,n){var r,i;if(e=y(e,n),z(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=_(e,n);for(var r=!z(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},m.reduce=m.foldl=m.inject=A(1),m.reduceRight=m.foldr=A(-1),m.find=m.detect=function(t,e,n){var r;if(void 0!==(r=z(t)?m.findIndex(t,e,n):m.findKey(t,e,n))&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=_(e,n),m.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},m.reject=function(t,e,n){return m.filter(t,m.negate(_(e)),n)},m.every=m.all=function(t,e,n){e=_(e,n);for(var r=!z(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=_(e,n);for(var r=!z(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return z(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=function(t,e){var n=u.call(arguments,2),r=m.isFunction(e);return m.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e&&null!=t)for(var s=0,l=(t=z(t)?t:m.values(t)).length;s<l;s++)(r=t[s])>o&&(o=r);else e=_(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},m.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t)for(var s=0,l=(t=z(t)?t:m.values(t)).length;s<l;s++)(r=t[s])<o&&(o=r);else e=_(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},m.shuffle=function(t){for(var e,n=z(t)?t:m.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=m.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},m.sample=function(t,e,n){return null==e||n?(z(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=_(e,n),m.pluck(m.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,r){var i={};return n=_(n,r),m.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};m.groupBy=C(function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]}),m.indexBy=C(function(t,e,n){t[n]=e}),m.countBy=C(function(t,e,n){m.has(t,n)?t[n]++:t[n]=1}),m.toArray=function(t){return t?m.isArray(t)?u.call(t):z(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:z(t)?t.length:m.keys(t).length},m.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return m.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},m.first=m.head=m.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var S=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=E(t);a<s;a++){var l=t[a];if(z(l)&&(m.isArray(l)||m.isArguments(l))){e||(l=S(l,e,n));var u=0,c=l.length;for(i.length+=c;u<c;)i[o++]=l[u++]}else n||(i[o++]=l)}return i};function T(t){return function(e,n,r){n=_(n,r);for(var i=E(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function M(t,e,n){return function(r,i,o){var a=0,s=E(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(u.call(r,a,s),m.isNaN))>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}m.flatten=function(t,e){return S(t,e,!1)},m.without=function(t){return m.difference(t,u.call(arguments,1))},m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=E(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&o===u||i.push(l),o=u):n?m.contains(o,u)||(o.push(u),i.push(l)):m.contains(i,l)||i.push(l)}return i},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=E(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){for(var a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=function(t){var e=S(arguments,!0,!0,1);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,E).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.object=function(t,e){for(var n={},r=0,i=E(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},m.findIndex=T(1),m.findLastIndex=T(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=_(n,r,1))(e),o=0,a=E(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},m.indexOf=M(1,m.findIndex,m.sortedIndex),m.lastIndexOf=M(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var N=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=w(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,u.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),r=function(){return N(t,r,e,this,n.concat(u.call(arguments)))};return r},m.partial=function(t){var e=u.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===m?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return N(t,n,this,this,o)};return n},m.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return m.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:m.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var u=m.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return r=this,i=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,c)),o}},m.debounce=function(t,e,n){var r,i,o,a,s,l=function(){var u=m.now()-a;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=m.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(s=t.apply(o,i),o=i=null),s}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function O(t,e){var n=I.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||a,o="constructor";for(m.has(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=I[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)}m.keys=function(t){if(!m.isObject(t))return[];if(d)return d(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return D&&O(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return D&&O(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=e(t[r],r,t);return a},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=b(m.allKeys),m.extendOwn=m.assign=b(m.keys),m.findKey=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r},m.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;m.isFunction(e)?(i=m.allKeys(a),r=y(e,n)):(i=S(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var u=i[s],c=a[u];r(c,u,a)&&(o[u]=c)}return o},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(S(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(r,e)}}return m.pick(t,e,n)},m.defaults=b(m.allKeys,!0),m.create=function(t,e){var n=w(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var L=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=c.call(t);if(i!==c.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),o){if((l=t.length)!==e.length)return!1;for(;l--;)if(!L(t[l],e[l],n,r))return!1}else{var u,f=m.keys(t);if(l=f.length,m.keys(e).length!==l)return!1;for(;l--;)if(!m.has(e,u=f[l])||!L(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};m.isEqual=function(t,e){return L(t,e)},m.isEmpty=function(t){return null==t||(z(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=h||function(t){return"[object Array]"===c.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&f.call(t,e)},m.noConflict=function(){return n._=i,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=x,m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=y(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=m.invert(P),F=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(i,e):t}};m.escape=F(P),m.unescape=F(B),m.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),m.isFunction(r)?r.call(t):r};var j=0;m.uniqueId=function(t){var e=++j+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,W=function(t){return"\\"+H[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(q,W),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(l){throw l.source=o,l}var s=function(t){return a.call(this,t,m)};return s.source="function("+(e.variable||"obj")+"){\n"+o+"}",s},m.chain=function(t){var e=m(t);return e._chain=!0,e};var $=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),$(this,n.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],$(this,n)}}),m.each(["concat","join","slice"],function(t){var e=o[t];m.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},void 0===(r=(function(){return m}).apply(e,[]))||(t.exports=r)}).call(this)},function(t,e,n){var r=n(2);t.exports=function(t){var e,n,i={};for(i.row_nodes=t.col_nodes,i.col_nodes=t.row_nodes,i.links=[],n=0;n<t.links.length;n++)(e={}).source=t.links[n].target,e.target=t.links[n].source,e.value=t.links[n].value,r.has(t.links[n],"highlight")&&(e.highlight=t.links[n].highlight),r.has(t.links[n],"value_up")&&(e.value_up=t.links[n].value_up),r.has(t.links[n],"value_dn")&&(e.value_dn=t.links[n].value_dn),r.has(t.links[n],"info")&&(e.info=t.links[n].info),i.links.push(e);return i}},function(t,e,n){var r=n(3);t.exports=function(t){var e={},n={};r.each(t,function(t){var e=r.keys(t);r.each(e,function(e){"nodes"!=e&&(_.has(n,e)||(n[e]=[]),n[e].push(t[e]),n[e]=r.uniq(n[e]))})});var i=r.keys(n);r.each(i,function(t){var i=n[t],o=i.length,a="categorical";r.each(i,function(t){"number"==typeof t&&(a="numerical")}),o>1&&(e[t]=a)});var o={};return o.possible_filters=e,o.filter_data=n,o}},function(t,e){t.exports=function(t,e){var n=t[e].sort(function(t,e){return e-t})[0];return String(n)}},function(t,e){t.exports=function(){return{row_label_scale:1,col_label_scale:1,super_labels:!1,super:{},show_label_tooltips:!0,show_tile_tooltips:!0,transpose:!1,tile_colors:["#FF0000","#1C86EE"],bar_colors:["#FF0000","#1C86EE"],cat_value_colors:["#2F4F4F","#9370DB"],outline_colors:["orange","black"],highlight_color:"#FFFF00",tile_title:!1,input_domain:0,opacity_scale:"linear",do_zoom:!0,is_zoom:0,is_slider_drag:!1,is_cropping:!1,background_color:"#FFFFFF",super_border_color:"#F5F5F5",outer_margins:{top:0,bottom:0,left:0,right:0},ini_expand:!1,grey_border_width:2,tile_click_hlight:!1,super_label_scale:1,make_tile_tooltip:function(t){return t.info},ini_view:null,requested_view:null,use_sidebar:!0,title:null,about:null,sidebar_width:160,sidebar_icons:!0,row_search_placeholder:"Row",buffer_width:10,show_sim_mat:!1,cat_colors:null,resize:!0,clamp_opacity:.85,expand_button:!0,max_allow_fs:20,dendro_filter:{row:!1,col:!1},cat_filter:{row:!1,col:!1},crop_filter_nodes:{row:!1,col:!1},row_tip_callback:null,col_tip_callback:null,tile_tip_callback:null,matrix_update_callback:null,cat_update_callback:null,dendro_callback:null,dendro_click_callback:null,new_row_cats:null,make_modals:!0,show_viz_border:!1}}},function(t,e,n){var r=n(3);t.exports=function(t){var e=!1;if(t.network_data.row_nodes_names.length==t.network_data.col_nodes_names.length){var n=t.network_data.row_nodes_names,i=t.network_data.col_nodes_names;e=!0,r.each(n,function(t){var r=n.indexOf(t);t!==i[r]&&(e=!1)})}return e&&(t.expand_button=!1),e}},function(t,e,n){var r=n(3);t.exports=function(t){var e=!0;return r.each(t,function(t){String(t.name).indexOf(": ")<0&&(e=!1)}),e}},function(t,e,n){var r=n(11),i=n(65),o=n(66),a=n(5),s=n(67),l=n(88);t.exports=function(t){var e=$.extend(!0,{},t),n=e;if(n.inst_nodes={},n.inst_nodes.row_nodes=n.network_data.row_nodes,n.inst_nodes.col_nodes=n.network_data.col_nodes,null!==n.ini_view){var u=n.ini_view,c=a(n.network_data.views);n.viz={},n.viz.possible_filters=c.possible_filters,n.viz.filter_data=c.filter_data,u=o(n,u),n.network_data=r(e,n,u),n.requested_view=u}return(n=s(n)).use_sidebar&&(n.sidebar=i(n)),n.zoom_info=l(),n}},function(t,e,n){var r=n(12),i=n(64);t.exports=function(t,e,n){var o=t.network_data.views,a=!1;_.has(o[0],"enr_score_type")&&(a=!0);var s=i(e,o,n);a&&0==s.length&&(s=i(e,o,n={N_row_sum:"all",N_col_sum:"10"}));var l=s[0];return void 0!==l?r(t,l.nodes):t.network_data}},function(t,e,n){var r=n(2),i=n(13),o=n(3),a=i.create();a.import(n(26)),a.import(n(63)),t.exports=function(t,e){var n=t.network_data.links,i=r.pluck(e.row_nodes,"name"),s=r.pluck(e.col_nodes,"name"),l=a.matrix(a.zeros([e.row_nodes.length,e.col_nodes.length]));l=l.toArray();var u=o.filter(n,function(t){var e=t.name.split("_")[0],n=t.name.split("_")[1],r=o.indexOf(i,e),a=o.indexOf(s,n);if(r>-1&a>-1)return t.source=r,t.target=a,l[r][a]=t.value,t}),c={};return c.row_nodes=e.row_nodes,c.row_nodes_names=i,c.col_nodes=e.col_nodes,c.col_nodes_names=s,c.links=u,c.all_links=n,c.mat=l,c.views=t.network_data.views,_.has(t.network_data,"cat_colors")&&(c.cat_colors=t.network_data.cat_colors),c}},function(t,e,n){t.exports=n(14)},function(t,e,n){var r=n(15).isFactory,i=n(17),o=n(21),a=n(23),s=n(25);e.create=function(t){if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var e=[],n=[],l=o.mixin({});l.type={},l.expression={transform:{},mathWithTransform:{}},l.typed=i.create(l.type);var u={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function c(t){if(!r(t))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var i,o=e.indexOf(t);return-1===o?(i=!0===t.math?t.factory(l.type,u,c,l.typed,l):t.factory(l.type,u,c,l.typed),e.push(t),n.push(i)):i=n[o],i}return l.import=c(a),l.config=c(s),l.expression.mathWithTransform.config=l.config,t&&l.config(t),l}},function(t,e,n){"use strict";var r=n(16);e.clone=function t(n){var i=typeof n;if("number"===i||"string"===i||"boolean"===i||null==n)return n;if("function"==typeof n.clone)return n.clone();if(Array.isArray(n))return n.map(function(e){return t(e)});if(n instanceof Number)return new Number(n.valueOf());if(n instanceof String)return new String(n.valueOf());if(n instanceof Boolean)return new Boolean(n.valueOf());if(n instanceof Date)return new Date(n.valueOf());if(r(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return e.map(n,t)},e.map=function(t,n){var r={};for(var i in t)e.hasOwnProperty(t,i)&&(r[i]=n(t[i]));return r},e.extend=function(t,n){for(var r in n)e.hasOwnProperty(n,r)&&(t[r]=n[r]);return t},e.deepExtend=function t(n,r){if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(e.hasOwnProperty(r,i))if(r[i]&&r[i].constructor===Object)void 0===n[i]&&(n[i]={}),n[i].constructor===Object?t(n[i],r[i]):n[i]=r[i];else{if(Array.isArray(r[i]))throw new TypeError("Arrays are not supported by deepExtend");n[i]=r[i]}return n},e.deepEqual=function(t,n){var r,i,o;if(Array.isArray(t)){if(!Array.isArray(n))return!1;if(t.length!=n.length)return!1;for(i=0,o=t.length;i<o;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if(t instanceof Object){if(Array.isArray(n)||!(n instanceof Object))return!1;for(r in t)if(!e.deepEqual(t[r],n[r]))return!1;for(r in n)if(!e.deepEqual(t[r],n[r]))return!1;return!0}return typeof t==typeof n&&t==n},e.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(t){}return!1},e.lazy=function(t,n,r){if(e.canDefineProperty()){var i,o=!0;Object.defineProperty(t,n,{get:function(){return o&&(i=r(),o=!1),i},set:function(t){i=t,o=!1},configurable:!0,enumerable:!0})}else t[n]=r()},e.traverse=function(t,e){var n=t;if(e)for(var r=e.split("."),i=0;i<r.length;i++){var o=r[i];o in n||(n[o]={}),n=n[o]}return n},e.hasOwnProperty=function(t,e){return t&&Object.hasOwnProperty.call(t,e)},e.isFactory=function(t){return t&&"function"==typeof t.factory}},function(t,e){t.exports=function(t){return t&&t.constructor.prototype.isBigNumber||!1}},function(t,e,n){var r=n(18),i=n(19).digits,o=n(16),a=n(20),s=function(){return s=r.create,r};e.create=function(t){t.isNumber=function(t){return"number"==typeof t},t.isComplex=function(e){return t.Complex&&e instanceof t.Complex||!1},t.isBigNumber=o,t.isFraction=function(e){return t.Fraction&&e instanceof t.Fraction||!1},t.isUnit=function(t){return t&&t.constructor.prototype.isUnit||!1},t.isString=function(t){return"string"==typeof t},t.isArray=Array.isArray,t.isMatrix=a,t.isDenseMatrix=function(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix||!1},t.isSparseMatrix=function(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix||!1},t.isRange=function(t){return t&&t.constructor.prototype.isRange||!1},t.isIndex=function(t){return t&&t.constructor.prototype.isIndex||!1},t.isBoolean=function(t){return"boolean"==typeof t},t.isResultSet=function(t){return t&&t.constructor.prototype.isResultSet||!1},t.isHelp=function(t){return t&&t.constructor.prototype.isHelp||!1},t.isFunction=function(t){return"function"==typeof t},t.isDate=function(t){return t instanceof Date},t.isRegExp=function(t){return t instanceof RegExp},t.isObject=function(t){return"object"==typeof t},t.isNull=function(t){return null===t},t.isUndefined=function(t){return void 0===t},t.isAccessorNode=function(t){return t&&t.isAccessorNode&&t.constructor.prototype.isNode||!1},t.isArrayNode=function(t){return t&&t.isArrayNode&&t.constructor.prototype.isNode||!1},t.isAssignmentNode=function(t){return t&&t.isAssignmentNode&&t.constructor.prototype.isNode||!1},t.isBlockNode=function(t){return t&&t.isBlockNode&&t.constructor.prototype.isNode||!1},t.isConditionalNode=function(t){return t&&t.isConditionalNode&&t.constructor.prototype.isNode||!1},t.isConstantNode=function(t){return t&&t.isConstantNode&&t.constructor.prototype.isNode||!1},t.isFunctionAssignmentNode=function(t){return t&&t.isFunctionAssignmentNode&&t.constructor.prototype.isNode||!1},t.isFunctionNode=function(t){return t&&t.isFunctionNode&&t.constructor.prototype.isNode||!1},t.isIndexNode=function(t){return t&&t.isIndexNode&&t.constructor.prototype.isNode||!1},t.isNode=function(t){return t&&t.isNode&&t.constructor.prototype.isNode||!1},t.isObjectNode=function(t){return t&&t.isObjectNode&&t.constructor.prototype.isNode||!1},t.isOperatorNode=function(t){return t&&t.isOperatorNode&&t.constructor.prototype.isNode||!1},t.isParenthesisNode=function(t){return t&&t.isParenthesisNode&&t.constructor.prototype.isNode||!1},t.isRangeNode=function(t){return t&&t.isRangeNode&&t.constructor.prototype.isNode||!1},t.isSymbolNode=function(t){return t&&t.isSymbolNode&&t.constructor.prototype.isNode||!1},t.isChain=function(t){return t&&t.constructor.prototype.isChain||!1};var e=s();return e.types=[{name:"number",test:t.isNumber},{name:"Complex",test:t.isComplex},{name:"BigNumber",test:t.isBigNumber},{name:"Fraction",test:t.isFraction},{name:"Unit",test:t.isUnit},{name:"string",test:t.isString},{name:"Array",test:t.isArray},{name:"Matrix",test:t.isMatrix},{name:"DenseMatrix",test:t.isDenseMatrix},{name:"SparseMatrix",test:t.isSparseMatrix},{name:"Range",test:t.isRange},{name:"Index",test:t.isIndex},{name:"boolean",test:t.isBoolean},{name:"ResultSet",test:t.isResultSet},{name:"Help",test:t.isHelp},{name:"function",test:t.isFunction},{name:"Date",test:t.isDate},{name:"RegExp",test:t.isRegExp},{name:"Object",test:t.isObject},{name:"null",test:t.isNull},{name:"undefined",test:t.isUndefined},{name:"OperatorNode",test:t.isOperatorNode},{name:"ConstantNode",test:t.isConstantNode},{name:"SymbolNode",test:t.isSymbolNode},{name:"ParenthesisNode",test:t.isParenthesisNode},{name:"FunctionNode",test:t.isFunctionNode},{name:"FunctionAssignmentNode",test:t.isFunctionAssignmentNode},{name:"ArrayNode",test:t.isArrayNode},{name:"AssignmentNode",test:t.isAssignmentNode},{name:"BlockNode",test:t.isBlockNode},{name:"ConditionalNode",test:t.isConditionalNode},{name:"IndexNode",test:t.isIndexNode},{name:"RangeNode",test:t.isRangeNode},{name:"Node",test:t.isNode}],e.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(i(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t.BigNumber(e)}},{from:"number",to:"Complex",convert:function(e){return new t.Complex(e,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(e){return new t.Complex(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return new t.Complex(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){if(new t.Fraction(e).valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return new t.Fraction(e)}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(e){try{return new t.BigNumber(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){try{return new t.Fraction(e)}catch(n){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){try{return new t.Complex(e)}catch(n){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(e){return new t.BigNumber(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return new t.Fraction(+e)}},{from:"boolean",to:"string",convert:function(t){return+t}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new t.BigNumber(0)}},{from:"null",to:"Fraction",convert:function(){return new t.Fraction(0)}},{from:"Array",to:"Matrix",convert:function(e){return new t.DenseMatrix(e)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],e}},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){return function t(){function e(t){for(var e,n=0;n<v.types.length;n++){var r=v.types[n];if(r.name===t){e=r.test;break}}if(!e){var i;for(n=0;n<v.types.length;n++)if((r=v.types[n]).name.toLowerCase()==t.toLowerCase()){i=r.name;break}throw new Error('Unknown type "'+t+'"'+(i?'. Did you mean "'+i+'"?':""))}return e}function n(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(r.signatures&&""!=r.name)if(""==e)e=r.name;else if(e!=r.name){var i=new Error("Function names do not match (expected: "+e+", actual: "+r.name+")");throw i.data={actual:r.name,expected:e},i}}return e}function r(t,e,n,r,i){var o,a=u(r),s=i?i.split(","):null,l=t||"unnamed",f=s&&c(s,"any"),h={fn:t,index:n,actual:r,expected:s};o=s?e>n&&!f?"Unexpected type of argument in function "+l+" (expected: "+s.join(" or ")+", actual: "+a+", index: "+n+")":"Too few arguments in function "+l+" (expected: "+s.join(" or ")+", index: "+n+")":"Too many arguments in function "+l+" (expected: "+n+", actual: "+e+")";var d=new TypeError(o);return d.data=h,d}function i(t){this.name=t||"refs",this.categories={}}function o(t,e){if("string"==typeof t){var n=t.trim(),r="..."===n.substr(0,3);if(r&&(n=n.substr(3)),""===n)this.types=["any"];else{this.types=n.split("|");for(var i=0;i<this.types.length;i++)this.types[i]=this.types[i].trim()}}else{if(!Array.isArray(t)){if(t instanceof o)return t.clone();throw new Error("String or Array expected")}this.types=t}this.conversions=[],this.varArgs=r||e||!1,this.anyType=-1!==this.types.indexOf("any")}function a(t,e){var n;if("string"==typeof t)n=""!==t?t.split(","):[];else{if(!Array.isArray(t))throw new Error("string or Array expected");n=t}this.params=new Array(n.length),this.anyType=!1,this.varArgs=!1;for(var r=0;r<n.length;r++){var i=new o(n[r]);if(this.params[r]=i,i.anyType&&(this.anyType=!0),r===n.length-1)this.varArgs=i.varArgs;else if(i.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."')}this.fn=e}function s(t,e,n,r){this.path=t||[],this.param=t[t.length-1]||null,this.signature=e||null,this.childs=n||[],this.fallThrough=r||!1}function l(t,e){var n=new i,l=function(t){var e,n,r={},i=[];for(var o in t)if(t.hasOwnProperty(o)){if((e=new a(o,t[o])).ignore())continue;var s=e.expand();for(n=0;n<s.length;n++){var l=s[n],u=l.toString(),f=r[u];if(f){var h=a.compare(l,f);if(h<0)r[u]=l;else if(0===h)throw new Error('Signature "'+u+'" is defined twice')}else r[u]=l}}for(u in r)r.hasOwnProperty(u)&&i.push(r[u]);for(i.sort(function(t,e){return a.compare(t,e)}),n=0;n<i.length;n++)if((e=i[n]).varArgs)for(var d=e.params.length-1,p=e.params[d],g=0;g<p.types.length;){if(p.conversions[g])for(var v=p.types[g],m=0;m<i.length;m++){var y=i[m],_=y.params[d];if(y!==e&&_&&c(_.types,v)&&!_.conversions[d]){p.types.splice(g,1),p.conversions.splice(g,1),g--;break}}g++}return i}(e);if(0==l.length)throw new Error("No signatures provided");var u=function t(e,n,r){var i,a,l,u=n.length,f=[];for(i=0;i<e.length;i++)(a=e[i]).params.length!==u||l||(l=a),null!=a.params[u]&&f.push(a);f.sort(function(t,e){return o.compare(t.params[u],e.params[u])});var h=[];for(i=0;i<f.length;i++){var d=(a=f[i]).params[u],p=h.filter(function(t){return t.param.overlapping(d)})[0];if(p){if(p.param.varArgs)throw new Error('Conflicting types "'+p.param+'" and "'+d+'"');p.signatures.push(a)}else h.push({param:d,signatures:[a]})}var g=[];for(i=0;i<r.length;i++)r[i].paramsStartWith(n)&&g.push(r[i]);var v=!1;for(i=0;i<g.length;i++)if(!c(e,g[i])){v=!0;break}var m=new Array(h.length);for(i=0;i<h.length;i++){var y=h[i];m[i]=t(y.signatures,n.concat(y.param),g)}return new s(n,l,m,v)}(l,[],function(t){for(var e=[],n=0;n<t.length;n++)t[n].anyType&&e.push(t[n]);return e}(l)),f=[],h=(t||"").replace(/[^a-zA-Z0-9_$]/g,"_"),d=function(t){for(var e=[],n=0;n<t;n++)e[n]="arg"+n;return e}(function(t){for(var e=0,n=0;n<t.length;n++){var r=t[n].params.length;r>e&&(e=r)}return e}(l));f.push("function "+h+"("+d.join(", ")+") {"),f.push('  "use strict";'),f.push("  var name = "+JSON.stringify(t||"")+";"),f.push(u.toCode(n,"  ",!1)),f.push("}");var p=[n.toCode(),"return "+f.join("\n")].join("\n"),g=new Function(n.name,"createError",p)(n,r);return g.signatures=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.fn&&!r.hasConversions()&&(e[r.params.join(",")]=r.fn)}return e}(l),g}function u(t){for(var e,n=0;n<v.types.length;n++){var r=v.types[n];if("Object"===r.name)e=r;else if(r.test(t))return r.name}return e&&e.test(t)?e.name:"unknown"}function c(t,e){return-1!==t.indexOf(e)}function f(t){return t[t.length-1]}i.prototype.add=function(t,e){var n=e||"fn";this.categories[n]||(this.categories[n]=[]);var r=this.categories[n].indexOf(t);return-1==r&&(r=this.categories[n].length,this.categories[n].push(t)),n+r},i.prototype.toCode=function(){var t=[],e=this.name+".categories",n=this.categories;for(var r in n)if(n.hasOwnProperty(r))for(var i=n[r],o=0;o<i.length;o++)t.push("var "+r+o+" = "+e+"['"+r+"']["+o+"];");return t.join("\n")},o.compare=function(t,e){if(t.anyType)return 1;if(e.anyType)return-1;if(c(t.types,"Object"))return 1;if(c(e.types,"Object"))return-1;if(t.hasConversions()){if(e.hasConversions()){var n,r,i;for(n=0;n<t.conversions.length;n++)if(void 0!==t.conversions[n]){r=t.conversions[n];break}for(n=0;n<e.conversions.length;n++)if(void 0!==e.conversions[n]){i=e.conversions[n];break}return v.conversions.indexOf(r)-v.conversions.indexOf(i)}return 1}if(e.hasConversions())return-1;var o,a;for(n=0;n<v.types.length;n++)if(v.types[n].name===t.types[0]){o=n;break}for(n=0;n<v.types.length;n++)if(v.types[n].name===e.types[0]){a=n;break}return o-a},o.prototype.overlapping=function(t){for(var e=0;e<this.types.length;e++)if(c(t.types,this.types[e]))return!0;return!1},o.prototype.matches=function(t){return this.anyType||t.anyType||this.overlapping(t)},o.prototype.clone=function(){var t=new o(this.types.slice(),this.varArgs);return t.conversions=this.conversions.slice(),t},o.prototype.hasConversions=function(){return this.conversions.length>0},o.prototype.contains=function(t){for(var e=0;e<this.types.length;e++)if(t[this.types[e]])return!0;return!1},o.prototype.toString=function(t){for(var e=[],n={},r=0;r<this.types.length;r++){var i=this.conversions[r],o=t&&i?i.to:this.types[r];o in n||(n[o]=!0,e.push(o))}return(this.varArgs?"...":"")+e.join("|")},a.prototype.clone=function(){return new a(this.params.slice(),this.fn)},a.prototype.expand=function(){var t=[];return function e(n,r){if(r.length<n.params.length){var i,s,l,u=n.params[r.length];if(u.varArgs){for(s=u.clone(),i=0;i<v.conversions.length;i++)if(!c(u.types,(l=v.conversions[i]).from)&&c(u.types,l.to)){var f=s.types.length;s.types[f]=l.from,s.conversions[f]=l}e(n,r.concat(s))}else{for(i=0;i<u.types.length;i++)e(n,r.concat(new o(u.types[i])));for(i=0;i<v.conversions.length;i++)!c(u.types,(l=v.conversions[i]).from)&&c(u.types,l.to)&&((s=new o(l.from)).conversions[0]=l,e(n,r.concat(s)))}}else t.push(new a(r,n.fn))}(this,[]),t},a.compare=function(t,e){if(t.params.length>e.params.length)return 1;if(t.params.length<e.params.length)return-1;var n,r=t.params.length,i=0,a=0;for(n=0;n<r;n++)t.params[n].hasConversions()&&i++,e.params[n].hasConversions()&&a++;if(i>a)return 1;if(i<a)return-1;for(n=0;n<t.params.length;n++){var s=o.compare(t.params[n],e.params[n]);if(0!==s)return s}return 0},a.prototype.hasConversions=function(){for(var t=0;t<this.params.length;t++)if(this.params[t].hasConversions())return!0;return!1},a.prototype.ignore=function(){for(var t={},e=0;e<v.ignore.length;e++)t[v.ignore[e]]=!0;for(e=0;e<this.params.length;e++)if(this.params[e].contains(t))return!0;return!1},a.prototype.paramsStartWith=function(t){if(0===t.length)return!0;for(var e=f(this.params),n=f(t),r=0;r<t.length;r++){var i=this.params[r]||(e.varArgs?e:null),o=t[r]||(n.varArgs?n:null);if(!i||!o||!i.matches(o))return!1}return!0},a.prototype.toCode=function(t,e){for(var n=new Array(this.params.length),r=0;r<this.params.length;r++){var i=this.params[r],o=i.conversions[0];n[r]=i.varArgs?"varArgs":o?t.add(o.convert,"convert")+"(arg"+r+")":"arg"+r}var a=this.fn?t.add(this.fn,"signature"):void 0;return a?e+"return "+a+"("+n.join(", ")+"); // signature: "+this.params.join(", "):[].join("\n")},a.prototype.toString=function(){return this.params.join(", ")},s.prototype.toCode=function(t,n){var r=[];if(this.param){var i=this.path.length-1,o=this.param.conversions[0],a="// type: "+(o?o.from+" (convert to "+o.to+")":this.param);if(this.param.varArgs)if(this.param.anyType)r.push(n+"if (arguments.length > "+i+") {"),r.push(n+"  var varArgs = [];"),r.push(n+"  for (var i = "+i+"; i < arguments.length; i++) {"),r.push(n+"    varArgs.push(arguments[i]);"),r.push(n+"  }"),r.push(this.signature.toCode(t,n+"  ")),r.push(n+"}");else{for(var s=(function(n,r){for(var i=[],o=0;o<n.length;o++)i[o]=t.add(e(n[o]),"test")+"("+r+")";return i.join(" || ")}).bind(this),l=this.param.types,u=[],c=0;c<l.length;c++)void 0===this.param.conversions[c]&&u.push(l[c]);for(r.push(n+"if ("+s(l,"arg"+i)+") { "+a),r.push(n+"  var varArgs = [arg"+i+"];"),r.push(n+"  for (var i = "+(i+1)+"; i < arguments.length; i++) {"),r.push(n+"    if ("+s(u,"arguments[i]")+") {"),r.push(n+"      varArgs.push(arguments[i]);"),c=0;c<l.length;c++){var f=this.param.conversions[c];if(f){var h=t.add(e(l[c]),"test"),d=t.add(f.convert,"convert");r.push(n+"    }"),r.push(n+"    else if ("+h+"(arguments[i])) {"),r.push(n+"      varArgs.push("+d+"(arguments[i]));")}}r.push(n+"    } else {"),r.push(n+"      throw createError(name, arguments.length, i, arguments[i], '"+u.join(",")+"');"),r.push(n+"    }"),r.push(n+"  }"),r.push(this.signature.toCode(t,n+"  ")),r.push(n+"}")}else if(this.param.anyType)r.push(n+"// type: any"),r.push(this._innerCode(t,n));else{var p=this.param.types[0];h="any"!==p?t.add(e(p),"test"):null,r.push(n+"if ("+h+"(arg"+i+")) { "+a),r.push(this._innerCode(t,n+"  ")),r.push(n+"}")}}else r.push(this._innerCode(t,n));return r.join("\n")},s.prototype._innerCode=function(t,e){var n,r=[];for(this.signature&&(r.push(e+"if (arguments.length === "+this.path.length+") {"),r.push(this.signature.toCode(t,e+"  ")),r.push(e+"}")),n=0;n<this.childs.length;n++)r.push(this.childs[n].toCode(t,e));if(!this.fallThrough||this.param&&this.param.anyType){var i=this._exceptions(t,e);i&&r.push(i)}return r.join("\n")},s.prototype._exceptions=function(t,e){var n=this.path.length;if(0===this.childs.length)return[e+"if (arguments.length > "+n+") {",e+"  throw createError(name, arguments.length, "+n+", arguments["+n+"]);",e+"}"].join("\n");for(var r={},i=[],o=0;o<this.childs.length;o++){var a=this.childs[o];if(a.param)for(var s=0;s<a.param.types.length;s++){var l=a.param.types[s];l in r||a.param.conversions[s]||(r[l]=!0,i.push(l))}}return e+"throw createError(name, arguments.length, "+n+", arguments["+n+"], '"+i.join(",")+"');"};var h=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],d={},p=[],g=[],v={config:d,types:h,conversions:p,ignore:g};return(v=l("typed",{Object:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);return l(n(e),t)},"string, Object":l,"...Function":function(t){for(var e,r=n(t),i={},o=0;o<t.length;o++){var a=t[o];if("object"!=typeof a.signatures)throw(e=new TypeError("Function is no typed-function (index: "+o+")")).data={index:o},e;for(var s in a.signatures)if(a.signatures.hasOwnProperty(s))if(i.hasOwnProperty(s)){if(a.signatures[s]!==i[s])throw(e=new Error('Signature "'+s+'" is defined twice')).data={signature:s},e}else i[s]=a.signatures[s]}return l(r,i)}})).config=d,v.types=h,v.conversions=p,v.ignore=g,v.create=t,v.find=function(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof e){n=e.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");n=e}var i=n.join(","),o=t.signatures[i];if(o)return o;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+n.join(", ")+"))")},v.convert=function(t,e){var n=u(t);if(e===n)return t;for(var r=0;r<v.conversions.length;r++){var i=v.conversions[r];if(i.from===n&&i.to===e)return i.convert(t)}throw new Error("Cannot convert from "+n+" to "+e)},v.addType=function(t){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");v.types.push(t)},v.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");v.conversions.push(t)},v}()})?r.apply(e,[]):r)||(t.exports=i)},function(t,e){"use strict";function n(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}e.isNumber=function(t){return"number"==typeof t},e.isInteger=function(t){return!!isFinite(t)&&t==Math.round(t)},e.sign=Math.sign||function(t){return t>0?1:t<0?-1:0},e.format=function(t,n){if("function"==typeof n)return n(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",i=void 0;switch(n&&(n.notation&&(r=n.notation),e.isNumber(n)?i=n:n.precision&&(i=n.precision)),r){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"engineering":return e.toEngineering(t,i);case"auto":return e.toPrecision(t,i,n&&n.exponential).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},e.splitNumber=function(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,function(t){return i-=t.length,""}).replace(/0*$/,"").split("").map(function(t){return parseInt(t)});return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}},e.toEngineering=function(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=e.roundDigits(e.splitNumber(t),r),o=i.exponent,a=i.coefficients,s=o%3==0?o:o<0?o-3-o%3:o-o%3,l=o>=0?o:Math.abs(s);a.length-1<l&&(a=a.concat(n(l-(a.length-1))));for(var u=Math.abs(o-s),c=1;--u>=0;)c++;var f=a.slice(c).join(""),h=f.match(/[1-9]/)?"."+f:"",d=a.slice(0,c).join("")+h+"e"+(o>=0?"+":"")+s.toString();return i.sign+d},e.toFixed=function(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=e.splitNumber(t),o=e.roundDigits(i,i.exponent+1+(r||0)),a=o.coefficients,s=o.exponent+1,l=s+(r||0);return a.length<l&&(a=a.concat(n(l-a.length))),s<0&&(a=n(1-s).concat(a),s=1),r&&a.splice(s,0,0===s?"0.":"."),o.sign+a.join("")},e.toExponential=function(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=e.splitNumber(t),o=r?e.roundDigits(i,r):i,a=o.coefficients,s=o.exponent;a.length<r&&(a=a.concat(n(r-a.length)));var l=a.shift();return o.sign+l+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s},e.toPrecision=function(t,r,i){if(isNaN(t)||!isFinite(t))return String(t);var o=i&&void 0!==i.lower?i.lower:.001,a=i&&void 0!==i.upper?i.upper:1e5,s=e.splitNumber(t),l=Math.abs(Math.pow(10,s.exponent));if(l<o||l>=a)return e.toExponential(t,r);var u=r?e.roundDigits(s,r):s,c=u.coefficients,f=u.exponent;c.length<r&&(c=c.concat(n(r-c.length))),c=c.concat(n(f-c.length+1+(c.length<r?r-c.length:0)));var h=f>0?f:0;return h<(c=n(-f).concat(c)).length-1&&c.splice(h+1,0,"."),u.sign+c.join("")},e.roundDigits=function(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e&&r.splice(e,r.length-e)[0]>=5){var i=e-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n},e.digits=function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},e.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16,e.nearlyEqual=function(t,n,r){if(null==r)return t==n;if(t==n)return!0;if(isNaN(t)||isNaN(n))return!1;if(isFinite(t)&&isFinite(n)){var i=Math.abs(t-n);return i<e.DBL_EPSILON||i<=Math.max(Math.abs(t),Math.abs(n))*r}return!1}},function(t,e){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isMatrix||!1}},function(t,e,n){var r=n(22);e.mixin=function(t){var e=new r;return t.on=e.on.bind(e),t.off=e.off.bind(e),t.once=e.once.bind(e),t.emit=e.emit.bind(e),t}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},t.exports=n},function(t,e,n){"use strict";var r=n(15).lazy,i=n(15).isFactory,o=n(15).traverse,a=n(24);e.math=!0,e.name="import",e.factory=function(t,e,n,s,l){function u(t,e,n){if(n.wrap&&"function"==typeof e&&(i=function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var i=arguments[e];t[e]=i&&i.valueOf()}return r.apply(l,t)},(r=e).transform&&(i.transform=r.transform),e=i),d(l[t])&&d(e))return e=n.override?s(t,e.signatures):s(l[t],e),l[t]=e,c(t,e),void l.emit("import",t,function(){return e});var r,i;if(void 0===l[t]||n.override)return l[t]=e,c(t,e),void l.emit("import",t,function(){return e});if(!n.silent)throw new Error('Cannot import "'+t+'": already exists')}function c(t,e){e&&"function"==typeof e.transform?(l.expression.transform[t]=e.transform,p(t)&&(l.expression.mathWithTransform[t]=e.transform)):(delete l.expression.transform[t],p(t)&&(l.expression.mathWithTransform[t]=e))}function f(t,e){if("string"==typeof t.name){var i=t.name,a=i in l.expression.transform,u=t.path?o(l,t.path):l,c=u.hasOwnProperty(i)?u[i]:void 0,f=function(){var r=n(t);if(r&&"function"==typeof r.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(d(c)&&d(r))return e.override||(r=s(c,r)),r;if(void 0===c||e.override)return r;if(!e.silent)throw new Error('Cannot import "'+i+'": already exists')};!1!==t.lazy?(r(u,i,f),a||("expression.transform"===t.path||g(t))&&r(l.expression.mathWithTransform,i,f)):(u[i]=f(),a||("expression.transform"===t.path||g(t))&&(l.expression.mathWithTransform[i]=f())),l.emit("import",i,f,t.path)}else n(t)}function h(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||e&&t.isUnit(e)||e&&t.isComplex(e)||e&&t.isBigNumber(e)||e&&t.isFraction(e)||e&&t.isMatrix(e)||e&&Array.isArray(e)}function d(t){return"function"==typeof t&&"object"==typeof t.signatures}function p(t){return!v.hasOwnProperty(t)}function g(t){return void 0===t.path&&!v.hasOwnProperty(t.name)}var v={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function t(e,n){var r=arguments.length;if(1!==r&&2!==r)throw new a("import",r,1,2);if(n||(n={}),i(e))f(e,n);else if(Array.isArray(e))e.forEach(function(e){t(e,n)});else if("object"==typeof e){for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];h(s)?u(o,s,n):i(e)?f(e,n):t(s,n)}}else if(!n.silent)throw new TypeError("Factory, Object, or Array expected")}},e.lazy=!0},function(t,e){"use strict";function n(t,e,r,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=i,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}(n.prototype=new Error).constructor=Error,n.prototype.name="ArgumentsError",n.prototype.isArgumentsError=!0,t.exports=n},function(t,e,n){"use strict";var r=n(15);function i(t,e,n){if(void 0!==t[e]&&-1===n.indexOf(t[e])){var r=function(t,e){return n.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())}(0,t[e]);-1!==r?(console.warn('Warning: Wrong casing for configuration option "'+e+'", should be "'+n[r]+'" instead of "'+t[e]+'".'),t[e]=n[r]):console.warn('Warning: Unknown value "'+t[e]+'" for configuration option "'+e+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}}e.name="config",e.math=!0,e.factory=function(t,e,n,o,a){var s=["Matrix","Array"],l=["number","BigNumber","Fraction"];function u(t){if(t){var n=r.map(e,r.clone);i(t,"matrix",s),i(t,"number",l),r.deepExtend(e,t);var o=r.map(e,r.clone),u=r.map(t,r.clone);return a.emit("config",o,n,u),o}return r.map(e,r.clone)}return u.MATRIX=s,u.NUMBER=l,u}},function(t,e,n){t.exports=[n(27),n(37),n(39),n(42),n(52),n(58),n(59),n(60),n(61),n(44),n(62)]},function(t,e,n){"use strict";var r=n(28).string.isString;e.name="Matrix",e.path="type",e.factory=function(t,e,n,i){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator")}return o.prototype.type="Matrix",o.prototype.isMatrix=!0,o.storage=function(t){if(!r(t))throw new TypeError("format must be a string value");var e=o._storage[t];if(!e)throw new SyntaxError("Unsupported matrix storage format: "+t);return e},o._storage={},o.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},o.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},o.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},o.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},o.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},o.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},o.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},o.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},o.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},o.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},o.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},o.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},o.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},o.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},o.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},o.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},o}},function(t,e,n){"use strict";e.array=n(29),e.boolean=n(35),e.function=n(36),e.number=n(19),e.object=n(15),e.string=n(30),e.types=n(32),e.emitter=n(21)},function(t,e,n){"use strict";var r=n(19),i=n(30),o=(n(15),n(32),n(33)),a=n(34);e.size=function(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e},e.validate=function(t,e){if(0==e.length){if(Array.isArray(t))throw new o(t.length,0)}else!function t(e,n,r){var i,a=e.length;if(a!=n[r])throw new o(a,n[r]);if(r<n.length-1){var s=r+1;for(i=0;i<a;i++){if(!Array.isArray(e[i]))throw new o(n.length-1,n.length,"<");t(e[i],n,s)}}else for(i=0;i<a;i++)if(Array.isArray(e[i]))throw new o(n.length+1,n.length,">")}(t,e,0)},e.validateIndex=function(t,e){if(!r.isNumber(t)||!r.isInteger(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new a(t,e)},e.UNINITIALIZED={},e.resize=function(t,n,o){if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new Error("Resizing to scalar is not supported");return n.forEach(function(t){if(!r.isNumber(t)||!r.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+i.format(n)+")")}),function t(n,r,i,o){var a,s,l=r[i],u=Math.min(n.length,l);if(n.length=l,i<r.length-1){var c=i+1;for(a=0;a<u;a++)s=n[a],Array.isArray(s)||(n[a]=s=[s]),t(s,r,c,o);for(a=u;a<l;a++)n[a]=s=[],t(s,r,c,o)}else{for(a=0;a<u;a++)for(;Array.isArray(n[a]);)n[a]=n[a][0];if(o!==e.UNINITIALIZED)for(a=u;a<l;a++)n[a]=o}}(t,n,0,void 0!==o?o:0),t},e.reshape=function(t,n){var r,i=e.flatten(t),a=function(t){return t.reduce(function(t,e){return t*e})};if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new o(0,a(e.size(t)),"!=");try{r=function t(e,n){var r,i=[];if(0===n.length){if(0===e.length)throw new o(null,null,"!=");return e.shift()}for(r=0;r<n[0];r+=1)i.push(t(e,n.slice(1)));return i}(i,n)}catch(s){if(s instanceof o)throw new o(a(n),a(e.size(t)),"!=");throw s}if(i.length>0)throw new o(a(n),a(e.size(t)),"!=");return r},e.squeeze=function(t,n){for(var r=n||e.size(t);Array.isArray(t)&&1===t.length;)t=t[0],r.shift();for(var i=r.length;1===r[i-1];)i--;return i<r.length&&(t=function t(e,n,r){var i,o;if(r<n){var a=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,a)}else for(;Array.isArray(e);)e=e[0];return e}(t,i,0),r.length=i),t},e.unsqueeze=function(t,n,r,i){var o=i||e.size(t);if(r)for(var a=0;a<r;a++)t=[t],o.unshift(1);for(t=function t(e,n,r){var i,o;if(Array.isArray(e)){var a=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,a)}else for(var s=r;s<n;s++)e=[e];return e}(t,n,0);o.length<n;)o.push(1);return t},e.flatten=function(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e},e.map=function(t,e){return Array.prototype.map.call(t,e)},e.forEach=function(t,e){Array.prototype.forEach.call(t,e)},e.filter=function(t,n){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n)},e.filterRegExp=function(t,n){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,function(t){return n.test(t)})},e.join=function(t,e){return Array.prototype.join.call(t,e)},e.identify=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e},e.generalize=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e},e.isArray=Array.isArray},function(t,e,n){"use strict";var r=n(19).format,i=n(31).format,o=n(16);e.isString=function(t){return"string"==typeof t},e.endsWith=function(t,e){return t.substring(t.length-e.length,t.length)===e},e.format=function(t,n){if("number"==typeof t)return r(t,n);if(o(t))return i(t,n);if(function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t))return n&&"decimal"===n.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return function t(n,r){if(Array.isArray(n)){for(var i="[",o=n.length,a=0;a<o;a++)0!=a&&(i+=", "),i+=t(n[a],r);return i+"]"}return e.format(n,r)}(t,n);if(e.isString(t))return'"'+t+'"';if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"==typeof t){if("function"==typeof t.format)return t.format(n);if(t&&t.toString()!=={}.toString())return t.toString();var a=[];for(var s in t)t.hasOwnProperty(s)&&a.push('"'+s+'": '+e.format(t[s],n));return"{"+a.join(", ")+"}"}return String(t)},e.stringify=function(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);"\\"===i?(n+=i,""!==(i=e.charAt(++r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++}return'"'+n+'"'},e.escape=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(t,e){e.format=function(t,n){if("function"==typeof n)return n(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",i=void 0;switch(void 0!==n&&(n.notation&&(r=n.notation),"number"==typeof n?i=n:n.precision&&(i=n.precision)),r){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"auto":var o=.001,a=1e5;if(n&&n.exponential&&(void 0!==n.exponential.lower&&(o=n.exponential.lower),void 0!==n.exponential.upper&&(a=n.exponential.upper)),t.constructor.config({toExpNeg:Math.round(Math.log(o)/Math.LN10),toExpPos:Math.round(Math.log(a)/Math.LN10)}),t.isZero())return"0";var s=t.abs();return(s.gte(o)&&s.lt(a)?t.toSignificantDigits(i).toFixed():e.toExponential(t,i)).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},e.toExponential=function(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()},e.toFixed=function(t,e){return t.toFixed(e||0)}},function(t,e){"use strict";e.type=function(t){var e=typeof t;return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":"Object":"function"===e?"Function":e}},function(t,e){"use strict";function n(t,e,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}(n.prototype=new RangeError).constructor=RangeError,n.prototype.name="DimensionError",n.prototype.isDimensionError=!0,t.exports=n},function(t,e){"use strict";function n(t,e,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}(n.prototype=new RangeError).constructor=RangeError,n.prototype.name="IndexError",n.prototype.isIndexError=!0,t.exports=n},function(t,e){"use strict";e.isBoolean=function(t){return"boolean"==typeof t}},function(t,e){e.memoize=function(t,e){return function n(){"object"!=typeof n.cache&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e(r):JSON.stringify(r);return o in n.cache?n.cache[o]:n.cache[o]=t.apply(t,r)}},e.maxArgumentCount=function(t){return Object.keys(t.signatures||{}).reduce(function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)},e.callWithRightArgumentCount=function(t,e,n){return Object.keys(t.signatures||{}).reduce(function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)}},function(t,e,n){"use strict";var r=n(28),i=n(33),o=(n(38),n(38),r.string),a=r.array,s=r.object,l=r.number,u=Array.isArray,c=l.isNumber,f=l.isInteger,h=o.isString,d=a.validateIndex;e.name="DenseMatrix",e.path="type",e.factory=function(t,e,l,p){var g=l(n(27));function v(e,n){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!h(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))"DenseMatrix"===e.type?(this._data=s.clone(e._data),this._size=s.clone(e._size),this._datatype=n||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=n||e._datatype);else if(e&&u(e.data)&&u(e.size))this._data=e.data,this._size=e.size,this._datatype=n||e.datatype;else if(u(e))this._data=function t(e){for(var n=0,r=e.length;n<r;n++){var i=e[n];u(i)?e[n]=t(i):i&&!0===i.isMatrix&&(e[n]=t(i.valueOf()))}return e}(e),this._size=a.size(this._data),a.validate(this._data,this._size),this._datatype=n;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n}}(v.prototype=new g).type="DenseMatrix",v.prototype.isDenseMatrix=!0,v.prototype.storage=function(){return"dense"},v.prototype.datatype=function(){return this._datatype},v.prototype.create=function(t,e){return new v(t,e)},v.prototype.subset=function(e,n,r){switch(arguments.length){case 1:return function(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r=n.size();if(r.length!=e._size.length)throw new i(r.length,e._size.length);for(var o=n.min(),a=n.max(),s=0,l=e._size.length;s<l;s++)d(o[s],e._size[s]),d(a[s],e._size[s]);return new v(function t(e,n,r,i){var o=i===r-1,a=n.dimension(i);return o?a.map(function(t){return d(t,e.length),e[t]}).valueOf():a.map(function(o){return d(o,e.length),t(e[o],n,r,i+1)}).valueOf()}(e._data,n,r.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,n,r,o){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,u=n.size(),c=n.isScalar();if(t.isMatrix(r)?(l=r.size(),r=r.valueOf()):l=a.size(r),c){if(0!==l.length)throw new TypeError("Scalar expected");e.set(n.min(),r,o)}else{if(u.length<e._size.length)throw new i(u.length,e._size.length,"<");if(l.length<u.length){for(var f=0,h=0;1===u[f]&&1===l[f];)f++;for(;1===u[f];)h++,f++;r=a.unsqueeze(r,u.length,h,l)}if(!s.deepEqual(u,l))throw new i(u,l,">");y(e,n.max().map(function(t){return t+1}),o),function t(e,n,r,i,o){var a=o===i-1;n.dimension(o).forEach(a?function(t,n){d(t),e[t]=r[n[0]]}:function(a,s){d(a),t(e[a],n,r[s[0]],i,o+1)})}(e._data,n,r,u.length,0)}return e}(this,e,n,r);default:throw new SyntaxError("Wrong number of arguments")}},v.prototype.get=function(t){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);for(var e=0;e<t.length;e++)d(t[e],this._size[e]);for(var n=this._data,r=0,o=t.length;r<o;r++){var a=t[r];d(a,n.length),n=n[a]}return n},v.prototype.set=function(t,e,n){if(!u(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new i(t.length,this._size.length,"<");var r,o,a;y(this,t.map(function(t){return t+1}),n);var s=this._data;for(r=0,o=t.length-1;r<o;r++)d(a=t[r],s.length),s=s[a];return d(a=t[t.length-1],s.length),s[a]=e,this},v.prototype.resize=function(t,e,n){if(!u(t))throw new TypeError("Array expected");var r=n?this.clone():this;return m(r,t,e)};var m=function(t,e,n){if(0===e.length){for(var r=t._data;u(r);)r=r[0];return r}return t._size=e.slice(0),t._data=a.resize(t._data,t._size,n),t};function y(t,e,n){for(var r=t._size.slice(0),i=!1;r.length<e.length;)r.push(0),i=!0;for(var o=0,a=e.length;o<a;o++)e[o]>r[o]&&(r[o]=e[o],i=!0);i&&m(t,r,n)}return v.prototype.reshape=function(t,e){var n=e?this.clone():this;return n._data=a.reshape(n._data,t),n._size=t.slice(0),n},v.prototype.clone=function(){return new v({data:s.clone(this._data),size:s.clone(this._size),datatype:this._datatype})},v.prototype.size=function(){return this._size.slice(0)},v.prototype.map=function(t){var e=this,n=function(r,i){return u(r)?r.map(function(t,e){return n(t,i.concat(e))}):t(r,i,e)};return new v({data:n(this._data,[]),size:s.clone(this._size),datatype:this._datatype})},v.prototype.forEach=function(t){var e=this,n=function(r,i){u(r)?r.forEach(function(t,e){n(t,i.concat(e))}):t(r,i,e)};n(this._data,[])},v.prototype.toArray=function(){return s.clone(this._data)},v.prototype.valueOf=function(){return this._data},v.prototype.format=function(t){return o.format(this._data,t)},v.prototype.toString=function(){return o.format(this._data)},v.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},v.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var n=e>0?e:0,r=e<0?-e:0,i=Math.min(this._size[0]-r,this._size[1]-n),o=[],a=0;a<i;a++)o[a]=this._data[a+r][a+n];return new v({data:o,size:[i],datatype:this._datatype})},v.diagonal=function(e,n,r,i,o){if(!u(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!c(r)||!f(r))throw new TypeError("The parameter k must be an integer number")}else r=0;i&&h(o)&&(i=p.convert(i,o));var s,l=r>0?r:0,d=r<0?-r:0,g=e[0],m=e[1],y=Math.min(g-d,m-l);if(u(n)){if(n.length!==y)throw new Error("Invalid value array length");s=function(t){return n[t]}}else if(t.isMatrix(n)){var _=n.size();if(1!==_.length||_[0]!==y)throw new Error("Invalid matrix length");s=function(t){return n.get([t])}}else s=function(){return n};i||(i=t.isBigNumber(s(0))?new t.BigNumber(0):0);var b=[];if(e.length>0){b=a.resize(b,e,i);for(var w=0;w<y;w++)b[w+d][w+l]=s(w)}return new v({data:b,size:[g,m]})},v.fromJSON=function(t){return new v(t)},v.prototype.swapRows=function(t,e){if(!(c(t)&&f(t)&&c(e)&&f(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return d(t,this._size[0]),d(e,this._size[0]),v._swapRows(t,e,this._data),this},v._swapRows=function(t,e,n){var r=n[t];n[t]=n[e],n[e]=r},t.Matrix._storage.dense=v,t.Matrix._storage.default=v,v},e.lazy=!1},function(t,e,n){"use strict";var r=n(15).hasOwnProperty;function i(t,e){return!(!t||"object"!=typeof t||!r(s,e)&&(e in Object.prototype||e in Function.prototype))}function o(t,e){return!(!t||"function"!=typeof t[e]||r(t,e)&&t.__proto__&&e in t.__proto__||!r(l,e)&&(e in Object.prototype||e in Function.prototype))}function a(t){return"object"==typeof t&&t&&t.constructor===Object}var s={length:!0,name:!0},l={toString:!0,valueOf:!0,toLocaleString:!0};e.getSafeProperty=function(t,e){if(a(t)&&i(t,e))return t[e];if("function"==typeof t[e]&&o(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')},e.setSafeProperty=function(t,e,n){if(a(t)&&i(t,e))return t[e]=n;throw new Error('No access to property "'+e+'"')},e.isSafeProperty=i,e.validateSafeMethod=function(t,e){if(!o(t,e))throw new Error('No access to method "'+e+'"')},e.isSafeMethod=o,e.isPlainObject=a},function(t,e,n){"use strict";var r=n(28),i=n(33),o=r.array,a=r.object,s=r.string,l=r.number,u=Array.isArray,c=l.isNumber,f=l.isInteger,h=s.isString,d=o.validateIndex;e.name="SparseMatrix",e.path="type",e.factory=function(t,e,p,g){var v=p(n(27)),m=p(n(40));function y(e,n){if(!(this instanceof y))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!h(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))_(this,e,n);else if(e&&u(e.index)&&u(e.ptr)&&u(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=n||e.datatype;else if(u(e))b(this,e,n);else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=n}}var _=function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?a.clone(e._values):void 0,t._index=a.clone(e._index),t._ptr=a.clone(e._ptr),t._size=a.clone(e._size),t._datatype=n||e._datatype):b(t,e.valueOf(),n||e._datatype)},b=function(t,e,n){t._values=[],t._index=[],t._ptr=[],t._datatype=n;var r=e.length,i=0,o=m,a=0;if(h(n)&&(o=g.find(m,[n,n])||m,a=g.convert(0,n)),r>0){var s=0;do{t._ptr.push(t._index.length);for(var l=0;l<r;l++){var c=e[l];if(u(c)){if(0===s&&i<c.length&&(i=c.length),s<c.length){var f=c[s];o(f,a)||(t._values.push(f),t._index.push(l))}}else 0===s&&i<1&&(i=1),o(c,a)||(t._values.push(c),t._index.push(l))}s++}while(s<i)}t._ptr.push(t._index.length),t._size=[r,i]};(y.prototype=new v).type="SparseMatrix",y.prototype.isSparseMatrix=!0,y.prototype.storage=function(){return"sparse"},y.prototype.datatype=function(){return this._datatype},y.prototype.create=function(t,e){return new y(t,e)},y.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},y.prototype.subset=function(t,e,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return w(this,t);case 2:case 3:return x(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}};var w=function(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r,o,a,s,l=n.size();if(l.length!=e._size.length)throw new i(l.length,e._size.length);var u=n.min(),c=n.max();for(r=0,o=e._size.length;r<o;r++)d(u[r],e._size[r]),d(c[r],e._size[r]);var f=e._values,h=e._index,p=e._ptr,g=n.dimension(0),v=n.dimension(1),m=[],_=[];g.forEach(function(t,e){_[t]=e[0],m[t]=!0});var b=f?[]:void 0,w=[],x=[];return v.forEach(function(t){for(x.push(w.length),a=p[t],s=p[t+1];a<s;a++)!0===m[r=h[a]]&&(w.push(_[r]),b&&b.push(f[a]))}),x.push(w.length),new y({values:b,index:w,ptr:x,size:l,datatype:e._datatype})},x=function(e,n,r,s){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,u=n.size(),c=n.isScalar();if(t.isMatrix(r)?(l=r.size(),r=r.toArray()):l=o.size(r),c){if(0!==l.length)throw new TypeError("Scalar expected");e.set(n.min(),r,s)}else{if(1!==u.length&&2!==u.length)throw new i(u.length,e._size.length,"<");if(l.length<u.length){for(var f=0,h=0;1===u[f]&&1===l[f];)f++;for(;1===u[f];)h++,f++;r=o.unsqueeze(r,u.length,h,l)}if(!a.deepEqual(u,l))throw new i(u,l,">");for(var d=n.min()[0],p=n.min()[1],g=l[0],v=l[1],m=0;m<g;m++)for(var y=0;y<v;y++)e.set([m+d,y+p],r[m][y],s)}return e};y.prototype.get=function(t){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];d(e,this._size[0]),d(n,this._size[1]);var r=k(e,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===e?this._values[r]:0},y.prototype.set=function(t,e,n){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var r=t[0],o=t[1],a=this._size[0],s=this._size[1],l=m,c=0;h(this._datatype)&&(l=g.find(m,[this._datatype,this._datatype])||m,c=g.convert(0,this._datatype)),(r>a-1||o>s-1)&&(A(this,Math.max(r+1,a),Math.max(o+1,s),n),a=this._size[0],s=this._size[1]),d(r,a),d(o,s);var f=k(r,this._ptr[o],this._ptr[o+1],this._index);return f<this._ptr[o+1]&&this._index[f]===r?l(e,c)?E(f,o,this._values,this._index,this._ptr):this._values[f]=e:z(f,r,o,e,this._values,this._index,this._ptr),this};var k=function(t,e,n,r){if(n-e==0)return n;for(var i=e;i<n;i++)if(r[i]===t)return i;return e},E=function(t,e,n,r,i){n.splice(t,1),r.splice(t,1);for(var o=e+1;o<i.length;o++)i[o]--},z=function(t,e,n,r,i,o,a){i.splice(t,0,r),o.splice(t,0,e);for(var s=n+1;s<a.length;s++)a[s]++};y.prototype.resize=function(t,e,n){if(!u(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");t.forEach(function(e){if(!l.isNumber(e)||!l.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(t)+")")});var r=n?this.clone():this;return A(r,t[0],t[1],e)};var A=function(t,e,n,r){var i=r||0,o=m,a=0;h(t._datatype)&&(o=g.find(m,[t._datatype,t._datatype])||m,a=g.convert(0,t._datatype),i=g.convert(i,t._datatype));var s,l,u,c=!o(i,a),f=t._size[0],d=t._size[1];if(n>d){for(l=d;l<n;l++)if(t._ptr[l]=t._values.length,c)for(s=0;s<f;s++)t._values.push(i),t._index.push(s);t._ptr[n]=t._values.length}else n<d&&(t._ptr.splice(n+1,d-n),t._values.splice(t._ptr[n],t._values.length),t._index.splice(t._ptr[n],t._index.length));if(d=n,e>f){if(c){var p=0;for(l=0;l<d;l++){t._ptr[l]=t._ptr[l]+p,u=t._ptr[l+1]+p;var v=0;for(s=f;s<e;s++,v++)t._values.splice(u+v,0,i),t._index.splice(u+v,0,s),p++}t._ptr[d]=t._values.length}}else if(e<f){var y=0;for(l=0;l<d;l++){t._ptr[l]=t._ptr[l]-y;var _=t._ptr[l+1]-y;for(u=t._ptr[l];u<_;u++)(s=t._index[u])>e-1&&(t._values.splice(u,1),t._index.splice(u,1),y++)}t._ptr[l]=t._values.length}return t._size[0]=e,t._size[1]=n,t};y.prototype.reshape=function(t,e){if(!u(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(t.forEach(function(e){if(!l.isNumber(e)||!l.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(t)+")")}),this._size[0]*this._size[1]!=t[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var o=0;o<n._ptr[i+1]-n._ptr[i];o++)r.push(i);var a=n._values.slice(),c=n._index.slice();for(i=0;i<n._index.length;i++){var f=c[i]*n._size[1]+r[i];r[i]=f%t[1],c[i]=Math.floor(f/t[1])}for(n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice(),i=0;i<n._ptr.length;i++)n._ptr[i]=0;for(var h=0;h<a.length;h++){var d=a[h],p=k(i=c[h],n._ptr[o=r[h]],n._ptr[o+1],n._index);z(p,i,o,d,n._values,n._index,n._ptr)}return n},y.prototype.clone=function(){return new y({values:this._values?a.clone(this._values):void 0,index:a.clone(this._index),ptr:a.clone(this._ptr),size:a.clone(this._size),datatype:this._datatype})},y.prototype.size=function(){return this._size.slice(0)},y.prototype.map=function(t,e){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var n=this;return C(this,0,this._size[0]-1,0,this._size[1]-1,function(e,r,i){return t(e,[r,i],n)},e)};var C=function(t,e,n,r,i,o,a){var s=[],l=[],u=[],c=m,f=0;h(t._datatype)&&(c=g.find(m,[t._datatype,t._datatype])||m,f=g.convert(0,t._datatype));for(var d=function(t,e,n){t=o(t,e,n),c(t,f)||(s.push(t),l.push(e))},p=r;p<=i;p++){u.push(s.length);for(var v=t._ptr[p+1],_=e,b=t._ptr[p];b<v;b++){var w=t._index[b];if(w>=e&&w<=n){if(!a)for(var x=_;x<w;x++)d(0,x-e,p-r);d(t._values[b],w-e,p-r)}_=w+1}if(!a)for(var k=_;k<=n;k++)d(0,k-e,p-r)}return u.push(s.length),new y({values:s,index:l,ptr:u,size:[n-e+1,i-r+1]})};y.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){for(var o=this._ptr[i+1],a=0,s=this._ptr[i];s<o;s++){var l=this._index[s];if(!e)for(var u=a;u<l;u++)t(0,[u,i],this);t(this._values[s],[l,i],this),a=l+1}if(!e)for(var c=a;c<n;c++)t(0,[c,i],this)}},y.prototype.toArray=function(){return S(this._values,this._index,this._ptr,this._size,!0)},y.prototype.valueOf=function(){return S(this._values,this._index,this._ptr,this._size,!1)};var S=function(t,e,n,r,i){var o,s,l=r[0],u=r[1],c=[];for(o=0;o<l;o++)for(c[o]=[],s=0;s<u;s++)c[o][s]=0;for(s=0;s<u;s++)for(var f=n[s+1],h=n[s];h<f;h++)c[o=e[h]][s]=t?i?a.clone(t[h]):t[h]:1;return c};return y.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+s.format(e,t)+" x "+s.format(n,t)+"] density: "+s.format(r,t)+"\n",o=0;o<n;o++)for(var a=this._ptr[o+1],l=this._ptr[o];l<a;l++)i+="\n    ("+s.format(this._index[l],t)+", "+s.format(o,t)+") ==> "+(this._values?s.format(this._values[l],t):"X");return i},y.prototype.toString=function(){return s.format(this.toArray())},y.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},y.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var n=e>0?e:0,r=e<0?-e:0,i=this._size[1],o=Math.min(this._size[0]-r,i-n),a=[],s=[],l=[];l[0]=0;for(var u=n;u<i&&a.length<o;u++)for(var h=this._ptr[u+1],d=this._ptr[u];d<h;d++){var p=this._index[d];if(p===u-n+r){a.push(this._values[d]),s[a.length-1]=p-r;break}}return l.push(a.length),new y({values:a,index:s,ptr:l,size:[o,1]})},y.fromJSON=function(t){return new y(t)},y.diagonal=function(e,n,r,i,o){if(!u(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!c(r)||!f(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a=m,s=0;h(o)&&(a=g.find(m,[o,o])||m,s=g.convert(0,o));var l,d=r>0?r:0,p=r<0?-r:0,v=e[0],_=e[1],b=Math.min(v-p,_-d);if(u(n)){if(n.length!==b)throw new Error("Invalid value array length");l=function(t){return n[t]}}else if(t.isMatrix(n)){var w=n.size();if(1!==w.length||w[0]!==b)throw new Error("Invalid matrix length");l=function(t){return n.get([t])}}else l=function(){return n};for(var x=[],k=[],E=[],z=0;z<_;z++){E.push(x.length);var A=z-d;if(A>=0&&A<b){var C=l(A);a(C,s)||(k.push(A+p),x.push(C))}}return E.push(x.length),new y({values:x,index:k,ptr:E,size:[v,_]})},y.prototype.swapRows=function(t,e){if(!(c(t)&&f(t)&&c(e)&&f(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return d(t,this._size[0]),d(e,this._size[0]),y._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},y._forEachRow=function(t,e,n,r,i){for(var o=r[t+1],a=r[t];a<o;a++)i(n[a],e[a])},y._swapRows=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=o[a],l=o[a+1],u=k(t,s,l,i),c=k(e,s,l,i);if(u<l&&c<l&&i[u]===t&&i[c]===e){if(r){var f=r[u];r[u]=r[c],r[c]=f}}else if(u<l&&i[u]===t&&(c>=l||i[c]!==e)){var h=r?r[u]:void 0;i.splice(c,0,e),r&&r.splice(c,0,h),i.splice(c<=u?u+1:u,1),r&&r.splice(c<=u?u+1:u,1)}else if(c<l&&i[c]===e&&(u>=l||i[u]!==t)){var d=r?r[c]:void 0;i.splice(u,0,t),r&&r.splice(u,0,d),i.splice(u<=c?c+1:c,1),r&&r.splice(u<=c?c+1:c,1)}}},t.Matrix._storage.sparse=y,y},e.lazy=!1},function(t,e,n){"use strict";var r=n(19).nearlyEqual,i=n(41);e.factory=function(t,e,n,o){var a=o("equalScalar",{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,n){return t===n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.eq(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return a(t.value,e.value)},"string, string":function(t,e){return t===e}});return a}},function(t,e){"use strict";t.exports=function(t,e,n){if(null==n)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}},function(t,e,n){"use strict";e.name="Spa",e.path="type",e.factory=function(t,e,r){var i=r(n(43)),o=r(n(40));function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t.FibonacciHeap}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var n=this._heap.insert(t,e);this._values[t]=n}},a.prototype.get=function(t){var e=this._values[t];return e?e.value:0},a.prototype.accumulate=function(t,e){var n=this._values[t];n?n.value=i(n.value,e):(n=this._heap.insert(t,e),this._values[t]=n)},a.prototype.forEach=function(t,e,n){var r=this._heap,i=this._values,a=[],s=r.extractMinimum();for(s&&a.push(s);s&&s.key<=e;)s.key>=t&&(o(s.value,0)||n(s.key,s.value,this)),(s=r.extractMinimum())&&a.push(s);for(var l=0;l<a.length;l++){var u=a[l];i[(s=r.insert(u.key,u.value)).key]=s}},a.prototype.swap=function(t,e){var n=this._values[t],r=this._values[e];if(!n&&r)n=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=n,this._values[e]=void 0;else if(n&&!r)r=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=r,this._values[t]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},a}},function(t,e,n){"use strict";var r=n(15).extend;e.name="add",e.factory=function(t,e,i,o){var a=i(n(44)),s=i(n(45)),l=n(46),u=i(n(47)),c=i(n(48)),f=i(n(49)),h=i(n(50)),d=i(n(51)),p=o("add",r({"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,s);break;default:n=u(e,t,s,!0)}break;default:switch(e.storage()){case"sparse":n=u(t,e,s,!1);break;default:n=h(t,e,s)}}return n},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=f(t,e,s,!1);break;default:n=d(t,e,s,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=f(e,t,s,!0);break;default:n=d(e,t,s,!0)}return n},"Array, any":function(t,e){return d(a(t),e,s,!1).valueOf()},"any, Array":function(t,e){return d(a(e),t,s,!0).valueOf()},"any, any":s,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,n){for(var r=p(t,e),i=0;i<n.length;i++)r=p(r,n[i]);return r}},s.signatures));return p.toTex={2:"\\left(${args[0]}"+l.operators.add+"${args[1]}\\right)"},p}},function(t,e){"use strict";e.name="matrix",e.factory=function(t,e,n,r){var i=r("matrix",{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return i.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},i;function o(e,n,r){return new(t.Matrix.storage(n||"default"))(e,r)}}},function(t,e){"use strict";e.factory=function(t,e,n,r){var i=r("add",{"number, number":function(t,e){return t+e},"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=i(n.value,e.value),n.fixPrefix=!1,n}});return i}},function(t,e){"use strict";e.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},e.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},e.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var n={deg:"^\\circ"};e.toSymbol=function(t,r){if(r=void 0!==r&&r)return n.hasOwnProperty(t)?n[t]:"\\mathrm{"+t+"}";if(e.symbols.hasOwnProperty(t))return e.symbols[t];if(-1!==t.indexOf("_")){var i=t.indexOf("_");return e.toSymbol(t.substring(0,i))+"_{"+e.toSymbol(t.substring(i+1))+"}"}return t}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm01",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,a){var s=t._data,l=t._size,u=t._datatype,c=e._values,f=e._index,h=e._ptr,d=e._size,p=e._datatype;if(l.length!==d.length)throw new r(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g,v,m=l[0],y=l[1],_="string"==typeof u&&u===p?u:void 0,b=_?i.find(n,[_,_]):n,w=[];for(g=0;g<m;g++)w[g]=[];var x=[],k=[];for(v=0;v<y;v++){for(var E=v+1,z=h[v+1],A=h[v];A<z;A++)x[g=f[A]]=a?b(c[A],s[g][v]):b(s[g][v],c[A]),k[g]=E;for(g=0;g<m;g++)w[g][v]=k[g]===E?x[g]:s[g][v]}return new o({data:w,size:[m,y],datatype:_})}}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm04",e.factory=function(t,e,i,o){var a=i(n(40)),s=t.SparseMatrix;return function(t,e,n){var i=t._values,l=t._index,u=t._ptr,c=t._size,f=t._datatype,h=e._values,d=e._index,p=e._ptr,g=e._size,v=e._datatype;if(c.length!==g.length)throw new r(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var m,y=c[0],_=c[1],b=a,w=0,x=n;"string"==typeof f&&f===v&&(b=o.find(a,[m=f,m]),w=o.convert(0,m),x=o.find(n,[m,m]));var k,E,z,A,C=i&&h?[]:void 0,S=[],T=[],M=new s({values:C,index:S,ptr:T,size:[y,_],datatype:m}),N=i&&h?[]:void 0,D=i&&h?[]:void 0,I=[],O=[];for(E=0;E<_;E++){T[E]=S.length;var L=E+1;for(A=u[E+1],z=u[E];z<A;z++)S.push(k=l[z]),I[k]=L,N&&(N[k]=i[z]);for(A=p[E+1],z=p[E];z<A;z++)if(I[k=d[z]]===L){if(N){var P=x(N[k],h[z]);b(P,w)?I[k]=null:N[k]=P}}else S.push(k),O[k]=L,D&&(D[k]=h[z]);if(N&&D)for(z=T[E];z<S.length;)I[k=S[z]]===L?(C[z]=N[k],z++):O[k]===L?(C[z]=D[k],z++):S.splice(z,1)}return T[_]=S.length,M}}},function(t,e){"use strict";e.name="algorithm10",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var a=t._values,s=t._index,l=t._ptr,u=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,h=u[0],d=u[1],p=n;"string"==typeof c&&(e=r.convert(e,f=c),p=r.find(n,[f,f]));for(var g=[],v=new i({data:g,size:[h,d],datatype:f}),m=[],y=[],_=0;_<d;_++){for(var b=_+1,w=l[_+1],x=l[_];x<w;x++){var k=s[x];m[k]=a[x],y[k]=b}for(var E=0;E<h;E++)0===_&&(g[E]=[]),g[E][_]=y[E]===b?o?p(e,m[E]):p(m[E],e):e}return v}}},function(t,e,n){"use strict";n(28);var r=n(33);e.name="algorithm13",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i,o){var s=[];if(e===n.length-1)for(var l=0;l<r;l++)s[l]=t(i[l],o[l]);else for(var u=0;u<r;u++)s[u]=a(t,e+1,n,n[e+1],i[u],o[u]);return s};return function(t,e,n){var s,l=t._data,u=t._size,c=t._datatype,f=e._data,h=e._size,d=e._datatype,p=[];if(u.length!==h.length)throw new r(u.length,h.length);for(var g=0;g<u.length;g++){if(u[g]!==h[g])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");p[g]=u[g]}var v=n;"string"==typeof c&&c===d&&(e=i.convert(e,s=c),v=i.find(n,[s,s]));var m=p.length>0?a(v,0,p,p[0],l,f):[];return new o({data:m,size:p,datatype:s})}}},function(t,e,n){"use strict";var r=n(15).clone;e.name="algorithm14",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i,o,s){var l=[];if(e===n.length-1)for(var u=0;u<r;u++)l[u]=s?t(o,i[u]):t(i[u],o);else for(var c=0;c<r;c++)l[c]=a(t,e+1,n,n[e+1],i[c],o,s);return l};return function(t,e,n,s){var l,u=t._data,c=t._size,f=t._datatype,h=n;"string"==typeof f&&(e=i.convert(e,l=f),h=i.find(n,[l,l]));var d=c.length>0?a(h,0,c,c[0],u,e,s):[];return new o({data:d,size:r(c),datatype:l})}}},function(t,e,n){"use strict";e.name="FibonacciHeap",e.path="type",e.factory=function(t,e,r,i){var o=r(n(53)),a=r(n(57)),s=1/Math.log((1+Math.sqrt(5))/2);function l(){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}l.prototype.type="FibonacciHeap",l.prototype.isFibonacciHeap=!0,l.prototype.insert=function(t,e){var n={key:t,value:e,degree:0};if(this._minimum){var r=this._minimum;n.left=r,n.right=r.right,r.right=n,n.right.left=n,o(t,r.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},l.prototype.size=function(){return this._size},l.prototype.clear=function(){this._minimum=null,this._size=0},l.prototype.isEmpty=function(){return 0===this._size},l.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var e=this._minimum,n=t.degree,r=t.child;n>0;){var i=r.right;r.left.right=r.right,r.right.left=r.left,r.left=e,r.right=e.right,e.right=r,r.right.left=r,r.parent=null,r=i,n--}return t.left.right=t.right,t.right.left=t.left,e=t==t.right?null:h(e=t.right,this._size),this._size--,this._minimum=e,t},l.prototype.remove=function(t){this._minimum=u(this._minimum,t,-1),this.extractMinimum()};var u=function(t,e,n){e.key=n;var r=e.parent;return r&&o(e.key,r.key)&&(c(t,e,r),f(t,r)),o(e.key,t.key)&&(t=e),t},c=function(t,e,n){e.left.right=e.right,e.right.left=e.left,n.degree--,n.child==e&&(n.child=e.right),0===n.degree&&(n.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1},f=function(t,e){var n=e.parent;n&&(e.mark?(c(t,e,n),f(n)):e.mark=!0)},h=function(t,e){var n,r,i,l=Math.floor(Math.log(e)*s)+1,u=new Array(l),c=0,f=t;if(f)for(c++,f=f.right;f!==t;)c++,f=f.right;for(;c>0;){for(var h=f.degree,d=f.right;n=u[h];){if(a(f.key,n.key)){var p=n;n=f,f=p}i=f,(r=n).left.right=r.right,r.right.left=r.left,r.parent=i,i.child?(r.left=i.child,r.right=i.child.right,i.child.right=r,r.right.left=r):(i.child=r,r.right=r,r.left=r),i.degree++,r.mark=!1,u[h]=null,h++}u[h]=f,f=d,c--}t=null;for(var g=0;g<l;g++)(n=u[g])&&(t?(n.left.right=n.right,n.right.left=n.left,n.left=t,n.right=t.right,t.right=n,n.right.left=n,o(n.key,t.key)&&(t=n)):t=n);return t};return l}},function(t,e,n){"use strict";var r=n(19).nearlyEqual,i=n(41);e.name="smaller",e.factory=function(t,e,o,a){var s=o(n(44)),l=o(n(54)),u=o(n(55)),c=o(n(56)),f=o(n(50)),h=o(n(51)),d=n(46),p=a("smaller",{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,n){return t<n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.lt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return-1===t.compare(e)},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t<e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,p);break;default:n=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,p,!1);break;default:n=f(t,e,p)}}return n},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,p,!1);break;default:n=h(t,e,p,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,p,!0);break;default:n=h(e,t,p,!0)}return n},"Array, any":function(t,e){return h(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return h(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+d.operators.smaller+"${args[1]}\\right)"},p}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm03",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,a){var s=t._data,l=t._size,u=t._datatype,c=e._values,f=e._index,h=e._ptr,d=e._size,p=e._datatype;if(l.length!==d.length)throw new r(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g,v=l[0],m=l[1],y=0,_=n;"string"==typeof u&&u===p&&(y=i.convert(0,g=u),_=i.find(n,[g,g]));for(var b=[],w=0;w<v;w++)b[w]=[];for(var x=[],k=[],E=0;E<m;E++){for(var z=E+1,A=h[E+1],C=h[E];C<A;C++){var S=f[C];x[S]=a?_(c[C],s[S][E]):_(s[S][E],c[C]),k[S]=z}for(var T=0;T<v;T++)b[T][E]=k[T]===z?x[T]:a?_(y,s[T][E]):_(s[T][E],y)}return new o({data:b,size:[v,m],datatype:g})}}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm07",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i){for(var o=t._values,a=t._index,s=t._ptr,l=s[e],u=s[e+1];l<u;l++){var c=a[l];n[c]=i,r[c]=o[l]}};return function(t,e,n){var s=t._size,l=t._datatype,u=e._size,c=e._datatype;if(s.length!==u.length)throw new r(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var f,h,d,p=s[0],g=s[1],v=0,m=n;"string"==typeof l&&l===c&&(v=i.convert(0,f=l),m=i.find(n,[f,f]));var y=[];for(h=0;h<p;h++)y[h]=[];var _=new o({data:y,size:[p,g],datatype:f}),b=[],w=[],x=[],k=[];for(d=0;d<g;d++){var E=d+1;for(a(t,d,x,b,E),a(e,d,k,w,E),h=0;h<p;h++)y[h][d]=m(x[h]===E?b[h]:v,k[h]===E?w[h]:v)}return _}}},function(t,e){"use strict";e.name="algorithm12",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var a=t._values,s=t._index,l=t._ptr,u=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,h=u[0],d=u[1],p=n;"string"==typeof c&&(e=r.convert(e,f=c),p=r.find(n,[f,f]));for(var g=[],v=new i({data:g,size:[h,d],datatype:f}),m=[],y=[],_=0;_<d;_++){for(var b=_+1,w=l[_+1],x=l[_];x<w;x++){var k=s[x];m[k]=a[x],y[k]=b}for(var E=0;E<h;E++)0===_&&(g[E]=[]),g[E][_]=y[E]===b?o?p(e,m[E]):p(m[E],e):o?p(e,0):p(0,e)}return v}}},function(t,e,n){"use strict";var r=n(19).nearlyEqual,i=n(41);e.name="larger",e.factory=function(t,e,o,a){var s=o(n(44)),l=o(n(54)),u=o(n(55)),c=o(n(56)),f=o(n(50)),h=o(n(51)),d=n(46),p=a("larger",{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,n){return t>n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.gt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t>e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,p);break;default:n=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,p,!1);break;default:n=f(t,e,p)}}return n},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,p,!1);break;default:n=h(t,e,p,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,p,!0);break;default:n=h(e,t,p,!0)}return n},"Array, any":function(t,e){return h(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return h(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+d.operators.larger+"${args[1]}\\right)"},p}},function(t,e,n){"use strict";var r=n(28),i=r.object,o=Array.isArray,a=r.string.isString;e.name="ImmutableDenseMatrix",e.path="type",e.factory=function(t,e,s){var l=s(n(37)),u=s(n(53));function c(e,n){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!a(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e)||o(e)){var i=new l(e,n);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&o(e.data)&&o(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n,this._min=null,this._max=null}}return(c.prototype=new l).type="ImmutableDenseMatrix",c.prototype.isImmutableDenseMatrix=!0,c.prototype.subset=function(e){switch(arguments.length){case 1:var n=l.prototype.subset.call(this,e);return t.isMatrix(n)?new c({data:n._data,size:n._size,datatype:n._datatype}):n;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},c.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},c.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},c.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},c.prototype.clone=function(){return new c({data:i.clone(this._data),size:i.clone(this._size),datatype:this._datatype})},c.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},c.fromJSON=function(t){return new c(t)},c.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},c.prototype.min=function(){if(null===this._min){var t=null;this.forEach(function(e){(null===t||u(e,t))&&(t=e)}),this._min=null!==t?t:void 0}return this._min},c.prototype.max=function(){if(null===this._max){var t=null;this.forEach(function(e){(null===t||u(t,e))&&(t=e)}),this._max=null!==t?t:void 0}return this._max},c}},function(t,e,n){"use strict";var r=n(15).clone,i=n(19).isInteger;e.name="Index",e.path="type",e.factory=function(t){function e(r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,o=arguments.length;i<o;i++){var a=arguments[i];if(t.isRange(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||t.isMatrix(a)){var s=n(a.valueOf());this._dimensions.push(s);var l=s.size();1===l.length&&1===l[0]||(this._isScalar=!1)}else if("number"==typeof a)this._dimensions.push(n([a]));else{if("string"!=typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(a)}}}function n(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!i(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t.ImmutableDenseMatrix(e)}return e.prototype.type="Index",e.prototype.isIndex=!0,e.prototype.clone=function(){var t=new e;return t._dimensions=r(this._dimensions),t._isScalar=this._isScalar,t},e.create=function(t){var n=new e;return e.apply(n,t),n},e.prototype.size=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?1:r.size()[0]}return t},e.prototype.max=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.max()}return t},e.prototype.min=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.min()}return t},e.prototype.forEach=function(t){for(var e=0,n=this._dimensions.length;e<n;e++)t(this._dimensions[e],e,this)},e.prototype.dimension=function(t){return this._dimensions[t]||null},e.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},e.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},e.prototype.isScalar=function(){return this._isScalar},e.prototype.valueOf=e.prototype.toArray=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t.push("string"==typeof r?r:r.toArray())}return t},e.prototype.toString=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t.push("string"==typeof r?JSON.stringify(r):r.toString())}return"["+t.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},e.fromJSON=function(t){return e.create(t.dimensions)},e}},function(t,e,n){"use strict";var r=n(19);e.name="Range",e.path="type",e.factory=function(t,e,n,i){function o(e,n,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(null!=e)if(t.isBigNumber(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(null!=n)if(t.isBigNumber(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(null!=r)if(t.isBigNumber(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=null!=e?parseFloat(e):0,this.end=null!=n?parseFloat(n):0,this.step=null!=r?parseFloat(r):1}return o.prototype.type="Range",o.prototype.isRange=!0,o.parse=function(t){if("string"!=typeof t)return null;var e=t.split(":").map(function(t){return parseFloat(t)});if(e.some(function(t){return isNaN(t)}))return null;switch(e.length){case 2:return new o(e[0],e[1]);case 3:return new o(e[0],e[2],e[1]);default:return null}},o.prototype.clone=function(){return new o(this.start,this.end,this.step)},o.prototype.size=function(){var t=0,e=this.step,n=this.end-this.start;return r.sign(e)==r.sign(n)?t=Math.ceil(n/e):0==n&&(t=0),isNaN(t)&&(t=0),[t]},o.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},o.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},o.prototype.forEach=function(t){var e=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;e<r;)t(e,[i],this),e+=n,i++;else if(n<0)for(;e>r;)t(e,[i],this),e+=n,i++},o.prototype.map=function(t){var e=[];return this.forEach(function(n,r,i){e[r[0]]=t(n,r,i)}),e},o.prototype.toArray=function(){var t=[];return this.forEach(function(e,n){t[n[0]]=e}),t},o.prototype.valueOf=function(){return this.toArray()},o.prototype.format=function(t){var e=r.format(this.start,t);return 1!=this.step&&(e+=":"+r.format(this.step,t)),e+":"+r.format(this.end,t)},o.prototype.toString=function(){return this.format()},o.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},o.fromJSON=function(t){return new o(t.start,t.end,t.step)},o}},function(t,e){"use strict";e.name="index",e.factory=function(t,e,n,r){return r("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var n=e.map(function(e){return t.isBigNumber(e)?e.toNumber():Array.isArray(e)||t.isMatrix(e)?e.map(function(e){return t.isBigNumber(e)?e.toNumber():e}):e}),r=new t.Index;return t.Index.apply(r,n),r}})}},function(t,e){"use strict";e.name="sparse",e.factory=function(t,e,n,r){var i=t.SparseMatrix,o=r("sparse",{"":function(){return new i([])},string:function(t){return new i([],t)},"Array | Matrix":function(t){return new i(t)},"Array | Matrix, string":function(t,e){return new i(t,e)}});return o.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(19).isInteger,i=n(29).resize;e.name="zeros",e.factory=function(t,e,o,a){var s=o(n(44)),l=a("zeros",{"":function(){return"Array"===e.matrix?u([]):u([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var n=t.pop();return u(t,n)}return"Array"===e.matrix?u(t):u(t,"default")},Array:u,Matrix:function(t){var e=t.storage();return u(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return u(t.valueOf(),e)}});return l.toTex=void 0,l;function u(e,n){var o=function(e){var n=!1;return e.forEach(function(e,r,i){t.isBigNumber(e)&&(n=!0,i[r]=e.toNumber())}),n}(e)?new t.BigNumber(0):0;if(function(t){t.forEach(function(t){if("number"!=typeof t||!r(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")})}(e),n){var a=s(n);return e.length>0?a.resize(e,o):a}var l=[];return e.length>0?i(l,e,o):l}}},function(t,e,n){var r=n(2),i=n(6),o=n(3);t.exports=function(t,e,n){var a,s,l=o.keys(n);o.each(l,function(t){/[^a-z_]/i.test(a=n[t])&&(a=parseInt(a,10)),s=!1,o.each(e,function(e){r.has(e,t)&&(s=!0)}),s&&(e=o.filter(e,function(e){return e[t]==a}))});var u,c,f=[],h=!1;return o.each(e,function(e){u=!0,o.each(o.keys(t.viz.possible_filters),function(n){c=i(t.viz.filter_data,n),e[n]!=c&&(u=!1)}),u?!1===h&&(h=!0,f.push(e)):f.push(e)}),f}},function(t,e){t.exports=function(t){var e={wrapper:{},row_search:{}};return e.row_search.box={},e.row_search.box.height=34,e.row_search.box.width=95,e.row_search.placeholder=t.row_search_placeholder,e.row_search.margin_left=7,e.slider={},e.slider.width=t.sidebar_width-30,e.slider.margin_left=15,e.key_cat={},e.key_cat.width=t.sidebar_width-15,e.key_cat.margin_left=5,e.key_cat.max_height=100,e.title=t.title,e.title_margin_left=7,e.about=t.about,e.width=t.sidebar_width,e.buttons={},e.buttons.width=t.sidebar_width-15,e.text={},e.icons=t.sidebar_icons,e.icon_margin_left=-5,e}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=r.keys(e)[0];return r.each(r.keys(t.viz.possible_filters),function(r){if(r!=n&&!d3.select(t.root+" .slider_"+r).empty()){var i=d3.select(t.root+" .slider_"+r).attr("current_state");e[r]=i}}),e}},function(t,e,n){var r=n(68),i=n(69),o=n(71),a=n(72),s=n(73),l=n(74),u=n(75),c=n(76),f=n(81),h=n(83),d=n(2),p=n(5),g=n(84);t.exports=function(t,e=!0){return t.labels=r(t),t.viz=function(t,e=!0){var n={};n.root=t.root,n.root_tips=t.root.replace("#",".")+"_d3-tip",n.viz_wrapper=t.root+" .viz_wrapper",n.do_zoom=t.do_zoom,n.background_color=t.background_color,n.super_border_color=t.super_border_color,n.outer_margins=t.outer_margins,n.is_expand=t.ini_expand,n.grey_border_width=t.grey_border_width,n.show_dendrogram=t.show_dendrogram,n.tile_click_hlight=t.tile_click_hlight,n.inst_order=t.inst_order,n.expand_button=t.expand_button,n.sim_mat=t.sim_mat,n.dendro_filter=t.dendro_filter,n.cat_filter=t.cat_filter,n.cat_value_colors=t.cat_value_colors,n.cat_bar_width=180,n.cat_bar_height=20,n.tree_menu_width=400,n.tree_menu_height=237,n.tree_menu_x_offset=20,n.filter_menu_width=500,n.filter_menu_height=237,n.filter_menu_x_offset=20,n.update_button_width=100,n.viz_svg=n.viz_wrapper+" .viz_svg",n.zoom_element=n.viz_wrapper+" .viz_svg",n.uni_duration=1e3,n.bottom_space=10,n.run_trans=!1,n.duration=1e3,n.resize=t.resize,n.fixed_size=!!d.has(t,"size")&&t.size,n.border_fraction=65,n.uni_margin=5,n.super_labels={},n.super_labels.margin={},n.super_labels.dim={},n.super_labels.margin.left=n.grey_border_width,n.super_labels.margin.top=n.grey_border_width,n.super_labels.dim.width=0,t.labels.super_labels&&(n.super_labels.dim.width=15*t.labels.super_label_scale),n.triangle_opacity=.6,n.norm_labels={},n.norm_labels.width={},n.dendro_room={},n.dendro_room.symbol_width=n.show_dendrogram?10:0,n.cat_colors=t.cat_colors,n=g(t,n,e),0==_.has(t,"group_level")&&(n.show_dendrogram&&(t.group_level={}),0==_.has(t,"group_level")&&(t.group_level={}),t.group_level.row=5,t.group_level.col=5),n.dendro_opacity=.35,n.spillover_col_slant=n.norm_labels.width.col;var r=p(t.network_data.views);return n.possible_filters=r.possible_filters,n.filter_data=r.filter_data,n.viz_nodes={},n.viz_nodes.row=t.network_data.row_nodes_names,n.viz_nodes.col=t.network_data.col_nodes_names,n.viz_nodes.curr_row=t.network_data.row_nodes_names,n.viz_nodes.curr_col=t.network_data.col_nodes_names,n.x_offset=0,n}(t,e),i(t),(t=o(t)).viz=a(t.viz),t.viz=s(t.viz),t.viz=l(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t=u(t),t=c(t),t=f(t),h(t)}},function(t,e,n){var r=n(3);t.exports=function(t){var e={};return e.super_label_scale=t.super_label_scale,e.super_labels=t.super_labels,e.super_label_fs=13.8,e.super_labels&&(e.super={},e.super.row=t.super.row,e.super.col=t.super.col),e.show_label_tooltips=t.show_label_tooltips,e.row_max_char=r.max(t.network_data.row_nodes,function(t){return t.name.length}).name.length,e.col_max_char=r.max(t.network_data.col_nodes,function(t){return t.name.length}).name.length,e.max_allow_fs=t.max_allow_fs,e}},function(t,e,n){var r=n(70);t.exports=function(t){d3.select(t.root+" .viz_wrapper").empty()&&(d3.select(t.root).append("div").classed("sidebar_wrapper",!0),d3.select(t.root).append("div").classed("viz_wrapper",!0));var e=r(t);d3.select(t.root+" .sidebar_wrapper").style("float","left").style("width",t.sidebar_width+"px").style("height",e.height+"px").style("overflow","hidden"),d3.select(t.viz.viz_wrapper).style("float","left").style("width",e.width+"px").style("height",e.height+"px")}},function(t,e){t.exports=function(t){var e,n={},r=t.buffer_width,i=d3.select(t.root).style("width").replace("px",""),o=d3.select(t.root).style("height").replace("px","");return!1===t.viz.is_expand?(e=t.viz.outer_margins,n.width=i-t.sidebar_width-r):(e=t.viz.outer_margins,n.width=i-r),n.top=e.top,n.left=e.left,t.viz.resize?n.height=o:(n.width=t.viz.is_expand?t.viz.fixed_size.width:t.viz.fixed_size.width-t.sidebar_width,n.height=t.viz.fixed_size.height),n}},function(t,e){t.exports=function(t){return t.viz.svg_dim={},t.viz.svg_dim.width=Number(d3.select(t.viz.viz_wrapper).style("width").replace("px","")),t.viz.svg_dim.height=Number(d3.select(t.viz.viz_wrapper).style("height").replace("px","")),t}},function(t,e){t.exports=function(t){return t.norm_labels.margin={},t.norm_labels.margin.left=t.super_labels.margin.left+t.super_labels.dim.width,t.norm_labels.margin.top=t.super_labels.margin.top+t.super_labels.dim.width,t.label_background={},t.label_background.row=t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.label_background.col=t.norm_labels.width.col+t.cat_room.col+t.uni_margin,t}},function(t,e){t.exports=function(t){t.clust={},t.clust.margin={},t.clust.margin.left=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.clust.margin.top=t.norm_labels.margin.top+t.norm_labels.width.col+t.cat_room.col+t.uni_margin;var e=t.svg_dim.width-t.clust.margin.left-t.spillover_col_slant,n=d3.scale.ordinal().rangeBands([0,e]).domain(_.range(t.num_col_nodes)).rangeBand()/2;return n>t.norm_labels.width.col&&(e*=t.norm_labels.width.col/n),t.clust.dim={},t.clust.dim.width=e,t}},function(t,e){t.exports=function(t){return t.clust.dim.height=t.svg_dim.height-t.clust.margin.top-t.dendro_room.col-t.bottom_space,t}},function(t,e,n){var r=n(3);t.exports=function(t){var e=Math.abs(r.max(t.network_data.col_nodes,function(t){return Math.abs(t.value)}).value);return t.labels.bar_scale_col=d3.scale.linear().domain([0,e]).range([0,.75*t.viz.norm_labels.width.col]),e=Math.abs(r.max(t.network_data.row_nodes,function(t){return Math.abs(t.value)}).value),t.labels.bar_scale_row=d3.scale.linear().domain([0,e]).range([0,t.viz.norm_labels.width.row]),t}},function(t,e,n){var r=n(77),i=n(79),o=n(3);t.exports=function(t){var e;return t.matrix=r(t),t.viz.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),o.each(["row","col"],function(n){"custom"===(e=t.viz.inst_order[n])&&(e="clust"),"row"===n?t.viz.x_scale.domain(t.matrix.orders[e+"_"+n]):t.viz.y_scale.domain(t.matrix.orders[e+"_"+n])}),t.viz.border_width={},t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,i(t),t}},function(t,e,n){var r=n(2),i=n(78),o=n(3);t.exports=function(t){var e={},n=t.network_data;e.tile_colors=t.tile_colors,e.bar_colors=t.bar_colors,e.outline_colors=t.outline_colors,e.hlight_color=t.highlight_color,e.tile_title=t.tile_title,e.show_tile_tooltips=t.show_tile_tooltips,e.make_tile_tooltip=t.make_tile_tooltip,e.distance_metric="cosine",e.linkage_type="average",e.filter_state="no-filter",e.normalization_state="no-normalization",e.click_hlight_x=-666,e.click_hlight_y=-666,e.click_hlight_row=-666,e.click_hlight_col=-666,e.def_large_matrix=2e4,e.opacity_function=t.opacity_scale,e.orders={},o.each(["row","col"],function(i){var a,s=n[(a="row"===i?"col":"row")+"_nodes"],l=s.length,u=r.pluck(s,"name").sort(),c=o.map(u,function(t){return n[a+"_nodes_names"].indexOf(t)});e.orders["alpha_"+i]=c;var f=["clust","rank"];_.has(s[0],"rankvar")&&f.push("rankvar"),t.viz.all_cats[a].length>0&&o.each(t.viz.all_cats[a],function(t){t=t.replace("-","_"),f.push(t+"_index")}),o.each(f,function(t){var n=d3.range(l).sort(function(e,n){return s[n][t]-s[e][t]});e.orders[t+"_"+i]=n})}),e.max_link=r.has(n,"all_links")?o.max(n.all_links,function(t){return Math.abs(t.value)}).value:o.max(n.links,function(t){return Math.abs(t.value)}).value,e.abs_max_val=Math.abs(e.max_link)*t.clamp_opacity,0===t.input_domain?"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,e.abs_max_val]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,e.abs_max_val]).clamp(!0).range([0,1])):"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,t.input_domain]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,t.input_domain]).clamp(!0).range([0,1]));var a=r.has(n.links[0],"value_up"),s=r.has(n.links[0],"value_dn");return e.tile_type=a||s?"updn":"simple",e.highlight=r.has(n.links[0],"highlight")?1:0,e.matrix=i(n),e.wait_tooltip=0,e}},function(t,e,n){var r=n(2);t.exports=function(t){var e,n,i=[];return n=!!r.has(t.links[0],"value_orig"),t.row_nodes.forEach(function(o,a){i[a]={},i[a].name=t.row_nodes[a].name,i[a].row_index=a,i[a].row_data=d3.range(t.col_nodes.length).map(function(i){return e=r.has(t.links[0],"value_up")||r.has(t.links[0],"value_dn")?{pos_x:i,pos_y:a,value:0,value_up:0,value_dn:0,highlight:0}:{pos_x:i,pos_y:a,value:0,highlight:0},n&&(e.value_orig=0),e})}),t.links.forEach(function(t){i[t.source].row_data[t.target].value=t.value,i[t.source].row_data[t.target].row_name=t.row_name,i[t.source].row_data[t.target].col_name=t.col_name,(r.has(t,"value_up")||r.has(t,"value_dn"))&&(i[t.source].row_data[t.target].value_up=t.value_up,i[t.source].row_data[t.target].value_dn=t.value_dn),n&&(i[t.source].row_data[t.target].value_orig=t.value_orig),t.highlight&&(i[t.source].row_data[t.target].highlight=t.highlight),t.info&&(i[t.source].row_data[t.target].info=t.info)}),i}},function(t,e,n){var r=n(80);t.exports=function(t){var e=3/t.viz.rect_height;t.viz.ds_zt=2;var n=Math.floor(Math.log(e)/Math.log(2));if(t.viz.rect_height<2&&n>0){var i;t.viz.ds_opacity_scale=d3.scale.linear().domain([1,100]).range([1,2]).clamp(!0),t.viz.ds_num_levels=n,t.viz.ds=[],t.matrix.ds_matrix=[];for(var o=t.viz.inst_order.row,a=$.extend(!0,{},t.matrix.matrix),s=0;s<n;s++){t.viz.ds_level=0,(i={}).height=3,i.num_levels=n;var l=Math.pow(2,s);i.zt=l,i.num_rows=Math.round(t.viz.clust.dim.height/(i.height/l)),i.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),i.x_scale.domain(t.matrix.orders[o+"_row"]),i.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),i.y_scale.domain(d3.range(i.num_rows+1)),i.rect_height=i.y_scale.rangeBand()-t.viz.border_width.y,t.viz.ds.push(i);var u=r(t,a,s);t.matrix.ds_matrix.push(u)}t.viz.viz_nodes.row=d3.range(t.matrix.ds_matrix[0].length).map(String)}else t.viz.ds=null,t.viz.ds_level=-1,t.viz.ds_num_levels=0}},function(t,e,n){var r=n(3);t.exports=function(t,e,n){var i,o,a,s=t.viz.ds[n].num_rows,l=t.viz.ds_opacity_scale(t.network_data.row_nodes.length/s),u=t.viz.clust.dim.height/s,c=[],f=s+1;for(o=0;o<f;o++)(i={}).row_index=o,i.name=String(o),i.all_names=[],c.push(i);r.each(e,function(e){var n=t.viz.y_scale(e.row_index),r=Math.round(n/u),i=e.row_data;if(c[r].all_names.push(e.name),_.has(c[r],"row_data"))for(a=0;a<i.length;a++)c[r].row_data[a].value=c[r].row_data[a].value+i[a].value;else{var o=[];for(a=0;a<i.length;a++)o[a]=i[a];c[r].row_data=o}}),r.each(c,function(t){var e=t.all_names.length;r.each(t.row_data,function(t){t.value=t.value/e*l})});var h=[];return r.each(c,function(t){h=h.concat(t.all_names)}),c}},function(t,e,n){var r=n(82);t.exports=function(t){t.viz.zoom_scale_font={},t.viz.zoom_scale_font.row=1,t.viz.zoom_scale_font.col=1;var e=t.viz.x_scale.rangeBand()/2;return t.viz.square_zoom=t.viz.norm_labels.width.col/e*.75,t.viz=r(t.viz),t}},function(t,e){t.exports=function(t){var e=t.clust.dim.width/t.num_col_nodes,n=t.clust.dim.height/t.num_row_nodes;return t.zoom_ratio={},t.zoom_ratio.x=e/n,t.zoom_ratio.y=1,t.zoom_ratio.x<1&&(t.zoom_ratio.y=1/t.zoom_ratio.x,t.zoom_ratio.x=1),t}},function(t,e){t.exports=function(t){return t.labels.default_fs_row=1.01*t.viz.y_scale.rangeBand(),t.labels.default_fs_col=.87*t.viz.x_scale.rangeBand(),t.labels.default_fs_row>t.labels.max_allow_fs&&(t.labels.default_fs_row=t.labels.max_allow_fs),t.labels.default_fs_col>t.labels.max_allow_fs&&(t.labels.default_fs_col=t.labels.max_allow_fs),t}},function(t,e,n){var r=n(85),i=n(2),o=n(86),a=n(87),s=n(3);t.exports=function(t,e,n=!0){var l,u,c;e.show_categories={},e.all_cats={},e.cat_names={},e.cat_info={},e.cat_colors={},e.cat_colors.value_opacity={row:null,col:null};var f=0;return s.each(["row","col"],function(r){e.show_categories[r]=!1,e.all_cats[r]=[];var h=s.keys(t.network_data[r+"_nodes"][0]);h=h.sort(),s.each(h,function(t){t.indexOf("cat-")>=0&&(e.show_categories[r]=!0,e.all_cats[r].push(t))}),e.cat_info[r]=null,e.show_categories[r]&&(e.cat_colors[r]={},e.cat_info[r]={},e.cat_names[r]={},s.each(e.all_cats[r],function(n){var h=t.network_data[r+"_nodes"][0];"string"==typeof h[n]&&h[n].indexOf(": ")>0?(l=h[n].split(": ")[0],e.cat_names[r][n]=l):e.cat_names[r][n]=n;var d=i.pluck(t.network_data[r+"_nodes"],n),p=[];s.each(d,function(t){var e;e=t.indexOf(": ")>0?t.split(": ")[1]:t,p.push(e)});var g=s.uniq(d).sort();if("cat_strings"===(u=a(g)).type){var v=s.countBy(p);u.cat_hist=v}else u.cat_hist=null;e.cat_info[r][n]=u,e.cat_colors[r][n]={},s.each(g,function(t,i){c=o.get_random_color(i+f),e.cat_colors[r][n][t]=c,"string"==typeof t&&(t.indexOf("Not ")>=0||t.indexOf(": false")>0)&&(e.cat_colors[r][n][t]="#eee"),f+=1})})),_.has(t.network_data,"cat_colors")&&!0===n&&(e.cat_colors[r]=t.network_data.cat_colors[r]),t.sim_mat&&(e.cat_colors.col=e.cat_colors.row)}),e.cat_colors=e.cat_colors,e.cat_colors.opacity=.6,e.cat_colors.active_opacity=.9,e=r(t,e)}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=d3.scale.linear().domain([5,15]).range([85,120]).clamp("true");return e.cat_room={},e.cat_room.symbol_width=12,e.cat_room.separation=3,r.each(["row","col"],function(r){e.norm_labels.width[r]=n(t.labels[r+"_max_char"])*t[r+"_label_scale"],e["num_"+r+"_nodes"]=t.network_data[r+"_nodes"].length,e.dendro_room[r]="row"===r?e.dendro_room.symbol_width:e.dendro_room.symbol_width+3*e.uni_margin;var i=e.all_cats[r].length;e.cat_room[r]=e.show_categories[r]?("row"===r?i+1:i)*e.cat_room.symbol_width+(i-1)*e.cat_room.separation:"row"==r?e.cat_room.symbol_width:0}),e}},function(t,e){var n;function r(){return n.length}n=["#393b79","#aec7e8","#ff7f0e","#ffbb78","#98df8a","#bcbd22","#404040","#ff9896","#c5b0d5","#8c564b","#1f77b4","#5254a3","#FFDB58","#c49c94","#e377c2","#7f7f7f","#2ca02c","#9467bd","#dbdb8d","#17becf","#637939","#6b6ecf","#9c9ede","#d62728","#8ca252","#8c6d31","#bd9e39","#e7cb94","#843c39","#ad494a","#d6616b","#7b4173","#a55194","#ce6dbd","#de9ed6"],t.exports={get_default_color:function(){return"#EEE"},get_random_color:function(t){return n[t%r()]},get_num_colors:r}},function(t,e,n){var r=n(3);t.exports=function(t){var e=t[0],n=!1,i=!1,o="cat_strings",a=NaN,s=[],l=null;if("string"==typeof e&&e.indexOf(": ")>-1&&(n=!0,e=e.split(": ")[1]),0==isNaN(e)&&(i=!0),i&&(o="cat_values",r.each(t,function(t){n&&(t=t.split(": ")[1]),!0===isNaN(t)?o="cat_strings":(t=parseFloat(t),s.push(t))})),"cat_values"===o){var u=r.max(s,function(t){return Math.abs(t)});a=Math.abs(u),l=d3.scale.linear().domain([0,a]).range([0,1])}var c={};return c.type=o,c.max_abs_val=a,c.cat_scale=l,c}},function(t,e){t.exports=function(){return{zoom_x:1,zoom_y:1,trans_x:0,trans_y:0}}},function(t,e,n){var r=n(90),i=n(101),o=n(133),a=n(141),s=n(142),l=n(153),u=n(163),c=n(185),f=n(190),h=n(148),d=n(191),p=n(192),g=n(193),v=n(196),m=n(3);t.exports=function(t){var e=t.params;d3.select(e.viz.viz_wrapper+" svg").remove();var n=d3.select(e.viz.viz_wrapper).append("svg").attr("class","viz_svg").attr("id","svg_"+e.root.replace("#","")).attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height).attr("is_zoom",0).attr("stopped_zoom",1);function y(){var t=e.viz.super_border_color;return(e.viz.is_expand||0==e.show_viz_border)&&(t="white"),t}n.append("rect").attr("class","super_background").style("width",e.viz.svg_dim.width).style("height",e.viz.svg_dim.height).style("fill","white"),r(e,n),i(t),e.viz.show_dendrogram&&(d(t),p(t),v(t)),o(t),-1===e.viz.ds_level&&m.each(["row","col"],function(t){Number(d3.select("."+t+"_label_group").select("text").style("font-size").replace("px",""))>8&&d3.selectAll(e.root+" ."+t+"_label_group").each(function(){h(e,this,t)})}),f(t),e.viz.show_categories.col&&c(t),s(t),e.labels.super_labels&&a(e),g(t),d3.select(e.viz.viz_svg).append("rect").classed("left_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.grey_border_width).attr("height",e.viz.svg_dim.height).attr("transform","translate(0,0)"),d3.select(e.viz.viz_svg).append("rect").classed("right_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.grey_border_width).attr("height",e.viz.svg_dim.height).attr("transform",function(){return"translate("+(e.viz.svg_dim.width-e.viz.grey_border_width)+",0)"}),d3.select(e.viz.viz_svg).append("rect").classed("top_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.svg_dim.width).attr("height",e.viz.grey_border_width).attr("transform",function(){return"translate(0,0)"}),d3.select(e.viz.viz_svg).append("rect").classed("bottom_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.svg_dim.width).attr("height",e.viz.grey_border_width).attr("transform",function(){return"translate(0,"+(e.viz.svg_dim.height-e.viz.grey_border_width)+")"}),l(t),u(t),e.viz.do_zoom&&d3.select(e.viz.zoom_element).call(e.zoom_behavior),d3.select(e.viz.zoom_element).on("dblclick.zoom",null)}},function(t,e,n){var r=n(2),i=n(91),o=n(92),a=n(93);t.exports=function(t,e){var n,s=t.network_data,l=[];(n=e.append("g").attr("class","clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")").append("g").attr("class","clust_group").classed("clust_group",!0)).append("rect").classed("background",!0).classed("grey_background",!0).style("fill","#eee").style("opacity",.25).attr("width",t.viz.clust.dim.width).attr("height",t.viz.clust.dim.height),a(t,null===t.viz.ds?t.matrix.matrix:t.matrix.ds_matrix[0],"all",t.viz.ds_level),"function"==typeof t.click_tile?d3.selectAll(t.root+" .tile").on("click",function(e){var n={};n.row=t.network_data.row_nodes[e.pos_y].name,n.col=t.network_data.col_nodes[e.pos_x].name,n.value=e.value,r.has(e,"value_up")&&(n.value_up=e.value_up),r.has(e,"value_dn")&&(n.value_dn=e.value_dn),r.has(e,"info")&&(n.info=e.info),t.click_tile(n),o(t,this)}):t.tile_click_hlight&&d3.selectAll(t.root+" .tile").on("click",function(){o(t,this)});return i(t,{enter:0},0),{get_clust_group:function(){return n},get_matrix:function(){return l},get_nodes:function(t){return"row"===t?s.row_nodes:s.col_nodes}}}},function(t,e){t.exports=function(t,e,n){}},function(t,e){t.exports=function(t,e){d3.select(e).each(function(n){var r=n.pos_x,i=n.pos_y;if(d3.selectAll(t.root+" .click_hlight").remove(),r!=t.matrix.click_hlight_x||i!=t.matrix.click_hlight_y){t.matrix.click_hlight_x=r,t.matrix.click_hlight_y=i;var o=6*t.viz.border_width.x,a=6*t.viz.border_width.y;d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("top_hlight",!0).attr("width",t.viz.x_scale.rangeBand()).attr("height",a).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(r)+",0)"}).attr("opacity",.85),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("left_hlight",!0).attr("width",o).attr("height",t.viz.y_scale.rangeBand()-.99*a).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(r)+","+.99*a+")"}).attr("opacity",.85),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("right_hlight",!0).attr("width",o).attr("height",t.viz.y_scale.rangeBand()-.99*a).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+(t.viz.x_scale(r)+t.viz.x_scale.rangeBand()-o)+","+.99*a+")"}).attr("opacity",.85),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("bottom_hlight",!0).attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*o}).attr("height",a).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+(t.viz.x_scale(r)+.99*o)+","+(t.viz.y_scale.rangeBand()-a)+")"}).attr("opacity",.85)}else t.matrix.click_hlight_x=-666,t.matrix.click_hlight_y=-666})}},function(t,e,n){var r=n(94),i=n(100),o=n(3);t.exports=function(t,e,n="all",a=-1){var s=t.viz.y_scale,l=!0,u="row";if(a>=0&&(s=t.viz.ds[a].y_scale,l=!1,u="ds"+String(a)+"_row"),l)var c=i().attr("class",function(){var e=t.viz.root_tips.replace(".","");return e+" d3-tip "+e+"_tile_tip"}).style("display","none").direction("nw").offset([0,0]).html(function(e){var n,r=String(e.value.toFixed(3));if(t.keep_orig){var i=String(e.value_orig.toFixed(3));n="<p>"+e.row_name+" and "+e.col_name+"</p><p> normalized value: "+r+"</p><div> original value: "+i+"</div>"}else n="<p>"+e.row_name+" and "+e.col_name+"</p><div> value: "+r+"</div>";return n});else c=null;var f=[];"all"===n?f=e:o.each(e,function(t){o.contains(n,t.name)&&f.push(t)}),d3.select(t.root+" .clust_group").selectAll(".row").data(f,function(t){return t.name}).enter().append("g").classed(u,!0).attr("transform",function(t){return"translate(0,"+s(t.row_index)+")"}).each(function(e){r(t,e,c,this,a)}),-1===t.viz.ds_level&&null!=c&&d3.selectAll(t.root+" .row").call(c)}},function(t,e,n){var r=n(95),i=n(96),o=n(97),a=n(98),s=n(99),l=n(3);t.exports=function(t,e,n,u,c=-1){var f,h=e.row_data,d=t.viz.rect_height;c>=0&&(d=t.viz.ds[c].rect_height),f=0==!!_.has(t.network_data.links[0],"value_orig")?l.filter(h,function(t){return 0!==t.value}):h;var p=d3.select(u).selectAll("rect").data(f,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",d).style("fill",function(e){return"NaN"===e.value_orig?"#000000":e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).style("fill-opacity",function(e){return"NaN"===e.value_orig?.175:t.matrix.opacity_scale(Math.abs(e.value))}).attr("transform",function(e){return s(t,e)});if(p.on("mouseover",function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];o(t,this,n,r)}).on("mouseout",function(){a(t,this,n)}),"updn"==t.matrix.tile_type){var g=l.filter(h,function(t){return 0!=t.value_up||0!=t.value_dn});d3.select(u).selectAll(".tile_up").data(g,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return r(t)}).attr("transform",function(e){s(t,e)}).style("fill",function(){return t.matrix.tile_colors[0]}).style("fill-opacity",function(e){var n=0;return Math.abs(e.value_dn)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_up))),n}).on("mouseover",function(...e){o(t,this,n,e)}).on("mouseout",function(){a(t,this,n)}),d3.select(u).selectAll(".tile_dn").data(g,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return i(t)}).attr("transform",function(e){s(t,e)}).style("fill",function(){return t.matrix.tile_colors[1]}).style("fill-opacity",function(e){var n=0;return Math.abs(e.value_up)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_dn))),n}).on("mouseover",function(...e){o(t,this,n,e)}).on("mouseout",function(){a(t,this,n)}),p.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}t.matrix.tile_title&&p.append("title").text(function(t){return"value: "+t.value})}},function(t,e){t.exports=function(t){var e=t.viz.x_scale.rangeBand()-t.viz.border_width.x;return"M0,0 L0, "+(t.viz.y_scale.rangeBand()-t.viz.border_width.y)+" L"+e+",0 Z"}},function(t,e){t.exports=function(t){var e=t.viz.x_scale.rangeBand()-t.viz.border_width.x;return"M0, "+(t.viz.y_scale.rangeBand()-t.viz.border_width.y)+"   L"+e+", "+(t.viz.y_scale.rangeBand()-t.viz.border_width.y)+" L"+e+",0 Z"}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i){var o,a=i[0],s=[].slice.call(i);d3.select(e).classed("hovering",!0),r.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight",function(t){return a[e+"_name"].replace(/_/g," ")===t.name?"bold":"normal"})}),s.push(e),clearTimeout(o),o=setTimeout(function(){d3.select(e).classed("hovering")&&0===Number(d3.select(t.root+" .viz_svg").attr("is_zoom"))&&t.matrix.show_tile_tooltips&&null!==n&&(d3.selectAll(t.viz.root_tips+"_tile_tip").style("display","block"),n.show.apply(e,s),null!=t.tile_tip_callback)&&t.tile_tip_callback(s[0])},1e3,e)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n){d3.select(e).classed("hovering",!1),d3.selectAll(t.viz.root_tips+"_tile_tip").style("display","none"),r.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight","normal")}),null!=n&&n.hide()}},function(t,e){t.exports=function(t,e){return"translate("+((e.pos_x in t.viz.x_scale.domain()?t.viz.x_scale(e.pos_x):0)+.5*t.viz.border_width.x)+","+.5*t.viz.border_width.y+")"}},function(t,e){t.exports=function(){var t=function(){return"n"},e=function(){return[0,0]},n=function(){return" "},r=function(){var t=d3.select(document.createElement("div"));return t.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"}),t.node()}(),i=null,o=null,a=null;function s(t){var e;i="svg"==(e=(e=t).node()).tagName.toLowerCase()?e:e.ownerSVGElement,o=i.createSVGPoint(),document.body.appendChild(r)}s.show=function(){var i=Array.prototype.slice.call(arguments);i[i.length-1]instanceof SVGElement&&(a=i.pop());var o,c=n.apply(this,i),h=e.apply(this,i),d=t.apply(this,i),p=d3.select(r),g=0;for(p.html(c).style({opacity:1,"pointer-events":"all"}).style("z-index",99);g--;)p.classed(u[g],!1);return o=l.get(d).apply(this),p.classed(d,!0).style({top:o.top+h[0]+"px",left:o.left+h[1]+"px"}),!1===(this&&"[object Function]"==={}.toString.call(this))&&d3.select(this).attr("class").indexOf("tile")>=0&&setTimeout(f,5e3,this),s},s.hide=function(){return d3.select(r).style({opacity:0,"pointer-events":"none"}),s},s.attr=function(t){if(arguments.length<2&&"string"==typeof t)return d3.select(r).attr(t);var e=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(d3.select(r),e),s},s.style=function(t){if(arguments.length<2&&"string"==typeof t)return d3.select(r).style(t);var e=Array.prototype.slice.call(arguments);return d3.selection.prototype.style.apply(d3.select(r),e),s},s.direction=function(e){return arguments.length?(t=null==e?e:d3.functor(e),s):t},s.offset=function(t){return arguments.length?(e=null==t?t:d3.functor(t),s):e},s.html=function(t){return arguments.length?(n=null==t?t:d3.functor(t),s):n};var l=d3.map({n:function(){var t=c();return{top:t.n.y-r.offsetHeight,left:t.n.x-r.offsetWidth/2}},s:function(){var t=c();return{top:t.s.y,left:t.s.x-r.offsetWidth/2}},e:function(){var t=c();return{top:t.e.y-r.offsetHeight/2,left:t.e.x}},w:function(){var t=c();return{top:t.w.y-r.offsetHeight/2,left:t.w.x-r.offsetWidth}},nw:function(){var t=c();return{top:t.nw.y-r.offsetHeight,left:t.nw.x-r.offsetWidth}},ne:function(){var t=c();return{top:t.ne.y-r.offsetHeight,left:t.ne.x}},sw:function(){var t=c();return{top:t.sw.y,left:t.sw.x-r.offsetWidth}},se:function(){var t=c();return{top:t.se.y,left:t.e.x}},south_custom:function(){var t=c();return{top:t.s.y,left:t.s.x}}}),u=l.keys();function c(){var t=a||d3.event.target,e={},n=t.getScreenCTM(),r=t.getBBox(),i=r.width,s=r.height,l=r.x,u=r.y,c=document.documentElement.scrollTop||document.body.scrollTop,f=document.documentElement.scrollLeft||document.body.scrollLeft;return n.a=1,n.d=1,n.e=n.e+f,n.f=n.f+c,o.x=l,o.y=u,e.nw=o.matrixTransform(n),o.x=o.x+i,e.ne=o.matrixTransform(n),o.y=o.y+s,e.se=o.matrixTransform(n),o.x=o.x-i,e.sw=o.matrixTransform(n),o.y=o.y-s/2,e.w=o.matrixTransform(n),o.x=o.x+i,e.e=o.matrixTransform(n),o.x=o.x-i/2,o.y=o.y-s/2,e.n=o.matrixTransform(n),o.y=o.y+s,e.s=o.matrixTransform(n),e}function f(t){d3.select(t).classed("hovering")&&d3.selectAll(".d3-tip").transition().duration(250).style("opacity",0).style("display","none")}return s}},function(t,e,n){var r=n(102);t.exports=function(t,e){var n,i=t.params;n=d3.select(i.viz.viz_svg+" .row_container").empty()?d3.select(i.viz.viz_svg).append("g").classed("row_container",!0).attr("transform","translate("+i.viz.norm_labels.margin.left+","+i.viz.clust.margin.top+")"):d3.select(i.viz.viz_svg).select(".row_container").attr("transform","translate("+i.viz.norm_labels.margin.left+","+i.viz.clust.margin.top+")"),d3.select(i.root+" .row_white_background").empty()&&n.append("rect").classed("row_white_background",!0).classed("white_bars",!0).attr("fill",i.viz.background_color).attr("width",i.viz.label_background.row).attr("height",30*i.viz.clust.dim.height+"px"),d3.select(i.root+" .row_label_container").empty()?n.append("g").classed("row_label_container",!0).attr("transform","translate("+i.viz.norm_labels.width.row+",0)").append("g").classed("row_label_zoom_container",!0):n.select(i.root+" .row_label_container").attr("transform","translate("+i.viz.norm_labels.width.row+",0)"),-1===i.viz.ds_level&&r(t,"all",e)}},function(t,e,n){var r=n(2),i=n(103),o=n(104),a=n(132),s=n(3);t.exports=function(t,e="all",n=0){var l=t.params,u=[];"all"===e?u=l.network_data.row_nodes:s.each(l.network_data.row_nodes,function(t){s.contains(e,t.name)&&u.push(t)});var c=d3.select(l.root+" .row_label_zoom_container").selectAll("g").data(u,function(t){return t.name}).enter().append("g").classed("row_label_group",!0),f=l.network_data.row_nodes_names;c.attr("transform",function(t){var e=s.indexOf(f,t.name);return"translate(0,"+l.viz.y_scale(e)+")"}),c.on("dblclick",function(e){o(t,this,this.__data__.name),l.tile_click_hlight&&i(this,e.ini)}),a(l),c.insert("rect").style("opacity",0),c.append("text").attr("y",.5*l.viz.rect_height+.35*l.labels.default_fs_row).attr("text-anchor","end").style("font-size",l.labels.default_fs_row+"px").text(function(t){return r.normal_name(t)}).attr("pointer-events","none").style("opacity",0).style("cursor","default").transition().delay(n).duration(n).style("opacity",1),c.each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",l.viz.y_scale.rangeBand()).style("fill",function(){return"yellow"}).style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),r.has(l.network_data.row_nodes[0],"value")&&c.append("rect").classed("row_bars",!0).attr("width",function(t){return l.labels.bar_scale_row(Math.abs(t.value))}).attr("x",function(t){return-l.labels.bar_scale_row(Math.abs(t.value))}).attr("height",l.viz.y_scale.rangeBand()).attr("fill",function(t){return t.value>0?l.matrix.bar_colors[0]:l.matrix.bar_colors[1]}).attr("opacity",.4)}},function(t,e){t.exports=function(t,e,n){if(n!=t.click_hlight_row){var r=6*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_top_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_bottom_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85).attr("transform",function(){return"translate(0,"+(t.viz.y_scale.rangeBand()-r)+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_row=-666}},function(t,e,n){var r=n(105),i=n(106),o=n(88),a=n(131),s=n(79),l=n(3);t.exports=function(t,e,n){var u=t.params,c=a(u);if(1===c.zoom_y&&1===c.zoom_x){u.viz.inst_order.row="custom",i(t,"col"),d3.selectAll(u.root+" .toggle_col_order .btn").classed("active",!1),u.viz.run_trans=!0;var f=$.extend(!0,{},u.matrix.matrix),h=u.network_data.col_nodes,d=[];u.network_data.row_nodes.forEach(function(t){d.push(t.name)}),n=l.indexOf(d,n),d=[],h.forEach(function(t,e){d.push(f[n].row_data[e].value)});var p,g=d3.range(d.length).sort(function(t,e){return d[e]-d[t]});u.viz.x_scale.domain(g),u.matrix.orders.custom_row=g,p=u.network_data.links.length>u.matrix.def_large_matrix?d3.select(u.root+" .viz_svg"):d3.select(u.root+" .viz_svg").transition().duration(2500);var v=u.network_data.col_nodes_names;p.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",function(t){var e=l.indexOf(v,t.name);return"translate("+u.viz.x_scale(e)+")rotate(-90)"}),p.selectAll(".col_cat_group").attr("transform",function(t){var e=l.indexOf(v,t.name);return"translate("+u.viz.x_scale(e)+",0)"}),-1===u.viz.ds_level&&(p.selectAll(".tile").attr("transform",function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"}),p.selectAll(".tile_up").attr("transform",function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"}),p.selectAll(".tile_dn").attr("transform",function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"})),d3.selectAll(u.root+" .row_label_group").select("rect").style("opacity",0),d3.select(e).select("rect").style("opacity",1),r(u),u.network_data.links.forEach(function(t){t.x=u.viz.x_scale(t.target),t.y=u.viz.y_scale(t.source)}),u.zoom_info=o(),setTimeout(function(){u.viz.run_trans=!1},2500),u.viz.ds_num_levels>0&&u.viz.ds_level>=0&&s(u)}}},function(t,e){t.exports=function(t){var e=6*t.viz.border_width.x,n=6*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.x_scale.rangeBand()).attr("height",n).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",e).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"}),d3.select(t.root+" .right_hlight").attr("width",e).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.x_scale.rangeBand()-e)+","+.99*n+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*e}).attr("height",n).transition().duration(2500).attr("transform",function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+.99*e)+","+(t.viz.y_scale.rangeBand()-n)+")"})}},function(t,e,n){var r=n(107);t.exports=function(t,e,n=1500){var i=t.params;"row"===e&&"clust"===i.viz.inst_order.col&&setTimeout(r,n,t,"row",!0),"col"===e&&"clust"===i.viz.inst_order.row&&setTimeout(r,n,t,"col",!0),"clust"!=i.viz.inst_order.row&&!1===i.viz.dendro_filter.col&&(d3.selectAll(i.root+" .col_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null),d3.select(i.root+" .col_slider_group").style("opacity",0),d3.selectAll(i.root+" .col_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null)),"clust"!=i.viz.inst_order.col&&!1===i.viz.dendro_filter.row&&(d3.selectAll(i.root+" .row_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null).on("click",null),d3.select(i.root+" .row_slider_group").style("opacity",0),d3.selectAll(i.root+" .row_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null))}},function(t,e,n){var r=n(108),i=n(109),o=n(110),a=n(100),s=n(112),l=n(115);t.exports=function(t,e,n=!1){var u,c,f=t.params;"both"===e&&(e="row"),"clust"===f.viz.inst_order[u="row"===e?"col":"row"]&&d3.select(f.root+" ."+e+"_slider_group").style("opacity",1),f.viz.show_dendrogram&&(c="row"===e?r(f):i(f),!1===d3.select(t.params.root+" ."+e+"_dendro_crop_buttons").empty()&&s(t,e));var h,d=f.viz.dendro_opacity;function p(t,n,r){if(d3.select(t).classed("hovering")){var i=f.viz.root_tips+"_"+e+"_dendro_tip";d3.select(i+" .cat_graph").empty()&&null!==f.viz.cat_info[e]&&l(f,e,n,c[r],i,!0),d3.selectAll(f.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",1)}}d3.selectAll(t.params.viz.root_tips+"_"+e+"_dendro_tip").remove(),d3.selectAll(f.root+" ."+e+"_dendro_group").empty()?h=!1:(h=!0,d3.selectAll(f.root+" ."+e+"_dendro_group").remove());var g=a().attr("class",function(){var t=f.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_"+e+"_dendro_tip"}).direction("nw").offset([0,-5]).style("display","none").style("opacity",0);g.html(function(){return'<div class="cluster_info_container"></div>Click for cluster information <br>and additional options.'}),n&&(h=!1);var v,m,y,_,b,w,x,k=d3.select(f.root+" ."+e+"_dendro_container").selectAll("path").data(c,function(t){return t.name}).enter().append("path").style("opacity",0).attr("class",e+"_dendro_group").style("fill","black");k.attr("d",function(t){return"row"===e?(v=0,m=t.pos_top,y=30,_=t.pos_mid,b=0,w=t.pos_bot):(v=t.pos_top,m=0,y=t.pos_mid,_=30,b=t.pos_bot,w=0),"M"+v+","+m+" L"+y+", "+_+" L"+b+","+w+" Z"}),k.on("mouseover",function(n,r){d3.select(this).classed("hovering",!0),null!=t.params.dendro_callback&&t.params.dendro_callback(this),d3.select(f.viz.root_tips+"_"+e+"_dendro_tip").style("display","block"),o(f,this,n,e),g.show(n),d3.select(f.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",0),setTimeout(p,500,this,n,r)}).on("mouseout",function(){"clust"===f.viz.inst_order[u]&&d3.select(this).style("opacity",d),d3.selectAll(f.root+" .dendro_shadow").remove(),d3.select(this).classed("hovering",!1),g.hide(this)}).on("click",function(n,r){$(f.root+" .dendro_info").modal("toggle");var i=n.all_names.join(", ");d3.select(f.root+" .dendro_info input").attr("value",i);var o=f.root+" .dendro_info";d3.selectAll(".dendro_info .cluster_info_container .cat_graph").remove(),null!==f.viz.cat_info[e]&&l(f,e,n,c[r],o),null!=t.params.dendro_click_callback&&t.params.dendro_click_callback(this)}).call(g),x="clust"===f.viz.inst_order[u]?d:0,h?d3.select(f.root+" ."+e+"_dendro_container").selectAll("path").transition().delay(1e3).duration(1e3).style("opacity",x):d3.select(f.root+" ."+e+"_dendro_container").selectAll("path").style("opacity",x)}},function(t,e,n){var r=n(3);t.exports=function(t){var e={},n=t.group_level.row,i=t.network_data.row_nodes_names;r.each(t.network_data.row_nodes,function(o){var a=o.group[n],s=r.indexOf(i,o.name),l=t.viz.y_scale(s),u=l+t.viz.y_scale.rangeBand();!1===r.has(e,a)&&(e[a]={},e[a].name_top=o.name,e[a].name_bot=o.name,e[a].pos_top=l,e[a].pos_bot=u,e[a].pos_mid=(l+u)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="row"),e[a].all_names.push(o.name),l<e[a].pos_top&&(e[a].name_top=o.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),u>e[a].pos_bot&&(e[a].name_bot=o.name,e[a].pos_bot=u,e[a].pos_mid=(e[a].pos_top+u)/2)});var o=[];return r.each(e,function(t){o.push(t)}),o}},function(t,e,n){var r=n(3);t.exports=function(t){var e={},n=t.group_level.col,i=t.network_data.col_nodes_names;r.each(t.network_data.col_nodes,function(o){var a=o.group[n],s=r.indexOf(i,o.name),l=t.viz.x_scale(s),u=l+t.viz.x_scale.rangeBand();!1===r.has(e,a)&&(e[a]={},e[a].name_top=o.name,e[a].name_bot=o.name,e[a].pos_top=l,e[a].pos_bot=u,e[a].pos_mid=(l+u)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="col"),e[a].all_names.push(o.name),l<e[a].pos_top&&(e[a].name_top=o.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),u>e[a].pos_bot&&(e[a].name_bot=o.name,e[a].pos_bot=u,e[a].pos_mid=(e[a].pos_top+u)/2)});var o=[];return r.each(e,function(t){o.push(t)}),o}},function(t,e,n){var r=n(111);t.exports=function(t,e,n,i){d3.selectAll(t.root+" ."+i+"_dendro_crop_buttons")[0].length>1?setTimeout(function(){d3.select(e).classed("hovering")&&!1===t.is_slider_drag&&(d3.select(e).style("opacity",.7),!1===d3.select(t.viz.viz_svg).classed("running_update")&&("row"===i?"clust"===t.viz.inst_order.col&&r(t,e,i,n):"col"===i?"clust"===t.viz.inst_order.row&&r(t,e,i,n):"both"===i&&("clust"===t.viz.inst_order.col&&r(t,e,"row",n),"clust"===t.viz.inst_order.row&&r(t,e,"col",n))))},500):d3.selectAll(t.root+" .dendro_shadow").remove()}},function(t,e){t.exports=function(t,e,n,r){var i;d3.selectAll(t.root+" .dendro_shadow").remove(),"row"==n?(d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",r.pos_top+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2),i=t.viz.clust.dim.height-r.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",i+"px").attr("transform","translate(0,"+r.pos_bot+")").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2)):"col"===n&&(d3.select(t.root+" .clust_group").append("rect").attr("width",r.pos_top+"px").attr("height",t.viz.clust.dim.height+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2),i=t.viz.clust.dim.width-r.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",i+"px").attr("height",t.viz.clust.dim.height+"px").attr("transform","translate("+r.pos_bot+",0)").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2))}},function(t,e,n){var r=n(108),i=n(109),o=n(100),a=n(110),s=n(113),l=n(114);t.exports=function(t,e){var n,u,c=t.params,f=.6*c.viz.dendro_opacity;"row"===e?(n=r(c),u="col"):(n=i(c),u="row");var h,d,p,g,v,m,y,_=o().attr("class",function(){var t=c.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_"+e+"_dendro_crop_tip"}).direction("nw").style("display","none").offset([5,-5]);d3.selectAll(c.viz.root_tips+"_"+e+"_dendro_crop_tip").remove(),d3.selectAll(c.root+" ."+e+"_dendro_crop_buttons").remove();var b,w,x,k=e+"_dendro_crop_buttons";function E(t){d3.select(t).classed("hovering")&&d3.selectAll(c.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",1).style("display","block")}!1===d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter")?(h=d3.select(c.root+" ."+e+"_dendro_icons_group").selectAll("path").data(n,function(t){return t.name}).enter().append("path").classed(k,!0).attr("d",function(t){b=10,w=10;var n=t.pos_bot-t.pos_top;return"row"===e?(n<45&&(b=.25*n),d=w,p=-b,g=0,v=0,m=w,y=b,x=b):(n<45&&(w=.25*n),d=-w,p=b,g=0,v=0,m=w,y=b,x=w),d3.select(this)[0][0].__data__.tri_dim=x,"M"+d+","+p+" L"+g+", "+v+" L"+m+","+y+" Z"}),_.html(function(){return"Click to crop cluster"})):(h=d3.select(c.root+" ."+e+"_dendro_icons_group").selectAll("path").data(n,function(t){return t.name}).enter().append("path").classed(k,!0).attr("d",function(t){b=10,w=12;var n=t.pos_bot-t.pos_top;return"row"===e?(n<45&&(b=.25*n),d=0,p=-b,g=w,v=0,m=0,y=b):(n<45&&(w=.25*n),d=-w,p=0,g=0,v=b,m=w,y=0),d3.select(this)[0][0].__data__.tri_dim=10,"M"+d+","+p+" L"+g+", "+v+" L"+m+","+y+" Z"}),_.html(function(){return"Click to undo crop"})),h.style("cursor","pointer").style("opacity",function(){return f}).attr("transform",function(t){var n,r;return"row"===e?(n=c.viz.uni_margin,r=t.pos_mid):(n=t.pos_mid,r=c.viz.uni_margin),"translate("+n+","+r+")"}).on("mouseover",function(t){d3.select(this).classed("hovering",!0),_.show(t),a(c,this,t,e),d3.selectAll(c.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",0).style("display","block"),setTimeout(E,500,this)}).on("mouseout",function(){d3.select(this).classed("hovering",!1),d3.selectAll(c.root+" .dendro_shadow").remove(),d3.select(this).style("opacity",f),_.hide(this)}).on("click",function(n){d3.select(this).style("opacity",.9).transition().duration(1e3).style("opacity",0),d3.selectAll(c.root+" .dendro_shadow").remove(),!1===t.params.dendro_filter.row&&!1===t.params.dendro_filter.col&&!1===t.params.cat_filter.row&&!1===t.params.cat_filter.col?(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!0),d3.select(t.params.root+" ."+u+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),d3.select(t.params.root+" ."+e+"_slider_group").style("display","none"),d3.select(t.params.root+" ."+u+"_dendro_icons_container").style("display","none"),d3.select(t.params.root+" .crop_button").style("opacity",.2)):(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!1),d3.select(t.params.root+" ."+u+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),"clust"===c.viz.inst_order[u]&&d3.select(t.params.root+" ."+e+"_slider_group").style("display","block"),d3.select(t.params.root+" ."+u+"_dendro_icons_container").style("display","block"),d3.select(t.params.root+" .crop_button").style("opacity",1)),s(t,n,e)}).call(_),"clust"!=c.viz.inst_order[u]&&d3.select(c.root+" ."+e+"_dendro_icons_group").selectAll("path").style("display","none"),l(c,c.zoom_info,e)}},function(t,e){t.exports=function(t,e,n){var r={};if(!1===t.params.dendro_filter.row&&!1===t.params.dendro_filter.col&&!1===t.params.cat_filter.row&&!1===t.params.cat_filter.col){d3.select(t.params.root+" ."+n+"_slider_group").style("opacity",.35).style("pointer-events","none"),r[n]=e.all_names;var i=t.params.network_data[n+"_nodes_names"],o=t.params.network_data.row_nodes,a=t.params.network_data.col_nodes;t.filter_viz_using_names(r),t.params.inst_nodes.row_nodes=o,t.params.inst_nodes.col_nodes=a,d3.selectAll(t.params.root+" .dendro_shadow").transition().duration(1e3).style("opacity",0).remove(),t.params.dendro_filter[n]=i}else r[n]=t.params.dendro_filter[n],t.filter_viz_using_names(r),t.params.dendro_filter[n]=!1}},function(t,e){t.exports=function(t,e,n){function r(t,e){return e*t<10?1:t/(10/e)}"row"===n?d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(n){return"translate("+t.viz.uni_margin+","+n.pos_mid+") scale(1, "+1/r(e.zoom_y,d3.select(this).data()[0].tri_dim)+")"}):d3.select(t.root+" .col_dendro_icons_group").selectAll("path").attr("transform",function(n){return"translate("+n.pos_mid+","+t.viz.uni_margin+") scale("+1/r(e.zoom_x,d3.select(this).data()[0].tri_dim)+", 1)"})}},function(t,e,n){var r=n(116),i=n(3),o=n(129),a=n(130);t.exports=function(t,e,n,s,l,u=!1){"both"===e&&(e="row");var c=r(t,n,e);if(c.length>0){var f=d3.select(l+" .cluster_info_container"),h=370,d=177,p=!1;null!=c[0].bar_data[0][5]&&(h+=100,d=d+150-47,p=!0);var g=s.all_names.length,v=4;p&&(v=5,g=0,i.each(c[0].bar_data,function(t){g+=t[5]}));var m=20;i.each(c.slice(0,3),function(t){var e=t.bar_data.length;e>25&&(e=25),m+=27*(e+1)}),u&&f.append("text").text("Cluster Information");var y=f.append("div").style("margin-top","5px").classed("cat_graph",!0).append("svg").style("height",m+"px").style("width",h+"px");f.style("margin-bottom","5px"),y.append("rect").classed("cat_background",!0).attr("height",m+"px").attr("width",h+"px").attr("fill","white").attr("opacity",1),c=c.slice(0,3);var _=d3.scale.linear().domain([0,1e5]).range([20,30]),b=27;if(i.each(c,function(e){var n=_(e.bar_data[0][v]),r=y.append("g").classed("cat_graph_group",!0).attr("transform","translate(10, "+b+")"),i=r.append("g").classed("cat_bar_container",!0).attr("transform","translate(0, 10)").selectAll("g").data(e.bar_data).enter().append("g").attr("transform",function(t,e){return"translate(0,"+23*e+")"});o(t,e,r,27,v,25,i),a(t,r,i,4,p,n,v,g),b+=27*(e.bar_data.length+1)}),u){var w=d3.select(l),x=w.style("top").split(".px")[0],k=w.style("left").split(".px")[0],E=0,z=0;"row"===e?(E=0,z=d):(E=m+32,z=30),w.style("top",function(){return String(parseInt(x,10)-E)+"px"}).style("left",function(){return String(parseInt(k,10)-z)+"px"})}}}},function(t,e,n){var r=n(117),i=n(3);t.exports=function(t,e,n){"both"===n&&(n="row");var o=e.all_names,a=[],s=null,l=!1;i.each(t.network_data[n+"_nodes"],function(t){o.indexOf(t.name)>=0&&a.push(t)});var u=[];if(null!==t.viz.cat_info[n]){for(var c,f,h,d=i.keys(t.viz.cat_info[n]),p=[],g=[],v=0;v<d.length;v++)h="cat-"+String(v),"cat_strings"===t.viz.cat_info[n][h].type?(g.push(c=t.viz.cat_names[n][h]),p.push(h)):"number in clust"===t.viz.cat_names[n][h]&&(s=h,l=!0);var m,y,b={},w={},x=4;if(l&&(x=5),y=c===h,g.length>0){var k,E=o.length;i.each(p,function(e){if(f=e.split("-")[1],c=g[f],y)if(e.indexOf("-")>=0){var o=parseInt(e.split("-")[1],10)+1;c="Category "+String(o)}else c="Category";var l;b[c]={},i.each(a,function(t){(k=t[e]).indexOf(": ")>=0&&(k=k.split(": ")[1]),k in b[c]?(b[c][k].num_nodes=b[c][k].num_nodes+1,null!=s&&(b[c][k].num_nodes_ds=b[c][k].num_nodes_ds+parseInt(t[s].split(": ")[1],10))):(b[c][k]={},b[c][k].num_nodes=1,null!=s&&(b[c][k].num_nodes_ds=parseInt(t[s].split(": ")[1],10)))}),(w={}).type_name=c,w.num_in_clust=E,m=[];var h=b[c];for(var d in h){l=y?d:c+": "+d;var p=h[d].num_nodes,v=r(p,E,t.viz.cat_info[n][e].cat_hist[d]/t.network_data[n+"_nodes"].length);if(_.has(h[d],"num_nodes_ds"))var z=h[d].num_nodes_ds;else z=null;m.push([e,l,h[d],t.viz.cat_colors[n][e][l],p,z,v])}m.sort(function(t,e){return e[x]-t[x]}),w.bar_data=m,u.push(w)})}}return u}},function(t,e,n){var r=n(118),i=n(13).create();i.import(n(119)),t.exports=function(t,e,n){var o,a=i.factorial;function s(t,e,n){return a(e)/(a(t)*a(e-t))*(Math.pow(n,t)*Math.pow(1-n,e-t))}return o=function(t,e,n){for(var r=0,i=t;i<e+1;i++)r+=s(i,e,n);return r}(t,e,n),isNaN(o)&&(o=function(t,e,n){for(var i=(t-e*n)/Math.sqrt(e*n*(1-n)),a=r.z,s=r.p,l=-1,u=!1,c=0;c<a.length;c++)i<a[c]&&!1===u&&(l=c,u=!0);return-1===l&&(l=a.length-1),o=s[l]}(t,e,n)),o}},function(t,e){t.exports={p:[.5,.4800611941616275,.460172162722971,.4403823076297575,.42074029056089696,.4012936743170763,.3820885778110473,.3631693488243809,.3445782583896758,.32635522028791997,.3085375387259869,.29115968678834636,.27425311775007355,.2578461108058647,.24196365222307303,.2266273523768682,.2118553985833967,.19766254312269238,.18406012534675947,.17105612630848183,.15865525393145707,.1468590563758959,.13566606094638267,.12507193563715024,.11506967022170828,.10564977366685535,.09680048458561036,.08850799143740196,.08075665923377107,.0735292596096483,.06680720126885807,.06057075800205901,.054799291699557974,.049471468033648075,.044565462758543006,.040059156863817086,.03593031911292579,.03215677479561371,.028716559816001783,.02558805952163861,.022750131948179195,.020182215405704383,.017864420562816542,.0157776073910905,.013903447513498595,.012224472655044696,.010724110021675795,.009386705534838566,.008197535924596114,.007142810735271415,.006209665325776132,.005386145954066684,.004661188023718747,.004024588542758303,.0034669738030406647,.002979763235054555,.002555130330427929,.0021859614549132405,.0018658133003840339,.0015888696473648667,.0013498980316300933,.0011442068310226977,.0009676032132183563,.0008163523128285604,.0006871379379158471,.0005770250423907659,.00048342414238377663,.0004040578018640207,.0003369292656768799,.00028029327681617744,.00023262907903552502,.00019261557563563279,.00015910859015753364,.00013112015442048433,.00010779973347738823,8841728520080377e-20,7234804392511979e-20,59058912418922374e-21,48096344017602614e-21,39075596597787456e-21,3167124183311986e-20,2560881647404149e-20,20657506912546683e-21,16623763729652213e-21,1334574901590631e-20,10688525774934402e-21,8539905470991794e-21,6806876599334031e-21,5412543907703841e-21,4293514469971858e-21,33976731247300535e-22,26822957796388472e-22,2112454702502842e-21,16596751443714555e-22,13008074539172771e-22,10170832425687032e-22,7.933281519755892e-7,6.173073720091925e-7,4.791832765903185e-7,3.710674079633327e-7,2.8665157187919333e-7,2.2090503226954194e-7,1.6982674071475937e-7,1.3024322953320117e-7,9.96442631693347e-8,7.6049605164887e-8,5.790134039964557e-8,4.397711594005869e-8,3.332044848542845e-8,2.518491005446105e-8,1.898956246588768e-8,1.4283479893922661e-8,1.0717590258310852e-8,8.022391850663474e-9,5.99037140106353e-9,4.462172453901611e-9,3.3157459783261365e-9,2.4578650618080152e-9,1.8175078630994235e-9,1.3407124440918662e-9,9.865876450376946e-10,7.242291705137605e-10,5.303423262948808e-10,3.8741473466756636e-10,2.823158037043268e-10,2.0522634252189396e-10,1.4882282217622966e-10,1.0765746385121517e-10,7.768847581709776e-11,5.592507575942645e-11,4.016000583859088e-11,2.876854173604311e-11,2.055788909399508e-11,1.4654650977302715e-11,1.0420976987965154e-11,7.392257778017794e-12,5.230957544144525e-12,3.692499427235561e-12,2.600126965638173e-12,1.826431061976961e-12,1.279812543885835e-12,8.945889558769844e-13,6.23784446333152e-13,4.3388950271780343e-13,3.010627981117422e-13,2.0838581586720548e-13,1.4388386381575764e-13,9.910342749547509e-14,6.809224890620016e-14,4.6670115887190274e-14,3.1908916729108844e-14,2.1762912097085575e-14,1.4806537490047908e-14,1.0048965656526223e-14,6.803311540773901e-15,4.594627435778562e-15,3.095358771958668e-15,2.0801863521393674e-15,1.394517146659261e-15,9.325575771681205e-16,6.22096057427174e-16,4.139701816273122e-16,2.747959392398221e-16,1.8196213635266084e-16,1.2019351542735647e-16,7.919726314642476e-17,5.2055697448902465e-17,3.413148326458146e-17,2.232393197288031e-17,1.456514112590909e-17,9.47953482220325e-18,6.154425590850395e-18,3.985804962848151e-18,2.5749715380118873e-18,1.6594208699647519e-18,1.0667637375474856e-18,6.840807685935497e-19,4.375964799309017e-19,2.7923343749396233e-19,1.7774117841455144e-19,1.1285884059538324e-19,7.148417011269684e-20,4.516591491435403e-20,2.846677408460209e-20,1.7897488120140146e-20,1.1224633591327901e-20,7.022284240441541e-21,4.38238629906646e-21,2.7281535713460872e-21,1.6941535024881097e-21,1.0494515075362604e-21,6.484814453077208e-22,3.9972212057261192e-22,2.4577864834723153e-22,1.507493168810159e-22,9.223413524939353e-23,5.629282311376514e-23,3.4271987941135974e-23,2.0813752194932085e-23,1.2609160670206559e-23],z:[0,.05,.1,.15000000000000002,.2,.25,.30000000000000004,.35000000000000003,.4,.45,.5,.55,.6000000000000001,.65,.7000000000000001,.75,.8,.8500000000000001,.9,.9500000000000001,1,1.05,1.1,1.1500000000000001,1.2000000000000002,1.25,1.3,1.35,1.4000000000000001,1.4500000000000002,1.5,1.55,1.6,1.6500000000000001,1.7000000000000002,1.75,1.8,1.85,1.9000000000000001,1.9500000000000002,2,2.0500000000000003,2.1,2.15,2.2,2.25,2.3000000000000003,2.35,2.4000000000000004,2.45,2.5,2.5500000000000003,2.6,2.6500000000000004,2.7,2.75,2.8000000000000003,2.85,2.9000000000000004,2.95,3,3.0500000000000003,3.1,3.1500000000000004,3.2,3.25,3.3000000000000003,3.35,3.4000000000000004,3.45,3.5,3.5500000000000003,3.6,3.6500000000000004,3.7,3.75,3.8000000000000003,3.85,3.9000000000000004,3.95,4,4.05,4.1000000000000005,4.15,4.2,4.25,4.3,4.3500000000000005,4.4,4.45,4.5,4.55,4.6000000000000005,4.65,4.7,4.75,4.800000000000001,4.8500000000000005,4.9,4.95,5,5.050000000000001,5.1000000000000005,5.15,5.2,5.25,5.300000000000001,5.3500000000000005,5.4,5.45,5.5,5.550000000000001,5.6000000000000005,5.65,5.7,5.75,5.800000000000001,5.8500000000000005,5.9,5.95,6,6.050000000000001,6.1000000000000005,6.15,6.2,6.25,6.300000000000001,6.3500000000000005,6.4,6.45,6.5,6.550000000000001,6.6000000000000005,6.65,6.7,6.75,6.800000000000001,6.8500000000000005,6.9,6.95,7,7.050000000000001,7.1000000000000005,7.15,7.2,7.25,7.300000000000001,7.3500000000000005,7.4,7.45,7.5,7.550000000000001,7.6000000000000005,7.65,7.7,7.75,7.800000000000001,7.8500000000000005,7.9,7.95,8,8.05,8.1,8.15,8.200000000000001,8.25,8.3,8.35,8.4,8.450000000000001,8.5,8.55,8.6,8.65,8.700000000000001,8.75,8.8,8.85,8.9,8.950000000000001,9,9.05,9.1,9.15,9.200000000000001,9.25,9.3,9.35,9.4,9.450000000000001,9.5,9.55,9.600000000000001,9.65,9.700000000000001,9.75,9.8,9.850000000000001,9.9,9.950000000000001]}},function(t,e,n){"use strict";var r=n(120);e.name="factorial",e.factory=function(t,e,i,o){var a=i(n(121)),s=n(46),l=o("factorial",{number:function(t){if(t<0)throw new Error("Value must be non-negative");return a(t+1)},BigNumber:function(t){if(t.isNegative())throw new Error("Value must be non-negative");return a(t.plus(1))},"Array | Matrix":function(t){return r(t,l)}});return l.toTex={1:"\\left(${args[0]}\\right)"+s.operators.factorial},l}},function(t,e){"use strict";t.exports=function t(e,n,r){return e&&"function"==typeof e.map?e.map(function(e){return t(e,n,r)}):n(e)}},function(t,e,n){"use strict";var r=n(120),i=n(19).isInteger,o=4.7421875,a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];e.name="gamma",e.factory=function(t,e,s,l){var u=s(n(122)),c=s(n(125)),f=l("gamma",{number:function(t){var e,n;if(i(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,s=t-1;r>1;)s*=r,r--;return 0==s&&(s=1),s}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*f(1-t));if(t>=171.35)return 1/0;if(t>85){var l=t*t,u=l*t,c=u*t,h=c*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*l)-139/(51840*u)-571/(2488320*c)+163879/(209018880*h)+5246819/(75246796800*h*t))}--t,n=a[0];for(var d=1;d<a.length;++d)n+=a[d]/(t+d);return e=t+o+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n},Complex:function(e){var n,r;if(0==e.im)return f(e.re);e=new t.Complex(e.re-1,e.im),r=new t.Complex(a[0],0);for(var i=1;i<a.length;++i){var s=e.re+i,l=s*s+e.im*e.im;0!=l?(r.re+=a[i]*s/l,r.im+=-a[i]*e.im/l):r.re=a[i]<0?-1/0:1/0}n=new t.Complex(e.re+o+.5,e.im);var h=Math.sqrt(2*Math.PI);e.re+=.5;var d=c(n,e);0==d.im?d.re*=h:0==d.re?d.im*=h:(d.re*=h,d.im*=h);var p=Math.exp(-n.re);return n.re=p*Math.cos(-n.im),n.im=p*Math.sin(-n.im),u(u(d,n),r)},BigNumber:function(n){if(n.isInteger())return n.isNegative()||n.isZero()?new t.BigNumber(1/0):function(n){if(n.isZero())return new t.BigNumber(1);for(var r=e.precision+(0|Math.log(n.toNumber())),i=new(t.BigNumber.clone({precision:r}))(n),o=n.toNumber()-1;o>1;)i=i.times(o),o--;return new t.BigNumber(i.toPrecision(t.BigNumber.precision))}(n.minus(1));if(!n.isFinite())return new t.BigNumber(n.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(t){return r(t,f)}});return f.toTex={1:"\\Gamma\\left(${args[0]}\\right)"},f}},function(t,e,n){"use strict";var r=n(15).extend,i=n(29);e.name="multiply",e.factory=function(t,e,o,a){var s=n(46),l=o(n(44)),u=o(n(45)),c=o(n(123)),f=o(n(40)),h=o(n(124)),d=o(n(51)),p=t.DenseMatrix,g=t.SparseMatrix,v=a("multiply",r({"Array, Array":function(e,n){m(i.size(e),i.size(n));var r=v(l(e),l(n));return t.isMatrix(r)?r.valueOf():r},"Matrix, Matrix":function(t,e){var n=t.size(),r=e.size();return m(n,r),1===n.length?1===r.length?y(t,e,n[0]):_(t,e):1===r.length?w(t,e):x(t,e)},"Matrix, Array":function(t,e){return v(t,l(e))},"Array, Matrix":function(t,e){return v(l(t,e.storage()),e)},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=h(t,e,c,!1);break;case"dense":n=d(t,e,c,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=h(e,t,c,!0);break;case"dense":n=d(e,t,c,!0)}return n},"Array, any":function(t,e){return d(l(t),e,c,!1).valueOf()},"any, Array":function(t,e){return d(l(e),t,c,!0).valueOf()},"any, any":c,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,n){for(var r=v(t,e),i=0;i<n.length;i++)r=v(r,n[i]);return r}},c.signatures)),m=function(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}},y=function(t,e,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var r,i=t._data,o=t._datatype,s=e._data,l=e._datatype,f=u,h=c;o&&l&&o===l&&"string"==typeof o&&(f=a.find(u,[r=o,r]),h=a.find(c,[r,r]));for(var d=h(i[0],s[0]),p=1;p<n;p++)d=f(d,h(i[p],s[p]));return d},_=function(t,e){switch(e.storage()){case"dense":return b(t,e)}throw new Error("Not implemented")},b=function(t,e){var n,r=t._data,i=t._datatype,o=e._data,s=e._datatype,l=t._size[0],f=e._size[1],h=u,d=c;i&&s&&i===s&&"string"==typeof i&&(h=a.find(u,[n=i,n]),d=a.find(c,[n,n]));for(var g=[],v=0;v<f;v++){for(var m=d(r[0],o[0][v]),y=1;y<l;y++)m=h(m,d(r[y],o[y][v]));g[v]=m}return new p({data:g,size:[f],datatype:n})},w=function(t,e){switch(t.storage()){case"dense":return k(t,e);case"sparse":return A(t,e)}},x=function(t,e){switch(t.storage()){case"dense":switch(e.storage()){case"dense":return E(t,e);case"sparse":return z(t,e)}break;case"sparse":switch(e.storage()){case"dense":return C(t,e);case"sparse":return S(t,e)}}},k=function(t,e){var n,r=t._data,i=t._size,o=t._datatype,s=e._data,l=e._datatype,f=i[0],h=i[1],d=u,g=c;o&&l&&o===l&&"string"==typeof o&&(d=a.find(u,[n=o,n]),g=a.find(c,[n,n]));for(var v=[],m=0;m<f;m++){for(var y=r[m],_=g(y[0],s[0]),b=1;b<h;b++)_=d(_,g(y[b],s[b]));v[m]=_}return new p({data:v,size:[f],datatype:n})},E=function(t,e){var n,r=t._data,i=t._size,o=t._datatype,s=e._data,l=e._datatype,f=i[0],h=i[1],d=e._size[1],g=u,v=c;o&&l&&o===l&&"string"==typeof o&&(g=a.find(u,[n=o,n]),v=a.find(c,[n,n]));for(var m=[],y=0;y<f;y++){var _=r[y];m[y]=[];for(var b=0;b<d;b++){for(var w=v(_[0],s[0][b]),x=1;x<h;x++)w=g(w,v(_[x],s[x][b]));m[y][b]=w}}return new p({data:m,size:[f,d],datatype:n})},z=function(t,e){var n=t._data,r=t._size,i=t._datatype,o=e._values,s=e._index,l=e._ptr,h=e._size,d=e._datatype;if(!o)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,v=r[0],m=h[1],y=u,_=c,b=f,w=0;i&&d&&i===d&&"string"==typeof i&&(y=a.find(u,[p=i,p]),_=a.find(c,[p,p]),b=a.find(f,[p,p]),w=a.convert(0,p));for(var x=[],k=[],E=[],z=new g({values:x,index:k,ptr:E,size:[v,m],datatype:p}),A=0;A<m;A++){E[A]=k.length;var C=l[A],S=l[A+1];if(S>C)for(var T=0,M=0;M<v;M++){for(var N,D=M+1,I=C;I<S;I++){var O=s[I];T!==D?(N=_(n[M][O],o[I]),T=D):N=y(N,_(n[M][O],o[I]))}T!==D||b(N,w)||(k.push(M),x.push(N))}}return E[m]=k.length,z},A=function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,h=e._datatype,d=t._size[0],p=e._size[0],v=[],m=[],y=[],_=u,b=c,w=f,x=0;o&&h&&o===h&&"string"==typeof o&&(_=a.find(u,[s=o,s]),b=a.find(c,[s,s]),w=a.find(f,[s,s]),x=a.convert(0,s));var k=[],E=[];y[0]=0;for(var z=0;z<p;z++){var A=l[z];if(!w(A,x))for(var C=i[z+1],S=i[z];S<C;S++){var T=r[S];E[T]?k[T]=_(k[T],b(A,n[S])):(E[T]=!0,m.push(T),k[T]=b(A,n[S]))}}for(var M=m.length,N=0;N<M;N++)v[N]=k[m[N]];return y[1]=m.length,new g({values:v,index:m,ptr:y,size:[d,1],datatype:s})},C=function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,h=e._datatype,d=t._size[0],p=e._size[0],v=e._size[1],m=u,y=c,_=f,b=0;o&&h&&o===h&&"string"==typeof o&&(m=a.find(u,[s=o,s]),y=a.find(c,[s,s]),_=a.find(f,[s,s]),b=a.convert(0,s));for(var w=[],x=[],k=[],E=new g({values:w,index:x,ptr:k,size:[d,v],datatype:s}),z=[],A=[],C=0;C<v;C++){k[C]=x.length;for(var S=C+1,T=0;T<p;T++){var M=l[T][C];if(!_(M,b))for(var N=i[T+1],D=i[T];D<N;D++){var I=r[D];A[I]!==S?(A[I]=S,x.push(I),z[I]=y(M,n[D])):z[I]=m(z[I],y(M,n[D]))}}for(var O=x.length,L=k[C];L<O;L++)w[L]=z[x[L]]}return k[v]=x.length,E},S=function(t,e){var n,r=t._values,i=t._index,o=t._ptr,s=t._datatype,l=e._values,f=e._index,h=e._ptr,d=e._datatype,p=t._size[0],v=e._size[1],m=r&&l,y=u,_=c;s&&d&&s===d&&"string"==typeof s&&(y=a.find(u,[n=s,n]),_=a.find(c,[n,n]));for(var b,w,x,k,E,z,A=m?[]:void 0,C=[],S=[],T=new g({values:A,index:C,ptr:S,size:[p,v],datatype:n}),M=m?[]:void 0,N=[],D=0;D<v;D++){S[D]=C.length;var I=D+1;for(k=h[D+1],x=h[D];x<k;x++)if(z=f[x],m)for(w=o[z+1],b=o[z];b<w;b++)N[E=i[b]]!==I?(N[E]=I,C.push(E),M[E]=_(l[x],r[b])):M[E]=y(M[E],_(l[x],r[b]));else for(w=o[z+1],b=o[z];b<w;b++)N[E=i[b]]!==I&&(N[E]=I,C.push(E));if(m)for(var O=C.length,L=S[D];L<O;L++)A[L]=M[C[L]]}return S[v]=C.length,T};return v.toTex={2:"\\left(${args[0]}"+s.operators.multiply+"${args[1]}\\right)"},v}},function(t,e){"use strict";e.factory=function(t,e,n,r){var i=r("multiplyScalar",{"number, number":function(t,e){return t*e},"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var n=e.clone();return n.value=null===n.value?n._normalize(t):i(n.value,t),n},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var n=t.clone();return n.value=null===n.value?n._normalize(e):i(n.value,e),n},"Unit, Unit":function(t,e){return t.multiply(e)}});return i}},function(t,e,n){"use strict";e.name="algorithm11",e.factory=function(t,e,r,i){var o=r(n(40)),a=t.SparseMatrix;return function(t,e,n,r){var s=t._values,l=t._index,u=t._ptr,c=t._size,f=t._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,d=c[0],p=c[1],g=o,v=0,m=n;"string"==typeof f&&(g=i.find(o,[h=f,h]),v=i.convert(0,h),e=i.convert(e,h),m=i.find(n,[h,h]));for(var y=[],_=[],b=[],w=new a({values:y,index:_,ptr:b,size:[d,p],datatype:h}),x=0;x<p;x++){b[x]=_.length;for(var k=u[x+1],E=u[x];E<k;E++){var z=l[E],A=r?m(e,s[E]):m(s[E],e);g(A,v)||(_.push(z),y.push(A))}}return b[p]=_.length,w}}},function(t,e,n){"use strict";var r=n(19).isInteger,i=n(29).size;e.name="pow",e.factory=function(t,e,o,a){var s=n(46),l=o(n(126)),u=o(n(122)),c=o(n(44)),f=o(n(127)),h=o(n(128)),d=a("pow",{"number, number":p,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(n,r){return r.isInteger()||n>=0||e.predictable?n.pow(r):new t.Complex(n.toNumber(),0).pow(r.toNumber(),0)},"Fraction, Fraction":function(t,n){if(1!==n.d){if(e.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return p(t.valueOf(),n.valueOf())}return t.pow(n)},"Array, number":g,"Array, BigNumber":function(t,e){return g(t,e.toNumber())},"Matrix, number":v,"Matrix, BigNumber":function(t,e){return v(t,e.toNumber())},"Unit, number":function(t,e){return t.pow(e)}});function p(n,i){if(e.predictable&&!r(i)&&n<0)try{var o=f(i),a=h(o);if((i===a||Math.abs((i-a)/i)<1e-14)&&o.d%2==1)return(o.n%2==0?1:-1)*Math.pow(-n,i)}catch(s){}return n*n<1&&i===1/0||n*n>1&&i===-1/0?0:e.predictable&&(n<-1&&i===1/0||n>-1&&n<0&&i===-1/0)?NaN:r(i)||n>=0||e.predictable?Math.pow(n,i):new t.Complex(n,0).pow(i,0)}function g(t,e){if(!r(e)||e<0)throw new TypeError("For A^b, b must be a positive integer (value is "+e+")");var n=i(t);if(2!=n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!=n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var o=l(n[0]).valueOf(),a=t;e>=1;)1==(1&e)&&(o=u(a,o)),e>>=1,a=u(a,a);return o}function v(t,e){return c(g(t.valueOf(),e))}return d.toTex={2:"\\left(${args[0]}\\right)"+s.operators.pow+"{${args[1]}}"},d}},function(t,e,n){"use strict";var r=n(29),i=n(19).isInteger;e.name="eye",e.factory=function(t,e,o,a){var s=o(n(44)),l=a("eye",{"":function(){return"Matrix"===e.matrix?s([]):[]},string:function(t){return s(t)},"number | BigNumber":function(t){return c(t,t,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, string":function(t,e){return c(t,t,e)},"number | BigNumber, number | BigNumber":function(t,n){return c(t,n,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,n){return c(t,e,n)},Array:function(t){return u(t)},"Array, string":function(t,e){return u(t,e)},Matrix:function(t){return u(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return u(t.valueOf(),e)}});return l.toTex=void 0,l;function u(t,e){switch(t.length){case 0:return e?s(e):[];case 1:return c(t[0],t[0],e);case 2:return c(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function c(e,n,o){var a=t.isBigNumber(e)||t.isBigNumber(n)?t.BigNumber:null;if(t.isBigNumber(e)&&(e=e.toNumber()),t.isBigNumber(n)&&(n=n.toNumber()),!i(e)||e<1)throw new Error("Parameters in function eye must be positive integers");if(!i(n)||n<1)throw new Error("Parameters in function eye must be positive integers");var s=a?new t.BigNumber(1):1,l=a?new a(0):0,u=[e,n];if(o)return t.Matrix.storage(o).diagonal(u,s,0,l);for(var c=r.resize([],u,l),f=e<n?e:n,h=0;h<f;h++)c[h][h]=s;return c}}},function(t,e,n){"use strict";var r=n(120);e.name="fraction",e.factory=function(t,e,n,i){var o=i("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new t.Fraction(e)},string:function(e){return new t.Fraction(e)},"number, number":function(e,n){return new t.Fraction(e,n)},BigNumber:function(e){return new t.Fraction(e.toString())},Fraction:function(t){return t},Object:function(e){return new t.Fraction(e)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(120);e.name="number",e.factory=function(t,e,n,i){var o=i("number",{"":function(){return 0},number:function(t){return t},string:function(t){var e=Number(t);if(isNaN(e))throw new SyntaxError('String "'+t+'" is no valid number');return e},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},o}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=t.viz.cat_bar_width,l=t.viz.cat_bar_height,u=e.bar_data[0][i];e.bar_data=e.bar_data.slice(0,o);var c=e.type_name;c.length>=25&&(c=c.slice(0,25)+".."),n.append("text").classed("cat_graph_title",!0).text(c).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",800),n.append("line").attr("x1",0).attr("x2",s).attr("y1",4).attr("y2",4).attr("stroke","blue").attr("stroke-width",1).attr("opacity",1);var f=d3.scale.linear().domain([0,u]).range([0,s]);a.append("rect").attr("height",l+"px").attr("width",function(t){return f(t[i])+"px"}).attr("fill",function(t){return t[3]}).attr("opacity",t.viz.cat_colors.opacity).attr("stroke","grey").attr("stroke-width","0.5px"),a.append("text").classed("bar_labels",!0).text(function(t){var e=t[1];return e.indexOf(": ")>0&&(e=e.split(": ")[1]),e.indexOf("<p>")>0&&(e=e.split("<p>")[0]),e.length>=25&&(e=e.slice(0,25)+".."),e}).attr("transform",function(){return"translate(5, "+.75*l+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","right")}},function(t,e){t.exports=function(t,e,n,r,i,o,a,s){var l=t.viz.cat_bar_width,u=t.viz.cat_bar_height;e.append("text").text("Count").attr("transform",function(){return"translate("+(l+o)+", 0)"}),e.append("text").text("Pct").attr("transform",function(){return"translate("+(l+o+60)+", 0)"}),e.append("text").text("P-val").attr("transform",function(){return"translate("+(l+o+115)+", 0)"}),i&&e.append("text").text("Clusters").attr("transform",function(){return"translate("+(l+150)+", 0)"}),n.append("text").classed("count_labels",!0).text(function(t){var e=t[a];return e=e.toLocaleString(),String(e)}).attr("transform",function(){return"translate("+(l+o+35)+", "+.75*u+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),n.append("text").classed("count_labels",!0).text(function(t){var e=t[a]/s*100;return e=(e=Math.round(10*e)/10).toLocaleString(),String(e)}).attr("transform",function(){return"translate("+(l+o+35+47)+", "+.75*u+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),n.append("text").classed("count_labels",!0).text(function(t){var e=t[6];return e<.001?(e=parseFloat(e.toPrecision(3))).toExponential():parseFloat(e.toPrecision(2))}).attr("transform",function(){return"translate("+(l+o+35+112)+", "+.75*u+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),i&&n.append("text").classed("count_labels",!0).text(function(t){return String(t[r].toLocaleString())}).attr("transform",function(){return"translate("+(l+35+150+20)+", "+.75*u+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end")}},function(t,e){t.exports=function(t){var e={},n=d3.select(t.root+" .clust_group").attr("transform");return null!=n&&n.indexOf("scale")>0?(e.zoom_x=parseFloat(n.split("scale")[1].replace("(","").replace(")","").split(",")[0]),e.zoom_y=parseFloat(n.split("scale")[1].replace("(","").replace(")","").split(",")[1])):(e.zoom_x=1,e.zoom_y=1),e}},function(t,e,n){var r=n(100);t.exports=function(t){if(t.labels.show_label_tooltips){d3.selectAll(t.viz.root_tips+"_row_tip").remove();var e=t.viz.root_tips.replace(".",""),n=r().attr("class",function(){return e+" d3-tip "+e+"_row_tip"}).direction("e").offset([0,10]).style("display","none").html(function(t){return"<span>"+t.name.replace(/_/g," ").split("#")[0]+"</span>"});d3.select(t.viz.viz_wrapper).select(t.root+" .row_container").call(n),d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(e){d3.select(t.viz.root_tips+"_row_tip").classed(e.name,!0),d3.selectAll(t.viz.root_tips+"_row_tip").style("display","block"),d3.select(this).select("text").classed("active",!0),n.show(e),null!=t.row_tip_callback&&t.row_tip_callback(t.viz.root_tips,e)}).on("mouseout",function(e){d3.selectAll(t.viz.root_tips+"_row_tip").style("display","none").classed(e.name,!1),d3.select(this).select("text").classed("active",!1),n.hide(e)})}else d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)})}},function(t,e,n){var r=n(2),i=n(134),o=n(135),a=n(104),s=n(139),l=n(140);t.exports=function(t,e=0){var n,u=t.params,c=u.network_data.col_nodes,f=u.viz.x_scale.rangeBand()/2+u.viz.border_width.x;d3.select(u.root+" .col_container").empty()?((n=d3.select(u.viz.viz_svg).append("g").attr("class","col_container").attr("transform","translate("+u.viz.clust.margin.left+","+u.viz.norm_labels.margin.top+")")).append("rect").attr("fill",u.viz.background_color).attr("width",30*u.viz.clust.dim.width+"px").attr("height",u.viz.label_background.col).attr("class","white_bars"),n.append("g").attr("class","col_label_outer_container").attr("transform","translate(0,"+u.viz.norm_labels.width.col+")").append("g").attr("class","col_zoom_container")):((n=d3.select(u.root+" .col_container").attr("transform","translate("+u.viz.clust.margin.left+","+u.viz.norm_labels.margin.top+")")).select(".white_bars").attr("fill",u.viz.background_color).attr("width",30*u.viz.clust.dim.width+"px").attr("height",u.viz.label_background.col),n.select(u.root+" .col_label_outer_container"));var h=d3.select(u.root+" .col_zoom_container").selectAll(".col_label_text").data(c,function(t){return t.name}).enter().append("g").attr("class","col_label_text").attr("transform",function(t){return"translate("+u.viz.x_scale(t.col_index)+", 0) rotate(-90)"}).append("g").attr("class","col_label_group").attr("transform","translate("+u.viz.x_scale.rangeBand()/2+","+f+") rotate(45)").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)});r.has(u.network_data.col_nodes[0],"value")&&h.append("rect").attr("class","col_bars").attr("width",function(t){var e=0;return t.value>0&&(e=u.labels.bar_scale_col(t.value)),e}).attr("height",.66*u.viz.x_scale.rangeBand()).style("fill",function(t){return t.value>0?u.matrix.bar_colors[0]:u.matrix.bar_colors[1]}).attr("opacity",.6),h.append("text").attr("x",0).attr("y",.64*u.viz.x_scale.rangeBand()).attr("dx",u.viz.border_width.x).attr("text-anchor","start").attr("full_name",function(t){return t.name}).style("font-size",u.labels.default_fs_col+"px").style("cursor","default").text(function(t){return r.normal_name(t)}).style("opacity",0).transition().delay(e).duration(e).style("opacity",1),s(u),h.append("path").style("stroke-width",0).attr("d",function(){return l(u)}).attr("fill","#eee").style("opacity",0).transition().delay(e).duration(e).style("opacity",u.viz.triangle_opacity),d3.selectAll(u.root+" .col_label_text").on("click",function(t){"function"==typeof u.click_label?(u.click_label(t.name,"col"),i(u,this,t.ini)):u.tile_click_hlight&&i(u,this,t.ini)}).on("dblclick",function(e){var n=this.__data__.name;if(u.sim_mat){o(t,this,n);var r=d3.selectAll(u.root+" .row_label_group").filter(function(t){return t.name==n})[0][0];a(t,r,n)}else o(t,this,n);u.tile_click_hlight&&i(u,this,e.ini)})}},function(t,e){t.exports=function(t,e,n){if(n!=t.click_hlight_col){t.click_hlight_col=n;var r=6*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_top_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85).attr("transform",function(){return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+",0)"}),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_bottom_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85).attr("transform",function(){var e=t.viz.x_scale.rangeBand()-r;return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+","+e+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_col=-666}},function(t,e,n){var r=n(105),i=n(106),o=n(136),a=n(88),s=n(131),l=n(79),u=n(3);t.exports=function(t,e,n){var c=t.params,f=s(c);if(1===f.zoom_y&&1===f.zoom_x){c.viz.inst_order.col="custom",i(t,"col"),d3.selectAll(c.root+" .toggle_row_order .btn").classed("active",!1),c.viz.run_trans=!0;var h=$.extend(!0,{},c.matrix.matrix),d=c.network_data.row_nodes,p=[];c.network_data.col_nodes.forEach(function(t){p.push(t.name)});var g=u.indexOf(p,n);p=[],d.forEach(function(t,e){p.push(h[e].row_data[g].value)});var v,m=d3.range(p.length).sort(function(t,e){return p[e]-p[t]});c.viz.y_scale.domain(m),c.matrix.orders.custom_col=m;var y=c.network_data.row_nodes_names;(v=c.network_data.links.length>c.matrix.def_large_matrix?d3.select(c.root+" .viz_svg"):d3.select(c.root+" .viz_svg").transition().duration(2500)).selectAll(".row_cat_group").attr("transform",function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),v.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),-1===c.viz.ds_level&&v.selectAll(".row").attr("transform",function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),d3.selectAll(c.root+" .col_label_text").select(".highlight_rect").style("opacity",0),d3.select(e).select(".highlight_rect").style("opacity",1),c.network_data.links.forEach(function(t){t.x=c.viz.x_scale(t.target),t.y=c.viz.y_scale(t.source)}),r(c),c.zoom_info=a(),setTimeout(function(){c.viz.run_trans=!1},2500),c.viz.ds_num_levels>0&&c.viz.ds_level>=0&&(l(c),o(t,!0,!0,!0))}}},function(t,e,n){var r=n(137),i=n(93),o=n(102),a=n(138),s=n(3);t.exports=function(t,e=!1,n=!1,l=!1){var u=t.params,c=u.zoom_info,f=u.viz.ds_level,h=u.viz.ds_level;null===u.viz.ds?f=-1:(f=Math.floor(Math.log(c.zoom_y)/Math.log(u.viz.ds_zt)))>u.viz.ds_num_levels-1&&(f=-1);var d,p=!1;-1==h?f>=0&&(p=!0):f<h&&(p=!0),!0===e||!0===p?(e=!0,u.viz.ds_level=d=f):d=h;var g,v,m={};if(m.min_x=Math.abs(c.trans_x)/c.zoom_x-6*u.viz.rect_width,m.min_y=Math.abs(c.trans_y)/c.zoom_y-6*u.viz.rect_height,m.max_x=Math.abs(c.trans_x)/c.zoom_x+u.viz.clust.dim.width/c.zoom_x+5*u.viz.rect_width,m.max_y=Math.abs(c.trans_y)/c.zoom_y+u.viz.clust.dim.height/c.zoom_y+5*u.viz.rect_height,r(u,m),!1===l?g=s.difference(u.viz.viz_nodes.row,u.viz.viz_nodes.curr_row):(g="all",d3.selectAll(u.root+" .ds"+String(d)+"_row").remove()),null!=u.viz.ds){var y=".ds"+String(u.viz.ds_level)+"_row";d3.selectAll(y).style("display","block")}if(d>=0&&(d3.selectAll(u.root+" .row").remove(),d3.selectAll(u.viz.root_tips+"_tile_tip").remove(),d3.selectAll(u.viz.root_tips+"_row_tip").remove()),d<0?(v=u.matrix.matrix,a(u)):(v=u.matrix.ds_matrix[d],d3.selectAll(u.root+" .row_cat_group path").remove()),!0===n&&d3.selectAll(u.root+" .row_cat_group path").remove(),!0===e&&(d>=0?d3.selectAll(u.root+" .ds"+String(d)+"_row").each(function(t){!1===s.contains(u.viz.viz_nodes.row,t.name)&&d3.select(this).remove()}):d3.selectAll(u.root+" .row").each(function(t){!1===s.contains(u.viz.viz_nodes.row,t.name)&&d3.select(this).remove()}),d3.selectAll(u.root+" .row_label_group").each(function(t){!1===s.contains(u.viz.viz_nodes.row,t.name)&&d3.select(this).remove()}),d!=h&&(g=u.viz.viz_nodes.row,d3.selectAll(u.root+" .ds"+String(h)+"_row").remove())),(g.length>=1||"all"===g)&&i(u,v,g,d),-1===d&&(!1===n||e)){var _=[];d3.selectAll(u.root+" .row_label_group").each(function(t){_.push(t.name)});var b=s.difference(u.viz.viz_nodes.row,_);b.length>1&&o(t,b)}}},function(t,e){t.exports=function(t,e){var n,r=[],i=[],o=t.viz.y_scale,a=t.viz.ds_level,s=t.network_data.row_nodes_names,l=".row";a>=0&&(o=t.viz.ds[a].y_scale,s=d3.range(t.matrix.ds_matrix[a].length).map(String),l=".ds"+String(a)+"_row");for(var u=0;u<s.length;u++)(n=o(u))<e.max_y&&n>e.min_y&&r.push(s[u]);d3.selectAll(t.root+" "+l).each(function(t){i.push(t.name)}),t.viz.viz_nodes.row=r,t.viz.viz_nodes.curr_row=i}},function(t,e){t.exports=function(t){!0===d3.select(t.root+" .row_cat_group path").empty()&&d3.selectAll(t.root+" .row_cat_group").append("path").attr("d",function(){return"M "+(t.viz.cat_room.symbol_width-1)+",0 L 1,"+t.viz.y_scale.rangeBand()/2+" L "+(t.viz.cat_room.symbol_width-1)+","+t.viz.y_scale.rangeBand()+" Z"}).attr("fill","#eee").style("opacity",t.viz.triangle_opacity)}},function(t,e,n){var r=n(100);t.exports=function(t){if(t.labels.show_label_tooltips){d3.selectAll(t.viz.root_tips+"_col_tip").remove();var e=r().attr("class",function(){var e=t.viz.root_tips.replace(".","");return e+" d3-tip "+e+"_col_tip"}).direction("w").offset([20,0]).style("display","none").html(function(t){return"<span>"+t.name.replace(/_/g," ").split("#")[0]+"</span>"});d3.select(t.viz.viz_wrapper).select("svg").select(t.root+" .col_zoom_container").selectAll(".col_label_group").select("text").call(e),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_group").on("mouseover",function(n){d3.selectAll(t.viz.root_tips+"_col_tip").style("display","block"),e.show(n),null!=t.col_tip_callback&&t.col_tip_callback(n)}).on("mouseout",function(){e.hide(this),d3.selectAll(t.viz.root_tips+"_col_tip").style("display","none")})}}},function(t,e){t.exports=function(t){var e=.36*t.viz.x_scale.rangeBand(),n=-t.viz.border_width.x,r=t.viz.x_scale.rangeBand()-e;return"M "+n+",0 L "+-(t.viz.x_scale.rangeBand()-e+t.viz.border_width.x)+",0 L "+-t.viz.border_width.x+","+r+" Z"}},function(t,e){t.exports=function(t){d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("height",t.viz.super_labels.dim.width+"px").attr("width","3000px").classed("super_col_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.super_labels.margin.top+")"),d3.select(t.viz.viz_svg).append("text").attr("class","super_col").text(t.labels.super.col).attr("text-anchor","center").attr("transform",function(){var e=d3.select(this)[0][0].getBBox().width;return"translate("+(t.viz.clust.dim.width/2+t.viz.norm_labels.width.row-e/2)+","+t.viz.super_labels.dim.width+")"}).style("font-size",function(){return t.labels.super_label_fs*t.labels.super_label_scale+"px"}).style("font-weight",300),d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("width",t.viz.super_labels.dim.width+"px").attr("height","3000px").classed("super_row_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.super_labels.margin.left+",0)"),d3.select(t.viz.viz_svg).append("g").classed("super_row",!0).attr("transform",function(){return"translate("+t.viz.super_labels.dim.width+","+(t.viz.clust.dim.height/2+t.viz.norm_labels.width.col)+")"}),d3.select(t.root+" .super_row").append("text").text(t.labels.super.row).attr("text-anchor","center").attr("transform",function(){return"translate(0,"+(d3.select(this)[0][0].getBBox().width/2+t.viz.norm_labels.width.col)+"), rotate(-90)"}).style("font-size",function(){return t.labels.super_label_fs*t.labels.super_label_scale+"px"}).style("font-weight",300)}},function(t,e,n){var r=n(143),i=n(144),o=n(152),a=n(112);t.exports=function(t){var e=t.params,n=e.viz;d3.select(n.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 1000,-1000, L 1000,0 Z").attr("fill",n.background_color).attr("class","right_slant_triangle").attr("transform","translate("+n.clust.dim.width+","+n.norm_labels.width.col+")"),d3.select(n.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 500,-500, L 0,-500 Z").attr("fill",n.background_color).attr("class","left_slant_triangle").attr("transform","translate(-1,"+n.norm_labels.width.col+")");var s=n.clust.margin.top+n.uni_margin/5;d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",n.clust.margin.left).attr("height",s).attr("class","top_left_white");var l=n.cat_room.col+1.5*n.uni_margin;d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",2*n.clust.dim.width).attr("height",l).attr("class","top_right_white").attr("transform",function(){return"translate("+(n.clust.margin.left+n.clust.dim.width)+", "+(n.norm_labels.width.col+n.norm_labels.margin.top-n.uni_margin)+")"}),f=n.clust.margin.left+n.clust.dim.width+n.uni_margin,h=n.norm_labels.margin.top+n.norm_labels.width.col+2.5*n.uni_margin;var u=1.15*n.cat_room.symbol_width;n.show_categories.col&&d3.select(n.viz_svg).selectAll().data(n.all_cats.col).enter().append("text").classed("col_cat_super",!0).style("font-size",u+"px").style("opacity",.65).style("cursor","default").attr("transform",function(t){var e=parseInt(t.split("-")[1],10);return"translate("+f+","+(h+1.25*n.cat_room.symbol_width*e)+")"}).text(function(t){return r(n,t,"col")}),o(t),h=n.show_dendrogram?n.clust.margin.top+n.clust.dim.height+n.dendro_room.col-2*n.uni_margin:n.clust.margin.top+n.clust.dim.height;var c=d3.select(n.viz_svg).append("g").classed("bottom_spillover_container",!0).attr("transform",function(){return"translate(0,"+h+")"});c.append("rect").attr("class","bottom_spillover").attr("fill",n.background_color).attr("width",n.svg_dim.width).attr("height",2*n.svg_dim.height),f=n.clust.margin.left,h=0,c.append("g").classed("col_dendro_icons_container",!0).attr("transform","translate("+f+","+h+")").append("g").classed("col_dendro_icons_group",!0),e.viz.show_dendrogram&&a(t,"col");var f=n.clust.margin.left+n.clust.dim.width,h=n.clust.margin.top+n.clust.dim.height,d=n.cat_room.col+n.clust.dim.width,p=n.cat_room.row+10*n.uni_margin;d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",d).attr("height",p).attr("transform",function(){return"translate("+f+","+h+")"}).classed("white_bars",!0).classed("dendro_corner_spillover",!0),f=0,h=n.clust.margin.top+n.clust.dim.height,d=n.clust.margin.left,p=10*n.clust.dim.height,d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",d).attr("height",p).attr("transform",function(){return"translate("+f+","+h+")"}).classed("white_bars",!0).classed("dendro_col_spillover",!0),i(t)}},function(t,e){t.exports=function(t,e,n){return t.cat_names[n][e]===e?"Category "+(parseInt(e.split("-")[1],10)+1):t.cat_names[n][e]}},function(t,e,n){var r=n(145),i=n(3);t.exports=function(t){var e=t.params;i.each(["row","col"],function(n){e.viz.show_categories[n]&&d3.selectAll(e.root+" ."+n+"_cat_super").on("dblclick",function(){e.sim_mat&&(n="both"),d3.selectAll(e.root+" .toggle_"+n+"_order .btn").classed("active",!1);var i=this.__data__.replace("-","_")+"_index";e.viz.sim_mat?(r(t,i,"row"),r(t,i,"col")):r(t,i,n)})})}},function(t,e,n){var r=n(106),i=n(136),o=n(88),a=n(79),s=n(146),l=n(131),u=n(3);t.exports=function(t,e,n){var c,f,h=t.params,d=l(h),p=0;1==d.zoom_y&&1==d.zoom_x||(s(t,0,0,1),p=1200),"row"===n?c="col":"col"===n&&(c="row"),h.viz.run_trans=!0,"row"===c?h.viz.inst_order.row=e:"col"===c&&(h.viz.inst_order.col=e),h.viz.show_dendrogram&&r(t,n),"row"===c?h.viz.x_scale.domain(h.matrix.orders[h.viz.inst_order.row+"_row"]):"col"==c&&h.viz.y_scale.domain(h.matrix.orders[h.viz.inst_order.col+"_col"]),f=d3.selectAll(h.root+" .tile")[0].length<h.matrix.def_large_matrix?d3.select(h.root+" .viz_svg").transition().duration(2500).delay(p):d3.select(h.root+" .viz_svg");var g=h.network_data.row_nodes_names,v=h.network_data.col_nodes_names;-1===h.viz.ds_level&&(f.selectAll(".row").attr("transform",function(t){var e=u.indexOf(g,t.name);return"translate(0,"+h.viz.y_scale(e)+")"}).selectAll(".tile").attr("transform",function(t){return"translate("+h.viz.x_scale(t.pos_x)+" , 0)"}),f.selectAll(".tile_up").attr("transform",function(t){return"translate("+h.viz.x_scale(t.pos_x)+" , 0)"}),f.selectAll(".tile_dn").attr("transform",function(t){return"translate("+h.viz.x_scale(t.pos_x)+" , 0)"})),f.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(t){var e=u.indexOf(g,t.name);return"translate(0,"+h.viz.y_scale(e)+")"}),f.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",function(t){var e=u.indexOf(v,t.name);return"translate("+h.viz.x_scale(e)+") rotate(-90)"}),f.selectAll(".row_cat_group").attr("transform",function(t){var e=u.indexOf(g,t.name);return"translate(0,"+h.viz.y_scale(e)+")"}),f.selectAll(".col_cat_group").attr("transform",function(t){var e=u.indexOf(v,t.name);return"translate("+h.viz.x_scale(e)+",0)"}),h.network_data.links.forEach(function(t){t.x=h.viz.x_scale(t.target),t.y=h.viz.y_scale(t.source)}),h.zoom_info=o(),h.viz.ds_num_levels>0&&h.viz.ds_level>=0&&(a(h),i(t,!0,!0,!0)),setTimeout(function(){h.viz.run_trans=!1},2500)}},function(t,e,n){var r=n(2),i=n(147),o=n(136),a=n(88),s=n(151),l=n(3);t.exports=function(t,e,n,u){var c=t.params;if(d3.selectAll(c.viz.root_tips).style("display","none"),c.zoom_info=a(),o(t),!c.viz.run_trans){var f=c.viz.clust.dim.height/2,h=f/u;if(n>=f-h){var d=f-n,p=-f/u+d;n+=p}n<-(f-h)&&(n+=p=f/u-(d=f+n));var g,v=u,m=700,y=-(v-1)*f;d3.select(c.root+" .clust_group").transition().duration(m).attr("transform","translate("+[0,0+y]+") scale(1,"+v+")translate("+[e,n]+")"),d3.select(c.root+" .row_label_zoom_container").transition().duration(m).attr("transform","translate("+[0,y]+") scale("+v+","+v+")translate("+[0,n]+")"),d3.select(c.root+" .row_cat_container").transition().duration(m).attr("transform","translate("+[0,y]+") scale(1,"+v+")translate("+[0,n]+")"),d3.select(c.root+" .row_dendro_container").transition().duration(m).attr("transform","translate("+[0,y]+") scale(1,"+v+")translate("+[c.viz.uni_margin/2,n]+")"),l.each(["row","col"],function(t){g=d3.select(c.root+" ."+t+"_dendro_crop_buttons").style("opacity"),d3.selectAll(c.root+" ."+t+"_dendro_crop_buttons").style("opacity",0),setTimeout(w,700,t,g)}),d3.select(c.root+" .col_zoom_container").transition().duration(m).attr("transform"," scale(1,1)translate("+[e,0]+")"),d3.select(c.root+" .col_cat_container").transition().duration(m).attr("transform"," scale(1,1)translate("+[e,0]+")"),d3.select(c.root+" .col_dendro_container").transition().duration(m).attr("transform"," scale(1,1)translate("+[e,c.viz.uni_margin/2]+")");var _=c.viz.clust.margin.top+y+n*v,b=c.viz.clust.margin.left+e;c.zoom_behavior.scale(v).translate([b,_]),i(c),!1===d3.select(c.root+" .row_label_zoom_container text").empty()&&d3.select(c.root+" .row_label_zoom_container").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",.5*t.x).attr("y",0).attr("width",.5*t.width).attr("height",c.viz.y_scale.rangeBand()).style("fill","yellow")}),d3.select(c.root+" .row_dendro_icons_group").attr("transform","translate("+[0,0+y]+") scale(1,"+v+")translate("+[e,n]+")"),d3.select(c.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(t){return"translate("+c.viz.uni_margin+","+t.pos_mid+") scale(1, "+1/v+")"}),d3.select(c.root+" .col_dendro_icons_group").attr("transform",function(){return" scale(1,"+v+")"}),d3.select(c.root+" .col_dendro_icons_group").selectAll("path").attr("transform",function(t){return"translate("+t.pos_mid+","+c.viz.uni_margin+") scale(1,1)"}),r.has(c.network_data.col_nodes[0],"value")&&d3.selectAll(c.root+" .col_bars").attr("width",function(t){var e=0;return t.value>0&&(e=c.labels.bar_scale_col(t.value)/1),e}),r.has(c.network_data.row_nodes[0],"value")&&d3.selectAll(c.root+" .row_bars").transition().duration(m).attr("width",function(t){return c.labels.bar_scale_row(Math.abs(t.value))/v}).attr("x",function(t){return-c.labels.bar_scale_row(Math.abs(t.value))/v}),s(c)}function w(t,e){d3.selectAll(c.root+" ."+t+"_dendro_crop_buttons").transition().duration(m).style("opacity",e)}}},function(t,e,n){var r=n(2),i=n(148),o=n(149);t.exports=function(t){d3.selectAll(t.root+" .row_label_group").select("text").text(function(t){return r.normal_name(t)}),d3.selectAll(t.root+" .col_label_text").select("text").text(function(t){return r.normal_name(t)}),o(t),d3.selectAll(t.root+" .row_label_group").each(function(){i(t,this,"row")}),d3.selectAll(t.root+" .col_label_group").each(function(){i(t,this,"col")})}},function(t,e){t.exports=function(t,e,n){if("none"!=d3.select(e).style("display")){var r,i,o,a,s,l,u,c,f=t.viz.norm_labels.width[n];r="row"===n?t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale():t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale(),d3.select(e).select("text").each(function(t){c=t.name.length});var h=d3.select(e).select("text").node().getBBox().width;if((i=g(h,r))>f)for(u=1;u<c;u++)i>f&&(d3.select(e).select("text").text(d),h=d3.select(e).select("text").node().getBBox().width,i=g(h,r));else if(i<.75*f)for(u=1;u<c;u++)i<.75*f&&(d3.select(e).select("text").text(p),h=d3.select(e).select("text").node().getBBox().width,i=g(h,r))}function d(){return s=d3.select(this).text(),o=s.substring(0,(a=s.length)-3)+".."}function p(t){return s=d3.select(this).text(),a=".."===s.slice(-2)?s.length-2:s.length,(o=(l=t.name).substring(0,a+2)+"..").length>l.length&&(o=l),o}function g(t,e){return i=e<1?t:t*e}}},function(t,e,n){var r=n(150);t.exports=function(t){var e,n=t.labels.default_fs_row,i=r(t);i.row>3&&(i.row>t.labels.max_allow_fs?((e=t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale())<1&&(e=1),n=t.labels.max_allow_fs/e,d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",n+"px").attr("y",.5*t.viz.rect_height+.35*n)):d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",t.labels.default_fs_row+"px").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row)),i.col>3&&(i.col>t.labels.max_allow_fs?((e=t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale())<1&&(e=1),(n=t.labels.max_allow_fs/e)>.7*t.viz.rect_width&&(n=.7*t.viz.rect_width),d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",n+"px")):d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",t.labels.default_fs_col+"px"))}},function(t,e){t.exports=function(t){var e={};return t.viz.zoom_ratio.x>1?(e.row=t.labels.default_fs_row*t.zoom_behavior.scale(),e.col=t.labels.default_fs_col*t.zoom_behavior.scale()):(e.row=t.labels.default_fs_row*t.zoom_behavior.scale()/t.viz.zoom_ratio.y,e.col=t.labels.default_fs_col*t.zoom_behavior.scale()),e}},function(t,e){t.exports=function(t){t.zoom_info.zoom_x*t.viz.border_width.x>1?d3.selectAll(t.root+" .vert_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .vert_lines").select("line").style("display","none"),t.zoom_info.zoom_y*t.viz.border_width.y>1?d3.selectAll(t.root+" .horz_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .horz_lines").select("line").style("display","none")}},function(t,e,n){var r=n(143),i=n(100);t.exports=function(t){var e=t.params,n=e.viz;d3.select(e.root+" .row_cat_label_container").empty()&&(d3.select(t.params.viz.viz_svg).append("g").classed("row_cat_label_container",!0),d3.select(t.params.viz.viz_svg+" .row_cat_label_container").append("g").classed("row_cat_label_bar_container",!0));var o=1.15*n.cat_room.symbol_width;d3.select(e.root+" .row_cat_label_container").attr("transform",function(){return"translate("+(n.norm_labels.margin.left+n.norm_labels.width.row+n.cat_room.symbol_width+2.75*n.uni_margin)+","+(n.clust.margin.top-n.uni_margin)+") rotate(-90)"}),d3.selectAll(e.root+" .row_cat_label_container text").remove(),d3.selectAll(e.root+" .row_cat_selection_bar").remove(),d3.selectAll(t.params.viz.root_tips+"_row_cat_super").remove();var a=i().attr("class",function(){var t=e.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_row_cat_super"}).direction("south_custom").offset([50,-75]).style("display","none").style("opacity",0).html(function(t){var i=e.network_data.row_nodes[0][t];return i.indexOf("<p>")>-1?i.split(": ")[0]+"<p>"+i.split("<p>")[1]:r(n,t,"row")}),s=1.25*n.cat_room.symbol_width,l=.9*s;if(d3.select(e.root+" .row_cat_label_container").selectAll().data(n.all_cats.row).enter().append("text").style("width","100px").style("height",l+"px").classed("row_cat_super",!0).style("font-size",o+"px").style("opacity",.65).style("cursor","default").attr("transform",function(t){return"translate(0,"+1.25*n.cat_room.symbol_width*parseInt(t.split("-")[1],10)+")"}).text(function(t){return r(n,t,"row")}),d3.select(e.root+" .row_cat_label_container").selectAll().data(n.all_cats.row).enter().append("rect").classed("row_cat_super",!0).classed("row_cat_selection_bar",!0).style("height",l+"px").style("fill","green").style("width","120px").style("opacity",0).attr("transform",function(t){return"translate(0,"+s*(parseInt(t.split("-")[1],10)-.75)+")"}).on("mouseover",function(t){d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","block").style("opacity",1),a.show(t)}).on("mouseout",function(){a.hide(this),d3.selectAll(".d3-tip").style("display","none"),d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","none").style("opacity",0)}),!1===d3.select(e.root+" .row_cat_selection_bar").empty()&&d3.selectAll(e.root+" .row_cat_selection_bar").call(a),_.has(e.network_data,"row_cat_bars")){d3.select(e.root+" .enr_title").remove();var u=d3.select(e.root+" .viz_svg").append("g").classed("enr_title",!0).attr("transform",function(){var t=d3.select(e.root+" .row_cat_label_container").attr("transform").split("(")[1].split(")")[0],n=Number(t.split(",")[0])-10;return"translate("+String(n)+", 0)"});u.append("rect").attr("width",e.viz.cat_room.row).attr("height",25).attr("fill","white");var c=e.network_data.enrichrgram_lib.substring(0,40);u.append("text").attr("transform","translate(0, 17)").text(c.replace(/_/g," ")).style("font-size","15px").attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),d3.selectAll(e.root+" .enrichr_bars").remove();var f=e.viz.clust.margin.top-35,h=e.network_data.row_cat_bars[0],d=d3.scale.linear().domain([0,h]).range([0,f]);d3.select(e.root+" .row_cat_label_bar_container").selectAll().data(e.network_data.row_cat_bars).enter().append("rect").classed("enrichr_bars",!0).attr("height",l+"px").attr("fill","red").attr("width",function(t){return d(t)+"px"}).attr("opacity",.4).attr("transform",function(t,e){return"translate(0, "+s*(e-.75)+")"})}}},function(t,e,n){var r=n(154);t.exports=function(t){var e=t.params;d3.select(e.root+" .expand_button").on("click",null),(d3.select(e.root+" .expand_button").empty()?d3.select(e.viz.viz_svg).append("text").attr("class","expand_button"):d3.select(e.root+" .expand_button")).attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-family","FontAwesome").attr("font-size","30px").text(function(){return!1===e.viz.is_expand?"\uf0b2":"\uf0c9"}).attr("y","25px").attr("x","25px").style("cursor","pointer").style("opacity",.4).on("mouseover",function(){d3.select(this).style("opacity",.75)}).on("mouseout",function(){d3.select(this).style("opacity",.4)}).on("click",function(){!1===e.viz.is_expand?(d3.select(this).text(function(){return"\uf0c9"}),e.viz.is_expand=!0,d3.selectAll(e.root+" .borders").style("fill","white"),d3.select(e.root+" .sidebar_wrapper").style("display","none")):(d3.select(this).text(function(){return"\uf0b2"}),e.viz.is_expand=!1,d3.selectAll(e.root+" .borders").style("fill","#eee"),d3.select(e.root+" .viz_wrapper").style("width","100px"),d3.select(e.root+" .sidebar_wrapper").style("display","block")),d3.select(e.viz.viz_svg).style("opacity",.5);var n=500;1==e.viz.run_trans&&(n=2500),setTimeout(r,n,t)})}},function(t,e,n){var r=n(2),i=n(155),o=n(163),a=n(164),s=n(165),l=n(166),u=n(167),c=n(168),f=n(169),h=n(170),d=n(171),p=n(172),g=n(173),v=n(174),m=n(175),y=n(176),_=n(177),b=n(178),w=n(147),x=n(107),k=n(106),E=n(136),z=n(70),A=n(179),C=n(152),S=n(144),T=n(180),M=n(181),N=n(182),D=n(183),I=n(88),O=n(184),L=n(3);t.exports=function(t){var e=t.params,n=z(e);d3.select(e.root+" .play_button"),d3.select(e.root+" .sidebar_wrapper").style("height",n.height+"px"),d3.select(e.viz.viz_wrapper).style("margin-top",n.top+"px").style("width",n.width+"px").style("height",n.height+"px"),(e=y(e)).zoom_info=I(),a(e);var P=d3.select(e.viz.viz_svg);L.each(e.network_data.links,function(t){t.x=e.viz.x_scale(t.target),t.y=e.viz.y_scale(t.source)}),P.on(".zoom",null),e.zoom_behavior.scaleExtent([1,e.viz.square_zoom*e.viz.zoom_ratio.x]).on("zoom",function(){i(t)}),e.viz.do_zoom&&P.call(e.zoom_behavior),o(t),P.attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height),P.select(".super_background").style("width",e.viz.svg_dim.width).style("height",e.viz.svg_dim.height),P.select(".grey_background").attr("width",e.viz.clust.dim.width).attr("height",e.viz.clust.dim.height),setTimeout(A,100,e);var B=r.pluck(e.network_data.row_nodes,"name");_(e,P),P.selectAll(".highlighting_rect").attr("width",.8*e.viz.x_scale.rangeBand()).attr("height",.8*e.viz.y_scale.rangeBand()),h(e),f(e,P),d(e,P),P.selectAll(".row_label_group").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",e.viz.rect_height).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),P.selectAll(".row_label_group").select("text").attr("y",.5*e.viz.rect_height+.35*e.labels.default_fs_row),r.has(e.network_data.row_nodes[0],"value")&&b(t,P),P.selectAll(".row_cat_group").attr("transform",function(t){var n=L.indexOf(B,t.name);return"translate(0, "+e.viz.y_scale(n)+")"}),P.selectAll(".row_cat_group").select("path").attr("d",function(){return"M "+(e.viz.cat_room.symbol_width-1)+",0 L 1,"+e.viz.rect_height/2+" L "+(e.viz.cat_room.symbol_width-1)+","+e.viz.rect_height+" Z"}),e.viz.show_dendrogram?(x(t,"row",!0),x(t,"col",!0),s(e,P),k(t,"row",0),k(t,"col",0)):s(e,P),p(e,P),g(e,P),v(e,P),m(e,P),l(e,P),u(e.viz,P),O(e),c(e,P),e.zoom_behavior.scale(1).translate([e.viz.clust.margin.left,e.viz.clust.margin.top]),w(e),d3.select(e.root+" .clust_container").attr("transform","translate("+e.viz.clust.margin.left+","+e.viz.clust.margin.top+")"),-1===t.params.viz.ds_level&&E(t),C(t),d3.select(e.viz.viz_svg).style("opacity",1),S(t),d3.select(t.params.root+" .row_slider_group").style("opacity",0),d3.select(t.params.root+" .col_slider_group").style("opacity",0),setTimeout(T,500,t,"row"),setTimeout(T,500,t,"col"),setTimeout(M,500,t),setTimeout(D,500,t),setTimeout(N,500,t)}},function(t,e,n){var r=n(156),i=n(161),o=n(162);t.exports=function(t){var e=t.params,n={};n.zoom_x=d3.event.scale,n.zoom_y=d3.event.scale,n.trans_x=e.zoom_behavior.translate()[0]-e.viz.clust.margin.left,n.trans_y=e.zoom_behavior.translate()[1]-e.viz.clust.margin.top,d3.selectAll(e.viz.root_tips).style("display","none"),e.zoom_info=i(e,n),e.zoom_info=o(e,n),!1===e.is_slider_drag&&!1===e.is_cropping&&(e.zoom_behavior.translate([e.zoom_info.trans_x+e.viz.clust.margin.left,e.zoom_info.trans_y+e.viz.clust.margin.top]),t.params=e,r(t))}},function(t,e,n){var r=n(149),i=n(136),o=n(157),a=n(114),s=n(131),l=n(158),u=n(160);t.exports=function(t){var e=t.params,n=e.zoom_info,c=s(e);if(d3.select(e.root+" .clust_group").attr("transform","translate("+[n.trans_x,n.trans_y]+") scale("+n.zoom_x+","+n.zoom_y+")"),d3.select(e.root+" .row_label_zoom_container").attr("transform","translate("+[0,n.trans_y]+") scale("+n.zoom_y+")"),d3.select(e.root+" .col_zoom_container").attr("transform","translate("+[n.trans_x,0]+") scale("+n.zoom_x+")"),d3.select(e.root+" .row_cat_container").attr("transform","translate("+[0,n.trans_y]+") scale( 1,"+n.zoom_y+")"),d3.select(e.root+" .row_dendro_container").attr("transform","translate("+[e.viz.uni_margin/2,n.trans_y]+") scale( 1,"+n.zoom_y+")"),d3.select(e.root+" .row_dendro_icons_group").attr("transform",function(){return"translate("+[0,n.trans_y]+") scale(1, "+n.zoom_y+")"}),d3.select(e.root+" .col_dendro_icons_group").attr("transform",function(){return"translate("+[n.trans_x,0]+")scale("+n.zoom_x+", 1)"}),a(e,n,"row"),a(e,n,"col"),d3.select(e.root+" .col_cat_container").attr("transform","translate("+[n.trans_x,0]+") scale("+n.zoom_x+",1)"),d3.select(e.root+" .col_dendro_container").attr("transform","translate("+[n.trans_x,e.viz.uni_margin/2]+") scale("+n.zoom_x+",1)"),o(e,n),d3.select(e.root+" .viz_svg").attr("is_zoom",function(){var t=Number(d3.select(e.root+" .viz_svg").attr("is_zoom"));return d3.select(e.root+" .viz_svg").attr("stopped_zoom",1),t+1}),r(e),n.zoom_y<=c.zoom_y){var f=!1;n.zoom_y<c.zoom_y&&(f=!0),i(t,!1,f)}setTimeout(function(){d3.select(e.root+" .viz_svg").attr("is_zoom",function(){return Number(d3.select(e.root+" .viz_svg").attr("is_zoom"))-1})},50),setTimeout(function(t){!0===u(t.params)&&setTimeout(l,50,t)},100,t)}},function(t,e,n){var r=n(2);t.exports=function(t){var e=t.zoom_info;r.has(t.network_data.row_nodes[0],"value")&&d3.selectAll(t.root+" .row_bars").attr("width",function(n){return t.labels.bar_scale_row(Math.abs(n.value))/e.zoom_y}).attr("x",function(n){return-t.labels.bar_scale_row(Math.abs(n.value))/e.zoom_y}),r.has(t.network_data.col_nodes[0],"value")&&d3.selectAll(t.root+" .col_bars").attr("width",function(n){var r=0;return n.value>0&&(r=t.labels.bar_scale_col(n.value)/e.zoom_x),r})}},function(t,e,n){var r=n(149),i=n(148),o=n(159),a=n(151),s=n(136),l=n(160),u=n(3);t.exports=function(t){var e=t.params;function n(){u.each(["row","col"],function(t){d3.selectAll(e.root+" ."+t+"_label_group").filter(function(){return"none"!=d3.select(this).style("display")}).select("text").style("font-size",function(){return Number(d3.select(this).style("font-size").replace("px",""))})})}!0===l(e)&&(u.each(["row","col"],function(t){d3.selectAll(e.root+" ."+t+"_label_group").select("text").style("opacity",1),d3.selectAll(e.root+" ."+t+"_cat_group").select("path").style("display","block")}),s(t,!0),d3.selectAll(e.viz.root_tips).style("display","block"),d3.selectAll(e.root+" .row_label_group").select("text").style("display","none"),d3.selectAll(e.root+" .row_label_group").select("text").style("display","block"),d3.select(e.root+" .viz_svg").attr("stopped_zoom",0),d3.selectAll(e.root+" .row_label_group").select("text").style("display","block"),d3.selectAll(e.root+" .col_label_group").select("text").style("display","block"),a(e),t.params.viz.x_offset=0,u.each(["row","col"],function(t){o(e,t)<150&&d3.selectAll(e.root+" ."+t+"_label_group").each(function(){i(e,this,t)})}),n(),r(e),setTimeout(n,100))}},function(t,e){t.exports=function(t,e){var n;return"row"===e?(n=1e4,-1===t.viz.ds_level&&(n=d3.selectAll(t.root+" .row")[0].length)):"col"===e&&(n=d3.selectAll(t.root+" ."+e+"_label_text").filter(function(){return"none"!=d3.select(this).style("display")})[0].length),n}},function(t,e){t.exports=function(t){var e=Number(d3.select(t.root+" .viz_svg").attr("is_zoom")),n=Number(d3.select(t.root+" .viz_svg").attr("stopped_zoom")),r=!1;return 0===e&&0!=n&&(r=!0),r}},function(t,e){t.exports=function(t,e){var n=t.viz;return n.zoom_ratio.y>1&&(e.zoom_y<n.zoom_ratio.y?(e.trans_y=0,e.zoom_y=1):e.zoom_y=e.zoom_y/n.zoom_ratio.y),e.pan_room_y=(e.zoom_y-1)*n.clust.dim.height,e.trans_y>=0?e.trans_y=0:e.trans_y<=-e.pan_room_y&&(e.trans_y=-e.pan_room_y),e}},function(t,e){t.exports=function(t,e){var n=t.viz;return n.zoom_ratio.x>1&&(e.zoom_x=e.zoom_x<n.zoom_ratio.x?1:e.zoom_x/n.zoom_ratio.x),e.pan_room_x=(e.zoom_x-1)*n.clust.dim.width,e.trans_x>0?e.trans_x=0:e.trans_x<=-e.pan_room_x&&(e.trans_x=-e.pan_room_x),e}},function(t,e,n){var r=n(146);t.exports=function(t){var e=t.params;d3.selectAll(e.viz.zoom_element).on("dblclick.zoom",null),d3.select(e.viz.zoom_element).on("dblclick",function(){r(t,0,0,1)})}},function(t,e){t.exports=function(t){var e=t.viz.clust.dim.height/2*-0;d3.select(t.root+" .clust_group").attr("transform","translate("+[0,0+e]+") scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .row_label_zoom_container").attr("transform","translate("+[0,e]+") scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .row_cat_container").attr("transform","translate("+[0,e]+") scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .row_dendro_container").attr("transform","translate("+[0,e]+") scale(1,1)translate("+[t.viz.uni_margin/2,0]+")"),d3.select(t.root+" .col_zoom_container").attr("transform"," scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .col_cat_container").attr("transform"," scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .col_dendro_container").attr("transform"," scale(1,1)translate("+[0,t.viz.uni_margin/2]+")"),d3.select(t.root+" .row_dendro_icons_group").attr("transform",function(){return"translate(0,0) scale(1)"}),d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(t){return"translate(7,"+t.pos_mid+") scale(1, 1)"})}},function(t,e,n){var r=n(3);t.exports=function(t,e,n=!1){var i={};!1===n?i.run_transition=!1:i=n;var o,a,s,l=t.viz.duration,u=t.network_data.col_nodes,c=t.network_data.col_nodes_names;i.run_transition?(o=e.transition().delay(i.update).duration(l),e.selectAll(".col_cat_group").data(u,function(t){return t.name}).transition().delay(i.update).duration(l).attr("transform",function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"}),e.selectAll(".col_dendro_group").data(u,function(t){return t.name}).transition().delay(i.update).duration(l).attr("transform",function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"})):(o=e,e.selectAll(".col_cat_group").data(u,function(t){return t.name}).attr("transform",function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"}),d3.select(t.root).selectAll(".col_dendro_group").data(u,function(t){return t.name}).attr("transform",function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"})),r.each(["row","col"],function(e){var n=t.viz.all_cats[e].length;for(a=0;a<n;a++)s="."+e+"_cat_rect_"+String(a),"row"===e?o.selectAll(s).attr("height",t.viz.y_scale.rangeBand()):o.selectAll(s).attr("width",t.viz.x_scale.rangeBand())});var f=t.viz.clust.margin.left+t.viz.clust.dim.width,h=t.viz.clust.margin.top,d=t.viz.dendro_room.row+t.viz.uni_margin;d3.select(t.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+f+","+h+")"),d3.select(t.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",d+"px").attr("height",t.viz.svg_dim.height),f=t.viz.clust.margin.left,h=t.viz.clust.margin.top+t.viz.clust.dim.height;var p=t.viz.dendro_room.col+t.viz.uni_margin;d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",t.viz.svg_dim.width).attr("height",p+"px"),d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover_top").attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,"+t.viz.dendro_room.col+")"),f=t.viz.clust.margin.left,h=0,d3.select(t.root+" .col_dendro_icons_container").attr("transform","translate("+f+","+h+")")}},function(t,e){t.exports=function(t,e,n=!1){var r,i={},o=t.viz.duration;!1===n?i.run_transition=!1:i=n,(r=i.run_transition?e.transition().delay(i.update).duration(o):e).select(".super_col_bkg").attr("height",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.grey_border_width+")"),r.select(".super_col").attr("transform",function(){return"translate("+(t.viz.clust.dim.width/2+t.viz.norm_labels.width.row)+","+t.viz.super_labels.dim.width+")"}),r.select(".super_row_bkg").attr("width",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.grey_border_width+",0)"),r.select(".super_row").attr("transform",function(){return"translate("+t.viz.super_labels.dim.width+","+(t.viz.clust.dim.height/2+t.viz.norm_labels.width.col)+")"})}},function(t,e){t.exports=function(t,e,n=!1){var r,i={},o=t.duration;!1===n?i.run_transition=!1:i=n,(r=i.run_transition?e.transition().delay(i.update).duration(o):e).select(t.root+" .right_slant_triangle").attr("transform","translate("+t.clust.dim.width+","+t.norm_labels.width.col+")"),r.select(t.root+" .left_slant_triangle").attr("transform","translate(-1,"+t.norm_labels.width.col+")");var a=t.clust.margin.top+t.uni_margin/5;r.select(t.root+" .top_left_white").attr("width",t.clust.margin.left).attr("height",a);var s,l=t.clust.margin.left+t.clust.dim.width+t.uni_margin+t.dendro_room.row;r.select(t.root+" .right_spillover_container").attr("transform",function(){return"translate("+l+", 0)"}),s=t.norm_labels.margin.top+t.norm_labels.width.col,r.select(t.root+" .right_spillover_container rect").attr("transform",function(){return"translate( 0,"+s+")"}),r.select(t.root+" .right_spillover").attr("height",t.svg_dim.height+"px");var u=t.clust.margin.left+t.clust.dim.width,c=s,f=t.dendro_room.row+t.uni_margin,h=t.cat_room.col+t.uni_margin;d3.select(t.root+" .dendro_row_spillover").attr("width",f).attr("height",h).attr("transform",function(){return"translate("+u+","+c+")"}),u=0,c=t.clust.margin.top+t.clust.dim.height,f=t.clust.margin.left,h=10*t.clust.dim.height,r.select(".dendro_col_spillover").attr("width",f).attr("height",h).attr("transform",function(){return"translate("+u+","+c+")"}),u=t.clust.margin.left+t.clust.dim.width,c=t.clust.margin.top+t.clust.dim.height,f=t.cat_room.col+t.clust.dim.width,h=t.cat_room.row+t.uni_margin,r.select(".dendro_corner_spillover").attr("width",f).attr("height",h).attr("transform",function(){return"translate("+u+","+c+")"}),u=t.clust.margin.left+t.clust.dim.width+t.uni_margin,c=t.norm_labels.margin.top+t.norm_labels.width.col+2.5*t.uni_margin,t.show_categories.col&&d3.selectAll(t.root+" .col_cat_super").attr("transform",function(e){var n=parseInt(e.split("-")[1],10);return"translate("+u+","+(c+1.2*t.cat_room.symbol_width*n)+")"}),t.show_categories.row&&d3.select(t.root+" .row_cat_label_container").attr("transform",function(){return"translate("+(u=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.symbol_width+2.75*t.uni_margin)+","+(c=t.clust.margin.top-t.uni_margin)+") rotate(-90)"}),c=t.show_dendrogram?t.clust.margin.top+t.clust.dim.height+t.dendro_room.col-2*t.uni_margin:t.clust.margin.top+t.clust.dim.height,d3.select(t.root+" .bottom_spillover_container").attr("transform",function(){return"translate(0,"+c+")"}),r.select(t.root+" .bottom_spillover").attr("width",t.svg_dim.width).attr("height",2*t.svg_dim.height);var d=t.cat_room.col+1.5*t.uni_margin;d3.select(t.viz_svg+" .top_right_white").attr("fill",t.background_color).attr("width",2*t.clust.dim.width).attr("height",d).attr("transform",function(){return"translate("+(t.clust.margin.left+t.clust.dim.width)+", "+(t.norm_labels.width.col+t.norm_labels.margin.top-t.uni_margin)+")"})}},function(t,e){t.exports=function(t,e){e.select(".left_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,0)"),e.select(".right_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform",function(){return"translate("+(t.viz.svg_dim.width-t.viz.grey_border_width)+",0)"}),e.select(".top_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){return"translate(0,0)"}),e.select(".bottom_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){return"translate(0,"+(t.viz.svg_dim.height-t.viz.grey_border_width)+")"})}},function(t,e,n){var r=n(3);t.exports=function(t,e,n=!1){var i,o={},a=t.viz.duration,s=t.network_data.row_nodes,l=t.network_data.row_nodes_names;!1===n?o.run_transition=!1:o=n,o.run_transition?(e.selectAll(".row_label_group").data(s,function(t){return t.name}).transition().delay(o.update).duration(a).attr("transform",function(e){var n=r.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(n)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),i=e.transition().delay(o.update).duration(a)):(e.selectAll(".row_label_group").data(s,function(t){return t.name}).attr("transform",function(e){var n=r.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(n)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),i=e),i.select(t.root+" .row_container").attr("transform","translate("+t.viz.norm_labels.margin.left+","+t.viz.clust.margin.top+")"),i.select(t.root+" .row_container").select(".white_bars").attr("width",t.viz.label_background.row).attr("height",30*t.viz.clust.dim.height+"px"),i.select(t.root+" .row_container").select(".row_label_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)")}},function(t,e){t.exports=function(t){var e=6*t.viz.border_width.x,n=6*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.rect_width).attr("height",n).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",e).attr("height",t.viz.rect_width-.99*n).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"}),d3.select(t.root+" .right_hlight").attr("width",e).attr("height",t.viz.rect_height-.99*n).attr("transform",function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.rect_width-e)+","+.99*n+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.rect_width-1.98*e}).attr("height",n).attr("transform",function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+.99*e)+","+(t.viz.rect_height-n)+")"}),d3.select(t.root+" .row_top_hlight").attr("width",t.viz.svg_dim.width).attr("height",n),d3.select(t.root+" .row_bottom_hlight").attr("width",t.viz.svg_dim.width).attr("height",n).attr("transform",function(){return"translate(0,"+(t.viz.rect_height-n)+")"}),d3.select(t.root+" .col_top_hlight").attr("width",t.viz.clust.dim.height).attr("height",e).attr("transform",function(){return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+",0)"}),d3.select(t.root+" .col_bottom_hlight").attr("width",t.viz.clust.dim.height).attr("height",e).attr("transform",function(){return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+","+(t.viz.rect_width-e)+")"})}},function(t,e){t.exports=function(t,e,n=!1){var r,i={},o=t.viz.duration;!1===n?i.run_transition=!1:i=n,(r=i.run_transition?e.transition().delay(i.update).duration(o):e).select(".row_cat_outer_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)").select("white_bars").attr("width",t.viz.cat_room.row+"px").attr("height",function(){return t.viz.clust.dim.height});var a=t.viz.clust.margin.left+t.viz.clust.dim.width,s=t.viz.clust.margin.top;r.select(".row_dendro_outer_container").attr("transform","translate("+a+","+s+")"),a=t.viz.clust.margin.left,s=t.viz.clust.margin.top+t.viz.clust.dim.height,r.select(" .col_dendro_outer_container").attr("transform",function(){return"translate("+a+","+s+")"})}},function(t,e,n){var r=n(3);t.exports=function(t,e,n=!1){var i,o={},a=t.viz.duration,s=t.network_data.col_nodes,l=t.network_data.col_nodes_names;!1===n?o.run_transition=!1:o=n,o.run_transition?(i=e.transition().delay(o.update).duration(a),e.selectAll(".col_label_text").data(s,function(t){return t.name}).transition().delay(o.update).duration(a).attr("transform",function(e){var n=r.indexOf(l,e.name);return"translate("+t.viz.x_scale(n)+", 0) rotate(-90)"})):(i=e,e.selectAll(".col_label_text").data(s,function(t){return t.name}).attr("transform",function(e){var n=r.indexOf(l,e.name);return"translate("+t.viz.x_scale(n)+", 0) rotate(-90)"}));var u=t.viz.x_scale.rangeBand()/2+t.viz.border_width.x;i.select(t.root+" .col_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.norm_labels.margin.top+")"),i.select(t.root+" .col_container").select(".white_bars").attr("width",30*t.viz.clust.dim.width+"px").attr("height",t.viz.label_background.col),i.select(t.root+" .col_container").select(".col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),i.selectAll(".col_label_group").attr("transform","translate("+t.viz.x_scale.rangeBand()/2+","+u+") rotate(45)"),i.selectAll(".col_label_group").select("text").attr("y",.6*t.viz.x_scale.rangeBand()).attr("dx",2*t.viz.border_width.x)}},function(t,e,n){var r=n(2);t.exports=function(t,e){e.selectAll(".col_label_group").select("text").style("font-size",t.labels.default_fs_col+"px").text(function(t){return r.normal_name(t)}),e.selectAll(".col_label_group").each(function(){d3.select(this).select("text")[0][0].getBBox()})}},function(t,e,n){var r=n(140);t.exports=function(t,e,n=!1){var i=e.selectAll(".col_label_group").select("path"),o={},a=t.viz.duration;!1===n?o.run_transition=!1:o=n,(o.run_transition?i.transition().delay(o.update).duration(a):i).attr("d",function(){return r(t)}).attr("fill","#eee")}},function(t,e,n){var r=n(2);t.exports=function(t,e,n=!1){var i={};!1===n?i.run_transition=!1:i=n,r.has(t.network_data.col_nodes[0],"value")&&e.selectAll(".col_bars").data(t.network_data.col_nodes,function(t){return t.name}).attr("width",function(e){var n=0;return e.value>0&&(n=t.labels.bar_scale_col(e.value)),n}).attr("height",.66*t.viz.rect_width)}},function(t,e,n){var r=n(71),i=n(74),o=n(73),a=n(83),s=n(82),l=n(3);t.exports=function(t){if((t=r(t)).viz=o(t.viz),t.viz=i(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t.viz=s(t.viz),t.viz.x_scale.rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale.rangeBands([0,t.viz.clust.dim.height]),t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,null!=t.viz.ds)for(var e;e<t.viz.ds.length;e++)t.viz.ds[e].rect_height=t.viz.ds[e].y_scale.rangeBand()-t.viz.border_width.y;return t.viz.ds_num_levels>0&&l.each(t.viz.ds,function(e){e.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),e.y_scale.domain(d3.range(e.num_rows+1)),e.rect_height=e.y_scale.rangeBand()-t.viz.border_width.y}),t.viz.square_zoom=t.viz.norm_labels.width.col/(t.viz.rect_width/2),t=a(t)}},function(t,e,n){var r=n(95),i=n(96),o=n(99),a=n(3);t.exports=function(t,e){var n=t.network_data.row_nodes_names;if(-1===t.viz.ds_level)e.selectAll(".row").attr("transform",function(e){var r=a.indexOf(n,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),e.selectAll(".row").selectAll(".tile").attr("transform",function(e){return o(t,e)}).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height),e.selectAll(".row").selectAll(".tile_up").attr("d",function(){return r(t)}).attr("transform",function(e){return o(t,e)}),e.selectAll(".row").selectAll(".tile_dn").attr("d",function(){return i(t)}).attr("transform",function(e){return o(t,e)});else{var s=t.viz.ds_level,l=".ds"+String(s)+"_row",u=t.viz.ds[s].rect_height;e.selectAll(l).attr("transform",function(e){return"translate(0,"+t.viz.ds[s].y_scale(e.row_index)+")"}),e.selectAll(l).selectAll(".tile").attr("transform",function(e){return o(t,e)}).attr("width",t.viz.rect_width).attr("height",u)}}},function(t,e,n){var r=n(75);t.exports=function(t,e){var n=t.params;n=r(n),e.selectAll(".row_bars").attr("width",function(t){return n.labels.bar_scale_row(Math.abs(t.value))}).attr("x",function(t){return-n.labels.bar_scale_row(Math.abs(t.value))}).attr("height",n.viz.y_scale.rangeBand())}},function(t,e){t.exports=function(t){var e=d3.select(t.root+" .clust_container").attr("transform"),n=Number(e.split("(")[1].split(",")[0]),r=Number(e.split(",")[1].replace(")","")),i=n+t.viz.clust.dim.width/2,o=r+t.viz.clust.dim.height/2;d3.select(t.root+" .play_button").attr("transform",function(){return"translate("+i+","+o+")"})}},function(t,e){t.exports=function(t,e="row"){var n,r,i=t.params.viz;if("row"===e){var o=i.svg_dim.width-3*i.uni_margin;(n=i.clust.margin.left+i.clust.dim.width+5.25*i.dendro_room.row+2)>o&&(n=o),r=i.clust.margin.top+3*i.uni_margin+30}else n=2*i.uni_margin,r=i.clust.margin.top+i.clust.dim.height+i.dendro_room.col-2*i.uni_margin;d3.select(t.params.root+" ."+e+"_slider_group").attr("transform",function(){return"row"===e?"translate("+(n+=.8*i.dendro_room.row)+","+r+")":"translate("+n+","+r+"), rotate(-90)"}).style("opacity",1)}},function(t,e){t.exports=function(t){var e,n,r=t.params.viz,i=r.svg_dim.width-3*r.uni_margin;(e=r.clust.margin.left+r.clust.dim.width+5.25*r.dendro_room.row)>i&&(e=i),n=r.clust.margin.top+3*r.uni_margin+90,d3.select(t.params.root+" .tree_icon").attr("transform",function(){return"translate("+e+","+(n-=75)+")"}).style("opacity",1)}},function(t,e){t.exports=function(t){var e,n,r=t.params.viz,i=r.svg_dim.width-3*r.uni_margin;(e=r.clust.margin.left+r.clust.dim.width+4*r.dendro_room.row+7)>i&&(e=i),n=r.clust.margin.top+3*r.uni_margin+152,d3.select(t.params.root+" .filter_icon").attr("transform",function(){return"translate("+e+","+(n-=75)+")"}).style("opacity",1)}},function(t,e){t.exports=function(t){var e=t.params;if(!1===d3.select(e.root+" .tree_menu").empty()){var n=t.params.viz.tree_menu_width;d3.select(e.root+" .tree_menu").attr("transform",function(){var t={};return t.x=e.viz.clust.dim.width+e.viz.clust.margin.left-n+30,t.y=e.viz.clust.margin.top+15,"translate("+t.x+", "+t.y+")"})}}},function(t,e){t.exports=function(t,e=0){var n=0;e>0&&(n=2e3);var r=d3.selectAll(t.root+" .horz_lines"),i=d3.selectAll(t.root+" .vert_lines");r.style("opacity",0).attr("transform",function(e){return"translate(  0,"+t.viz.y_scale(e.row_index)+") rotate(0)"}).transition().duration(e).delay(n).style("opacity",1),r.append("line").attr("x1",0).attr("x2",t.viz.clust.dim.width).style("stroke-width",function(){return t.viz.border_width.y+"px"}),i.style("opacity",0).attr("transform",function(e){return"translate("+t.viz.x_scale(e.col_index)+") rotate(-90)"}).transition().duration(e).delay(n).style("opacity",1),i.append("line").attr("x1",0).attr("x2",-t.viz.clust.dim.height).style("stroke-width",function(){return t.viz.border_width.x+"px"})}},function(t,e,n){var r=n(186),i=n(100),o=n(187),a=n(188),s=n(189),l=n(3);t.exports=function(t){var e=t.params;d3.select(e.root+" .col_cat_outer_container").empty()?d3.select(e.root+" .col_container").append("g").attr("class","col_cat_outer_container").attr("transform",function(){return"translate(0,"+(e.viz.norm_labels.width.col+2)+")"}).append("g").attr("class","col_cat_container"):d3.select(e.root+" .col_container").select("col_cat_outer_container").attr("transform",function(){return"translate(0,"+(e.viz.norm_labels.width.col+2)+")"}),d3.selectAll(e.viz.root_tips+"_col_cat_tip").remove();var n=i().attr("class",function(){var t=e.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_col_cat_tip"}).direction("s").offset([5,0]).style("display","none").html(function(t){return r(e,t,this,"col")});d3.select(e.root+" .col_cat_container").selectAll("g").data(e.network_data.col_nodes,function(t){return t.name}).enter().append("g").attr("class","col_cat_group").attr("transform",function(t){var n=l.indexOf(e.network_data.col_nodes_names,t.name);return"translate("+e.viz.x_scale(n)+",0)"}),d3.select(e.root+" .col_cat_container").selectAll(".col_cat_group").call(n),d3.selectAll(e.root+" .col_cat_group").each(function(){var t,r=this;l.each(e.viz.all_cats.col,function(i){var l=parseInt(i.split("-")[1],10),u="col_cat_rect_"+String(l);(t=d3.select(r).select("."+u).empty()?d3.select(r).append("rect").attr("class",u).attr("cat",i).attr("transform",function(){return"translate(0,"+l*(e.viz.cat_room.symbol_width+e.viz.cat_room.separation)+")"}).on("click",function(t){if(d3.select(this).classed("cat_strings")){var n=s(e,t,this,"col");$(e.root+" .dendro_info").modal("toggle");var r=n.join(", ");d3.select(e.root+" .dendro_info input").attr("value",r)}}):d3.select(r).select("."+u)).attr("width",e.viz.x_scale.rangeBand()).attr("height",e.viz.cat_room.symbol_width).style("fill",function(t){return e.viz.cat_colors.col[i][t[i]]}).on("mouseover",n.show).on("mouseout",function(){n.hide(this),o(e),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")}),a(e.viz,"col",t,i)})})}},function(t,e,n){var r=n(143),i=n(3);t.exports=function(t,e,n,o){d3.selectAll(t.viz.root_tips+"_col_cat_tip").style("display","block"),d3.selectAll(t.viz.root_tips+"_row_cat_tip").style("display","block");var a=d3.select(n).attr("cat"),s=r(t.viz,a,o),l=e[a];"string"==typeof l&&l.indexOf(": ")>=0&&(l=l.split(": ")[1]);var u="<div>"+s+": "+l+"</div> <div> <br>Click for Category Menu </div>";return d3.select(n).classed("hovering",!0),setTimeout(function(){var e=!1;if(d3.select(n).classed("hovering")){var r=[o];t.viz.sim_mat&&(r=["row","col"]),i.each(r,function(n){"string"==typeof l&&l.indexOf("Not ")<0&&"false"!=l&&(e=!0),e&&d3.selectAll(t.root+" ."+n+"_cat_group").selectAll("rect").style("opacity",function(e){var n=d3.select(this).style("opacity");if(d3.select(this).classed("cat_strings")&&!1===d3.select(this).classed("filtered_cat")){var r,i=d3.select(this).attr("cat");r=e[i].indexOf(": ")>=0?e[i].split(": ")[1]:e[i],n=i===a&&r===l?t.viz.cat_colors.active_opacity:t.viz.cat_colors.opacity/4}return n})})}},500),u}},function(t,e,n){var r=n(3);t.exports=function(t){r.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_cat_group").selectAll("rect").style("opacity",function(){var e=d3.select(this).style("opacity");return d3.select(this).classed("cat_strings")&&!1===d3.select(this).classed("filtered_cat")&&(e=t.viz.cat_colors.opacity),e})})}},function(t,e){t.exports=function(t,e,n,r,i=!1){var o=": ";function a(t){return"string"==typeof t&&t.indexOf(o)>-1&&(t=t.split(o)[1]),parseFloat(t)}"cat_strings"===t.cat_info[e][r].type?i?n.classed("cat_strings",!0).style("opacity",0).transition().duration(1e3).style("opacity",t.cat_colors.opacity):n.classed("cat_strings",!0).style("opacity",t.cat_colors.opacity):n.classed("cat_values",!0).style("opacity",function(n){var i=a(n[r]);return t.cat_info[e][r].cat_scale(Math.abs(i))}).style("fill",function(e){return a(e[r])>0?t.cat_value_colors[0]:t.cat_value_colors[1]})}},function(t,e,n){var r=n(2),i=n(3);t.exports=function(t,e,n,o){var a=d3.select(n).attr("cat"),s=e[a],l=i.filter(t.network_data[o+"_nodes"],function(t){return t[a]==s});return r.pluck(l,"name")}},function(t,e,n){var r=n(186),i=n(100),o=n(187),a=n(188),s=n(189),l=n(3);t.exports=function(t,e=!1){var n=t.params;d3.select(n.root+" .row_cat_outer_container").empty()?d3.select(n.root+" .row_container").append("g").attr("class","row_cat_outer_container").attr("transform","translate("+n.viz.norm_labels.width.row+",0)").append("g").attr("class","row_cat_container"):d3.select(n.root+" .row_container").select("row_cat_outer_container").attr("transform","translate("+n.viz.norm_labels.width.row+",0)"),d3.select(n.root+" .row_cat_container").select(".white_bars").empty()?d3.select(n.root+" .row_cat_container").append("rect").attr("class","white_bars").attr("fill",n.viz.background_color).attr("width",n.viz.cat_room.row+"px").attr("height",function(){return n.viz.clust.dim.height}):d3.select(n.root+" .row_cat_container").select(".white_bars").attr("fill",n.viz.background_color).attr("width",n.viz.cat_room.row+"px").attr("height",function(){return n.viz.clust.dim.height}),d3.selectAll(n.viz.root_tips+"_row_cat_tip").remove();var u,c,f=i().attr("class",function(){var t=n.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_row_cat_tip"}).direction("e").offset([5,0]).style("display","none").html(function(t){return r(n,t,this,"row")});d3.select(n.root+" .row_cat_container").selectAll("g").data(n.network_data.row_nodes,function(t){return t.name}).enter().append("g").attr("class","row_cat_group").attr("transform",function(t){var e=l.indexOf(n.network_data.row_nodes_names,t.name);return"translate(0, "+n.viz.y_scale(e)+")"}),d3.select(n.root+" .row_cat_container").selectAll(".row_cat_group").call(f),d3.selectAll(n.root+" .row_cat_group rect").remove(),n.viz.show_categories.row&&d3.selectAll(n.root+" .row_cat_group").each(function(){c=this,l.each(n.viz.all_cats.row,function(t){var r=parseInt(t.split("-")[1],10),i="row_cat_rect_"+String(r);(u=d3.select(c).select("."+i).empty()?d3.select(c).append("rect").attr("class",i).attr("cat",t):d3.select(c).select("."+i)).attr("width",n.viz.cat_room.symbol_width).attr("height",n.viz.y_scale.rangeBand()).style("fill",function(e){return n.viz.cat_colors.row[t][e[t]]}).attr("x",function(){return n.viz.cat_room.symbol_width+n.viz.uni_margin/2+"px"}).attr("transform",function(){return"translate("+r*(n.viz.cat_room.symbol_width+n.viz.cat_room.separation)+",0)"}).on("click",function(t){if(d3.select(this).classed("cat_strings")){var e=s(n,t,this,"row");$(n.root+" .dendro_info").modal("toggle");var r=e.join(", ");d3.select(n.root+" .dendro_info input").attr("value",r)}}).on("mouseover",f.show).on("mouseout",function(){f.hide(this),o(n),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")}),a(n.viz,"row",u,t,e)})})}},function(t,e,n){var r=n(107);t.exports=function(t){var e=t.params,n=e.viz.dendro_room.row+e.viz.uni_margin,i=e.viz.clust.margin.left+e.viz.clust.dim.width,o=e.viz.clust.margin.top;d3.select(e.root+" .row_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","row_dendro_outer_container").attr("transform","translate("+i+","+o+")"),d3.select(e.root+" .row_dendro_outer_container").append("rect").classed("row_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",n+"px").attr("height",e.viz.svg_dim.height),d3.select(e.root+" .row_dendro_outer_container").append("g").attr("class","row_dendro_container").attr("transform","translate("+e.viz.uni_margin/2+",0)")):(d3.select(e.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+i+","+o+")"),d3.select(e.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",n+"px").attr("height",e.viz.svg_dim.height)),r(t,"row",!1),"clust"!=e.viz.inst_order.col&&d3.selectAll(e.root+" .row_dendro_group").remove()}},function(t,e,n){var r=n(107);t.exports=function(t){var e=t.params,n=e.viz.clust.margin.left,i=e.viz.clust.margin.top+e.viz.clust.dim.height,o=e.viz.dendro_room.col+e.viz.uni_margin;d3.select(e.root+" .col_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","col_dendro_outer_container").attr("transform","translate("+n+","+i+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",o+"px"),d3.select(e.root+" .col_dendro_outer_container").append("g").attr("class","col_dendro_container").attr("transform","translate(0,"+e.viz.uni_margin/2+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover_top",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height).attr("transform","translate(0,"+e.viz.dendro_room.col+")")):(d3.select(e.root+" .viz_svg").select("col_dendro_outer_container").attr("transform","translate("+n+","+i+")"),d3.select(e.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",e.viz.svg_dim.width).attr("height",o+"px")),r(t,"col",!1),"clust"!=e.viz.inst_order.row&&d3.selectAll(e.root+" .col_dendro_group").remove()}},function(t,e,n){var r=n(194);t.exports=function(t){r(t,"row"),r(t,"col")}},function(t,e,n){var r=n(195),i=n(180);t.exports=function(t,e){var n=d3.behavior.drag().on("drag",function(){t.params.is_slider_drag=!0;var n=d3.event.y;n<0&&(n=0),n>100&&(n=100),this.nextSibling&&this.parentNode.appendChild(this);var i=10-(n=d3.round(n,-1))/10;d3.select(this).attr("transform","translate(0, "+n+")"),r(t,e,i)}).on("dragend",function(){t.params.is_slider_drag=!1}),o=d3.select(t.params.root+" .viz_svg").append("g").classed(e+"_slider_group",!0);function a(){var n=d3.mouse(this),i=d3.round(n[1],-1);d3.select(t.params.root+" ."+e+"_group_circle").attr("transform","translate(0, "+i+")"),r(t,e,10-i/10)}i(t,e),o.append("rect").classed(e+"_slider_background",!0).attr("height","120px").attr("width","30px").attr("fill",t.params.viz.background_color).attr("transform",function(){return"translate(-10, -5)"}).style("opacity",0),o.append("line").style("stroke-width",100/7+"px").style("stroke","black").style("stroke-linecap","round").style("opacity",0).attr("y1",0).attr("y2",function(){return 98}).on("click",a),o.append("path").style("fill","black").attr("transform","translate(-2.5, 0)").attr("d",function(){return"M0,0 L0, 100 L10,0 Z"}).style("opacity",.35).on("click",a),o.append("circle").classed(e+"_group_circle",!0).attr("r",8).attr("transform",function(){return"translate(0, 50)"}).style("fill","blue").style("opacity",.35).on("mouseover",function(){d3.select(this).style("opacity",.6)}).on("mouseout",function(){d3.select(this).style("opacity",.35)}).call(n)}},function(t,e,n){var r=n(107);t.exports=function(t,e,n){var i=t.params;"row"===e?i.group_level.row=n:"col"===e&&(i.group_level.col=n),r(t,e,!0)}},function(t,e,n){var r=n(112);t.exports=function(t){var e=t.params.viz,n=e.clust.margin.left+e.clust.dim.width+e.uni_margin+e.dendro_room.row,i=d3.select(e.viz_svg).append("g").classed("right_spillover_container",!0).attr("transform",function(){return"translate("+n+", 0)"}),o=e.norm_labels.margin.top+e.norm_labels.width.col;i.append("rect").attr("fill",e.background_color).attr("width",10*e.clust.dim.width).attr("height",e.svg_dim.height+"px").attr("class","white_bars").attr("class","right_spillover").attr("transform",function(){return"translate( 0,"+o+")"});var a=0,s=e.clust.margin.top;i.append("g").classed("row_dendro_icons_container",!0).attr("transform","translate("+a+","+s+")").append("g").classed("row_dendro_icons_group",!0),r(t,"row"),a=e.clust.margin.left+e.clust.dim.width,s=o;var l=e.dendro_room.row+e.uni_margin,u=e.cat_room.col+e.uni_margin;d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",l).attr("height",u).attr("transform",function(){return"translate("+a+","+s+")"}).classed("white_bars",!0).classed("dendro_row_spillover",!0)}},function(t,e,n){var r=n(198),i=n(199),o=n(201),a=n(202),s=n(204),l=n(205),u=n(207),c=n(208),f=n(231),h=n(232),d=n(233),p=n(234),g=n(235),v=n(236);t.exports=function(){var t=this.params;if(d3.select(t.root+" .running_demo").empty()){d3.select(t.root+" .play_button").classed("running_demo",!0),g(t,!1),$.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0,color:"#fff",cursor:"default"}}),d3.selectAll(".blockUI").style("opacity",0);var e=750;!1===this.params.viz.is_expand&&(e=r(t,e,f),e-=1500),e=r(t,e,i),e=r(t,e,o),e=r(this,e,a),e=r(t,e,d),e=r(t,e,s),e=r(t,e,v),e=r(t,e,h),e=r(t,e,l),e=r(t,e,u),e=r(this,e,c),e=r(t,e,f),e=r(t,e,p)}}},function(t,e){t.exports=function(t,e,n){return setTimeout(n().run,e,t),e+n().get_duration()}},function(t,e,n){var r=n(200);t.exports=function(){return{run:function(t){setTimeout(r,0,t,"Clustergrammer allows users to generate\ninteractive and sharable visualizations\nby uploading a matrix",4500),setTimeout(r,4500,t,"This demo will quickly overview some\nof Clustergrammer's interactive features",4500)},get_duration:function(){return 1e4}}}},function(t,e){t.exports=function(t,e,n){var r=e.split("\n");r.length<3&&r.push(""),d3.select(t.root+" .demo_group").style("opacity",0).transition().duration(250).style("opacity",1).transition().duration(250).delay(n).style("opacity",0);for(var i=0;i<r.length;i++){var o=i+1,a=d3.select(t.root+" .demo_group").select("#text_"+o).text(r[i])[0][0].getBBox(),s=1.3*Number(d3.select(".demo_group").select("text").style("font-size").replace("px",""));d3.select(t.root+" .demo_group").select(".rect_"+o).style("fill","white").attr("width",a.width+20).attr("height",a.height).attr("x",-10).attr("y",a.y+i*s).style("opacity",.9)}}},function(t,e,n){var r=n(200),i=n(146);t.exports=function(){return{run:function(t){r(t.params,"Zoom and pan by\nscrolling and dragging",4e3),setTimeout(i,1500,t,0,0,4)},get_duration:function(){return 4e3}}}},function(t,e,n){var r=n(200),i=n(146),o=n(203);t.exports=function(){return{run:function(t){var e=t.params;r(e,"Reset zoom by double-clicking\n",4e3),setTimeout(o,2e3,e,"double",300,300),setTimeout(i,2400,t,0,0,1)},get_duration:function(){return 4500}}}},function(t,e){t.exports=function(t,e,n,r){var i=d3.select(t.root+" .viz_svg").append("circle").attr("cx",n).attr("cy",r).attr("r",25).style("stroke","black").style("stroke-width","3px").style("fill","#007f00").style("opacity",.5);"double"===e?i.transition().duration(200).style("opacity",0).transition().duration(50).style("opacity",.5).transition().duration(200).style("opacity",0).remove():i.transition().duration(200).style("opacity",0).transition().duration(250).remove()}},function(t,e,n){var r=n(200),i=n(203);t.exports=function(){function t(t,e){$(e).d3DblClick()}return jQuery.fn.d3DblClick=function(){this.each(function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)})},{run:function(e){r(e,"Reorder the matrix based on a single\nrow or column by double-clicking a\nlabel",7e3);var n=function(t,e){return d3.selectAll(t.root+" .row_label_group").filter(function(){return"EGFR"==this.__data__.name})[0][0]}(e),o=d3.select(n).attr("transform"),a=d3.select(e.root+" .clust_container").attr("transform").split(",")[1].replace(")",""),s=.9*e.viz.norm_labels.width.row,l=o.split(",")[1].replace(")",""),u=String(Number(l)+Number(a)+e.viz.rect_height/2);setTimeout(i,4e3,e,"double",s,u),setTimeout(t,4300,e,n)},get_duration:function(){return 8e3}}}},function(t,e,n){var r=n(200),i=n(206);t.exports=function(){function t(t,e,n){var r=d3.selectAll(".toggle_"+e+"_order .btn").filter(function(){return this.__data__==n})[0];$(r).click()}return{run:function(e){r(e,"Reorder all rows and columns\nby clicking the reorder\n buttons",9e3),setTimeout(i,3e3,e,"toggle_col_order"),setTimeout(t,3500,e,"col","rank"),setTimeout(i,7e3,e,"toggle_row_order"),setTimeout(t,7500,e,"row","rank")},get_duration:function(){return 11e3}}}},function(t,e){t.exports=function(t,e,n=4e3){e.indexOf("slider")<0?d3.select(t.root+" ."+e).style("background","#007f00").style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(n).style("background","#FFFFFF").style("box-shadow","none"):d3.select(t.root+" ."+e).style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(n).style("box-shadow","none")}},function(t,e,n){var r=n(200),i=n(206),o=n(146);t.exports=function(){function t(t,e){$(t.root+" .gene_search_box").val(e),$(t.root+" .gene_search_box").autocomplete("search",e)}function e(t){$(t.root+" .submit_gene_button").click(),$(t.root+" .gene_search_box").autocomplete("search","")}return{run:function(n){var a=n.params;r(a,"Search for rows using\nthe search box",5e3),setTimeout(i,2500,a,"gene_search_container"),setTimeout(t,3500,a,"E"),setTimeout(t,4e3,a,"EG"),setTimeout(t,4500,a,"EGF"),setTimeout(t,5e3,a,"EGFR"),setTimeout(e,5500,a),setTimeout(o,7500,n,0,0,1)},get_duration:function(){return 1e4}}}},function(t,e,n){var r=n(200),i=n(206),o=n(209);t.exports=function(){function t(t,e,n,r){var i,a=t.params,s={};s[e]=n,o(t,s),$(a.root+" .slider_"+e).slider("value",r),i="N_row_sum"===e?"sum":"variance",d3.select(a.root+" .title_"+e).text("Top rows "+i+": "+n)}return{run:function(e){var n=e.params,o="Filter rows based on sum or\nvariance using the sliders";r(n,o,4e3),setTimeout(i,5e3,n,"slider_N_row_sum",13e3),o="Filter: Top 20 rows by sum",setTimeout(r,5e3,n,o,4e3),setTimeout(t,5300,e,"N_row_sum",20,1),o="Filter: Top 10 rows by sum",setTimeout(r,1e4,n,o,4e3),setTimeout(t,10300,e,"N_row_sum",10,2),o="Filter: All rows",setTimeout(r,15e3,n,o,4e3),setTimeout(t,15300,e,"N_row_sum","all",0)},get_duration:function(){return 19500}}}},function(t,e,n){var r=n(11),i=n(210),o=n(211),a=n(3);t.exports=function(t,e){i(t.params);var n=r(t.config,t.params,e);d3.select(t.params.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!0).classed("fa-undo",!1).classed("active_cropping",!1),a.each(["row","col"],function(e){d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter",!1),d3.select(t.params.root+" ."+e+"_dendro_icons_container").style("display","block")}),o(t,n)}},function(t,e){t.exports=function(t){d3.selectAll(t.root+" .btn").attr("disabled",!0),d3.select(t.viz.viz_svg).style("opacity",.7)}},function(t,e,n){var r=n(10),i=n(212),o=n(213),a=n(153),s=n(185),l=n(190),u=n(191),c=n(192),f=n(224),h=n(226),d=n(163),p=n(227),g=n(152),v=n(228),m=n(155),y=n(230),_=n(84);t.exports=function(t,e){d3.select(t.params.viz.viz_svg).classed("running_update",!0),d3.selectAll(t.params.root+" .ds"+String(t.params.viz.ds_level)+"_row").remove(),null!=t.params.matrix_update_callback&&t.params.matrix_update_callback();var n=t.params.matrix.distance_metric,b=t.params.matrix.linkage_type,w=t.params.matrix.filter_state,x=t.params.matrix.normalization_state,k=t.params.group_level,E=t.params.crop_filter_nodes,z=jQuery.extend(!0,{},t.config);null!=t.params.new_row_cats&&(v(t.params.new_row_cats,e.row_nodes),t.params.new_row_cats=t.params.new_row_cats,t.params.viz=_(t.params,t.params.viz,!0)),z.network_data=e,z.inst_order=t.params.viz.inst_order,z.input_domain=t.params.matrix.opacity_scale.domain()[1],p(z,t.params),z.ini_view=null,z.current_col_cat=t.params.current_col_cat,z.cat_colors=t.params.viz.cat_colors;var A=r(z),C=i(t.params,A);function S(){d3.selectAll(".dendro_shadow").remove()}function T(){d3.select(t.params.viz.viz_svg).classed("running_update",!1)}t.params=A,t.params.zoom_behavior=d3.behavior.zoom().scaleExtent([1,t.params.viz.square_zoom*t.params.viz.zoom_ratio.x]).on("zoom",function(){m(t)}),t.params.matrix.distance_metric=n,t.params.matrix.linkage_type=b,t.params.matrix.filter_state=w,t.params.matrix.normalization_state=x,t.params.group_level=k,t.params.crop_filter_nodes=E,0===t.params.viz.ds_num_levels?o(t,e,C):y(t),d3.select(t.params.viz.viz_svg).style("opacity",.7),l(t),g(t),t.params.viz.show_categories.col&&s(t),t.params.viz.show_dendrogram&&(u(t),c(t)),a(t),d3.select(t.params.viz.viz_svg).call(t.params.zoom_behavior),d(t),f(t),t.params.viz.run_trans=!0,setTimeout(h,2500,t.params),setTimeout(S,50),setTimeout(S,100),setTimeout(S,500),setTimeout(S,1e3),setTimeout(S,1500),setTimeout(function(){d3.select(t.params.viz.viz_svg).transition().duration(250).style("opacity",1),setTimeout(T,1e3)},C.enter)}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=t.network_data.col_nodes,i=r.map(t.network_data.row_nodes,function(t){return t.name}),o=r.map(n,function(t){return t.name}),a=i.concat(o),s=e.network_data.col_nodes,l=r.map(e.network_data.row_nodes,function(t){return t.name}),u=r.map(s,function(t){return t.name}),c=l.concat(u),f=r.difference(a,c).length,h=r.difference(c,a).length,d={};d.update=f>0?1e3:0,d.enter=h>0?1e3:0,d.enter=d.enter+d.update,d.run_transition=!0;var p=.5*e.matrix.def_large_matrix;return(t.network_data.links.length>p||e.network_data.links.length>p)&&(d.run_transition=!1,d.update=0,d.enter=0),d}},function(t,e,n){var r=n(214),i=n(101),o=n(133),a=n(215),s=n(219),l=n(91),u=n(220),c=n(223),f=n(147),h=n(100);t.exports=function(t,e,n){var d=t.params;d3.selectAll(d.viz.root_tips).remove();var p=h().attr("class",function(){var t=d.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_tile_tip"}).direction("nw").offset([0,0]).style("display","none").html(function(t){var e,n=String(t.value.toFixed(3));if(d.keep_orig){var r=String(t.value_orig.toFixed(3));e="<p>"+t.row_name+" and "+t.col_name+"</p><p> normalized value: "+n+"</p><div> original value: "+r+"</div>"}else e="<p>"+t.row_name+" and "+t.col_name+"</p><div> value: "+n+"</div>";return e});d3.select(d.root+" .clust_group").call(p),c(d);for(var g=e.row_nodes,v=e.col_nodes,m=e.links,y=0;y<m.length;y++){var _=m[y];m[y].name=g[_.source].name+"_"+v[_.target].name}var b=d3.select(d.root+" .clust_group").selectAll(".row").data(d.matrix.matrix,function(t){return t.name});n.run_transition?b.transition().delay(n.update).duration(1e3).attr("transform",function(t){return"translate(0,"+d.viz.y_scale(t.row_index)+")"}):b.attr("transform",function(t){return"translate(0,"+d.viz.y_scale(t.row_index)+")"}),d3.select(d.root+" .clust_group").selectAll(".row").each(function(t){a(d,t,n,1e3,this,p)}),d3.selectAll(d.root+" .horz_lines").remove(),d3.selectAll(d.root+" .vert_lines").remove(),s(d,n,1e3),r(t,1e3,n),u(d,n,1e3,p),i(t,1e3),o(t,1e3),l(d,n,1e3),setTimeout(f,2e3,d)}},function(t,e,n){var r=n(2),i=n(74),o=n(71),a=n(73),s=n(164),l=n(165),u=n(166),c=n(167),f=n(169),h=n(171),d=n(172),p=n(173),g=n(174),v=n(175),m=n(178),y=n(83),_=n(82),b=n(88),w=n(3);t.exports=function(t,e=0,n=null){null===n&&((n={}).enter=0,n.update=0,n.run_transition=!1);var x=t.params,k=t.params.network_data.row_nodes;x.zoom_info=b();var E=x.network_data.row_nodes_names;s(x),(x=o(x)).viz=a(x.viz),x.viz=i(x.viz),x.sim_mat&&(x.viz.clust.dim.width<=x.viz.clust.dim.height?x.viz.clust.dim.height=x.viz.clust.dim.width:x.viz.clust.dim.width=x.viz.clust.dim.height),x.viz=_(x.viz),x.viz.x_scale.rangeBands([0,x.viz.clust.dim.width]),x.viz.y_scale.rangeBands([0,x.viz.clust.dim.height]),x.viz.square_zoom=x.viz.norm_labels.width.col/(x.viz.x_scale.rangeBand()/2),x.zoom_behavior.scaleExtent([1,x.viz.square_zoom*x.viz.zoom_ratio.x]),x.viz.border_width.x=x.viz.x_scale.rangeBand()/x.viz.border_fraction,x.viz.border_width.y=x.viz.y_scale.rangeBand()/x.viz.border_fraction,x=y(x);var z=d3.select(x.viz.viz_wrapper).select("svg");z.select(x.root+" .grey_background").transition().delay(n.update).duration(e).attr("width",x.viz.clust.dim.width).attr("height",x.viz.clust.dim.height),f(x,z,n),z.selectAll(".row_label_group").select("text").style("font-size",x.labels.default_fs_row+"px").text(function(t){return r.normal_name(t)}),z.selectAll(".row_label_group").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",x.viz.y_scale.rangeBand()).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),h(x,z,n),n.run_transition?(z.selectAll(".row_label_group").select("text").transition().delay(n.update).duration(e).attr("y",.5*x.viz.rect_height+.35*x.labels.default_fs_row),z.selectAll(".row_cat_group").data(k,function(t){return t.name}).transition().delay(n.update).duration(e).attr("transform",function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"}),z.selectAll(".row_cat_group").select("path").transition().delay(n.update).duration(e).attr("d",function(){return"M "+(x.viz.cat_room.symbol_width-1)+",0 L 1,"+x.viz.y_scale.rangeBand()/2+" L "+(x.viz.cat_room.symbol_width-1)+","+x.viz.y_scale.rangeBand()+" Z"}),z.selectAll(".row_dendro_group").data(k,function(t){return t.name}).transition().delay(n.update).duration(e).attr("transform",function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"})):(z.selectAll(".row_label_group").select("text").attr("y",.5*x.viz.rect_height+.35*x.labels.default_fs_row),z.selectAll(".row_cat_group").data(k,function(t){return t.name}).attr("transform",function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"}),z.selectAll(".row_cat_group").select("path").attr("d",function(){return"M "+(x.viz.cat_room.symbol_width-1)+",0 L 1,"+x.viz.y_scale.rangeBand()/2+" L "+(x.viz.cat_room.symbol_width-1)+","+x.viz.y_scale.rangeBand()+" Z"}),z.selectAll(".row_dendro_group").data(k,function(t){return t.name}).attr("transform",function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"})),r.has(x.network_data.row_nodes[0],"value")&&m(t,z),d(x,z,n),p(x,z),g(x,z,n),v(x,z,n),l(x,z,n),u(x,z,n),c(x.viz,z,n),x.zoom_behavior.scale(1).translate([x.viz.clust.margin.left,x.viz.clust.margin.top])}},function(t,e,n){var r=n(216),i=n(217),o=n(218),a=n(97),s=n(98),l=n(99),u=n(3);t.exports=function(t,e,n,c,f,h){var d=e.row_data,p=u.filter(d,function(t){return 0!=t.value}),g=d3.select(f).selectAll(".tile").data(p,function(t){return t.col_name});r(t,n,g,d,f);var v=g.on("mouseover",function(...e){a(t,this,h,e)}).on("mouseout",function(){s(t,this,h)}),m=t.network_data.col_nodes_names;n.run_transition?v.transition().delay(n.update).duration(c).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){return u.contains(m,e.col_name)?l(t,e):"translate(0,0)"}):v.attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){return u.contains(m,e.col_name)?l(t,e):"translate(0,0)"}),"updn"==t.matrix.tile_type&&o(t,d,f,n,c,g,h),i(t,n,c,g,h)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o){if(e.run_transition?n.exit().transition().duration(300).attr("fill-opacity",0).remove():n.exit().attr("fill-opacity",0).remove(),"updn"==t.matrix.tile_type){var a=r.filter(i,function(t){return 0!=t.value_up||0!=t.value_dn}),s=d3.select(o).selectAll(".tile_up").data(a,function(t){return t.col_name});e.run_transition?s.exit().transition().duration(300).attr("fill","0").remove():s.exit().attr("fill",0).remove();var l=d3.select(o).selectAll(".tile_dn").data(a,function(t){return t.col_name});e.run_transition?l.exit().transition().duration(300).attr("fill",0).remove():l.exit().attr("fill",0).remove()}}},function(t,e,n){var r=n(97),i=n(98),o=n(99);t.exports=function(t,e,n,a,s){var l=a.enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).on("mouseover",function(...e){r(t,this,s,e)}).on("mouseout",function(){i(t,this,s)}).attr("fill-opacity",0).attr("transform",function(e){return o(t,e)});e.run_transition?l.transition().delay(e.enter).duration(n).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){return t.matrix.opacity_scale(Math.abs(e.value))}):l.style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){return t.matrix.opacity_scale(Math.abs(e.value))}),l.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e,n){var r=n(95),i=n(96),o=n(97),a=n(98),s=n(99),l=n(3);t.exports=function(t,e,n,u,c,f,h){var d=l.filter(e,function(t){return 0!=t.value_up||0!=t.value_dn}),p=d3.select(n).selectAll(".tile_up").data(d,function(t){return t.col_name}).on("mouseover",function(...e){o(t,this,h,e)}).on("mouseout",function(){a(t,this,h)});u.run_transition?p.transition().delay(u.update).duration(c).attr("d",function(){return r(t)}).attr("transform",function(e){return s(t,e)}):p.attr("d",function(){return r(t)}).attr("transform",function(e){return s(t,e)});var g=d3.select(n).selectAll(".tile_dn").data(d,function(t){return t.col_name}).on("mouseover",function(...e){o(t,this,h,e)}).on("mouseout",function(){a(t,this,h)});u.run_transition?g.transition().delay(u.update).duration(c).attr("d",function(){return i(t)}).attr("transform",function(e){return s(t,e)}):g.attr("d",function(){return i(t)}).attr("transform",function(e){return s(t,e)}),f.selectAll(".tile").each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e){t.exports=function(t,e,n){var r=t.network_data.row_nodes,i=t.network_data.col_nodes,o=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).exit();e.run_transition?o.transition().duration(n).style("opacity",0).remove():o.style("opacity",0).remove(),d3.selectAll(t.root+" .row_label_group").data(r,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_group").data(i,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .row_cat_group").data(r,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .row_dendro_group").data(r,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_text").data(i,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .horz_lines").data(r,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .vert_lines").data(i,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_cat_group").data(i,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_dendro_group").data(i,function(t){return t.name}).exit().transition().duration(n).style("opacity",0).remove()}},function(t,e,n){var r=n(221);t.exports=function(t,e,n,i){d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).enter().append("g").classed("row",!0).attr("transform",function(e){return"translate(0,"+t.viz.y_scale(e.row_index)+")"}).each(function(o){r(t,o,e,n,i,this)})}},function(t,e,n){var r=n(222),i=n(97),o=n(98),a=n(99),s=n(3);t.exports=function(t,e,n,l,u,c){var f=e.row_data,h=s.filter(f,function(t){return 0!==t.value}),d=d3.select(c).selectAll("rect").data(h,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).on("mouseover",function(...e){i(t,this,u,e)}).on("mouseout",function(){o(t,this,u)});d.style("fill-opacity",0).transition().delay(n.enter).duration(l).style("fill-opacity",function(e){return t.matrix.opacity_scale(Math.abs(e.value))}),d.attr("transform",function(e){return a(t,e)}),"updn"==t.matrix.tile_type&&r(t,f,c,u,n,l,d)}},function(t,e,n){var r=n(95),i=n(96),o=n(99),a=n(3);t.exports=function(t,e,n,s,l,u,c){var f=a.filter(e,function(t){return 0!=t.value_up||0!=t.value_dn});d3.select(n).selectAll(".tile_up").data(f,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return r(t)}).attr("transform",function(e){return o(t,e)}).style("fill",function(){return t.matrix.tile_colors[0]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&s.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()}).style("fill-opacity",0).transition().delay(l.enter).duration(u).style("fill-opacity",function(e){var n=0;return Math.abs(e.value_dn)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_up))),n}),d3.select(n).selectAll(".tile_dn").data(f,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return i(t)}).attr("transform",function(e){return o(t,e)}).style("fill",function(){return t.matrix.tile_colors[1]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&s.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()}).style("fill-opacity",0).transition().delay(l.enter).duration(u).style("fill-opacity",function(e){var n=0;return Math.abs(e.value_up)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_dn))),n}),c.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e){t.exports=function(t){d3.select(t.root+" .clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")"),d3.select(t.root+" .col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),d3.select(t.root+" .col_cat_outer_container").attr("transform",function(){return"translate(0,"+(t.viz.norm_labels.width.col+2)+")"})}},function(t,e,n){n(195);var r=n(145),i=n(144),o=n(225),a=n(3);t.exports=function(t){var e=t.params,n=d3.select(e.root+" .gene_search_box")[0][0],s=new Awesomplete(n,{minChars:1,maxItems:15}),l=t.params.network_data.row_nodes_names;if(s.list=l,d3.selectAll(".awesomplete ul").style("z-index",99),$(e.root+" .gene_search_box").keyup(function(n){if(13===n.keyCode){var r=$(e.root+" .gene_search_box").val();o(t,r,l)}}),$(e.root+" .submit_gene_button").off().click(function(){var n=$(e.root+" .gene_search_box").val();o(t,n,l)}),a.each(e.sim_mat?["both"]:["row","col"],function(n){$(e.root+" .toggle_"+n+"_order .btn").off().click(function(i){var o=$(i.target).attr("name").replace("_row","").replace("_col","");d3.selectAll(e.root+" .toggle_"+n+"_order .btn").classed("active",!1),d3.select(this).classed("active",!0),"both"!=n?r(t,o,n):(r(t,o,"row"),r(t,o,"col"))})}),i(t),d3.select(t.params.root+" .opacity_slider").select("#handle-one").empty()){var u=d3.slider().snap(!0).value(1).min(.1).max(1.9).step(.1).on("slide",function(e,n){!function(e,n){t.params.matrix.opacity_scale.domain([0,t.params.matrix.abs_max_val*(2-n)]),d3.selectAll(t.params.root+" .tile").style("fill-opacity",function(e){return t.params.matrix.opacity_scale(Math.abs(e.value))})}(0,n)});d3.select(t.params.root+" .opacity_slider").call(u)}}},function(t,e,n){var r=n(146),i=n(3);t.exports=function(t,e,n){if(-1!==n.indexOf(e)){d3.selectAll(t.params.root+" .row_label_group").select("rect").style("opacity",0);var o=i.indexOf(n,e),a=t.params.viz.y_scale(o),s=t.params.viz.zoom_ratio.x;r(t,0,t.params.viz.clust.dim.height/2-a,s),t.params.zoom_info.zoom_y=s,d3.selectAll(t.params.root+" .row_label_group").filter(function(t){return t.name===e}).select("rect").style("opacity",1)}}},function(t,e){t.exports=function(t){!1===t.dendro_filter.row&&"clust"===t.viz.inst_order.col&&d3.select(t.root+" .row_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_row_order .btn").attr("disabled",null),!1===t.dendro_filter.col&&"clust"===t.viz.inst_order.row&&d3.select(t.root+" .col_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_col_order .btn").attr("disabled",null),d3.selectAll(t.root+" .gene_search_button .btn").attr("disabled",null),t.viz.run_trans=!1}},function(t,e,n){var r=n(3);t.exports=function(t,e){r.each(["row","col"],function(n){d3.selectAll(e.root+" .toggle_"+("row"===n?"col":"row")+"_order .btn").filter(function(){return d3.select(this).attr("name")===t.inst_order[n]}).classed("active",!0)})}},function(t,e,n){var r=n(229),i=n(2),o=n(3);t.exports=function(t,e,n=!1){var a,s,l,u,c,f,h=0,d=0;o.each(e,function(e){s=e.name,!0===n&&(s.indexOf(" ")?s=s.split(" ")[0]:s.indexOf("_")&&(s=s.split("_")[0])),h=0,r(e),o.each(t,function(t){if(a=t.cat_title,l="false",d=-1,f=0,o.each(t.cats,function(t){u=t.cat_name,o.contains(t.members,s)&&(l=u,d=f),f+=1}),i.has(t,"pval")){var n=t.pval.toExponential();c=a+": "+l+"<p> Pval "+String(n)+"</p>"}else c=-1===a.indexOf("cat-")?a+": "+l:l;e["cat-"+String(h)]=c,e["cat_"+String(h)+"_index"]=d,h+=1})})}},function(t,e,n){var r=n(3);t.exports=function(t){var e=r.keys(t);r.each(e,function(e){e.indexOf("cat-")>-1&&delete t[e],e.indexOf("cat_")>-1&&delete t[e]})}},function(t,e,n){var r=n(214),i=n(133),o=n(136),a=n(223);t.exports=function(t){d3.selectAll(t.params.root+" .row_cat_group").remove(),d3.selectAll(t.params.root+" .row_label_group").remove(),d3.selectAll(t.params.root+" .row").remove(),o(t,!0,!0,!0),i(t);var e=t.params.network_data.col_nodes;d3.selectAll(t.params.root+" .col_label_group").data(e,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_label_text").data(e,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_cat_group").data(e,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_dendro_group").data(e,function(t){return t.name}).exit().style("opacity",0).remove(),a(t.params),r(t,0,{enter:0,update:0,run_transition:!1})}},function(t,e,n){var r=n(203);t.exports=function(){function t(t){$(t.root+" .expand_button").d3Click()}function e(t){n(0,"row","clust"),n(0,"col","clust")}function n(t,e,n){var r=d3.selectAll(".toggle_"+e+"_order .btn").filter(function(){return this.__data__==n})[0];$(r).click()}return jQuery.fn.d3Click=function(){this.each(function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)})},{run:function(n){var i=Number(d3.select(n.root+" .expand_button").attr("x").replace("px","")),o=Number(d3.select(n.root+" .expand_button").attr("y").replace("px",""));setTimeout(r,0,n,"single",i,o),setTimeout(t,400,n),setTimeout(e,1500,n)},get_duration:function(){return 3500}}}},function(t,e,n){var r=n(200),i=n(206),o=n(195);t.exports=function(){function t(t,e,n){$(cgm.params.root+" .slider_col").slider("value",n/10),o(cgm,e,n)}return{run:function(e){r(e,"Identify row and column groups\nof varying sizes using  the\nsliders and dendrogram",1e4),setTimeout(i,3e3,e,"slider_col",7e3),setTimeout(t,4e3,e,"row",3),setTimeout(t,5e3,e,"row",4),setTimeout(t,6e3,e,"row",5),setTimeout(t,7e3,e,"row",6),setTimeout(t,8e3,e,"row",7),setTimeout(t,9e3,e,"row",5)},get_duration:function(){return 11e3}}}},function(t,e,n){var r=n(200),i=n(203);t.exports=function(){function t(t,e){$(e).d3DblClick()}return jQuery.fn.d3DblClick=function(){this.each(function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)})},{run:function(e){r(e,"Row and column categories\ncan be use to reorder\nby double-clicking",7e3);var n=d3.selectAll(e.root+" .col_cat_super").filter(function(){return"cat-1"===this.__data__})[0],o=d3.select(".col_cat_super").attr("transform"),a=Number(o.split("(")[1].split(",")[0].replace(")",""))+20,s=Number(o.split(",")[1].replace(")",""));setTimeout(i,4e3,e,"double",a,s),setTimeout(t,4300,e,n)},get_duration:function(){return 8e3}}}},function(t,e,n){var r=n(200),i=n(235);t.exports=function(){function t(t){d3.select(t.root+" .play_button").classed("running_demo",!1),i(t,!0)}return{run:function(e){setTimeout(r,0,e,"Clustergrammer is built with gene\nexpression data in mind and interfaces\nwith several Ma'ayan lab web tools",4500),setTimeout(r,4500,e,"The example data being visualized is\ngene expression data obtained from the\nCancer Cell Line Encyclopedia",4500),setTimeout(r,9e3,e,"For more information please view\nthe help documentation",4500),setTimeout(t,14e3,e)},get_duration:function(){return 12e3}}}},function(t,e){t.exports=function(t,e){!1===e?d3.select(t.root+" .play_button").transition().duration(500).style("opacity",0):(d3.select(t.root+" .play_button").transition().duration(500).style("opacity",1),$.unblockUI())}},function(t,e,n){var r=n(200),i=n(203);t.exports=function(){function t(t){$(t.root+" .expand_button").d3Click()}return jQuery.fn.d3Click=function(){this.each(function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)})},jQuery.fn.d3DblClick=function(){this.each(function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)})},{run:function(e){r(e,"View additional controls\nby clicking the menu button",4e3);var n=Number(d3.select(e.root+" .expand_button").attr("x").replace("px","")),o=Number(d3.select(e.root+" .expand_button").attr("y").replace("px",""));setTimeout(i,3e3,e,"single",n,o),setTimeout(t,3400,e)},get_duration:function(){return 5e3}}}},function(t,e,n){var r=n(238),i=n(239);t.exports=function(){var t=this.params;r(this),i(t,30)}},function(t,e,n){var r=n(179);t.exports=function(t){var e=t.params;if(d3.select(e.root+" .play_button").empty()){var n=d3.select(e.root+" .viz_svg").append("g").classed("play_button",!0).classed("running_demo",!1);r(e),n.append("circle").style("r",45).style("fill","white").style("stroke","black").style("stroke-width","3px").style("opacity",.5),n.append("path").attr("d",function(){return"M-15,-22 l 40,22 l -40,22 z "}).style("fill","black").style("opacity",.5),n.on("mouseover",function(){d3.select(this).select("path").style("fill","red").style("opacity",1),d3.select(this).select("circle").style("opacity",1)}).on("mouseout",function(){d3.select(this).select("path").style("fill","black").style("opacity",.5),d3.select(this).select("circle").style("opacity",.5)}).on("click",function(){t.play_demo()})}}},function(t,e){t.exports=function(t,e){if(d3.select(t.root+" .demo_group").empty()){var n=d3.select(t.root+" .clust_container").attr("transform"),r=Number(n.split("(")[1].split(",")[0]),i=Number(n.split(",")[1].replace(")","")),o=d3.select(t.root+" .viz_svg").append("g").classed("demo_group",!0).attr("transform",function(){return"translate("+(r+20)+","+(i+40)+")"});o.append("rect").classed("rect_1",!0),o.append("rect").classed("rect_2",!0),o.append("rect").classed("rect_3",!0);var a=1.3*e;o.append("text").attr("id","text_1").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),o.append("text").attr("id","text_2").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",function(){return"translate(0,"+String(a)+")"}),o.append("text").attr("id","text_3").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",function(){return"translate(0,"+String(2*a)+")"})}}},function(t,e,n){var r=n(12),i=n(211);t.exports=function(t){var e=r(this.config,t);i(this,e)}},function(t,e,n){var r=n(12),i=n(211),o=n(3);t.exports=function(t,e=!1){var n,a,s=(n=!1===e?this:e).params,l={};o.each(["row","col"],function(e){var n=s.inst_nodes[e+"_nodes"];if(_.has(t,e))if(t[e].length>0){var r=t[e];a=$.grep(n,function(t){return $.inArray(t.name,r)>-1})}else a=n;else a=n;l[e+"_nodes"]=a});var u=n.params.network_data.row_nodes,c=n.params.network_data.col_nodes,f=r(n.config,l);i(n,f),u.length>n.params.inst_nodes.row_nodes.length&&(n.params.inst_nodes.row_nodes=u),c.length>n.params.inst_nodes.col_nodes.length&&(n.params.inst_nodes.col_nodes=c)}},function(t,e,n){var r=n(190),i=n(67),o=n(154),a=n(228);t.exports=function(t,e){null!=t.params.cat_update_callback&&t.params.cat_update_callback(this);var n=t.params.viz.cat_colors.col;a(e,t.params.network_data.row_nodes,!0),a(e,t.params.inst_nodes.row_nodes,!0),t.params=i(t.params,!1),r(t,!0),o(t),t.params.new_row_cats=e,t.params.viz.cat_colors.col=n}},function(t,e,n){var r=n(190),i=n(67),o=n(154),a=n(228),s=n(244);t.exports=function(t=!0){var e=this,n=s(e),l=e.params.viz.cat_colors.col;a(n,e.params.network_data.row_nodes),a(n,e.params.inst_nodes.row_nodes),e.params.new_row_cats=n,e.params.viz.cat_colors.col=l,t&&(e.params=i(e.params,!0),r(e,!0),o(e))}},function(t,e,n){var r=n(3);t.exports=function(t){var e,n,i,o,a,s,l,u=t.config.network_data.row_nodes,c=[],f=u[0],h=r.keys(f),d={};r.each(h,function(t){t.indexOf("cat-")>=0&&(a=f[t],l=parseInt(t.split("cat-")[1],10),s=a.indexOf(": ")>=0?a.split(": ")[0]:t,d[l]=s)});var p,g=r.keys(d).sort();return r.each(g,function(t){(p={}).cat_title=d[t],p.cats=[],c.push(p)}),r.each(u,function(t){var a=r.keys(t);r.each(a,function(a){if(a.indexOf("cat-")>-1){o=t[a],l=parseInt(a.split("cat-")[1],10);var s=a;o=t[a];var u=t[a],f=t.name;u.indexOf(": ")>-1?(s=u.split(": ")[0],o=u.split(": ")[1]):(s=a,o=u),0===c.length?function(t,r,i){(e={}).cat_title=t,e.cats=[],(n={}).cat_name=r,n.members=[],n.members.push(i),e.cats.push(n),c.push(e)}(s,o,f):r.each(c,function(t){s===t.cat_title&&(i=!1,r.each(t.cats,function(t){o===t.cat_name&&(i=!0,t.members.push(f))}),!1===i&&((n={}).cat_name=o,n.members=[],n.members.push(f),t.cats.push(n)))})}})}),c}},function(t,e,n){var r=n(209),i=n(246);t.exports=function(t,e,n){var o={};o[e]=n,r(t,o),i(t,e,n)}},function(t,e,n){var r=n(247),i=n(3);t.exports=function(t,e,n){var o,a,s=t.params;d3.select(s.root+" .slider_"+e).attr("current_state",n),i.each(i.keys(s.viz.possible_filters),function(n){if(o=e.indexOf("row")>-1?"row":e.indexOf("col")>-1?"col":"neither",a=n.indexOf("row")>-1?"row":n.indexOf("col")>-1?"col":"neither",e!=n&&"neither"!=o&&o==a){var i=r(s,n);t.slider_functions[n].value(0),d3.select(s.root+" .title_"+n).text(i.text+i.state),d3.select(s.root+" .slider_"+n).attr("current_state",i.state)}});var l=r(s,e);d3.select(s.root+" .title_"+e).text(l.text+n+l.suffix)}},function(t,e,n){var r=n(6),i=n(3);t.exports=function(t,e){var n={},o={},a={};return n.state=r(t.viz.filter_data,e),a.top=e.split("_")[0],a.node=e.split("_")[1],a.measure=e.split("_")[2],o.node="row"===a.node?"rows":"columns","N"===a.top&&(n.suffix=""),"pct"===a.top&&(n.suffix="%"),"sum"==a.measure?o.measure="sum":"var"==a.measure&&(o.measure="variance"),"sum"===a.measure&&(n.text="Top "+o.node+" "+o.measure+": "),"var"===a.measure&&(n.text="Top "+o.node+" "+o.measure+": "),i.keys(t.viz.possible_filters).indexOf("enr_score_type")>-1&&"col"===a.node&&(n.text="Top Enriched Terms: ",n.suffix=""),n}},function(t,e,n){var r=n(249),i=n(250);t.exports=function(){var t=r(),e=i(this.params);t(new Blob([e],{type:"text/plain;charset=utf-8"}),"clustergrammer.txt")}},function(t,e){t.exports=function(){var t=t||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){"use strict";var e=t.document,n=t.URL||t.webkitURL||t,r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=t.webkitRequestFileSystem,a=t.requestFileSystem||o||t.mozRequestFileSystem,s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l=0,u=[],c=function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(o){s(o)}}},f=function(n,s){var f,h,d,p,g=this,v=n.type,m=!1,y=function(){var e=(t.URL||t.webkitURL||t).createObjectURL(n);return u.push(e),e},_=function(){c(g,"writestart progress write writeend".split(" "))},b=function(){!m&&f||(f=y()),h&&(h.location.href=f),g.readyState=g.DONE,_()},w=function(t){return function(){if(g.readyState!==g.DONE)return t.apply(this,arguments)}},x={create:!0,exclusive:!1};if(g.readyState=g.INIT,s||(s="download"),i)return f=y(),r.href=f,r.download=s,d=r,(p=e.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(p),g.readyState=g.DONE,void _();t.chrome&&v&&"application/octet-stream"!==v&&(n=(n.slice||n.webkitSlice).call(n,0,n.size,"application/octet-stream"),m=!0),o&&"download"!==s&&(s+=".download"),h="application/octet-stream"===v||o?t:t.open(),a?a(t.TEMPORARY,l+=n.size,w(function(t){t.root.getDirectory("saved",x,w(function(t){var e=function(){t.getFile(s,x,w(function(t){t.createWriter(w(function(e){e.onwriteend=function(e){h.location.href=t.toURL(),u.push(t),g.readyState=g.DONE,c(g,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&b()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=g["on"+t]}),e.write(n),g.abort=function(){e.abort(),g.readyState=g.DONE},g.readyState=g.WRITING}),b)}),b)};t.getFile(s,{create:!1},w(function(t){t.remove(),e()}),w(function(t){t.code===t.NOT_FOUND_ERR?e():b()}))}),b)}),b):b()},h=f.prototype;return h.abort=function(){this.readyState=this.DONE,c(this,"abort")},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,t.addEventListener("unload",function(){for(var t=u.length;t--;){var e=u[t];"string"==typeof e?n.revokeObjectURL(e):e.remove()}u.length=0},!1),function(t,e){return new f(t,e)}}(self);return t}},function(t,e,n){var r=n(251),i=n(3);t.exports=function(t){var e=t.matrix,n={};i.each(["row","col"],function(r){n["row"===r?"col":"row"]=e.orders[t.inst_order[r]+"_"+r]});for(var o,a="\t",s=t.network_data.row_nodes,l=t.network_data.col_nodes,u=0;u<n.col.length;u++){var c=r(t,l[n.col[u]],"col");u<n.col.length-1?a=a+c+"\t":a+=c}return a+="\n",i.each(n.row,function(i){o=e.matrix[i].row_data;var l=r(t,s[i],"row");a=a+l+"\t";for(var u=0;u<n.col.length;u++){var c=n.col[u];u<n.col.length-1?a=a+String(o[c].value)+"\t":a+=String(o[c].value)}a+="\n"}),a}},function(t,e){t.exports=function(t,e,n){var r,i=e.name,o=t.viz.all_cats[n].length;if(o>0){i="('"+i+"'";for(var a=0;a<o;a++)r="cat-"+String(a),i=i+", '"+String(e[r])+"'";i+=")"}else i=String(i);return i}},function(t,e,n){var r=n(253),i=n(3);t.exports=function(){var t=this,e=t.params,n=e.viz.clust.dim.width,o=e.viz.clust.dim.height,a=d3.scale.linear().domain([0,n]).range([0,n]),s=d3.scale.linear().domain([0,o]).range([0,o]);d3.select(e.root+" .clust_container").append("g").classed("brush_group",!0),t.params.is_cropping=!0;var l=d3.svg.brush().x(a).y(s).on("brushend",function(){d3.select(t.params.root+" .col_dendro_icons_container").style("display","none"),d3.select(t.params.root+" .row_dendro_icons_container").style("display","none");var n=l.extent(),o=n[0],a=n[1],s=o[0],u=a[0],c=o[1],f=a[1];if(s!=u&&c!=f){setTimeout(r,500,t);var h=function(t,n,r,o,a,s){t>n&&(t=s[0],n=a[0]),r>o&&(r=s[1],o=a[1]),r-=e.viz.rect_height,t-=e.viz.rect_width;var l={row:[],col:[]};return i.each(e.matrix.matrix,function(t){var n=e.viz.y_scale(t.row_index);n>r&&n<o&&l.row.push(t.name)}),d3.selectAll(e.root+" .col_label_text").each(function(e){var r=d3.select(this).attr("transform"),i=Number(r.split(",")[0].split("(")[1]);i>t&&i<n&&l.col.push(e.name)}),l}(s,u,c,f,o,a);t.filter_viz_using_names(h),d3.select(e.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!1).classed("fa-undo",!0)}});d3.select(e.root+" .brush_group").call(l),d3.selectAll(e.root+" .extent").style("opacity",.2).style("fill","black")}},function(t,e){t.exports=function(t){d3.select(t.params.root+" .brush_group").transition().style("opacity",0).remove(),t.params.is_cropping=!1}},function(t,e,n){var r,i,o,a;a=function(t){return function(){"use strict";var e,n,r,i,o,a,s=0,l=100,u=.01,c=!1,f="horizontal",h=!1,d=50,p=1,g=!1,v=t.dispatch("slide","slideend"),m=t.format(".2%"),y=t.format(".0"),_=null;function b(u){u.each(function(){n||(n=t.scale.linear().domain([s,l])),e=e||n.domain()[0];var u=t.select(this).classed("d3-slider d3-slider-"+f,!0),c=t.behavior.drag();if(c.on("dragend",function(){v.slideend(t.event,e)}),"array"==E(e)&&2==e.length?(i=u.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",C).call(c),_=u.append("a").classed("d3-slider-handle",!0).attr("id","handle-two").attr("xlink:href","#").on("click",C).call(c)):i=u.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",C).call(c),"horizontal"===f){if(u.on("click",function(){if("array"!=E(e)){var r=Math.max(0,Math.min(a,t.event.offsetX||t.event.layerX));w(n.invert?x(n.invert(r/a)):k(r/a))}}),"array"==E(e)&&2==e.length){o=t.select(this).append("div").classed("d3-slider-range",!0),i.style("left",m(n(e[0]))),o.style("left",m(n(e[0]))),c.on("drag",z);var g=100-parseFloat(m(n(e[1])));_.style("left",m(n(e[1]))),o.style("right",g+"%"),c.on("drag",z)}else i.style("left",m(n(e))),c.on("drag",z);a=parseInt(u.style("width"),10)}else{if(u.on("click",function(){if("array"!=E(e)){var r=a-Math.max(0,Math.min(a,t.event.offsetY||t.event.layerY));w(n.invert?x(n.invert(r/a)):k(r/a))}}),c.on("drag",A),"array"==E(e)&&2==e.length){o=t.select(this).append("div").classed("d3-slider-range-vertical",!0),i.style("bottom",m(n(e[0]))),o.style("bottom",m(n(e[0]))),c.on("drag",A);var b=100-parseFloat(m(n(e[1])));_.style("bottom",m(n(e[1]))),o.style("top",b+"%"),c.on("drag",A)}else i.style("bottom",m(n(e))),c.on("drag",A);a=parseInt(u.style("height"),10)}function z(){"handle-one"===t.event.sourceEvent.target.id?p=1:"handle-two"==t.event.sourceEvent.target.id&&(p=2);var e=Math.max(0,Math.min(a,t.event.x));w(n.invert?x(n.invert(e/a)):k(e/a))}function A(){"handle-one"===t.event.sourceEvent.target.id?p=1:"handle-two"==t.event.sourceEvent.target.id&&(p=2);var e=a-Math.max(0,Math.min(a,t.event.y));w(n.invert?x(n.invert(e/a)):k(e/a))}function C(){t.event.stopPropagation()}h&&function(e){"boolean"==typeof h&&(h=t.svg.axis().ticks(Math.round(a/100)).tickFormat(y).orient("horizontal"===f?"bottom":"right")),r=n.ticks?n.copy().range([0,a]):n.copy().rangePoints([0,a],.5),h.scale(r);var i=e.append("svg").classed("d3-slider-axis d3-slider-axis-"+h.orient(),!0).on("click",C),o=i.append("g");"horizontal"===f?(i.style("margin-left",-d+"px"),i.attr({width:a+2*d,height:d}),"top"===h.orient()?(i.style("top",-d+"px"),o.attr("transform","translate("+d+","+d+")")):o.attr("transform","translate("+d+",0)")):(i.style("top",-d+"px"),i.attr({width:d,height:a+2*d}),"left"===h.orient()?(i.style("left",-d+"px"),o.attr("transform","translate("+d+","+d+")")):o.attr("transform","translate(0,"+d+")")),o.call(h)}(u)})}function w(r){var a="array"==E(e)&&2==e.length?e[p-1]:e,s=m(n(x(a))),l=m(n(x(r))),u="horizontal"===f?"left":"bottom";if(s!==l){if("array"==E(e)&&2==e.length?(e[p-1]=r,t.event&&v.slide(t.event,e)):t.event&&v.slide(t.event.sourceEvent||t.event,e=r),e[0]>=e[1])return;if(1===p)"array"==E(e)&&2==e.length&&o.style("left"===u?"left":"bottom",l),c?i.transition().styleTween(u,function(){return t.interpolate(s,l)}).duration("number"==typeof c?c:250):i.style(u,l);else{var h=100-parseFloat(l),d=100-parseFloat(l);"left"===u?o.style("right",h+"%"):o.style("top",d+"%"),c?_.transition().styleTween(u,function(){return t.interpolate(s,l)}).duration("number"==typeof c?c:250):_.style(u,l)}}}function x(t){if(t===n.domain()[0]||t===n.domain()[1])return t;var e=t;if(g)e=k(n(t));else{var r=(t-n.domain()[0])%u;e=t-r,2*Math.abs(r)>=u&&(e+=r>0?u:-u)}return e}function k(t){var e=n.ticks?n.ticks():n.domain(),r=e.map(function(e){return t-n(e)}),i=-1,o=0,a=n.ticks?n.range()[1]:n.rangeExtent()[1];do{i++,Math.abs(r[i])<a&&(a=Math.abs(r[i]),o=i)}while(r[i]>0&&i<r.length-1);return e[o]}function E(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}return b.min=function(t){return arguments.length?(s=t,b):s},b.max=function(t){return arguments.length?(l=t,b):l},b.step=function(t){return arguments.length?(u=t,b):u},b.animate=function(t){return arguments.length?(c=t,b):c},b.orientation=function(t){return arguments.length?(f=t,b):f},b.axis=function(t){return arguments.length?(h=t,b):h},b.margin=function(t){return arguments.length?(d=t,b):d},b.value=function(t){return arguments.length?(e&&w(x(t)),e=t,b):e},b.snap=function(t){return arguments.length?(g=t,b):g},b.scale=function(t){return arguments.length?(n=t,b):n},t.rebind(b,v,"on"),b}},i=[n(255)],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o)},function(t,e){t.exports=d3},function(t,e){!function(){var e=function(t,n){var r=this;this.input=i(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),function(t,e,n){for(var r in e){var i=e[r],o=t.input.getAttribute("data-"+r.toLowerCase());t[r]="number"==typeof i?parseInt(o):!1===i?null!==o:i instanceof Function?null:o,t[r]||0===t[r]||(t[r]=r in n?n[r]:i)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:e.DATA,filter:e.FILTER_CONTAINS,sort:e.SORT_BYLENGTH,item:e.ITEM,replace:e.REPLACE},n=n||{}),this.index=-1,this.container=i.create("div",{className:"awesomplete",around:t}),this.ul=i.create("ul",{hidden:"hidden",inside:this.container}),this.status=i.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),i.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(t){var e=t.keyCode;r.opened&&(13===e&&r.selected?(t.preventDefault(),r.select()):27===e?r.close({reason:"esc"}):38!==e&&40!==e||(t.preventDefault(),r[38===e?"previous":"next"]()))}}),i.bind(this.input.form,{submit:this.close.bind(this,{reason:"submit"})}),i.bind(this.ul,{mousedown:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&0===t.button&&(t.preventDefault(),r.select(e,t.target))}}}),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],e.all.push(this)};function n(t){var e=Array.isArray(t)?{label:t[0],value:t[1]}:"object"==typeof t&&"label"in t&&"value"in t?t:{label:t,value:t};this.label=e.label||e.value,this.value=e.value}e.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if((t=i(t))&&t.children){var e=[];r.apply(t.children).forEach(function(t){if(!t.disabled){var n=t.textContent.trim(),r=t.value||n;""!==r&&e.push({label:t.label||n,value:r})}}),this._list=e}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return!this.ul.hasAttribute("hidden")},close:function(t){this.opened&&(this.ul.setAttribute("hidden",""),this.index=-1,i.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),i.fire(this.input,"awesomplete-open")},next:function(){this.goto(this.index<this.ul.children.length-1?this.index+1:-1)},previous:function(){this.goto(this.selected?this.index-1:this.ul.children.length-1)},goto:function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent,i.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,e){if(t?this.index=i.siblingIndex(t):t=this.ul.children[this.index],t){var n=this.suggestions[this.index];i.fire(this.input,"awesomplete-select",{text:n,origin:e||t})&&(this.replace(n),this.close({reason:"select"}),i.fire(this.input,"awesomplete-selectcomplete",{text:n}))}},evaluate:function(){var t=this,e=this.input.value;e.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(r){return new n(t.data(r,e))}).filter(function(n){return t.filter(n,e)}).sort(this.sort).slice(0,this.maxItems),this.suggestions.forEach(function(n){t.ul.appendChild(t.item(n,e))}),0===this.ul.children.length?this.close({reason:"nomatches"}):this.open()):this.close({reason:"nomatches"})}},e.all=[],e.FILTER_CONTAINS=function(t,e){return RegExp(i.regExpEscape(e.trim()),"i").test(t)},e.FILTER_STARTSWITH=function(t,e){return RegExp("^"+i.regExpEscape(e.trim()),"i").test(t)},e.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:t<e?-1:1},e.ITEM=function(t,e){var n=""===e?t:t.replace(RegExp(i.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>");return i.create("li",{innerHTML:n,"aria-selected":"false"})},e.REPLACE=function(t){this.input.value=t.value},e.DATA=function(t){return t},Object.defineProperty(n.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),n.prototype.toString=n.prototype.valueOf=function(){return""+this.label};var r=Array.prototype.slice;function i(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function o(t,e){return r.call((e||document).querySelectorAll(t))}function a(){o("input.awesomplete").forEach(function(t){new e(t)})}i.create=function(t,e){var n=document.createElement(t);for(var r in e){var o=e[r];if("inside"===r)i(o).appendChild(n);else if("around"===r){var a=i(o);a.parentNode.insertBefore(n,a),n.appendChild(a)}else r in n?n[r]=o:n.setAttribute(r,o)}return n},i.bind=function(t,e){if(t)for(var n in e){var r=e[n];n.split(/\s+/).forEach(function(e){t.addEventListener(e,r)})}},i.fire=function(t,e,n){var r=document.createEvent("HTMLEvents");for(var i in r.initEvent(e,!0,!0),n)r[i]=n[i];return t.dispatchEvent(r)},i.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},i.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},"undefined"!=typeof Document&&("loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)),e.$=i,e.$$=o,"undefined"!=typeof self&&(self.Awesomplete=e),"object"==typeof t&&t.exports&&(t.exports=e)}()},function(t,e,n){var r=n(258);"string"==typeof r&&(r=[[t.id,r,""]]),n(260)(r,{}),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(259)()).push([t.id,".d3-slider {\n    position: relative;\n    font-family: Verdana,Arial,sans-serif;\n    font-size: 1.1em;\n    border: 1px solid #aaaaaa;\n    z-index: 2;\n}\n\n.d3-slider-horizontal {\n    height: .8em;\n}  \n\n.d3-slider-range {\n  background:#2980b9;\n  left:0px;\n  right:0px;\n  height: 0.8em;\n  position: absolute;\n}\n\n.d3-slider-range-vertical {\n  background:#2980b9;\n  left:0px;\n  right:0px;\n  position: absolute;\n  top:0;\n}\n\n.d3-slider-vertical {\n    width: .8em;\n    height: 100px;\n}      \n\n.d3-slider-handle {\n    position: absolute;\n    width: 1.2em;\n    height: 1.2em;\n    border: 1px solid #d3d3d3;\n    border-radius: 4px;\n    background: #eee;\n    background: linear-gradient(to bottom, #eee 0%, #ddd 100%);\n    z-index: 3;\n}\n\n.d3-slider-handle:hover {\n    border: 1px solid #999999;\n}\n\n.d3-slider-horizontal .d3-slider-handle {\n    top: -.3em;\n    margin-left: -.6em;\n}\n\n.d3-slider-axis {\n    position: relative;\n    z-index: 1;    \n}\n\n.d3-slider-axis-bottom {\n    top: .8em;\n}\n\n.d3-slider-axis-right {\n    left: .8em;\n}\n\n.d3-slider-axis path {\n    stroke-width: 0;\n    fill: none;\n}\n\n.d3-slider-axis line {\n    fill: none;\n    stroke: #aaa;\n    shape-rendering: crispEdges;\n}\n\n.d3-slider-axis text {\n    font-size: 11px;\n}\n\n.d3-slider-vertical .d3-slider-handle {\n    left: -.25em;\n    margin-left: 0;\n    margin-bottom: -.6em;      \n}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];t.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},o=i(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),a=i(function(){return document.head||document.getElementsByTagName("head")[0]}),s=null,l=0,u=[];function c(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(g(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],a={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(a):e.push(n[o]={id:o,parts:[a]})}return e}function h(t,e){var n=a(),r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function d(t){t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function p(t){var e=document.createElement("style");return e.type="text/css",h(t,e),e}function g(t,e){var n,r,i;if(e.singleton){var o=l++;n=s||(s=p(e)),r=y.bind(null,n,o,!1),i=y.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return e.rel="stylesheet",h(t,e),e}(e),r=(function(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}).bind(null,n),i=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(e),r=(function(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}).bind(null,n),i=function(){d(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){void 0===(e=e||{}).singleton&&(e.singleton=o()),void 0===e.insertAt&&(e.insertAt="bottom");var n=f(t);return c(n,e),function(t){for(var i=[],o=0;o<n.length;o++)(a=r[n[o].id]).refs--,i.push(a);for(t&&c(f(t),e),o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var s=0;s<a.parts.length;s++)a.parts[s]();delete r[a.id]}}}};var v,m=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function y(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e,n){var r=n(262);"string"==typeof r&&(r=[[t.id,r,""]]),n(260)(r,{}),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(259)()).push([t.id,'[hidden] { display: none; }\n\n.visually-hidden {\n\tposition: absolute;\n\tclip: rect(0, 0, 0, 0);\n}\n\ndiv.awesomplete {\n\tdisplay: inline-block;\n\tposition: relative;\n}\n\ndiv.awesomplete > input {\n\tdisplay: block;\n}\n\ndiv.awesomplete > ul {\n\tposition: absolute;\n\tleft: 0;\n\tz-index: 1;\n\tmin-width: 100%;\n\tbox-sizing: border-box;\n\tlist-style: none;\n\tpadding: 0;\n\tborder-radius: .3em;\n\tmargin: .2em 0 0;\n\tbackground: hsla(0,0%,100%,.9);\n\tbackground: linear-gradient(to bottom right, white, hsla(0,0%,100%,.8));\n\tborder: 1px solid rgba(0,0,0,.3);\n\tbox-shadow: .05em .2em .6em rgba(0,0,0,.2);\n\ttext-shadow: none;\n}\n\ndiv.awesomplete > ul[hidden],\ndiv.awesomplete > ul:empty {\n\tdisplay: none;\n}\n\n@supports (transform: scale(0)) {\n\tdiv.awesomplete > ul {\n\t\ttransition: .3s cubic-bezier(.4,.2,.5,1.4);\n\t\ttransform-origin: 1.43em -.43em;\n\t}\n\t\n\tdiv.awesomplete > ul[hidden],\n\tdiv.awesomplete > ul:empty {\n\t\topacity: 0;\n\t\ttransform: scale(0);\n\t\tdisplay: block;\n\t\ttransition-timing-function: ease;\n\t}\n}\n\n\t/* Pointer */\n\tdiv.awesomplete > ul:before {\n\t\tcontent: "";\n\t\tposition: absolute;\n\t\ttop: -.43em;\n\t\tleft: 1em;\n\t\twidth: 0; height: 0;\n\t\tpadding: .4em;\n\t\tbackground: white;\n\t\tborder: inherit;\n\t\tborder-right: 0;\n\t\tborder-bottom: 0;\n\t\t-webkit-transform: rotate(45deg);\n\t\ttransform: rotate(45deg);\n\t}\n\n\tdiv.awesomplete > ul > li {\n\t\tposition: relative;\n\t\tpadding: .2em .5em;\n\t\tcursor: pointer;\n\t}\n\t\n\tdiv.awesomplete > ul > li:hover {\n\t\tbackground: hsl(200, 40%, 80%);\n\t\tcolor: black;\n\t}\n\t\n\tdiv.awesomplete > ul > li[aria-selected="true"] {\n\t\tbackground: hsl(205, 40%, 40%);\n\t\tcolor: white;\n\t}\n\t\n\t\tdiv.awesomplete mark {\n\t\t\tbackground: hsl(65, 100%, 50%);\n\t\t}\n\t\t\n\t\tdiv.awesomplete li:hover mark {\n\t\t\tbackground: hsl(68, 100%, 41%);\n\t\t}\n\t\t\n\t\tdiv.awesomplete li[aria-selected="true"] mark {\n\t\t\tbackground: hsl(86, 100%, 21%);\n\t\t\tcolor: inherit;\n\t\t}',""])},function(t,e,n){var r=n(224),i=n(264),o=n(269),a=n(270),s=n(271),l=n(272),u=n(274),c=n(276),f=n(277),h=n(3);t.exports=function(t){var e=t.params,n=d3.select(e.root+" .sidebar_wrapper");e.viz.is_expand&&n.style("display","none"),n.append("div").classed("title_section",!0),null!=e.sidebar.title&&n.select(".title_section").append("h4").style("margin-left","20px").style("margin-top","5px").style("margin-bottom","0px").text(e.sidebar.title),n.append("div").style("padding-right","2px").classed("about_section",!0),null!=e.sidebar.about&&n.select(".about_section").append("h5").classed("sidebar_text",!0).style("margin-left","7px").style("margin-top","5px").style("margin-bottom","2px").style("text-align","justify").html(e.sidebar.about),n.append("div").classed("icons_section",!0).style("text-align","center"),t.params.make_modals&&u(e),e.sidebar.icons&&l(t,n),a(e,n),o(n,e),c(n);var d=h.keys(e.viz.possible_filters);d.indexOf("enr_score_type")>-1&&d.sort(function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}),t.slider_functions={},h.each(d,function(e){i(t,e)}),r(t),null!==e.ini_view&&(s(e),e.ini_view=null),f(t)}},function(t,e,n){var r=n(265),i=n(268);t.exports=function(t,e){var n=t.params,o=d3.select(n.root+" .sidebar_wrapper").append("div").classed("div_filters",!0).style("padding-left","10px").style("padding-right","10px");"numerical"==n.viz.possible_filters[e]?r(t,e,o):"categorical"==n.viz.possible_filters[e]&&i(t,e,o)}},function(t,e,n){var r=n(247),i=n(266),o=n(6),a=n(64);d3.slider=n(254);var s=n(3);t.exports=function(t,e,n){var l=t.params,u={},c=s.keys(l.viz.possible_filters);s.each(c,function(t){if(t!=e){var n=o(l.viz.filter_data,t);u[t]=n}});var f=r(l,e);n.append("div").classed("title_"+e,!0).classed("sidebar_text",!0).classed("slider_description",!0).style("margin-top","5px").style("margin-bottom","3px").text(f.text+f.state+f.suffix),n.append("div").classed("slider_"+e,!0).classed("slider",!0).attr("current_state",f.state);var h=a(l,l.network_data.views,u),d=(h=h.sort(function(t,n){return n[e]-t[e]})).length-1,p=0;if(null!==l.requested_view&&e in l.requested_view){var g=l.requested_view[e];if("all"!=g){var v=h.map(function(t){return t[e]}).indexOf(g);v>0&&(p=v)}}var m=d3.slider().value(p).min(0).max(d).step(1).on("slide",function(n,r){y(t,e,h,r)}).on("slideend",function(n,r){y(t,e,h,r)});t.slider_functions[e]=m,d3.select(t.params.root+" .slider_"+e).call(m);var y=s.debounce(i,800)}},function(t,e,n){var r=n(209),i=n(246),o=n(267),a=n(66),s=n(3);t.exports=function(t,e,n,l){if(!1===d3.select(t.params.viz.viz_svg).classed("running_update")){var u=t.params,c=n[l][e];i(t,e,c),u=o(u);var f={};if(f[e]=c,f=a(u,f),s.has(n[0],"enr_score_type")){var h=d3.select(u.root+" .toggle_enr_score_type").attr("current_state");f.enr_score_type=h}r(t,f)}}},function(t,e,n){var r=n(3);t.exports=function(t){var e;return r.each(["row","col"],function(n){e="row"===n?"col":"row",t.viz.inst_order[n]=!1===d3.select(t.root+" .toggle_"+e+"_order .active").empty()?d3.select(t.root+" .toggle_"+e+"_order").select(".active").attr("name"):"clust"}),t}},function(t,e,n){var r=n(66);t.exports=function(t,e,n,i){var o=i.append("div").classed("categorical_filter",!0).classed("toggle_"+n,!0).classed("btn-group-vertical",!0).style("width","100%").style("margin-top","10px").attr("current_state","combined_score"),a=e.viz.filter_data[n],s={combined_score:"Combined Score",pval:"P-Value",zscore:"Z-score"};o.selectAll("button").data(a).enter().append("button").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed(".filter_button",!0).classed("active",function(t){var e=!1;return"combined_score"==t&&(e=!0),e}).attr("name",function(t){return t}).html(function(t){return s[t]}),$(e.root+" .categorical_filter .btn").off().click(function(){d3.selectAll(e.root+" .categorical_filter .btn").classed("active",!1),d3.select(this).classed("active",!0);var t=d3.select(this).attr("name");r(e,{enr_score_type:t}),d3.select(e.root+" .toggle_enr_score_type").attr("current_state",t)})}},function(t,e){t.exports=function(t,e){var n=t.append("div").classed("gene_search_container",!0).style("padding-left","10px").style("padding-right","10px").style("margin-top","10px");n.append("input").classed("form-control",!0).classed("gene_search_box",!0).classed("sidebar_text",!0).attr("type","text").attr("placeholder",e.sidebar.row_search.placeholder).style("height",e.sidebar.row_search.box.height+"px").style("margin-top","10px"),n.append("div").classed("gene_search_button",!0).style("margin-top","5px").attr("data-toggle","buttons").append("button").classed("sidebar_text",!0).html("Search").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed("submit_gene_button",!0).style("width","100%").style("font-size","14px")}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n,i,o,a={row:"Row",col:"Column",both:""},s=e.append("div").style("padding-left","10px").style("padding-right","10px").classed("reorder_section",!0);r.each(t.sim_mat?["both"]:["row","col"],function(e){var l;n={clust:"Cluster",rank:"Rank by Sum",rankvar:"Rank by Variance",ini:"Initial Order",alpha:"Alphabetically"},l="row"===e?"col":"row",i=Object.keys(t.matrix.orders);var u,c=[];r.each(i,function(t){t.indexOf(l)>-1&&(t=t.replace("_row","").replace("_col","")).indexOf("cat_")<0&&c.push(t)}),r.keys(t.viz.filter_data).indexOf("enr_score_type")>-1&&(c=["clust","rank"]),c=(c=r.uniq(c)).sort(),u="both"!=e?" Order":"Reorder Matrix",s.append("div").classed("sidebar_button_text",!0).style("clear","both").style("margin-top","10px").html(a[e]+u),s.append("div").classed("btn-group-vertical",!0).style("width","100%").classed("toggle_"+e+"_order",!0).attr("role","group").selectAll(".button").data(c).enter().append("button").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed("sidebar_button_text",!0).classed("active",function(e){return o=!1,e==t.viz.inst_order[l]&&(o=!0),o}).attr("name",function(t){return t}).html(function(t){return n[t]})})}},function(t,e,n){var r=n(247),i=n(3);t.exports=function(t){i.each(i.keys(t.ini_view),function(e){var n=t.ini_view[e];if("numerical"===t.viz.possible_filters[e]){"all"!=n&&(n=parseInt(n,10)),t.viz.filter_data[e].indexOf(n)<=-1&&(n="all");var i=r(t,e);d3.select(t.root+" .title_"+e).text(i.text+n+i.suffix),d3.select(t.root+" .slider_"+e).attr("current_state",n)}})}},function(t,e,n){var r=n(249),i=n(146),o=n(253),a=n(273);t.exports=function(t,e){var n=t.params,s=r(),l=e.select(".icons_section").style("margin-top","7px").style("margin-left","5%");l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","0px").append("i").classed("fa",!0).classed("fa-share-alt",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){$(n.root+" .share_info").modal("toggle"),$(".share_url").val(window.location.href)}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Share").style("left","0%"),l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","0px").append("i").classed("fa",!0).classed("fa-camera",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){$(n.root+" .picture_info").modal("toggle")}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Take snapshot").style("left","-100%"),l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","0px").append("i").classed("fa",!0).classed("fa fa-cloud-download",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){t.save_matrix()}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Download matrix").style("left","-200%"),l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","-5px").append("i").classed("fa",!0).classed("fa-crop",!0).classed("crop_button",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){if(!1===t.params.dendro_filter.row&&!1===t.params.dendro_filter.col){var e=d3.select(this).classed("fa-crop"),r=d3.select(this).classed("fa-undo");e&&(t.params.crop_filter_nodes={},t.params.crop_filter_nodes.row_nodes=t.params.network_data.row_nodes,t.params.crop_filter_nodes.col_nodes=t.params.network_data.col_nodes,t.brush_crop_matrix(),!1===d3.select(this).classed("active_cropping")?d3.select(this).classed("active_cropping",!0).style("color","red"):(d3.select(this).classed("active_cropping",!1).style("color","#337ab7"),o(t))),r&&(d3.select(n.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!0).classed("fa-undo",!1),t.filter_viz_using_nodes(t.params.crop_filter_nodes),d3.select(t.params.root+" .col_dendro_icons_container").style("display","block"),d3.select(t.params.root+" .row_dendro_icons_container").style("display","block")),i(t,0,0,1)}}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Crop matrix").style("left","-400%"),d3.select(n.root+" .download_buttons").append("p").append("a").html("Download SVG").on("click",function(){!function(){d3.select(n.root+" .expand_button").style("opacity",0);var t=d3.select(n.root+" .viz_svg").attr("title","test2").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML,e=new Blob([t],{type:"image/svg+xml"});s(e,"clustergrammer.svg"),d3.select(n.root+" .expand_button").style("opacity",.4)}()});var u="svg_"+n.root.replace("#","");d3.select(n.root+" .download_buttons").append("p").append("a").html("Download PNG").on("click",function(){d3.select(n.root+" .expand_button").style("opacity",0),a.saveSvgAsPng(document.getElementById(u),"clustergrammer.png"),d3.select(n.root+" .expand_button").style("opacity",.4)})}},function(t,e,n){var r;!function(){var i=void 0!==e&&e||{}||this;function o(t){if(!((e=t)instanceof HTMLElement||e instanceof SVGElement))throw new Error("an HTMLElement or SVGElement is required; got "+t);var e}function a(t,e,n){var r=t.viewBox&&t.viewBox.baseVal&&t.viewBox.baseVal[n]||null!==e.getAttribute(n)&&!e.getAttribute(n).match(/%$/)&&parseInt(e.getAttribute(n))||t.getBoundingClientRect()[n]||parseInt(e.style[n])||parseInt(window.getComputedStyle(t).getPropertyValue(n));return null==r||isNaN(parseFloat(r))?0:r}function s(t){for(var e=window.atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([r],{type:n})}i.prepareSvg=function(t,e,n){o(t),(e=e||{}).scale=e.scale||1,e.responsive=e.responsive||!1;var r="http://www.w3.org/2000/xmlns/";!function(t,e){o(t);var n=t.querySelectorAll("image"),r=n.length,i=function(){0===r&&e()};i();for(var a=0;a<n.length;a++)!function(t){var e=t.getAttributeNS("http://www.w3.org/1999/xlink","href");if(e&&(n=e.value)&&0==n.lastIndexOf("http",0)&&-1==n.lastIndexOf(window.location.host))console.warn("Cannot render embedded images linking to external hosts: "+e.value);else{var n,o=document.createElement("canvas"),a=o.getContext("2d"),s=new Image;s.crossOrigin="anonymous",(e=e||t.getAttribute("href"))?(s.src=e,s.onload=function(){o.width=s.width,o.height=s.height,a.drawImage(s,0,0),t.setAttributeNS("http://www.w3.org/1999/xlink","href",o.toDataURL("image/png")),r--,i()},s.onerror=function(){console.log("Could not load "+e),r--,i()}):(r--,i())}}(n[a])}(t,function(){var i,o,s=document.createElement("div"),l=t.cloneNode(!0);if("svg"==t.tagName)i=e.width||a(t,l,"width"),o=e.height||a(t,l,"height");else{if(!t.getBBox)return void console.error("Attempted to render non-SVG element",t);var u=t.getBBox();i=u.x+u.width,o=u.y+u.height,l.setAttribute("transform",l.getAttribute("transform").replace(/translate\(.*?\)/,""));var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.appendChild(l),l=c}l.setAttribute("version","1.1"),l.getAttribute("xmlns")||l.setAttributeNS(r,"xmlns","http://www.w3.org/2000/svg"),l.getAttribute("xmlns:xlink")||l.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),e.responsive?(l.removeAttribute("width"),l.removeAttribute("height"),l.setAttribute("preserveAspectRatio","xMinYMin meet")):(l.setAttribute("width",i*e.scale),l.setAttribute("height",o*e.scale)),l.setAttribute("viewBox",[e.left||0,e.top||0,i,o].join(" "));for(var f=l.querySelectorAll("foreignObject > *"),h=0;h<f.length;h++)f[h].getAttribute("xmlns")||f[h].setAttributeNS(r,"xmlns","http://www.w3.org/1999/xhtml");s.appendChild(l),function(t,e,n){for(var r=e.selectorRemap,i=e.modifyStyle,o="",a=[],s=document.styleSheets,l=0;l<s.length;l++){try{var u=s[l].cssRules}catch(x){console.warn("Stylesheet could not be loaded: "+s[l].href);continue}if(null!=u)for(var c,f=0;f<u.length;f++,c=null){var h=u[f];if(void 0!==h.style){var d;try{d=h.selectorText}catch(k){console.warn('The following CSS rule has an invalid selector: "'+h+'"',k)}try{d&&(c=t.querySelector(d)||t.parentNode.querySelector(d))}catch(k){console.warn('Invalid CSS selector "'+d+'"',k)}if(c){var p=r?r(h.selectorText):h.selectorText,g=i?i(h.style.cssText):h.style.cssText;o+=p+" { "+g+" }\n"}else if(h.cssText.match(/^@font-face/)){var v=/url\(["']?(.+?)["']?\)/,m=h.cssText.match(v),y=m&&m[1]||"";y.match(/^data:/)&&(y=""),y?(y.startsWith("../")?y=s[l].href+"/../"+y:y.startsWith("./")&&(y=s[l].href+"/."+y),a.push({text:h.cssText,fontUrlRegexp:v,format:_(y),url:y})):o+=h.cssText+"\n"}}}}function _(t){for(var e={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];if(t.indexOf("."+i)>0)return e[i]}return console.error("Unknown font format for "+t+"; Fonts may not be working correctly"),"application/octet-stream"}function b(t){t.length>0?function(e){var n=new XMLHttpRequest;function r(t){console.warn("Failed to load font from: "+e.url),console.warn(t),o+=e.text+"\n",b()}n.addEventListener("load",function(){var r=function(t){for(var e="",r=new Uint8Array(n.response),i=r.byteLength,o=0;o<i;o++)e+=String.fromCharCode(r[o]);return window.btoa(e)}();!function(e,n){o+=e.text.replace(e.fontUrlRegexp,'url("data:'+e.format+";base64,"+n+'")')+"\n",setTimeout(function(){b(t)},0)}(e,r)}),n.addEventListener("error",r),n.addEventListener("abort",r),n.open("GET",e.url),n.responseType="arraybuffer",n.send()}(t.pop()):n(o)}var w;(w=a).length>0?function(t){var e=new XMLHttpRequest;function n(e){console.warn("Failed to load font from: "+t.url),console.warn(e),o+=t.text+"\n",b()}e.addEventListener("load",function(){var n=function(t){for(var n="",r=new Uint8Array(e.response),i=r.byteLength,o=0;o<i;o++)n+=String.fromCharCode(r[o]);return window.btoa(n)}();!function(t,e){o+=t.text.replace(t.fontUrlRegexp,'url("data:'+t.format+";base64,"+e+'")')+"\n",setTimeout(function(){b(w)},0)}(t,n)}),e.addEventListener("error",n),e.addEventListener("abort",n),e.open("GET",t.url),e.responseType="arraybuffer",e.send()}(w.pop()):n(o)}(t,e,function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML="<![CDATA[\n"+t+"\n]]>";var r=document.createElement("defs");if(r.appendChild(e),l.insertBefore(r,l.firstChild),n){var a=s.innerHTML;a=a.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href'),n(a,i,o)}})})},i.svgAsDataUri=function(t,e,n){i.prepareSvg(t,e,function(t){var e,r="data:image/svg+xml;base64,"+window.btoa((e='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+t,e=(e=encodeURIComponent(e)).replace(/%([0-9A-F]{2})/g,function(t,e){var n=String.fromCharCode("0x"+e);return"%"===n?"%25":n}),decodeURIComponent(e)));n&&n(r)})},i.svgAsPngUri=function(t,e,n){o(t),(e=e||{}).encoderType=e.encoderType||"image/png",e.encoderOptions=e.encoderOptions||.8;var r=function(t,r,i){var o,a=document.createElement("canvas"),s=a.getContext("2d");a.width=r,a.height=i,e.canvg?e.canvg(a,t):s.drawImage(t,0,0),e.backgroundColor&&(s.globalCompositeOperation="destination-over",s.fillStyle=e.backgroundColor,s.fillRect(0,0,a.width,a.height));try{o=a.toDataURL(e.encoderType,e.encoderOptions)}catch(l){if("undefined"!=typeof SecurityError&&l instanceof SecurityError||"SecurityError"==l.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw l}n(o)};e.canvg?i.prepareSvg(t,e,r):i.svgAsDataUri(t,e,function(t){var e=new Image;e.onload=function(){r(e,e.width,e.height)},e.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n",window.atob(t.slice(26)),"\n","Open the following link to see browser's diagnosis\n",t)},e.src=t})},i.download=function(t,e){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(s(e),t);else{var n=document.createElement("a");if("download"in n){n.download=t,n.style.display="none",document.body.appendChild(n);try{var r=s(e),i=URL.createObjectURL(r);n.href=i,n.onclick=function(){requestAnimationFrame(function(){URL.revokeObjectURL(i)})}}catch(o){console.warn("This browser does not support object URLs. Falling back to string URL."),n.href=e}n.click(),document.body.removeChild(n)}else window.open(e,"_temp","menubar=no,toolbar=no,status=no")}},i.saveSvg=function(t,e,n){o(t),i.svgAsDataUri(t,n=n||{},function(t){i.download(e,t)})},i.saveSvgAsPng=function(t,e,n){o(t),i.svgAsPngUri(t,n=n||{},function(t){i.download(e,t)})},void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(275);t.exports=function(t){var e=r(t,"share_info");e.header.append("a").attr("target","_blank").attr("href","/clustergrammer/"),e.header.append("h4").classed("modal-title",!0).html("Share the visualization using the current URL:"),e.body.append("input").classed("bootstrap_highlight",!0).classed("share_url",!0);var n=r(t,"picture_info");n.header.append("h4").classed("modal-title",!0).html("Save a snapshot of the visualization"),n.body.append("div").classed("download_buttons",!0);var i=r(t,"dendro_info");i.header.append("h4").classed("modal-title",!0).html("Cluster Information"),i.body.append("g").classed("cluster_info_container",!0),i.body.append("div").classed("dendro_text",!0).append("input").classed("bootstrap_highlight",!0).classed("current_names",!0).style("width","100%")}},function(t,e){t.exports=function(t,e){var n={},r=d3.select(t.root).append("div").classed("modal",!0).classed("fade",!0).classed(e,!0).attr("role","dialog").append("div").classed("modal-dialog",!0).append("div").classed("modal-content",!0);return n.header=r.append("div").classed("modal-header",!0),n.header.append("button").attr("type","button").classed("close",!0).attr("data-dismiss","modal").html("&times;"),n.body=r.append("div").classed("modal-body",!0),n}},function(t,e){t.exports=function(t){var e=t.append("div").classed("opacity_slider_container",!0).style("margin-top","5px").style("padding-left","10px").style("padding-right","10px");e.append("div").classed("sidebar_text",!0).classed("opacity_slider_text",!0).style("margin-bottom","3px").text("Opacity Slider"),e.append("div").classed("slider",!0).classed("opacity_slider",!0)}},function(t,e,n){var r=n(3);t.exports=function(t){var e=t.params;d3.select(e.root+" .sidebar_wrapper").append("div").classed("sidebar_text",!0).style("padding-left","10px").style("padding-top","5px").text("Matrix Values");var n=e.sidebar.width-20,i=1.2*n,o=n+10,a=e.network_data,s=r.max(a.links,function(t){return t.value}).value,l=r.min(a.links,function(t){return t.value}).value,u=d3.select(e.root+" .sidebar_wrapper").append("svg").attr("height","39px").attr("width",i+"px"),c=u.append("defs").append("linearGradient").attr("id","linear-gradient"),f="none";l>=0?(c.append("stop").attr("offset","0%").attr("stop-color","white"),c.append("stop").attr("offset","100%").attr("stop-color","red"),f="all_postiive"):s<=0?(c.append("stop").attr("offset","0%").attr("stop-color","blue"),c.append("stop").attr("offset","100%").attr("stop-color","white"),f="all_negative"):(c.append("stop").attr("offset","0%").attr("stop-color","blue"),c.append("stop").attr("offset","50%").attr("stop-color","white"),c.append("stop").attr("offset","100%").attr("stop-color","red")),u.append("rect").classed("background",!0).attr("height","13px").attr("width",n+"px").attr("fill","url(#linear-gradient)").attr("transform","translate(10, 3)").attr("stroke","grey").attr("stroke-width","0.25px");var h=Math.abs(Math.round(10*e.matrix.max_link)/10);u.append("text").text(function(){return"all_postiive"===f?0:"-"+h.toLocaleString()}).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",300).style("font-size",13).attr("transform","translate(10,33)").attr("text-anchor","start"),u.append("text").text(h.toLocaleString()).text(function(){return"all_negative"===f?0:h.toLocaleString()}).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",300).style("font-size",13).attr("transform","translate("+o+",33)").attr("text-anchor","end")}}]);!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/js",n(n.s=8)}([function(t,e,n){"use strict";n.r(e);var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t},a=function(t){var e=o(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r&&e.documentElement.namespaceURI===r?e.createElement(t):e.createElementNS(n,t)}})(e)};function s(){}var l=function(t){return null==t?s:function(){return this.querySelector(t)}};function u(){return[]}var c=function(t){return null==t?u:function(){return this.querySelectorAll(t)}},f=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var h=document.documentElement;if(!h.matches){var d=h.webkitMatchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector;f=function(t){return function(){return d.call(this,t)}}}}var p=f,g=function(t){return new Array(t.length)};function v(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}v.prototype={constructor:v,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var m="$";function y(t,e,n,r,i,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new v(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function _(t,e,n,r,i,o,a){var s,l,u,c={},f=e.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(l=e[s])&&(d[s]=u=m+a.call(l,l.__data__,s,e),u in c?i[s]=l:c[u]=l);for(s=0;s<h;++s)(l=c[u=m+a.call(t,o[s],s,o)])?(r[s]=l,l.__data__=o[s],c[u]=null):n[s]=new v(t,o[s]);for(s=0;s<f;++s)(l=e[s])&&c[d[s]]===l&&(i[s]=l)}function b(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var w=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function x(t,e){return t.style.getPropertyValue(e)||w(t).getComputedStyle(t,null).getPropertyValue(e)}function k(t){return t.trim().split(/^|\s+/)}function E(t){return t.classList||new z(t)}function z(t){this._node=t,this._names=k(t.getAttribute("class")||"")}function A(t,e){for(var n=E(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function C(t,e){for(var n=E(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function S(){this.textContent=""}function T(){this.innerHTML=""}function M(){this.nextSibling&&this.parentNode.appendChild(this)}function N(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function D(){return null}function I(){var t=this.parentNode;t&&t.removeChild(this)}function O(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function L(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}z.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var P={},B=null;function F(t,e,n){return t=j(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function j(t,e,n){return function(r){var i=B;B=r;try{t.call(this,this.__data__,e,n)}finally{B=i}}}function R(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function H(t,e,n){var r=P.hasOwnProperty(t.type)?F:j;return function(i,o,a){var s,l=this.__on,u=r(e,o,a);if(l)for(var c=0,f=l.length;c<f;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function q(t,e,n,r){var i=B;t.sourceEvent=B,B=t;try{return e.apply(n,r)}finally{B=i}}function W(t,e,n){var r=w(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(P={mouseenter:"mouseover",mouseleave:"mouseout"}));var $=[null];function U(t,e){this._groups=t,this._parents=e}function V(){return new U([[document.documentElement]],$)}U.prototype=V.prototype={constructor:U,select:function(t){"function"!=typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),f=0;f<u;++f)(o=s[f])&&(a=t.call(o,o.__data__,f,s))&&("__data__"in o&&(a.__data__=o.__data__),c[f]=a);return new U(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),i.push(a));return new U(r,i)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new U(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each(function(t){d[++u]=t}),d;var n=e?_:y,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],h=f.length,d=t.call(c,c&&c.__data__,u,r),p=d.length,g=s[u]=new Array(p),v=a[u]=new Array(p);n(c,f,g,v,l[u]=new Array(h),d,e);for(var m,b,w=0,x=0;w<p;++w)if(m=g[w]){for(w>=x&&(x=w+1);!(b=v[x])&&++x<p;);m._next=b||null}}return(a=new U(a,r))._enter=s,a._exit=l,a},enter:function(){return new U(this._enter||this._groups.map(g),this._parents)},exit:function(){return new U(this._exit||this._groups.map(g),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),o=new Array(r),a=0;a<i;++a)for(var s,l=e[a],u=n[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(s=l[h]||u[h])&&(f[h]=s);for(;a<r;++a)o[a]=e[a];return new U(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=b);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new U(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=o(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):x(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=k(t+"");if(arguments.length<2){for(var r=E(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?A:C)(this,t)}}:e?function(t){return function(){A(this,t)}}:function(t){return function(){C(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?S:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(M)},lower:function(){return this.each(N)},append:function(t){var e="function"==typeof t?t:a(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:a(t),r=null==e?D:"function"==typeof e?e:l(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(I)},clone:function(t){return this.select(t?L:O)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?H:R,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return W(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return W(this,t,e)}})(t,e))}};var Y=V,X=function(t){return"string"==typeof t?new U([[document.querySelector(t)]],[document.documentElement]):new U([[t]],$)},K=function(t){return X(a(t).call(document.documentElement))},G=0;function Z(){return new Q}function Q(){this._="@"+(++G).toString(36)}Q.prototype=Z.prototype={constructor:Q,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var J=function(){for(var t,e=B;t=e.sourceEvent;)e=t;return e},tt=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},et=function(t){var e=J();return e.changedTouches&&(e=e.changedTouches[0]),tt(t,e)},nt=function(t){return"string"==typeof t?new U([document.querySelectorAll(t)],[document.documentElement]):new U([null==t?[]:t],$)},rt=function(t,e,n){arguments.length<3&&(n=e,e=J().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return tt(t,r);return null},it=function(t,e){null==e&&(e=J().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=tt(t,e[n]);return i};n.d(e,"create",function(){return K}),n.d(e,"creator",function(){return a}),n.d(e,"local",function(){return Z}),n.d(e,"matcher",function(){return p}),n.d(e,"mouse",function(){return et}),n.d(e,"namespace",function(){return o}),n.d(e,"namespaces",function(){return i}),n.d(e,"clientPoint",function(){return tt}),n.d(e,"select",function(){return X}),n.d(e,"selectAll",function(){return nt}),n.d(e,"selection",function(){return Y}),n.d(e,"selector",function(){return l}),n.d(e,"selectorAll",function(){return c}),n.d(e,"style",function(){return x}),n.d(e,"touch",function(){return rt}),n.d(e,"touches",function(){return it}),n.d(e,"window",function(){return w}),n.d(e,"event",function(){return B}),n.d(e,"customEvent",function(){return q})},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"c",function(){return l}),n.d(e,"h",function(){return u}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return f}),n.d(e,"a",function(){return Object});var r=n(0),i=Object.assign({},r);function o(){return"assembly"in this.config&&/(GCF_|GCA_)/.test(this.config.assembly)}function a(t){return"assembly"in t.config&&!1===/(GCA_)/.test(t.config.assembly)}function s(t){return"assembly"in t.config&&/(GCA_)/.test(t.config.assembly)}function l(){var t,e,n,r=document.scripts,i=location.host.split(":")[0],o=Ideogram.version;if("localhost"!==i&&"127.0.0.1"!==i)return"https://unpkg.com/ideogram@"+o+"/dist/data/bands/native/";for(var a=0;a<r.length;a++)if(n=/ideogram/.test((t=r[a]).src.split("/").slice(-1)),"src"in t&&n)return(e=t.src.split("//"))[0]+"//"+(e="/"+e[1].split("/").slice(0,-2).join("/"))+"/data/bands/native/";return"../data/bands/native/"}function u(t){return Math.round(100*t)/100}function c(t){call(this.onDidRotateCallback,t)}function f(){return i.select(this.selector).node()}},function(t,e,n){"use strict";function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}n.r(e);var i=function(t,e){return fetch(t,e).then(r)};function o(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var a=function(t,e){return fetch(t,e).then(o)},s={},l={},u=34,c=10,f=13;function h(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var d=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,h=0,d=o<=0,p=!1;function g(){if(d)return l;if(p)return p=!1,s;var e,r,i=a;if(t.charCodeAt(i)===u){for(;a++<o&&t.charCodeAt(a)!==u||t.charCodeAt(++a)===u;);return(e=a)>=o?d=!0:(r=t.charCodeAt(a++))===c?p=!0:r===f&&(p=!0,t.charCodeAt(a)===c&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===c)p=!0;else if(r===f)p=!0,t.charCodeAt(a)===c&&++a;else if(r!==n)continue;return t.slice(i,e)}return d=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===c&&--o,t.charCodeAt(o-1)===f&&--o;(r=g())!==l;){for(var v=[];r!==s&&r!==l;)v.push(r),r=g();e&&null==(v=e(v,h++))||i.push(v)}return i}function i(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=h(t);return function(r,i){return e(n(r),i,t)}}(t,e):h(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(o).join(t)].concat(e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}},p=d(",").parse,g=d("\t").parse;function v(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var m=function(t,e){return fetch(t,e).then(v)};function y(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),m(e,n).then(function(e){return t(e,r)})}}function _(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=d(t);return m(e,n).then(function(t){return i.parse(t,r)})}var b=y(p),w=y(g),x=function(t,e){return new Promise(function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t})};function k(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var E=function(t,e){return fetch(t,e).then(k)};function z(t){return function(e,n){return m(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var A=z("application/xml"),C=z("text/html"),S=z("image/svg+xml");n.d(e,"blob",function(){return i}),n.d(e,"buffer",function(){return a}),n.d(e,"dsv",function(){return _}),n.d(e,"csv",function(){return b}),n.d(e,"tsv",function(){return w}),n.d(e,"image",function(){return x}),n.d(e,"json",function(){return E}),n.d(e,"text",function(){return m}),n.d(e,"xml",function(){return A}),n.d(e,"html",function(){return C}),n.d(e,"svg",function(){return S})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return getTaxidFromEutils}),__webpack_require__.d(__webpack_exports__,"d",function(){return setTaxidAndAssemblyAndChromosomes}),__webpack_require__.d(__webpack_exports__,"c",function(){return getTaxids}),__webpack_require__.d(__webpack_exports__,"e",function(){return setTaxidData}),__webpack_require__.d(__webpack_exports__,"a",function(){return getOrganismFromEutils});var d3_fetch__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),d3=Object.assign({},d3_fetch__WEBPACK_IMPORTED_MODULE_0__);function getTaxidFromEutils(t){var e,n=this;d3.json(n.esearch+"&db=taxonomy&term="+n.config.organism).then(function(r){return e=r.esearchresult.idlist[0],void 0===n.config.taxids?n.config.taxids=[e]:n.config.taxids.push(e),t(e)})}function setTaxidData(taxid){var organism,dataDir,urlOrg,taxids,ideo=this;organism=ideo.config.organism,dataDir=ideo.config.dataDir,urlOrg=organism.replace(" ","-"),taxids=[taxid],ideo.organisms[taxid]={commonName:"",scientificName:organism,scientificNameAbbr:""};var fullyBandedTaxids=["9606","10090","10116"];fullyBandedTaxids.includes(taxid)&&!ideo.config.showFullyBanded&&(urlOrg+="-no-bands");var chromosomesUrl=dataDir+urlOrg+".js",promise2=new Promise(function(t,e){fetch(chromosomesUrl).then(function(n){if(!1!==n.ok)return n.text().then(function(e){t(e)});e(Error("Fetch failed for "+chromosomesUrl))})});return promise2.then(function(data){var asmAndChrTaxidsArray=[""],chromosomes=[],seenChrs={},chr;eval(data);for(var i=0;i<chrBands.length;i++)chr=chrBands[i].split(" ")[0],chr in seenChrs||(chromosomes.push({name:chr,type:"nuclear"}),seenChrs[chr]=1);return chromosomes=chromosomes.sort(Ideogram.sortChromosomes),asmAndChrTaxidsArray.push(chromosomes),asmAndChrTaxidsArray.push(taxids),ideo.coordinateSystem="iscn",asmAndChrTaxidsArray},function(){return new Promise(function(t){ideo.coordinateSystem="bp",ideo.getAssemblyAndChromosomesFromEutils(t)})})}function setTaxidAndAssemblyAndChromosomes(t){var e,n,r,i=this;new Promise(function(t){i.getTaxidFromEutils(t)}).then(function(t){return i.setTaxidData(n=t)}).then(function(o){e=o[0],r=i.config.taxids,i.config.chromosomes=o[1],i.organisms[n].assemblies={default:e},t(r)})}function prepareTmpChrsAndTaxids(t){var e,n,r,i,o,a,s=t.config;for(n=[],r={},e=s.multiorganism?s.organism:[s.organism],i=0;i<e.length;i++)for(a in o=e[i],t.organisms)t.organisms[a].commonName.toLowerCase()===o&&(n.push(a),s.multiorganism&&(r[a]=s.chromosomes[o]));return[r,n]}function getTaxidsForOrganismInConfig(t,e,n){var r;[r,t]=prepareTmpChrsAndTaxids(n),0===t.length||n.assemblyIsAccession()&&/GCA_/.test(n.config.assembly)?n.setTaxidAndAssemblyAndChromosomes(e):(n.config.taxids=t,n.config.multiorganism&&(n.config.chromosomes=r),e(t))}function getIsMultiorganism(t,e){return"organism"in e.config&&e.config.organism instanceof Array||t&&e.config.taxid instanceof Array}function getTaxidsForOrganismNotInConfig(t,e,n,r){r.config.multiorganism?(r.coordinateSystem="bp",e&&(t=r.config.taxid)):(e&&(t=[r.config.taxid]),r.config.taxids=t),n(t)}function getTaxids(t){var e;this.config.multiorganism=getIsMultiorganism(e="taxid"in this.config,this),"organism"in this.config?getTaxidsForOrganismInConfig(void 0,t,this):getTaxidsForOrganismNotInConfig(void 0,e,t,this)}function getOrganismFromEutils(t){var e,n,r=this;d3.json(r.esummary+"&db=taxonomy&id="+(n=r.config.organism)).then(function(i){return e=i.result[String(n)].commonname,r.config.organism=e,t(e)})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return parseBands});var _lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);function getDelimiterTsvLinesAndInit(source,content){var delimiter,tsvLines,init;return"undefined"==typeof chrBands&&"native"!==source?(delimiter=/\t/,tsvLines=content.split(/\r\n|\n/),init=1):(delimiter=/ /,tsvLines="native"===source?eval(content):content,init=0),[delimiter,tsvLines,init]}function updateChromosomes(t){var e,n;if(t instanceof Array&&"object"==typeof t[0]){for(e=[],n=0;n<t.length;n++)e.push(t[n].name);t=e}return t}function getLineObject(t,e,n,r){return{chr:t,bp:{start:parseInt(e[5],10),stop:parseInt(e[6],10)},iscn:{start:parseInt(e[3],10),stop:parseInt(e[4],10)},px:{start:-1,stop:-1,width:-1},name:e[1]+e[2],stain:n,taxid:r}}function getStain(t){var e=t[7];return t[8]&&(e+=t[8]),e}function updateLines(t,e,n){var r,i;return(r=e[0])in t==0&&(t[r]=[]),i=getLineObject(r,e,getStain(e),n),t[r].push(i),t}function parseBands(t,e,n){var r,i,o,a,s,l,u,c={};for("window.chrBands"===t.slice(0,15)&&(u="native"),n=updateChromosomes(n),[r,i,l]=getDelimiterTsvLinesAndInit(u,t),s=l;s<i.length;s++)a=(o=i[s].split(r))[0],void 0!==n&&-1===n.indexOf(a)||(c=updateLines(c,o,e));return c}},function(module,__webpack_exports__,__webpack_require__){"use strict";function setBandData(t,e,n,r){var i,o,a;for(i in e)t.includes(a=e[i])&&""!==a&&(o=i);r.bandData[o]=n}function fetchBands(bandDataFileNames,taxid,t0,ideo){var bandDataUrl=ideo.config.dataDir+bandDataFileNames[taxid];ideo.numBandDataResponses||(ideo.numBandDataResponses=0),fetch(bandDataUrl).then(function(response){return response.text().then(function(rawBands){if(delete window.chrBands,eval(rawBands),setBandData(response.url,bandDataFileNames,chrBands,ideo),ideo.numBandDataResponses+=1,ideo.numBandDataResponses===ideo.config.taxids.length){var bandsArray=ideo.processBandData();ideo.writeContainer(bandsArray,taxid,t0),delete ideo.numBandDataResponses}})})}__webpack_require__.d(__webpack_exports__,"a",function(){return fetchBands})},function(t,e,n){t.exports=n(7).crossfilter},function(t,e){!function(t){function e(t){return t}function n(t,e){for(var n=0,r=e.length,i=new Array(r);n<r;++n)i[n]=t[e[n]];return i}k.version="1.3.12",k.permute=n;var r=k.bisect=i(e);function i(t){function e(e,n,r,i){for(;r<i;){var o=r+i>>>1;n<t(e[o])?i=o:r=o+1}return r}return e.right=e,e.left=function(e,n,r,i){for(;r<i;){var o=r+i>>>1;t(e[o])<n?r=o+1:i=o}return r},e}function o(t){function e(t,e,r){for(var i=r-e,o=1+(i>>>1);--o>0;)n(t,o,i,e);return t}function n(e,n,r,i){for(var o,a=e[--i+n],s=t(a);(o=n<<1)<=r&&(o<r&&t(e[i+o])>t(e[i+o+1])&&o++,!(s<=t(e[i+o])));)e[i+n]=e[i+o],n=o;e[i+n]=a}return e.sort=function(t,e,r){for(var i,o=r-e;--o>0;)i=t[e],t[e]=t[e+o],t[e+o]=i,n(t,1,o,e);return t},e}function a(t){var e=o(t);return function(n,r,i,o){var a,s,l,u=new Array(o=Math.min(i-r,o));for(s=0;s<o;++s)u[s]=n[r++];if(e(u,0,o),r<i){a=t(u[0]);do{t(l=n[r])>a&&(u[0]=l,a=t(e(u,0,o)[0]))}while(++r<i)}return u}}function s(t){return function(e,n,r){for(var i=n+1;i<r;++i){for(var o=i,a=e[i],s=t(a);o>n&&t(e[o-1])>s;--o)e[o]=e[o-1];e[o]=a}return e}}function l(t){var e=s(t);return function n(r,i,o){return(o-i<u?e:function(e,r,i){var o,a=(i-r)/6|0,s=r+a,l=i-1-a,u=r+i-1>>1,c=u-a,f=u+a,h=e[s],d=t(h),p=e[c],g=t(p),v=e[u],m=t(v),y=e[f],_=t(y),b=e[l],w=t(b);d>g&&(o=h,h=p,p=o,o=d,d=g,g=o),_>w&&(o=y,y=b,b=o,o=_,_=w,w=o),d>m&&(o=h,h=v,v=o,o=d,d=m,m=o),g>m&&(o=p,p=v,v=o,o=g,g=m,m=o),d>_&&(o=h,h=y,y=o,o=d,d=_,_=o),m>_&&(o=v,v=y,y=o,o=m,m=_,_=o),g>w&&(o=p,p=b,b=o,o=g,g=w,w=o),g>m&&(o=p,p=v,v=o,o=g,g=m,m=o),_>w&&(o=y,y=b,b=o,o=_,_=w,w=o);var x=p,k=g,E=y,z=_;e[s]=h,e[c]=e[r],e[u]=v,e[f]=e[i-1],e[l]=b;var A=r+1,C=i-2,S=k<=z&&k>=z;if(S){for(var T=A;T<=C;++T)if((D=t(N=e[T]))<k)T!==A&&(e[T]=e[A],e[A]=N),++A;else if(D>k)for(;;){if(!((I=t(e[C]))>k)){if(I<k){e[T]=e[A],e[A++]=e[C],e[C--]=N;break}e[T]=e[C],e[C--]=N;break}C--}}else for(T=A;T<=C;T++)if((D=t(N=e[T]))<k)T!==A&&(e[T]=e[A],e[A]=N),++A;else if(D>z)for(;;){if(!((I=t(e[C]))>z)){I<k?(e[T]=e[A],e[A++]=e[C],e[C--]=N):(e[T]=e[C],e[C--]=N);break}if(--C<T)break}if(e[r]=e[A-1],e[A-1]=x,e[i-1]=e[C+1],e[C+1]=E,n(e,r,A-1),n(e,C+2,i),S)return e;if(A<s&&C>l){for(var M;(M=t(e[A]))<=k&&M>=k;)++A;for(;(I=t(e[C]))<=z&&I>=z;)--C;for(T=A;T<=C;T++){var N,D;if((D=t(N=e[T]))<=k&&D>=k)T!==A&&(e[T]=e[A],e[A]=N),A++;else if(D<=z&&D>=z)for(;;){var I;if(!((I=t(e[C]))<=z&&I>=z)){I<k?(e[T]=e[A],e[A++]=e[C],e[C--]=N):(e[T]=e[C],e[C--]=N);break}if(--C<T)break}}}return n(e,A,C+1)})(r,i,o)}}r.by=i,(k.heap=o(e)).by=o,(k.heapselect=a(e)).by=a,(k.insertionsort=s(e)).by=s,(k.quicksort=l(e)).by=l;var u=32,c=g,f=g,h=g,d=function(t,e){for(var n=t.length;n<e;)t[n++]=0;return t},p=function(t,e){if(e>32)throw new Error("invalid array width!");return t};function g(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function v(t){return[0,t.length]}function m(){return null}function y(){return 0}function _(t){return t+1}function b(t){return t-1}function w(t){return function(e,n){return e+ +t(n)}}function x(t){return function(e,n){return e-t(n)}}function k(){var t={add:C,remove:function(){for(var t=E(s,s),e=[],n=0,r=0;n<s;++n)h[n]?t[n]=r++:e.push(n);var o;for(g.forEach(function(t){t(0,[],e)}),A.forEach(function(e){e(t)}),n=0,r=0;n<s;++n)(o=h[n])&&(n!==r&&(h[r]=o,i[r]=i[n]),++r);for(i.length=r;s>r;)h[--s]=0},dimension:function(t){var c,C,S,T,M,N={filter:function(t){return null==t?V():Array.isArray(t)?U(t):"function"==typeof t?Y(t):$(t)},filterExact:$,filterRange:U,filterFunction:Y,filterAll:V,top:function(t){for(var e,n=[],r=j;--r>=F&&t>0;)h[e=C[r]]||(n.push(i[e]),--t);return n},bottom:function(t){for(var e,n=[],r=F;r<j&&t>0;)h[e=C[r]]||(n.push(i[e]),--t),r++;return n},group:K,groupAll:function(){var t=K(m),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:G,remove:G},D=~u&-~u,I=~D,O=l(function(t){return S[t]}),L=v,P=[],B=[],F=0,j=0;function R(e,r,i){S=e.map(t),T=O(function(t){for(var e=E(t,t),n=-1;++n<t;)e[n]=n;return e}(i),0,i),S=n(S,T);var o,a=L(S),l=a[0],u=a[1];if(M)for(o=0;o<i;++o)M(S[o],o)||(h[T[o]+r]|=D);else{for(o=0;o<l;++o)h[T[o]+r]|=D;for(o=u;o<i;++o)h[T[o]+r]|=D}if(!r)return c=S,C=T,F=l,void(j=u);var f=c,d=C,p=0,g=0;for(c=new Array(s),C=E(s,s),o=0;p<r&&g<i;++o)f[p]<S[g]?(c[o]=f[p],C[o]=d[p++]):(c[o]=S[g],C[o]=T[g++]+r);for(;p<r;++p,++o)c[o]=f[p],C[o]=d[p];for(;g<i;++g,++o)c[o]=S[g],C[o]=T[g]+r;a=L(c),F=a[0],j=a[1]}function H(t,e,n){P.forEach(function(t){t(S,T,e,n)}),S=T=null}function q(t){for(var e,n=0,r=0;n<s;++n)h[e=C[n]]&&(n!==r&&(c[r]=c[n]),C[r]=t[e],++r);for(c.length=r;r<s;)C[r++]=0;var i=L(c);F=i[0],j=i[1]}function W(t){var e=t[0],n=t[1];if(M)return M=null,X(function(t,r){return e<=r&&r<n}),F=e,j=n,N;var r,i,o,a=[],s=[];if(e<F)for(r=e,i=Math.min(F,n);r<i;++r)h[o=C[r]]^=D,a.push(o);else if(e>F)for(r=F,i=Math.min(e,j);r<i;++r)h[o=C[r]]^=D,s.push(o);if(n>j)for(r=Math.max(e,j),i=n;r<i;++r)h[o=C[r]]^=D,a.push(o);else if(n<j)for(r=Math.max(F,n),i=j;r<i;++r)h[o=C[r]]^=D,s.push(o);return F=e,j=n,g.forEach(function(t){t(D,a,s)}),N}function $(t){return W((L=function(t,e){return function(n){var r=n.length;return[t.left(n,e,0,r),t.right(n,e,0,r)]}}(r,t))(c))}function U(t){return W((L=function(t,e){var n=e[0],r=e[1];return function(e){var i=e.length;return[t.left(e,n,0,i),t.left(e,r,0,i)]}}(r,t))(c))}function V(){return W((L=v)(c))}function Y(t){return L=v,X(M=t),F=0,j=s,N}function X(t){var e,n,r,i=[],o=[];for(e=0;e<s;++e)!(h[n=C[e]]&D)^!!(r=t(c[e],e))&&(r?(h[n]&=I,i.push(n)):(h[n]|=D,o.push(n)));g.forEach(function(t){t(D,i,o)})}function K(t){var n={top:function(t){var e=u(V(),0,r.length,t);return f.sort(e,0,e.length)},all:V,reduce:Y,reduceCount:X,reduceSum:function(t){return Y(w(t),x(t),y)},order:K,orderNatural:function(){return K(e)},size:function(){return N},dispose:G,remove:G};B.push(n);var r,l,u,f,v,k,S,T=8,M=z(T),N=0,O=m,L=m,F=!0,j=t===m;function R(e,n,o,a){var u,c,f,y,_,b,w=r,x=E(N,M),k=v,A=S,C=N,D=0,P=0;for(F&&(k=A=m),r=new Array(N),N=0,l=C>1?d(l,s):E(s,M),C&&(f=(c=w[0]).key);P<a&&!((y=t(e[P]))>=y);)++P;for(;P<a;){for(c&&f<=y?(_=c,b=f,x[D]=N,(c=w[++D])&&(f=c.key)):(_={key:y,value:A()},b=y),r[N]=_;!(y>b||(l[u=n[P]+o]=N,h[u]&I||(_.value=k(_.value,i[u])),++P>=a));)y=t(e[P]);B()}for(;D<C;)r[x[D]=N]=w[D++],B();if(N>D)for(D=0;D<o;++D)l[D]=x[l[D]];function B(){++N===M&&(x=p(x,T<<=1),l=p(l,T),M=z(T))}u=g.indexOf(O),N>1?(O=q,L=$):(!N&&j&&(N=1,r=[{key:null,value:A()}]),1===N?(O=W,L=U):(O=m,L=m),l=null),g[u]=O}function H(){if(N>1){for(var t=N,e=r,n=E(t,t),i=0,o=0;i<s;++i)h[i]&&(n[l[o]=l[i]]=1,++o);for(r=[],N=0,i=0;i<t;++i)n[i]&&(n[i]=N++,r.push(e[i]));if(N>1)for(i=0;i<o;++i)l[i]=n[l[i]];else l=null;g[g.indexOf(O)]=N>1?(L=$,O=q):1===N?(L=U,O=W):L=O=m}else if(1===N){if(j)return;for(i=0;i<s;++i)if(h[i])return;r=[],N=0,g[g.indexOf(O)]=O=L=m}}function q(t,e,n){if(t!==D&&!F){var o,a,s,u;for(o=0,s=e.length;o<s;++o)h[a=e[o]]&I||((u=r[l[a]]).value=v(u.value,i[a]));for(o=0,s=n.length;o<s;++o)(h[a=n[o]]&I)===t&&((u=r[l[a]]).value=k(u.value,i[a]))}}function W(t,e,n){if(t!==D&&!F){var o,a,s,l=r[0];for(o=0,s=e.length;o<s;++o)h[a=e[o]]&I||(l.value=v(l.value,i[a]));for(o=0,s=n.length;o<s;++o)(h[a=n[o]]&I)===t&&(l.value=k(l.value,i[a]))}}function $(){var t,e;for(t=0;t<N;++t)r[t].value=S();for(t=0;t<s;++t)h[t]&I||((e=r[l[t]]).value=v(e.value,i[t]))}function U(){var t,e=r[0];for(e.value=S(),t=0;t<s;++t)h[t]&I||(e.value=v(e.value,i[t]))}function V(){return F&&(L(),F=!1),r}function Y(t,e,r){return v=t,k=e,S=r,F=!0,n}function X(){return Y(_,b,y)}function K(t){function e(e){return t(e.value)}return u=a(e),f=o(e),n}function G(){var t=g.indexOf(O);return t>=0&&g.splice(t,1),(t=P.indexOf(R))>=0&&P.splice(t,1),(t=A.indexOf(H))>=0&&A.splice(t,1),n}return arguments.length<1&&(t=e),g.push(O),P.push(R),A.push(H),R(c,C,0,s),X().orderNatural()}function G(){B.forEach(function(t){t.dispose()});var t=k.indexOf(R);return t>=0&&k.splice(t,1),(t=k.indexOf(H))>=0&&k.splice(t,1),(t=A.indexOf(q))>=0&&A.splice(t,1),u&=I,V()}return k.unshift(R),k.push(H),A.push(q),u|=D,(f>=32?!D:u&-(1<<f))&&(h=p(h,f<<=1)),R(i,0,s),H(0,0,s),N},groupAll:function(){var t,e,n,r,o={reduce:c,reduceCount:f,reduceSum:function(t){return c(w(t),x(t),y)},value:function(){return a&&(function(){var n;for(t=r(),n=0;n<s;++n)h[n]||(t=e(t,i[n]))}(),a=!1),t},dispose:d,remove:d},a=!0;function l(n,r){var o;if(!a)for(o=r;o<s;++o)h[o]||(t=e(t,i[o]))}function u(r,o,s){var l,u,c;if(!a){for(l=0,c=o.length;l<c;++l)h[u=o[l]]||(t=e(t,i[u]));for(l=0,c=s.length;l<c;++l)h[u=s[l]]===r&&(t=n(t,i[u]))}}function c(t,i,s){return e=t,n=i,r=s,a=!0,o}function f(){return c(_,b,y)}function d(){var t=g.indexOf(u);return t>=0&&g.splice(t),(t=k.indexOf(l))>=0&&k.splice(t),o}return g.push(u),k.push(l),l(0,0),f()},size:function(){return s}},i=[],s=0,u=0,f=8,h=c(0),g=[],k=[],A=[];function C(e){var n=s,r=e.length;return r&&(i=i.concat(e),h=d(h,s+=r),k.forEach(function(t){t(e,n,r)})),t}return arguments.length?C(arguments[0]):t}function E(t,e){return(e<257?c:e<65537?f:h)(t)}function z(t){return 8===t?256:16===t?65536:4294967296}"undefined"!=typeof Uint8Array&&(c=function(t){return new Uint8Array(t)},f=function(t){return new Uint16Array(t)},h=function(t){return new Uint32Array(t)},d=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},p=function(t,e){var n;switch(e){case 16:n=f(t.length);break;case 32:n=h(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),t.crossfilter=k}(void 0!==e&&e||this)},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"dispatch",function(){return h});var i={};n.r(i),n.d(i,"brush",function(){return tn}),n.d(i,"brushX",function(){return Qe}),n.d(i,"brushY",function(){return Je}),n.d(i,"brushSelection",function(){return Ze});var o=n(0),a=n(2),s={value:function(){}};function l(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new u(r)}function u(t){this._=t}function c(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function f(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=s,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}u.prototype=l.prototype={constructor:u,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=f(r[n],t.name,e);else if(null==e)for(n in r)r[n]=f(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=c(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new u(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var h=l,d=function(){o.event.preventDefault(),o.event.stopImmediatePropagation()},p=function(t){var e=t.document.documentElement,n=Object(o.select)(t).on("dragstart.drag",d,!0);"onselectstart"in e?n.on("selectstart.drag",d,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function g(t,e){var n=t.document.documentElement,r=Object(o.select)(t).on("dragstart.drag",null);e&&(r.on("click.drag",d,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var v=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function m(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function y(){}var _="\\s*([+-]?\\d+)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",w="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x=/^#([0-9a-f]{3})$/,k=/^#([0-9a-f]{6})$/,E=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),z=new RegExp("^rgb\\("+[w,w,w]+"\\)$"),A=new RegExp("^rgba\\("+[_,_,_,b]+"\\)$"),C=new RegExp("^rgba\\("+[w,w,w,b]+"\\)$"),S=new RegExp("^hsl\\("+[b,w,w]+"\\)$"),T=new RegExp("^hsla\\("+[b,w,w,b]+"\\)$"),M={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function N(t){var e;return t=(t+"").trim().toLowerCase(),(e=x.exec(t))?new P((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=k.exec(t))?D(parseInt(e[1],16)):(e=E.exec(t))?new P(e[1],e[2],e[3],1):(e=z.exec(t))?new P(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=A.exec(t))?I(e[1],e[2],e[3],e[4]):(e=C.exec(t))?I(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=S.exec(t))?F(e[1],e[2]/100,e[3]/100,1):(e=T.exec(t))?F(e[1],e[2]/100,e[3]/100,e[4]):M.hasOwnProperty(t)?D(M[t]):"transparent"===t?new P(NaN,NaN,NaN,0):null}function D(t){return new P(t>>16&255,t>>8&255,255&t,1)}function I(t,e,n,r){return r<=0&&(t=e=n=NaN),new P(t,e,n,r)}function O(t){return t instanceof y||(t=N(t)),t?new P((t=t.rgb()).r,t.g,t.b,t.opacity):new P}function L(t,e,n,r){return 1===arguments.length?O(t):new P(t,e,n,null==r?1:r)}function P(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function B(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function F(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,r)}function j(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof y||(t=N(t)),!t)return new R;if(t instanceof R)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new R(a,s,l,t.opacity)}(t):new R(t,e,n,null==r?1:r)}function R(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function H(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}v(y,N,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),v(P,L,m(y,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+B(this.r)+B(this.g)+B(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),v(R,j,m(y,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new R(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new P(H(t>=240?t-240:t+120,i,r),H(t,i,r),H(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var q=Math.PI/180,W=180/Math.PI,$=.96422,U=1,V=.82521,Y=4/29,X=6/29,K=3*X*X,G=X*X*X;function Z(t){if(t instanceof Q)return new Q(t.l,t.a,t.b,t.opacity);if(t instanceof it){if(isNaN(t.h))return new Q(t.l,0,0,t.opacity);var e=t.h*q;return new Q(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof P||(t=O(t));var n,r,i=nt(t.r),o=nt(t.g),a=nt(t.b),s=J((.2225045*i+.7168786*o+.0606169*a)/U);return i===o&&o===a?n=r=s:(n=J((.4360747*i+.3850649*o+.1430804*a)/$),r=J((.0139322*i+.0971045*o+.7141733*a)/V)),new Q(116*s-16,500*(n-s),200*(s-r),t.opacity)}function Q(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function J(t){return t>G?Math.pow(t,1/3):t/K+Y}function tt(t){return t>X?t*t*t:K*(t-Y)}function et(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function nt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function rt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof it)return new it(t.h,t.c,t.l,t.opacity);if(t instanceof Q||(t=Z(t)),0===t.a&&0===t.b)return new it(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*W;return new it(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new it(t,e,n,null==r?1:r)}function it(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}v(Q,function(t,e,n,r){return 1===arguments.length?Z(t):new Q(t,e,n,null==r?1:r)},m(y,{brighter:function(t){return new Q(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Q(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new P(et(3.1338561*(e=$*tt(e))-1.6168667*(t=U*tt(t))-.4906146*(n=V*tt(n))),et(-.9787684*e+1.9161415*t+.033454*n),et(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),v(it,rt,m(y,{brighter:function(t){return new it(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new it(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Z(this).rgb()}}));var ot=1.78277,at=-.29227,st=-.90649,lt=1.97294,ut=lt*st,ct=lt*ot,ft=ot*at- -.14861*st;function ht(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof dt)return new dt(t.h,t.s,t.l,t.opacity);t instanceof P||(t=O(t));var e=t.g/255,n=t.b/255,r=(ft*n+ut*(t.r/255)-ct*e)/(ft+ut-ct),i=n-r,o=(lt*(e-r)-at*i)/st,a=Math.sqrt(o*o+i*i)/(lt*r*(1-r)),s=a?Math.atan2(o,i)*W-120:NaN;return new dt(s<0?s+360:s,a,r,t.opacity)}(t):new dt(t,e,n,null==r?1:r)}function dt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function pt(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}v(dt,ht,m(y,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new dt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new dt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*q,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new P(255*(e+n*(-.14861*r+ot*i)),255*(e+n*(at*r+st*i)),255*(e+n*(lt*r)),this.opacity)}}));var gt=function(t){return function(){return t}};function vt(t,e){return function(n){return t+n*e}}function mt(t,e){var n=e-t;return n?vt(t,n>180||n<-180?n-360*Math.round(n/360):n):gt(isNaN(t)?e:t)}function yt(t,e){var n=e-t;return n?vt(t,n):gt(isNaN(t)?e:t)}var _t=function t(e){var n=function(t){return 1==(t=+t)?yt:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):gt(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=L(t)).r,(e=L(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=yt(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function bt(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=L(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}bt(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1];return pt((n-r/e)*e,r>0?t[r-1]:2*i-o,i,o,r<e-1?t[r+2]:2*o-i)}}),bt(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return pt((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}});var wt,xt,kt,Et,zt=function(t,e){return e-=t=+t,function(n){return t+e*n}},At=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ct=new RegExp(At.source,"g"),St=function(t,e){var n,r,i,o=At.lastIndex=Ct.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=At.exec(t))&&(r=Ct.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:zt(n,r)})),o=Ct.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})},Tt=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?gt(e):("number"===r?zt:"string"===r?(n=N(e))?(e=n,_t):St:e instanceof N?_t:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Tt(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Tt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:zt)(t,e)},Mt=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},Nt=180/Math.PI,Dt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},It=function(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Nt,skewX:Math.atan(l)*Nt,scaleX:a,scaleY:s}};function Ot(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:zt(t,i)},{i:l-2,x:zt(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),l.push({i:n.push(i(n)+"rotate(",null,r)-2,x:zt(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s),function(t,e,n,o){t!==e?l.push({i:n.push(i(n)+"skewX(",null,r)-2,x:zt(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:zt(t,n)},{i:s-2,x:zt(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Lt=Ot(function(t){return"none"===t?Dt:(wt||(wt=document.createElement("DIV"),xt=document.documentElement,kt=document.defaultView),wt.style.transform=t,t=kt.getComputedStyle(xt.appendChild(wt),null).getPropertyValue("transform"),xt.removeChild(wt),t=t.slice(7,-1).split(","),It(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Pt=Ot(function(t){return null==t?Dt:(Et||(Et=document.createElementNS("http://www.w3.org/2000/svg","g")),Et.setAttribute("transform",t),(t=Et.transform.baseVal.consolidate())?It((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Dt)},", ",")",")");function Bt(t){return function(e,n){var r=t((e=j(e)).h,(n=j(n)).h),i=yt(e.s,n.s),o=yt(e.l,n.l),a=yt(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function Ft(t){return function(e,n){var r=t((e=rt(e)).h,(n=rt(n)).h),i=yt(e.c,n.c),o=yt(e.l,n.l),a=yt(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function jt(t){return function e(n){function r(e,r){var i=t((e=ht(e)).h,(r=ht(r)).h),o=yt(e.s,r.s),a=yt(e.l,r.l),s=yt(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}Math,Bt(mt),Bt(yt),Ft(mt),Ft(yt),jt(mt);var Rt,Ht,qt=jt(yt),Wt=0,$t=0,Ut=0,Vt=1e3,Yt=0,Xt=0,Kt=0,Gt="object"==typeof performance&&performance.now?performance:Date,Zt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qt(){return Xt||(Zt(Jt),Xt=Gt.now()+Kt)}function Jt(){Xt=0}function te(){this._call=this._time=this._next=null}function ee(t,e,n){var r=new te;return r.restart(t,e,n),r}function ne(){Xt=(Yt=Gt.now())+Kt,Wt=$t=0;try{!function(){Qt(),++Wt;for(var t,e=Rt;e;)(t=Xt-e._time)>=0&&e._call.call(null,t),e=e._next;--Wt}()}finally{Wt=0,function(){for(var t,e,n=Rt,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Rt=e);Ht=t,ie(r)}(),Xt=0}}function re(){var t=Gt.now(),e=t-Yt;e>Vt&&(Kt-=e,Yt=t)}function ie(t){Wt||($t&&($t=clearTimeout($t)),t-Xt>24?(t<1/0&&($t=setTimeout(ne,t-Gt.now()-Kt)),Ut&&(Ut=clearInterval(Ut))):(Ut||(Yt=Gt.now(),Ut=setInterval(re,Vt)),Wt=1,Zt(ne)))}te.prototype=ee.prototype={constructor:te,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Qt():+n)+(null==e?0:+e),this._next||Ht===this||(Ht?Ht._next=this:Rt=this,Ht=this),this._call=t,this._time=n,ie()},stop:function(){this._call&&(this._call=null,this._time=1/0,ie())}};var oe=function(t,e,n){var r=new te;return r.restart(function(n){r.stop(),t(n+e)},e=null==e?0:+e,n),r},ae=h("start","end","interrupt"),se=[],le=0,ue=1,ce=2,fe=3,he=4,de=5,pe=6,ge=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(l){var u,c,f,h;if(n.state!==ue)return s();for(u in i)if((h=i[u]).name===n.name){if(h.state===fe)return oe(o);h.state===he?(h.state=pe,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[u]):+u<e&&(h.state=pe,h.timer.stop(),delete i[u])}if(oe(function(){n.state===fe&&(n.state=he,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=ce,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ce){for(n.state=fe,r=new Array(f=n.tween.length),u=0,c=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=de,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);n.state===de&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=pe,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ee(function(t){n.state=ue,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:ae,tween:se,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:le})};function ve(t,e){var n=ye(t,e);if(n.state>le)throw new Error("too late; already scheduled");return n}function me(t,e){var n=ye(t,e);if(n.state>ce)throw new Error("too late; already started");return n}function ye(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var _e=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>ce&&n.state<de,n.state=pe,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}};function be(t,e,n){var r=t._id;return t.each(function(){var t=me(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return ye(t,r).value[e]}}var we=function(t,e){var n;return("number"==typeof e?zt:e instanceof N?_t:(n=N(e))?(e=n,_t):St)(t,e)},xe=o.selection.prototype.constructor,ke=0;function Ee(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ze(){return++ke}var Ae=o.selection.prototype;Ee.prototype=(function(t){return Object(o.selection)().transition(t)}).prototype={constructor:Ee,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(o.selector)(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var l,u,c=r[s],f=c.length,h=a[s]=new Array(f),d=0;d<f;++d)(l=c[d])&&(u=t.call(l,l.__data__,d,c))&&("__data__"in l&&(u.__data__=l.__data__),h[d]=u,ge(h[d],e,n,d,h,ye(l,n)));return new Ee(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(o.selectorAll)(t));for(var r=this._groups,i=r.length,a=[],s=[],l=0;l<i;++l)for(var u,c=r[l],f=c.length,h=0;h<f;++h)if(u=c[h]){for(var d,p=t.call(u,u.__data__,h,c),g=ye(u,n),v=0,m=p.length;v<m;++v)(d=p[v])&&ge(d,e,n,v,p,g);a.push(p),s.push(u)}return new Ee(a,s,e,n)},filter:function(t){"function"!=typeof t&&(t=Object(o.matcher)(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s=e[i],l=s.length,u=r[i]=[],c=0;c<l;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&u.push(a);return new Ee(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),o=new Array(r),a=0;a<i;++a)for(var s,l=e[a],u=n[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(s=l[h]||u[h])&&(f[h]=s);for(;a<r;++a)o[a]=e[a];return new Ee(o,this._parents,this._name,this._id)},selection:function(){return new xe(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ze(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=ye(a,e);ge(a,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ee(r,this._parents,t,n)},call:Ae.call,nodes:Ae.nodes,node:Ae.node,size:Ae.size,empty:Ae.empty,each:Ae.each,on:function(t,e){var n=this._id;return arguments.length<2?ye(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=(e+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?ve:me;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Object(o.namespace)(t),r="transform"===n?Pt:we;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(t))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttribute(t)}})(n,r,be(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}:function(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}})(n,r,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Object(o.namespace)(t);return this.tween(n,(r.local?function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Lt:we;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Object(o.style)(this,t),s=(this.style.removeProperty(t),Object(o.style)(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var r,i,a;return function(){var s=Object(o.style)(this,t),l=n(this);return null==l&&(this.style.removeProperty(t),l=Object(o.style)(this,t)),s===l?null:s===r&&l===i?a:a=e(r=s,i=l)}}(t,r,be(this,"style."+t,e)):function(t,e,n){var r,i;return function(){var a=Object(o.style)(this,t);return a===n?null:a===r?i:i=e(r=a,n)}}(t,r,e+""),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(be(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ye(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=me(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=me(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ve(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ve(this,t).delay=e}})(e,t)):ye(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){me(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){me(this,t).duration=e}})(e,t)):ye(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){me(this,t).ease=e}}(e,t)):ye(this.node(),e).ease}},function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math,function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158);var Ce=2*Math.PI,Se=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ce);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Ce)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ce);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Ce)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ce);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Ce)},i.period=function(n){return t(e,n)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function Te(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Se.time=Qt(),Se;return n}o.selection.prototype.interrupt=function(t){return this.each(function(){_e(this,t)})},o.selection.prototype.transition=function(t){var e,n;t instanceof Ee?(e=t._id,t=t._name):(e=ze(),(n=Se).time=Qt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&ge(a,t,e,u,s,n||Te(a,e));return new Ee(r,this._parents,t,e)};var Me=function(t){return function(){return t}},Ne=function(t,e,n){this.target=t,this.type=e,this.selection=n};function De(){o.event.stopImmediatePropagation()}var Ie=function(){o.event.preventDefault(),o.event.stopImmediatePropagation()},Oe={name:"drag"},Le={name:"space"},Pe={name:"handle"},Be={name:"center"},Fe={name:"x",handles:["e","w"].map(Ve),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},je={name:"y",handles:["n","s"].map(Ve),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Re={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Ve),input:function(t){return t},output:function(t){return t}},He={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},We={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},$e={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ue={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ve(t){return{type:t}}function Ye(){return!o.event.button}function Xe(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ke(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ge(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ze(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Qe(){return en(Fe)}function Je(){return en(je)}var tn=function(){return en(Re)};function en(t){var e,n=Xe,r=Ye,i=h(s,"start","brush","end"),a=6;function s(e){var n=e.property("__brush",d).selectAll(".overlay").data([Ve("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",He.overlay).merge(n).each(function(){var t=Ke(this).extent;Object(o.select)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([Ve("selection")]).enter().append("rect").attr("class","selection").attr("cursor",He.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return He[t.type]}),e.each(l).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",f)}function l(){var t=Object(o.select)(this),e=Ke(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e){return t.__brush.emitter||new c(t,e)}function c(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if(o.event.touches){if(o.event.changedTouches.length<o.event.touches.length)return Ie()}else if(e)return;if(r.apply(this,arguments)){var n,i,a,s,c,f,h,d,v,m,y,_,b,w=this,x=o.event.target.__data__.type,k="selection"===(o.event.metaKey?x="overlay":x)?Oe:o.event.altKey?Be:Pe,E=t===je?null:$e[x],z=t===Fe?null:Ue[x],A=Ke(w),C=A.extent,S=A.selection,T=C[0][0],M=C[0][1],N=C[1][0],D=C[1][1],I=E&&z&&o.event.shiftKey,O=Object(o.mouse)(w),L=O,P=u(w,arguments).beforestart();"overlay"===x?A.selection=S=[[n=t===je?T:O[0],a=t===Fe?M:O[1]],[c=t===je?N:n,h=t===Fe?D:a]]:(n=S[0][0],a=S[0][1],c=S[1][0],h=S[1][1]),i=n,s=a,f=c,d=h;var B=Object(o.select)(w).attr("pointer-events","none"),F=B.selectAll(".overlay").attr("cursor",He[x]);if(o.event.touches)B.on("touchmove.brush",R,!0).on("touchend.brush touchcancel.brush",q,!0);else{var j=Object(o.select)(o.event.view).on("keydown.brush",function(){switch(o.event.keyCode){case 16:I=E&&z;break;case 18:k===Pe&&(E&&(c=f-v*E,n=i+v*E),z&&(h=d-m*z,a=s+m*z),k=Be,H());break;case 32:k!==Pe&&k!==Be||(E<0?c=f-v:E>0&&(n=i-v),z<0?h=d-m:z>0&&(a=s-m),k=Le,F.attr("cursor",He.selection),H());break;default:return}Ie()},!0).on("keyup.brush",function(){switch(o.event.keyCode){case 16:I&&(_=b=I=!1,H());break;case 18:k===Be&&(E<0?c=f:E>0&&(n=i),z<0?h=d:z>0&&(a=s),k=Pe,H());break;case 32:k===Le&&(o.event.altKey?(E&&(c=f-v*E,n=i+v*E),z&&(h=d-m*z,a=s+m*z),k=Be):(E<0?c=f:E>0&&(n=i),z<0?h=d:z>0&&(a=s),k=Pe),F.attr("cursor",He[x]),H());break;default:return}Ie()},!0).on("mousemove.brush",R,!0).on("mouseup.brush",q,!0);p(o.event.view)}De(),_e(w),l.call(w),P.start()}function R(){var t=Object(o.mouse)(w);!I||_||b||(Math.abs(t[0]-L[0])>Math.abs(t[1]-L[1])?b=!0:_=!0),L=t,y=!0,Ie(),H()}function H(){var t;switch(v=L[0]-O[0],m=L[1]-O[1],k){case Le:case Oe:E&&(v=Math.max(T-n,Math.min(N-c,v)),i=n+v,f=c+v),z&&(m=Math.max(M-a,Math.min(D-h,m)),s=a+m,d=h+m);break;case Pe:E<0?(v=Math.max(T-n,Math.min(N-n,v)),i=n+v,f=c):E>0&&(v=Math.max(T-c,Math.min(N-c,v)),i=n,f=c+v),z<0?(m=Math.max(M-a,Math.min(D-a,m)),s=a+m,d=h):z>0&&(m=Math.max(M-h,Math.min(D-h,m)),s=a,d=h+m);break;case Be:E&&(i=Math.max(T,Math.min(N,n-v*E)),f=Math.max(T,Math.min(N,c+v*E))),z&&(s=Math.max(M,Math.min(D,a-m*z)),d=Math.max(M,Math.min(D,h+m*z)))}f<i&&(E*=-1,t=n,n=c,c=t,t=i,i=f,f=t,x in qe&&F.attr("cursor",He[x=qe[x]])),d<s&&(z*=-1,t=a,a=h,h=t,t=s,s=d,d=t,x in We&&F.attr("cursor",He[x=We[x]])),A.selection&&(S=A.selection),_&&(i=S[0][0],f=S[1][0]),b&&(s=S[0][1],d=S[1][1]),S[0][0]===i&&S[0][1]===s&&S[1][0]===f&&S[1][1]===d||(A.selection=[[i,s],[f,d]],l.call(w),P.brush())}function q(){if(De(),o.event.touches){if(o.event.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500),B.on("touchmove.brush touchend.brush touchcancel.brush",null)}else g(o.event.view,y),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),F.attr("cursor",He.overlay),A.selection&&(S=A.selection),Ge(S)&&(A.selection=null,l.call(w)),P.end()}}function d(){var e=this.__brush||{selection:null};return e.extent=n.apply(this,arguments),e.dim=t,e}return s.move=function(e,n){e.selection?e.on("start.brush",function(){u(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){u(this,arguments).end()}).tween("brush",function(){var e=this,r=e.__brush,i=u(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Tt(o,a);function c(t){r.selection=1===t&&Ge(a)?null:s(t),l.call(e),i.brush()}return o&&a?c:c(1)}):e.each(function(){var e=arguments,r=this.__brush,i=t.input("function"==typeof n?n.apply(this,e):n,r.extent),o=u(this,e).beforestart();_e(this),r.selection=null==i||Ge(i)?null:i,l.call(this),o.start().brush().end()})},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Object(o.customEvent)(new Ne(s,e,t.output(this.state.selection)),i.apply,i,[e,this.that,this.args])}},s.extent=function(t){return arguments.length?(n="function"==typeof t?t:Me([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),s):n},s.filter=function(t){return arguments.length?(r="function"==typeof t?t:Me(!!t),s):r},s.handleSize=function(t){return arguments.length?(a=+t,s):a},s.on=function(){var t=i.on.apply(i,arguments);return t===i?s:t},s}var nn=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},rn=function(t){return 1===t.length&&(t=function(t){return function(e,n){return nn(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(nn).right,on=(Array,Math.sqrt(50)),an=Math.sqrt(10),sn=Math.sqrt(2),ln=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=un(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function un(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=on?10:o>=an?5:o>=sn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=on?10:o>=an?5:o>=sn?2:1)}var cn=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r};function fn(){}function hn(t,e){var n=new fn;if(t instanceof fn)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function dn(){}fn.prototype=hn.prototype={constructor:fn,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var pn=hn.prototype;dn.prototype=(function(t,e){var n=new dn;if(t instanceof dn)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}).prototype={constructor:dn,has:pn.has,add:function(t){return this["$"+(t+="")]=t,this},remove:pn.remove,clear:pn.clear,values:pn.keys,size:pn.size,empty:pn.empty,each:pn.each};var gn=Array.prototype,vn=gn.map,mn=gn.slice,yn=function(t){return function(){return t}},_n=function(t){return+t},bn=[0,1];function wn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yn(e)}function xn(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function kn(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=rn(t,e,1,i)-1;return a[n](o[n](e))}}var En=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},zn=function(t){return(t=En(Math.abs(t)))?t[1]:NaN},An=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cn(t){return new Sn(t)}function Sn(t){if(!(e=An.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}Cn.prototype=Sn.prototype,Sn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Tn,Mn,Nn,Dn,In=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},On=function(t,e){var n=En(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Ln={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return On(100*t,e)},r:On,s:function(t,e){var n=En(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Tn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+En(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Pn=function(t){return t},Bn=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];Mn=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):Pn,n=t.currency,r=t.decimal,i=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):Pn,o=t.percent||"%";function a(t){var a=(t=Cn(t)).fill,s=t.align,l=t.sign,u=t.symbol,c=t.zero,f=t.width,h=t.comma,d=t.precision,p=t.trim,g=t.type;"n"===g?(h=!0,g="g"):Ln[g]||(null==d&&(d=12),p=!0,g="g"),(c||"0"===a&&"="===s)&&(c=!0,a="0",s="=");var v="$"===u?n[0]:"#"===u&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",m="$"===u?n[1]:/[%p]/.test(g)?o:"",y=Ln[g],_=/[defgprs%]/.test(g);function b(t){var n,o,u,b=v,w=m;if("c"===g)w=y(t)+w,t="";else{var x=(t=+t)<0;if(t=y(Math.abs(t),d),p&&(t=In(t)),x&&0==+t&&(x=!1),b=(x?"("===l?l:"-":"-"===l||"("===l?"":l)+b,w=("s"===g?Bn[8+Tn/3]:"")+w+(x&&"("===l?")":""),_)for(n=-1,o=t.length;++n<o;)if(48>(u=t.charCodeAt(n))||u>57){w=(46===u?r+t.slice(n+1):t.slice(n))+w,t=t.slice(0,n);break}}h&&!c&&(t=e(t,1/0));var k=b.length+t.length+w.length,E=k<f?new Array(f-k+1).join(a):"";switch(h&&c&&(t=e(E+t,E.length?f-w.length:1/0),E=""),s){case"<":t=b+t+w+E;break;case"=":t=b+E+t+w;break;case"^":t=E.slice(0,k=E.length>>1)+b+t+w+E.slice(k);break;default:t=E+b+t+w}return i(t)}return d=null==d?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),b.toString=function(){return t+""},b}return{format:a,formatPrefix:function(t,e){var n=a(((t=Cn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(zn(e)/3))),i=Math.pow(10,-r),o=Bn[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Nn=Mn.format,Dn=Mn.formatPrefix;var Fn=function(t,e,n){var r,i=t[0],o=t[t.length-1],a=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=on?i*=10:o>=an?i*=5:o>=sn&&(i*=2),e<t?-i:i}(i,o,null==e?10:e);switch((n=Cn(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(zn(s)/3)))-zn(Math.abs(t)))}(a))||(n.precision=r),Dn(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zn(e)-zn(t))+1}(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=Math.max(0,-zn(Math.abs(a))))||(n.precision=r-2*("%"===n.type))}return Nn(n)};function jn(){var t=function(t,e){var n,r,i,o=bn,a=bn,s=Tt,l=!1;function u(){return n=Math.min(o.length,a.length)>2?kn:xn,r=i=null,c}function c(e){return(r||(r=n(o,a,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return c.invert=function(t){return(i||(i=n(a,o,wn,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},c.domain=function(t){return arguments.length?(o=vn.call(t,_n),u()):o.slice()},c.range=function(t){return arguments.length?(a=mn.call(t),u()):a.slice()},c.rangeRound=function(t){return a=mn.call(t),s=Mt,u()},c.clamp=function(t){return arguments.length?(l=!!t,u()):l},c.interpolate=function(t){return arguments.length?(s=t,u()):s},u()}(wn,zt);return t.copy=function(){return function(t,e){return jn().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}(t)},function(t){var e=t.domain;return t.ticks=function(t){var n=e();return ln(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Fn(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],l=i[a];return l<s&&(r=s,s=l,l=r,r=o,o=a,a=r),(r=un(s,l,n))>0?r=un(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=un(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,e(i)),t},t}(t)}var Rn=new Date,Hn=new Date;function qn(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return qn(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Rn.setTime(+e),Hn.setTime(+r),t(Rn),t(Hn),Math.floor(n(Rn,Hn))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Wn=qn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Wn.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?qn(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Wn:null};var $n=6e4,Un=6048e5,Vn=(qn(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),qn(function(t){t.setTime(Math.floor(t/$n)*$n)},function(t,e){t.setTime(+t+e*$n)},function(t,e){return(e-t)/$n},function(t){return t.getMinutes()}),qn(function(t){var e=t.getTimezoneOffset()*$n%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),qn(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$n)/864e5},function(t){return t.getDate()-1}));function Yn(t){return qn(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$n)/Un})}var Xn=Yn(0),Kn=Yn(1),Gn=(Yn(2),Yn(3),Yn(4)),Zn=(Yn(5),Yn(6),qn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),qn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Zn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?qn(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Qn=Zn,Jn=(qn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*$n)},function(t,e){return(e-t)/$n},function(t){return t.getUTCMinutes()}),qn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),qn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}));function tr(t){return qn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Un})}var er=tr(0),nr=tr(1),rr=(tr(2),tr(3),tr(4)),ir=(tr(5),tr(6),qn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),qn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));ir.every=function(t){return isFinite(t=Math.floor(t))&&t>0?qn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var or=ir;function ar(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function sr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var ur,cr,fr={"-":"",_:" ",0:"0"},hr=/^\s*\d+/,dr=/^%/,pr=/[\\^$*+?|[\]().{}]/g;function gr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function vr(t){return t.replace(pr,"\\$&")}function mr(t){return new RegExp("^(?:"+t.map(vr).join("|")+")","i")}function yr(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function _r(t,e,n){var r=hr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function br(t,e,n){var r=hr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function wr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function xr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function kr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Er(t,e,n){var r=hr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ar(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Cr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Sr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Tr(t,e,n){var r=hr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Mr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Nr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Dr(t,e,n){var r=hr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ir(t,e,n){var r=hr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Or(t,e,n){var r=hr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lr(t,e,n){var r=dr.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Pr(t,e,n){var r=hr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Br(t,e,n){var r=hr.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Fr(t,e){return gr(t.getDate(),e,2)}function jr(t,e){return gr(t.getHours(),e,2)}function Rr(t,e){return gr(t.getHours()%12||12,e,2)}function Hr(t,e){return gr(1+Vn.count(Qn(t),t),e,3)}function qr(t,e){return gr(t.getMilliseconds(),e,3)}function Wr(t,e){return qr(t,e)+"000"}function $r(t,e){return gr(t.getMonth()+1,e,2)}function Ur(t,e){return gr(t.getMinutes(),e,2)}function Vr(t,e){return gr(t.getSeconds(),e,2)}function Yr(t){var e=t.getDay();return 0===e?7:e}function Xr(t,e){return gr(Xn.count(Qn(t),t),e,2)}function Kr(t,e){var n=t.getDay();return t=n>=4||0===n?Gn(t):Gn.ceil(t),gr(Gn.count(Qn(t),t)+(4===Qn(t).getDay()),e,2)}function Gr(t){return t.getDay()}function Zr(t,e){return gr(Kn.count(Qn(t),t),e,2)}function Qr(t,e){return gr(t.getFullYear()%100,e,2)}function Jr(t,e){return gr(t.getFullYear()%1e4,e,4)}function ti(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gr(e/60|0,"0",2)+gr(e%60,"0",2)}function ei(t,e){return gr(t.getUTCDate(),e,2)}function ni(t,e){return gr(t.getUTCHours(),e,2)}function ri(t,e){return gr(t.getUTCHours()%12||12,e,2)}function ii(t,e){return gr(1+Jn.count(or(t),t),e,3)}function oi(t,e){return gr(t.getUTCMilliseconds(),e,3)}function ai(t,e){return oi(t,e)+"000"}function si(t,e){return gr(t.getUTCMonth()+1,e,2)}function li(t,e){return gr(t.getUTCMinutes(),e,2)}function ui(t,e){return gr(t.getUTCSeconds(),e,2)}function ci(t){var e=t.getUTCDay();return 0===e?7:e}function fi(t,e){return gr(er.count(or(t),t),e,2)}function hi(t,e){var n=t.getUTCDay();return t=n>=4||0===n?rr(t):rr.ceil(t),gr(rr.count(or(t),t)+(4===or(t).getUTCDay()),e,2)}function di(t){return t.getUTCDay()}function pi(t,e){return gr(nr.count(or(t),t),e,2)}function gi(t,e){return gr(t.getUTCFullYear()%100,e,2)}function vi(t,e){return gr(t.getUTCFullYear()%1e4,e,4)}function mi(){return"+0000"}function yi(){return"%"}function _i(t){return+t}function bi(t){return Math.floor(+t/1e3)}cr=(ur=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=mr(i),c=yr(i),f=mr(o),h=yr(o),d=mr(a),p=yr(a),g=mr(s),v=yr(s),m=mr(l),y=yr(l),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Fr,e:Fr,f:Wr,H:jr,I:Rr,j:Hr,L:qr,m:$r,M:Ur,p:function(t){return i[+(t.getHours()>=12)]},Q:_i,s:bi,S:Vr,u:Yr,U:Xr,V:Kr,w:Gr,W:Zr,x:null,X:null,y:Qr,Y:Jr,Z:ti,"%":yi},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:ei,e:ei,f:ai,H:ni,I:ri,j:ii,L:oi,m:si,M:li,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:_i,s:bi,S:ui,u:ci,U:fi,V:hi,w:di,W:pi,x:null,X:null,y:gi,Y:vi,Z:mi,"%":yi},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:Sr,e:Sr,f:Or,H:Mr,I:Mr,j:Tr,L:Ir,m:Cr,M:Nr,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:Pr,s:Br,S:Dr,u:br,U:wr,V:xr,w:_r,W:kr,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:zr,Y:Er,Z:Ar,"%":Lr};function x(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=fr[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=lr(1900);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=(r=sr(lr(o.y))).getUTCDay())>4||0===i?nr.ceil(r):nr(r),r=Jn.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(i=(r=e(lr(o.y))).getDay())>4||0===i?Kn.ceil(r):Kn(r),r=Vn.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?sr(lr(o.y)).getUTCDay():e(lr(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,sr(o)):e(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in fr?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=x(n,_),_.X=x(r,_),_.c=x(e,_),b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),{format:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",ar);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,sr);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).utcParse,Date.prototype.toISOString||(0,ur.utcFormat)("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||cr("%Y-%m-%dT%H:%M:%S.%LZ");var wi=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})};function xi(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function ki(t,e){var n,r,i=/(^([+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|^0x[\da-fA-F]+$|\d+)/g,o=/^\s+|\s+$/g,a=/\s+/g,s=/^0x[0-9a-f]+$/i,l=/^0/,u=function(t){return(ki.insensitive&&(""+t).toLowerCase()||""+t).replace(o,"")},c=u(t),f=u(e),h=c.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=f.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=parseInt(c.match(s),16)||1!==h.length&&Date.parse(c),g=parseInt(f.match(s),16)||p&&f.match(/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/)&&Date.parse(f)||null,v=function(t,e){return(!t.match(l)||1==e)&&parseFloat(t)||t.replace(a," ").replace(o,"")||0};if(g){if(p<g)return-1;if(p>g)return 1}for(var m=0,y=h.length,_=d.length,b=Math.max(y,_);m<b;m++){if(n=v(h[m]||"",y),r=v(d[m]||"",_),isNaN(n)!==isNaN(r))return isNaN(n)?1:-1;if(/[^\x00-\x80]/.test(n+r)&&n.localeCompare){var w=n.localeCompare(r);return w/Math.abs(w)}if(n<r)return-1;if(n>r)return 1}}wi("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),wi("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),wi("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),wi("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),qt(ht(300,.5,0),ht(-240,.5,1)),qt(ht(-100,.75,.35),ht(80,1.5,.8)),qt(ht(260,.75,.35),ht(80,1.5,.8)),ht(),xi(wi("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),xi(wi("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),xi(wi("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),xi(wi("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Ei="1.4.1",zi=n(1);function Ai(t){this.config=JSON.parse(JSON.stringify(t)),function(t){t.chromosomesArray=[],t.coordinateSystem="iscn",t.maxLength={bp:0,iscn:0},t.chromosomes={},t.numChromosomes=0,t.config.debug||(t.config.debug=!1),t.config.dataDir||(t.config.dataDir=t.getDataDir()),t.config.container||(t.config.container="body"),t.selector=t.config.container+" #_ideogram",t.config.resolution||(t.config.resolution=""),t.config.orientation||(t.config.orientation="vertical"),t.config.brush||(t.config.brush=null),t.config.rows||(t.config.rows=1),"showChromosomeLabels"in t.config==0&&(t.config.showChromosomeLabels=!0),t.config.showNonNuclearChromosomes||(t.config.showNonNuclearChromosomes=!1)}(this),function(t){t.config.ploidy||(t.config.ploidy=1),t.config.ploidy>1&&(t.sexChromosomes={},t.config.sex||(t.config.sex="male"),2!==t.config.ploidy||t.config.ancestors||(t.config.ancestors={M:"#ffb6c1",P:"#add8e6"},t.config.ploidyDesc="MP"))}(this),function(t){t.config.showBandLabels||(t.config.showBandLabels=!1),t.config.showFullyBanded=!("showFullyBanded"in t.config)||t.config.showFullyBanded,t.bandsToShow=[],t.bandData={}}(this),function(t){var e,n,r;t.config.chrHeight||(e=t.config.container,n=document.querySelector(e).getBoundingClientRect(),r="vertical"===t.config.orientation?n.height:n.width,"body"!==e&&0!==r||(r=400),t.config.chrHeight=r)}(this),function(t){var e,n;t.config.chrWidth||(e=10,(n=t.config.chrHeight)<900&&n>500?e=Math.round(n/40):n>=900&&(e=Math.round(n/45)),t.config.chrWidth=e)}(this),function(t){t.config.chrMargin||(t.config.chrMargin=1===t.config.ploidy?10:Math.round(t.config.chrWidth/4)),t.config.showBandLabels&&(t.config.chrMargin+=20)}(this),function(t,e){t.onLoad&&(e.onLoadCallback=t.onLoad),t.onLoadAnnots&&(e.onLoadAnnotsCallback=t.onLoadAnnots),t.onDrawAnnots&&(e.onDrawAnnotsCallback=t.onDrawAnnots),t.onBrushMove&&(e.onBrushMoveCallback=t.onBrushMove),t.onDidRotate&&(e.onDidRotateCallback=t.onDidRotate),t.onWillShowAnnotTooltip&&(e.onWillShowAnnotTooltipCallback=t.onWillShowAnnotTooltip)}(t,this),function(t){t.organisms={9606:{commonName:"Human",scientificName:"Homo sapiens",scientificNameAbbr:"H. sapiens",assemblies:{default:"GCF_000001405.26",GRCh38:"GCF_000001405.26",GRCh37:"GCF_000001405.13"}},10090:{commonName:"Mouse",scientificName:"Mus musculus",scientificNameAbbr:"M. musculus",assemblies:{default:"GCF_000001635.20"}},4641:{commonName:"banana",scientificName:"Musa acuminata",scientificNameAbbr:"M. acuminata",assemblies:{default:"mock"}}}}(this),function(t){t.bump=Math.round(t.config.chrHeight/125),t.adjustedBump=!1,t.config.chrHeight<200&&(t.adjustedBump=!0,t.bump=4)}(this),function(t,e){t.chromosome&&(e.config.chromosomes=[t.chromosome],"showBandLabels"in t==0&&(e.config.showBandLabels=!0),"rotatable"in t==0&&(e.config.rotatable=!1))}(t,this),this.initAnnotSettings(),this.config.chrMargin+=this.config.chrWidth,this.config.chrMargin+="heatmap"===this.config.annotationsLayout?this.config.annotTracksHeight:2*this.config.annotTracksHeight,this.init()}var Ci=zi.a.assign({},o);function Si(t){void 0!==t.timeout&&window.clearTimeout(t.timeout),t.rawAnnots=t.setOriginalTrackIndexes(t.rawAnnots),t.config.annotationsDisplayedTracks?t.annots=t.updateDisplayedTracks(t.config.annotationsDisplayedTracks):(t.annots=t.processAnnotData(t.rawAnnots),t.config.filterable&&t.initCrossFilter(),t.drawProcessedAnnots(t.annots))}function Ti(t,e){var n=(new Date).getTime(),r=this.config;this.initDrawChromosomes(t),r.annotationsPath&&function(t){t.rawAnnots?Si(t):function e(){t.timeout=setTimeout(function(){t.rawAnnots?Si(t):e()},50)}()}(this),function(t,e){var n,r,i;if(!0===t.showBandLabels&&(r=(new Date).getTime(),e.hideUnshownBandLabels(),i=(new Date).getTime(),t.debug&&console.log("Time in showing bands: "+(i-r)+" ms"),"vertical"===t.orientation))for(n=0;n<e.chromosomesArray.length;n++)e.rotateChromosomeLabels(Ci.select("#"+e.chromosomesArray[n].id),n);!0===t.showChromosomeLabels&&e.drawChromosomeLabels(e.chromosomes)}(r,this),r.brush&&this.createBrush(r.brush),r.annotations&&this.drawAnnots(r.annotations),function(t,e,n){var r=(new Date).getTime();t.debug&&console.log("Time in drawChromosome: "+(r-n)+" ms");var i=(new Date).getTime();t.debug&&console.log("Time constructing ideogram: "+(i-e)+" ms")}(r,e,n),this.setOverflowScroll(),this.onLoadCallback&&this.onLoadCallback()}class Mi{constructor(t){this._config=t,this._description=this._normalize(this._config.ploidyDesc)}getChromosomesNumber(t){if(this._config.ploidyDesc){var e=this._config.ploidyDesc[t];return e instanceof Object?Object.keys(e)[0].length:e.length}return this._config.ploidy||1}_normalize(t){var e,n,r=[];if(!t)return t;for(e in t)"string"==typeof(n=t[e])?("vertical"===this._config.orientation&&(n=n.split("").reverse()),r.push({ancestors:n,existence:this._getexistenceArray(n.length)})):r.push({ancestors:Object.keys(n)[0],existence:n[Object.keys(n)[0]]});return r}_getexistenceArray(t){for(var e=[],n=0;n<t;n++)e.push("11");return e}getSetSize(t){return this._description?this._description[t].ancestors.length:1}getAncestor(t,e){return this._description?this._description[t].ancestors[e]:""}exists(t,e,n){return!this._description||Number(this._description[t].existence[e][n])>0}}var Ni=zi.a.assign({},o);class Di{constructor(t){this._node=t}getLabel(){return Ni.select(this._node.parentNode).select("text.chrLabel").text()}getSetLabel(){return Ni.select(this._node.parentNode).select("text.chrSetLabel").text()}}var Ii=zi.a.assign({},o),Oi=class{constructor(t,e){this._config=t,this._ideo=e,this._ploidy=this._ideo._ploidy,this._translate=void 0,this.chrSetMargin="chrSetMargin"in t?t.chrSetMargin:this._config.ploidy>1?this._config.chrMargin:0,this._tickSize=8,this._isRotated=!1}_getLeftMargin(){return this.margin.left}_getYScale(){return 20/this._config.chrWidth}getChromosomeLabels(t){var e=new Di(t),n=[];return this._ideo.config.ploidy>1&&n.push(e.getSetLabel()),n.push(e.getLabel()),n.filter(function(t){return t.length>0})}getChromosomeBandLabelTranslate(t){var e,n,r,i=this._ideo,o=this._tickSize,a=i.config.orientation;return"vertical"===a?r="rotate(-90)translate("+(e=o)+","+(n=i.round(2+t.px.start+t.px.width/2))+")":"horizontal"===a&&(r="translate("+(e=i.round(-o+t.px.start+t.px.width/2))+","+(n=-10)+")"),{x:e,y:n,translate:r}}didRotate(t,e){var n,r,i,o,a,s,l,u,c;r=(n=this._ideo).config.taxid,i=e.id.split("-")[0].replace("chr",""),o=(a=n.chromosomes[r][i]).bands,u=(l=Ii.select(e.parentNode)).attr("transform"),c=/scale\(.*\)/.exec(u),u=u.replace(c,""),l.attr("transform",u),s=a.width,(a=n.getChromosomeModel(o,i,r,t)).oldWidth=s,n.chromosomes[r][i]=a,n.drawChromosome(a),n.handleRotateOnClick(),n.rawAnnots&&(n.displayedTrackIndexes?n.updateDisplayedTracks(n.displayedTrackIndexes):(n.annots=n.processAnnotData(n.rawAnnots),n.drawProcessedAnnots(n.annots),n.config.filterable&&n.initCrossFilter())),!0===n.config.showBandLabels&&(n.drawBandLabels(n.chromosomes),n.hideUnshownBandLabels()),n.onDidRotateCallback&&n.onDidRotateCallback(a)}rotate(t,e,n){var r,i,o,a;a=(r=this._ideo).selector+" .chrSetLabel, "+r.selector+" .chrLabel",o=document.querySelector(r.selector).getBoundingClientRect(),i=Ii.selectAll(r.selector+" g.chromosome").filter(function(){return this!==n}),this._isRotated?(this._isRotated=!1,r.config.chrHeight=r.config.chrHeightOriginal,r.config.chrWidth=r.config.chrWidthOriginal,r.config.annotationHeight=r.config.annotationHeightOriginal,this.rotateBack(t,e,n,function(){i.style("display",null),Ii.selectAll(a).style("display",null),r._layout.didRotate(e,n)})):(this._isRotated=!0,i.style("display","none"),Ii.selectAll(a).style("display","none"),this.rotateForward(t,e,n,function(){var t,i,a;r.config.chrHeightOriginal=r.config.chrHeight,r.config.chrWidthOriginal=r.config.chrWidth,r.config.annotationHeightOriginal=r.config.annotationHeight,"VerticalLayout"===r._layout._class?(i=o.width,a=window.innerWidth):(i=o.height-10,a=window.innerHeight-10),t=a<i?a:i,r.config.chrHeight=t-=2*r.config.chrMargin,r.config.chrWidth*=2.3,r.config.annotationHeight*=1.7,r._layout.didRotate(e,n)}))}getChromosomeLabelClass(){return 1===this._config.ploidy?"chrLabel":"chrSetLabel"}_getAdditionalOffset(){return(this._config.annotationHeight||0)*(this._config.annotationsNumTracks||1)}_getChromosomeSetSize(t){return this._ploidy.getSetSize(t)*this._config.chrWidth*2+this.chrSetMargin}getChromosomeSetLabelAnchor(){return"middle"}getChromosomeLabelYPosition(){return-5.5}getChromosomeSetLabelYPosition(t){return 1===this._config.ploidy?this.getChromosomeLabelYPosition(t):-2*this._config.chrWidth}},Li=zi.a.assign({},o),Pi=class extends Oi{constructor(t,e){super(t,e),this._class="VerticalLayout",this.margin={top:30,left:15}}rotateForward(t,e,n,r){var i="translate(20, 25) "+this.getChromosomeScale(n);Li.select(n.parentNode).transition().attr("transform",i).on("end",r);var o=this.getChromosomeLabels(n),a=1.3*(20+this._config.chrWidth);Li.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(o).enter().append("text").attr("class",function(t,e){return 0===e&&2===o.length?"chrSetLabel":null}).attr("x",0).attr("y",a).style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="horizontal"}rotateBack(t,e,n,r){var i=this.getChromosomeScaleBack(n),o=this.getChromosomeSetTranslate(t);Li.select(n.parentNode).transition().attr("transform",o+" "+i).on("end",r),Li.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="vertical"}getHeight(){return this._config.chrHeight+1.5*this.margin.top}getWidth(){return"97%"}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeBandLabelAnchor(){return null}getChromosomeScale(t){var e,n;return e=Li.select(this._ideo.selector).node().getBoundingClientRect(),n=t.getBoundingClientRect(),"scale("+e.width/n.height*.97+", "+this._getYScale()+")"}getChromosomeScaleBack(t){var e,n,r;return n=(r=this._ideo.config).taxid,e=t.id.split("-")[0].replace("chr",""),"scale("+this._ideo.chromosomes[n][e].oldWidth/(3*r.chrHeight)*.97+", "+1/this._getYScale()+")"}getChromosomeSetTranslate(t){return"rotate(90) translate("+this.margin.top+", -"+this.getChromosomeSetYTranslate(t)+")"}getChromosomeSetYTranslate(t){var e,n=this._getAdditionalOffset(),r=this._config.chrMargin,i=this._config.chrWidth;if(!this._config.ploidyDesc)return"histogram"===this._config.annotationsLayout?r/2+t*(r+i+2)+2*n+1:(e=i+t*(r+i)+2*n,n>0?e:e+4+2*t);if(!this._translate){this._translate=[this._ploidy.getSetSize(0)*i*2];for(var o=1;o<this._config.ploidyDesc.length;o++)this._translate[o]=this._translate[o-1]+this._getChromosomeSetSize(o-1)}return this._translate[t]}getChromosomeSetLabelXPosition(){return this._config.chrWidth*this._config.ploidy/-2}getChromosomeLabelXPosition(){return this._config.chrWidth/-2}},Bi=zi.a.assign({},o),Fi=class extends Oi{constructor(t,e){super(t,e),this._class="HorizontalLayout",this.margin={left:20,top:30}}_getLeftMargin(){var t=Oi.prototype._getLeftMargin.call(this);return this._config.ploidy>1&&(t*=1.8),t}rotateForward(t,e,n,r){var i;Bi.select(n.parentNode).transition().attr("transform","rotate(90) translate(30, -37.5) ").on("end",r),i=this.getChromosomeLabels(n),Bi.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(i).enter().append("text").attr("class",function(t,e){return 0===e&&2===i.length?"chrSetLabel":null}).attr("x",26).attr("y",function(t,e){return 12*(e+1+i.length%2)}).style("text-anchor","middle").style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="vertical"}rotateBack(t,e,n,r){var i=this.getChromosomeSetTranslate(t);Bi.select(n.parentNode).transition().attr("transform",i).on("end",r),Bi.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="horizontal"}getHeight(t){var e=this._config.chromosomes[t].length,n=this.getChromosomeSetYTranslate(e-1);return(n+=this._getChromosomeSetSize(e-1))+2*this._getAdditionalOffset()}getWidth(){return this._config.chrHeight+1.5*this.margin.top}getChromosomeSetLabelAnchor(){return"end"}getChromosomeBandLabelAnchor(){return null}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return null}getChromosomeSetTranslate(t){return"translate("+this._getLeftMargin()+", "+this.getChromosomeSetYTranslate(t)+")"}getChromosomeSetYTranslate(t){if(!this._config.ploidyDesc)return this._config.chrMargin*(t+1);if(!this._translate){this._translate=[1];for(var e=1;e<this._config.ploidyDesc.length;e++)this._translate[e]=this._translate[e-1]+this._getChromosomeSetSize(e-1)}return this._translate[t]}getChromosomeSetLabelXPosition(t){return 1===this._config.ploidy?this.getChromosomeLabelXPosition(t):-20}getChromosomeSetLabelYPosition(t){var e=this._ploidy.getSetSize(t),n=this._config;return 1===n.ploidy?n.chrWidth/2+3:e*n.chrMargin/2}getChromosomeLabelXPosition(){return-8}getChromosomeLabelYPosition(){return this._config.chrWidth}};zi.a.assign({},o);var ji=class extends Oi{constructor(t,e){super(t,e),this._class="PairedLayout",this.margin={left:30}}rotateForward(t,e,n,r){console.warn("rotateForward not implemented for PairedLayout")}rotateBack(t,e,n,r){console.warn("rotateBack not implemented for PairedLayout")}getHeight(){return this._config.chrHeight+1.5*this.margin.left}getWidth(){return"97%"}getChromosomeBandTickY1(t){return t%2?this._config.chrWidth:2*this._config.chrWidth}getChromosomeBandTickY2(t){var e=this._config.chrWidth;return t%2?e-this._tickSize:2*e+this._tickSize}getChromosomeBandLabelAnchor(t){return t%2?null:"end"}getChromosomeBandLabelTranslate(t,e){var n=e%2?10:-this._config.chrWidth-10,r=this._ideo.round(t.px.start+t.px.width/2)+3;return{x:r,y:r,translate:"rotate(-90) translate("+n+", "+r+")"}}getChromosomeLabelXPosition(){return-this._tickSize}getChromosomeSetLabelXPosition(){return this._config.chrWidth/-2}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(t){var e=this.getChromosomeSetYTranslate(t);return"rotate(90) translate("+this.margin.left+", -"+e+")"}getChromosomeSetYTranslate(t){return 200*(t+1)}};zi.a.assign({},o);var Ri=class extends Oi{constructor(t,e){super(t,e),this._class="SmallLayout",this.margin={left:36.5,top:10}}getHeight(){return this._config.rows*(this._config.chrHeight+1.5*this.margin.top)}getWidth(){return"97%"}getChromosomeBandLabelTranslate(){}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(t){var e=[];this._ideo.getTaxids(function(t){e=t});var n,r,i=this._ideo.config.chromosomes[e[0]].length/this._config.rows;return t>i-1?(n=this.margin.left+1.4*this._config.chrHeight,r=this.getChromosomeSetYTranslate(t-i)):(n=this.margin.left,r=this.getChromosomeSetYTranslate(t)),"rotate(90) translate("+n+", -"+r+")"}getChromosomeSetYTranslate(t){var e=this._getAdditionalOffset();return this.margin.left*t+this._config.chrWidth+2*e+e*t}getChromosomeSetLabelXPosition(t){return(this._ploidy.getSetSize(t)*this._config.chrWidth+20)/-2+(this._config.ploidy>1?0:this._config.chrWidth)}getChromosomeLabelXPosition(){return this._config.chrWidth/-2}},Hi=zi.a.assign({},o);function qi(t,e,n){this.config.annotationsPath&&this.fetchAnnots(this.config.annotationsPath),function(t){if("ploidyDesc"in t.config&&"string"==typeof t.config.ploidyDesc){for(var e=[],n=0;n<t.numChromosomes;n++)e.push(t.config.ploidyDesc);t.config.ploidyDesc=e}t._ploidy=new Mi(t.config)}(this),this._layout=function(t){var e=t.config;return"perspective"in e&&"comparative"===e.perspective?new ji(e,t):"rows"in e&&e.rows>1?new Ri(e,t):"vertical"===e.orientation?new Pi(e,t):"horizontal"===e.orientation?new Fi(e,t):new Pi(e,t)}(this),function(t,e){Hi.selectAll(e.config.container+" #_ideogramOuterWrap").remove(),Hi.select(e.config.container).append("div").attr("id","_ideogramOuterWrap").append("div").attr("id","_ideogramTrackLabelContainer").style("position","absolute"),Hi.select(e.config.container+" #_ideogramOuterWrap").append("div").attr("id","_ideogramMiddleWrap").style("position","relative").style("overflow-x","auto").append("div").attr("id","_ideogramInnerWrap").append("svg").attr("id","_ideogram").attr("class",function(t){var e="";return t.config.showChromosomeLabels&&(e+="horizontal"===t.config.orientation?"labeledLeft ":"labeled "),t.config.annotationsLayout&&"overlay"===t.config.annotationsLayout&&(e+="faint"),e}(e)).attr("width",e._layout.getWidth(t)).attr("height",e._layout.getHeight(t)).html(e.getBandColorGradients())}(e,this),this.isOnlyIdeogram=1===document.querySelectorAll("#_ideogram").length,function(t){Hi.select(t.config.container+" #_ideogramOuterWrap").append("div").attr("class","_ideogramTooltip").attr("id","_ideogramTooltip").style("opacity",0).style("position","fixed").style("text-align","center").style("padding","4px").style("font","12px sans-serif").style("background","white").style("border","1px solid black").style("border-radius","5px").style("z-index","100")}(this),this.finishInit(t,n)}var Wi=n(5),$i=zi.a.assign({},a,o);function Ui(t,e,n){return"sex"in n.config&&(2===n.config.ploidy&&n.sexChromosomes.index+2===e||"female"===n.config.sex&&"Y"===t.name)}function Vi(t,e,n,r,i){var o,a,s,l;for(o=0;o<e.length;o++)"bandsArray"in i&&(a=t[r]),l=i.getChromosomeModel(a,s=e[o],n,r),r+=1,"string"!=typeof s&&(s=s.name),i.chromosomes[n][s]=l,i.chromosomesArray.push(l),Ui(l,r,i)||i.drawChromosome(l);return r}function Yi(t,e){"undefined"!=typeof chrBands&&t.length>=chrBands.length/2&&(e.coordinateSystem="bp")}function Xi(t){var e,n,r,i=this.config.taxids,o=0;for(t.length>0&&(this.bandsArray={}),n=0;n<i.length;n++)Yi(r=this.config.chromosomes[e=i[n]],this),this.chromosomes[e]={},this.setSexChromosomes(r),"bandsArray"in this&&(this.bandsArray[e]=t),o=Vi(t,r,e,o,this),this.config.showBandLabels&&this.drawBandLabels(this.chromosomes),this.handleRotateOnClick(),this._gotChrModels=!0}function Ki(){var t=this;"rotatable"in t.config&&!1===t.config.rotatable?$i.selectAll(t.selector+" .chromosome").style("cursor","default"):$i.selectAll(t.selector+" .chromosome").on("click",function(){t.rotateAndToggleDisplay(this)})}function Gi(){call(this.onLoadCallback)}function Zi(t,e,n){var r,i,o,a=n.config;return r=n.organisms[t],a.assembly||(n.config.assembly="default"),i=r.assemblies,o=function(t,e,n){var r=n.organisms[t],i=[Ideogram.slugify(r.scientificName)],o=r.assemblies,a=n.config.resolution;return e!==o.default&&i.push(e),"9606"===t&&(e in o==="false"&&zi.a.values(o).includes(config.assembly)||""!==a&&850!==a)&&i.push(a),i.join("-")+".js"}(t,n.assemblyIsAccession()?a.assembly:i[a.assembly],n),"9606"!==t&&"10090"!==t||(e[t]=o),e}function Qi(t,e,n,r){var i;Object(zi.f)(r)&&"undefined"==typeof chrBands&&t in e?Object(Wi.a)(e,t,n,r):("undefined"!=typeof chrBands&&(r.bandData[t]=chrBands),i=r.processBandData(),r.writeContainer(i,t,n))}function Ji(){var t=(new Date).getTime(),e=this;(function(t){return new Promise(function(e){"number"==typeof t.config.organism?t.getOrganismFromEutils(function(){t.getTaxids(e)}):t.getTaxids(e)})})(e).then(function(n){!function(t,e,n){var r,i,o;for(n.config.taxid=o=t[0],n.config.taxids=t,r={9606:"",10090:""},i=0;i<t.length;i++)Qi(o=String(t[i]),r=Zi(o,r,n),e,n)}(n,t,e)})}class to{constructor(t,e){this.rawAnnots=this.parseBed(t,e)}static componentToHex(t){var e=parseInt(t,10).toString(16);return 1===e.length?"0"+e:e}static rgbToHex(t,e,n){return"#"+to.componentToHex(t)+to.componentToHex(e)+to.componentToHex(n)}parseGenomicCoordinates(t,e){var n,r,i,o;return n=t[0],r=parseInt(t[1],10),o=(i=parseInt(t[2],10))-r,e&&(n=n.slice(3)),[n,r,i,o]}parseAnnotFromTsvLine(t,e,n){var r,i,o,a,s,l,u,c=t.split(/\s/g);return[o,a,s,length]=this.parseGenomicCoordinates(c,n),-1===(i=e.indexOf(o))?[null,null]:(r=["",a,length,0],c.length>=4&&(r[0]=c[3]),c.length>=8&&(l=c[8].split(","),u=to.rgbToHex(l[0],l[1],l[2]),r.push(u)),[i,r])}parseRawAnnots(t,e,n,r){var i,o,a,s,l,u;for(u=!0,!1===isNaN(parseInt(n[e],10))&&(u=!1),i=e;i<n.length;i++)o=n[i],[a,s]=this.parseAnnotFromTsvLine(o,r,u),null!==a&&t[a].annots.push(s);return l=["name","start","length","trackIndex"],n[e].length>=8&&l.push("color"),{keys:l,annots:t}}parseBed(t,e){var n,r,i,o=[],a=t.split(/\r\n|\n/);for(r=Object.keys(e.chromosomes[e.config.taxid]),n=0;n<r.length;n++)o.push({chr:r[n],annots:[]});return i=0,("chr"===a[0].slice(0,3)||isNaN(parseInt(a[0],10)))&&(i=1),this.parseRawAnnots(o,i,a,r)}}var eo=Object.assign({},o),no=["name","start","length","trackIndex","trackIndexOriginal","color"];function ro(t){!1!==t.config.showTrackLabel&&(t.hideTrackLabelTimeout=window.setTimeout(function(){eo.select(t.config.container+" #_ideogramTrackLabel").transition().duration(500).style("opacity",0)},250))}var io=Object.assign({},o);function oo(t,e,n,r){var i,o,a,s,l,u=[],c=r.config.numAnnotTracks;for(i=0;i<c;i++)l=t.id+"-canvas-"+i,o=e-(a=r.config.annotationHeight)*(c-i)-7,s=io.select(r.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",l).attr("width",a).attr("height",n).style("position","absolute").style("left",o+"px").nodes()[0].getContext("2d"),u.push(s);return u}function ao(t,e,n,r){var i,o,a;for(i=0;i<t.length;i++)(a=e[(o=t[i]).trackIndex]).fillStyle=o.color,a.fillRect(o.trackIndex-1,o.startPx+r,n,.5)}function so(t){var e,n,r=this,i=r._layout.margin.top,o=r.config.chrHeight+i;for(io.selectAll(r.config.container+" canvas").remove(),eo.select(r.config.container+" #_ideogramTrackLabelContainer").append("div").attr("id","_ideogramTrackLabel").style("opacity",0).style("position","absolute").style("text-align","center").style("padding","1px").style("font","11px sans-serif").style("background","white").style("line-height","10px").style("z-index","9000"),n=0;n<t.length;n++)e=r.config.chrWidth,ao(t[n].annots,oo(r.chromosomesArray[n],r._layout.getChromosomeSetYTranslate(n),o,r),e,i);io.selectAll(r.config.container+" canvas").on("mouseover",function(){var t,e,n,i;t=r,clearTimeout(t.hideTrackLabelTimeout),e=function(t){var e,n,r;if(t.rawAnnots.metadata)e=t.rawAnnots.metadata.trackLabels;else if(t.config.heatmaps)for(e=[],n=t.config.heatmaps,r=0;r<n.length;r++)e.push(n[r].key);else e=t.rawAnnots.keys.slice(0).filter(t=>!no.includes(t));return t.displayedTrackIndexes&&(e=e.filter(function(e,n){return t.displayedTrackIndexes.includes(n+1)})),e.join("<br>")}(t),eo.select(t.config.container+" #_ideogramTrackLabel").interrupt().style("top","").style("left","").style("transform",null).style("transform","rotate(-90deg)").html(e),[n,i]=function(t,e,n){var r,i,o,a,s;return r=e.id.split("-").slice(0,-1).join("-")+"-0",i=eo.select(n.config.container+" #"+r).nodes()[0].getBoundingClientRect(),o=eo.select(n.config.container+" #_ideogramTrackLabel").nodes()[0].getBoundingClientRect(),a=eo.select(n.config.container).nodes()[0].getBoundingClientRect(),s=Math.round(i.left+o.width)-i.width-1,[s-=a.left-7,-(t.split("<br>").length-2)*i.width+2]}(e,this,t),function(t,e,n){eo.select(n.config.container+" #_ideogramTrackLabel").style("opacity",1).style("left",e+"px").style("top",t+"px").style("width","max-content").style("transform-origin","bottom left").style("text-align","left").on("mouseover",function(){clearTimeout(n.hideTrackLabelTimeout)}).on("mouseout",function(){ro(n)})}(i,n,t)}).on("mouseout",function(){ro(r)}),r.onDrawAnnotsCallback&&r.onDrawAnnotsCallback()}function lo(t,e,n,r,i){return t===e&&"+"===i&&n>r||n===i||0!==t&&t!==e&&n<=i&&n>r||0===t&&n<=i}function uo(t,e){var n,r,i,o,a,s,l,u;for(n=0;n<t.length;n++)r=t.length-1,o=(i=t[n])[0],a=parseFloat(o),!1===isNaN(a)&&(o=a),0!==n&&(l=parseFloat(t[n-1][0])),s=i[1],lo(n,r,e,l,o)&&(u=s);return u}function co(t,e,n){var r,i,o,a,s,l,u=[];for(r=0;r<e.length;r++)for(o=e[r],i=0;i<t.length;i++)a=o.slice(0,3),l=uo(n.config.heatmaps[i].thresholds,s=o[t[i]]),a.push(i,l,s),u.push(a);return u}function fo(t){var e,n,r,i=(new Date).getTime(),o=t.keys,a=t.annots;for(n=[],r=0;r<this.config.heatmaps.length;r++)n.push(o.indexOf(this.config.heatmaps[r].key));e=function(t,e,n){var r,i,o,a,s=[];for(a=0;a<e.length;a++)i=(r=e[a]).chr,o=co(t,r.annots,n),s.push({chr:i,annots:o});return s}(n,a,this),o.splice(3,0,"trackIndex"),o.splice(4,0,"color"),this.rawAnnots.keys=o,this.rawAnnots.annots=e,function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in deserializeAnnotsForHeatmap: "+(n-t)+" ms")}(i,this)}var ho=Object.assign({},o);function po(){call(this.onLoadAnnotsCallback)}function go(){call(this.onDrawAnnotsCallback)}function vo(){!1!==this.config.showAnnotTooltip&&(this.hideAnnotTooltipTimeout=window.setTimeout(function(){ho.select("._ideogramTooltip").transition().duration(500).style("opacity",0).style("pointer-events","none")},250))}function mo(t){call(this.onWillShowAnnotTooltipCallback,t)}function yo(t,e){var n,r,i,o;!1!==this.config.showAnnotTooltip&&(clearTimeout(this.hideAnnotTooltipTimeout),this.onWillShowAnnotTooltipCallback&&(t=this.onWillShowAnnotTooltipCallback(t)),(o=ho.select("._ideogramTooltip")).interrupt(),n=e.getScreenCTM().translate(+e.getAttribute("cx"),+e.getAttribute("cy")),[r,i]=function(t){var e,n,r;return r="chr"+t.chr+":"+t.start.toLocaleString(),t.length>0&&(r+="-"+t.stop.toLocaleString()),e=r,n=24,t.name&&(e=(t.displayName?t.displayName:t.name)+"<br/>"+e,n+=8),[e,n]}(t),function(t,e,n,r,i){o.html(e).style("opacity",1).style("left",n.e+"px").style("top",n.f-r+"px").style("pointer-events",null).on("mouseover",function(){clearTimeout(i.hideAnnotTooltipTimeout)}).on("mouseout",function(){i.startHideAnnotTooltipTimeout()})}(0,r,n,i,this))}function _o(t){var e,n,r=!1,i=(new Date).getTime();return e=this.chromosomes[this.config.taxid],function(t){"histogramScaling"in t.config==0&&(t.config.histogramScaling="absolute")}(this),void 0===this.maxAnnotsPerBar&&(this.maxAnnotsPerBar={},r=!0),function(t,e,n){var r,i,o,a,s,l,u;if(e||"relative"===n.config.histogramScaling){for(r=0,i=0;i<t.length;i++){for(o=0,a=t[i].annots,s=t[i].chr,l=0;l<a.length;l++)(u=a[l].count)>o&&(o=u),u>r&&(r=u);n.maxAnnotsPerBar[s]=o}n.maxAnnotsPerBarAllChrs=r}}(n=function(t,e,n,r){var i,o,a,s,l,u,c,f,h,d,p=r.config.barWidth;for(i in t)for(o=t[i].annots,s=e[(a=n[t[i].chr]).chrIndex].annots,l=0;l<o.length;l++)for(c=(u=o[l]).px-r.bump,f=0;f<s.length;f++)if(d=(h=s[f].px)+p,f===s.length-1&&(d+=p),c>=h&&c<d){e[a.chrIndex].annots[f].count+=1,e[a.chrIndex].annots[f].annots.push(u);break}return e}(t,n=function(t,e){var n,r,i,o,a,s,l,u=e.config.barWidth,c=[];for(n in t){for(i=(r=t[n]).bands[r.bands.length-1],o=Math.round(i.px.stop/u),a={chr:n,annots:[]},s=0;s<o;s++)a.annots.push({bp:e.convertPxToBp(r,(l=s*u-e.bump)+e.bump),px:l,count:0,chrIndex:r.chrIndex,chrName:n,color:e.config.annotationsColor,annots:[]});c.push(a)}return c}(e,this),e,this),r,this),n=function(t,e,n){var r,i,o,a,s,l=n._layout._isRotated;for(r=0;r<e.length;r++)for(t=e[r].annots,i=e[r].chr,o=0;o<t.length;o++)a=t[o].count,s="relative"===n.config.histogramScaling?a/n.maxAnnotsPerBar[i]:a/n.maxAnnotsPerBarAllChrs,e[r].annots[o].height=!1===l?s*n.config.chrMargin:s*n.config.chrHeightOriginal*3;return e}(t,n,this),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time spent in getHistogramBars: "+(n-t)+" ms")}(i,this),this.bars=n,n}var bo=Object.assign({},o),wo=19,xo="#_ideogramLegend {font: 12px Arial; line-height: 19px;} #_ideogramLegend svg {float: left;} #_ideogramLegend ul {position: relative; left: -14px; list-style: none; float: left; padding-left: 10px; margin-top: 0px;} #_ideogramLegend ul span {position: relative; left: -15px;} ";function ko(t){var e,n='fill="'+t.color+'" style="stroke: #AAA;"',r=t.shape;return"shape"in t&&["circle","triangle"].includes(r)?"circle"===r?e='<path d="m2,9a 4.5,4.5 0 1,0 9,0a 4.5,4.5 0 1,0 -9,0" '+n+"></path>":"triangle"===r&&(e='<path d="m7,3 l -5 9 l 9 0 z" '+n+"></path>"):e='<rect height="10" width="10"  y="3" '+n+"/>",e}function Eo(t,e,n){var r,i,o;for(r=0;r<n.rows.length;r++)t+="<li>"+(o=n.rows[r]).name+"</li>",i=wo*r,"name"in n&&(i+=wo),e+='<g transform="translate(0, '+i+')">'+ko(o)+"</g>";return[t,e]}var zo=Object.assign({},o);function Ao(t){var e,n,r=[],i=this.chromosomes[this.config.taxid];if("annots"in t[0])return this.drawProcessedAnnots(t);for(n in i)r.push({chr:n,annots:[]});r=function(t,e){var n,r,i,o;for(n=0;n<t.length;n++)for(i=t[n],r=0;r<e.length;r++)if(i.chr===e[r].chr){o=[i.name,i.start,i.stop-i.start],"color"in i&&o.push(i.color),"shape"in i&&o.push(i.shape),e[r].annots.push(o);break}return e}(t,r),e=function(t){var e=["name","start","length"];return"color"in t[0]&&e.push("color"),"shape"in t[0]&&e.push("shape"),e}(t),this.rawAnnots={keys:e,annots:r},this.annots=this.processAnnotData(this.rawAnnots),this.drawProcessedAnnots(this.annots)}function Co(t){var e;zo.selectAll(this.selector+" .annot").remove(),e="tracks",this.config.annotationsLayout&&(e=this.config.annotationsLayout),"legend"in this.config&&function(t){var e,n,r,i,o,a;for(bo.select(t.config.container+" #_ideogramLegend").remove(),n=t.config.legend,a="",e=0;e<n.length;e++)"name"in(o=n[e])&&(i="<span>"+o.name+"</span>"),r='<svg width="'+wo+'">',[i,r]=Eo(i,r,o),a+=(r+="</svg>")+"<ul>"+i+"</ul>";var s=bo.select(t.config.container+" #_ideogramOuterWrap");s.append("style").html(xo),s.append("div").attr("id","_ideogramLegend").html(a)}(this),"heatmap"!==e?(function(t,e,n){var r;!function(t,e){var n,r;if("heatmap"!==t&&"histogram"!==t){for(r=0,n=0;n<e.length;n++)r+=e[n].annots.length;r>2e3&&console.warn('Rendering more than 2000 annotations in Ideogram?\nTry setting "annotationsLayout" to "heatmap" or "histogram" in your Ideogram configuration object for better layout and performance.')}}(t,e),"histogram"===t&&(e=n.getHistogramBars(e)),r=function(t,e){return zo.selectAll(n.selector+" .chromosome").data(t).selectAll("path.annot").data(function(t){return t.annots}).enter()}(n.fillAnnots(e)),"tracks"===t?function(t,e){var n,r=e.config.annotationHeight;n=function(t){var e;return{triangle:"m0,0 l -"+r+" "+2*r+" l "+2*r+" 0 z",circle:"m -"+(e=r)+", "+e+"a "+e+","+e+" 0 1,0 "+2*e+",0a "+e+","+e+" 0 1,0 -"+2*e+",0",rectangle:"m0,0 l 0 "+2*r+"l "+r+" 0l 0 -"+2*r+"z"}}(),t.append("g").attr("id",function(t){return t.id}).attr("class","annot").attr("transform",function(t){return"translate("+t.px+","+(e.config.chrWidth+t.trackIndex*r*2)+")"}).append("path").attr("d",function(t){return function(t,e){return t.shape&&"triangle"!==t.shape?"circle"===t.shape?n.circle:"rectangle"===t.shape?n.rectangle:t.shape:n.triangle}(t)}).attr("fill",function(t){return t.color}).on("mouseover",function(t){e.showAnnotTooltip(t,this)}).on("mouseout",function(){e.startHideAnnotTooltipTimeout()})}(r,n):"overlay"===t?function(t,e){r.append("polygon").attr("id",function(t){return t.id}).attr("class","annot").attr("points",function(t){var n,r,i=e.config.chrWidth;return t.stopPx-t.startPx>1?(n=t.startPx,r=t.stopPx):(n=t.px-.5,r=t.px+.5),n+","+i+" "+r+","+i+" "+r+",0 "+n+",0"}).attr("fill",function(t){return t.color}).on("mouseover",function(t){e.showAnnotTooltip(t,this)}).on("mouseout",function(){e.startHideAnnotTooltipTimeout()})}(0,n):"histogram"===t&&function(t,e){var n,r,i={},o=e.config.chrWidth;for(r in n=e.chromosomes[e.config.taxid])i[r]=n[r];t.append("polygon").attr("class","annot").attr("points",function(t){return function(t,e,n,r){var i,o,a,s,l=n[t.chr];return(o=t.px+r.config.barWidth+r.bump)>l&&(o=l),(i=t.px+r.bump)+","+(a=e)+" "+o+","+a+" "+o+","+(s=e+t.height)+" "+i+","+s}(t,o,i,e)}).attr("fill",function(t){return t.color})}(r,n)}(e,t,this),this.onDrawAnnotsCallback&&this.onDrawAnnotsCallback()):this.drawHeatmaps(t)}var So=Object.assign({},o);function To(t,e,n){return t.append("g").attr("class","syntenicRegion").attr("id",e).on("click",function(){var t=this,e=So.selectAll(n.selector+" .syntenicRegion").filter(function(){return this!==t});e.classed("hidden",!e.classed("hidden"))}).on("mouseover",function(){var t=this;So.selectAll(n.selector+" .syntenicRegion").filter(function(){return this!==t}).classed("ghost",!0)}).on("mouseout",function(){So.selectAll(n.selector+" .syntenicRegion").classed("ghost",!1)})}function Mo(t,e,n){var r,i;return i=t.r2,(r=t.r1).startPx=n.convertBpToPx(r.chr,r.start)+e,r.stopPx=n.convertBpToPx(r.chr,r.stop)+e,i.startPx=n.convertBpToPx(i.chr,i.start)+e,i.stopPx=n.convertBpToPx(i.chr,i.stop)+e,[r,i]}function No(t,e,n,r,i,o){var a,s;a="color"in o?o.color:"#CFC",s="opacity"in o?o.opacity:1,t.append("polygon").attr("points",e+", "+r.startPx+" "+e+", "+r.stopPx+" "+n+", "+i.stopPx+" "+n+", "+i.startPx).attr("style","fill: "+a+"; fill-opacity: "+s)}function Do(t,e,n,r,i){t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",r.startPx).attr("y2",i.startPx),t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",r.stopPx).attr("y2",i.stopPx)}function Io(t){var e=(new Date).getTime();(function(t,e,n,r){var i,o,a,s,l,u,c,f;for(i=0;i<t.length;i++)o=t[i],[a,s]=Mo(o,n,r),l=To(e,a.chr.id+"_"+a.start+"_"+a.stop+"___"+s.chr.id+"_"+s.start+"_"+s.stop,r),u=r.config.chrWidth,No(l,c=r._layout.getChromosomeSetYTranslate(0),f=r._layout.getChromosomeSetYTranslate(1)-u,a,s,o),Do(l,c,f,a,s)})(t,So.select(this.selector).insert("g",":first-child").attr("class","synteny"),this._layout.margin.left,this),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in drawSyntenicRegions: "+(n-t)+" ms")}(e,this)}var Oo=zi.a.assign({},o);function Lo(){this.config.numAnnotTracks=this.config.annotationsNumTracks,Oo.selectAll(this.selector+" .annot").remove(),this.drawAnnots(this.processAnnotData(this.rawAnnots))}function Po(t){var e,n,r=this.rawAnnots.annots;return this.config.numAnnotTracks=t.length,e=function(t,e){var n,r,i,o,a,s,l;for(r=[],o=0;o<t.length;o++){for(i=t[o],a=[],s=0;s<i.annots.length;s++)l=(n=i.annots[s].slice())[3]+1,e.includes(l)&&(n[3]=e.indexOf(l),a.push(n));r.push({chr:i.chr,annots:a})}return r}(r,t),n=this.processAnnotData({keys:this.rawAnnots.keys,annots:e}),Oo.selectAll(this.selector+" .annot").remove(),ideogram.displayedTrackIndexes=t,this.drawAnnots(n),n}function Bo(t){var e,n;return(e=t.keys).length<4||"trackIndex"!==e[3]||"trackIndexOriginal"===e[4]?t:(n=function(t,e){var n,r,i,o,a,s,l,u=[];for(l=1,n=0;n<t.length;n++){for(i=t[n],a=[],r=0;r<i.annots.length;r++)(s=(o=i.annots[r].slice())[3])+1>l&&(l=s+1),o.splice(4,0,s),a.push(o);u.push({chr:i.chr,annots:a})}return e.numAvailTracks=l,u}(t.annots,this),e.splice(4,0,"trackIndexOriginal"),t={keys:e,annots:n},this.rawAnnots.metadata&&(t.metadata=this.rawAnnots.metadata),t)}var Fo=[["F00"],["F00","88F"],["F00","CCC","88F"],["F00","FA0","0AF","88F"],["F00","FA0","CCC","0AF","88F"],["F00","FA0","875","578","0AF","88F"],["F00","FA0","875","CCC","578","0AF","88F"],["F00","FA0","7A0","875","0A7","578","0AF","88F"],["F00","FA0","7A0","875","CCC","0A7","578","0AF","88F"],["F00","FA0","7A0","875","552","255","0A7","578","0AF","88F"]];function jo(t,e,n,r,i,o,a){return a.config.annotationTracks?i=function(t,e,n,r,i){var o;return e.trackIndex=n[3],(o=i.config.annotationTracks[e.trackIndex]).color&&(e.color=o.color),o.shape&&(e.shape=o.shape),t[r].annots.push(e),t}(i,t,n,o,a):"trackIndex"===e[3]&&1!==a.numAvailTracks?[i,r]=function(t,e,n,r,i,o){var a=Fo[o.numAvailTracks-1];return t.trackIndex=e[3],t.trackIndexOriginal=e[4],t.color="#"+a[t.trackIndexOriginal],t.trackIndex>o.config.numTracks-1?(t.trackIndex in n?n[t.trackIndex].push(t):n[t.trackIndex]=[t],[r,n]):(r[i].annots.push(t),[r,n])}(t,n,r,i,o,a):i=function(t,e,n,r){return e.trackIndex=0,e.color||(e.color=r.config.annotationsColor),e.shape||(e.shape="triangle"),t[n].annots.push(e),t}(i,t,o,a),[i,r]}function Ro(t,e,n,r,i,o,a){var s,l,u,c;for(s=0;s<n.annots.length;s++){for(c=n.annots[s],u={},l=0;l<o.length;l++)u[o[l]]=c[l];u.stop=u.start+u.length,u.chr=n.chr,u.chrIndex=i,u.startPx=a.convertBpToPx(r,u.start),u.stopPx=a.convertBpToPx(r,u.stop),u.px=Math.round((u.startPx+u.stopPx)/2),[t,e]=jo(u,o,c,e,t,i,a)}return[t,e]}function Ho(t){console.warn('Chromosome "'+t.chr+'" undefined in ideogram; '+t.annots.length+" annotations not shown")}function qo(t){var e,n,r;return e=t.keys,t=t.annots,[n,r]=function(t,e,n){var r,i,o,a,s=[],l={};for(r=-1,i=0;i<t.length;i++)void 0!==(a=n.chromosomes[n.config.taxid][(o=t[i]).chr])?(r++,s.push({chr:o.chr,annots:[]}),[s,l]=Ro(s,l,o,a,r,e,n)):Ho(o);return[s,l]}(t,e,this),n=function(t,e){var n,r,i,o,a,s;for(n=t,t=[],s=e.chromosomesArray,r=0;r<s.length;r++)for(a=s[r].name,i=0;i<n.length;i++)(o=n[i]).chr===a&&t.push(o);return t}(n,this),function(t,e){var n,r=e.config.numAnnotTracks;r>10&&console.error("Ideogram only displays up to 10 tracks at a time.  You specified "+r+" tracks.  Perhaps consider a different way to visualize your data."),(n=Object.keys(t).length)&&console.warn("Ideogram configuration specified "+r+" tracks, but loaded annotations contain "+n+" extra tracks.")}(r,this),n}var Wo=zi.a.assign({},o,a);function $o(){var t=this.config;t.annotationsPath||t.localAnnotationsPath||this.annots||t.annotations?function(t,e){var n;e.annotationHeight||(n="heatmap"===e.annotationsLayout?e.chrWidth-1:Math.round(e.chrHeight/100),t.config.annotationHeight=n),t.config.numAnnotTracks=e.annotationTracks?e.annotationTracks.length:e.annotationsNumTracks?e.annotationsNumTracks:1,t.config.annotTracksHeight=e.annotationHeight*e.numAnnotTracks,void 0===e.barWidth&&(t.config.barWidth=3)}(this,t):this.config.annotTracksHeight=0,void 0===t.annotationsColor&&(this.config.annotationsColor="#F00"),function(t,e){!1!==e.showAnnotTooltip&&(t.config.showAnnotTooltip=!0),e.onWillShowAnnotTooltip&&(t.onWillShowAnnotTooltipCallback=e.onWillShowAnnotTooltip)}(this,t)}function Uo(t){t.rawAnnots.annots=t.rawAnnots.annots.sort(function(t,e){return ki(t.chr,e.chr)}),t.onLoadAnnotsCallback&&t.onLoadAnnotsCallback(),t.config.heatmaps&&t.deserializeAnnotsForHeatmap(t.rawAnnots)}function Vo(t){var e,n=this;"http"===t.slice(0,4)?(e=function(t){var e,n;return"bed"!==(n=(e=t.split("?")[0].split("."))[e.length-1])&&"json"!==n?(n=n.toUpperCase(),void alert("Ideogram.js only supports BED and Ideogram JSON at the moment.  Sorry, check back soon for "+n+" support!")):n}(t),Wo.text(t).then(function(t){n.rawAnnots="bed"===e?new to(t,n).rawAnnots:JSON.parse(t),Uo(n)})):Wo.json(n.config.annotationsPath).then(function(t){n.rawAnnots=t,Uo(n)})}function Yo(t){var e,n,r,i,o,a,s;for(e=[],n=[],r=this.chromosomesArray,i=0;i<r.length;i++)n.push(o=r[i].name),e.push({chr:o,annots:[]});for(i=0;i<t.length;i++)-1!==(s=n.indexOf((a=t[i]).chr))&&(e[s]=a);return e}var Xo="&api_key=7e33ac6a08a6955ec3b83d214d22b21a2808",Ko="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/",Go=Ko+"esearch.fcgi?retmode=json"+Xo,Zo=Ko+"esummary.fcgi?retmode=json"+Xo,Qo=Ko+"elink.fcgi?retmode=json"+Xo,Jo=n(3),ta=zi.a.assign({},a,r);function ea(t,e){var n,r,[n,r]=function(t,e){var n=t.genome;return"mitochondrion"===n?function(t,e){var n,r;return e.config.showNonNuclearChromosomes?(n=t.genome,[-1===(r=t.subtype.split("|").indexOf("plasmid"))?"MT":t.subname.split("|")[r],n]):[null,null]}(t,e):"chloroplast"===n||"plastid"===n?e.config.showNonNuclearChromosomes?["CP","chloroplast"]:[null,null]:"apicoplast"===n?e.config.showNonNuclearChromosomes?["AP","apicoplast"]:[null,null]:function(t){var e,n;return e=t.subtype.split("|").indexOf("chromosome"),void 0!==(n=t.subname.split("|")[e])&&"chr"===n.substr(0,3)&&(n=n.substr(3)),[n,"nuclear"]}(t)}(t,e);return{name:n,length:t.slen,type:r}}function na(t,e){var n,r,i=[],o=this,a={callback:t,recovering:e,ideo:o};n=function(t){var e,n;return e=t.config.organism,n=t.assemblyIsAccession()?t.config.assembly+"%22[Assembly%20Accession]":e+"%22[organism]AND%20(%22latest%20refseq%22[filter])%20",t.esearch+"&db=assembly&term=%22"+n+"AND%20(%22chromosome%20level%22[filter]%20OR%20%22complete%20genome%22[filter])"}(o),ta.json(n).then(function(t){return function(t,e){return ta.json(o.esummary+"&db=assembly&id="+t.esearchresult.idlist[0])}(t)}).then(function(t){return[i,r]=function(t,e,n,r){var i,o,a,s;return a=(i=t.result[s=t.result.uids[0]]).gbuid,e.push(i.assemblyaccession),o=function(t,e,n,r){return Object(zi.e)(r)||void 0!==n?"&db=nuccore&linkname=gencoll_nuccore_chr&from_uid="+t:"&db=nuccore&linkname=assembly_nuccore_refseq&from_uid="+e}(a,s,n,r),[e,r.elink+o]}(t,i,e,o),ta.json(r)}).then(function(t){return function(t,e,n){var r;return function(t,e,n){var r=i[0];if(t.linksets[0].linksetdbs[0].links.length>100){if(void 0===n.recovering)return n.ideo.getAssemblyAndChromosomesFromEutils(n.callback,!0),Promise.reject("Unexpectedly found genomic scaffolds instead of chromosomes while querying RefSeq.  Recovering.");throw Error("Failed to find chromosomes for genome "+r)}}(t,0,n),r=t.linksets[0].linksetdbs[0].links.join(","),ta.json(n.ideo.esummary+"&db=nucleotide&id="+r)}(t,0,a)}).then(function(e){return i=function(t,e,n){var r,i,o=[];for(r in t)"uids"!==r&&(i=ea(t[r],n),o.push(i));return o=o.sort(Ideogram.sortChromosomes),n.coordinateSystem="bp",e.push(o),e}(e.result,i,o),t(i)},function(t){console.warn(t)})}var ra,ia,oa,aa=zi.a.assign({},o);function sa(){var t=this.bandsToShow.join(",");aa.selectAll(this.selector+" .bandLabel, .bandLabelStalk").style("display","none"),aa.selectAll(t).style("display","")}function la(t,e,n,r,i){return e!==n&&(t=r[i.id][n]+36),t}function ua(t,e,n,r,i,o,a){var s,l;return n<r+(a?e:i)?(e=i,s=o,l=!!a):t.push(o),[t,e,s,l]}function ca(t,e){var n,r,i,o,a,s=[],l=t[e.id].length,u=0;for(n=0;n<l;n++)i=t[e.id][n],[s,u,r,a]=ua(s,u,i,5,o,n,!0),a||(o=la(o,r,n,t,e),[s,u,r,a]=ua(s,u,i,5,o,n,!1));return s}function fa(t,e){var n,r,i,o,a,s;for(this.bandsToShow=[],n=0;n<t.length;n++){for(o=[],a=(r=ca(e,i=t[n])).length,s=0;s<a;s++)o.push("#"+i.id+" .bsbsl-"+r[s]);this.bandsToShow=this.bandsToShow.concat(o)}}ra=[["gneg","#FFF","#FFF","#DDD"],["gpos25","#C8C8C8","#DDD","#BBB"],["gpos33","#BBB","#BBB","#AAA"],["gpos50","#999","#AAA","#888"],["gpos66","#888","#888","#666"],["gpos75","#777","#777","#444"],["gpos100","#444","#666","#000"],["acen","#FEE","#FEE","#FDD"],["noBands","#BBB","#BBB","#AAA"]],ia='<style>#_ideogram {padding-left: 5px;} #_ideogram .labeled {padding-left: 15px;} #_ideogram.labeledLeft {padding-left: 15px; padding-top: 15px;} #_ideogram text {font: 9px Tahoma; fill: #000;} #_ideogram .italic {font-style: italic;} #_ideogram .chromosome {cursor: pointer; fill: #AAA;}#_ideogram .chrSetLabel {font-weight: bolder;}#_ideogram .ghost {opacity: 0.2;}#_ideogram .hidden {display: none;}#_ideogram .bandLabelStalk line {stroke: #AAA; stroke-width: 1;}#_ideogram .syntenyBorder {stroke:#AAA;stroke-width:1;}#_ideogram .brush .selection {  fill: #F00;  stroke: #F00;  fill-opacity: .3;  shape-rendering: crispEdges;}#_ideogram .noBands {fill: #AAA;}#_ideogram .gneg {fill: #FFF}#_ideogram .gpos25 {fill: #BBB}#_ideogram .gpos33 {fill: #AAA}#_ideogram .gpos50 {fill: #888}#_ideogram .gpos66 {fill: #666}#_ideogram .gpos75 {fill: #444}#_ideogram .gpos100 {fill: #000}#_ideogram .gpos {fill: #000}#_ideogram .acen {fill: #FDD}#_ideogram .stalk {fill: #CCE;}#_ideogram .gvar {fill: #DDF}#_ideogram.faint .gneg {fill: #FFF}#_ideogram.faint .gpos25 {fill: #EEE}#_ideogram.faint .gpos33 {fill: #EEE}#_ideogram.faint .gpos50 {fill: #EEE}#_ideogram.faint .gpos66 {fill: #EEE}#_ideogram.faint .gpos75 {fill: #EEE}#_ideogram.faint .gpos100 {fill: #DDD}#_ideogram.faint .gpos {fill: #DDD}#_ideogram.faint .acen {fill: #FEE}#_ideogram.faint .stalk {fill: #EEF;}#_ideogram.faint .gvar {fill: #EEF}#_ideogram .gneg {fill: url("#gneg")} #_ideogram .gpos25 {fill: url("#gpos25")} #_ideogram .gpos33 {fill: url("#gpos33")} #_ideogram .gpos50 {fill: url("#gpos50")} #_ideogram .gpos66 {fill: url("#gpos66")} #_ideogram .gpos75 {fill: url("#gpos75")} #_ideogram .gpos100 {fill: url("#gpos100")} #_ideogram .gpos {fill: url("#gpos100")} #_ideogram .acen {fill: url("#acen")} #_ideogram .stalk {fill: url("#stalk")} #_ideogram .gvar {fill: url("#gvar")} #_ideogram .noBands {fill: url("#noBands")} #_ideogram .chromosome {fill: url("#noBands")} </style>',oa='<pattern id="stalk" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#CCE" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#88B; stroke-width:0.7;" /></pattern><pattern id="gvar" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(-30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#DDF" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#99C; stroke-width:0.7;" /></pattern>';var ha=zi.a.assign({},o);function da(t,e,n,r){var i=this,o=i._layout,a=n.chrIndex;return t.selectAll("text").data(e).enter().append("g").attr("class",function(t,e){return"bandLabel bsbsl-"+e}).attr("transform",function(t){var e=o.getChromosomeBandLabelTranslate(t,a);return r[n.id].push("horizontal"===i.config.orientation?e.x+13:e.y+6),e.translate}).append("text").attr("text-anchor",o.getChromosomeBandLabelAnchor(a)).text(function(t){return t.name}),r}function pa(t,e,n,r){var i=this;t.selectAll("line.bandLabelStalk").data(e).enter().append("g").attr("class",function(t,e){return"bandLabelStalk bsbsl-"+e}).attr("transform",function(t){var e;return e=i.round(t.px.start+t.px.width/2),r[n.id].push(e+13),"translate("+e+","+-10+")"}).append("line").attr("x1",0).attr("y1",i._layout.getChromosomeBandTickY1(n.chrIndex)).attr("x2",0).attr("y2",i._layout.getChromosomeBandTickY2(n.chrIndex))}function ga(t){var e,n,r,i,o,a={};for(i=function(t){var e,n,r=[];for(e in t)for(n in t[e])r.push(t[e][n]);return r}(t),e=0;e<i.length;e++)n=ha.select(this.selector+" #"+(r=i[e]).id),a[r.id]=[],o=r.bands.filter(t=>"pter"!==t.name),a=this.drawBandLabelText(n,o,r,a),this.drawBandLabelStalk(n,o,r,a);this.setBandsToShow(i,a)}function va(t,e){return[e[t][0],e[t][1],e[t][2],e[t][3]]}function ma(){var t="";return t=function(t){var e,n,r,i,o,a="";for(e=0;e<t.length;e++)[n,r,i,o]=va(e,t),a+='<linearGradient id="'+n+'" x1="0%" y1="0%" x2="0%" y2="100%">',a+="gneg"===n?'<stop offset="70%" stop-color="'+i+'" /><stop offset="95%" stop-color="'+o+'" /><stop offset="100%" stop-color="'+r+'" />':'<stop offset="5%" stop-color="'+r+'" /><stop offset="15%" stop-color="'+i+'" /><stop offset="60%" stop-color="'+o+'" />',a+="</linearGradient>";return a}(ra),ia+"<defs>"+(t+=oa)+"</defs>"}var ya=n(4);function _a(t,e,n,r){var i,o;return n.push(i=e[t]),(o={iscn:i[i.length-1].iscn.stop,bp:i[i.length-1].bp.stop}).iscn>r.maxLength.iscn&&(r.maxLength.iscn=o.iscn),o.bp>r.maxLength.bp&&(r.maxLength.bp=o.bp),n}function ba(t,e,n,r){var i,o;if("iscn"===r.coordinateSystem||r.config.multiorganism)n=function(t,e,n,r){var i,o;for(i=r.parseBands(r.bandData[t],t,e),e=Object.keys(i).sort(function(t,e){return ki(t,e)}),r.config.chromosomes[t]=e.slice(),r.numChromosomes+=r.config.chromosomes[t].length,o=0;o<e.length;o++)n=_a(e[o],i,n,r);return n}(t,e,n,r);else if("bp"===r.coordinateSystem)for(r.config.chromosomes[t]=e.slice(),r.numChromosomes+=r.config.chromosomes[t].length,o=0;o<e.length;o++)(i=e[o]).length>r.maxLength.bp&&(r.maxLength.bp=i.length);return n}function wa(){var t,e,n,r,i,o,a=(new Date).getTime();t=[],[n,r]=function(t){var e,n,r;if(!0===t.config.multiorganism)for(t.coordinateSystem="bp",r=t.config.taxids,e=0;e<r.length;e++)n=r[e];else void 0===t.config.taxid&&(t.config.taxid=t.config.taxids[0]),r=[n=t.config.taxid],t.config.taxids=r;return[n,r]}(this),"chromosomes"in this.config&&(i=this.config.chromosomes),this.config.multiorganism&&(o=i),this.config.chromosomes={};for(e=0;e<r.length;e++)n=r[e],this.config.multiorganism&&(i=o[n]),t=ba(n,i,t,this);return function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in processBandData: "+(n-t)+" ms")}(a,this),t}var xa=zi.a.assign({},i,o);function ka(){call(this.onBrushMoveCallback)}function Ea(t,e,n){var r,i,a,s,l=this.config.chrWidth+6.5,u=this._layout.margin.left;[t,e,n]=function(t,e,n){var r,i;return r=t.split(":"),i=t.split("-"),r.length>1&&i.length>1&&(t=r[0].replace("chr",""),i=r[1].split("-"),e=parseInt(i[0]),n=parseInt(i[1]-1)),[t,e,n]}(t,e,n),r=function(t,e){var n,r;for(n=0;n<e.chromosomesArray.length;n++)if((r=e.chromosomesArray[n]).name===t)return r}(t,this),[a,s]=function(t,e){var n,r,i=[1],o=[1],a=t.bands.slice(-1)[0];for(r=0;r<t.bands.length;r++)i.push((n=t.bands[r]).bp.start),o.push(n.px.start+e);return i.push(a.bp.stop-1),o.push(a.px.stop+e),[i,o]}(r,u),i=r.bands.slice(-1)[0].bp.stop,void 0===e&&(e=Math.floor(i/10)),void 0===n&&(n=Math.ceil(2*e)),function(t,e,n,r,i){var a,s=i.config.chrHeight;a=xa.scaleLinear().domain(t).range(e),i.brush=xa.brushX().extent([[n,0],[s+n,r]]).on("brush",function(){var t=o.event.selection.map(a.invert),e=Math.floor(t[0]),n=Math.ceil(t[1]);i.selectedRegion={from:e,to:n,extent:n-e},i.onBrushMove&&i.onBrushMoveCallback()})}(a,s,u,l,this),function(t,e,n){n.selectedRegion={from:t,to:e,extent:e-t+1}}(e,n,this),function(t,e,n,r,i,o){var a,s,l;a=o.convertBpToPx(t,e)+r,s=o.convertBpToPx(t,n)+r,l=o._layout.getChromosomeSetYTranslate(0)+(o.config.chrWidth-i)/2,xa.select(o.selector).append("g").attr("class","brush").attr("transform","translate(0, "+l+")").call(o.brush).call(o.brush.move,[a,s])}(r,e,n,u,l,this)}function za(t,e){var n,r,i,o,a,s,l,u,c;for(n=this.bandsArray,i=this.config.chromosomes[r=this.config.taxid],a=(o="male"===this.config.sex?[1,0]:[0,0]).length,c=0;c<a;c++)s=i[u=o[c]+e],l=this.getChromosomeModel(n[r][u],s,r,u),this.appendHomolog(l,e,c,t)}function Aa(t){var e,n,r={X:1,Y:1};if(2===this.config.ploidy&&this.config.sex)for(this.sexChromosomes.list=[],n=0;n<t.length;n++)e=t[n],"male"===this.config.sex&&e in r?(this.sexChromosomes.list.push(e),this.sexChromosomes.index||(this.sexChromosomes.index=n)):"X"===e&&(this.sexChromosomes.list.push(e,e),this.sexChromosomes.index=n)}function Ca(t,e){var n,r;if(t.bands.length>1){if([r,n]=function(t,e){var n,r,i,o,a,s,l;for(n=0;n<t.bands.length;n++)if(a=(r=t.bands[n]).bp.start,l=(s=r.bp.stop)-a,o=r.iscn.stop-(i=r.iscn.start),e>=a&&e<=s)return[r.px.start+r.px.width*(i+o/l*(e-a)-i)/o,r];return[null,r]}(t,e),null!==r)return r}else if(e>=1&&e<=t.length)return t.scale.bp*e;!function(t,e,n){throw new Error("Base pair out of range.  bp: "+t+"; length of chr"+e.name+": "+n.bp.stop)}(e,t,n)}function Sa(t,e,n,r,i,o,a){return a=t-e,Math.round(o.bp.start+(o.bp.stop-o.bp.start)*(e+a/(r-i)*(n-i)-e)/a)}function Ta(t,e){var n,r,i,o;for(0===e&&(e=t.bands[0].px.start),n=0;n<t.bands.length;n++)if(i=(r=t.bands[n]).px.start,o=r.px.stop,e>=i&&e<=o)return Sa(r.iscn.stop,r.iscn.start,e,o,i,r,void 0);!function(t,e,n){throw new Error("Pixel out of range.  px: "+t+"; length of chr"+e.name+": "+o)}(e,t)}xa.scaleLinear=jn,xa.max=cn;var Ma=n(6),Na=Object.assign({},o);function Da(){var t,e=[],n=this.annots;for(t=0;t<n.length;t++)e=e.concat(n[t].annots);return e}function Ia(t){var e,n,r,i=[],o=this.annots;for(e in o)i.push({chr:o[e].chr,annots:[]});for(r=0;r<t.length;r++)i[(n=t[r]).chrIndex].annots.push(n);return i}function Oa(){var t,e,n=this.rawAnnots.keys;for(this.unpackedAnnots=this.unpackAnnots(),this.crossfilter=Ma(this.unpackedAnnots),this.annotsByFacet={},this.facets=n.slice(3,n.length),t=0;t<this.facets.length;t++)this.annotsByFacet[e=this.facets[t]]=this.crossfilter.dimension(function(t){return t[e]});"filterSelections"in this&&this.filterAnnots(this.filterSelections)}function La(t){var e,n,r,i=Date.now();for(this.filterSelections=t,[n,r]=function(t,e){var n,r,i,o,a={};if(0===Object.keys(t).length)o=e.unpackedAnnots;else{for(r=0;r<e.facets.length;r++)n=(i=e.facets[r])in t?function(e){return e in t[i]}:null,e.annotsByFacet[i].filter(n),a[i]=e.annotsByFacet[i].group().top(1/0);o=e.annotsByFacet[i].top(1/0)}return[o,a]}(t,this);e<this.facets.length;e++)this.annotsByFacet[void 0].filterAll();return n=this.packAnnots(n),delete this.maxAnnotsPerBar,delete this.maxAnnotsPerBarAllChrs,Na.selectAll(this.selector+" polygon.annot").remove(),this.drawAnnots(n),console.log("Time in filterAnnots: "+(Date.now()-i)+" ms"),r}function Pa(t){var e,n,r,i;return n=this.config.chrHeight,r=0,(i=void 0!==(e=t.bands))?[e,t,r]=function(t,e,n,r){for(var i,o,a,s=0,l=r.coordinateSystem,u=r.config.chrHeight,c=0;c<t.length;c++)o=(i=t[c])[l].stop-i[l].start,t[c].px={start:s,stop:s+(a=r._layout._isRotated?u*o/e.length:u*e.length/r.maxLength[l]*o/e.length),width:a},s=t[c].px.stop,n&&"acen"===i.stain&&"p"===i.name[0]&&(e.pcenIndex=c);return[t,e,s]}(e,t,i,this):r=n*t.length/this.maxLength[this.coordinateSystem],t.width=r,t.scale=function(t,e,n){var r=n.config.chrHeight,i=t.length,o=n.maxLength,a={};return!0===n.config.multiorganism?(a.bp=1,a.iscn=r*i/o.bp):(a.bp=r/o.bp,e&&(a.iscn=r/o.iscn)),a}(t,i,this),t.bands=e,t}function Ba(t,e,n,r){var i,o={};return i=void 0!==t,(o=function(t,e,n,r){return void 0!==e?(t.name=n,t.length=e[e.length-1][r.coordinateSystem].stop,t.type="nuclear"):t=n,t}(o,t,e,this)).chrIndex=r,o.id="chr"+o.name+"-"+n,!0===this.config.fullChromosomeLabels&&(o.name=this.organisms[n].scientificNameAbbr+" chr"+o.name),o.bands=t,(o=this.getChromosomePixels(o)).centromerePosition=function(t,e){return i&&"p"===e[0].name[0]&&"q"===e[1].name[0]&&e[0].bp.stop-e[0].bp.start<2e6?"telocentric":""}(0,t),function(t,e){return i&&1===t.bands.length&&delete t.bands,t}(o)}class Fa{constructor(t){this._model=t,this._class="ModelAdapter"}static getInstance(t){return t.bands?new Fa(t):new ja(t)}getModel(){return this._model}getCssClass(){return""}}class ja extends Fa{constructor(t){super(t),this._class="ModelNoBandsAdapter"}getModel(){return this._model.bands=[],this._model.width>1&&this._model.bands.push({name:"q",px:{start:0,stop:this._model.width,width:this._model.width},bp:{start:1,stop:this._model.length}}),this._model}getCssClass(){return"noBands"}}class Ra{constructor(t){this._config=t,this._ploidy=new Mi(this._config)}getArmColor(t,e,n){return this._config.armColors?this._config.armColors[n]:this._config.ancestors?this._getPolyploidArmColor(t,e,n):null}getBorderColor(t,e,n){return e<this._config.ploidy?"#000":this._ploidy.exists(t,e,n)?"#000":"#fff"}_getPolyploidArmColor(t,e,n){if(this._ploidy.exists(t,e,n)){var r=this._ploidy.getAncestor(t,e,n);return this._config.ancestors[r]}return"transparent"}}class Ha{constructor(t){this._data=t,this.start=t.start,this.stop=t.stop,this.length=this.stop-this.start}getColor(t){return"ploidy"in this._data?"ploidy"in this._data&&this._data.ploidy[t]?this._getColor(t):"transparent":this._getColor(t)}_getColor(t){return Array.isArray(this._data.color)?this._data.color[t]:this._data.color}}class qa{constructor(t,e,n){this._adapter=t,this._model=this._adapter.getModel(),this._config=e,this._ideo=n,this._color=new Ra(this._config),this._bumpCoefficient=5}static getInstance(t,e,n){return"telocentric"===t.getModel().centromerePosition?new $a(t,e,n):new Wa(t,e,n)}_addPArmShape(t,e){return e?t.concat(this._getPArmShape()):t}_addQArmShape(t,e){return e?t.concat(this._getQArmShape()):t}render(t,e,n){var r,i,o,a,s,l,u;return r=this,t=t.append("g").attr("class","bands").attr("clip-path","url(#"+this._model.id+"-chromosome-set-clippath)"),i=this._renderArm(t,e,n,"p"),o=this._renderArm(t,e,n,"q"),this._renderRangeSet(t,e,n),a=this._addPArmShape(a=[],i),a=this._addQArmShape(a,o),s="0",l="",u=this.isFullyBanded(),"ancestors"in this._ideo.config&&!("rangeSet"in this._ideo.config)?(l=r._color.getArmColor(e,n,0),u&&(s="0.5")):u?(s=null,l="transparent"):"ancestors"in this._ideo.config||(s="1"),t.append("g").attr("class","chromosome-border").selectAll("path").data(a).enter().append("path").attr("fill",l).style("fill-opacity",s).attr("stroke",function(t,i){return r._color.getBorderColor(e,n,i)}).attr("stroke-width",function(t){return"strokeWidth"in t?t.strokeWidth:1}).attr("d",function(t){return t.path}).attr("class",function(t){return t.class}),a}_renderRangeSet(t,e,n){var r,i,o,a;"rangeSet"in this._config&&(i=this._config.rangeSet.filter(function(t){return t.chr-1===e}).map(function(t){return new Ha(t)}),o=t.append("g").attr("class","range-set"),a=(r=this)._ideo,o.selectAll("rect.range").data(i).enter().append("rect").attr("class","range").attr("x",function(t){return a.convertBpToPx(r._model,t.start)}).attr("y",0).attr("width",function(t){return a.convertBpToPx(r._model,t.length)}).attr("height",this._config.chrWidth).style("fill",function(t){return t.getColor(n)}))}_getShapeData(){var t,e,n;for(e=0;e<this._model.bands.length;e++)if("q"===this._model.bands[e].name[0]){t=this._model.bands[e];break}return n=this._model.bands[this._model.bands.length-1].px.stop,{x1:0,x2:t?t.px.start:n,x3:n,w:this._config.chrWidth,b:this._config.chrWidth/this._bumpCoefficient}}_getPArmShape(){var t=this._getShapeData(),e=t.x2-t.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+t.b+",0 L"+e+",0 Q"+(t.x2+t.b)+","+t.w/2+","+e+","+t.w+" L"+t.b+","+t.w+" Q-"+t.b+","+t.w/2+","+t.b+",0"}:[{class:"",path:"M"+t.b+",0 L"+(e-2)+",0 L"+(e-2)+","+t.w+" L"+t.b+","+t.w+" Q-"+t.b+","+t.w/2+","+t.b+",0"},{class:"acen",path:"M"+e+",0 Q"+(t.x2+t.b)+","+t.w/2+","+e+","+t.w+" L"+e+","+t.w+" L"+(e-2)+","+t.w+" L"+(e-2)+",0"}]}_getQArmShape(){var t=this._getShapeData(),e=t.x3-t.b,n=t.x2+t.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+n+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+n+","+t.w+" Q"+(t.x2-t.b)+","+t.w/2+","+n+",0"}:[{path:"M"+n+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+n+","+t.w+" L"+n+",0"},{class:"acen",path:"M"+n+",0Q"+(t.x2-t.b)+","+t.w/2+","+n+","+t.w+" L"+n+","+t.w+"L"+(n+2)+","+t.w+"L"+(n+2)+",0"}]}isFullyBanded(){return this._model.bands&&(2!==this._model.bands.length||"q"===this._model.bands[0].name[0])}_renderBands(t,e,n,r,i){var o,a,s;a="p"===i?0:1,s="","ancestors"in(o=this)._ideo.config&&!o.isFullyBanded()&&(s=o._color.getArmColor(e,n,a)),t.selectAll("path.band."+i).data(r).enter().append("path").attr("id",function(t){return o._model.id+"-"+t.name.replace(".","-")}).attr("class",function(t){return"band "+i+"-band "+t.stain}).attr("d",function(t){var e;return"M "+o._ideo.round(t.px.start)+", 0l "+(e=o._ideo.round(t.px.width))+" 0 l 0 "+o._config.chrWidth+" l -"+e+" 0 z"}).style("fill",s)}_renderArm(t,e,n,r){var i=this._model.bands.filter(function(t){return t.name[0]===r});return this._renderBands(t,e,n,i,r),Boolean(i.length)}}class Wa extends qa{constructor(t,e,n){super(t,e,n),this._class="MetacentricChromosome"}}class $a extends qa{constructor(t,e,n){super(t,e,n),this._class="TelocentricChromosome",this._pArmOffset=3}_addPArmShape(t){return t.concat(this._getPArmShape())}_getPArmShape(){var t=this._getShapeData();return t.o=this._pArmOffset,[{class:"acen",path:"M"+(t.x2+2)+",1L"+(t.x2+t.o+3.25)+",1 L"+(t.x2+t.o+3.25)+","+(t.w-1)+" L"+(t.x2+2)+","+(t.w-1)},{class:"gpos66",path:"M"+(t.x2-t.o+5)+",0L"+(t.x2-t.o+3)+",0 L"+(t.x2-t.o+3)+","+t.w+" L"+(t.x2-t.o+5)+","+t.w,strokeWidth:.5}]}_getQArmShape(){var t=this._getShapeData(),e=t.x3-t.b,n=this._pArmOffset+3;return{class:"",path:"M"+(t.x2+n)+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+(t.x2+n)+","+t.w}}}var Ua=Object.assign({},o);function Va(t,e,n,r){var i,o,a,s,l;s=Ua.select(this.selector+" defs"),l=Fa.getInstance(t),i=n*this.config.chrMargin,o=r.append("g").attr("id",t.id).attr("class","chromosome "+l.getCssClass()).attr("transform","translate(0, "+i+")"),a=qa.getInstance(l,this.config,this).render(o,e,n),Ua.select("#"+t.id+"-chromosome-set-clippath").remove(),s.append("clipPath").attr("id",t.id+"-chromosome-set-clippath").selectAll("path").data(a).enter().append("path").attr("d",function(t){return t.path}).attr("class",function(t){return t.class})}function Ya(t){var e,n,r,i,o,a;if(i=this._layout.getChromosomeSetTranslate(e=t.chrIndex),Ua.selectAll((a=this.selector+" #"+t.id+"-chromosome-set")+" g").remove(),0===(n=Ua.select(a)).nodes().length&&(n=Ua.select(this.selector).append("g").attr("class","chromosome-set-container").attr("data-set-number",e).attr("transform",i).attr("id",t.id+"-chromosome-set")),"sex"in this.config&&2===this.config.ploidy&&this.sexChromosomes.index===e)this.drawSexChromosomes(n,e);else for(r=1,this.config.ploidy>1&&(r=this._ploidy.getChromosomesNumber(e)),o=0;o<r;o++)this.appendHomolog(t,e,o,n)}function Xa(t){var e,n,r;this.config.taxid&&(e=t.id.split("-")[0].replace("chr",""),n=this.chromosomes[this.config.taxid][e].chrIndex,r=Number(Ua.select(t.parentNode).attr("data-set-number")),this._layout.rotate(r,n,t))}function Ka(){var t,e,n,r,i,o,a;i=Ua.select((t=this.config).container+" svg#_ideogram"),n=Ua.select(t.container+" #_ideogramInnerWrap"),r=Ua.select(t.container+" #_ideogramMiddleWrap"),a=(o=t.ploidy)-1,"vertical"===t.orientation&&"comparative"!==t.perspective&&(e=(this.numChromosomes+2)*(t.chrWidth+t.chrMargin+a),e=Math.round(e*o/t.rows),"SmallLayout"===this._layout._class&&(e+=40),r.style("height",this._layout.getHeight()+"px"),n.style("max-width",e+"px").style("overflow-x","scroll").style("position","absolute"),i.style("min-width",e-5+"px"))}var Ga=Object.assign({},o);function Za(){var t,e;e=(t=this)._layout,Ga.selectAll(t.selector+" .chromosome-set-container").insert("text",":first-child").data(t.chromosomesArray).attr("class",e.getChromosomeLabelClass()).attr("transform",e.getChromosomeSetLabelTranslate()).attr("x",e.getChromosomeSetLabelXPosition()).attr("y",function(t,n){return e.getChromosomeSetLabelYPosition(n)}).attr("text-anchor",e.getChromosomeSetLabelAnchor()).each(function(e,n){!function(t,e,n,r){var i=function(t,e,n){var r;return r=-1===t.name.indexOf(" ")?[t.name]:t.name.match(/^(.*)\s+([^\s]+)$/).slice(1).reverse(),"sex"in n.config&&2===n.config.ploidy&&e===n.sexChromosomes.index&&(r="male"===n.config.sex?["XY"]:["XX"]),r}(t,e,r);Ga.select(n).selectAll("tspan").data(i).enter().append("tspan").attr("dy",function(t,e){return-1.2*e+"em"}).attr("x",r._layout.getChromosomeSetLabelXPosition()).attr("class",function(t,e){return 1===e&&r.config.fullChromosomeLabels?"italic":null}).text(String)}(e,n,this,t)}),function(t){var e=t._layout;Ga.selectAll(t.selector+" .chromosome-set-container").each(function(n,r){Ga.select(this).selectAll(".chromosome").append("text").attr("class","chrLabel").attr("transform",e.getChromosomeSetLabelTranslate()).attr("x",function(t,n){return e.getChromosomeLabelXPosition(n)}).attr("y",function(t,n){return e.getChromosomeLabelYPosition(n)}).text(function(e,n){return t._ploidy.getAncestor(r,n)}).attr("text-anchor","middle")})}(this)}function Qa(t,e,n,r){var i;e-=1,i=function(t){var e,n,r;return void 0===t||!t.hasOwnProperty("x")||1===t.x&&1===t.y?(e=-8,n=-16,t={x:1,y:1},r=""):(r="scale("+t.x+","+t.y+")",e=-6,n=""===t?-16:-14),{x:e,y:n,scaleSvg:r,scale:t}}(r),"vertical"===n||""===n?function(t,e,n,r){var i,o,a,s=r.config;e=function(t,e){return(s.numAnnotTracks>1||""===s.orientation)&&(t-=1),t}(e),i=-4,!0===s.showBandLabels&&(i=s.chrMargin+s.chrWidth+26),o=s.chrMargin*e,s.numAnnotTracks>1==0&&(o+=1),a=o+i,t.selectAll("text.chrLabel").attr("transform",n.scaleSvg).selectAll("tspan").attr("x",n.x).attr("y",a)}(t,e,i,this):function(t,e,n,r){var i,o,a,s=r.config;i=-s.chrWidth-2,!0===s.showBandLabels&&(i=s.chrMargin+8),o=s.annotTracksHeight,"overlay"!==s.annotationsLayout&&(o*=2),a=3-(s.chrMargin*e+i)+o,a/=n.scale.x,t.selectAll("text.chrLabel").attr("transform","rotate(-90)"+n.scaleSvg).selectAll("tspan").attr("x",a).attr("y",n.y)}(t,e,i,this)}var Ja=zi.a.assign({},o,a,i,r);Ja.scaleLinear=jn,Ja.max=cn;class ts{constructor(t){this.configure=Ai,this.initDrawChromosomes=Xi,this.onLoad=Gi,this.handleRotateOnClick=Ki,this.init=Ji,this.finishInit=Ti,this.writeContainer=qi,this.onLoadAnnots=po,this.onDrawAnnots=go,this.processAnnotData=qo,this.restoreDefaultTracks=Lo,this.updateDisplayedTracks=Po,this.initAnnotSettings=$o,this.fetchAnnots=Vo,this.drawAnnots=Ao,this.getHistogramBars=_o,this.drawHeatmaps=so,this.deserializeAnnotsForHeatmap=fo,this.fillAnnots=Yo,this.drawProcessedAnnots=Co,this.drawSynteny=Io,this.startHideAnnotTooltipTimeout=vo,this.showAnnotTooltip=yo,this.onWillShowAnnotTooltip=mo,this.setOriginalTrackIndexes=Bo,this.esearch=Go,this.esummary=Zo,this.elink=Qo,this.getTaxidFromEutils=Jo.b,this.setTaxidData=Jo.e,this.setTaxidAndAssemblyAndChromosomes=Jo.d,this.getOrganismFromEutils=Jo.a,this.getTaxids=Jo.c,this.getAssemblyAndChromosomesFromEutils=na,this.parseBands=ya.a,this.drawBandLabels=ga,this.getBandColorGradients=ma,this.processBandData=wa,this.setBandsToShow=fa,this.hideUnshownBandLabels=sa,this.drawBandLabelText=da,this.drawBandLabelStalk=pa,this.onBrushMove=ka,this.createBrush=Ea,this.drawSexChromosomes=za,this.setSexChromosomes=Aa,this.convertBpToPx=Ca,this.convertPxToBp=Ta,this.unpackAnnots=Da,this.packAnnots=Ia,this.initCrossFilter=Oa,this.filterAnnots=La,this.assemblyIsAccession=zi.b,this.getDataDir=zi.c,this.round=zi.h,this.onDidRotate=zi.g,this.getSvg=zi.d,this.getChromosomeModel=Ba,this.getChromosomePixels=Pa,this.drawChromosomeLabels=Za,this.rotateChromosomeLabels=Qa,this.appendHomolog=Va,this.drawChromosome=Ya,this.rotateAndToggleDisplay=Xa,this.setOverflowScroll=Ka,this.configure(t)}static get version(){return Ei}static get d3(){return Ja}static slugify(t){return t.toLowerCase().replace(" ","-")}static sortChromosomes(t,e){var n="nuclear"===t.type,r="nuclear"===e.type,i="chloroplast"===t.type,o="chloroplast"===e.type,a="mitochondrion"===t.type,s="mitochondrion"===e.type,l="apicoplast"===t.type,u="apicoplast"===e.type;return n&&r?ki(t.name,e.name):!n&&r?1:a&&o?1:i&&s?-1:l||a||i||!(s||o||u)?void 0:-1}}window.Ideogram=ts,e.default=ts}])}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).cytoscape=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o="undefined"==typeof window?null:window,a=o?o.navigator:null,s=t(""),l=t({}),u=t(function(){}),c="undefined"==typeof HTMLElement?"undefined":t(HTMLElement),f=function(t){return t&&t.instanceString&&d(t.instanceString)?t.instanceString():null},h=function(e){return null!=e&&t(e)==s},d=function(e){return null!=e&&t(e)===u},p=function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},g=function(e){return null!=e&&t(e)===l&&!p(e)&&e.constructor===Object},v=function(e){return null!=e&&t(e)===t(1)&&!isNaN(e)},m=function(t){return"undefined"===c?void 0:null!=t&&t instanceof HTMLElement},y=function(t){return _(t)||b(t)},_=function(t){return"collection"===f(t)&&t._private.single},b=function(t){return"collection"===f(t)&&!t._private.single},w=function(t){return"core"===f(t)},x=function(t){return"stylesheet"===f(t)},k=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},E=function(e){return function(e){return null!=e&&t(e)===l}(e)&&d(e.then)},z=function(){return a&&a.userAgent.match(/msie|trident|edge/i)},A=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=arguments,o=e.apply(this,i),a=n.cache;return(r=a[o])||(r=a[o]=t.apply(this,i)),r};return n.cache={},n},C=A(function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),S=A(function(t){return t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),T=A(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),M=function(t){return k(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},N="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",D=function(t,e){return t<e?-1:t>e?1:0},I=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},O=function(t){return(p(t)?t:null)||function(t){return L[t.toLowerCase()]}(t)||function(t){var e,n,r;if((4===t.length||7===t.length)&&"#"===t[0])return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}(t)||function(t){var e,n=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}if((r[1]||r[2]||r[3])&&!(r[1]&&r[2]&&r[3]))return;var a=n[4];if(void 0!==a){if((a=parseFloat(a))<0||a>1)return;e.push(a)}}return e}(t)||function(t){var e,n,r,i,o,a,s,l;function u(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var c=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=l=Math.round(255*i);else{var f=i<.5?i*(1+r):i+r-i*r,h=2*i-f;a=Math.round(255*u(h,f,n+1/3)),s=Math.round(255*u(h,f,n)),l=Math.round(255*u(h,f,n-1/3))}e=[a,s,l,o]}return e}(t)},L={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},P=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(g(o))throw Error("Tried to set map with object key");i<n.length-1?(null==e[o]&&(e[o]={}),e=e[o]):e[o]=t.value}},B=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(g(o))throw Error("Tried to get map with object key");if(null==(e=e[o]))return e}return e},F="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},j=NaN,R="[object Symbol]",H=/^\s+|\s+$/g,q=/^[-+]0x[0-9a-f]+$/i,W=/^0b[01]+$/i,$=/^0o[0-7]+$/i,U=parseInt,V="object"==typeof F&&F&&F.Object===Object&&F,Y="object"==typeof self&&self&&self.Object===Object&&self,X=V||Y||Function("return this")(),K=Object.prototype.toString,G=Math.max,Z=Math.min,Q=function(){return X.Date.now()};function J(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function tt(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&K.call(t)==R}(t))return j;if(J(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=J(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(H,"");var n=W.test(t);return n||$.test(t)?U(t.slice(2),n?2:8):q.test(t)?j:+t}var et=function(t,e,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function d(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-u>=o}function g(){var t=Q();if(p(t))return v(t);s=setTimeout(g,function(t){var n=e-(t-l);return f?Z(n,o-(t-u)):n}(t))}function v(t){return s=void 0,h&&r?d(t):(r=i=void 0,a)}function m(){var t=Q(),n=p(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return function(t){return u=t,s=setTimeout(g,e),c?d(t):a}(l);if(f)return s=setTimeout(g,e),d(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=tt(e)||0,J(n)&&(c=!!n.leading,o=(f="maxWait"in n)?G(tt(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},m.flush=function(){return void 0===s?a:v(Q())},m},nt=o?o.performance:null,rt=nt&&nt.now?function(){return nt.now()}:function(){return Date.now()},it=function(){if(o){if(o.requestAnimationFrame)return function(t){o.requestAnimationFrame(t)};if(o.mozRequestAnimationFrame)return function(t){o.mozRequestAnimationFrame(t)};if(o.webkitRequestAnimationFrame)return function(t){o.webkitRequestAnimationFrame(t)};if(o.msRequestAnimationFrame)return function(t){o.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(rt())},1e3/60)}}(),ot=function(t){return it(t)},at=rt,st=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;!(e=t.next()).done;)n=33*n^e.value;return n>>>0},lt=function(t){return(33*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381)^t)>>>0},ut=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return st({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},e)},ct=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return st({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},ft=function(){return ht(arguments)},ht=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?ct(r):ct(r,e)}return e},dt=!0,pt=null!=console.warn,gt=null!=console.trace,vt=Number.MAX_SAFE_INTEGER||9007199254740991,mt=function(){return!0},yt=function(){return!1},_t=function(){return 0},bt=function(){},wt=function(t){throw new Error(t)},xt=function(t){if(void 0===t)return dt;dt=!!t},kt=function(t){xt()&&(pt?console.warn(t):(console.log(t),gt&&console.trace()))},Et=function(t){return null==t?t:p(t)?t.slice():g(t)?function(t){return I({},t)}(t):t},zt=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},At={},Ct=function(){return At},St=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=null==n?void 0:n[o];r[o]=void 0===a?t[o]:a}return r}},Tt=function(t,e,n){for(var r=t.length;r>=0&&(t[r]!==e||(t.splice(r,1),n));r--);},Mt=function(t){t.splice(0,t.length)},Nt=function(t,e,n){return n&&(e=T(n,e)),t[e]},Dt=function(t,e,n,r){n&&(e=T(n,e)),t[e]=r},It="undefined"!=typeof Map?Map:function(){function t(){e(this,t),this._obj={}}return r(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),Ot=function(){function t(n){if(e(this,t),this._obj=Object.create(null),this.size=0,null!=n){var r;r=null!=n.instanceString&&n.instanceString()===this.instanceString()?n.toArray():n;for(var i=0;i<r.length;i++)this.add(r[i])}}return r(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(e){return t.has(e)})}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Lt="undefined"!==("undefined"==typeof Set?"undefined":t(Set))?Set:Ot,Pt=function(t,e,n){if(n=!(void 0!==n&&!n),void 0!==t&&void 0!==e&&w(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,active:!1,classes:new Lt,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var o=e.renderedPosition,a=t.pan(),s=t.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var l=[];p(e.classes)?l=e.classes:h(e.classes)&&(l=e.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var f=l[u];f&&""!==f&&i.classes.add(f)}this.createEmitter();var d=e.style||e.css;d&&(kt("Setting a `style` bypass at element creation is deprecated"),this.style(d)),(void 0===n||n)&&this.restore()}else wt("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else wt("An element must have a core reference and parameters set")},Bt=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;g(e)&&!y(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||d(n)?r:n,n=d(n)?n:function(){};for(var o,a=this._private.cy,s=e=h(e)?this.filter(e):e,l=[],u=[],c={},f={},p={},v=0,m=this.byGroup(),_=m.nodes,b=m.edges,w=0;w<s.length;w++){var x=s[w],k=x.id();x.isNode()&&(l.unshift(x),t.bfs&&(p[k]=!0,u.push(x)),f[k]=0)}var E=function(){var e=t.bfs?l.shift():l.pop(),i=e.id();if(t.dfs){if(p[i])return"continue";p[i]=!0,u.push(e)}var a,s=f[i],h=c[i],d=null!=h?h.source():null,g=null!=h?h.target():null,m=null==h?void 0:e.same(d)?g[0]:d[0];if(!0===(a=n(e,h,m,v++,s)))return o=e,"break";if(!1===a)return"break";for(var y=e.connectedEdges().filter(function(t){return(!r||t.source().same(e))&&b.has(t)}),w=0;w<y.length;w++){var x=y[w],k=x.connectedNodes().filter(function(t){return!t.same(e)&&_.has(t)}),E=k.id();0===k.length||p[E]||(l.push(k=k[0]),t.bfs&&(p[E]=!0,u.push(k)),c[E]=x,f[E]=f[i]+1)}};t:for(;0!==l.length;)switch(E()){case"continue":continue;case"break":break t}for(var z=a.collection(),A=0;A<u.length;A++){var C=u[A],S=c[C.id()];null!=S&&z.merge(S),z.merge(C)}return{path:a.collection(z),found:a.collection(o)}}},Ft={breadthFirstSearch:Bt({bfs:!0}),depthFirstSearch:Bt({dfs:!0})};Ft.bfs=Ft.breadthFirstSearch,Ft.dfs=Ft.depthFirstSearch;var jt=function(t,e){return function(t,e){(function(){var e,n,r,i,o,a,s,l,u,c,f,h,d,p,g;r=Math.floor,c=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},u=function(t,e,i,o,a){var s;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)a(e,t[s=r((i+o)/2)])<0?o=s:i=s+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),p(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,g(t,0,e)):i=r,i},l=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,g(t,0,r),i},s=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(e=(i=[t[0],e])[0],t[0]=i[1],g(t,0,r)),e},i=function(t,e){var i,o,a,s,l;for(null==e&&(e=n),s=[],i=0,o=(a=(function(){l=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)l.push(e);return l}).apply(this).reverse()).length;i<o;i++)s.push(g(t,a[i],e));return s},d=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return p(t,0,i,r),g(t,i,r)},f=function(t,e,r){var o,a,l,u;if(null==r&&(r=n),!(o=t.slice(0,e)).length)return o;for(i(o,r),a=0,l=(u=t.slice(e)).length;a<l;a++)s(o,u[a],r);return o.sort(r).reverse()},h=function(t,e,r){var a,s,l,f,h,d,p,g,v;if(null==r&&(r=n),10*e<=t.length){if(!(l=t.slice(0,e).sort(r)).length)return l;for(s=l[l.length-1],f=0,d=(p=t.slice(e)).length;f<d;f++)r(a=p[f],s)<0&&(u(l,a,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(t,r),v=[],h=0,g=c(e,t.length);0<=g?h<g:h>g;0<=g?++h:--h)v.push(o(t,r));return v},p=function(t,e,r,i){var o,a,s;for(null==i&&(i=n),o=t[r];r>e&&i(o,a=t[s=r-1>>1])<0;)t[r]=a,r=s;return t[r]=o},g=function(t,e,r){var i,o,a,s,l;for(null==r&&(r=n),o=t.length,l=e,a=t[e],i=2*e+1;i<o;)(s=i+1)<o&&!(r(t[i],t[s])<0)&&(i=s),t[e]=t[i],i=2*(e=i)+1;return t[e]=a,p(t,l,e,r)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=l,t.pushpop=s,t.heapify=i,t.updateItem=d,t.nlargest=f,t.nsmallest=h,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return d(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),t.exports=e}).call(F)}(e={exports:{}}),e.exports}(),Rt=St({root:null,weight:function(t){return 1},directed:!1}),Ht={dijkstra:function(t){if(!g(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=Rt(t),r=n.root,i=n.directed,o=this,a=n.weight,s=h(r)?this.filter(r)[0]:r[0],l={},u={},c={},f=this.byGroup(),d=f.nodes,p=f.edges;p.unmergeBy(function(t){return t.isLoop()});for(var v=function(t){return l[t.id()]},m=function(t,e){l[t.id()]=e,y.updateItem(t)},y=new jt(function(t,e){return v(t)-v(e)}),_=0;_<d.length;_++){var b=d[_];l[b.id()]=b.same(s)?0:1/0,y.push(b)}for(var w=function(t,e){for(var n,r=(i?t.edgesTo(e):t.edgesWith(e)).intersect(p),o=1/0,s=0;s<r.length;s++){var l=r[s],u=a(l);(u<o||!n)&&(o=u,n=l)}return{edge:n,dist:o}};y.size()>0;){var x=y.pop(),k=v(x),E=x.id();if(c[E]=k,k!==1/0)for(var z=x.neighborhood().intersect(d),A=0;A<z.length;A++){var C=z[A],S=C.id(),T=w(x,C),M=k+T.dist;M<v(C)&&(m(C,M),u[S]={node:x,edge:T.edge})}}return{distanceTo:function(t){var e=h(t)?d.filter(t)[0]:t[0];return c[e.id()]},pathTo:function(t){var e=h(t)?d.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);u[i];){var a=u[i];n.unshift(a.edge),n.unshift(a.node),i=(r=a.node).id()}return o.spawn(n)}}}},qt={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,o=new Array(i),a=n,s=function(t){for(var e=0;e<o.length;e++)if(o[e].has(t))return e},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var u=r.sort(function(e,n){return t(e)-t(n)}),c=0;c<u.length;c++){var f=u[c],h=f.source()[0],d=f.target()[0],p=s(h),g=s(d),v=o[p],m=o[g];p!==g&&(a.merge(f),v.merge(m),o.splice(g,1))}return a}},Wt=St({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),$t={aStar:function(t){var e=this.cy(),n=Wt(t),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,s=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var l,u,c=r.id(),f=i.id(),h={},d={},p={},g=new jt(function(t,e){return d[t.id()]-d[e.id()]}),v=new Lt,m={},y={},_=function(t,e){g.push(t),v.add(e)};_(r,c),h[c]=0,d[c]=o(r);for(var b=0;g.size()>0;){if(u=(l=g.pop()).id(),v.delete(u),b++,u===f){for(var w=[],x=i,k=f,E=y[k];w.unshift(x),null!=E&&w.unshift(E),null!=(x=m[k]);)E=y[k=x.id()];return{found:!0,distance:h[u],path:this.spawn(w),steps:b}}p[u]=!0;for(var z=l._private.edges,A=0;A<z.length;A++){var C=z[A];if(this.hasElementWithId(C.id())&&(!a||C.data("source")===u)){var S=C.source(),T=C.target(),M=S.id()!==u?S:T,N=M.id();if(this.hasElementWithId(N)&&!p[N]){var D=h[u]+s(C);v.has(N)?D<h[N]&&(h[N]=D,d[N]=D+o(M),m[N]=l):(h[N]=D,d[N]=D+o(M),_(M,N),m[N]=l,y[N]=C)}}}}return{found:!1,distance:void 0,path:void 0,steps:b}}},Ut=St({weight:function(t){return 1},directed:!1}),Vt={floydWarshall:function(t){for(var e=this.cy(),n=Ut(t),r=n.directed,i=n.weight,o=this.byGroup(),a=o.nodes,s=o.edges,l=a.length,u=l*l,c=function(t){return a.indexOf(t)},f=function(t){return a[t]},d=new Array(u),p=0;p<u;p++){var g=p%l;d[p]=(p-g)/l===g?0:1/0}for(var v=new Array(u),m=new Array(u),y=0;y<s.length;y++){var _=s[y],b=_.source()[0],w=_.target()[0];if(b!==w){var x=c(b),k=c(w),E=x*l+k,z=i(_);if(d[E]>z&&(d[E]=z,v[E]=k,m[E]=_),!r){var A=k*l+x;!r&&d[A]>z&&(d[A]=z,v[A]=x,m[A]=_)}}}for(var C=0;C<l;C++)for(var S=0;S<l;S++)for(var T=S*l+C,M=0;M<l;M++){var N=S*l+M,D=C*l+M;d[T]+d[D]<d[N]&&(d[N]=d[T]+d[D],v[N]=v[T])}var I=function(t){return c(function(t){return(h(t)?e.filter(t):t)[0]}(t))};return{distance:function(t,e){var n=I(t),r=I(e);return d[n*l+r]},path:function(t,n){var r=I(t),i=I(n),o=f(r);if(r===i)return o.collection();if(null==v[r*l+i])return e.collection();var a=e.collection();for(a.merge(o);r!==i;)a.merge(m[r*l+(r=v[r*l+i])]),a.merge(f(r));return a}}}},Yt=St({weight:function(t){return 1},directed:!1,root:null}),Xt={bellmanFord:function(t){var e=this,n=Yt(t),r=n.directed,i=n.root,o=n.weight,a=this,s=this.cy(),l=this.byGroup(),u=l.edges,c=l.nodes,f=c.length,d=new It,p=!1;i=s.collection(i)[0],u.unmergeBy(function(t){return t.isLoop()});for(var g=u.length,v=function(t){var e=d.get(t.id());return e||(e={},d.set(t.id(),e)),e},m=function(t){return(h(t)?s.$(t):t)[0]},y=0;y<f;y++){var _=c[y],b=v(_);b.dist=_.same(i)?0:1/0,b.pred=null,b.edge=null}for(var w=!1,x=function(t,e,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=t,i.edge=n,w=!0)},k=1;k<f;k++){w=!1;for(var E=0;E<g;E++){var z=u[E],A=z.source(),C=z.target(),S=o(z),T=v(A),M=v(C);x(A,0,z,T,M,S),r||x(C,0,z,M,T,S)}if(!w)break}if(w)for(var N=0;N<g;N++){var D=u[N],I=D.source(),O=D.target(),L=o(D),P=v(I).dist,B=v(O).dist;if(P+L<B||!r&&B+L<P){kt("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:function(t){return v(m(t)).dist},pathTo:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=[],o=m(t);;){if(null==o)return e.spawn();var s=v(o),l=s.edge,u=s.pred;if(r.unshift(o[0]),o.same(n)&&r.length>0)break;null!=l&&r.unshift(l),o=u}return a.spawn(r)},hasNegativeWeightCycle:p,negativeWeightCycles:[]}}},Kt=Math.sqrt(2),Gt=function(t,e,n){0===n.length&&wt("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=e[r[1]],o=e[r[2]],a=n,s=a.length-1;s>=0;s--){var l=a[s],u=l[1],c=l[2];(e[u]===i&&e[c]===o||e[u]===o&&e[c]===i)&&a.splice(s,1)}for(var f=0;f<a.length;f++){var h=a[f];h[1]===o?(a[f]=h.slice(),a[f][1]=i):h[2]===o&&(a[f]=h.slice(),a[f][2]=i)}for(var d=0;d<e.length;d++)e[d]===o&&(e[d]=i);return a},Zt=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=Gt(i,t,e),n--}return e},Qt={kargerStein:function(){var t=this.byGroup(),e=t.nodes,n=t.edges;n.unmergeBy(function(t){return t.isLoop()});var r=e.length,i=n.length,o=Math.ceil(Math.pow(Math.log(r)/Math.LN2,2)),a=Math.floor(r/Kt);if(!(r<2)){for(var s=[],l=0;l<i;l++){var u=n[l];s.push([l,e.indexOf(u.source()),e.indexOf(u.target())])}for(var c=1/0,f=[],h=new Array(r),d=new Array(r),p=new Array(r),g=function(t,e){for(var n=0;n<r;n++)e[n]=t[n]},v=0;v<=o;v++){for(var m=0;m<r;m++)d[m]=m;var y=Zt(d,s.slice(),r,a),_=y.slice();g(d,p);var b=Zt(d,y,a,2),w=Zt(p,_,a,2);b.length<=w.length&&b.length<c?(c=b.length,f=b,g(d,h)):w.length<=b.length&&w.length<c&&(c=w.length,f=w,g(p,h))}for(var x=this.spawn(f.map(function(t){return n[t[0]]})),k=this.spawn(),E=this.spawn(),z=h[0],A=0;A<h.length;A++){var C=e[A];h[A]===z?k.merge(C):E.merge(C)}return{cut:x,partition1:k,partition2:E}}wt("At least 2 nodes are required for Karger-Stein algorithm")}},Jt=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},te=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},ee=function(t){return{x:t[0],y:t[1]}},ne=function(t,e){return Math.atan2(e,t)-Math.PI/2},re=Math.log2||function(t){return Math.log(t)/Math.log(2)},ie=function(t){return t>0?1:t<0?-1:0},oe=function(t,e){return Math.sqrt(ae(t,e))},ae=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},se=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},le=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},ue=function(t,e,n,r){return{x:le(t.x,e.x,n.x,r),y:le(t.y,e.y,n.y,r)}},ce=function(t,e,n){return Math.max(t,Math.min(n,e))},fe=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},he=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},de=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},pe=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},ge=function(t,e){t.x1+=e.x,t.x2+=e.x,t.y1+=e.y,t.y2+=e.y},ve=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},me=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},ye=function(t,e){return me(t,e.x1,e.y1)&&me(t,e.x2,e.y2)},_e=function(t,e,n,r,i,o,a){var s,l=Be(i,o),u=i/2,c=o/2,f=r-c-a;if((s=Ne(t,e,n,r,n-u+l-a,f,n+u-l+a,f,!1)).length>0)return s;var h=n+u+a;if((s=Ne(t,e,n,r,h,r-c+l-a,h,r+c-l+a,!1)).length>0)return s;var d=r+c+a;if((s=Ne(t,e,n,r,n-u+l-a,d,n+u-l+a,d,!1)).length>0)return s;var p,g=n-u-a;if((s=Ne(t,e,n,r,g,r-c+l-a,g,r+c-l+a,!1)).length>0)return s;var v=n-u+l,m=r-c+l;if((p=Te(t,e,n,r,v,m,l+a)).length>0&&p[0]<=v&&p[1]<=m)return[p[0],p[1]];var y=n+u-l,_=r-c+l;if((p=Te(t,e,n,r,y,_,l+a)).length>0&&p[0]>=y&&p[1]<=_)return[p[0],p[1]];var b=n+u-l,w=r+c-l;if((p=Te(t,e,n,r,b,w,l+a)).length>0&&p[0]>=b&&p[1]>=w)return[p[0],p[1]];var x=n-u+l,k=r+c-l;return(p=Te(t,e,n,r,x,k,l+a)).length>0&&p[0]<=x&&p[1]>=k?[p[0],p[1]]:[]},be=function(t,e,n,r,i,o,a){var s=a,l=Math.min(n,i),u=Math.max(n,i),c=Math.min(r,o),f=Math.max(r,o);return l-s<=t&&t<=u+s&&c-s<=e&&e<=f+s},we=function(t,e,n,r,i,o,a,s,l){var u=Math.min(n,a,i)-l,c=Math.max(n,a,i)+l,f=Math.min(r,s,o)-l,h=Math.max(r,s,o)+l;return!(t<u||t>c||e<f||e>h)},xe=function(t,e,n,r,i,o,a,s){var l=[];!function(t,e,n,r,i){var o,a,s,l,u,c,f,h;s=-27*(r/=t)+(e/=t)*(9*(n/=t)-e*e*2),o=(a=(3*n-e*e)/9)*a*a+(s/=54)*s,i[1]=0,f=e/3,o>0?(u=(u=s+Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-f+u+c,i[4]=i[2]=-(f+=(u+c)/2),f=Math.sqrt(3)*(-c+u)/2,i[3]=f,i[5]=-f):(i[5]=i[3]=0,0===o?(h=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*h-f,i[4]=i[2]=-(h+f)):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),h=2*Math.sqrt(a),i[0]=-f+h*Math.cos(l/3),i[2]=-f+h*Math.cos((l+2*Math.PI)/3),i[4]=-f+h*Math.cos((l+4*Math.PI)/3)))}(1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var f,h,d,p=-1,g=0;g<u.length;g++)f=Math.pow(1-u[g],2)*n+2*(1-u[g])*u[g]*i+u[g]*u[g]*a,h=Math.pow(1-u[g],2)*r+2*(1-u[g])*u[g]*o+u[g]*u[g]*s,d=Math.pow(f-t,2)+Math.pow(h-e,2),p>=0?d<p&&(p=d):p=d;return p},ke=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],f=c*c/l;return c<0?u:f>l?(t-i)*(t-i)+(e-o)*(e-o):u-f},Ee=function(t,e,n){for(var r,i,o,a,s=0,l=0;l<n.length/2;l++)if(i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),(r=n[2*l])==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(a-i)+i>e&&s++}return s%2!=0},ze=function(t,e,n,r,i,o,a,s,l){var u,c=new Array(n.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var f,h=Math.cos(-u),d=Math.sin(-u),p=0;p<c.length/2;p++)c[2*p]=o/2*(n[2*p]*h-n[2*p+1]*d),c[2*p+1]=a/2*(n[2*p+1]*h+n[2*p]*d),c[2*p]+=r,c[2*p+1]+=i;if(l>0){var g=Ce(c,-l);f=Ae(g)}else f=c;return Ee(t,e,f)},Ae=function(t){for(var e,n,r,i,o=new Array(t.length/2),a=0;a<t.length/4;a++){a<t.length/4-1?(e=t[4*(a+1)],n=t[4*(a+1)+1],r=t[4*(a+1)+2],i=t[4*(a+1)+3]):(e=t[0],n=t[1],r=t[2],i=t[3]);var s=Ne(t[4*a],t[4*a+1],t[4*a+2],t[4*a+3],e,n,r,i,!0);o[2*a]=s[0],o[2*a+1]=s[1]}return o},Ce=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var l=o-(r=t[2*s+1]),u=-(i-(n=t[2*s])),c=Math.sqrt(l*l+u*u),f=l/c,h=u/c;a[4*s]=n+f*e,a[4*s+1]=r+h*e,a[4*s+2]=i+f*e,a[4*s+3]=o+h*e}return a},Se=function(t,e,n,r,i,o,a){return t-=i,e-=o,(t/=n/2+a)*t+(e/=r/2+a)*e<=1},Te=function(t,e,n,r,i,o,a){var s=[n-t,r-e],l=[t-i,e-o],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),f=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-a*a);if(f<0)return[];var h=(-c+Math.sqrt(f))/(2*u),d=(-c-Math.sqrt(f))/(2*u),p=Math.min(h,d),g=Math.max(h,d),v=[];if(p>=0&&p<=1&&v.push(p),g>=0&&g<=1&&v.push(g),0===v.length)return[];var m=v[0]*s[0]+t,y=v[0]*s[1]+e;return v.length>1?v[0]==v[1]?[m,y]:[m,y,v[1]*s[0]+t,v[1]*s[1]+e]:[m,y]},Me=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},Ne=function(t,e,n,r,i,o,a,s,l){var u=t-i,c=n-t,f=a-i,h=e-o,d=r-e,p=s-o,g=f*h-p*u,v=c*h-d*u,m=p*c-f*d;if(0!==m){var y=g/m,_=v/m;return-.001<=y&&y<=1.001&&-.001<=_&&_<=1.001?[t+y*c,e+y*d]:l?[t+y*c,e+y*d]:[]}return 0===g||0===v?Me(t,n,a)===a?[a,s]:Me(t,n,i)===i?[i,o]:Me(i,a,n)===n?[n,r]:[]:[]},De=function(t,e,n,r,i,o,a,s){var l,u,c,f,h=[],d=new Array(n.length),p=!0;if(null==o&&(p=!1),p){for(var g=0;g<d.length/2;g++)d[2*g]=n[2*g]*o+r,d[2*g+1]=n[2*g+1]*a+i;if(s>0){var v=Ce(d,-s);u=Ae(v)}else u=d}else u=n;for(var m=0;m<u.length/2;m++)m<u.length/2-1?(c=u[2*(m+1)],f=u[2*(m+1)+1]):(c=u[0],f=u[1]),0!==(l=Ne(t,e,r,i,u[2*m],u[2*m+1],c,f)).length&&h.push(l[0],l[1]);return h},Ie=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},Oe=function(t,e){var n=Pe(t,e);return Le(n)},Le=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<r;l++)e=t[2*l],n=t[2*l+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var u=2/(a-i),c=2/(s-o),f=0;f<r;f++)e=t[2*f]=t[2*f]*u,n=t[2*f+1]=t[2*f+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var h=0;h<r;h++)n=t[2*h+1]=t[2*h+1]+(-1-o);return t},Pe=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},Be=function(t,e){return Math.min(t/4,e/4,8)},Fe=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},je=St({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),Re={pageRank:function(t){for(var e=je(t),n=e.dampingFactor,r=e.precision,i=e.iterations,o=e.weight,a=this._private.cy,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,f=u.length,h=new Array(c*c),d=new Array(c),p=(1-n)/c,g=0;g<c;g++){for(var v=0;v<c;v++)h[g*c+v]=0;d[g]=0}for(var m=0;m<f;m++){var y=u[m],_=y.data("source"),b=y.data("target");if(_!==b){var w=l.indexOfId(_),x=l.indexOfId(b),k=o(y);h[x*c+w]+=k,d[w]+=k}}for(var E=1/c+p,z=0;z<c;z++)if(0===d[z])for(var A=0;A<c;A++)h[A*c+z]=E;else for(var C=0;C<c;C++){var S=C*c+z;h[S]=h[S]/d[z]+p}for(var T,M=new Array(c),N=new Array(c),D=0;D<c;D++)M[D]=1;for(var I=0;I<i;I++){for(var O=0;O<c;O++)N[O]=0;for(var L=0;L<c;L++)for(var P=0;P<c;P++)N[L]+=h[L*c+P]*M[P];se(N),T=M,M=N,N=T;for(var B=0,F=0;F<c;F++){var j=T[F]-M[F];B+=j*j}if(B<r)break}return{rank:function(t){return t=a.collection(t)[0],M[l.indexOf(t)]}}}},He=St({root:null,weight:function(t){return 1},directed:!1,alpha:0}),qe={degreeCentralityNormalized:function(t){t=He(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},o={},a=0,s=0,l=0;l<r;l++){var u=n[l],c=u.id();t.root=u;var f=this.degreeCentrality(t);a<f.indegree&&(a=f.indegree),s<f.outdegree&&(s=f.outdegree),i[c]=f.indegree,o[c]=f.outdegree}return{indegree:function(t){return 0==a?0:(h(t)&&(t=e.filter(t)),i[t.id()]/a)},outdegree:function(t){return 0===s?0:(h(t)&&(t=e.filter(t)),o[t.id()]/s)}}}for(var d={},p=0,g=0;g<r;g++){var v=n[g];t.root=v;var m=this.degreeCentrality(t);p<m.degree&&(p=m.degree),d[v.id()]=m.degree}return{degree:function(t){return 0===p?0:(h(t)&&(t=e.filter(t)),d[t.id()]/p)}}},degreeCentrality:function(t){t=He(t);var e=this.cy(),n=this,r=t.root,i=t.weight,o=t.directed,a=t.alpha;if(r=e.collection(r)[0],o){for(var s=r.connectedEdges(),l=s.filter(function(t){return t.target().same(r)&&n.has(t)}),u=s.filter(function(t){return t.source().same(r)&&n.has(t)}),c=l.length,f=u.length,h=0,d=0,p=0;p<l.length;p++)h+=i(l[p]);for(var g=0;g<u.length;g++)d+=i(u[g]);return{indegree:Math.pow(c,1-a)*Math.pow(h,a),outdegree:Math.pow(f,1-a)*Math.pow(d,a)}}for(var v=r.connectedEdges().intersection(n),m=v.length,y=0,_=0;_<v.length;_++)y+=i(v[_]);return{degree:Math.pow(m,1-a)*Math.pow(y,a)}}};qe.dc=qe.degreeCentrality,qe.dcn=qe.degreeCentralityNormalised=qe.degreeCentralityNormalized;var We=St({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),$e={closenessCentralityNormalized:function(t){for(var e=We(t),n=e.harmonic,r=e.weight,i=e.directed,o=this.cy(),a={},s=0,l=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<l.length;c++){for(var f=0,d=l[c],p=0;p<l.length;p++)if(c!==p){var g=u.distance(d,l[p]);f+=n?1/g:g}n||(f=1/f),s<f&&(s=f),a[d.id()]=f}return{closeness:function(t){return 0==s?0:(t=h(t)?o.filter(t)[0].id():t.id(),a[t]/s)}}},closenessCentrality:function(t){var e=We(t),n=e.root,r=e.weight,i=e.directed,o=e.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(n)){var f=a.distanceTo(c);s+=o?1/f:f}}return o?s:1/s}};$e.cc=$e.closenessCentrality,$e.ccn=$e.closenessCentralityNormalised=$e.closenessCentralityNormalized;var Ue=St({weight:null,directed:!1}),Ve={betweennessCentrality:function(t){for(var e=Ue(t),n=e.directed,r=e.weight,i=null!=r,o=this.cy(),a=this.nodes(),s={},l={},u=0,c=function(t,e){l[t]=e,e>u&&(u=e)},f=function(t){return l[t]},h=0;h<a.length;h++){var d=a[h],p=d.id();s[p]=n?d.outgoers().nodes():d.openNeighborhood().nodes(),c(p,0)}for(var g=function(t){for(var e=a[t].id(),n=[],l={},u={},h={},d=new jt(function(t,e){return h[t]-h[e]}),p=0;p<a.length;p++){var g=a[p].id();l[g]=[],u[g]=0,h[g]=1/0}for(u[e]=1,h[e]=0,d.push(e);!d.empty();){var v=d.pop();if(n.push(v),i)for(var m=0;m<s[v].length;m++){var y,_=s[v][m],b=o.getElementById(v);y=b.edgesTo(_).length>0?b.edgesTo(_)[0]:_.edgesTo(b)[0];var w=r(y);_=_.id(),h[_]>h[v]+w&&(h[_]=h[v]+w,d.nodes.indexOf(_)<0?d.push(_):d.updateItem(_),u[_]=0,l[_]=[]),h[_]==h[v]+w&&(u[_]=u[_]+u[v],l[_].push(v))}else for(var x=0;x<s[v].length;x++){var k=s[v][x].id();h[k]==1/0&&(d.push(k),h[k]=h[v]+1),h[k]==h[v]+1&&(u[k]=u[k]+u[v],l[k].push(v))}}for(var E={},z=0;z<a.length;z++)E[a[z].id()]=0;for(;n.length>0;)for(var A=n.pop(),C=0;C<l[A].length;C++){var S=l[A][C];E[S]=E[S]+u[S]/u[A]*(1+E[A]),A!=a[t].id()&&c(A,f(A)+E[A])}},v=0;v<a.length;v++)g(v);var m={betweenness:function(t){var e=o.collection(t).id();return f(e)},betweennessNormalized:function(t){if(0==u)return 0;var e=o.collection(t).id();return f(e)/u}};return m.betweennessNormalised=m.betweennessNormalized,m}};Ve.bc=Ve.betweennessCentrality;var Ye=St({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Xe=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Ke=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var o=0;o<e;o++)t[o*e+r]=t[o*e+r]/n}},Ge=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=t[i*n+a]*e[a*n+s]}return r},Ze=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=Ge(t,r,e);return t},Qe=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Ke(r,e),r},Je=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},tn=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},en=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=function(t){return Ye(t)}(t),o={},a=0;a<e.length;a++)o[e[a].id()]=a;for(var s,l=e.length,u=l*l,c=new Array(u),f=0;f<u;f++)c[f]=0;for(var h=0;h<n.length;h++){var d=n[h],p=o[d.source().id()],g=o[d.target().id()],v=Xe(d,i.attributes);c[p*l+g]+=v,c[g*l+p]+=v}!function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n}(c,l,i.multFactor),Ke(c,l);for(var m=!0,y=0;m&&y<i.maxIterations;)m=!1,s=Ze(c,l,i.expandFactor),c=Qe(s,l,i.inflateFactor),Je(c,s,u,4)||(m=!0),y++;return function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&tn(t[e],t[n])&&t.splice(n,1);return t}(function(t,e,n,r){for(var i=[],o=0;o<e;o++){for(var a=[],s=0;s<e;s++)Math.round(1e3*t[o*e+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i}(c,l,e,r))},nn={markovClustering:en,mcl:en},rn=function(t){return t},on=function(t,e){return Math.abs(e-t)},an=function(t,e,n){return t+on(e,n)},sn=function(t,e,n){return t+Math.pow(n-e,2)},ln=function(t){return Math.sqrt(t)},un=function(t,e,n){return Math.max(t,on(e,n))},cn=function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rn,a=r,s=0;s<t;s++)a=i(a,e(s),n(s));return o(a)},fn={euclidean:function(t,e,n){return t>=2?cn(t,e,n,0,sn,ln):cn(t,e,n,0,an)},squaredEuclidean:function(t,e,n){return cn(t,e,n,0,sn)},manhattan:function(t,e,n){return cn(t,e,n,0,an)},max:function(t,e,n){return cn(t,e,n,-1/0,un)}};function hn(t,e,n,r,i,o){var a;return a=d(t)?t:fn[t]||fn.euclidean,0===e&&d(t)?a(i,o):a(e,n,r,i,o)}fn["squared-euclidean"]=fn.squaredEuclidean,fn.squaredeuclidean=fn.squaredEuclidean;var dn=St({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),pn=function(t){return dn(t)},gn=function(t,e,n,r,i){var o="kMedoids"===i?function(t){return r[t](n)}:function(t){return n[t]};return hn(t,r.length,o,function(t){return r[t](e)})},vn=function(t,e,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(e),s=null,l=0;l<r;l++)i[l]=t.min(n[l]).value,o[l]=t.max(n[l]).value;for(var u=0;u<e;u++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[u]=s}return a},mn=function(t,e,n,r,i){for(var o=1/0,a=0,s=0;s<e.length;s++){var l=gn(n,t,e[s],r,i);l<o&&(o=l,a=s)}return a},yn=function(t,e,n){for(var r=[],i=null,o=0;o<e.length;o++)n[(i=e[o]).id()]===t&&r.push(i);return r},_n=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},bn=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},wn=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];bn(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var o=0;o<e;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},xn=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=gn("manhattan",e[i],t,n,"kMedoids");return r},kn=function(t,e,n,r,i){for(var o,a,s=0;s<e.length;s++)for(var l=0;l<t.length;l++)r[s][l]=Math.pow(n[s][l],i.m);for(var u=0;u<t.length;u++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var f=0;f<e.length;f++)o+=r[f][u]*i.attributes[c](e[f]),a+=r[f][u];t[u][c]=o/a}},En=function(t,e,n,r,i){for(var o=0;o<t.length;o++)e[o]=t[o].slice();for(var a,s,l,u=2/(i.m-1),c=0;c<n.length;c++)for(var f=0;f<r.length;f++){a=0;for(var h=0;h<n.length;h++)s=gn(i.distance,r[f],n[c],i.attributes,"cmeans"),l=gn(i.distance,r[f],n[h],i.attributes,"cmeans"),a+=Math.pow(s/l,u);t[f][c]=1/a}},zn=function(t){var e,n,r,i,o=this.cy(),a=this.nodes(),s=pn(t);r=new Array(a.length);for(var l=0;l<a.length;l++)r[l]=new Array(s.k);n=new Array(a.length);for(var u=0;u<a.length;u++)n[u]=new Array(s.k);for(var c=0;c<a.length;c++){for(var f=0,h=0;h<s.k;h++)n[c][h]=Math.random(),f+=n[c][h];for(var d=0;d<s.k;d++)n[c][d]=n[c][d]/f}e=new Array(s.k);for(var p=0;p<s.k;p++)e[p]=new Array(s.attributes.length);i=new Array(a.length);for(var g=0;g<a.length;g++)i[g]=new Array(s.k);for(var v=!0,m=0;v&&m<s.maxIterations;)v=!1,kn(e,a,n,i,s),En(n,r,e,a,s),_n(n,r,s.sensitivityThreshold)||(v=!0),m++;return{clusters:function(t,e,n,r){for(var i,o,a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var l=0;l<e.length;l++){i=-1/0,o=-1;for(var u=0;u<e[0].length;u++)e[l][u]>i&&(i=e[l][u],o=u);a[o].push(t[l])}for(var c=0;c<a.length;c++)a[c]=r.collection(a[c]);return a}(a,n,s,o),degreeOfMembership:n}},An={kMeans:function(e){var n,r=this.cy(),i=this.nodes(),o=null,a=pn(e),s=new Array(a.k),l={};n=a.testMode?"number"==typeof a.testCentroids?vn(i,a.k,a.attributes):"object"===t(a.testCentroids)?a.testCentroids:vn(i,a.k,a.attributes):vn(i,a.k,a.attributes);for(var u,c=!0,f=0;c&&f<a.maxIterations;){for(var h=0;h<i.length;h++)l[(o=i[h]).id()]=mn(o,n,a.distance,a.attributes,"kMeans");c=!1;for(var d=0;d<a.k;d++){var p=yn(d,i,l);if(0!==p.length){for(var g=a.attributes.length,v=n[d],m=new Array(g),y=new Array(g),_=0;_<g;_++){y[_]=0;for(var b=0;b<p.length;b++)y[_]+=a.attributes[_](o=p[b]);m[_]=y[_]/p.length,u=a.sensitivityThreshold,Math.abs(v[_]-m[_])<=u||(c=!0)}n[d]=m,s[d]=r.collection(p)}}f++}return s},kMedoids:function(e){var n,r,i=this.cy(),o=this.nodes(),a=null,s=pn(e),l=new Array(s.k),u={},c=new Array(s.k);s.testMode?"number"==typeof s.testCentroids||(n="object"===t(s.testCentroids)?s.testCentroids:wn(o,s.k)):n=wn(o,s.k);for(var f=!0,h=0;f&&h<s.maxIterations;){for(var d=0;d<o.length;d++)u[(a=o[d]).id()]=mn(a,n,s.distance,s.attributes,"kMedoids");f=!1;for(var p=0;p<n.length;p++){var g=yn(p,o,u);if(0!==g.length){c[p]=xn(n[p],g,s.attributes);for(var v=0;v<g.length;v++)(r=xn(g[v],g,s.attributes))<c[p]&&(c[p]=r,n[p]=g[v],f=!0);l[p]=i.collection(g)}}h++}return l},fuzzyCMeans:zn,fcm:zn},Cn=St({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Sn={single:"min",complete:"max"},Tn=function(t,e,n,r,i){for(var o,a=0,s=1/0,l=i.attributes,u=function(t,e){return hn(i.distance,l.length,function(e){return l[e](t)},function(t){return l[t](e)})},c=0;c<t.length;c++){var f=t[c].key,h=n[f][r[f]];h<s&&(a=f,s=h)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var d,p=e[a],g=e[r[a]];d="dendrogram"===i.mode?{left:p,right:g,key:p.key}:{value:p.value.concat(g.value),key:p.key},t[p.index]=d,t.splice(g.index,1),e[p.key]=d;for(var v=0;v<t.length;v++){var m=t[v];p.key===m.key?o=1/0:"min"===i.linkage?(o=n[p.key][m.key],n[p.key][m.key]>n[g.key][m.key]&&(o=n[g.key][m.key])):"max"===i.linkage?(o=n[p.key][m.key],n[p.key][m.key]<n[g.key][m.key]&&(o=n[g.key][m.key])):o="mean"===i.linkage?(n[p.key][m.key]*p.size+n[g.key][m.key]*g.size)/(p.size+g.size):"dendrogram"===i.mode?u(m.value,p.value):u(m.value[0],p.value[0]),n[p.key][m.key]=n[m.key][p.key]=o}for(var y=0;y<t.length;y++){var _=t[y].key;if(r[_]===p.key||r[_]===g.key){for(var b=_,w=0;w<t.length;w++){var x=t[w].key;n[_][x]<n[_][b]&&(b=x)}r[_]=b}t[y].index=y}return p.key=g.key=p.index=g.index=null,!0},Mn=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n,r),e.right&&t(e.right,n,r)))},Nn=function(t){for(var e=this.cy(),n=this.nodes(),r=function(t){var e=Cn(t),n=Sn[e.linkage];return null!=n&&(e.linkage=n),e}(t),i=r.attributes,o=function(t,e){return hn(r.distance,i.length,function(e){return i[e](t)},function(t){return i[t](e)})},a=[],s=[],l=[],u=[],c=0;c<n.length;c++){var f={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};a[c]=f,u[c]=f,s[c]=[],l[c]=0}for(var h=0;h<a.length;h++)for(var d=0;d<=h;d++){var p;p="dendrogram"===r.mode?h===d?1/0:o(a[h].value,a[d].value):h===d?1/0:o(a[h].value[0],a[d].value[0]),s[h][d]=p,s[d][h]=p,p<s[h][l[h]]&&(l[h]=d)}for(var g,v=Tn(a,u,s,l,r);v;)v=Tn(a,u,s,l,r);return"dendrogram"===r.mode?(g=function t(e,n,r){if(!e)return[];var i=[],o=[],a=[];return 0===n?(e.left&&Mn(e.left,i,r),e.right&&Mn(e.right,o,r),a=i.concat(o),[r.collection(a)]):1===n?e.value?[r.collection(e.value)]:(e.left&&Mn(e.left,i,r),e.right&&Mn(e.right,o,r),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))}(a[0],r.dendrogramDepth,e),r.addDendrogram&&function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return e.value?e.value.id():void 0}(a[0],e)):(g=new Array(a.length),a.forEach(function(t,n){t.key=t.index=null,g[n]=e.collection(t.value)})),g},Dn={hierarchicalClustering:Nn,hca:Nn},In=St({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),On=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-hn(t,r.length,function(t){return i(e,t)},function(t){return i(n,t)},e,n)},Ln=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var o=-1,a=-1/0,s=0;s<n.length;s++){var l=n[s];e[i*t+l]>a&&(o=l,a=e[i*t+l])}o>0&&r.push(o)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},Pn=function(t){for(var e,n,r,i,o,a,s=this.cy(),l=this.nodes(),u=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||wt("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some(function(t){return t===n})||v(n)||wt("Preference must be one of [".concat(r.map(function(t){return"'".concat(t,"'")}).join(", "),"] or a number.  Got: ").concat(n)),In(t)}(t),c={},f=0;f<l.length;f++)c[l[f].id()]=f;n=(e=l.length)*e,r=new Array(n);for(var h=0;h<n;h++)r[h]=-1/0;for(var d=0;d<e;d++)for(var p=0;p<e;p++)d!==p&&(r[d*e+p]=On(u.distance,l[d],l[p],u.attributes));i=function(t,e){return"median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e)):t=t.slice(e,n);for(var o=0,a=t.length-1;a>=0;a--)i?isFinite(t[a])||(t[a]=-1/0,o++):t.splice(a,1);r&&t.sort(function(t,e){return t-e});var s=t.length,l=Math.floor(s/2);return s%2!=0?t[l+1+o]:(t[l-1+o]+t[l+o])/2}(t):"mean"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=0,r=0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<e;i++){var o=t[i];isFinite(o)&&(n+=o,r++)}return n/r}(t):"min"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=1/0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r<e;r++){var i=t[r];isFinite(i)&&(n=Math.min(i,n))}return n}(t):"max"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=-1/0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r<e;r++){var i=t[r];isFinite(i)&&(n=Math.max(i,n))}return n}(t):e}(r,u.preference);for(var g=0;g<e;g++)r[g*e+g]=i;o=new Array(n);for(var m=0;m<n;m++)o[m]=0;a=new Array(n);for(var y=0;y<n;y++)a[y]=0;for(var _=new Array(e),b=new Array(e),w=new Array(e),x=0;x<e;x++)_[x]=0,b[x]=0,w[x]=0;for(var k,E=new Array(e*u.minIterations),z=0;z<E.length;z++)E[z]=0;for(k=0;k<u.maxIterations;k++){for(var A=0;A<e;A++){for(var C=-1/0,S=-1/0,T=-1,M=0,N=0;N<e;N++)_[N]=o[A*e+N],(M=a[A*e+N]+r[A*e+N])>=C?(S=C,C=M,T=N):M>S&&(S=M);for(var D=0;D<e;D++)o[A*e+D]=(1-u.damping)*(r[A*e+D]-C)+u.damping*_[D];o[A*e+T]=(1-u.damping)*(r[A*e+T]-S)+u.damping*_[T]}for(var I=0;I<e;I++){for(var O=0,L=0;L<e;L++)_[L]=a[L*e+I],b[L]=Math.max(0,o[L*e+I]),O+=b[L];O-=b[I],b[I]=o[I*e+I],O+=b[I];for(var P=0;P<e;P++)a[P*e+I]=(1-u.damping)*Math.min(0,O-b[P])+u.damping*_[P];a[I*e+I]=(1-u.damping)*(O-b[I])+u.damping*_[I]}for(var B=0,F=0;F<e;F++){var j=a[F*e+F]+o[F*e+F]>0?1:0;E[k%u.minIterations*e+F]=j,B+=j}if(B>0&&(k>=u.minIterations-1||k==u.maxIterations-1)){for(var R=0,H=0;H<e;H++){w[H]=0;for(var q=0;q<u.minIterations;q++)w[H]+=E[q*e+H];0!==w[H]&&w[H]!==u.minIterations||R++}if(R===e)break}}for(var W=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r}(e,o,a),$=function(t,e,n){for(var r=Ln(t,e,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,l=-1/0,u=0;u<o.length;u++){for(var c=0,f=0;f<o.length;f++)c+=e[o[f]*t+o[u]];c>l&&(s=u,l=c)}n[i]=o[s]}return Ln(t,e,n)}(e,r,W),U={},V=0;V<W.length;V++)U[W[V]]=[];for(var Y=0;Y<l.length;Y++){var X=$[c[l[Y].id()]];null!=X&&U[X].push(l[Y])}for(var K=new Array(W.length),G=0;G<W.length;G++)K[G]=s.collection(U[W[G]]);return K},Bn={};[Ft,Ht,qt,$t,Vt,Xt,Qt,Re,qe,$e,Ve,nn,An,Dn,{affinityPropagation:Pn,ap:Pn}].forEach(function(t){I(Bn,t)});var Fn=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Fn.prototype={fulfill:function(t){return jn(this,1,"fulfillValue",t)},reject:function(t){return jn(this,2,"rejectReason",t)},then:function(t,e){var n=new Fn;return this.onFulfilled.push(qn(t,n,"fulfill")),this.onRejected.push(qn(e,n,"reject")),Rn(this),n.proxy}};var jn=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,Rn(t)),t},Rn=function(t){1===t.state?Hn(t,"onFulfilled",t.fulfillValue):2===t.state&&Hn(t,"onRejected",t.rejectReason)},Hn=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},qn=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}Wn(e,i)}}},Wn=function e(n,r){if(n!==r&&n.proxy!==r){var i;if("object"===t(r)&&null!==r||"function"==typeof r)try{i=r.then}catch(t){return void n.reject(t)}if("function"!=typeof i)n.fulfill(r);else{var o=!1;try{i.call(r,function(t){o||(o=!0,t===r?n.reject(new TypeError("circular thenable chain")):e(n,t))},function(t){o||(o=!0,n.reject(t))})}catch(t){o||n.reject(t)}}}else n.reject(new TypeError("cannot resolve promise with itself"))};Fn.all=function(t){return new Fn(function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then(function(t){o(e,t)},function(t){n(t)}):o(e,r)}(a)})},Fn.resolve=function(t){return new Fn(function(e,n){e(t)})},Fn.reject=function(t){return new Fn(function(e,n){n(t)})};var $n="undefined"!=typeof Promise?Promise:Fn,Un=function(t,e,n){var r=w(t),i=!r,o=this._private=I({duration:1e3},e,n);if(o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&d(o.complete)&&o.completes.push(o.complete),i){var a=t.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(r){var s=t.pan();o.startPan={x:s.x,y:s.y},o.startZoom=t.zoom()}this.length=1,this[0]=this},Vn=Un.prototype;I(Vn,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),y(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new $n(function(t,n){e.push(function(){t()})})}}),Vn.complete=Vn.completed,Vn.run=Vn.play,Vn.running=Vn.playing;var Yn={};[{animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++)t[e]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,o=!n,a=!o;if(!i.styleEnabled())return this;var s=i.style();if(t=I({},t,e),0===Object.keys(t).length)return new Un(r[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(a&&(t.style=s.getPropsList(t.style||t.css),t.css=void 0),a&&null!=t.renderedPosition){var l=t.renderedPosition,u=i.pan(),c=i.zoom();t.position=te(l,c,u)}if(o&&null!=t.panBy){var f=t.panBy,h=i.pan();t.pan={x:h.x+f.x,y:h.y+f.y}}var d=t.center||t.centre;if(o&&null!=d){var p=i.getCenterPan(d.eles,t.zoom);null!=p&&(t.pan=p)}if(o&&null!=t.fit){var v=t.fit,m=i.getFitViewport(v.eles||v.boundingBox,v.padding);null!=m&&(t.pan=m.pan,t.zoom=m.zoom)}if(o&&g(t.zoom)){var y=i.getZoomedViewport(t.zoom);null!=y&&(y.zoomed&&(t.zoom=y.zoom),y.panned&&(t.pan=y.pan))}return new Un(r[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=I({},t,e));for(var r=0;r<n.length;r++){var i=n[r],o=i.animated()&&(void 0===t.queue||t.queue);i.animation(t,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var o=n[i]._private,a=o.animation.current,s=0;s<a.length;s++)e&&(a[s]._private.duration=0);t&&(o.animation.queue=[]),e||(o.animation.current=[])}return r.notify("draw"),this}}},{data:function(t){return t=I({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=void 0!==this.length,o=i?this:[this],a=i?this[0]:this;if(h(e)){var s;if(r.allowGetting&&void 0===n)return a&&(r.beforeGet(a),s=a._private[r.field][e]),s;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var l=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n);r.beforeSet(this,l);for(var u=0,c=o.length;u<c;u++){var f=o[u];r.canSet(f)&&(f._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&g(e)){var p,v,m=e,y=Object.keys(m);r.beforeSet(this,m);for(var _=0;_<y.length;_++)if(v=m[p=y[_]],!r.immutableKeys[p])for(var b=0;b<o.length;b++){var w=o[b];r.canSet(w)&&(w._private[r.field][p]=v)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&d(e))this.on(r.bindingEvent,e);else if(r.allowGetting&&void 0===e){var x;return a&&(r.beforeGet(a),x=a._private[r.field]),x}return this}},removeData:function(t){return t=I({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(h(e)){for(var i=e.split(/\s+/),o=i.length,a=0;a<o;a++){var s=i[a];if(!k(s)&&!n.immutableKeys[s])for(var l=0,u=r.length;l<u;l++)r[l]._private[n.field][s]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var c=0,f=r.length;c<f;c++)for(var d=r[c]._private[n.field],p=Object.keys(d),g=0;g<p.length;g++){var v=p[g];!n.immutableKeys[v]&&(d[v]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new $n(function(t,e){var i=r.concat([function(e){n.off.apply(n,o),t(e)}]),o=i.concat([]);n.on.apply(n,i)})}}}].forEach(function(t){I(Yn,t)});var Xn={animate:Yn.animate(),animation:Yn.animation(),animated:Yn.animated(),clearQueue:Yn.clearQueue(),delay:Yn.delay(),delayAnimation:Yn.delayAnimation(),stop:Yn.stop()},Kn={classes:function(t){if(void 0===t){var e=[];return this[0]._private.classes.forEach(function(t){return e.push(t)}),e}p(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],r=new Lt(t),i=0;i<this.length;i++){for(var o=this[i],a=o._private,s=a.classes,l=!1,u=0;u<t.length;u++)if(!s.has(t[u])){l=!0;break}l||(l=s.size!==t.length),l&&(a.classes=r,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){p(t)||(t=t.match(/\S+/g)||[]);for(var n=void 0===e,r=[],i=0,o=this.length;i<o;i++)for(var a=this[i],s=a._private.classes,l=!1,u=0;u<t.length;u++){var c=t[u],f=s.has(c),h=!1;e||n&&!f?(s.add(c),h=!0):(!e||n&&f)&&(s.delete(c),h=!0),!l&&h&&(r.push(a),l=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};Kn.className=Kn.classNames=Kn.classes;var Gn={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:N,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Gn.variable="(?:[\\w-]|(?:\\\\"+Gn.metaChar+"))+",Gn.value=Gn.string+"|"+Gn.number,Gn.className=Gn.variable,Gn.id=Gn.variable,function(){var t,e,n;for(t=Gn.comparatorOp.split("|"),n=0;n<t.length;n++)Gn.comparatorOp+="|@"+(e=t[n]);for(t=Gn.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(Gn.comparatorOp+="|\\!"+e)}();var Zn=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(t,e){return function(t,e){return-1*D(t,e)}(t.selector,e.selector)}),Qn=function(){for(var t,e={},n=0;n<Zn.length;n++)e[(t=Zn[n]).selector]=t.matches;return e}(),Jn="("+Zn.map(function(t){return t.selector}).join("|")+")",tr=function(t){return t.replace(new RegExp("\\\\("+Gn.metaChar+")","g"),function(t,e){return e})},er=function(t,e,n){t[t.length-1]=n},nr=[{name:"group",query:!0,regex:"("+Gn.group+")",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:Jn,populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:7,value:r})}},{name:"id",query:!0,regex:"\\#("+Gn.id+")",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:8,value:tr(r)})}},{name:"className",query:!0,regex:"\\.("+Gn.className+")",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:9,value:tr(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Gn.variable+")\\s*\\]",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:4,field:tr(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Gn.variable+")\\s*("+Gn.comparatorOp+")\\s*("+Gn.value+")\\s*\\]",populate:function(t,e,n){var r=i(n,3),o=r[0],a=r[1],s=r[2];s=null!=new RegExp("^"+Gn.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),e.checks.push({type:3,field:tr(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Gn.boolOp+")\\s*("+Gn.variable+")\\s*\\]",populate:function(t,e,n){var r=i(n,2),o=r[0];e.checks.push({type:5,field:tr(r[1]),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Gn.meta+")\\s*("+Gn.comparatorOp+")\\s*("+Gn.number+")\\s*\\]\\]",populate:function(t,e,n){var r=i(n,3),o=r[1],a=r[2];e.checks.push({type:6,field:tr(r[0]),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:Gn.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,o=t[t.length-1];return null!=n&&(o.subject=n,t.currentSubject=null),o.edgeCount=r,o.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Gn.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:11,source:e,target:r}),er(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:12,source:e,target:o}),er(t,0,i),t.edgeCount++,o}},{name:"undirectedEdge",separator:!0,regex:Gn.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:10,nodes:[e,r]}),er(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:14,node:e,neighbor:o}),er(t,0,i),o}},{name:"child",separator:!0,regex:Gn.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:15,parent:t[t.length-1],child:r}),er(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},a={checks:[]},s={checks:[]},l={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:a}),a.checks=e.checks,e.checks=[{type:20}],l.checks.push({type:20}),o.checks.push({type:17,parent:l,child:s}),er(t,0,i),t.currentSubject=a,t.compoundCount++,s}var u={checks:[]},c={checks:[]},f=[{type:17,parent:u,child:c}];return u.checks=e.checks,e.checks=f,t.compoundCount++,c}},{name:"descendant",separator:!0,regex:Gn.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:16,ancestor:t[t.length-1],descendant:r}),er(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},a={checks:[]},s={checks:[]},l={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:a}),a.checks=e.checks,e.checks=[{type:20}],l.checks.push({type:20}),o.checks.push({type:18,ancestor:l,descendant:s}),er(t,0,i),t.currentSubject=a,t.compoundCount++,s}var u={checks:[]},c={checks:[]},f=[{type:18,ancestor:u,descendant:c}];return u.checks=e.checks,e.checks=f,t.compoundCount++,c}},{name:"subject",modifier:!0,regex:Gn.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return kt("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];nr.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var rr=function(t){for(var e,n,r,i=0;i<nr.length;i++){var o=nr[i],a=o.name,s=t.match(o.regexObj);if(null!=s){n=s,e=o,r=a,t=t.substring(s[0].length);break}}return{expr:e,match:n,name:r,remaining:t}},ir={parse:function(t){var e=this.inputText=t,n=this[0]={checks:[]};for(this.length=1,e=function(t){var e=t.match(/^\s+/);return e&&(t=t.substring(e[0].length)),t}(e);;){var r=rr(e);if(null==r.expr)return kt("The selector `"+t+"`is invalid"),!1;var i=r.match.slice(1),o=r.expr.populate(this,n,i);if(!1===o)return!1;if(null!=o&&(n=o),(e=r.remaining).match(/^\s*$/))break}var a=this[this.length-1];null!=this.currentSubject&&(a.subject=this.currentSubject),a.edgeCount=this.edgeCount,a.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var l=this[s];if(l.compoundCount>0&&l.edgeCount>0)return kt("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return kt("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&kt("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return h(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function(r,o){var a=r.value;switch(r.type){case 0:var s=t(a);return s.substring(0,s.length-1);case 3:return"["+r.field+n(t(r.operator))+e(a)+"]";case 5:var l=r.field;return"["+t(r.operator)+l+"]";case 4:return"["+r.field+"]";case 6:return"[["+r.field+n(t(r.operator))+e(a)+"]]";case 7:return a;case 8:return"#"+a;case 9:return"."+a;case 17:case 15:return i(r.parent,o)+n(">")+i(r.child,o);case 18:case 16:return i(r.ancestor,o)+" "+i(r.descendant,o);case 19:var u=i(r.left,o),c=i(r.subject,o),f=i(r.right,o);return u+(u.length>0?" ":"")+c+f;case 20:return""}},i=function(t,e){return t.checks.reduce(function(n,i,o){return n+(e===t&&0===o?"$":"")+r(i,e)},"")},o="",a=0;a<this.length;a++){var s=this[a];o+=i(s,s.subject),this.length>1&&a<this.length-1&&(o+=", ")}return this.toStringCache=o,o}},or=function(t,e,n){var r,i,o,a=h(t),s=v(t),l=h(n),u=!1,c=!1,f=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),c=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),u=!0),(a||l||u)&&(i=a||s?""+t:"",o=""+n),u&&(t=i=i.toLowerCase(),n=o=o.toLowerCase()),e){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=t===n;break;case">":f=!0,r=t>n;break;case">=":f=!0,r=t>=n;break;case"<":f=!0,r=t<n;break;case"<=":f=!0,r=t<=n;break;default:r=!1}return!c||null==t&&f||(r=!r),r},ar=function(t,e){return t.data(e)},sr=[],lr=function(t,e){return t.checks.every(function(t){return sr[t.type](t,e)})};sr[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},sr[7]=function(t,e){return function(t,e){return Qn[t](e)}(t.value,e)},sr[8]=function(t,e){var n=t.value;return e.id()===n},sr[9]=function(t,e){return e.hasClass(t.value)},sr[6]=function(t,e){var n=t.field,r=t.operator,i=t.value;return or(function(t,e){return t[n]()}(e),r,i)},sr[3]=function(t,e){var n=t.operator,r=t.value;return or(ar(e,t.field),n,r)},sr[5]=function(t,e){var n=t.operator;return function(t,e){switch(n){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(ar(e,t.field))},sr[4]=function(t,e){return void 0!==ar(e,t.field)},sr[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return lr(n,i)&&lr(r,o)||lr(r,i)&&lr(n,o)},sr[14]=function(t,e){return lr(t.node,e)&&e.neighborhood().some(function(e){return e.isNode()&&lr(t.neighbor,e)})},sr[11]=function(t,e){return lr(t.source,e.source())&&lr(t.target,e.target())},sr[12]=function(t,e){return lr(t.source,e)&&e.outgoers().some(function(e){return e.isNode()&&lr(t.target,e)})},sr[13]=function(t,e){return lr(t.target,e)&&e.incomers().some(function(e){return e.isNode()&&lr(t.source,e)})},sr[15]=function(t,e){return lr(t.child,e)&&lr(t.parent,e.parent())},sr[17]=function(t,e){return lr(t.parent,e)&&e.children().some(function(e){return lr(t.child,e)})},sr[16]=function(t,e){return lr(t.descendant,e)&&e.ancestors().some(function(e){return lr(t.ancestor,e)})},sr[18]=function(t,e){return lr(t.ancestor,e)&&e.descendants().some(function(e){return lr(t.descendant,e)})},sr[19]=function(t,e){return lr(t.subject,e)&&lr(t.left,e)&&lr(t.right,e)},sr[20]=function(){return!0},sr[1]=function(t,e){return t.value.has(e)},sr[2]=function(t,e){return(0,t.value)(e)};var ur=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||h(t)&&t.match(/^\s*$/)||(y(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):d(t)?this.addQuery({checks:[{type:2,value:t}]}):h(t)?this.parse(t)||(this.invalid=!0):wt("A selector must be created from a string; found ",t))},cr=ur.prototype;[ir,{matches:function(t){for(var e=0;e<this.length;e++)if(lr(this[e],t))return!0;return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++)if(lr(e[n],t))return!0;return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}}].forEach(function(t){return I(cr,t)}),cr.text=function(){return this.inputText},cr.size=function(){return this.length},cr.eq=function(t){return this[t]},cr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},cr.addQuery=function(t){this[this.length++]=t},cr.selector=cr.toString;var fr={allAre:function(t){var e=new ur(t);return this.every(function(t){return e.matches(t)})},is:function(t){var e=new ur(t);return this.some(function(t){return e.matches(t)})},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every(function(e){return t.hasElementWithId(e.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every(function(t){return e.hasElementWithId(t.id())})},contains:function(t){t=this.cy().collection(t);var e=this;return t.every(function(t){return e.hasElementWithId(t.id())})}};fr.allAreNeighbours=fr.allAreNeighbors,fr.has=fr.contains,fr.equal=fr.equals=fr.same;var hr,dr,pr=function(t,e){return function(n,r,i,o){var a,s=n;if(null==s?a="":y(s)&&1===s.length&&(a=s.id()),1===this.length&&a){var l=this[0]._private,u=l.traversalCache=l.traversalCache||{},c=u[e]=u[e]||[],f=ct(a);return c[f]||(c[f]=t.call(this,n,r,i,o))}return t.call(this,n,r,i,o)}},gr={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++)e.push(n[r]);n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isChild()}).filter(t)},children:pr(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,{unique:!0}).filter(t)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,{unique:!0}).filter(t)}};function vr(t,e,n,r){for(var i=[],o=new Lt,a=t.cy().hasCompoundNodes(),s=0;s<t.length;s++){var l=t[s];n?i.push(l):a&&r(i,o,l)}for(;i.length>0;){var u=i.shift();e(u),o.add(u.id()),a&&r(i,o,u)}return t}function mr(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function yr(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function _r(t,e,n){yr(t,e,n),mr(t,e,n)}gr.forEachDown=function(t){return vr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],mr)},gr.forEachUp=function(t){return vr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],yr)},gr.forEachUpAndDown=function(t){return vr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_r)},gr.ancestors=gr.parents,(hr=dr={data:Yn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Yn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Yn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Yn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Yn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Yn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=hr.data,hr.removeAttr=hr.removeData;var br,wr,xr=dr,kr={};function Er(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,o=0;o<i.length;o++){var a=i[o];!e&&a.isLoop()||(n+=t(r,a))}return n}}}function zr(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][t](n);void 0===a||void 0!==r&&!e(a,r)||(r=a)}return r}}I(kr,{degree:Er(function(t,e){return e.source().same(e.target())?2:1}),indegree:Er(function(t,e){return e.target().same(t)?1:0}),outdegree:Er(function(t,e){return e.source().same(t)?1:0})}),I(kr,{minDegree:zr("degree",function(t,e){return t<e}),maxDegree:zr("degree",function(t,e){return t>e}),minIndegree:zr("indegree",function(t,e){return t<e}),maxIndegree:zr("indegree",function(t,e){return t>e}),minOutdegree:zr("outdegree",function(t,e){return t<e}),maxOutdegree:zr("outdegree",function(t,e){return t>e})}),I(kr,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var Ar=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var o=i._private.position,a={x:null!=e.x?e.x-o.x:0,y:null!=e.y?e.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,n),i.shiftCachedBoundingBox(a)}}},Cr={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){Ar(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(br=wr={position:Yn.data(Cr),silentPosition:Yn.data(I({},Cr,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){Ar(t,e,!0)}})),positions:function(t,e){if(g(t))e?this.silentPosition(t):this.position(t);else if(d(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o,a=this[i];(o=n(a,i))&&(e?a.silentPosition(o):a.position(o))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(g(t)?(r={x:v(t.x)?t.x:0,y:v(t.y)?t.y:0},n=e):h(t)&&v(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=a.position(),l={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(l):a.position(l)}i.endBatch()}return this},silentShift:function(t,e){return g(t)?this.shift(t,!0):h(t)&&v(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=g(t)?t:void 0,s=void 0!==a||void 0!==e&&h(t);if(n&&n.isNode()){if(!s){var l=n.position();return a=Jt(l,i,o),void 0===t?a:a[t]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==e?c.position(t,(e-o[t])/i):void 0!==a&&c.position(te(a,i,o))}}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=g(t)?t:void 0,o=void 0!==i||void 0!==e&&h(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),l=a?n.parent():null,u=l&&l.length>0;u&&(l=l[0]);var c=u?l.position():{x:0,y:0};return i={x:s.x-c.x,y:s.y-c.y},void 0===t?i:i[t]}for(var f=0;f<this.length;f++){var d=this[f],p=a?d.parent():null,v=p&&p.length>0;v&&(p=p[0]);var m=v?p.position():{x:0,y:0};void 0!==e?d.position(t,e+m[t]):void 0!==i&&d.position({x:i.x+m.x,y:i.y+m.y})}}else if(!o)return;return this}}).modelPosition=br.point=br.position,br.modelPositions=br.points=br.positions,br.renderedPoint=br.renderedPosition,br.relativePoint=br.relativePosition;var Sr,Tr,Mr=wr;Sr=Tr={},Tr.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,l=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},Tr.dirtyCompoundBoundsCache=function(){var t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(t){if(t.isParent()){var e=t._private;e.compoundBoundsClean=!1,e.bbCache=null,t.emitAndNotify("bounds")}}),this):this},Tr.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),a=e.position;0!==o.w&&0!==o.h||((o={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var f=m(i.width.val-o.w,s,l),h=f.biasDiff,d=f.biasComplementDiff,p=m(i.height.val-o.h,u,c),g=p.biasDiff,v=p.biasComplementDiff;e.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(o.w,o.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(o.w,i.width.val),a.x=(-h+o.x1+o.x2+d)/2,e.autoHeight=Math.max(o.h,i.height.val),a.y=(-g+o.y1+o.y2+v)/2}function m(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean||(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var Nr=function(t){return t===1/0||t===-1/0?0:t},Dr=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Ir=function(t,e){return null==e?t:Dr(t,e.x1,e.y1,e.x2,e.y2)},Or=function(t,e,n){return Nt(t,e,n)},Lr=function(t,e,n){if(!e.cy().headless()){var r,i,o=e._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var l=o.arrowBounds=o.arrowBounds||{},u=l[n]=l[n]||{};u.x1=r-s,u.y1=i-s,u.x2=r+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,de(u,1),Dr(t,u.x1,u.y1,u.x2,u.y2)}}},Pr=function(t,e,n){if(!e.cy().headless()){var r,i=e._private,o=i.rstyle;if(e.pstyle((r=n?n+"-":"")+"label").strValue){var a,s,l,u,c=e.pstyle("text-halign"),f=e.pstyle("text-valign"),h=Or(o,"labelWidth",n),d=Or(o,"labelHeight",n),p=Or(o,"labelX",n),g=Or(o,"labelY",n),v=e.pstyle(r+"text-margin-x").pfValue,m=e.pstyle(r+"text-margin-y").pfValue,y=e.isEdge(),_=e.pstyle(r+"text-rotation"),b=e.pstyle("text-outline-width").pfValue,w=e.pstyle("text-border-width").pfValue/2,x=e.pstyle("text-background-padding").pfValue,k=d+2*x,E=h+2*x,z=E/2,A=k/2;if(y)a=p-z,s=p+z,l=g-A,u=g+A;else{switch(c.value){case"left":a=p-E,s=p;break;case"center":a=p-z,s=p+z;break;case"right":a=p,s=p+E}switch(f.value){case"top":l=g-k,u=g;break;case"center":l=g-A,u=g+A;break;case"bottom":l=g,u=g+k}}a+=v-Math.max(b,w),s+=v+Math.max(b,w),l+=m-Math.max(b,w),u+=m+Math.max(b,w);var C=n||"main",S=i.labelBounds,T=S[C]=S[C]||{};T.x1=a,T.y1=l,T.x2=s,T.y2=u,T.w=s-a,T.h=u-l,de(T,1);var M=y&&"autorotate"===_.strValue;if(M||null!=_.pfValue&&0!==_.pfValue){var N=M?Or(i.rstyle,"labelAngle",n):_.pfValue,D=Math.cos(N),I=Math.sin(N),O=(a+s)/2,L=(l+u)/2;if(!y){switch(c.value){case"left":O=s;break;case"right":O=a}switch(f.value){case"top":L=u;break;case"bottom":L=l}}var P=function(t,e){return{x:(t-=O)*D-(e-=L)*I+O,y:t*I+e*D+L}},B=P(a,l),F=P(a,u),j=P(s,l),R=P(s,u);a=Math.min(B.x,F.x,j.x,R.x),s=Math.max(B.x,F.x,j.x,R.x),l=Math.min(B.y,F.y,j.y,R.y),u=Math.max(B.y,F.y,j.y,R.y)}Dr(t,a,l,s,u),Dr(i.labelBounds.all,a,l,s,u)}return t}},Br=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),(r+=n(t.includeLabels))+n(t.includeOverlays)},Fr=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return ut([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},jr=function(t,e){var n,r=t._private,i=(null==e?Hr:Br(e))===Hr,o=Fr(t),a=r.bbCachePosKey===o,s=!(e.useCache&&a)||null==r.bbCache;if(s?(a||t.recalculateRenderedStyle(),n=function(t,e){var n,r,i,o,a,s,l,u=t._private.cy,c=u.styleEnabled(),f=u.headless(),h=fe(),d=t._private,p=c?t.pstyle("display").value:"element",g=t.isNode(),v=t.isEdge(),m="none"!==p,y=d.rstyle,_=g&&c?t.pstyle("bounds-expansion").pfValue:0;if(m){var b=0;c&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(b=t.pstyle("overlay-padding").value);var w=0;if(c&&(w=t.pstyle("width").pfValue/2),g&&e.includeNodes){var x=t.position();a=x.x,s=x.y;var k=t.outerWidth()/2,E=t.outerHeight()/2;Dr(h,n=a-k,i=s-E,r=a+k,o=s+E)}else if(v&&e.includeEdges)if(c&&!f&&(n=Math.min(y.srcX,y.midX,y.tgtX),r=Math.max(y.srcX,y.midX,y.tgtX),i=Math.min(y.srcY,y.midY,y.tgtY),o=Math.max(y.srcY,y.midY,y.tgtY),Dr(h,n-=w,i-=w,r+=w,o+=w)),c&&!f&&"haystack"===t.pstyle("curve-style").strValue){var z=y.haystackPts||[];if((n=z[0].x)>(r=z[1].x)){var A=n;n=r,r=A}if((i=z[0].y)>(o=z[1].y)){var C=i;i=o,o=C}Dr(h,n-w,i-w,r+w,o+w)}else{for(var S=y.bezierPts||y.linePts||[],T=0;T<S.length;T++){var M=S[T];Dr(h,n=M.x-w,i=M.y-w,r=M.x+w,o=M.y+w)}if(0===S.length){var N=t.source().position(),D=t.target().position();if((n=N.x)>(r=D.x)){var I=n;n=r,r=I}if((i=N.y)>(o=D.y)){var O=i;i=o,o=O}Dr(h,n-=w,i-=w,r+=w,o+=w)}}if(c&&e.includeEdges&&v&&(Lr(h,t,"mid-source"),Lr(h,t,"mid-target"),Lr(h,t,"source"),Lr(h,t,"target")),c&&"yes"===t.pstyle("ghost").value){var L=t.pstyle("ghost-offset-x").pfValue,P=t.pstyle("ghost-offset-y").pfValue;Dr(h,h.x1+L,h.y1+P,h.x2+L,h.y2+P)}var B=d.bodyBounds=d.bodyBounds||{};pe(B,h),de(B,_),de(B,1),c&&Dr(h,(n=h.x1)-b,(i=h.y1)-b,(r=h.x2)+b,(o=h.y2)+b);var F=d.overlayBounds=d.overlayBounds||{};pe(F,h),de(F,_),de(F,1);var j=d.labelBounds=d.labelBounds||{};null!=j.all?((l=j.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):j.all=fe(),c&&e.includeLabels&&(Pr(h,t,null),v&&(Pr(h,t,"source"),Pr(h,t,"target")))}return h.x1=Nr(h.x1),h.y1=Nr(h.y1),h.x2=Nr(h.x2),h.y2=Nr(h.y2),h.w=Nr(h.x2-h.x1),h.h=Nr(h.y2-h.y1),h.w>0&&h.h>0&&m&&(de(h,_),de(h,1)),h}(t,Rr),r.bbCache=n,r.bbCacheShift.x=r.bbCacheShift.y=0,r.bbCachePosKey=o):n=r.bbCache,!s&&(0!==r.bbCacheShift.x||0!==r.bbCacheShift.y)){var l=ge,u=r.bbCacheShift,c=function(t,e){null!=t&&l(t,e)};l(n,u);var f=r.overlayBounds,h=r.labelBounds,d=r.arrowBounds;c(r.bodyBounds,u),c(f,u),null!=d&&(c(d.source,u),c(d.target,u),c(d["mid-source"],u),c(d["mid-target"],u)),null!=h&&(c(h.main,u),c(h.all,u),c(h.source,u),c(h.target,u))}if(r.bbCacheShift.x=r.bbCacheShift.y=0,!i){var p=t.isNode();n=fe(),(e.includeNodes&&p||e.includeEdges&&!p)&&Ir(n,e.includeOverlays?r.overlayBounds:r.bodyBounds),e.includeLabels&&Ir(n,r.labelBounds.all),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Rr={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeOverlays:!0,useCache:!0},Hr=Br(Rr),qr=St(Rr);Tr.boundingBox=function(t){if(1===this.length&&null!=this[0]._private.bbCache&&(void 0===t||void 0===t.useCache||!0===t.useCache))return t=void 0===t?Rr:qr(t),jr(this[0],t);var e=fe(),n=qr(t=t||Rr);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],o=i._private,a=Fr(i);i.recalculateRenderedStyle(n.useCache&&o.bbCachePosKey===a)}this.updateCompoundBounds();for(var s=0;s<this.length;s++)Ir(e,jr(this[s],n));return e.x1=Nr(e.x1),e.y1=Nr(e.y1),e.x2=Nr(e.x2),e.y2=Nr(e.y2),e.w=Nr(e.x2-e.x1),e.h=Nr(e.y2-e.y1),e},Tr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCacheShift.x=e.bbCacheShift.y=0,e.bbCachePosKey=null}return this.emitAndNotify("bounds"),this},Tr.shiftCachedBoundingBox=function(t){for(var e=0;e<this.length;e++){var n=this[e]._private;null!=n.bbCache&&(n.bbCacheShift.x+=t.x,n.bbCacheShift.y+=t.y)}return this.emitAndNotify("bounds"),this},Tr.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes();if(r&&(e=e.filter(function(t){return!t.isParent()})),g(t)){var i=t;t=function(){return i}}n.startBatch(),e.forEach(function(e,n){return e._private.bbAtOldPos=t(e,n)}).silentPositions(t),r&&this.updateCompoundBounds(!0);var o=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions(function(t){return t._private.bbAtOldPos}),n.endBatch(),o},Sr.boundingbox=Sr.bb=Sr.boundingBox,Sr.renderedBoundingbox=Sr.renderedBoundingBox;var Wr,$r,Ur=Tr;Wr=$r={};var Vr=function(t){t.uppercaseName=M(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=M(t.outerName),Wr[t.name]=function(){var e=this[0],n=e._private;if(e){if(!n.cy._private.styleEnabled)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var r=e.pstyle(t.name);switch(r.strValue){case"label":return e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0;default:return r.pfValue}}},Wr["outer"+t.uppercaseName]=function(){var e=this[0];if(e)return e._private.cy._private.styleEnabled?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},Wr["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},Wr["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};Vr({name:"width"}),Vr({name:"height"}),$r.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};var Yr=$r,Xr={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},Kr=Object.keys(Xr).reduce(function(t,e){var n=Xr[e],r=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,n.get)},t[r]=n.mult?function(){return function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map(function(t){return Jt(t,i,r)})}}(this,n.get)}:function(){return function(t,e){if(t.isEdge()){var n=t.cy();return Jt(e(t),n.zoom(),n.pan())}}(this,n.get)},t},{}),Gr=I({},Mr,Ur,Yr,Kr),Zr=function(t,e){this.recycle(t,e)};function Qr(){return!1}function Jr(){return!0}Zr.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Qr,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Jr:Qr):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Jr;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Jr;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Jr,this.stopPropagation()},isDefaultPrevented:Qr,isPropagationStopped:Qr,isImmediatePropagationStopped:Qr};var ti=/^([^.]+)(\.(?:[^.]+))?$/,ei={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},ni=Object.keys(ei);function ri(t,e){for(var n=0;n<ni.length;n++){var r=ni[n];this[r]=t[r]||ei[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ii=ri.prototype,oi=function(t,e,n,r,i,o,a){d(r)&&(i=r,r=null),a&&(o=null==o?a:I({},o,a));for(var s=p(n)?n:n.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!k(u)){var c=u.match(ti);if(c&&!1===e(t,u,c[1],c[2]?c[2]:null,r,i,o))break}}},ai=function(t,e){return t.addEventFields(t.context,e),new Zr(e.type,e)};ii.on=ii.addListener=function(t,e,n,r,i){return oi(this,function(t,e,n,r,i,o,a){d(o)&&t.listeners.push({event:e,callback:o,type:n,namespace:r,qualifier:i,conf:a})},t,e,n,r,i),this},ii.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},ii.removeListener=ii.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var o=this.listeners,a=function(a){var s=o[a];oi(i,function(t,e,n,r,i,l){if(s.type===n&&(!r||s.namespace===r)&&(!i||t.qualifierCompare(s.qualifier,i))&&(!l||s.callback===l))return o.splice(a,1),!1},t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this},ii.emit=ii.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,p(e)||(e=[e]),function(t,e,n){if("event"!==f(n))if(g(n))e(t,ai(t,n));else for(var r=p(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!k(o)){var a=o.match(ti);a&&e(t,ai(t,{type:a[1],namespace:a[2]?a[2]:null,target:t.context}))}}else e(t,n)}(this,function(t,o){null!=n&&(i=(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}]).length);for(var a=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,o)){var a=[o];null!=e&&function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])}(a,e),t.beforeEmit(t.context,i,o),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter(function(t){return t!==i}));var s=t.callbackContext(t.context,i,o),l=i.callback.apply(s,a);t.afterEmit(t.context,i,o),!1===l&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);t.bubble(t.context)&&!o.isPropagationStopped()&&t.parent(t.context).emit(o,e)},t),this.emitting--,this};var si={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&_(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},li=function(t){return h(t)?new ur(t):t},ui={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new ri(si,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=li(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=li(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},one:function(t,e,n){for(var r=li(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=li(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};Yn.eventAliasesOn(ui);var ci={nodes:function(t){return this.filter(function(t){return t.isNode()}).filter(t)},edges:function(t){return this.filter(function(t){return t.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.merge(r):e.merge(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(h(t)||y(t))return new ur(t).filter(this);if(d(t)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(e?t.apply(e,[i,r,this]):t(i,r,this))&&n.merge(i)}return n}return this.spawn()},not:function(t){if(t){h(t)&&(t=this.filter(t));for(var e=[],n=t._private.map,r=0;r<this.length;r++){var i=this[r];n.has(i.id())||e.push(i)}return this.spawn(e)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(h(t))return this.filter(t);for(var e=[],n=this.length<t.length,r=n?t._private.map:this._private.map,i=n?this:t,o=0;o<i.length;o++){var a=r.get(i[o]._private.data.id);a&&e.push(a.ele)}return this.spawn(e)},xor:function(t){var e=this._private.cy;h(t)&&(t=e.$(t));var n=[],r=t,i=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];e.hasElementWithId(i._private.data.id)||n.push(i)}};return i(this,r),i(r,this),this.spawn(n)},diff:function(t){var e=this._private.cy;h(t)&&(t=e.$(t));var n=[],r=[],i=[],o=t,a=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];e.hasElementWithId(o._private.data.id)?i.push(o):n.push(o)}};return a(this,o,n),a(o,this,r),{left:this.spawn(n,{unique:!0}),right:this.spawn(r,{unique:!0}),both:this.spawn(i,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(h(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=[],i=0;i<this.length;i++)r.push(this[i]);for(var o=this._private.map,a=0;a<t.length;a++)!o.has(t[a].id())&&r.push(t[a]);return this.spawn(r)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&h(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(i.has(s)){var l=i.get(s).index;this[l]=a,i.set(s,{ele:a,index:l})}else{var u=this.length++;this[u]=a,i.set(s,{ele:a,index:u})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(e),this.length>1&&t!==this.length-1){var r=this.length-1,i=this[r],o=i._private.data.id;this[r]=void 0,this[t]=i,n.set(o,{ele:i,index:t})}return this.length--,this},unmergeOne:function(t){var e=this._private.map.get((t=t[0])._private.data.id);return e?(this.unmergeAt(e.index),this):this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&h(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(o)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n,r=-1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a>r&&(r=a,n=o)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a<r&&(r=a,n=o)}return{value:r,ele:n}}},fi=ci;fi.u=fi["|"]=fi["+"]=fi.union=fi.or=fi.add,fi["\\"]=fi["!"]=fi["-"]=fi.difference=fi.relativeComplement=fi.subtract=fi.not,fi.n=fi["&"]=fi["."]=fi.and=fi.intersection=fi.intersect,fi["^"]=fi["(+)"]=fi["(-)"]=fi.symmetricDifference=fi.symdiff=fi.xor,fi.fnFilter=fi.filterFn=fi.stdFilter=fi.filter,fi.complement=fi.abscomp=fi.absoluteComplement;var hi=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?vt:0}var i=r(t)-r(e);if(0!==i)return i;function o(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var a=o(t)-o(e);if(0!==a)return a;var s=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==s?s:t.poolIndex()-e.poolIndex()},di={forEach:function(t,e){if(d(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!d(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(hi)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:vt-1}var r=e.target,i=e.source.zDepth(),o=r.zDepth();return Math.max(i,o,0)}}};di.each=di.forEach;var pi=St({nodeDimensionsIncludeLabels:!1}),gi={layoutDimensions:function(t){if((t=pi(t)).nodeDimensionsIncludeLabels){var e=this.boundingBox();return{w:e.w,h:e.h}}return{w:this.outerWidth(),h:this.outerHeight()}},layoutPositions:function(t,e,n){var r=this.nodes(),i=this.cy(),o=e.eles,a=function(t){return t.id()},s=A(n,a);t.emit({type:"layoutstart",layout:t}),t.animations=[];var l=e.spacingFactor&&1!==e.spacingFactor,u=function(){if(!l)return null;for(var t=fe(),e=0;e<r.length;e++){var n=s(r[e],e);he(t,n.x,n.y)}return t}(),c=A(function(t,n){var r=s(t,n);return l&&(r=function(t,e,n){var r=u.x1+u.w/2,i=u.y1+u.h/2;return{x:r+(n.x-r)*t,y:i+(n.y-i)*t}}(Math.abs(e.spacingFactor),0,r)),null!=e.transform&&(r=e.transform(t,r)),r},a);if(e.animate){for(var f=0;f<r.length;f++){var h=r[f],d=c(h,f);if(null==e.animateFilter||e.animateFilter(h,f)){var p=h.animation({position:d,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(p)}else h.position(d)}if(e.fit){var g=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}else if(void 0!==e.zoom&&void 0!==e.pan){var v=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(v)}t.animations.forEach(function(t){return t.play()}),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),$n.all(t.animations.map(function(t){return t.promise()})).then(function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})})}else r.positions(c),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(I({},t,{eles:this}))}};function vi(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[t])?r:r=o[t]=e(n)}function mi(t,e){return t=ct(t),function(n){return vi(t,e,n)}}function yi(t,e){t=ct(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return vi(t,n,e)}}gi.createLayout=gi.makeLayout=gi.layout;var _i={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach(function(t){n(t),t.connectedEdges().forEach(n)}),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=e.hasCompoundNodes(),r=e.style(),i=this;t=!(!t&&void 0!==t),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=r.apply(i);return t?o.emitAndNotify("style"):o.emit("style"),this},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(g(t))r.applyBypass(this,t,!1),this.emitAndNotify("style");else if(h(t)){if(void 0===e){var i=this[0];return i?r.getStylePropertyValue(i,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++)n.removeAllBypasses(this[r],!1);else{t=t.split(/\s+/);for(var i=0;i<this.length;i++)n.removeBypasses(this[i],t,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++)i*=o[a].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function bi(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function wi(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var a=i._private;if(!e(i))return!1;if(i.isNode())return!o||bi(i,r);var s=a.source,l=a.target;return n(s)&&(!o||bi(s,n))&&(s===l||n(l)&&(!o||bi(l,n)))}}}var xi=mi("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});_i.takesUpSpace=yi("takesUpSpace",wi({ok:xi}));var ki=mi("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&xi(t)}),Ei=mi("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&xi(t)});_i.interactive=yi("interactive",wi({ok:ki,parentOk:Ei,edgeOkViaNode:xi})),_i.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var zi=mi("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&xi(t)});_i.visible=yi("visible",wi({ok:zi,edgeOkViaNode:xi})),_i.hidden=function(){var t=this[0];if(t)return!t.visible()},_i.isBundledBezier=yi("isBundledBezier",function(){return!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),_i.bypass=_i.css=_i.style,_i.renderedCss=_i.renderedStyle,_i.removeBypass=_i.removeCss=_i.removeStyle,_i.pstyle=_i.parsedStyle;var Ai={};function Ci(t){return function(){var e=arguments,n=[];if(2===e.length)this.on(t.event,e[0],e[1]);else if(1===e.length&&d(e[0]))this.on(t.event,e[0]);else if(0===e.length||1===e.length&&p(e[0])){for(var r=1===e.length?e[0]:null,i=0;i<this.length;i++){var o=this[i],a=!t.ableField||o._private[t.ableField],s=o._private[t.field]!=t.value;if(t.overrideAble){var l=t.overrideAble(o);if(void 0!==l&&(a=l,!l))return this}a&&(o._private[t.field]=t.value,s&&n.push(o))}var u=this.spawn(n);u.updateStyle(),u.emit(t.event),r&&u.emit(r)}return this}}function Si(t){Ai[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},Ai[t.on]=Ci({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Ai[t.off]=Ci({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Si({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Si({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),Si({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Si({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Ai.deselect=Ai.unselect,Ai.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Si({field:"active",on:"activate",off:"unactivate"}),Ai.inactive=function(){var t=this[0];if(t)return!t._private.active};var Ti={},Mi=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target();if(t.noIncomingEdges&&c===i&&u!==i||t.noOutgoingEdges&&u===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)}},Ni=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target();t.outgoing&&l===i?(n.push(s),n.push(u)):t.incoming&&u===i&&(n.push(s),n.push(l))}}return this.spawn(n,{unique:!0}).filter(e)}},Di=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();i[u]||(i[u]=!0,r.push(l),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(e)}};function Ii(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,{unique:!0}).filter(e)}}function Oi(t){return function(e){var n=[],r=this._private.cy,i=t||{};h(e)&&(e=r.$(e));for(var o=0;o<e.length;o++)for(var a=e[o]._private.edges,s=0;s<a.length;s++){var l=a[s],u=l._private.data,c=this.hasElementWithId(u.source)&&e.hasElementWithId(u.target),f=e.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||f){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!f)continue}n.push(l)}}return this.spawn(n,{unique:!0})}}function Li(t){return t=I({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,l=s._private.data.id,u=a.data.target,c=s._private.edges,f=0;f<c.length;f++){var h=c[f],d=h._private.data,p=d.target,g=d.source,v=p===u&&g===l;(i.codirected&&v||!i.codirected&&(v||l===p&&u===g))&&n.push(h)}return this.spawn(n,{unique:!0}).filter(e)}}Ti.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},I(Ti,{roots:Mi({noIncomingEdges:!0}),leaves:Mi({noOutgoingEdges:!0}),outgoers:pr(Ni({outgoing:!0}),"outgoers"),successors:Di({outgoing:!0}),incomers:pr(Ni({incoming:!0}),"incomers"),predecessors:Di({incoming:!0})}),I(Ti,{neighborhood:pr(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,{unique:!0}).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Ti.neighbourhood=Ti.neighborhood,Ti.closedNeighbourhood=Ti.closedNeighborhood,Ti.openNeighbourhood=Ti.openNeighborhood,I(Ti,{source:pr(function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e},"source"),target:pr(function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e},"target"),sources:Ii({attr:"source"}),targets:Ii({attr:"target"})}),I(Ti,{edgesWith:pr(Oi(),"edgesWith"),edgesTo:pr(Oi({thisIsSrc:!0}),"edgesTo")}),I(Ti,{connectedEdges:pr(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++)e.push(i[o])}return this.spawn(e,{unique:!0}).filter(t)},"connectedEdges"),connectedNodes:pr(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)},"connectedNodes"),parallelEdges:pr(Li(),"parallelEdges"),codirectedEdges:pr(Li({codirected:!0}),"codirectedEdges")}),I(Ti,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),o=[];null!=t&&i.empty()&&(i=t.sources());var a=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var s=function(){var t=n.collection();o.push(t);var r=i[0];a(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return a(e,t)}}),t.forEach(function(e){e.connectedEdges().forEach(function(e){t.has(e.source())&&t.has(e.target())&&t.merge(e)})})};do{s()}while(i.length>0);return o},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Ti.componentsOf=Ti.components;var Pi=function(t,e,n){for(var r=null!=n?n:zt();t.hasElementWithId(r);)r=zt();return r},Bi=function(t,e,n){if(void 0!==t&&w(t)){var r=new It,i=!1;if(e){if(e.length>0&&g(e[0])&&!_(e[0])){i=!0;for(var o=[],a=new Lt,s=0,l=e.length;s<l;s++){var u=e[s];null==u.data&&(u.data={});var c=u.data;if(null==c.id)c.id=Pi(t);else if(t.hasElementWithId(c.id)||a.has(c.id))continue;var f=new Pt(t,u,!1);o.push(f),a.add(c.id)}e=o}}else e=[];this.length=0;for(var h=0,d=e.length;h<d;h++){var p=e[h];if(null!=p){var v=p._private.data.id;(null==n||n.unique&&!r.has(v))&&(r.set(v,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={cy:t,map:r},i&&this.restore()}else wt("A collection must have a reference to the core")},Fi=Pt.prototype=Bi.prototype;Fi.instanceString=function(){return"collection"},Fi.spawn=function(t,e,n){return w(t)||(n=e,e=t,t=this.cy()),new Bi(t,e,n)},Fi.spawnSelf=function(){return this.spawn(this)},Fi.cy=function(){return this._private.cy},Fi.renderer=function(){return this._private.cy.renderer()},Fi.element=function(){return this[0]},Fi.collection=function(){return b(this)?this:new Bi(this._private.cy,[this])},Fi.unique=function(){return new Bi(this._private.cy,this,{unique:!0})},Fi.hasElementWithId=function(t){return this._private.map.has(t)},Fi.getElementById=function(t){var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new Bi(e)},Fi.$id=Fi.getElementById,Fi.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Fi.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},Fi.indexOfId=function(t){return this._private.map.get(t).index},Fi.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(g(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,l=t.data.target;null!=s&&s!==i.source&&(a.source=s,o=!0),null!=l&&l!==i.target&&(a.target=l,o=!0),o&&(e=e.move(a))}else{var u=t.data.parent;null==u&&null==i.parent||u===i.parent||(void 0===u&&(u=null),e=e.move({parent:u}))}}t.position&&e.position(t.position);var c=function(n,i,o){var a=t[n];null!=a&&a!==r[n]&&(a?e[i]():e[o]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var f={data:Et(r.data),position:Et(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,classes:null};f.classes="";var h=0;return r.classes.forEach(function(t){return f.classes+=0==h++?t:" "+t}),f}}},Fi.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Fi.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Pt(t,r,!1);e.push(i)}return new Bi(t,e)},Fi.copy=Fi.clone,Fi.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.cy(),o=i._private,a=[],s=[],l=0,u=this.length;l<u;l++){var c=this[l];r&&!c.removed()||(c.isNode()?a.push(c):s.push(c))}t=a.concat(s);var f=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var d=t[e],p=d._private,g=p.data;if(d.clearTraversalCache(),r||p.removed)if(void 0===g.id)g.id=Pi(i);else if(v(g.id))g.id=""+g.id;else{if(k(g.id)||!h(g.id)){wt("Can not create element with invalid string ID `"+g.id+"`"),f();continue}if(i.hasElementWithId(g.id)){wt("Can not create second element with ID `"+g.id+"`"),f();continue}}var m=g.id;if(d.isNode()){var y=p.position;null==y.x&&(y.x=0),null==y.y&&(y.y=0)}if(d.isEdge()){for(var _=d,b=["source","target"],w=b.length,x=!1,E=0;E<w;E++){var z=b[E],A=g[z];v(A)&&(A=g[z]=""+g[z]),null==A||""===A?(wt("Can not create edge `"+m+"` with unspecified "+z),x=!0):i.hasElementWithId(A)||(wt("Can not create edge `"+m+"` with nonexistant "+z+" `"+A+"`"),x=!0)}if(x){f();continue}var C=i.getElementById(g.source),S=i.getElementById(g.target);C._private.edges.push(_),S._private.edges.push(_),_._private.source=C,_._private.target=S}p.map=new It,p.map.set(m,{ele:d,index:0}),p.removed=!1,r&&i.addToPool(d)}for(var T=0;T<a.length;T++){var M=a[T],N=M._private.data;v(N.parent)&&(N.parent=""+N.parent);var D=N.parent;if(null!=D){var I=i.getElementById(D);if(I.empty())N.parent=void 0;else{for(var O=!1,L=I;!L.empty();){if(M.same(L)){O=!0,N.parent=void 0;break}L=L.parent()}O||(I[0]._private.children.push(M),M._private.parent=I[0],o.hasCompoundNodes=!0)}}}if(t.length>0){for(var P=new Bi(i,t),B=0;B<P.length;B++){var F=P[B];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}(o.hasCompoundNodes?i.collection().merge(P).merge(P.connectedNodes()).merge(P.parent()):P).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?P.emitAndNotify("add"):r&&P.emit("add")}return this},Fi.removed=function(){var t=this[0];return t&&t._private.removed},Fi.inside=function(){var t=this[0];return t&&!t._private.removed},Fi.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r={},i=this._private.cy;function o(t){var i=r[t.id()];e&&t.removed()||i||(r[t.id()]=!0,t.isNode()?(n.push(t),function(t){for(var e=t._private.edges,n=0;n<e.length;n++)o(e[n])}(t),function(t){for(var e=t._private.children,n=0;n<e.length;n++)o(e[n])}(t)):n.unshift(t))}for(var a=0,s=this.length;a<s;a++)o(this[a]);function l(t,e){Tt(t._private.edges,e),t.clearTraversalCache()}function u(t){t.clearTraversalCache()}var c=[];function f(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();Tt(n,e),e._private.parent=null,c.ids[r]||(c.ids[r]=!0,c.push(t))}c.ids={},this.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var h=0;h<n.length;h++){var d=n[h];if(d.isEdge()){var p=d.source()[0],g=d.target()[0];l(p,d),l(g,d);for(var v=d.parallelEdges(),m=0;m<v.length;m++){var y=v[m];u(y),y.isBundledBezier()&&y.dirtyBoundingBoxCache()}}else{var _=d.parent();0!==_.length&&f(_,d)}e&&(d._private.removed=!0)}var b=i._private.elements;i._private.hasCompoundNodes=!1;for(var w=0;w<b.length;w++)if(b[w].isParent()){i._private.hasCompoundNodes=!0;break}var x=new Bi(this.cy(),n);x.size()>0&&(t?x.emitAndNotify("remove"):e&&x.emit("remove"));for(var k=0;k<c.length;k++){var E=c[k];e&&E.removed()||E.updateStyle()}return x},Fi.move=function(t){var e=this._private.cy,n=this;if(void 0!==t.source||void 0!==t.target){var r=t.source,i=t.target,o=null!=r&&e.hasElementWithId(r),a=null!=i&&e.hasElementWithId(i);(o||a)&&(e.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],s=e._private.data;e.isEdge()&&(o&&(s.source=r),a&&(s.target=i))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==t.parent){var s=t.parent;if(null===s||e.hasElementWithId(s)){var l=null===s?void 0:s;e.batch(function(){var t=n.remove(!1,!1);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var r=n[e],i=r._private.data;r.isNode()&&(i.parent=l)}t.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[Bn,Xn,Kn,fr,gr,xr,kr,Gr,ui,ci,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},di,gi,_i,Ai,Ti].forEach(function(t){I(Fi,t)});var ji={add:function(t){var e,n=this;if(y(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],o=0;o<r.length;o++)i.push(r[o].json());e=new Bi(n,i)}}else if(p(t))e=new Bi(n,t);else if(g(t)&&(p(t.nodes)||p(t.edges))){for(var a=t,s=[],l=["nodes","edges"],u=0,c=l.length;u<c;u++){var f=l[u],h=a[f];if(p(h))for(var d=0,v=h.length;d<v;d++){var m=I({group:f},h[d]);s.push(m)}}e=new Bi(n,s)}else e=new Pt(n,t).collection();return e},remove:function(t){return y(t)||h(t)&&(t=this.$(t)),t.remove()}},Ri=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+1/6*(i.dx+2*(o.dx+a.dx)+s.dx)*r,n.v=n.v+l*r,n}return function t(e,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,l.tension=e,l.friction=r,a=(o=null!==i)?(c=t(e,r))/i*.016:.016;s=n(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(t){return u[t*(u.length-1)|0]}:c}}(),Hi=function(t,e,n,r){var i=function(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,l=11,u=1/(l-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var f=0;f<4;++f)if("number"!=typeof arguments[f]||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var h=c?new Float32Array(l):new Array(l);function d(t,e){return 1-3*e+3*t}function p(t,e){return 3*e-6*t}function g(t){return 3*t}function v(t,e,n){return((d(e,n)*t+p(e,n))*t+g(e))*t}function m(t,e,n){return 3*d(e,n)*t*t+2*p(e,n)*t+g(e)}function y(e){for(var r=0,c=1,f=l-1;c!==f&&h[c]<=e;++c)r+=u;var d=r+(e-h[--c])/(h[c+1]-h[c])*u,p=m(d,t,n);return p>=o?function(e,r){for(var o=0;o<i;++o){var a=m(r,t,n);if(0===a)return r;r-=(v(r,t,n)-e)/a}return r}(e,d):0===p?d:function(e,r,i){var o,l,u=0;do{(o=v(l=r+(i-r)/2,t,n)-e)>0?i=l:r=l}while(Math.abs(o)>a&&++u<s);return l}(e,r,r+u)}var _=!1,b=function(i){return _||(_=!0,t===e&&n===r||function(){for(var e=0;e<l;++e)h[e]=v(e*u,t,n)}()),t===e&&n===r?i:0===i?0:1===i?1:v(y(i),e,r)};b.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var w="generateBezier("+[t,e,n,r]+")";return b.toString=function(){return w},b}(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},qi={linear:function(t,e,n){return t+(e-t)*n},ease:Hi(.25,.1,.25,1),"ease-in":Hi(.42,0,1,1),"ease-out":Hi(0,0,.58,1),"ease-in-out":Hi(.42,0,.58,1),"ease-in-sine":Hi(.47,0,.745,.715),"ease-out-sine":Hi(.39,.575,.565,1),"ease-in-out-sine":Hi(.445,.05,.55,.95),"ease-in-quad":Hi(.55,.085,.68,.53),"ease-out-quad":Hi(.25,.46,.45,.94),"ease-in-out-quad":Hi(.455,.03,.515,.955),"ease-in-cubic":Hi(.55,.055,.675,.19),"ease-out-cubic":Hi(.215,.61,.355,1),"ease-in-out-cubic":Hi(.645,.045,.355,1),"ease-in-quart":Hi(.895,.03,.685,.22),"ease-out-quart":Hi(.165,.84,.44,1),"ease-in-out-quart":Hi(.77,0,.175,1),"ease-in-quint":Hi(.755,.05,.855,.06),"ease-out-quint":Hi(.23,1,.32,1),"ease-in-out-quint":Hi(.86,0,.07,1),"ease-in-expo":Hi(.95,.05,.795,.035),"ease-out-expo":Hi(.19,1,.22,1),"ease-in-out-expo":Hi(1,0,0,1),"ease-in-circ":Hi(.6,.04,.98,.335),"ease-out-circ":Hi(.075,.82,.165,1),"ease-in-out-circ":Hi(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return qi.linear;var r=Ri(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":Hi};function Wi(t,e,n,r,i){if(1===r)return n;var o=i(e,n,r);return null==t?o:((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max)),o)}function $i(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function Ui(t,e,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=$i(t,i),s=$i(e,i);if(v(a)&&v(s))return Wi(o,a,s,n,r);if(p(a)&&p(s)){for(var l=[],u=0;u<s.length;u++){var c=a[u],f=s[u];if(null!=c&&null!=f){var h=Wi(o,c,f,n,r);l.push(h)}else l.push(f)}return l}}function Vi(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,l=a.startTime,u=(r?t:t.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=qi.linear;else{var c,f,d;c=h(s)?u.parse("transition-timing-function",s).value:s,h(c)?(f=c,d=[]):(f=c[1],d=c.slice(2).map(function(t){return+t})),d.length>0?("spring"===f&&d.push(a.duration),a.easingImpl=qi[f].apply(null,d)):a.easingImpl=qi[f]}var p,g=a.easingImpl;if(p=0===a.duration?1:(n-l)/a.duration,a.applying&&(p=a.progress),p<0?p=0:p>1&&(p=1),null==a.delay){var v=a.startPosition,m=a.position;if(m&&i&&!t.locked()){var y={};Yi(v.x,m.x)&&(y.x=Ui(v.x,m.x,p,g)),Yi(v.y,m.y)&&(y.y=Ui(v.y,m.y,p,g)),t.position(y)}var _=a.startPan,b=a.pan,w=o.pan,x=null!=b&&r;x&&(Yi(_.x,b.x)&&(w.x=Ui(_.x,b.x,p,g)),Yi(_.y,b.y)&&(w.y=Ui(_.y,b.y,p,g)),t.emit("pan"));var k=a.startZoom,E=a.zoom,z=null!=E&&r;z&&(Yi(k,E)&&(o.zoom=Ui(k,E,p,g)),t.emit("zoom")),(x||z)&&t.emit("viewport");var A=a.style;if(A&&A.length>0&&i){for(var C=0;C<A.length;C++){var S=A[C],T=S.name,M=a.startStyle[T],N=Ui(M,S,p,g,u.properties[M.name]);u.overrideBypass(t,T,N)}t.emit("style")}}return a.progress=p,p}function Yi(t,e){return!(null==t||null==e||!(v(t)&&v(e)||t&&e))}function Xi(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function Ki(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,o=i.animation.current,a=i.animation.queue,s=!1;if(!n&&"none"===e.pstyle("display").value){o=o.splice(0,o.length).concat(a.splice(0,a.length));for(var l=0;l<o.length;l++)o[l].stop()}if(0===o.length){var u=a.shift();u&&o.push(u)}for(var c=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},f=o.length-1;f>=0;f--){var h=o[f],d=h._private;d.stopped?(o.splice(f,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||Xi(0,h,t),Vi(e,h,t,n),d.applying&&(d.applying=!1),c(d.frames),null!=d.step&&d.step(t),h.completed()&&(o.splice(f,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.completes)),s=!0)}return n||0!==o.length||0!==a.length||r.push(e),s}for(var o=!1,a=0;a<n.length;a++){var s=i(n[a]);o=o||s}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var Gi={animate:Yn.animate(),animation:Yn.animation(),animated:Yn.animated(),clearQueue:Yn.clearQueue(),delay:Yn.delay(),delayAnimation:Yn.delayAnimation(),stop:Yn.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender(function(e,n){Ki(n,t)},e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&ot(function(n){Ki(n,t),e()})}()}}},Zi={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&_(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},Qi=function(t){return h(t)?new ur(t):t},Ji={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new ri(Zi,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,Qi(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,Qi(e),n),this},one:function(t,e,n){return this.emitter().one(t,Qi(e),n),this},once:function(t,e,n){return this.emitter().one(t,Qi(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};Yn.eventAliasesOn(Ji);var to={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};to.jpeg=to.jpg;var eo={layout:function(t){if(null!=t)if(null!=t.name){var e,n=t.name,r=this.extension("layout",n);if(null!=r)return e=h(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$(),new r(I({},t,{cy:this,eles:e}));wt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else wt("A `name` must be specified to make a layout");else wt("Layout options must be specified to make a layout")}};eo.createLayout=eo.makeLayout=eo.layout;var no={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.isDestroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach(function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}})}},ro=St({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),io={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);if(null!=e){void 0!==t.wheelSensitivity&&kt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=ro(t);n.cy=this,this._private.renderer=new e(n),this.notify("init")}else wt("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};io.invalidateDimensions=io.resize;var oo={collection:function(t,e){return h(t)?this.$(t):y(t)?t.collection():p(t)?new Bi(this,t,e):new Bi(this)},nodes:function(t){var e=this.$(function(t){return t.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(t){return t.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};oo.elements=oo.filter=oo.$;var ao={apply:function(t){var e=this._private,n=e.cy.collection();e.newStyle&&(e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0));for(var r=0;r<t.length;r++){var i=t[r],o=this.getContextMeta(i);if(!o.empty){var a=this.getContextStyle(o),s=this.applyContextStyle(o,a,i);e.newStyle||this.updateTransitions(i,s.diffProps),this.updateStyleHints(i)&&n.merge(i)}}return e.newStyle=!1,n},getPropertiesDiff:function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var o=[],a={},s=0;s<this.length;s++){var l=this[s],u="t"===e[s],c="t"===t[s]!==u,f=l.mappedProperties.length>0;if(c||u&&f){var h=void 0;c&&f?h=l.properties:c?h=l.properties:f&&(h=l.mappedProperties);for(var d=0;d<h.length;d++){for(var p=h[d],g=p.name,v=!1,m=s+1;m<this.length&&("t"!==e[m]||!(v=null!=this[m].properties[p.name]));m++);a[g]||v||(a[g]=!0,o.push(g))}}}return n[r]=o,o},getContextMeta:function(t){var e,n="",r=t._private.styleCxtKey||"";this._private.newStyle&&(r="");for(var i=0;i<this.length;i++){var o=this[i];n+=o.selector&&o.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},getContextStyle:function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if("t"===e[i])for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[e]=r,r},applyContextStyle:function(t,e,n){for(var r=t.diffPropNames,i={},o=this.types,a=0;a<r.length;a++){var s=r[a],l=e[s],u=n.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===o.fn&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(n))===c.prevFnValue)continue}var f=i[s]={prev:u};this.applyParsedProperty(n,l),f.next=n.pstyle(s),f.next&&f.next.bypass&&(f.next=f.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(t){var e,n=t._private,r=this,i=r.propertyGroupKeys,o=function(t,e,n){return r.getPropertiesHash(t,e,n)},a=n.styleKey;if(t.removed())return!1;var s="nodes"===n.group,l=t._private.style;e=Object.keys(l);for(var u=0;u<i.length;u++)n.styleKeys[i[u]]=0;for(var c=function(t,e){return n.styleKeys[e]=lt(t,n.styleKeys[e])},f=function(t){return-128<t&&t<128&&Math.floor(t)!==t?-(1024*t|0):t},h=0;h<e.length;h++){var d=e[h],p=l[d];if(null!=p){var g=this.properties[d],v=g.type,m=g.groupKey;if(v.number){var y=null!=p.pfValue?p.pfValue:p.value;if(v.multiple)for(var _=0;_<y.length;_++)c(f(y[_]),m);else c(f(y),m)}else for(var b=p.strValue,w=0;w<b.length;w++)c(b.charCodeAt(w),m)}}for(var x=0,k=0;k<i.length;k++)x=lt(n.styleKeys[i[k]],x);n.styleKey=x;var E=n.labelDimsKey=n.styleKeys.labelDimensions;if(n.labelKey=o(t,["label"],E),n.labelStyleKey=lt(n.styleKeys.commonLabel,n.labelKey),s||(n.sourceLabelKey=o(t,["source-label"],E),n.sourceLabelStyleKey=lt(n.styleKeys.commonLabel,n.sourceLabelKey),n.targetLabelKey=o(t,["target-label"],E),n.targetLabelStyleKey=lt(n.styleKeys.commonLabel,n.targetLabelKey)),s){var z=n.styleKeys,A=z.pie;n.nodeKey=ut([z.nodeBorder,z.backgroundImage,z.compound,A],z.nodeBody),n.hasPie=0!=A}return a!==n.styleKey},clearStyleHints:function(t){var e=t._private;e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},applyParsedProperty:function(t,e){var n,r=this,i=e,o=t._private.style,a=r.types,s=r.properties[i.name].type,l=i.bypass,u=o[i.name],c=u&&u.bypass,f=t._private,h=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},d=function(){var e=h(u),n=h(i);r.checkTriggers(t,i.name,e,n)};if("curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",l)),i.delete)return o[i.name]=void 0,d(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,d(),!0):(d(),!0);if(i.deleteBypass)return u?!!u.bypass&&(o[i.name]=u.bypassed,d(),!0):(d(),!0);var p=function(){kt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var g,m=i.field.split("."),y=f.data,_=0;_<m.length&&y;_++)y=y[m[_]];if(null==y)return p(),!1;if(!v(y))return kt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((g=0===b?0:(y-i.fieldMin)/b)<0?g=0:g>1&&(g=1),s.color){var w=i.valueMin[0],x=i.valueMin[1],k=i.valueMax[1],E=i.valueMin[2],z=i.valueMax[2],A=null==i.valueMin[3]?1:i.valueMin[3],C=null==i.valueMax[3]?1:i.valueMax[3],S=[Math.round(w+(i.valueMax[0]-w)*g),Math.round(x+(k-x)*g),Math.round(E+(z-E)*g),Math.round(A+(C-A)*g)];n={bypass:i.bypass,name:i.name,value:S,strValue:"rgb("+S[0]+", "+S[1]+", "+S[2]+")"}}else{if(!s.number)return!1;n=this.parse(i.name,i.valueMin+(i.valueMax-i.valueMin)*g,i.bypass,"mapping")}if(!n)return p(),!1;n.mapping=i,i=n;break;case a.data:for(var T=i.field.split("."),M=f.data,N=0;N<T.length&&M;N++)M=M[T[N]];if(null!=M&&(n=this.parse(i.name,M,i.bypass,"mapping")),!n)return p(),!1;n.mapping=i,i=n;break;case a.fn:var D=null!=i.fnValue?i.fnValue:(0,i.value)(t);if(i.prevFnValue=D,null==D)return kt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,D,i.bypass,"mapping")))return kt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=Et(i),i=n;break;case void 0:break;default:return!1}return l?(i.bypassed=c?u.bypassed:u,o[i.name]=i):c?u.bypassed=i:o[i.name]=i,d(),!0},cleanElements:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else r._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],f=t.pstyle(c),h=e[c];if(h){var d=h.prev,g=null!=h.next?h.next:f,m=!1,y=void 0;d&&(v(d.pfValue)&&v(g.pfValue)?y=d.pfValue+1e-6*(m=g.pfValue-d.pfValue):v(d.value)&&v(g.value)?y=d.value+1e-6*(m=g.value-d.value):p(d.value)&&p(g.value)&&(m=d.value[0]!==g.value[0]||d.value[1]!==g.value[1]||d.value[2]!==g.value[2],y=d.strValue),m&&(s[c]=g.strValue,this.applyBypass(t,c,y),l=!0))}}if(!l)return;r.transitioning=!0,new $n(function(e){a>0?t.delayAnimation(a).play().promise().then(e):e()}).then(function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},checkTrigger:function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);null!=s&&s(n,r)&&o(a)},checkZOrderTrigger:function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(t){return t.triggersZOrder},function(){i._private.cy.notify("zorder",t)})},checkBoundsTrigger:function(t,e,n,r){this.checkTrigger(t,e,n,r,function(t){return t.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"bezier"!==t.pstyle("curve-style").value&&("curve-style"!==e||"bezier"!==n&&"bezier"!==r)||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach(function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()})})},checkTriggers:function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)}},so={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var o=0;o<this.properties.length;o++){var a=this.parse(this.properties[o].name,n,!0);a&&i.push(a)}}else if(h(e)){var s=this.parse(e,n,!0);s&&i.push(s)}else{if(!g(e))return!1;var l=e;r=n;for(var u=Object.keys(l),c=0;c<u.length;c++){var f=u[c],d=l[f];if(void 0===d&&(d=l[S(f)]),void 0!==d){var p=this.parse(f,d,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var v=!1,m=0;m<t.length;m++){for(var y=t[m],_={},b=void 0,w=0;w<i.length;w++){var x=i[w];if(r){var k=y.pstyle(x.name);b=_[x.name]={prev:k}}v=this.applyParsedProperty(y,x)||v,r&&(b.next=y.pstyle(x.name))}v&&this.updateStyleHints(y),r&&this.updateTransitions(y,_,!0)}return v},overrideBypass:function(t,e,n){e=C(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,l=a.mutiple,u=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=s?"rgb("+n.join(",")+")":l?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,u,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),f=o[l.name]={prev:u};this.applyParsedProperty(i,c),f.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}},lo={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(o&&e&&o.getComputedStyle)return o.getComputedStyle(e).getPropertyValue(t)}},uo={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],o=this.getStylePropertyValue(t,i.name,e);null!=o&&(n[i.name]=o,n[S(i.name)]=o)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,o=t.pstyle(r.name);if(o){var a=o.value,s=o.units,l=o.strValue;if(n&&i.number&&null!=a&&v(a)){var u=t.cy().zoom(),c=function(t){return t*u},f=function(t,e){return c(t)+e},d=p(a);return(d?s.every(function(t){return null!=t}):null!=s)?d?a.map(function(t,e){return f(t,s[e])}).join(" "):f(a,s):d?a.map(function(t){return h(t)?t:""+c(t)}).join(" "):""+c(a)}if(null!=l)return l}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,o=t.pstyle(i);void 0!==o&&(o=g(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a],l=r[a]||r[C(a)],u=this.parse(l.name,s);u&&e.push(u)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,o,a,s,l=n;for(a=0;a<e.length;a++)if(null!=(r=t.pstyle(e[a],!1)))if(null!=r.pfValue)l=lt(o,l);else for(i=r.strValue,s=0;s<i.length;s++)o=i.charCodeAt(s),l=lt(o,l);return l}};uo.getPropertiesHash=uo.getNonDefaultPropertiesHash;var co={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,o=Object.keys(i);this.selector(r);for(var a=0;a<o.length;a++){var s=o[a];this.css(s,i[s])}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}},fo={appendFromString:function(t){var e,n,r,i=""+t;function o(){i=i.length>e.length?i.substr(e.length):""}function a(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[\/][*](\s|.)+?[*][\/]/g,"");!i.match(/^\s*$/);){var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){kt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}e=s[0];var l=s[1];if("core"!==l&&new ur(l).invalid)kt("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),o();else{var u=s[2],c=!1;n=u;for(var f=[];!n.match(/^\s*$/);){var h=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!h){kt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}r=h[0];var d=h[1],p=h[2];this.properties[d]?this.parse(d,p)?(f.push({name:d,val:p}),a()):(kt("Skipping property: Invalid property definition in: "+r),a()):(kt("Skipping property: Invalid property name in: "+r),a())}if(c){o();break}this.selector(l);for(var g=0;g<f.length;g++){var v=f[g];this.css(v.name,v.val)}o()}}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},ho={};!function(){var t=N,e=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(e){var n=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+n+")\\s*\\,\\s*("+n+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];ho.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","square","pentagon","hexagon","concavehexagon","concave-hexagon","heptagon","octagon","tag","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return h(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]}};var i={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||0==t&&0!=e||0!=t&&0==e},any:function(t,e){return t!=e}},o=ho.types,a=[{name:"label",type:o.text,triggersBounds:i.any},{name:"text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any}],s=[{name:"source-label",type:o.text,triggersBounds:i.any},{name:"source-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:o.size,triggersBounds:i.any}],l=[{name:"target-label",type:o.text,triggersBounds:i.any},{name:"target-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:o.size,triggersBounds:i.any}],u=[{name:"font-family",type:o.fontFamily,triggersBounds:i.any},{name:"font-style",type:o.fontStyle,triggersBounds:i.any},{name:"font-weight",type:o.fontWeight,triggersBounds:i.any},{name:"font-size",type:o.size,triggersBounds:i.any},{name:"text-transform",type:o.textTransform,triggersBounds:i.any},{name:"text-wrap",type:o.textWrap,triggersBounds:i.any},{name:"text-max-width",type:o.size,triggersBounds:i.any},{name:"text-outline-width",type:o.size,triggersBounds:i.any}],c=[{name:"text-valign",type:o.valign,triggersBounds:i.any},{name:"text-halign",type:o.halign,triggersBounds:i.any},{name:"color",type:o.color},{name:"text-outline-color",type:o.color},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-background-color",type:o.color},{name:"text-background-opacity",type:o.zeroOneNumber},{name:"text-background-padding",type:o.size,triggersBounds:i.any},{name:"text-border-opacity",type:o.zeroOneNumber},{name:"text-border-color",type:o.color},{name:"text-border-width",type:o.size,triggersBounds:i.any},{name:"text-border-style",type:o.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:o.textBackgroundShape,triggersBounds:i.any}],f=[{name:"events",type:o.bool},{name:"text-events",type:o.bool}],d=[{name:"display",type:o.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:o.visibility,triggersZOrder:i.any},{name:"opacity",type:o.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:o.zeroOneNumber},{name:"min-zoomed-font-size",type:o.size},{name:"z-compound-depth",type:o.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:o.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:o.nonNegativeInt,triggersZOrder:i.any}],p=[{name:"overlay-padding",type:o.size,triggersBounds:i.any},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero}],g=[{name:"transition-property",type:o.propList},{name:"transition-duration",type:o.time},{name:"transition-delay",type:o.time},{name:"transition-timing-function",type:o.easing}],v=[{name:"height",type:o.nodeSize,triggersBounds:i.any},{name:"width",type:o.nodeSize,triggersBounds:i.any},{name:"shape",type:o.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:o.polygonPointList,triggersBounds:i.any},{name:"background-color",type:o.color},{name:"background-fill",type:o.fill},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-blacken",type:o.nOneOneNumber},{name:"background-gradient-stop-colors",type:o.colors},{name:"background-gradient-stop-positions",type:o.percentages},{name:"background-gradient-direction",type:o.gradientDirection},{name:"padding",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:o.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:o.size,triggersBounds:i.any}],m=[{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size,triggersBounds:i.any},{name:"border-style",type:o.borderStyle}],y=[{name:"background-image",type:o.urls},{name:"background-image-crossorigin",type:o.bgCrossOrigin},{name:"background-image-opacity",type:o.zeroOneNumbers},{name:"background-position-x",type:o.bgPos},{name:"background-position-y",type:o.bgPos},{name:"background-width-relative-to",type:o.bgRelativeTo},{name:"background-height-relative-to",type:o.bgRelativeTo},{name:"background-repeat",type:o.bgRepeat},{name:"background-fit",type:o.bgFit},{name:"background-clip",type:o.bgClip},{name:"background-width",type:o.bgWH},{name:"background-height",type:o.bgWH},{name:"background-offset-x",type:o.bgPos},{name:"background-offset-y",type:o.bgPos}],_=[{name:"position",type:o.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:o.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:o.size,triggersBounds:i.any},{name:"min-width-bias-left",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:o.size,triggersBounds:i.any},{name:"min-height-bias-top",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:o.sizeMaybePercent,triggersBounds:i.any}],b=[{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"line-fill",type:o.fill},{name:"line-cap",type:o.lineCap},{name:"line-dash-pattern",type:o.numbers},{name:"line-dash-offset",type:o.number},{name:"line-gradient-stop-colors",type:o.colors},{name:"line-gradient-stop-positions",type:o.percentages},{name:"curve-style",type:o.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:o.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:o.size,triggersBounds:i.any},{name:"control-point-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:o.numbers,triggersBounds:i.any},{name:"taxi-turn",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:o.size,triggersBounds:i.any},{name:"taxi-direction",type:o.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:o.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:o.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:o.angle,triggersBounds:i.any},{name:"loop-sweep",type:o.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:o.size,triggersBounds:i.any},{name:"target-distance-from-node",type:o.size,triggersBounds:i.any}],w=[{name:"ghost",type:o.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:o.zeroOneNumber}],x=[{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size},{name:"outside-texture-bg-color",type:o.color},{name:"outside-texture-bg-opacity",type:o.zeroOneNumber}],k=[];ho.pieBackgroundN=16,k.push({name:"pie-size",type:o.sizeMaybePercent});for(var E=1;E<=ho.pieBackgroundN;E++)k.push({name:"pie-"+E+"-background-color",type:o.color}),k.push({name:"pie-"+E+"-background-size",type:o.percent}),k.push({name:"pie-"+E+"-background-opacity",type:o.zeroOneNumber});var z=[],A=ho.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:o.arrowShape},{name:"arrow-color",type:o.color},{name:"arrow-fill",type:o.arrowFill}].forEach(function(t){A.forEach(function(e){z.push({name:e+"-"+t.name,type:t.type})})},{});var C=ho.properties=[].concat(f,g,d,p,w,c,u,a,s,l,v,m,y,k,_,b,z,x),S=ho.propertyGroups={behavior:f,transition:g,visibility:d,overlay:p,ghost:w,commonLabel:c,labelDimensions:u,mainLabel:a,sourceLabel:s,targetLabel:l,nodeBody:v,nodeBorder:m,backgroundImage:y,pie:k,compound:_,edgeLine:b,edgeArrow:z,core:x},T=ho.propertyGroupNames={};(ho.propertyGroupKeys=Object.keys(S)).forEach(function(t){T[t]=S[t].map(function(t){return t.name}),S[t].forEach(function(e){return e.groupKey=t})});var M=ho.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];ho.propertyNames=C.map(function(t){return t.name});for(var D=0;D<C.length;D++){var I=C[D];C[I.name]=I}for(var O=0;O<M.length;O++){var L=M[O],P={name:L.name,alias:!0,pointsTo:C[L.pointsTo]};C.push(P),C[L.name]=P}}(),ho.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},ho.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=I({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(t,e){for(var n=1;n<=ho.pieBackgroundN;n++)t[e.name.replace("{{i}}",n)]=e.value;return t},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(t,e){return ho.arrowPrefixes.forEach(function(n){t[n+"-"+e.name]=e.value}),t},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=this.parse(o,e[o]);n[o]=a}}return t.defaultProperties=n,t.defaultProperties},ho.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var po={parse:function(t,e,n,r){if(d(e))return this.parseImplWarn(t,e,n,r);var i,o=ft(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),a=this.propCache=this.propCache||[];return(i=a[o])||(i=a[o]=this.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(i=Et(i))&&(i.value=Et(i.value)),i},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||kt("The style property `".concat(t,": ").concat(e,"` is invalid")),i},parseImpl:function(t,e,n,r){t=C(t);var i=this.properties[t],o=e,a=this.types;if(!i)return null;if(void 0===e)return null;i.alias&&(t=(i=i.pointsTo).name);var s=h(e);s&&(e=e.trim());var l,u,c=i.type;if(!c)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(d(e))return{name:t,value:e,strValue:"fn",mapped:a.fn,bypass:n};if(!s||r||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(l=new RegExp(a.data.regex).exec(e)))return!n&&{name:t,value:l,strValue:""+e,mapped:a.data,field:l[1],bypass:n};if(e.length>=10&&"m"===e[0]&&(u=new RegExp(a.mapData.regex).exec(e))){if(n)return!1;if(c.multiple)return!1;var f=a.mapData;if(!c.color&&!c.number)return!1;var g=this.parse(t,u[4]);if(!g||g.mapped)return!1;var m=this.parse(t,u[5]);if(!m||m.mapped)return!1;if(g.pfValue===m.pfValue||g.strValue===m.strValue)return kt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+g.strValue+"`"),this.parse(t,g.strValue);if(c.color){var y=g.value,_=m.value;if(!(y[0]!==_[0]||y[1]!==_[1]||y[2]!==_[2]||y[3]!==_[3]&&(null!=y[3]&&1!==y[3]||null!=_[3]&&1!==_[3])))return!1}return{name:t,value:u,strValue:""+e,mapped:f,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:g.value,valueMax:m.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var b;if(b=s?e.split(/\s+/):p(e)?e:[e],c.evenMultiple&&b.length%2!=0)return null;for(var w=[],x=[],k=[],E="",z=!1,A=0;A<b.length;A++){var S=this.parse(t,b[A],n,"multiple");z=z||h(S.value),w.push(S.value),k.push(null!=S.pfValue?S.pfValue:S.value),x.push(S.units),E+=(A>0?" ":"")+S.strValue}return c.validate&&!c.validate(w,x)?null:c.singleEnum&&z?1===w.length&&h(w[0])?{name:t,value:w[0],strValue:w[0],bypass:n}:null:{name:t,value:w,pfValue:k,strValue:E,bypass:n,units:x}}var T,M=function(){for(var r=0;r<c.enums.length;r++)if(c.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(c.number){var D,I="px";if(c.units&&(D=c.units),c.implicitUnits&&(I=c.implicitUnits),!c.unitless)if(s){var L="px|em"+(c.allowPercent?"|\\%":"");D&&(L=D);var P=e.match("^("+N+")("+L+")?$");P&&(e=P[1],D=P[2]||I)}else D&&!c.implicitUnits||(D=I);if(e=parseFloat(e),isNaN(e)&&void 0===c.enums)return null;if(isNaN(e)&&void 0!==c.enums)return e=o,M();if(c.integer&&(!v(T=e)||Math.floor(T)!==T))return null;if(void 0!==c.min&&(e<c.min||c.strictMin&&e===c.min)||void 0!==c.max&&(e>c.max||c.strictMax&&e===c.max))return null;var B={name:t,value:e,strValue:""+e+(D||""),units:D,bypass:n};return B.pfValue=c.unitless||"px"!==D&&"em"!==D?e:"px"!==D&&D?this.getEmSizeInPixels()*e:e,"ms"!==D&&"s"!==D||(B.pfValue="ms"===D?e:1e3*e),"deg"!==D&&"rad"!==D||(B.pfValue="rad"===D?e:Math.PI*e/180),"%"===D&&(B.pfValue=e/100),B}if(c.propList){var F=[],j=""+e;if("none"===j);else{for(var R=j.split(/\s*,\s*|\s+/),H=0;H<R.length;H++){var q=R[H].trim();this.properties[q]?F.push(q):kt("`"+q+"` is not a valid property name")}if(0===F.length)return null}return{name:t,value:F,strValue:0===F.length?"none":F.join(" "),bypass:n}}if(c.color){var W=O(e);return W?{name:t,value:W,pfValue:W,strValue:"rgb("+W[0]+","+W[1]+","+W[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var $=M();if($)return $}for(var U=c.regexes?c.regexes:[c.regex],V=0;V<U.length;V++){var Y=new RegExp(U[V]).exec(e);if(Y)return{name:t,value:c.singleRegexMatchValue?Y[1]:Y,strValue:""+e,bypass:n}}return null}return c.string?{name:t,value:""+e,strValue:""+e,bypass:n}:c.enums?M():null}},go=function t(e){if(!(this instanceof t))return new t(e);w(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):wt("A style must have a core reference")},vo=go.prototype;vo.instanceString=function(){return"style"},vo.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},vo.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},vo.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},vo.selector=function(t){var e="core"===t?null:new ur(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},vo.css=function(){var t=arguments;if(1===t.length)for(var e=t[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=e[r.name];void 0===i&&(i=e[S(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},vo.style=vo.css,vo.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},vo.append=function(t){return x(t)?t.appendToStyle(this):p(t)?this.appendFromJson(t):h(t)&&this.appendFromString(t),this},go.fromJson=function(t,e){var n=new go(t);return n.fromJson(e),n},go.fromString=function(t,e){return new go(t).fromString(e)},[ao,so,lo,uo,co,fo,ho,po].forEach(function(t){I(vo,t)}),go.types=vo.types,go.properties=vo.properties,go.propertyGroups=vo.propertyGroups,go.propertyGroupNames=vo.propertyGroupNames,go.propertyGroupKeys=vo.propertyGroupKeys;var mo={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return e.style=x(t)?t.generateStyle(this):p(t)?go.fromJson(this,t):h(t)?go.fromString(this,t):go(this),e.style}},yo={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(h(o[0]))return a[t=o[0]];if(g(o[0])){if(!this._private.panningEnabled)return this;r=(n=o[0]).x,i=n.y,v(r)&&(a.x=r),v(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[1],"x"!==(t=o[0])&&"y"!==t||!v(e)||(a[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,o,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:g(t)&&(o=(i=s[0]).x,a=i.y,v(o)&&(l.x+=o),v(a)&&(l.y+=a),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!v(r)||(l[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){var n,r;if(v(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled&&(h(t)?t=this.$(t):g(r=t)&&v(r.x1)&&v(r.x2)&&v(r.y1)&&v(r.y2)?((n={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):y(t)||(t=this.mutableElements()),!y(t)||!t.empty())){n=n||t.boundingBox();var i,o=this.width(),a=this.height();if(e=v(e)?e:0,!isNaN(o)&&!isNaN(a)&&o>0&&a>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:i=(i=(i=Math.min((o-2*e)/n.w,(a-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i,pan:{x:(o-i*(n.x1+n.x2))/2,y:(a-i*(n.y1+n.y2))/2}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return v(t)&&v(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):v(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:v(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,o=r.zoom,a=!1;return r.zoomingEnabled||(a=!0),v(t)?n=t:g(t)&&(n=t.level,null!=t.position?e=Jt(t.position,o,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(a=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,!a&&v(n)&&n!==o&&(null==e||v(e.x)&&v(e.y))?null!=e?{zoomed:!0,panned:!0,zoom:n,pan:{x:-n/o*(e.x-i.x)+e.x,y:-n/o*(e.y-i.y)+e.y}}:{zoomed:!0,panned:!1,zoom:n,pan:i}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!t)return this;if(v(t.zoom)||(n=!1),g(t.pan)||(r=!1),!n&&!r)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=s,i.push("zoom"))}if(r&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;v(l.x)&&(e.pan.x=l.x,a=!1),v(l.y)&&(e.pan.y=l.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(h(t)){var n=t;t=this.mutableElements().filter(n)}else y(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),o=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(o-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=o.getComputedStyle(r),{width:r.clientWidth-(e=function(e){return parseFloat(t.getPropertyValue(e))})("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};yo.centre=yo.center,yo.autolockNodes=yo.autolock,yo.autoungrabifyNodes=yo.autoungrabify;var _o=function(t){var e=this,n=(t=I({},t)).container;n&&!m(n)&&m(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var a=void 0!==o&&void 0!==n&&!t.headless,s=t;s.layout=I({name:a?"grid":"null"},s.layout),s.renderer=I({name:a?"canvas":"null"},s.renderer);var l=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},u=this._private={container:n,ready:!1,options:s,elements:new Bi(this),listeners:[],aniEles:new Bi(this),scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:void 0===s.styleEnabled?a:s.styleEnabled,zoom:v(s.zoom)?s.zoom:1,pan:{x:g(s.pan)&&v(s.pan.x)?s.pan.x:0,y:g(s.pan)&&v(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom}),u.styleEnabled&&e.setStyle([]);var c=I({},s,s.renderer);e.initRenderer(c),function(t,e){if(t.some(E))return $n.all(t).then(e);e(t)}([s.style,s.elements],function(t){var n=t[0],o=t[1];u.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(g(t)||p(t))&&e.add(t),e.one("layoutready",function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")}).one("layoutstop",function(){e.one("done",r),e.emit("done")});var o=I({},e._private.options.layout);o.eles=e.elements(),e.layout(o).run()}(o,function(){e.startAnimationLoop(),u.ready=!0,d(s.ready)&&e.on("ready",s.ready);for(var t=0;t<i.length;t++)e.on("ready",i[t]);r&&(r.readies=[]),e.emit("ready")},s.done)})},bo=_o.prototype;I(bo,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},isDestroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.isDestroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t,e){if(null!=t){var n=this,r=n._private,i=r.options,o=e||{name:"canvas"};return i.renderer=o,!m(t)&&m(t[0])&&(t=t[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=t,r.styleEnabled=!0,n.initRenderer(o),n.startAnimationLoop(),n.style(i.style),n.emit("mount"),n}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Et(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(g(t)){if(e.startBatch(),t.elements){var i={},o=function(t,n){for(var r=[],o=[],a=0;a<t.length;a++){var s=t[a],l=s.data.id,u=e.getElementById(l);i[l]=!0,0!==u.length?o.push({ele:u,json:s}):n?(s.group=n,r.push(s)):r.push(s)}e.add(r);for(var c=0;c<o.length;c++){var f=o[c];f.ele.json(f.json)}};if(p(t.elements))o(t.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var l=a[s],u=t.elements[l];p(u)&&o(u,l)}var c=e.collection();r.filter(function(t){return!i[t.id()]}).forEach(function(t){t.isParent()?c.merge(t):t.remove()}),c.forEach(function(t){return t.children().move({parent:null})}),c.forEach(function(t){return function(t){return e.getElementById(t.id())}(t).remove()})}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan));for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],h=0;h<f.length;h++){var d=f[h];null!=t[d]&&e[d](t[d])}return e.endBatch(),this}var v={};t?v.elements=this.elements().map(function(t){return t.json()}):(v.elements={},r.forEach(function(t){var e=t.group();v.elements[e]||(v.elements[e]=[]),v.elements[e].push(t.json())})),this._private.styleEnabled&&(v.style=e.style().json());var m=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=Et(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=Et(m.renderer),v.hideEdgesOnViewport=m.hideEdgesOnViewport,v.textureOnViewport=m.textureOnViewport,v.wheelSensitivity=m.wheelSensitivity,v.motionBlur=m.motionBlur,v},scratch:Yn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:Yn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),bo.$id=bo.getElementById,[ji,Gi,Ji,to,eo,no,io,oo,mo,yo].forEach(function(t){I(bo,t)});var wo={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},xo=function(t){return t.scratch("breadthfirst")},ko=function(t,e){return t.scratch("breadthfirst",e)};function Eo(t){this.options=I({},wo,t)}Eo.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().filter(function(t){return!t.isParent()}),a=i,s=n.directed,l=n.maximal||n.maximalAdjustments>0,u=fe(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(y(n.roots))t=n.roots;else if(p(n.roots)){for(var c=[],f=0;f<n.roots.length;f++){var d=r.getElementById(n.roots[f]);c.push(d)}t=r.collection(c)}else if(h(n.roots))t=r.$(n.roots);else if(s)t=o.roots();else{var g=i.components();t=r.collection();for(var v=function(e){var n=g[e],r=n.maxDegree(!1),i=n.filter(function(t){return t.degree(!1)===r});t=t.add(i)},m=0;m<g.length;m++)v(m)}var _=[],b={},w=function(t,e){null==_[e]&&(_[e]=[]);var n=_[e].length;_[e].push(t),ko(t,{index:n,depth:e})};a.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=t[0],a=o.id();w(o,i),b[a]=!0}});for(var x=[],k=0;k<o.length;k++){var E=o[k];b[E.id()]||x.push(E)}var z=function(t){for(var e=_[t],n=0;n<e.length;n++){var r=e[n];null!=r?ko(r,{depth:t,index:n}):(e.splice(n,1),n--)}},A=function(){for(var t=0;t<_.length;t++)z(t)},C=function(t,e){for(var n=xo(t),r=t.incomers().filter(function(t){return t.isNode()&&i.has(t)}),o=-1,a=t.id(),s=0;s<r.length;s++){var l=xo(r[s]);o=Math.max(o,l.depth)}return n.depth<=o&&(e[a]?null:(function(t,e){var n=xo(t);_[n.depth][n.index]=null,w(t,e)}(t,o+1),e[a]=!0,!0))};if(s&&l){var S=[],T={},M=function(t){return S.push(t)};for(o.forEach(function(t){return S.push(t)});S.length>0;){var N=S.shift(),I=C(N,T);if(I)N.outgoers().filter(function(t){return t.isNode()&&i.has(t)}).forEach(M);else if(null===I){kt("Detected double maximal shift for node `"+N.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}A();var O=0;if(n.avoidOverlap)for(var L=0;L<o.length;L++){var P=o[L].layoutDimensions(n);O=Math.max(O,P.w,P.h)}for(var B={},F=function(t){if(B[t.id()])return B[t.id()];for(var e=xo(t).depth,n=t.neighborhood(),r=0,i=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var l=xo(s),u=l.index,c=l.depth;null!=u&&null!=c&&c<e&&(r+=u/(_[c].length-1),i++)}}return r/=i=Math.max(1,i),0===i&&(r=0),B[t.id()]=r,r},j=function(t,e){var n=F(t)-F(e);return 0===n?D(t.id(),e.id()):n},R=0;R<_.length;R++)_[R].sort(j),z(R);for(var H=[],q=0;q<x.length;q++)H.push(x[q]);_.unshift(H),A();for(var W=0,$=0;$<_.length;$++)W=Math.max(_[$].length,W);var U=u.x1+u.w/2,V=u.x1+u.h/2,Y=_.reduce(function(t,e){return Math.max(t,e.length)},0);return o.layoutPositions(this,n,function(t){var e=xo(t),r=e.depth,i=e.index,o=_[r].length,a=Math.max(u.w/((n.grid?Y:o)+1),O),s=Math.max(u.h/(_.length+1),O),l=Math.min(u.w/2/_.length,u.h/2/_.length);if(l=Math.max(l,O),n.circle){var c=l*r+l-(_.length>0&&_[0].length<=3?l/2:0),f=2*Math.PI/_[r].length*i;return 0===r&&1===_[0].length&&(c=1),{x:U+c*Math.cos(f),y:V+c*Math.sin(f)}}return{x:U+(i+1-(o+1)/2)*a,y:(r+1)*s}}),this};var zo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ao(t){this.options=I({},zo,t)}Ao.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,i=e.eles.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o,a=fe(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s=a.x1+a.w/2,l=a.y1+a.h/2,u=(void 0===e.sweep?2*Math.PI-2*Math.PI/i.length:e.sweep)/Math.max(1,i.length-1),c=0,f=0;f<i.length;f++){var h=i[f].layoutDimensions(e);c=Math.max(c,h.w,h.h)}if(o=v(e.radius)?e.radius:i.length<=1?0:Math.min(a.h,a.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var d=Math.cos(u)-Math.cos(0),p=Math.sin(u)-Math.sin(0),g=Math.sqrt(c*c/(d*d+p*p));o=Math.max(g,o)}return i.layoutPositions(this,e,function(t,n){var i=e.startAngle+n*u*(r?1:-1),a=o*Math.cos(i),c=o*Math.sin(i);return{x:s+a,y:l+c}}),this};var Co,So={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function To(t){this.options=I({},So,t)}To.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles.nodes().not(":parent"),o=fe(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),a=o.x1+o.w/2,s=o.y1+o.h/2,l=[],u=0,c=0;c<i.length;c++){var f,h=i[c];f=e.concentric(h),l.push({value:f,node:h}),h._private.scratch.concentric=f}i.updateStyle();for(var d=0;d<i.length;d++){var p=i[d].layoutDimensions(e);u=Math.max(u,p.w,p.h)}l.sort(function(t,e){return e.value-t.value});for(var g=e.levelWidth(i),v=[[]],m=v[0],y=0;y<l.length;y++){var _=l[y];m.length>0&&Math.abs(m[0].value-_.value)>=g&&v.push(m=[]),m.push(_)}var b=u+e.minNodeSpacing;if(!e.avoidOverlap){var w=v.length>0&&v[0].length>1,x=(Math.min(o.w,o.h)/2-b)/(v.length+w?1:0);b=Math.min(b,x)}for(var k=0,E=0;E<v.length;E++){var z=v[E],A=void 0===e.sweep?2*Math.PI-2*Math.PI/z.length:e.sweep,C=z.dTheta=A/Math.max(1,z.length-1);if(z.length>1&&e.avoidOverlap){var S=Math.cos(C)-Math.cos(0),T=Math.sin(C)-Math.sin(0),M=Math.sqrt(b*b/(S*S+T*T));k=Math.max(M,k)}z.r=k,k+=b}if(e.equidistant){for(var N=0,D=0,I=0;I<v.length;I++)N=Math.max(N,v[I].r-D);D=0;for(var O=0;O<v.length;O++){var L=v[O];0===O&&(D=L.r),L.r=D,D+=N}}for(var P={},B=0;B<v.length;B++)for(var F=v[B],j=F.dTheta,R=F.r,H=0;H<F.length;H++){var q=F[H],W=e.startAngle+(n?1:-1)*j*H,$={x:a+R*Math.cos(W),y:s+R*Math.sin(W)};P[q.node.id()]=$}return i.layoutPositions(this,e,function(t){var e=t.id();return P[e]}),this};var Mo={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1,weaver:!1};function No(t){this.options=I({},Mo,t),this.options.layout=this}No.prototype.run=function(){var t=this.options,e=t.cy,n=this,r=this.thread,i=t.weaver?t.weaver.Thread:null,o={listeners:[],on:function(t,e){return this.listeners.push({event:t,callback:e}),this},trigger:function(t){return h(t)&&(t={type:t}),this.listeners.filter(function(e){return e.event===t.type}).forEach(function(e){e.callback(t)}),this},pass:function(t){return this.pass=t,this},run:function(t){var e=this.pass;return new $n(function(n){n(t(e))})},stop:function(){return this},stopped:function(){return!0}};r&&!r.stopped()||(r=this.thread=i?new i:o),n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),Co=!0===t.debug;var a=Do(e,n,t);Co&&(void 0)(a),t.randomize&&Lo(a,e);var s=Date.now(),l=!1,u=function(n){n=n||{},l&&!n.next||!n.force&&Date.now()-s<t.animationThreshold||(l=!0,ot(function(){Po(a,e,t),!0===t.fit&&e.fit(t.padding),l=!1,n.next&&n.next()}))};r.on("message",function(t){a.layoutNodes=t.message,u()}),r.pass({layoutInfo:a,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run(function(t){var e=t.layoutInfo,n=t.options,r=function(t){return-t+2*t*Math.random()},i=function(t,e,n,i){if(t.cmptId===e.cmptId||n.isCompound){var o=e.positionX-t.positionX,l=e.positionY-t.positionY;0===o&&0===l&&(o=r(1),l=r(1));var u=a(t,e,o,l);if(u>0)var c=(h=i.nodeOverlap*u)*o/(y=Math.sqrt(o*o+l*l)),f=h*l/y;else{var h,d=s(t,o,l),p=s(e,-1*o,-1*l),g=p.x-d.x,v=p.y-d.y,m=g*g+v*v,y=Math.sqrt(m);c=(h=(t.nodeRepulsion+e.nodeRepulsion)/m)*g/y,f=h*v/y}t.isLocked||(t.offsetX-=c,t.offsetY-=f),e.isLocked||(e.offsetX+=c,e.offsetY+=f)}},a=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},s=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,l=o/a,u={};return 0===e&&0<n?(u.x=r,u.y=i+o/2,u):0===e&&0>n?(u.x=r,u.y=i+o/2,u):0<e&&-1*l<=s&&s<=l?(u.x=r+a/2,u.y=i+a*n/2/e,u):0>e&&-1*l<=s&&s<=l?(u.x=r-a/2,u.y=i-a*n/2/e,u):0<n&&(s<=-1*l||s>=l)?(u.x=r+o*e/2/n,u.y=i+o/2,u):0>n&&(s<=-1*l||s>=l)?(u.x=r-o*e/2/n,u.y=i-o/2,u):u},l=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},u=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o?t(i,n):void 0}},c=0;do{for(var f=0;(f<n.refresh||0===n.refresh)&&c<n.numIter;){var h;if(function(t,e,n){(function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],o=r.length,a=0;a<o;a++)for(var s=t.layoutNodes[t.idToIndex[r[a]]],l=a+1;l<o;l++)i(s,t.layoutNodes[t.idToIndex[r[l]]],t,e)})(t,e),function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.layoutNodes[t.idToIndex[r.sourceId]],o=t.layoutNodes[t.idToIndex[r.targetId]],a=o.positionX-i.positionX,l=o.positionY-i.positionY;if(0!==a||0!==l){var u=s(i,a,l),c=s(o,-1*a,-1*l),f=c.x-u.x,h=c.y-u.y,d=Math.sqrt(f*f+h*h),p=Math.pow(r.idealLength-d,2)/r.elasticity;if(0!==d)var g=p*f/d,v=p*h/d;else g=0,v=0;i.isLocked||(i.offsetX+=g,i.offsetY+=v),o.isLocked||(o.offsetX-=g,o.offsetY-=v)}}}(t),function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[r[0]]].parentId]];o=s.positionX,a=s.positionY}for(var l=0;l<i;l++){var u=t.layoutNodes[t.idToIndex[r[l]]];if(!u.isLocked){var c=o-u.positionX,f=a-u.positionY,h=Math.sqrt(c*c+f*f);if(h>1){var d=e.gravity*f/h;u.offsetX+=e.gravity*c/h,u.offsetY+=d}}}}}(t,e),function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.layoutNodes[t.idToIndex[o]],s=a.children;if(0<s.length&&!a.isLocked){for(var l=a.offsetX,u=a.offsetY,c=0;c<s.length;c++){var f=t.layoutNodes[t.idToIndex[s[c]]];f.offsetX+=l,f.offsetY+=u,n[++i]=s[c]}a.offsetX=0,a.offsetY=0}}}(t),function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=l(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,u(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}}(t)}(e,n),e.temperature=e.temperature*n.coolingFactor,!(h=!(e.temperature<n.minTemp)))break;f++,c++}!0===n.animate&&o.trigger({type:"message",message:e.layoutNodes})}while(h&&c+1<n.numIter);return function(t,n){for(var r=e.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId;(i[s]=i[s]||[]).push(a)}var l=0;for(o=0;o<i.length;o++)if(v=i[o]){v.x1=1/0,v.x2=-1/0,v.y1=1/0,v.y2=-1/0;for(var u=0;u<v.length;u++){var c=v[u];v.x1=Math.min(v.x1,c.positionX-c.width/2),v.x2=Math.max(v.x2,c.positionX+c.width/2),v.y1=Math.min(v.y1,c.positionY-c.height/2),v.y2=Math.max(v.y2,c.positionY+c.height/2)}v.w=v.x2-v.x1,v.h=v.y2-v.y1,l+=v.w*v.h}i.sort(function(t,e){return e.w*e.h-t.w*t.h});var f=0,h=0,d=0,p=0,g=Math.sqrt(l)*e.clientWidth/e.clientHeight;for(o=0;o<i.length;o++){var v;if(v=i[o]){for(u=0;u<v.length;u++)(c=v[u]).isLocked||(c.positionX+=f,c.positionY+=h);f+=v.w+n.componentSpacing,d+=v.w+n.componentSpacing,p=Math.max(p,v.h),d>g&&(h+=p+n.componentSpacing,f=0,d=0,p=0)}}}(0,n),e}).then(function(t){a.layoutNodes=t.layoutNodes,r.stop(),c()});var c=function(){!0===t.animate||!1===t.animate?u({force:!0,next:function(){n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n})}}):t.eles.nodes().layoutPositions(n,t,function(t){var e=a.layoutNodes[a.idToIndex[t.data("id")]];return{x:e.positionX,y:e.positionY}})};return this},No.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},No.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Do=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:fe(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},a=n.eles.components(),s={},l=0;l<a.length;l++)for(var u=a[l],c=0;c<u.length;c++)s[u[c].id()]=l;for(l=0;l<o.nodeSize;l++){var f=(m=i[l]).layoutDimensions(n);(N={}).isLocked=m.locked(),N.id=m.data("id"),N.parentId=m.data("parent"),N.cmptId=s[m.id()],N.children=[],N.positionX=m.position("x"),N.positionY=m.position("y"),N.offsetX=0,N.offsetY=0,N.height=f.w,N.width=f.h,N.maxX=N.positionX+N.width/2,N.minX=N.positionX-N.width/2,N.maxY=N.positionY+N.height/2,N.minY=N.positionY-N.height/2,N.padLeft=parseFloat(m.style("padding")),N.padRight=parseFloat(m.style("padding")),N.padTop=parseFloat(m.style("padding")),N.padBottom=parseFloat(m.style("padding")),N.nodeRepulsion=d(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,o.layoutNodes.push(N),o.idToIndex[N.id]=l}var h=[],p=0,g=-1,v=[];for(l=0;l<o.nodeSize;l++){var m,y=(m=o.layoutNodes[l]).parentId;null!=y?o.layoutNodes[o.idToIndex[y]].children.push(m.id):(h[++g]=m.id,v.push(m.id))}for(o.graphSet.push(v);p<=g;){var _=h[p++],b=o.layoutNodes[o.idToIndex[_]].children;if(b.length>0)for(o.graphSet.push(b),l=0;l<b.length;l++)h[++g]=b[l]}for(l=0;l<o.graphSet.length;l++){var w=o.graphSet[l];for(c=0;c<w.length;c++)o.indexToGraph[o.idToIndex[w[c]]]=l}for(l=0;l<o.edgeSize;l++){var x=r[l],k={};k.id=x.data("id"),k.sourceId=x.data("source"),k.targetId=x.data("target");var E=d(n.idealEdgeLength)?n.idealEdgeLength(x):n.idealEdgeLength,z=d(n.edgeElasticity)?n.edgeElasticity(x):n.edgeElasticity,A=o.idToIndex[k.sourceId],C=o.idToIndex[k.targetId];if(o.indexToGraph[A]!=o.indexToGraph[C]){for(var S=Io(k.sourceId,k.targetId,o),T=o.graphSet[S],M=0,N=o.layoutNodes[A];-1===T.indexOf(N.id);)N=o.layoutNodes[o.idToIndex[N.parentId]],M++;for(N=o.layoutNodes[C];-1===T.indexOf(N.id);)N=o.layoutNodes[o.idToIndex[N.parentId]],M++;E*=M*n.nestingFactor}k.idealLength=E,k.elasticity=z,o.layoutEdges.push(k)}return o},Io=function(t,e,n){var r=Oo(t,e,0,n);return 2>r.count?0:r.graph},Oo=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var l=i.layoutNodes[i.idToIndex[o[s]]].children;if(0!==l.length){var u=t(e,n,i.indexToGraph[i.idToIndex[l[0]]],i);if(0!==u.count){if(1!==u.count)return u;if(2==++a)break}}}return{count:a,graph:r}},Lo=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},Po=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};n.boundingBox&&(i.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(e,r){var i=t.layoutNodes[t.idToIndex[e.data("id")]];return n.boundingBox?{x:o.x1+(i.positionX-a.x1)/a.w*o.w,y:o.y1+(i.positionY-a.y1)/a.h*o.h}:{x:i.positionX,y:i.positionY}}),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},Bo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Fo(t){this.options=I({},Bo,t)}Fo.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var i=fe(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===i.h||0===i.w)r.layoutPositions(this,e,function(t){return{x:i.x1,y:i.y1}});else{var o=r.size(),a=Math.sqrt(o*i.h/i.w),s=Math.round(a),l=Math.round(i.w/i.h*a),u=function(t){if(null==t)return Math.min(s,l);Math.min(s,l)==s?s=t:l=t},c=function(t){if(null==t)return Math.max(s,l);Math.max(s,l)==s?s=t:l=t},f=e.rows,h=null!=e.cols?e.cols:e.columns;if(null!=f&&null!=h)s=f,l=h;else if(null!=f&&null==h)s=f,l=Math.ceil(o/s);else if(null==f&&null!=h)l=h,s=Math.ceil(o/l);else if(l*s>o){var d=u(),p=c();(d-1)*p>=o?u(d-1):(p-1)*d>=o&&c(p-1)}else for(;l*s<o;){var g=u(),v=c();(v+1)*g>=o?c(v+1):u(g+1)}var m=i.w/l,y=i.h/s;if(e.condense&&(m=0,y=0),e.avoidOverlap)for(var _=0;_<r.length;_++){var b=r[_],w=b._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var x=b.layoutDimensions(e),k=e.avoidOverlapPadding,E=x.h+k;m=Math.max(m,x.w+k),y=Math.max(y,E)}for(var z={},A=function(t,e){return!!z["c-"+t+"-"+e]},C=function(t,e){z["c-"+t+"-"+e]=!0},S=0,T=0,M=function(){++T>=l&&(T=0,S++)},N={},D=0;D<r.length;D++){var I=r[D],O=e.position(I);if(O&&(void 0!==O.row||void 0!==O.col)){var L={row:O.row,col:O.col};if(void 0===L.col)for(L.col=0;A(L.row,L.col);)L.col++;else if(void 0===L.row)for(L.row=0;A(L.row,L.col);)L.row++;N[I.id()]=L,C(L.row,L.col)}}r.layoutPositions(this,e,function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var o=N[t.id()];if(o)n=o.col*m+m/2+i.x1,r=o.row*y+y/2+i.y1;else{for(;A(S,T);)M();n=T*m+m/2+i.x1,r=S*y+y/2+i.y1,C(S,T),M()}return{x:n,y:r}})}return this};var jo={ready:function(){},stop:function(){}};function Ro(t){this.options=I({},jo,t)}Ro.prototype.run=function(){var t=this.options,e=t.eles;return this.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},Ro.prototype.stop=function(){return this};var Ho={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function qo(t){this.options=I({},Ho,t)}qo.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=d(t.positions);return e.layoutPositions(this,t,function(e,r){var i=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i}),this};var Wo={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function $o(t){this.options=I({},Wo,t)}$o.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles.nodes().not(":parent"),r=fe(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.layoutPositions(this,t,function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var Uo=[{name:"breadthfirst",impl:Eo},{name:"circle",impl:Ao},{name:"concentric",impl:To},{name:"cose",impl:No},{name:"grid",impl:Fo},{name:"null",impl:Ro},{name:"preset",impl:qo},{name:"random",impl:$o}];function Vo(t){this.options=t,this.notifications=0}var Yo=function(){};Vo.prototype={recalculateRenderedStyle:Yo,notify:function(){this.notifications++},init:Yo,isHeadless:function(){return!0}};var Xo={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,a){return i.x-n/2-a<=t&&t<=i.x+n/2+a&&i.y-n/2-a<=e&&e<=i.y+n/2+a},r=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=(t*Math.sin(r)+e*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},i=function(t,e,n,i){for(var o=[],a=0;a<t.length;a+=2)o.push(r(t[a],t[a+1],e,n,i));return o},o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},a=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},s=function(r,s){h(s)&&(s=t[s]),t[r]=I({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,a,s){var l=o(i(this.points,n+2*s,r,a));return Ee(t,e,l)},roughCollide:n,draw:function(t,n,r,o){var a=i(this.points,n,r,o);e.arrowShapeImpl("polygon")(t,a)},spacing:function(t){return 0},gap:a},s)};s("none",{collide:yt,roughCollide:yt,draw:bt,spacing:_t,gap:_t}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,o,a,s){var l=i(this.points,n,o,a),u=this.controlPoint,c=r(u[0],u[1],n,o,a);e.arrowShapeImpl(this.name)(t,l,c)},gap:function(t){return.8*a(t)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.pointsTee,n+2*l,r,a));return Ee(t,e,u)||Ee(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.pointsTee,n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.crossLinePts(n,s),n+2*l,r,a));return Ee(t,e,u)||Ee(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.crossLinePts(n,a),n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*a(t)}}),s("circle",{radius:.15,collide:function(t,e,n,r,i,o,a){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},Ko={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),l=n.zoom();return[((t-i)/a-s.x)/l,((e-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=o.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i=r("padding-left"),a=r("padding-right"),s=r("padding-top"),l=r("padding-bottom"),u=r("border-left-width"),c=r("border-right-width"),f=r("border-top-width"),h=(r("border-bottom-width"),t.clientWidth);return this.containerBB=[e.left+i+u,e.top+s+f,h-(i+a),t.clientHeight-(s+l),e.width/(h+(u+c))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,o,a=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),f=s.cy.hasCompoundNodes(),h=(r?24:8)/c,d=(r?8:2)/c,p=(r?8:2)/c,g=1/0;function v(t,e){if(t.isNode()){if(o)return;o=t,u.push(t)}if(t.isEdge()&&(null==e||e<g))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<u.length;n++)if(u[n].isEdge()){u[n]=t,i=t,g=null!=e?e:g;break}}else u.push(t),i=t,g=null!=e?e:g}function m(n){var r=n.outerWidth()+2*d,i=n.outerHeight()+2*d,o=r/2,l=i/2,u=n.position();if(u.x-o<=t&&t<=u.x+o&&u.y-l<=e&&e<=u.y+l&&s.nodeShapes[a.getNodeShape(n)].checkPoint(t,e,0,r,i,u.x,u.y))return v(n,0),!0}function y(n){var r,i=n._private,o=i.rscratch,l=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,d=l/2+h,p=d*d,g=2*d,y=i.source,_=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var b=o.allpts,w=0;w+3<b.length;w+=2)if(be(t,e,b[w],b[w+1],b[w+2],b[w+3],g)&&p>(r=ke(t,e,b[w],b[w+1],b[w+2],b[w+3])))return v(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(b=o.allpts,w=0;w+5<o.allpts.length;w+=4)if(we(t,e,b[w],b[w+1],b[w+2],b[w+3],b[w+4],b[w+5],g)&&p>(r=xe(t,e,b[w],b[w+1],b[w+2],b[w+3],b[w+4],b[w+5])))return v(n,r),!0;y=y||i.source,_=_||i.target;var x=a.getArrowWidth(l,c),k=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(w=0;w<k.length;w++){var E=k[w],z=s.arrowShapes[n.pstyle(E.name+"-arrow-shape").value],A=n.pstyle("width").pfValue;if(z.roughCollide(t,e,x,E.angle,{x:E.x,y:E.y},A,h)&&z.collide(t,e,x,E.angle,{x:E.x,y:E.y},A,h))return v(n),!0}f&&u.length>0&&(m(y),m(_))}function _(t,e,n){return Nt(t,e,n)}function b(n,r){var i=n._private,o=p,a=n.pstyle((r?r+"-":"")+"label").value;if("yes"===n.pstyle("text-events").strValue&&a){var s=i.rstyle,l=n.pstyle("text-border-width").pfValue,u=n.pstyle("text-background-padding").pfValue,c=_(s,"labelWidth",r)+l+2*o+2*u,f=_(s,"labelHeight",r)+l+2*o+2*u,h=_(s,"labelX",r),d=_(s,"labelY",r),g=_(i.rscratch,"labelAngle",r),m=h-c/2,y=h+c/2,b=d-f/2,w=d+f/2;if(g){var x=Math.cos(g),k=Math.sin(g),E=function(t,e){return{x:(t-=h)*x-(e-=d)*k+h,y:t*k+e*x+d}},z=E(m,b),A=E(m,w),C=E(y,b),S=E(y,w);if(Ee(t,e,[z.x,z.y,C.x,C.y,S.x,S.y,A.x,A.y]))return v(n),!0}else if(me({w:c,h:f,x1:m,x2:y,y1:b,y2:w},t,e))return v(n),!0}}n&&(l=l.interactive);for(var w=l.length-1;w>=0;w--){var x=l[w];x.isNode()?m(x)||b(x):y(x)||b(x)||b(x,"source")||b(x,"target")}return u},getAllInBox:function(t,e,n,r){for(var i,o=this.getCachedZSortedEles().interactive,a=[],s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),f=fe({x1:t=s,y1:e=u,x2:n=l,y2:r=c}),h=0;h<o.length;h++){var d=o[h];if(d.isNode()){var p=d,g=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ve(f,g)&&!ye(g,f)&&a.push(p)}else{var v=d,m=v._private,y=m.rscratch;if(null!=y.startX&&null!=y.startY&&!me(f,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!me(f,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var _=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,b=!0,w=0;w<_.length;w++)if(!me(f,(i=_[w]).x,i.y)){b=!1;break}b&&a.push(v)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||a.push(v)}}return a}},Go={calculateArrowAngles:function(t){var e,n,r,i,o,a,s=t._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,f="segments"===s.edgeType,h="compound"===s.edgeType,d="self"===s.edgeType;l?(r=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),p=s.midX,g=s.midY,f?(e=r-s.segpts[0],n=i-s.segpts[1]):c||h||d||u?(e=r-le((k=s.allpts)[0],k[2],k[4],.1),n=i-le(k[1],k[3],k[5],.1)):(e=r-p,n=i-g),s.srcArrowAngle=ne(e,n);var p=s.midX,g=s.midY;if(l&&(p=(r+o)/2,g=(i+a)/2),e=o-r,n=a-i,f)if((k=s.allpts).length/2%2==0){var v=(m=k.length/2)-2;e=k[m]-k[v],n=k[m+1]-k[v+1]}else{v=(m=k.length/2-1)-2;var m,y=m+2;e=k[m]-k[v],n=k[m+1]-k[v+1]}else if(c||h||d){var _,b,w,x,k=s.allpts;if(s.ctrlpts.length/2%2==0){var E=2+(z=2+(A=k.length/2-1));_=le(k[A],k[z],k[E],0),b=le(k[A+1],k[z+1],k[E+1],0),w=le(k[A],k[z],k[E],1e-4),x=le(k[A+1],k[z+1],k[E+1],1e-4)}else{var z,A;E=2+(z=k.length/2-1),_=le(k[A=z-2],k[z],k[E],.4999),b=le(k[A+1],k[z+1],k[E+1],.4999),w=le(k[A],k[z],k[E],.5),x=le(k[A+1],k[z+1],k[E+1],.5)}e=w-_,n=x-b}if(s.midtgtArrowAngle=ne(e,n),s.midDispX=e,s.midDispY=n,e*=-1,n*=-1,f&&((k=s.allpts).length/2%2==0||(e=-(k[y=2+(m=k.length/2-1)]-k[m]),n=-(k[y+1]-k[m+1]))),s.midsrcArrowAngle=ne(e,n),f)e=o-s.segpts[s.segpts.length-2],n=a-s.segpts[s.segpts.length-1];else if(c||h||d||u){var C=(k=s.allpts).length;e=o-le(k[C-6],k[C-4],k[C-2],.9),n=a-le(k[C-5],k[C-3],k[C-1],.9)}else e=o-p,n=a-g;s.tgtArrowAngle=ne(e,n)}};Go.getArrowWidth=Go.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var Zo={};function Qo(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2)e.push({x:t[n],y:t[n+1]});return e}}Zo.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,l=a.position(),u=s.position(),c=a.width(),f=s.width(),h=a.height(),d=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*h*p+l.y,i.target.x*f*p+u.x,i.target.y*d*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},Zo.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,o=e.vectorNormInverse,a=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<u;c++){var f=s.pfValue[c],h=l.pfValue[c],d=1-f,p="node-position"===a?r:i,g={x:p.x1*d+p.x2*f,y:p.y1*d+p.y2*f};n.segpts.push(g.x+o.x*h,g.y+o.y*h)}},Zo.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=n,d=f;r&&(h=0,d=l);var p=u-Math.PI/2,g=p-c/2,v=p+c/2,m=String(u+"_"+c);h=void 0===o[m]?o[m]=0:++o[m],i.ctrlpts=[a.x+1.4*Math.cos(g)*d*(h/3+1),a.y+1.4*Math.sin(g)*d*(h/3+1),a.x+1.4*Math.cos(v)*d*(h/3+1),a.y+1.4*Math.sin(v)*d*(h/3+1)]},Zo.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=n,p=f;r&&(d=0,p=h?h.pfValue[0]:void 0);var g={x:o.x-s/2,y:o.y-l/2},v={x:a.x-u/2,y:a.y-c/2},m={x:Math.min(g.x,v.x),y:Math.min(g.y,v.y)},y=Math.max(.5,Math.log(.01*s)),_=Math.max(.5,Math.log(.01*u));i.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*p*(d/3+1)*y,m.x-(1+Math.pow(50,1.12)/100)*p*(d/3+1)*_,m.y]},Zo.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},Zo.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),h=t.pstyle("control-point-weights"),d=f&&h?Math.min(f.value.length,h.value.length):1,p=f?f.pfValue[0]:void 0,g=h.value[0],v=r;o.edgeType=v?"multibezier":"bezier",o.ctrlpts=[];for(var m=0;m<d;m++){var y,_=(.5-e.eles.length/2+n)*c*(i?-1:1),b=ie(_);v&&(p=f?f.pfValue[m]:c,g=h.value[m]);var w=void 0!==(y=r?p:void 0!==p?b*p:void 0)?y:_,x=1-g,k="node-position"===u?s:l,E={x:k.x1*x+k.x2*g,y:k.y1*x+k.y2*g};o.ctrlpts.push(E.x+a.x*w,E.y+a.y*w)}},Zo.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r=e.posPts,i=e.srcW,o=e.srcH,a=e.tgtW,s=e.tgtH,l="node-position"!==t.pstyle("edge-distances").value,u=t.pstyle("taxi-direction").value,c=u,f=t.pstyle("taxi-turn"),h=f.pfValue,d=t.pstyle("taxi-turn-min-distance").pfValue,p="%"===f.units,g=l?(o+s)/2:0,v=r.x2-r.x1,m=r.y2-r.y1,y=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},_=y(v,l?(i+a)/2:0),b=y(m,g),w=!1;"auto"===u?u=Math.abs(_)>Math.abs(b)?"horizontal":"vertical":"upward"===u||"downward"===u?(u="vertical",w=!0):"leftward"!==u&&"rightward"!==u||(u="horizontal",w=!0);var x="vertical"===u,k=x?b:_,E=x?m:v,z=ie(E),A=!1;w&&p||!("downward"===c&&E<0||"upward"===c&&E>0||"leftward"===c&&E>0||"rightward"===c&&E<0)||(k=(z*=-1)*Math.abs(k),A=!0);var C=p?h*k:h*z,S=function(t){return Math.abs(t)<d||Math.abs(t)>=Math.abs(k)},T=S(C),M=S(k-C);if(!T&&!M||A)if(x){var N=r.y1+C+(l?o/2*z:0);n.segpts=[r.x1,N,r.x2,N]}else{var D=r.x1+C+(l?i/2*z:0);n.segpts=[D,r.y1,D,r.y2]}else if(x){var I=Math.abs(E)<=o/2,O=Math.abs(v)<=a/2;if(I){var L=(r.x1+r.x2)/2;n.segpts=[L,r.y1,L,r.y2]}else if(O){var P=(r.y1+r.y2)/2;n.segpts=[r.x1,P,r.x2,P]}else n.segpts=[r.x1,r.y2]}else{var B=Math.abs(E)<=i/2,F=Math.abs(m)<=s/2;if(B){var j=(r.y1+r.y2)/2;n.segpts=[r.x1,j,r.x2,j]}else if(F){var R=(r.x1+r.x2)/2;n.segpts=[R,r.y1,R,r.y2]}else n.segpts=[r.x2,r.y1]}},Zo.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=!v(n.startX)||!v(n.startY),h=!v(n.arrowStartX)||!v(n.arrowStartY),d=!v(n.endX)||!v(n.endY),p=!v(n.arrowEndX)||!v(n.arrowEndY),g=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,m=oe({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),y=m<g,_=oe({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=_<g,w=!1;if(f||h||y){w=!0;var x={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},k=Math.sqrt(x.x*x.x+x.y*x.y),E={x:x.x/k,y:x.y/k},z=Math.max(o,a),A={x:n.ctrlpts[0]+2*E.x*z,y:n.ctrlpts[1]+2*E.y*z},C=u.intersectLine(r.x,r.y,o,a,A.x,A.y,0);y?(n.ctrlpts[0]=n.ctrlpts[0]+E.x*(g-m),n.ctrlpts[1]=n.ctrlpts[1]+E.y*(g-m)):(n.ctrlpts[0]=C[0]+E.x*g,n.ctrlpts[1]=C[1]+E.y*g)}if(d||p||b){w=!0;var S={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},T=Math.sqrt(S.x*S.x+S.y*S.y),M={x:S.x/T,y:S.y/T},N=Math.max(o,a),D={x:n.ctrlpts[0]+2*M.x*N,y:n.ctrlpts[1]+2*M.y*N},I=c.intersectLine(i.x,i.y,s,l,D.x,D.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+M.x*(g-_),n.ctrlpts[1]=n.ctrlpts[1]+M.y*(g-_)):(n.ctrlpts[0]=I[0]+M.x*g,n.ctrlpts[1]=I[1]+M.y*g)}w&&this.findEndpoints(t)}},Zo.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(e.midX=e.allpts[r=e.allpts.length/2-1],e.midY=e.allpts[r+1]):(e.midX=le(e.allpts[r=e.allpts.length/2-3],e.allpts[r+2],e.allpts[r+4],.5),e.midY=le(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var a=e.segpts.length/2-1;e.midX=e.segpts[a],e.midY=e.segpts[a+1]}},Zo.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||v(e.startX)&&v(e.startY)&&v(e.endX)&&v(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,kt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Zo.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i=new It,o=[],a=[],s=0;s<t.length;s++){var l=t[s],u=l._private,c=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==c){var f="unbundled-bezier"===c||"segments"===c||"straight"===c||"taxi"===c,h="unbundled-bezier"===c||"bezier"===c,d=u.source.poolIndex(),p=u.target.poolIndex(),g=(f?-1:1)*ut([d,p].sort()),m=i.get(g);null==m&&(i.set(g,m={eles:[]}),o.push(g)),m.eles.push(l),f&&(m.hasUnbundled=!0),h&&(m.hasBezier=!0)}else a.push(l)}for(var y=function(t){var a=i.get(o[t]),s=void 0;if(!a.hasUnbundled){var l=a.eles[0].parallelEdges().filter(function(t){return t.isBundledBezier()});Mt(a.eles),l.forEach(function(t){return a.eles.push(t)}),a.eles.sort(function(t,e){return t.poolIndex()-e.poolIndex()})}var u=a.eles[0],c=u.source(),f=u.target();if(c.poolIndex()>f.poolIndex()){var h=c;c=f,f=h}var d=a.srcPos=c.position(),p=a.tgtPos=f.position(),g=a.srcW=c.outerWidth(),m=a.srcH=c.outerHeight(),y=a.tgtW=f.outerWidth(),_=a.tgtH=f.outerHeight(),b=a.srcShape=n.nodeShapes[e.getNodeShape(c)],w=a.tgtShape=n.nodeShapes[e.getNodeShape(f)];a.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var x=0;x<a.eles.length;x++){var k=a.eles[x],E=k[0]._private.rscratch,z=k.pstyle("curve-style").value,A="unbundled-bezier"===z||"segments"===z||"taxi"===z,C=!c.same(k.source());if(!a.calculatedIntersection&&c!==f&&(a.hasBezier||a.hasUnbundled)){a.calculatedIntersection=!0;var S=b.intersectLine(d.x,d.y,g,m,p.x,p.y,0),T=a.srcIntn=S,M=w.intersectLine(p.x,p.y,y,_,d.x,d.y,0),N=a.tgtIntn=M,D=a.intersectionPts={x1:S[0],x2:M[0],y1:S[1],y2:M[1]},I=a.posPts={x1:d.x,x2:p.x,y1:d.y,y2:p.y},O=M[1]-S[1],L=M[0]-S[0],P=Math.sqrt(L*L+O*O),B=a.vector={x:L,y:O},F=a.vectorNorm={x:B.x/P,y:B.y/P},j={x:-F.y,y:F.x};a.nodesOverlap=!v(P)||w.checkPoint(S[0],S[1],0,y,_,p.x,p.y)||b.checkPoint(M[0],M[1],0,g,m,d.x,d.y),a.vectorNormInverse=j,s={nodesOverlap:a.nodesOverlap,dirCounts:a.dirCounts,calculatedIntersection:!0,hasBezier:a.hasBezier,hasUnbundled:a.hasUnbundled,eles:a.eles,srcPos:p,tgtPos:d,srcW:y,srcH:_,tgtW:g,tgtH:m,srcIntn:N,tgtIntn:T,srcShape:w,tgtShape:b,posPts:{x1:I.x2,y1:I.y2,x2:I.x1,y2:I.y1},intersectionPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},vector:{x:-B.x,y:-B.y},vectorNorm:{x:-F.x,y:-F.y},vectorNormInverse:{x:-j.x,y:-j.y}}}var R=C?s:a;E.nodesOverlap=R.nodesOverlap,E.srcIntn=R.srcIntn,E.tgtIntn=R.tgtIntn,r&&(c.isParent()||c.isChild()||f.isParent()||f.isChild())&&(c.parents().anySame(f)||f.parents().anySame(c)||c.same(f))?e.findCompoundLoopPoints(k,R,x,A):c===f?e.findLoopPoints(k,R,x,A):"segments"===z?e.findSegmentsPoints(k,R):"taxi"===z?e.findTaxiPoints(k,R):"straight"===z||!A&&a.eles.length%2==1&&x===Math.floor(a.eles.length/2)?e.findStraightEdgePoints(k):e.findBezierPoints(k,R,x,A,C),e.findEndpoints(k),e.tryToCorrectInvalidPoints(k,R),e.checkForInvalidEdgeWarning(k),e.storeAllpts(k),e.storeEdgeProjections(k),e.calculateArrowAngles(k),e.recalculateEdgeLabelProjections(k),e.calculateLabelAngles(k)}},_=0;_<o.length;_++)y(_);this.findHaystackPoints(a)}},Zo.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),Qo(e.segpts)},Zo.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),Qo(e.ctrlpts)},Zo.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Jo={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*r),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var a=e.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(r,i),l=[n.x+Math.cos(a)*s,n.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,l[0],l[1],0)},findEndpoints:function(t){var e,n,r,i,o,a=this,s=t.source()[0],l=t.target()[0],u=s.position(),c=l.position(),f=t.pstyle("target-arrow-shape").value,h=t.pstyle("source-arrow-shape").value,d=t.pstyle("target-distance-from-node").pfValue,p=t.pstyle("source-distance-from-node").pfValue,g=t._private.rscratch,m=g.edgeType,y="self"===m||"compound"===m,_="bezier"===m||"multibezier"===m||y,b="bezier"!==m,w="straight"===m||"segments"===m,x="segments"===m,k=_||b||w,E=t.pstyle("source-endpoint"),z=y?"outside-to-node":E.value,A=t.pstyle("target-endpoint"),C=y?"outside-to-node":A.value;if(g.srcManEndpt=E,g.tgtManEndpt=A,_){var S=[g.ctrlpts[0],g.ctrlpts[1]];n=b?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:S,r=S}else if(w){var T=x?g.segpts.slice(0,2):[c.x,c.y];n=x?g.segpts.slice(g.segpts.length-2):[u.x,u.y],r=T}if("inside-to-node"===C)e=[c.x,c.y];else if(A.units)e=this.manualEndptToPx(l,A);else if("outside-to-line"===C)e=g.tgtIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?i=n:"outside-to-line"!==C&&"outside-to-line-or-label"!==C||(i=[u.x,u.y]),e=a.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var M=l._private.rscratch,N=M.labelWidth,D=M.labelHeight,I=M.labelX,O=M.labelY,L=l.pstyle("text-valign").value;"top"===L?O-=D/2:"bottom"===L&&(O+=D/2);var P=l.pstyle("text-halign").value;"left"===P?I-=N/2:"right"===P&&(I+=N/2);var B=a.nodeShapes.rectangle.intersectLine(I,O,N,D,i[0],i[1],0),F=u,j=ae(F,ee(e));ae(F,ee(B))<j&&(e=B)}var R=Ie(e,n,a.arrowShapes[f].spacing(t)+d),H=Ie(e,n,a.arrowShapes[f].gap(t)+d);if(g.endX=H[0],g.endY=H[1],g.arrowEndX=R[0],g.arrowEndY=R[1],"inside-to-node"===z)e=[u.x,u.y];else if(E.units)e=this.manualEndptToPx(s,E);else if("outside-to-line"===z)e=g.srcIntn;else if("outside-to-node"===z||"outside-to-node-or-label"===z?o=r:"outside-to-line"!==z&&"outside-to-line-or-label"!==z||(o=[c.x,c.y]),e=a.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===z||"outside-to-line-or-label"===z){var q=s._private.rscratch,W=q.labelWidth,$=q.labelHeight,U=q.labelX,V=q.labelY,Y=s.pstyle("text-valign").value;"top"===Y?V-=$/2:"bottom"===Y&&(V+=$/2);var X=s.pstyle("text-halign").value;"left"===X?U-=W/2:"right"===X&&(U+=W/2);var K=a.nodeShapes.rectangle.intersectLine(U,V,W,$,o[0],o[1],0),G=c,Z=ae(G,ee(e));ae(G,ee(K))<Z&&(e=K)}var Q=Ie(e,r,a.arrowShapes[h].spacing(t)+p),J=Ie(e,r,a.arrowShapes[h].gap(t)+p);g.startX=J[0],g.startY=J[1],g.arrowStartX=Q[0],g.arrowStartY=Q[1],k&&(g.badLine=!(v(g.startX)&&v(g.startY)&&v(g.endX)&&v(g.endY)))},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}}},ta={};function ea(t,e,n){for(var r=function(t,e,n,r){return le(t,e,n,r)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var a=t.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],a),y:r(n[1],n[3],n[5],a)})}}ta.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)ea(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var o=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},ta.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var na={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!k(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(u){case"left":n=l.x-o/2-s;break;case"right":n=l.x+o/2+s;break;default:n=l.x}switch(c){case"top":r=l.y-a/2-s;break;case"bottom":r=l.y+a/2+s;break;default:r=l.y}f.labelX=n,f.labelY=r,h.labelX=n,h.labelY=r,this.applyLabelDimensions(t)}}},ra=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},ia=function(t,e){return ra(e.x-t.x,e.y-t.y)};na.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){var a=function(t,e,r){Dt(n.rscratch,t,e,r),Dt(n.rstyle,t,e,r)};a("labelX",null,(e={x:r.midX,y:r.midY}).x),a("labelY",null,e.y);var s=ra(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var l=function(s){var l,u="source"===s;if(o[s]){var c=t.pstyle(s+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var f,h=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<r.allpts.length;o+=4)e.push({p0:{x:r.allpts[o],y:r.allpts[o+1]},p1:{x:r.allpts[o+2],y:r.allpts[o+3]},p2:{x:r.allpts[o+4],y:r.allpts[o+5]},startDist:0,length:0,segments:[]});var a=n.rstyle.bezierPts,s=i.bezierProjPcts.length;function l(t,e,n,r,i){var o=oe(e,n),a=t.segments[t.segments.length-1];t.segments.push({p0:e,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o}),t.length+=o}for(o=0;o<e.length;o++){var u=e[o],c=e[o-1];c&&(u.startDist=c.startDist+c.length),l(u,u.p0,a[o*s],0,i.bezierProjPcts[0]);for(var f=0;f<s-1;f++)l(u,a[o*s+f],a[o*s+f+1],i.bezierProjPcts[f],i.bezierProjPcts[f+1]);l(u,a[o*s+s-1],u.p2,i.bezierProjPcts[s-1],1)}return t.cache=e}(),d=0,p=0,g=0;g<h.length;g++){for(var v=h[u?g:h.length-1-g],m=0;m<v.segments.length;m++){var y=v.segments[u?m:v.segments.length-1-m];if(d=p,(p+=y.length)>=c||g===h.length-1&&m===v.segments.length-1){f={cp:v,segment:y};break}}if(f)break}v=f.cp;var _=(c-d)/(y=f.segment).length,b=y.t1-y.t0,w=u?y.t0+b*_:y.t1-b*_;w=ce(0,w,1),e=ue(v.p0,v.p1,v.p2,w),l=function(t,e,n,r){var i=ce(0,r-.001,1),o=ce(0,r+.001,1),a=ue(t,e,n,i),s=ue(t,e,n,o);return ia(a,s)}(v.p0,v.p1,v.p2,w);break;case"straight":case"segments":case"haystack":var x,k,E,z,A=0,C=r.allpts.length;for(g=0;g+3<C&&(u?(E={x:r.allpts[g],y:r.allpts[g+1]},z={x:r.allpts[g+2],y:r.allpts[g+3]}):(E={x:r.allpts[C-2-g],y:r.allpts[C-1-g]},z={x:r.allpts[C-4-g],y:r.allpts[C-3-g]}),k=A,!((A+=x=oe(E,z))>=c));g+=2);w=ce(0,w=(c-k)/x,1),e=function(t,e,n,r){var i=z.x-t.x,o=z.y-t.y,a=oe(t,z);return n=null==n?0:n,{x:t.x+i/a*(r=null!=r?r:n*a),y:t.y+o/a*r}}(E,0,w),l=ia(E,z)}a("labelX",s,e.x),a("labelY",s,e.y),a("labelAutoAngle",s,l)}};l("source"),l("target"),this.applyLabelDimensions(t)}},na.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},na.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r);Dt(n.rstyle,"labelWidth",e,i.width),Dt(n.rscratch,"labelWidth",e,i.width),Dt(n.rstyle,"labelHeight",e,i.height),Dt(n.rscratch,"labelHeight",e,i.height)},na.getLabelText=function(t,e){var n=t._private,r=t.pstyle((e?e+"-":"")+"label").strValue,i=t.pstyle("text-transform").value,o=function(t,r){return r?(Dt(n.rscratch,t,e,r),r):Nt(n.rscratch,t,e)};if(!r)return"";"none"==i||("uppercase"==i?r=r.toUpperCase():"lowercase"==i&&(r=r.toLowerCase()));var a=t.pstyle("text-wrap").value;if("wrap"===a){var s=o("labelKey");if(null!=s&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var l=r.split("\n"),u=t.pstyle("text-max-width").pfValue,c=[],f=0;f<l.length;f++){var h=l[f];if(this.calculateLabelDimensions(t,h).width>u){for(var d=h.split(/\s+/),p="",g=0;g<d.length;g++){var v=d[g];this.calculateLabelDimensions(t,0===p.length?v:p+" "+v).width<=u?p+=v+" ":(c.push(p),p=v+" ")}p.match(/^\s+$/)||c.push(p)}else c.push(h)}o("labelWrapCachedLines",c),r=o("labelWrapCachedText",c.join("\n")),o("labelWrapKey",s)}else if("ellipsis"===a){u=t.pstyle("text-max-width").pfValue;for(var m="",y=!1,_=0;_<r.length&&!(this.calculateLabelDimensions(t,m+r[_]+"\u2026").width>u);_++)m+=r[_],_===r.length-1&&(y=!0);return y||(m+="\u2026"),m}return r},na.calculateLabelDimensions=function(t,e){var n=ct(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var o=t.pstyle("font-style").strValue,a=1*t.pstyle("font-size").pfValue+"px",s=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,u=this.labelCalcDiv;u||(u=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(u));var c=u.style;return c.fontFamily=s,c.fontStyle=o,c.fontSize=a,c.fontWeight=l,c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none",c.padding="0",c.lineHeight="1",c.whiteSpace="wrap"===t.pstyle("text-wrap").value?"pre":"normal",u.textContent=e,r[n]={width:Math.ceil(u.clientWidth/1),height:Math.ceil(u.clientHeight/1)}},na.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=t.pstyle((e?e+"-":"")+"text-rotation"),o=i.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:i.pfValue},na.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var oa={},aa=!1;oa.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return aa||(kt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),aa=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"cutrectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var sa={};[Ko,Go,Zo,Jo,ta,na,oa,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++)t[r]._private.rstyle.clean=!1};n.binder(t).on("bounds.* dirty.*",function(t){r(t.target)}).on("style.* background.*",function(t){r(t.target,!1)});var i=function(i){if(i){for(var o=n.onUpdateEleCalcsFns,a=0;a<e.length;a++){var s=e[a];s.isNode()&&!s._private.rstyle.clean&&r(s.connectedEdges())}if(o)for(a=0;a<o.length;a++)(0,o[a])(i,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=[],r=[];if(!this.destroyed){void 0===e&&(e=!0);for(var i=0;i<t.length;i++){var o=(l=(s=t[i])._private).rstyle;e&&o.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===l.group?r.push(s):n.push(s),o.clean=!0)}for(i=0;i<r.length;i++){o=(l=(s=r[i])._private).rstyle;var a=s.position();this.recalculateNodeLabelProjection(s),o.nodeX=a.x,o.nodeY=a.y,o.nodeW=s.pstyle("width").pfValue,o.nodeH=s.pstyle("height").pfValue}for(this.recalculateEdgeProjections(n),i=0;i<n.length;i++){o=(l=(s=n[i])._private).rstyle;var s,l,u=l.rscratch;o.srcX=u.arrowStartX,o.srcY=u.arrowStartY,o.tgtX=u.arrowEndX,o.tgtY=u.arrowEndY,o.midX=u.midX,o.midY=u.midY,o.labelAngle=u.labelAngle,o.sourceLabelAngle=u.sourceLabelAngle,o.targetLabelAngle=u.targetLabelAngle}}}},{updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(hi),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}}].forEach(function(t){I(sa,t)});var la={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[t]=r[t]||{}).image=new Image;return o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0}),"data:"===t.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=e),o.src=t,o}},ua={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},binder:function(t){var e=this,n=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==e.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(t){}e.supportsPassiveEvents=r}var o=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=function(t){return t.selected()},n=function(e,n,r,i){null==e&&(e=t.cy);for(var o=0;o<n.length;o++)e.emit({originalEvent:r,type:n[o],position:i})},r=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},i=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.isEdge()){for(var i=0;n&&i<n.length;i++)if((e=n[i]).isNode()&&e.isParent()){r=!1;break}}else r=!0;return r},o=function(t){t[0]._private.rscratch.inDragLayer=!0},a=function(t){t[0]._private.rscratch.isGrabTarget=!0},s=function(t,e){var n=e.addToList;n.has(t)||(n.merge(t),function(t){t[0]._private.grabbed=!0}(t))},l=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(o),e.neighborhood().stdFilter(function(t){return!r||t.isEdge()}).forEach(o)),n.addToList&&e.forEach(function(t){s(t,n)}),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(o),n.connectedEdges().forEach(o)),e.addToList&&e.addToList.unmerge(n)}}(e,n),f(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},u=l,c=function(e){e&&(t.getCachedZSortedEles().forEach(function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)}),t.updateCachedGrabbedEles())},f=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(o),r.forEach(o)),e.addToList&&r.forEach(function(t){s(t,e)})}}},h=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},d="undefined"!=typeof MutationObserver;d?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++)if(r[i]===t.container){t.destroy();break}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(e){t.destroy()});var p=et(function(){t.cy.resize()},100);d&&(t.styleObserver=new MutationObserver(p),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",p);var g=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,function(e){t.registerBinding(e,"transitionend",g),t.registerBinding(e,"animationend",g),t.registerBinding(e,"scroll",g)}),t.registerBinding(t.container,"contextmenu",function(t){t.preventDefault()});var m,y,_,b,w,x,k,E,z,A,C,S,T,M=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],l=!1,u=0;u<s.length;u++){var c=s[u];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var f=t.container,h=e.target.parentNode,d=!1;h;){if(h===f){d=!0;break}h=h.parentNode}return!!d};t.registerBinding(t.container,"mousedown",function(e){if(M(e)){e.preventDefault(),h(),t.hoverData.capture=!0,t.hoverData.which=e.which;var r=t.cy,i=[e.clientX,e.clientY],o=t.projectIntoViewport(i[0],i[1]),s=t.selection,c=t.findNearestElements(o[0],o[1],!0,!1),f=c[0],d=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i,3==e.which){t.hoverData.cxtStarted=!0;var p={originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}};f?(f.activate(),f.emit(p),t.hoverData.down=f):r.emit(p),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(f&&f.activate(),null!=f&&t.nodeIsGrabbable(f)){var g=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(a(f),f.selected()){d=t.dragData.possibleDragElements=r.collection();var v=r.$(function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)});l(v,{addToList:d}),f.emit(g("grabon")),v.forEach(function(t){t.emit(g("grab"))})}else d=t.dragData.possibleDragElements=r.collection(),u(f,{addToList:d}),f.emit(g("grabon")).emit(g("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=f,t.hoverData.downs=c,t.hoverData.downTime=(new Date).getTime(),n(f,["mousedown","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==f?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):f.isEdge()&&(s[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}})}},t.tapholdDuration)}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}},!1),t.registerBinding(window,"mousemove",function(e){if(t.hoverData.capture||M(e)){var o=!1,a=t.cy,s=a.zoom(),u=[e.clientX,e.clientY],f=t.projectIntoViewport(u[0],u[1]),h=t.hoverData.mdownPos,d=t.hoverData.mdownGPos,p=t.selection,g=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(g=t.findNearestElement(f[0],f[1],!0,!1));var m,y=t.hoverData.last,_=t.hoverData.down,b=[f[0]-p[2],f[1]-p[3]],w=t.dragData.possibleDragElements;if(d){var x=u[0]-d[0],k=u[1]-d[1];t.hoverData.isOverThresholdDrag=m=x*x+k*k>=t.desktopTapThreshold2}var E=r(e);m&&(t.hoverData.tapholdCancelled=!0),o=!0,n(g,["mousemove","vmousemove","tapdrag"],e,{x:f[0],y:f[1]});var z=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:f[0],y:f[1]}}),p[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(m){var A={originalEvent:e,type:"cxtdrag",position:{x:f[0],y:f[1]}};_?_.emit(A):a.emit(A),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&g===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:f[0],y:f[1]}}),t.hoverData.cxtOver=g,g&&g.emit({originalEvent:e,type:"cxtdragover",position:{x:f[0],y:f[1]}}))}}else if(t.hoverData.dragging){if(o=!0,a.panningEnabled()&&a.userPanningEnabled()){var C;if(t.hoverData.justStartedPan){var S=t.hoverData.mdownPos;C={x:(f[0]-S[0])*s,y:(f[1]-S[1])*s},t.hoverData.justStartedPan=!1}else C={x:b[0]*s,y:b[1]*s};a.panBy(C),t.hoverData.dragged=!0}f=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=p[4]||null!=_&&!_.isEdge()){if(_&&_.isEdge()&&_.active()&&_.unactivate(),_&&_.grabbed()||g==y||(y&&n(y,["mouseout","tapdragout"],e,{x:f[0],y:f[1]}),g&&n(g,["mouseover","tapdragover"],e,{x:f[0],y:f[1]}),t.hoverData.last=g),_)if(m){if(a.boxSelectionEnabled()&&E)_&&_.grabbed()&&(c(w),_.emit("freeon"),w.emit("free"),t.dragData.didDrag&&(_.emit("dragfreeon"),w.emit("dragfree"))),z();else if(_&&_.grabbed()&&t.nodeIsDraggable(_)){var T=!t.dragData.didDrag;T&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var N=a.collection();t.hoverData.draggingEles||l(w,{inDragLayer:!0});var D={x:0,y:0};if(v(b[0])&&v(b[1])&&(D.x+=b[0],D.y+=b[1],T)){var I=t.hoverData.dragDelta;I&&v(I[0])&&v(I[1])&&(D.x+=I[0],D.y+=I[1])}for(var O=0;O<w.length;O++){var L=w[O];t.nodeIsDraggable(L)&&L.grabbed()&&N.merge(L)}t.hoverData.draggingEles=!0,N.silentShift(D).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(b[0]),e.push(b[1])):(e[0]+=b[0],e[1]+=b[1])}();o=!0}else m&&(t.hoverData.dragging||!a.boxSelectionEnabled()||!E&&a.panningEnabled()&&a.userPanningEnabled()?!t.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()&&i(_,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,p[4]=0,t.data.bgActivePosistion=ee(h),t.redrawHint("select",!0),t.redraw()):z(),_&&_.isEdge()&&_.active()&&_.unactivate());return p[2]=f[0],p[3]=f[1],o?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}},!1),t.registerBinding(window,"mouseup",function(i){if(t.hoverData.capture){t.hoverData.capture=!1;var o=t.cy,a=t.projectIntoViewport(i.clientX,i.clientY),s=t.selection,l=t.findNearestElement(a[0],a[1],!0,!1),u=t.dragData.possibleDragElements,f=t.hoverData.down,h=r(i);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,f&&f.unactivate(),3===t.hoverData.which){var d={originalEvent:i,type:"cxttapend",position:{x:a[0],y:a[1]}};if(f?f.emit(d):o.emit(d),!t.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:a[0],y:a[1]}};f?f.emit(p):o.emit(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(l,["mouseup","tapend","vmouseup"],i,{x:a[0],y:a[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||n(f,["click","tap","vclick"],i,{x:a[0],y:a[1]}),null!=f||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(i)||(o.$(e).unselect(["tapunselect"]),u.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=u=o.collection()),l!=f||t.dragData.didDrag||t.hoverData.selecting||null!=l&&l._private.selectable&&(t.hoverData.dragging||("additive"===o.selectionType()||h?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):h||(o.$(e).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var g=o.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),g.length>0&&t.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:i,position:{x:a[0],y:a[1]}});var v=function(t){return t.selectable()&&!t.selected()};"additive"===o.selectionType()?g.emit("box").stdFilter(v).select().emit("boxselect"):(h||o.$(e).unmerge(g).unselect(),g.emit("box").stdFilter(v).select().emit("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var m=f&&f.grabbed();c(u),m&&(f.emit("freeon"),u.emit("free"),t.dragData.didDrag&&(f.emit("dragfreeon"),u.emit("dragfree")))}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1),t.registerBinding(t.container,"wheel",function(e){if(!t.scrollingPage){var n,r=t.cy,i=t.projectIntoViewport(e.clientX,e.clientY),o=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4]?e.preventDefault():r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()&&(e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),n=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,n*=t.wheelSensitivity,1===e.deltaMode&&(n*=33),r.zoom({level:r.zoom()*Math.pow(10,n),renderedPosition:{x:o[0],y:o[1]}}))}},!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"mouseout",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),t.registerBinding(t.container,"mouseover",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var N,D,I,O,L=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},P=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",N=function(e){if(M(e)){h(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(e.touches[0]){var s=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(e.touches[1]&&(s=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),i[2]=s[0],i[3]=s[1]),e.touches[2]&&(s=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),i[4]=s[0],i[5]=s[1]),e.touches[1]){c(t.dragData.touchDragEles);var f=t.findContainerClientCoords();C=f[2],S=f[3],y=e.touches[0].clientY-(A=f[1]),_=e.touches[1].clientX-(z=f[0]),b=e.touches[1].clientY-A,T=0<=(m=e.touches[0].clientX-z)&&m<=C&&0<=_&&_<=C&&0<=y&&y<=S&&0<=b&&b<=S;var d=r.pan(),p=r.zoom();if(w=L(m,y,_,b),x=P(m,y,_,b),E=[((k=[(m+_)/2,(y+b)/2])[0]-d.x)/p,(k[1]-d.y)/p],x<4e4&&!e.touches[2]){var g=t.findNearestElement(i[0],i[1],!0,!0),v=t.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):v&&v.isNode()?(v.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=v):r.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2]);else if(e.touches[1]);else if(e.touches[0]){var N=t.findNearestElements(i[0],i[1],!0,!0),D=N[0];if(null!=D&&(D.activate(),t.touchData.start=D,t.touchData.starts=N,t.nodeIsGrabbable(D))){var I=t.dragData.touchDragEles=r.collection(),O=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),D.selected()?(O=r.$(function(e){return e.selected()&&t.nodeIsGrabbable(e)}),l(O,{addToList:I})):u(D,{addToList:I}),a(D);var B=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};D.emit(B("grabon")),O?O.forEach(function(t){t.emit(B("grab"))}):D.emit(B("grab"))}n(D,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==D&&(t.data.bgActivePosistion={x:s[0],y:s[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})},t.tapholdDuration)}if(e.touches.length>=1){for(var F=t.touchData.startPosition=[],j=0;j<i.length;j++)F[j]=o[j]=i[j];var R=e.touches[0];t.touchData.startGPosition=[R.clientX,R.clientY]}}},!1),t.registerBinding(window,"touchmove",D=function(e){var r=t.touchData.capture;if(r||M(e)){var o=t.selection,a=t.cy,s=t.touchData.now,u=t.touchData.earlier,f=a.zoom();if(e.touches[0]){var h=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=h[0],s[1]=h[1]}e.touches[1]&&(h=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=h[0],s[3]=h[1]),e.touches[2]&&(h=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=h[0],s[5]=h[1]);var d,p=t.touchData.startGPosition;if(r&&e.touches[0]&&p){for(var g=[],k=0;k<s.length;k++)g[k]=s[k]-u[k];var C=e.touches[0].clientX-p[0],S=e.touches[0].clientY-p[1];d=C*C+S*S>=t.touchTapThreshold2}if(r&&t.touchData.cxt){e.preventDefault();var N=e.touches[0].clientX-z,D=e.touches[0].clientY-A,I=e.touches[1].clientX-z,O=e.touches[1].clientY-A,B=P(N,D,I,O);if(B/x>=2.25||B>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var F={originalEvent:e,type:"cxttapend",position:{x:s[0],y:s[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(F),t.touchData.start=null):a.emit(F)}}if(r&&t.touchData.cxt){F={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(F):a.emit(F),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var j=t.findNearestElement(s[0],s[1],!0,!0);t.touchData.cxtOver&&j===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),t.touchData.cxtOver=j,j&&j.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&e.touches[2]&&a.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),t.touchData.selecting=!0,t.redrawHint("select",!0),o&&0!==o.length&&void 0!==o[0]?(o[2]=(s[0]+s[2]+s[4])/3,o[3]=(s[1]+s[3]+s[5])/3):(o[0]=(s[0]+s[2]+s[4])/3,o[1]=(s[1]+s[3]+s[5])/3,o[2]=(s[0]+s[2]+s[4])/3+1,o[3]=(s[1]+s[3]+s[5])/3+1),o[4]=1,t.touchData.selecting=!0,t.redraw();else if(r&&e.touches[1]&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),J=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var R=0;R<J.length;R++){var H=J[R]._private;H.grabbed=!1,H.rscratch.inDragLayer=!1}}var q=t.touchData.start,W=L(N=e.touches[0].clientX-z,D=e.touches[0].clientY-A,I=e.touches[1].clientX-z,O=e.touches[1].clientY-A),$=W/w;if(T){var U=(N-m+(I-_))/2,V=(D-y+(O-b))/2,Y=a.zoom(),X=Y*$,K=a.pan(),G=E[0]*Y+K.x,Z=E[1]*Y+K.y,Q={x:-X/Y*(G-K.x-U)+G,y:-X/Y*(Z-K.y-V)+Z};if(q&&q.active()){var J=t.dragData.touchDragEles;c(J),t.redrawHint("drag",!0),t.redrawHint("eles",!0),q.unactivate().emit("freeon"),J.emit("free"),t.dragData.didDrag&&(q.emit("dragfreeon"),J.emit("dragfree"))}a.viewport({zoom:X,pan:Q,cancelOnFailedZoom:!0}),w=W,m=N,y=D,_=I,b=O,t.pinching=!0}e.touches[0]&&(h=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=h[0],s[1]=h[1]),e.touches[1]&&(h=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=h[0],s[3]=h[1]),e.touches[2]&&(h=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=h[0],s[5]=h[1])}else if(e.touches[0]){var tt=t.touchData.start,et=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(j=t.findNearestElement(s[0],s[1],!0,!0)),r&&null!=tt&&e.preventDefault(),r&&null!=tt&&t.nodeIsDraggable(tt))if(d){J=t.dragData.touchDragEles;var nt=!t.dragData.didDrag;nt&&l(J,{inDragLayer:!0}),t.dragData.didDrag=!0;var rt={x:0,y:0};v(g[0])&&v(g[1])&&(rt.x+=g[0],rt.y+=g[1],nt&&(t.redrawHint("eles",!0),(it=t.touchData.dragDelta)&&v(it[0])&&v(it[1])&&(rt.x+=it[0],rt.y+=it[1]))),t.hoverData.draggingEles=!0,J.silentShift(rt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==u[0]&&t.touchData.startPosition[1]==u[1]&&t.redrawHint("eles",!0),t.redraw()}else{var it;0===(it=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(it.push(g[0]),it.push(g[1])):(it[0]+=g[0],it[1]+=g[1])}if(n(tt||j,["touchmove","tapdrag","vmousemove"],e,{x:s[0],y:s[1]}),tt&&tt.grabbed()||j==et||(et&&et.emit({originalEvent:e,type:"tapdragout",position:{x:s[0],y:s[1]}}),j&&j.emit({originalEvent:e,type:"tapdragover",position:{x:s[0],y:s[1]}})),t.touchData.last=j,r)for(R=0;R<s.length;R++)s[R]&&t.touchData.startPosition[R]&&d&&(t.touchData.singleTouchMoved=!0);r&&(null==tt||tt.isEdge())&&a.panningEnabled()&&a.userPanningEnabled()&&(i(tt,t.touchData.starts)&&(e.preventDefault(),t.swipePanning?a.panBy({x:g[0]*f,y:g[1]*f}):d&&(t.swipePanning=!0,a.panBy({x:C*f,y:S*f}),tt&&(tt.unactivate(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ee(t.touchData.startPosition)),t.redrawHint("select",!0),t.touchData.start=null))),h=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=h[0],s[1]=h[1])}for(k=0;k<s.length;k++)u[k]=s[k];r&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",I=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",O=function(r){var i=t.touchData.start;if(t.touchData.capture){0===r.touches.length&&(t.touchData.capture=!1),r.preventDefault();var o=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var a,s=t.cy,l=s.zoom(),u=t.touchData.now,f=t.touchData.earlier;if(r.touches[0]){var h=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=h[0],u[1]=h[1]}if(r.touches[1]&&(h=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),u[2]=h[0],u[3]=h[1]),r.touches[2]&&(h=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),u[4]=h[0],u[5]=h[1]),i&&i.unactivate(),t.touchData.cxt){if(a={originalEvent:r,type:"cxttapend",position:{x:u[0],y:u[1]}},i?i.emit(a):s.emit(a),!t.touchData.cxtDragged){var d={originalEvent:r,type:"cxttap",position:{x:u[0],y:u[1]}};i?i.emit(d):s.emit(d)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=s.collection(t.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,t.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:u[0],y:u[1]}}),p.emit("box").stdFilter(function(t){return t.selectable()&&!t.selected()}).select().emit("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),r.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=i){var v=i._private.grabbed;c(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),v&&(i.emit("freeon"),g.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]}),i.unactivate(),t.touchData.start=null}else{var m=t.findNearestElement(u[0],u[1],!0,!0);n(m,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]})}var y=t.touchData.startPosition[0]-u[0],_=t.touchData.startPosition[1]-u[1],b=(y*y+_*_)*l*l;t.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:u[0],y:u[1]})),null!=i&&!t.dragData.didDrag&&i._private.selectable&&b<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(e).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var w=0;w<u.length;w++)f[w]=u[w];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null),r.touches.length<2&&(t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var B=[],F=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},j=function(t){for(var e=0;e<B.length;e++)if(B[e].event.pointerId===t.pointerId)return void B.splice(e,1)},R=function(t){t.touches=B.map(function(t){return t.touch})},H=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",function(t){H(t)||(t.preventDefault(),function(t){B.push(function(t){return{event:t,touch:F(t)}}(t))}(t),R(t),N(t))}),t.registerBinding(t.container,"pointerup",function(t){H(t)||(j(t),R(t),O(t))}),t.registerBinding(t.container,"pointercancel",function(t){H(t)||(j(t),R(t),I())}),t.registerBinding(t.container,"pointermove",function(t){H(t)||(t.preventDefault(),function(t){var e=B.filter(function(e){return e.event.pointerId===t.pointerId})[0];e.event=t,e.touch=F(t)}(t),R(t),D(t))})}}},ca={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return De(i,o,this.points,t,e,n/2,r/2,a)},checkPoint:function(t,e,n,r,i,o,a){return ze(t,e,this.points,o,a,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(n-t)*c+t,(r-e)*c+e]}(i,o,t,e,n/2+a,r/2+a)},checkPoint:function(t,e,n,r,i,o,a){return Se(t,e,r,i,o,a,n)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Oe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return _e(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Be(r,i),l=2*s;return!!(ze(t,e,this.points,o,a,r,i-l,[0,-1],n)||ze(t,e,this.points,o,a,r-l,i,[0,-1],n)||Se(t,e,l,l,o-r/2+s,a-i/2+s,n)||Se(t,e,l,l,o+r/2-s,a-i/2+s,n)||Se(t,e,l,l,o+r/2-s,a+i/2-s,n)||Se(t,e,l,l,o-r/2+s,a+i/2-s,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Oe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,a=t/2,s=n-a,l=n+a,u=r-o,c=r+o;return{topLeft:[s,u+i,s+i,u,s+i,u+i],topRight:[l-i,u,l,u+i,l-i,u+i],bottomRight:[l,c-i,l-i,c,l-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateCutTrianglePts(n+2*a,r+2*a,t,e),l=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return De(i,o,l,t,e)},checkPoint:function(t,e,n,r,i,o,a){if(ze(t,e,this.points,o,a,r,i-2*this.cornerLength,[0,-1],n))return!0;if(ze(t,e,this.points,o,a,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,o,a);return Ee(t,e,s.topLeft)||Ee(t,e,s.topRight)||Ee(t,e,s.bottomRight)||Ee(t,e,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Oe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateBarrelBezierPts(n+2*a,r+2*a,t,e),l=function(t){var e=ue({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=ue({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),r=ue({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},u=[].concat(l(s.topLeft),l(s.topRight),l(s.bottomRight),l(s.bottomLeft));return De(i,o,u,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,o=t/2,a=n-o,s=n+o,l=r-i,u=r+i,c=Fe(t,e),f=c.heightOffset,h=c.widthOffset,d=c.ctrlPtOffsetPct*t,p={topLeft:[a,l+f,a+d,l,a+h,l],topRight:[s-h,l,s-d,l,s,l+f],bottomRight:[s,u-f,s-d,u,s-h,u],bottomLeft:[a+h,u,a+d,u,a,u-f]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(t,e,n,r,i,o,a){var s=Fe(r,i),l=s.widthOffset;if(ze(t,e,this.points,o,a,r,i-2*s.heightOffset,[0,-1],n))return!0;if(ze(t,e,this.points,o,a,r-2*l,i,[0,-1],n))return!0;for(var u=this.generateBarrelBezierPts(r,i,o,a),c=function(t,e,n){var r,i,o=n[4],a=n[2],s=n[0],l=n[5],u=n[1],c=Math.min(o,s),f=Math.max(o,s),h=Math.min(l,u),d=Math.max(l,u);if(c<=t&&t<=f&&h<=e&&e<=d){var p=[(r=o)-2*(i=a)+s,2*(i-r),r],g=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*t;return[(-e+o)/a,(-e-o)/a]}(p[0],p[1],p[2],t).filter(function(t){return 0<=t&&t<=1});if(g.length>0)return g[0]}return null},f=Object.keys(u),h=0;h<f.length;h++){var d=u[f[h]],p=c(t,e,d);if(null!=p){var g=le(d[5],d[3],d[1],p);if(d.isTop&&g<=e)return!0;if(d.isBottom&&e<=g)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Oe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=e-(r/2+a),l=Ne(i,o,t,e,t-(n/2+a),s,t+(n/2+a),s,!1);return l.length>0?l:_e(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Be(r,i),l=2*s;if(ze(t,e,this.points,o,a,r,i-l,[0,-1],n))return!0;if(ze(t,e,this.points,o,a,r-l,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n;return!!Ee(t,e,[o-u,a-c,o-u,a,o+u,a,o+u,a-c])||!!Se(t,e,l,l,o+r/2-s,a+i/2-s,n)||!!Se(t,e,l,l,o-r/2+s,a+i/2-s,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Oe(3,0)),this.generatePolygon("rectangle",Oe(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",Oe(5,0)),this.generatePolygon("hexagon",Oe(6,0)),this.generatePolygon("heptagon",Oe(7,0)),this.generatePolygon("octagon",Oe(8,0));var n=new Array(20),r=Pe(5,0),i=Pe(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var a=0;a<i.length/2;a++)i[2*a]*=o,i[2*a+1]*=o;for(a=0;a<5;a++)n[4*a]=r[2*a],n[4*a+1]=r[2*a+1],n[4*a+2]=i[2*a],n[4*a+3]=i[2*a+1];n=Le(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]),this.generatePolygon("tag",[-1,-1,.25,-1,1,0,.25,1,-1,1]),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}},fa={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Ct();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&wt("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(t,e){return e.priority-t.priority})}}},ha=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};fa.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,ot(function n(r){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){ha(t,!0,r);var i=at();t.render(t.renderOptions);var o=t.lastDrawTime=at();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var a=o-i;t.redrawTotalTime+=a,t.lastRedrawTime=a,t.averageRedrawTime=t.averageRedrawTime/2+a/2,t.requestedFrame=!1}else ha(t,!1,r);t.skipFrame=!1,ot(n)}}))};var da=function(t){this.init(t)},pa=da.prototype;pa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],pa.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(o){var r=o.document,i=r.head,a="__________cytoscape_container",s=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(a)<0&&(n.className=(n.className||"")+" "+a),!s){var l=r.createElement("style");l.id="__________cytoscape_stylesheet",l.innerHTML="."+a+" { position: relative; }",i.insertBefore(l,i.children[0])}"static"===o.getComputedStyle(n).getPropertyValue("position")&&kt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.hideLabelsOnViewport=t.hideLabelsOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=v(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},pa.notify=function(t,e){var n=this;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&n.cy.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},pa.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},pa.isHeadless=function(){return!1},[Xo,sa,la,ua,ca,fa].forEach(function(t){I(pa,t)});var ga=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=et(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold);n.beforeRender(function(i,o){var a=at(),s=n.averageRedrawTime,l=n.lastRedrawTime,u=[],c=n.cy.extent(),f=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var h=at(),d=h-a,p=h-o;if(l<1e3/60){if(p>=t.deqFastCost*(1e3/60-(i?s:0)))break}else if(i){if(d>=t.deqCost*l||d>=t.deqAvgCost*s)break}else if(p>=t.deqNoDrawCost*(1e3/60))break;var g=t.deq(e,f,c);if(!(g.length>0))break;for(var v=0;v<g.length;v++)u.push(g[v])}u.length>0&&(t.onDeqd(e,u),!i&&t.shouldRedraw(e,u,f,c)&&r())},(t.priority||bt)(e))}}},va=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt;e(this,t),this.idsByKey=new It,this.keyForId=new It,this.cachesByLvl=new It,this.lvls=[],this.getKey=n,this.doesEleInvalidateKey=r}return r(t,[{key:"getIdsFor",value:function(t){null==t&&wt("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new Lt,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new It,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach(function(n){return e.deleteCache(t,n)})}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),ma={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},ya=St({getKey:null,doesEleInvalidateKey:yt,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:mt,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),_a=function(t,e){this.renderer=t,this.onDequeues=[];var n=ya(e);I(this,n),this.lookup=new va(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},ba=_a.prototype;ba.reasons=ma,ba.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},ba.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},ba.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new jt(function(t,e){return e.reqs-t.reqs})},ba.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ba.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),l=this.lookup;if(0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible())return null;if(!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(re(s*n))),r<-4)r=-4;else if(s>=7.99||r>3)return null;var u=Math.pow(2,r),c=e.h*u,f=e.w*u,h=a.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,h))return null;var d,p=l.get(t,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(d=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||f>1024)return null;var g=o.getTextureQueue(d),v=g[g.length-2],m=function(){return o.recycleTexture(d,f)||o.addTexture(d,f)};v||(v=g[g.length-1]),v||(v=m()),v.width-v.usedWidth<f&&(v=m());for(var y,_=function(t){return t&&t.scaledLabelShown===h},b=i&&i===ma.dequeue,w=i&&i===ma.highQuality,x=i&&i===ma.downscale,k=r+1;k<=3;k++){var E=l.get(t,k);if(E){y=E;break}}var z=y&&y.level===r+1?y:null,A=function(){v.context.drawImage(z.texture.canvas,z.x,0,z.width,z.height,v.usedWidth,0,f,c)};if(v.context.setTransform(1,0,0,1,0,0),v.context.clearRect(v.usedWidth,0,f,d),_(z))A();else if(_(y)){if(!w)return o.queueElement(t,y.level-1),y;for(var C=y.level;C>r;C--)z=o.getElement(t,e,n,C,ma.downscale);A()}else{var S;if(!b&&!w&&!x)for(var T=r-1;T>=-4;T--){var M=l.get(t,T);if(M){S=M;break}}if(_(S))return o.queueElement(t,r),S;v.context.translate(v.usedWidth,0),v.context.scale(u,u),this.drawElement(v.context,t,e,h,!1),v.context.scale(1/u,1/u),v.context.translate(-v.usedWidth,0)}return p={x:v.usedWidth,texture:v,level:r,scale:u,width:f,height:c,scaledLabelShown:h},v.usedWidth+=Math.ceil(f+8),v.eleCaches.push(p),l.set(t,r,p),o.checkTextureFullness(v),p},ba.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},ba.invalidateElement=function(t){var e=this.lookup,n=[];if(e.isInvalid(t)){for(var r=-4;r<=3;r++){var i=e.getForCachedKey(t,r);i&&n.push(i)}if(e.invalidate(t))for(var o=0;o<n.length;o++){var a=n[o],s=a.texture;s.invalidatedWidth+=a.width,a.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(t)}},ba.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},ba.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Tt(e,t):t.fullnessChecks++},ba.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;Tt(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var a=i[o];r.deleteCache(a.key,a.level)}Mt(i),this.getRetiredTextureQueue(e).push(t)},ba.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},ba.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var o=r[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Mt(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Tt(r,o),n.push(o),o}},ba.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),o=r[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var a={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(a),r[i]=a}},ba.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,o=0;o<1&&e.size()>0;o++){var a=e.pop(),s=a.key,l=a.eles[0],u=i.hasCache(l,a.level);if(n[s]=null,!u){r.push(a);var c=this.getBoundingBox(l);this.getElement(l,c,t,a.level,ma.dequeue)}}return r},ba.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=vt,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},ba.onDequeue=function(t){this.onDequeues.push(t)},ba.offDequeue=function(t){Tt(this.onDequeues,t)},ba.setupDequeueing=ga({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var o=e[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(ve(s,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var wa=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=at()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=et(function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)},50),n.beforeRender(function(t,n){e.skipping=n-e.lastInvalidationTime<=250},n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new jt(function(t,e){return e.reqs-t.reqs}),e.setupDequeueing()},xa=wa.prototype,ka=0,Ea=Math.pow(2,53)-1;xa.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:ka=++ka%Ea,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,u=-a.bb.y1;return s.scale(n,n),s.translate(l,u),a},xa.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(re(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var a,s,l=r.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[];if(r.levelIsComplete(n,t))return c;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return s=l[e],!0},i=function(t){if(!s)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var a=c[o];a.invalid&&Tt(c,a)}}();var f=function(e){var i=(e=e||{}).after;if(function(){if(!a){a=fe();for(var e=0;e<t.length;e++)n=a,r=t[e].boundingBox(),n.x1=Math.min(n.x1,r.x1),n.x2=Math.max(n.x2,r.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,r.y1),n.y2=Math.max(n.y2,r.y2),n.h=n.y2-n.y1}var n,r}(),a.w*u*(a.h*u)>16e6)return null;var o=r.makeLayer(a,n);if(null!=i){var s=c.indexOf(i)+1;c.splice(s,0,o)}else(void 0===e.insert||e.insert)&&c.unshift(o);return o};if(r.skipping&&!o)return null;for(var h=null,d=t.length/1,p=!o,g=0;g<t.length;g++){var v=t[g],m=v._private.rscratch,y=m.imgLayerCaches=m.imgLayerCaches||{},_=y[n];if(_)h=_;else{if((!h||h.eles.length>=d||!ye(h.bb,v.boundingBox()))&&!(h=f({insert:!0,after:h})))return null;s||p?r.queueLayer(h,v):r.drawEleInLayer(h,v,n,e),h.eles.push(v),y[n]=h}}return s||(p?null:c)},xa.getEleLevelForLayerLevel=function(t,e){return t},xa.drawEleInLayer=function(t,e,n,r){var i=this.renderer,o=t.context,a=e.boundingBox();0!==a.w&&0!==a.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,n,!0),i.setImgSmoothing(o,!0))},xa.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===e.length},xa.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}}},xa.updateElementsInLayers=function(t,e){for(var n=_(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],o=n?t[r]:t[r].ele,a=o._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||e(u,o,i))}},xa.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},xa.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=at(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(t,n,r){e.invalidateLayer(t)}))},xa.invalidateLayer=function(t){if(this.lastInvalidationTime=at(),!t.invalid){var e=t.level,n=t.eles;Tt(this.layersByLevel[e],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var r=0;r<n.length;r++){var i=n[r]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}},xa.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])})},xa.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},xa.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},xa.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},xa.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[t.level]=t)}this.requestRedraw()}},xa.requestRedraw=et(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),xa.setupDequeueing=ga({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:bt,shouldRedraw:mt,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var za,Aa={};function Ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function Sa(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Ta(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];for(t.moveTo(s.x,s.y),i=1;i<a.length;i++)t.lineTo((o=a[i]).x,o.y);t.closePath&&t.closePath()}function Ma(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}Aa.arrowShapeImpl=function(t){return(za||(za={polygon:Ca,"triangle-backcurve":Sa,"triangle-tee":Ta,"triangle-cross":Ta,circle:Ma}))[t]};var Na={drawElement:function(t,e,n,r,i,o){e.isNode()?this.drawNode(t,e,n,r,i,o):this.drawEdge(t,e,n,r,i,o)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,o,a){var s=this,l=n.getBoundingBox(e);if(0!==l.w&&0!==l.h){var u=n.getElement(e,l,r,i,o);if(null!=u){var c=e.effectiveOpacity();if(0===c)return;var f,h,d,p,g,v,m=a(s,e),y=l.x1,_=l.y1,b=l.w,w=l.h;if(0!==m){var x=n.getRotationPoint(e);t.translate(d=x.x,p=x.y),t.rotate(m),(g=s.getImgSmoothing(t))||s.setImgSmoothing(t,!0);var k=n.getRotationOffset(e);f=k.x,h=k.y}else f=y,h=_;1!==c&&(t.globalAlpha=(v=t.globalAlpha)*c),t.drawImage(u.texture.canvas,u.x,0,u.width,u.height,f,h,b,w),1!==c&&(t.globalAlpha=v),0!==m&&(t.rotate(-m),t.translate(-d,-p),g||s.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},Da=function(){return 0},Ia=function(t,e){return t.getTextAngle(e,null)},Oa=function(t,e){return t.getTextAngle(e,"source")},La=function(t,e){return t.getTextAngle(e,"target")};Na.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,h=e.boundingBox(),d=!0===o?l.reasons.highQuality:null;0!==h.w&&0!==h.h&&e.visible()&&(r&&!ve(h,r)||(a.drawCachedElementPortion(t,e,l,n,i,d,Da),a.drawCachedElementPortion(t,e,u,n,i,d,Ia),e.isEdge()&&(a.drawCachedElementPortion(t,e,c,n,i,d,Oa),a.drawCachedElementPortion(t,e,f,n,i,d,La)),a.drawElementOverlay(t,e)))},Na.drawElements=function(t,e){for(var n=0;n<e.length;n++)this.drawElement(t,e[n])},Na.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++)this.drawCachedElement(t,e[i],n,r)},Na.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,n,r)}},Na.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&t.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(t,e,n,r)};for(var Pa={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=e._private.rscratch;if(e.visible()&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;n&&t.translate(-(l=n).x1,-l.y1);var u=o?e.pstyle("opacity").value:1,c=e.pstyle("line-style").value,f=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,d=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;t.lineWidth=f,t.lineCap=h,a.eleStrokeStyle(t,e,n),a.drawEdgePath(e,t,s.allpts,c),t.lineCap="butt"},p=function(){a.drawArrowheads(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:u)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var g=e.pstyle("ghost-offset-x").pfValue,v=e.pstyle("ghost-offset-y").pfValue,m=e.pstyle("ghost-opacity").value,y=u*m;t.translate(g,v),d(y),p(y),t.translate(-g,-v)}d(),p(),i&&a.drawEdgeOverlay(t,e),a.drawElementText(t,e,null,r),n&&t.translate(l.x1,l.y1)}},drawEdgeOverlay:function(t,e){if(e.visible()){var n=e.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),o=e._private.rscratch,a=2*e.pstyle("overlay-padding").pfValue,s=e.pstyle("overlay-color").value;t.lineWidth=a,t.lineCap="self"!==o.edgeType||i?"round":"butt",r.colorStrokeStyle(t,s[0],s[1],s[2],n),r.drawEdgePath(e,t,o.allpts,"solid")}}},drawEdgePath:function(t,e,n,r){var i,o=t._private.rscratch,a=e,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=n.join("$");o.pathCacheKey&&o.pathCacheKey===f?(i=e=o.pathCache,s=!0):(i=e=new Path2D,o.pathCacheKey=f,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)e.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"segments":case"haystack":for(var d=2;d+1<n.length;d+=2)e.lineTo(n[d],n[d+1])}e=a,l?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(t,e,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=e.pstyle(n+"-arrow-shape").value;if("none"!==s){var l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",u=e.pstyle(n+"-arrow-fill").value,c=e.pstyle("width").pfValue,f=e.pstyle("opacity").value;void 0===a&&(a=f);var h=t.globalCompositeOperation;1===a&&"hollow"!==u||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(e,t,l,c,s,r,i,o),t.globalCompositeOperation=h);var d=e.pstyle(n+"-arrow-color").value;this.colorFillStyle(t,d[0],d[1],d[2],a),this.colorStrokeStyle(t,d[0],d[1],d[2],a),this.drawArrowShape(e,t,u,c,s,r,i,o)}}},drawArrowShape:function(t,e,n,r,i,o,a,s){var l,u=this,c=this.usePaths()&&"triangle-cross"!==i,f=!1,h=e,d={x:o,y:a},p=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,p),v=u.arrowShapes[i];if(c){var m=u.arrowPathCache=u.arrowPathCache||[],y=ct(i),_=m[y];null!=_?(l=e=_,f=!0):(l=e=new Path2D,m[y]=l)}e.beginPath&&e.beginPath(),f||(c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,g,s,d,r)),e.closePath&&e.closePath(),e=h,c&&(e.translate(o,a),e.rotate(s),e.scale(g,g)),"filled"!==n&&"both"!==n||(c?e.fill(l):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(v.matchEdgeWidth?r:1)/(c?g:1),e.lineJoin="miter",c?e.stroke(l):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-o,-a))}},Ba={safeDrawImage:function(t,e,n,r,i,o,a,s,l,u){i<=0||o<=0||l<=0||u<=0||t.drawImage(e,n,r,i,o,a,s,l,u)},drawInscribedImage:function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,l=a.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),f=c(n,"background-fit","value",r),h=c(n,"background-repeat","value",r),d=n.width(),p=n.height(),g=2*n.padding(),v=d+("inner"===c(n,"background-width-relative-to","value",r)?0:g),m=p+("inner"===c(n,"background-height-relative-to","value",r)?0:g),y=n._private.rscratch,_="node"===n.pstyle("background-clip").value,b=c(n,"background-image-opacity","value",r)*i,w=e.width||e.cachedW,x=e.height||e.cachedH;null!=w&&null!=x||(document.body.appendChild(e),w=e.cachedW=e.width||e.offsetWidth,x=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var k=w,E=x;if("auto"!==c(n,"background-width","value",r)&&(k="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*v:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(E="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*m:c(n,"background-height","pfValue",r)),0!==k&&0!==E){if("contain"===f)k*=z=Math.min(v/k,m/E),E*=z;else if("cover"===f){var z;k*=z=Math.max(v/k,m/E),E*=z}var A=s-v/2,C=c(n,"background-position-x","units",r),S=c(n,"background-position-x","pfValue",r);A+="%"===C?(v-k)*S:S;var T=c(n,"background-offset-x","units",r),M=c(n,"background-offset-x","pfValue",r);A+="%"===T?(v-k)*M:M;var N=l-m/2,D=c(n,"background-position-y","units",r),I=c(n,"background-position-y","pfValue",r);N+="%"===D?(m-E)*I:I;var O=c(n,"background-offset-y","units",r),L=c(n,"background-offset-y","pfValue",r);N+="%"===O?(m-E)*L:L,y.pathCache&&(A-=s,N-=l,s=0,l=0);var P=t.globalAlpha;if(t.globalAlpha=b,"no-repeat"===h)_&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,v,m),t.clip())),o.safeDrawImage(t,e,0,0,w,x,A,N,k,E),_&&t.restore();else{var B=t.createPattern(e,h);t.fillStyle=B,o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,v,m),t.translate(A,N),t.fill(),t.translate(-A,-N)}t.globalAlpha=P}}},Fa={eleTextBiggerThanMin:function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(re(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},drawElementText:function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(!a.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){if(!(s=e.pstyle("label"))||!s.value)return;switch(e.pstyle("text-halign").strValue){case"left":t.textAlign="right";break;case"right":t.textAlign="left";break;default:t.textAlign="center"}t.textBaseline="bottom"}else{var s=e.pstyle("label"),l=e.pstyle("source-label"),u=e.pstyle("target-label");if(!(s&&s.value||l&&l.value||u&&u.value))return;t.textAlign="center",t.textBaseline="bottom"}var c,f=!n;n&&t.translate(-(c=n).x1,-c.y1),null==i?(a.drawText(t,e,null,f,o),e.isEdge()&&(a.drawText(t,e,"source",f,o),a.drawText(t,e,"target",f,o))):a.drawText(t,e,i,f,o),n&&t.translate(c.x1,c.y1)},getFontCache:function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return this.fontCaches.push(e={context:t}),e},setupTextStyle:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=e.pstyle("text-opacity").value*(n?e.effectiveOpacity():1),l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],l)},getTextAngle:function(t,e){var n=t._private.rscratch,r=t.pstyle((e?e+"-":"")+"text-rotation"),i=Nt(n,"labelAngle",e);return"autorotate"===r.strValue?t.isEdge()?i:0:"none"===r.strValue?0:r.pfValue},drawText:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private.rscratch,a=i?e.effectiveOpacity():1;if(0!==a&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var s,l,u,c,f,h,d=Nt(o,"labelX",n),p=Nt(o,"labelY",n),g=this.getLabelText(e,n);if(null!=g&&""!==g&&!isNaN(d)&&!isNaN(p)){this.setupTextStyle(t,e,i);var v,m=n?n+"-":"",y=Nt(o,"labelWidth",n),_=Nt(o,"labelHeight",n),b=e.pstyle(m+"text-margin-x").pfValue,w=e.pstyle(m+"text-margin-y").pfValue,x=e.isEdge(),k=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;if(x&&(k="center",E="center"),d+=b,p+=w,0!==(v=r?this.getTextAngle(e,n):0)){var z=d,A=p;t.translate(z,A),t.rotate(v),d=0,p=0}switch(E){case"top":break;case"center":p+=_/2;break;case"bottom":p+=_}var C=e.pstyle("text-background-opacity").value,S=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue;if(C>0||T>0&&S>0){var N=d-M;switch(k){case"left":N-=y;break;case"center":N-=y/2}var D=p-_-M,I=y+2*M,O=_+2*M;if(C>0){var L=t.fillStyle,P=e.pstyle("text-background-color").value;t.fillStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+C*a+")","roundrectangle"==e.pstyle("text-background-shape").strValue?(l=N,u=D,c=I,f=O,h=(h=2)||5,(s=t).beginPath(),s.moveTo(l+h,u),s.lineTo(l+c-h,u),s.quadraticCurveTo(l+c,u,l+c,u+h),s.lineTo(l+c,u+f-h),s.quadraticCurveTo(l+c,u+f,l+c-h,u+f),s.lineTo(l+h,u+f),s.quadraticCurveTo(l,u+f,l,u+f-h),s.lineTo(l,u+h),s.quadraticCurveTo(l,u,l+h,u),s.closePath(),s.fill()):t.fillRect(N,D,I,O),t.fillStyle=L}if(T>0&&S>0){var B=t.strokeStyle,F=t.lineWidth,j=e.pstyle("text-border-color").value,R=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+j[0]+","+j[1]+","+j[2]+","+S*a+")",t.lineWidth=T,t.setLineDash)switch(R){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=T/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(N,D,I,O),"double"===R){var H=T/2;t.strokeRect(N+H,D+H,I-2*H,O-2*H)}t.setLineDash&&t.setLineDash([]),t.lineWidth=F,t.strokeStyle=B}}var q=2*e.pstyle("text-outline-width").pfValue;if(q>0&&(t.lineWidth=q),"wrap"===e.pstyle("text-wrap").value){var W=Nt(o,"labelWrapCachedLines",n),$=_/W.length;switch(E){case"top":p-=(W.length-1)*$;break;case"center":case"bottom":p-=(W.length-1)*$}for(var U=0;U<W.length;U++)q>0&&t.strokeText(W[U],d,p),t.fillText(W[U],d,p),p+=$}else q>0&&t.strokeText(g,d,p),t.fillText(g,d,p);0!==v&&(t.rotate(-v),t.translate(-z,-A))}}}},ja={drawNode:function(t,e,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=e._private,c=u.rscratch,f=e.position();if(v(f.x)&&v(f.y)&&e.visible()){var h,d,p=s?e.effectiveOpacity():1,g=l.usePaths(),m=!1,y=e.padding();r=e.width()+2*y,i=e.height()+2*y,n&&t.translate(-(d=n).x1,-d.y1);for(var _=e.pstyle("background-image").value,b=new Array(_.length),w=new Array(_.length),x=0,k=0;k<_.length;k++){var E=_[k];if(b[k]=null!=E&&"none"!==E){var z=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",k);x++,w[k]=l.getCachedImage(E,z,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var A=e.pstyle("background-blacken").value,C=e.pstyle("border-width").pfValue,S=e.pstyle("background-opacity").value*p,T=e.pstyle("border-color").value,M=e.pstyle("border-style").value,N=e.pstyle("border-opacity").value*p;t.lineJoin="miter";var D=function(){l.eleFillStyle(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:S)},I=function(){l.colorStrokeStyle(t,T[0],T[1],T[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:N)},O=e.pstyle("shape").strValue,L=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(f.x,f.y);var P=l.nodePathCache=l.nodePathCache||[],B=ft("polygon"===O?O+","+L.join(","):O,""+i,""+r),F=P[B];null!=F?(m=!0,c.pathCache=h=F):(h=new Path2D,P[B]=c.pathCache=h)}var j=function(){if(!m){var n=f;g&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(e)].draw(h||t,n.x,n.y,r,i)}g?t.fill(h):t.fill()},R=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=u.backgrounding,i=0,o=0;o<w.length;o++)b[o]&&w[o].complete&&!w[o].error&&(i++,l.drawInscribedImage(t,w[o],e,o,n));u.backgrounding=!(i===x),r!==u.backgrounding&&e.updateStyle(!1)},H=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;l.hasPie(e)&&(l.drawPie(t,e,o),n&&(g||l.nodeShapes[l.getNodeShape(e)].draw(t,f.x,f.y,r,i)))},q=function(){var e=A>0?0:255;0!==A&&(l.colorFillStyle(t,e,e,e,(A>0?A:-A)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p)),g?t.fill(h):t.fill())},W=function(){if(C>0){if(t.lineWidth=C,t.lineCap="butt",t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(g?t.stroke(h):t.stroke(),"double"===M){t.lineWidth=C/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(h):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}};if("yes"===e.pstyle("ghost").value){var $=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue,V=e.pstyle("ghost-opacity").value,Y=V*p;t.translate($,U),D(V*S),j(),R(Y),H(0!==A||0!==C),q(Y),I(V*N),W(),t.translate(-$,-U)}D(),j(),R(),H(0!==A||0!==C),q(),I(),W(),g&&t.translate(-f.x,-f.y),l.drawElementText(t,e,null,o),a&&l.drawNodeOverlay(t,e,f,r,i),n&&t.translate(d.x1,d.y1)}},drawNodeOverlay:function(t,e,n,r,i){if(e.visible()){var o=e.pstyle("overlay-padding").pfValue,a=e.pstyle("overlay-opacity").value,s=e.pstyle("overlay-color").value;if(a>0){if(n=n||e.position(),null==r||null==i){var l=e.padding();r=e.width()+2*l,i=e.height()+2*l}this.colorFillStyle(t,s[0],s[1],s[2],a),this.nodeShapes.roundrectangle.draw(t,n.x,n.y,r+2*o,i+2*o),t.fill()}}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,l=e.width(),u=e.height(),c=Math.min(l,u)/2,f=0;this.usePaths()&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var h=1;h<=i.pieBackgroundN;h++){var d=e.pstyle("pie-"+h+"-background-size").value,p=e.pstyle("pie-"+h+"-background-color").value,g=e.pstyle("pie-"+h+"-background-opacity").value*n,v=d/100;v+f>1&&(v=1-f);var m=1.5*Math.PI+2*Math.PI*f,y=m+2*Math.PI*v;0===d||f>=1||f+v>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,c,m,y),t.closePath(),this.colorFillStyle(t,p[0],p[1],p[2],g),t.fill(),f+=v)}}},Ra={getPixelRatio:function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&n.push(e={context:t}),e},createGradientStyleFor:function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,l=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),f=n.midpoint(),h=oe(u,f),d=oe(c,f);o=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var p=a?{x:0,y:0}:n.position(),g=n.width(),v=n.height();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,v))}else if(n.isEdge()){var m=n.sourceEndpoint(),y=n.targetEndpoint();o=t.createLinearGradient(m.x,m.y,y.x,y.y)}else{var _=a?{x:0,y:0}:n.position(),b=n.width()/2,w=n.height()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=t.createLinearGradient(_.x,_.y-w,_.x,_.y+w);break;case"to-top":o=t.createLinearGradient(_.x,_.y+w,_.x,_.y-w);break;case"to-left":o=t.createLinearGradient(_.x-b,_.y,_.x+b,_.y);break;case"to-right":o=t.createLinearGradient(_.x+b,_.y,_.x-b,_.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(_.x-b,_.y-w,_.x+b,_.y+w);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(_.x-b,_.y+w,_.x+b,_.y-w);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(_.x+b,_.y-w,_.x-b,_.y+w);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(_.x+b,_.y+w,_.x-b,_.y-w)}}if(!o)return null;for(var x=l.length===s.length,k=s.length,E=0;E<k;E++)o.addColorStop(x?l[E]:E/(k-1),"rgba("+s[E][0]+","+s[E][1]+","+s[E][2]+","+i+")");return o},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio();t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=e.motionBlurPxRatio);var s,l=i*a,u=o*a;if(l!==e.canvasWidth||u!==e.canvasHeight){e.fontCaches=null;var c=n.canvasContainer;c.style.width=i+"px",c.style.height=o+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)(s=n.canvases[f]).width=l,s.height=u,s.style.width=i+"px",s.style.height=o+"px";for(f=0;f<e.BUFFER_COUNT;f++)(s=n.bufferCanvases[f]).width=l,s.height=u,s.style.width=i+"px",s.style.height=o+"px";e.textureMult=1,a<=1&&(s=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,s.width=l*e.textureMult,s.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||Ct()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,a=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,l=a.cy,u=a.data,c=u.canvasNeedsRedraw,f=a.textureOnViewport&&!e&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),h=void 0!==t.motionBlur?t.motionBlur:a.motionBlur,d=a.motionBlurPxRatio,p=l.hasCompoundNodes(),g=a.hoverData.draggingEles,v=h=h&&!e&&a.motionBlurEnabled&&!(a.hoverData.selecting||a.touchData.selecting);e||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!e&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),h&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(v=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!f&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var m=l.style(),y=l.zoom(),_=void 0!==i?i:y,b=l.pan(),w={x:b.x,y:b.y},x={zoom:y,pan:{x:b.x,y:b.y}},k=a.prevViewport;void 0===k||x.zoom!==k.zoom||x.pan.x!==k.pan.x||x.pan.y!==k.pan.y||g&&!p||(a.motionBlurPxRatio=1),o&&(w=o),_*=s,w.x*=s,w.y*=s;var E=a.getCachedZSortedEles();function z(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",a.colorFillStyle(t,255,255,255,a.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function A(t,r){var s,l,c,f;a.clearingMotionBlur||t!==u.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&t!==u.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=w,l=_,c=a.canvasWidth,f=a.canvasHeight):(s={x:b.x*d,y:b.y*d},l=y*d,c=a.canvasWidth*d,f=a.canvasHeight*d),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?z(t,0,0,c,f):e||void 0!==r&&!r||t.clearRect(0,0,c,f),n||(t.translate(s.x,s.y),t.scale(l,l)),o&&t.translate(o.x,o.y),i&&t.scale(i,i)}if(f||(a.textureDrawLastFrame=!1),f){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=l.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var C=a.data.bufferContexts[a.TEXTURE_BUFFER];C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:C,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(x=a.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var S=u.contexts[a.NODE],T=a.textureCache.texture;x=a.textureCache.viewport,S.setTransform(1,0,0,1,0,0),h?z(S,0,0,x.width,x.height):S.clearRect(0,0,x.width,x.height);var M=m.core("outside-texture-bg-color").value,N=m.core("outside-texture-bg-opacity").value;a.colorFillStyle(S,M[0],M[1],M[2],N),S.fillRect(0,0,x.width,x.height),y=l.zoom(),A(S,!1),S.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s),S.drawImage(T,x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s)}else a.textureOnViewport&&!e&&(a.textureCache=null);var D=l.extent(),I=a.hideEdgesOnViewport&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles),O=[];if(O[a.NODE]=!c[a.NODE]&&h&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,O[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),O[a.DRAG]=!c[a.DRAG]&&h&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,O[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||n||r||O[a.NODE]){var L=h&&!O[a.NODE]&&1!==d;A(S=e||(L?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:u.contexts[a.NODE]),h&&!L?"motionBlur":void 0),I?a.drawCachedNodes(S,E.nondrag,s,D):a.drawLayeredElements(S,E.nondrag,s,D),a.debug&&a.drawDebugPoints(S,E.nondrag),n||h||(c[a.NODE]=!1)}if(!r&&(c[a.DRAG]||n||O[a.DRAG])&&(L=h&&!O[a.DRAG]&&1!==d,A(S=e||(L?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:u.contexts[a.DRAG]),h&&!L?"motionBlur":void 0),I?a.drawCachedNodes(S,E.drag,s,D):a.drawCachedElements(S,E.drag,s,D),a.debug&&a.drawDebugPoints(S,E.drag),n||h||(c[a.DRAG]=!1)),a.showFps||!r&&c[a.SELECT_BOX]&&!n){if(A(S=e||u.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){y=a.cy.zoom();var P=m.core("selection-box-border-width").value/y;S.lineWidth=P,S.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",S.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),P>0&&(S.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",S.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(u.bgActivePosistion&&!a.hoverData.selecting){y=a.cy.zoom();var B=u.bgActivePosistion;S.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",S.beginPath(),S.arc(B.x,B.y,m.core("active-bg-size").pfValue/y,0,2*Math.PI),S.fill()}var F=a.lastRedrawTime;if(a.showFps&&F){F=Math.round(F);var j=Math.round(1e3/F);S.setTransform(1,0,0,1,0,0),S.fillStyle="rgba(255, 0, 0, 0.75)",S.strokeStyle="rgba(255, 0, 0, 0.75)",S.lineWidth=1,S.fillText("1 frame = "+F+" ms = "+j+" fps",0,20),S.strokeRect(0,30,250,20),S.fillRect(0,30,250*Math.min(j/60,1),20)}n||(c[a.SELECT_BOX]=!1)}if(h&&1!==d){var R=u.contexts[a.DRAG],H=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],q=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!v?t.clearRect(0,0,a.canvasWidth,a.canvasHeight):z(t,0,0,a.canvasWidth,a.canvasHeight),t.drawImage(e,0,0,a.canvasWidth*d,a.canvasHeight*d,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||O[a.NODE])&&(q(u.contexts[a.NODE],a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],O[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||O[a.DRAG])&&(q(R,H,O[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=x,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),h&&(a.motionBlurTimeout=setTimeout(function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!f,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()},100)),e||l.emit("render")}},Ha={drawPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+a*o[2*l],n+s*o[2*l+1]);t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Be(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.arcTo(e+o,n-a,e+o,n,s),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.arcTo(e-o,n-a,e,n-a,s),t.lineTo(e,n-a),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Be(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.lineTo(e+o,n-a),t.lineTo(e+o,n),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.lineTo(e-o,n-a),t.lineTo(e,n-a),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-o+8,n-a),t.lineTo(e+o-8,n-a),t.lineTo(e+o,n-a+8),t.lineTo(e+o,n+a-8),t.lineTo(e+o-8,n+a),t.lineTo(e-o+8,n+a),t.lineTo(e-o,n+a-8),t.lineTo(e-o,n-a+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,l=e+o,u=n-a,c=n+a,f=Fe(r,i),h=f.widthOffset,d=f.heightOffset,p=f.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(s,u+d),t.lineTo(s,c-d),t.quadraticCurveTo(s+p,c,s+h,c),t.lineTo(l-h,c),t.quadraticCurveTo(l-p,c,l,c-d),t.lineTo(l,u+d),t.quadraticCurveTo(l-p,u,l-h,u),t.lineTo(s+h,u),t.quadraticCurveTo(s+p,u,s,u+d),t.closePath()}},qa=Math.sin(0),Wa=Math.cos(0),$a={},Ua={},Va=Math.PI/40,Ya=0*Math.PI;Ya<2*Math.PI;Ya+=Va)$a[Ya]=Math.sin(Ya),Ua[Ya]=Math.cos(Ya);Ha.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=Va)o=e-s*$a[u]*qa+s*Ua[u]*Wa,a=n+l*Ua[u]*qa+l*$a[u]*Wa,0===u?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var Xa={};function Ka(t){var e=t.indexOf(",");return t.substr(e+1)}function Ga(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new $n(function(r,i){try{e.toBlob(function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(t){i(t)}});case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}(Ka(r()),n);case"base64":return Ka(r());case"base64uri":default:return r()}}Xa.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},Xa.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],o=t.full?Math.ceil(n.h):r[3],a=v(t.maxWidth)||v(t.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,l=t.scale;else if(a){var u=1/0,c=1/0;v(t.maxWidth)&&(u=l*t.maxWidth/i),v(t.maxHeight)&&(c=l*t.maxHeight/o),i*=l=Math.min(u,c),o*=l}a||(i*=s,o*=s,l*=s);var f=document.createElement("canvas");f.width=i,f.height=o,f.style.width=i+"px",f.style.height=o+"px";var h=f.getContext("2d");if(i>0&&o>0){h.clearRect(0,0,i,o),h.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(t.full)h.translate(-n.x1*l,-n.y1*l),h.scale(l,l),this.drawElements(h,d),h.scale(1/l,1/l),h.translate(n.x1*l,n.y1*l);else{var p=e.pan(),g={x:p.x*l,y:p.y*l};l*=e.zoom(),h.translate(g.x,g.y),h.scale(l,l),this.drawElements(h,d),h.scale(1/l,1/l),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,i,o),h.fill())}return f},Xa.png=function(t){return Ga(t,this.bufferCanvasImage(t),"image/png")},Xa.jpg=function(t){return Ga(t,this.bufferCanvasImage(t),"image/jpeg")};var Za=Ja,Qa=Ja.prototype;function Ja(t){var e=this;e.data={canvases:new Array(Qa.CANVAS_LAYERS),contexts:new Array(Qa.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Qa.CANVAS_LAYERS),bufferCanvases:new Array(Qa.BUFFER_COUNT),bufferContexts:new Array(Qa.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color: rgba(0,0,0,0);";e.data.canvasContainer=document.createElement("div");var r=e.data.canvasContainer.style;e.data.canvasContainer.setAttribute("style",n),r.position="relative",r.zIndex="0",r.overflow="hidden";var i=t.cy.container();i.appendChild(e.data.canvasContainer),(i.getAttribute("style")||"").indexOf(n)<0&&i.setAttribute("style",(i.getAttribute("style")||"")+n);for(var o=0;o<Qa.CANVAS_LAYERS;o++){var a=e.data.canvases[o]=document.createElement("canvas");e.data.contexts[o]=a.getContext("2d"),a.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(z()?" -ms-touch-action: none; touch-action: none; ":"")),a.style.position="absolute",a.setAttribute("data-id","layer"+o),a.style.zIndex=String(Qa.CANVAS_LAYERS-o),e.data.canvasContainer.appendChild(a),e.data.canvasNeedsRedraw[o]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[Qa.NODE].setAttribute("data-id","layer"+Qa.NODE+"-node"),e.data.canvases[Qa.SELECT_BOX].setAttribute("data-id","layer"+Qa.SELECT_BOX+"-selectbox"),e.data.canvases[Qa.DRAG].setAttribute("data-id","layer"+Qa.DRAG+"-drag"),o=0;o<Qa.BUFFER_COUNT;o++)e.data.bufferCanvases[o]=document.createElement("canvas"),e.data.bufferContexts[o]=e.data.bufferCanvases[o].getContext("2d"),e.data.bufferCanvases[o].style.position="absolute",e.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),e.data.bufferCanvases[o].style.zIndex=String(-o-1),e.data.bufferCanvases[o].style.visibility="hidden";e.pathsEnabled=!0;var s=fe(),l=function(t){return{x:-t.w/2,y:-t.h/2}},u=function(t){return t.boundingBox(),t[0]._private.bodyBounds},c=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||s},f=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||s},h=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||s},d=function(t,e){return e},p=function(t,e){return{x:t.x+e.pstyle("text-margin-x").pfValue,y:t.y+e.pstyle("text-margin-y").pfValue}},g=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},v=e.data.eleTxrCache=new _a(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,n,r,i,o){return e.drawElement(t,n,r,!1,!1,o)},getBoundingBox:u,getRotationPoint:function(t){return{x:((e=u(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return l(u(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),m=e.data.lblTxrCache=new _a(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"main",o)},getBoundingBox:c,getRotationPoint:function(t){return p(g(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=c(t),n=l(c(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},isVisible:d}),y=e.data.slbTxrCache=new _a(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"source",o)},getBoundingBox:f,getRotationPoint:function(t){return p(g(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return l(f(t))},isVisible:d}),_=e.data.tlbTxrCache=new _a(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"target",o)},getBoundingBox:h,getRotationPoint:function(t){return p(g(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return l(h(t))},isVisible:d}),b=e.data.lyrTxrCache=new wa(e);e.onUpdateEleCalcs(function(t,e){v.invalidateElements(e),m.invalidateElements(e),y.invalidateElements(e),_.invalidateElements(e),b.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var w=function(t){for(var e=0;e<t.length;e++)b.enqueueElementRefinement(t[e].ele)};v.onDequeue(w),m.onDequeue(w),y.onDequeue(w),_.onDequeue(w)}Qa.CANVAS_LAYERS=3,Qa.SELECT_BOX=0,Qa.DRAG=1,Qa.NODE=2,Qa.BUFFER_COUNT=3,Qa.TEXTURE_BUFFER=0,Qa.MOTIONBLUR_BUFFER_NODE=1,Qa.MOTIONBLUR_BUFFER_DRAG=2,Qa.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[Qa.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[Qa.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[Qa.SELECT_BOX]=e}};var ts="undefined"!=typeof Path2D;Qa.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},Qa.usePaths=function(){return ts&&this.pathsEnabled},Qa.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},Qa.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},Qa.makeOffscreenCanvas=function(e,n){var r;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":t(OffscreenCanvas))?r=new OffscreenCanvas(e,n):((r=document.createElement("canvas")).width=e,r.height=n),r},[Aa,Na,Pa,Ba,Fa,ja,Ra,Ha,Xa,{nodeShapeImpl:function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}}].forEach(function(t){I(Qa,t)});var es=[{type:"layout",extensions:Uo},{type:"renderer",extensions:[{name:"null",impl:Vo},{name:"base",impl:da},{name:"canvas",impl:Za}]}],ns={},rs={};function is(t,e,n){var r=n,i=function(n){wt("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(_o.prototype[e])return i(e);_o.prototype[e]=n}else if("collection"===t){if(Bi.prototype[e])return i(e);Bi.prototype[e]=n}else if("layout"===t){for(var o=function(t){this.options=t,n.call(this,t),g(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var u=s[l];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var f=function(t){return t._private.cy},h={addEventFields:function(t,e){e.layout=t,e.cy=f(t),e.target=t},bubble:function(){return!0},parent:function(t){return f(t)}};I(a,{createEmitter:function(){return this._private.emitter=new ri(h,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),Yn.eventAliasesOn(a),r=o}else if("renderer"===t&&"null"!==e&&"base"!==e){var d=os("renderer","base"),p=d.prototype,v=n,m=n.prototype,y=function(){d.apply(this,arguments),v.apply(this,arguments)},_=y.prototype;for(var b in p){var w=p[b];if(null!=m[b])return i(b);_[b]=w}for(var x in m)_[x]=m[x];p.clientFunctions.forEach(function(t){_[t]=_[t]||function(){wt("Renderer does not implement `renderer."+t+"()` on its prototype")}}),r=y}return P({map:ns,keys:[t,e],value:r})}function os(t,e){return B({map:ns,keys:[t,e]})}var as=function(){return 2===arguments.length?os.apply(null,arguments):3===arguments.length?is.apply(null,arguments):4===arguments.length?(function(t,e,n,r){return B({map:rs,keys:[t,e,n,r]})}).apply(null,arguments):5===arguments.length?(function(t,e,n,r,i){return P({map:rs,keys:[t,e,n,r],value:i})}).apply(null,arguments):void wt("Invalid extension access syntax")};_o.prototype.extension=as,es.forEach(function(t){t.extensions.forEach(function(e){is(t.type,e.name,e.impl)})});var ss=function t(){if(!(this instanceof t))return new t;this.length=0},ls=ss.prototype;ls.instanceString=function(){return"stylesheet"},ls.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},ls.css=function(t,e){var n=this.length-1;if(h(t))this[n].properties.push({name:t,value:e});else if(g(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var l=go.properties[a]||go.properties[S(a)];null!=l&&this[n].properties.push({name:l.name,value:s})}}return this},ls.style=ls.css,ls.generateStyle=function(t){var e=new go(t);return this.appendToStyle(e)},ls.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.properties;t.selector(n.selector);for(var i=0;i<r.length;i++){var o=r[i];t.css(o.name,o.value)}}return t};var us=function(t){return void 0===t&&(t={}),g(t)?new _o(t):h(t)?as.apply(as,arguments):void 0};return us.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(us),t.apply(null,e),this},us.warnings=function(t){return xt(t)},us.version="3.5.1",us.stylesheet=us.Stylesheet=ss,us}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){!function(t){"use strict";function e(t){var e,n=[],r=t&&t.options;if(t.multiple)for(var i=0,o=r.length;i<o;i++)(e=r[i]).selected&&n.push(e.value||e.text);else n=t.value;return n}function n(t,e,n,r){for(var o=["content","subtext","tokens"],a=!1,s=0;s<o.length;s++){var l=o[s],u=t[l];if(u&&(u=u.toString(),"content"===l&&(u=u.replace(/<[^>]+>/g,"")),r&&(u=i(u)),u=u.toUpperCase(),a="contains"===n?u.indexOf(e)>=0:u.startsWith(e)))break}return a}function r(t){return parseInt(t,10)||0}function i(e){return t.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){e=e?e.replace(this.re,this.ch):""}),e}function o(e){var n=arguments,r=e;[].shift.apply(n);var i,o=this.each(function(){var e=t(this);if(e.is("select")){var o=e.data("selectpicker"),a="object"==typeof r&&r;if(o){if(a)for(var s in a)a.hasOwnProperty(s)&&(o.options[s]=a[s])}else{var l=t.extend({},_.DEFAULTS,t.fn.selectpicker.defaults||{},e.data(),a);l.template=t.extend({},_.DEFAULTS.template,t.fn.selectpicker.defaults?t.fn.selectpicker.defaults.template:{},e.data().template,a.template),e.data("selectpicker",o=new _(this,l))}"string"==typeof r&&(i=o[r]instanceof Function?o[r].apply(o,n):o.options[r])}});return void 0!==i?i:o}var a=document.createElement("_");if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:s.call(this,t)}}String.prototype.startsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e={}.toString,n=function(t){if(null==this)throw new TypeError;var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var r=n.length,i=String(t),o=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;s!=s&&(s=0);var l=Math.min(Math.max(s,0),r);if(o+l>r)return!1;for(var u=-1;++u<o;)if(n.charCodeAt(l+u)!=i.charCodeAt(u))return!1;return!0};t?t(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),Object.keys||(Object.keys=function(t,e,n){for(e in n=[],t)n.hasOwnProperty.call(t,e)&&n.push(e);return n});var l={useDefault:!1,_set:t.valHooks.select.set};t.valHooks.select.set=function(e,n){return n&&!l.useDefault&&t(e).data("selected",!0),l._set.apply(this,arguments)};var u=null,c=function(){try{return new Event("change"),!0}catch(t){return!1}}();t.fn.triggerNative=function(t){var e,n=this[0];n.dispatchEvent?(c?e=new Event(t,{bubbles:!0}):(e=document.createEvent("Event")).initEvent(t,!0,!1),n.dispatchEvent(e)):n.fireEvent?((e=document.createEventObject()).eventType=t,n.fireEvent("on"+t,e)):this.trigger(t)};var f=function(t){var e=function(e){return t[e]},n="(?:"+Object.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(i,e):t}},h=f({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}),d=f({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"}),p={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},g={};try{g.full=(t.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),g.major=g.full[0]}catch(t){console.error("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision.",t),g.major="3"}var v={DISABLED:"disabled",DIVIDER:"4"===g.major?"dropdown-divider":"divider",SHOW:"4"===g.major?"show":"open",DROPUP:"dropup",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"4"===g.major?"btn-light":"btn-default",POPOVERHEADER:"4"===g.major?"popover-header":"popover-title"},m=new RegExp("38|40"),y=new RegExp("^9$|27"),_=(new RegExp("13|32"),function(e,n){var r=this;l.useDefault||(t.valHooks.select.set=l._set,l.useDefault=!0),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.options=n,this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){r.selectpicker.keydown.keyHistory=""},800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var i=this.options.windowPadding;"number"==typeof i&&(this.options.windowPadding=[i,i,i,i]),this.val=_.prototype.val,this.render=_.prototype.render,this.refresh=_.prototype.refresh,this.setStyle=_.prototype.setStyle,this.selectAll=_.prototype.selectAll,this.deselectAll=_.prototype.deselectAll,this.destroy=_.prototype.destroy,this.remove=_.prototype.remove,this.show=_.prototype.show,this.hide=_.prototype.hide,this.init()});_.VERSION="1.13.1",_.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(t,e){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){return[1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600},"4"===g.major&&(_.DEFAULTS.style="btn-light",_.DEFAULTS.iconBase="",_.DEFAULTS.tickIcon="bs-ok-default"),_.prototype={constructor:_,init:function(){var t=this,e=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createDropdown(),this.createLi(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu.addClass(v.MENURIGHT),void 0!==e&&this.$button.attr("data-id",e),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide.bs.select",function(){if(t.isVirtual()){var e=t.$menuInner[0],n=e.firstChild.cloneNode(!1);e.replaceChild(n,e.firstChild),e.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!1),t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!0),t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),t.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){t.$button.addClass("bs-invalid"),t.$element.on({"shown.bs.select":function(){t.$element.val(t.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&t.$button.removeClass("bs-invalid"),t.$element.off("rendered.bs.select")}}),t.$button.on("blur.bs.select",function(){t.$element.focus().blur(),t.$button.off("blur.bs.select")})}),setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var e=this.multiple||this.options.showTick?" show-tick":"",n=this.autofocus?" autofocus":"",r=this.options.header?'<div class="'+v.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",i=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+h(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"";return t('<div class="dropdown bootstrap-select'+e+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+n+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===g.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="dropdown-menu '+("4"===g.major?"":v.SHOW)+'" role="combobox">'+r+i+(this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+v.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+v.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>":"")+'<div class="inner '+v.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="dropdown-menu inner '+("4"===g.major?v.SHOW:"")+'"></ul></div>'+(this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+v.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>":"")+"</div></div>")},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var t=0;t<this.selectpicker.current.data.length;t++){var e=this.selectpicker.current.data[t],n=!0;"divider"===e.type?(n=!1,e.height=this.sizeInfo.dividerHeight):"optgroup-label"===e.type?(n=!1,e.height=this.sizeInfo.dropdownHeaderHeight):e.height=this.sizeInfo.liHeight,e.disabled&&(n=!1),this.selectpicker.view.canHighlight.push(n),e.position=(0===t?0:this.selectpicker.current.data[t-1].position)+e.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(e,n){function r(t,n){var r,l,u,c,f,h,d,p=i.selectpicker.current.elements.length,g=[],v=void 0,m=!0,y=i.isVirtual();i.selectpicker.view.scrollTop=t,!0===y&&i.sizeInfo.hasScrollBar&&i.$menu[0].offsetWidth>i.sizeInfo.totalMenuWidth&&(i.sizeInfo.menuWidth=i.$menu[0].offsetWidth,i.sizeInfo.totalMenuWidth=i.sizeInfo.menuWidth+i.sizeInfo.scrollBarWidth,i.$menu.css("min-width",i.sizeInfo.menuWidth)),r=Math.ceil(i.sizeInfo.menuInnerHeight/i.sizeInfo.liHeight*1.5),l=Math.round(p/r)||1;for(var _=0;_<l;_++){var b=(_+1)*r;if(_===l-1&&(b=p),g[_]=[_*r+(_?1:0),b],!p)break;void 0===v&&t<=i.selectpicker.current.data[b-1].position-i.sizeInfo.menuInnerHeight&&(v=_)}if(void 0===v&&(v=0),f=[i.selectpicker.view.position0,i.selectpicker.view.position1],u=Math.max(0,v-1),c=Math.min(l-1,v+1),i.selectpicker.view.position0=Math.max(0,g[u][0])||0,i.selectpicker.view.position1=Math.min(p,g[c][1])||0,h=f[0]!==i.selectpicker.view.position0||f[1]!==i.selectpicker.view.position1,void 0!==i.activeIndex&&(a=i.selectpicker.current.elements[i.selectpicker.current.map.newIndex[i.prevActiveIndex]],s=i.selectpicker.current.elements[i.selectpicker.current.map.newIndex[i.activeIndex]],o=i.selectpicker.current.elements[i.selectpicker.current.map.newIndex[i.selectedIndex]],n&&(i.activeIndex!==i.selectedIndex&&(s.classList.remove("active"),s.firstChild&&s.firstChild.classList.remove("active")),i.activeIndex=void 0),i.activeIndex&&i.activeIndex!==i.selectedIndex&&o&&o.length&&(o.classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active"))),void 0!==i.prevActiveIndex&&i.prevActiveIndex!==i.activeIndex&&i.prevActiveIndex!==i.selectedIndex&&a&&a.length&&(a.classList.remove("active"),a.firstChild&&a.firstChild.classList.remove("active")),(n||h)&&(d=i.selectpicker.view.visibleElements?i.selectpicker.view.visibleElements.slice():[],i.selectpicker.view.visibleElements=i.selectpicker.current.elements.slice(i.selectpicker.view.position0,i.selectpicker.view.position1),i.setOptionStatus(),(e||!1===y&&n)&&(m=!function(t,e){return d.length===e.length&&d.every(function(t,n){return t===e[n]})}(0,i.selectpicker.view.visibleElements)),(n||!0===y)&&m)){var w,x=i.$menuInner[0],k=document.createDocumentFragment(),E=x.firstChild.cloneNode(!1),z=!0===y?i.selectpicker.view.visibleElements:i.selectpicker.current.elements;x.replaceChild(E,x.firstChild),_=0;for(var A=z.length;_<A;_++)k.appendChild(z[_]);!0===y&&(w=i.selectpicker.view.position1>p-1?0:i.selectpicker.current.data[p-1].position-i.selectpicker.current.data[i.selectpicker.view.position1-1].position,x.firstChild.style.marginTop=(0===i.selectpicker.view.position0?0:i.selectpicker.current.data[i.selectpicker.view.position0-1].position)+"px",x.firstChild.style.marginBottom=w+"px"),x.firstChild.appendChild(k)}if(i.prevActiveIndex=i.activeIndex,i.options.liveSearch){if(e&&n){var C,S=0;i.selectpicker.view.canHighlight[S]||(S=1+i.selectpicker.view.canHighlight.slice(1).indexOf(!0)),C=i.selectpicker.view.visibleElements[S],i.selectpicker.view.currentActive&&(i.selectpicker.view.currentActive.classList.remove("active"),i.selectpicker.view.currentActive.firstChild&&i.selectpicker.view.currentActive.firstChild.classList.remove("active")),C&&(C.classList.add("active"),C.firstChild&&C.firstChild.classList.add("active")),i.activeIndex=i.selectpicker.current.map.originalIndex[S]}}else i.$menuInner.focus()}n=n||0;var i=this;this.selectpicker.current=e?this.selectpicker.search:this.selectpicker.main;var o,a,s=[];this.setPositionData(),r(n,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(t,e){i.noScroll||r(this.scrollTop,e),i.noScroll=!1}),t(window).off("resize.createView").on("resize.createView",function(){r(i.$menuInner[0].scrollTop)})},createLi:function(){var e,n=this,r=[],i=0,o=0,a=[],s=0,l=0,u=-1;this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option"));var c={span:document.createElement("span"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode("\xa0")},f=c.span.cloneNode(!1),d=document.createDocumentFragment();f.className=n.options.iconBase+" "+n.options.tickIcon+" check-mark",c.a.appendChild(f),c.a.setAttribute("role","option"),c.subtext.className="text-muted",c.text=c.span.cloneNode(!1),c.text.className="text";var p=function(t,e,n,r){var i=c.li.cloneNode(!1);return t&&(1===t.nodeType||11===t.nodeType?i.appendChild(t):i.innerHTML=t),void 0!==n&&""!==n&&(i.className=n),null!=r&&i.classList.add("optgroup-"+r),i},m=function(t,e,n){var r=c.a.cloneNode(!0);return t&&(11===t.nodeType?r.appendChild(t):r.insertAdjacentHTML("beforeend",t)),void 0!==e&""!==e&&(r.className=e),"4"===g.major&&r.classList.add("dropdown-item"),n&&r.setAttribute("style",n),r},y=function(t){var e,r,i=c.text.cloneNode(!1);if(t.optionContent)i.innerHTML=t.optionContent;else{if(i.textContent=t.text,t.optionIcon){var o=c.whitespace.cloneNode(!1);(r=c.span.cloneNode(!1)).className=n.options.iconBase+" "+t.optionIcon,d.appendChild(r),d.appendChild(o)}t.optionSubtext&&((e=c.subtext.cloneNode(!1)).innerHTML=t.optionSubtext,i.appendChild(e))}return d.appendChild(i),d},_=function(t){var e,r,i=c.text.cloneNode(!1);if(i.textContent=t.labelEscaped,t.labelIcon){var o=c.whitespace.cloneNode(!1);(r=c.span.cloneNode(!1)).className=n.options.iconBase+" "+t.labelIcon,d.appendChild(r),d.appendChild(o)}return t.labelSubtext&&((e=c.subtext.cloneNode(!1)).textContent=t.labelSubtext,i.appendChild(e)),d.appendChild(i),d};if(this.options.title&&!this.multiple){u--;var b=this.$element[0],w=!1,x=!this.selectpicker.view.titleOption.parentNode;x&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",w=void 0===t(b.options[b.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")),(x||0!==this.selectpicker.view.titleOption.index)&&b.insertBefore(this.selectpicker.view.titleOption,b.firstChild),w&&(b.selectedIndex=0)}var k=this.$element.find("option");k.each(function(c){var f=t(this);if(u++,!f.hasClass("bs-title-option")){var d,g,b=f.data(),w=this.className||"",x=h(this.style.cssText),E=b.content,z=this.textContent,A=b.tokens,C=b.subtext,S=b.icon,T=f.parent(),M=T[0],N="OPTGROUP"===M.tagName,D=N&&M.disabled,I=this.disabled||D,O=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName,L=T.data();if(!0===b.hidden||n.options.hideDisabled&&(I&&!N||D))return d=b.prevHiddenIndex,f.next().data("prevHiddenIndex",void 0!==d?d:c),u--,O||void 0===d||(q=k[d].previousElementSibling)&&"OPTGROUP"===q.tagName&&!q.disabled&&(O=!0),void(O&&"divider"!==a[a.length-1].type&&(u++,r.push(p(!1,0,v.DIVIDER,s+"div")),a.push({type:"divider",optID:s,originalIndex:c})));if(N&&!0!==b.divider){if(n.options.hideDisabled&&I){if(void 0===L.allOptionsDisabled){var P=T.children();T.data("allOptionsDisabled",P.filter(":disabled").length===P.length)}if(T.data("allOptionsDisabled"))return void u--}var B=" "+M.className||"";if(!this.previousElementSibling){s+=1;var F=h(M.label),j=L.subtext,R=L.icon;0!==c&&r.length>0&&(u++,r.push(p(!1,0,v.DIVIDER,s+"div")),a.push({type:"divider",optID:s,originalIndex:c})),u++;var H=_({labelEscaped:F,labelSubtext:j,labelIcon:R});r.push(p(H,0,"dropdown-header"+B,s)),a.push({content:F,subtext:j,type:"optgroup-label",optID:s,originalIndex:c}),l=u-1}if(n.options.hideDisabled&&I||!0===b.hidden)return void u--;g=y({text:z,optionContent:E,optionSubtext:C,optionIcon:S}),r.push(p(m(g,"opt "+w+B,x),0,"",s)),a.push({content:E||z,subtext:C,tokens:A,type:"option",optID:s,headerIndex:l,lastIndex:l+M.childElementCount,originalIndex:c,data:b}),i++}else if(!0===b.divider)r.push(p(!1,0,"divider")),a.push({type:"divider",originalIndex:c});else{var q;!O&&n.options.hideDisabled&&void 0!==(d=b.prevHiddenIndex)&&(q=k[d].previousElementSibling)&&"OPTGROUP"===q.tagName&&!q.disabled&&(O=!0),O&&"divider"!==a[a.length-1].type&&(u++,r.push(p(!1,0,v.DIVIDER,s+"div")),a.push({type:"divider",optID:s,originalIndex:c})),g=y({text:z,optionContent:E,optionSubtext:C,optionIcon:S}),r.push(p(m(g,w,x))),a.push({content:E||z,subtext:C,tokens:A,type:"option",originalIndex:c,data:b}),i++}n.selectpicker.main.map.newIndex[c]=u,n.selectpicker.main.map.originalIndex[u]=c;var W=a[a.length-1];W.disabled=I;var $=0;W.content&&($+=W.content.length),W.subtext&&($+=W.subtext.length),S&&($+=1),$>o&&(o=$,e=r[r.length-1])}}),this.selectpicker.main.elements=r,this.selectpicker.main.data=a,this.selectpicker.current=this.selectpicker.main,this.selectpicker.view.widestOption=e,this.selectpicker.view.availableOptionsCount=i},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var t=this,e=this.$element.find("option"),n=[],r=[];this.togglePlaceholder(),this.tabIndex();for(var i=0,o=this.selectpicker.main.elements.length;i<o;i++){var a=e[this.selectpicker.main.map.originalIndex[i]];if(a&&a.selected&&(n.push(a),r.length<100&&"count"!==t.options.selectedTextFormat||1===n.length)){if(t.options.hideDisabled&&(a.disabled||"OPTGROUP"===a.parentNode.tagName&&a.parentNode.disabled))return;var s,l,u=this.selectpicker.main.data[i].data,c=u.icon&&t.options.showIcon?'<i class="'+t.options.iconBase+" "+u.icon+'"></i> ':"";s=t.options.showSubtext&&u.subtext&&!t.multiple?' <small class="text-muted">'+u.subtext+"</small>":"",l=a.title?a.title:u.content&&t.options.showContent?u.content.toString():c+a.innerHTML.trim()+s,r.push(l)}}var f=this.multiple?r.join(this.options.multipleSeparator):r[0];if(n.length>50&&(f+="..."),this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")){var h=this.options.selectedTextFormat.split(">");if(h.length>1&&n.length>h[1]||1===h.length&&n.length>=2){var p=this.selectpicker.view.availableOptionsCount;f=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(n.length,p):this.options.countSelectedText).replace("{0}",n.length.toString()).replace("{1}",p.toString())}}null==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(f=this.options.title),f||(f=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button[0].title=d(f.replace(/<[^>]*>?/g,"").trim()),this.$button.find(".filter-option-inner-inner")[0].innerHTML=f,this.$element.trigger("rendered.bs.select")},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var n=t||this.options.style;"add"==e?this.$button.addClass(n):"remove"==e?this.$button.removeClass(n):(this.$button.removeClass(this.options.style),this.$button.addClass(n))},liHeight:function(e){if(e||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),a=document.createElement("ul"),s=document.createElement("li"),l=document.createElement("li"),u=document.createElement("li"),c=document.createElement("a"),f=document.createElement("span"),h=this.options.header&&this.$menu.find("."+v.POPOVERHEADER).length>0?this.$menu.find("."+v.POPOVERHEADER)[0].cloneNode(!0):null,d=this.options.liveSearch?document.createElement("div"):null,p=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,f.className="text",c.className="dropdown-item",n.className=this.$menu[0].parentNode.className+" "+v.SHOW,n.style.width=this.sizeInfo.selectWidth+"px",i.className="dropdown-menu "+v.SHOW,o.className="inner "+v.SHOW,a.className="dropdown-menu inner "+("4"===g.major?v.SHOW:""),s.className=v.DIVIDER,l.className="dropdown-header",f.appendChild(document.createTextNode("Inner text")),c.appendChild(f),u.appendChild(c),l.appendChild(f.cloneNode(!0)),this.selectpicker.view.widestOption&&a.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),a.appendChild(u),a.appendChild(s),a.appendChild(l),h&&i.appendChild(h),d){var y=document.createElement("input");d.className="bs-searchbox",y.className="form-control",d.appendChild(y),i.appendChild(d)}p&&i.appendChild(p),o.appendChild(a),i.appendChild(o),m&&i.appendChild(m),n.appendChild(i),document.body.appendChild(n);var _,b=c.offsetHeight,w=l?l.offsetHeight:0,x=h?h.offsetHeight:0,k=d?d.offsetHeight:0,E=p?p.offsetHeight:0,z=m?m.offsetHeight:0,A=t(s).outerHeight(!0),C=!!window.getComputedStyle&&window.getComputedStyle(i),S=i.offsetWidth,T=C?null:t(i),M={vert:r(C?C.paddingTop:T.css("paddingTop"))+r(C?C.paddingBottom:T.css("paddingBottom"))+r(C?C.borderTopWidth:T.css("borderTopWidth"))+r(C?C.borderBottomWidth:T.css("borderBottomWidth")),horiz:r(C?C.paddingLeft:T.css("paddingLeft"))+r(C?C.paddingRight:T.css("paddingRight"))+r(C?C.borderLeftWidth:T.css("borderLeftWidth"))+r(C?C.borderRightWidth:T.css("borderRightWidth"))},N={vert:M.vert+r(C?C.marginTop:T.css("marginTop"))+r(C?C.marginBottom:T.css("marginBottom"))+2,horiz:M.horiz+r(C?C.marginLeft:T.css("marginLeft"))+r(C?C.marginRight:T.css("marginRight"))+2};o.style.overflowY="scroll",_=i.offsetWidth-S,document.body.removeChild(n),this.sizeInfo.liHeight=b,this.sizeInfo.dropdownHeaderHeight=w,this.sizeInfo.headerHeight=x,this.sizeInfo.searchHeight=k,this.sizeInfo.actionsHeight=E,this.sizeInfo.doneButtonHeight=z,this.sizeInfo.dividerHeight=A,this.sizeInfo.menuPadding=M,this.sizeInfo.menuExtras=N,this.sizeInfo.menuWidth=S,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=_,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var e,n=this,r=t(window),i=n.$newElement.offset(),o=t(n.options.container);n.options.container&&!o.is("body")?((e=o.offset()).top+=parseInt(o.css("borderTopWidth")),e.left+=parseInt(o.css("borderLeftWidth"))):e={top:0,left:0};var a=n.options.windowPadding;this.sizeInfo.selectOffsetTop=i.top-e.top-r.scrollTop(),this.sizeInfo.selectOffsetBot=r.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-e.top-a[2],this.sizeInfo.selectOffsetLeft=i.left-e.left-r.scrollLeft(),this.sizeInfo.selectOffsetRight=r.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-e.left-a[1],this.sizeInfo.selectOffsetTop-=a[0],this.sizeInfo.selectOffsetLeft-=a[3]},setMenuSize:function(t){this.getSelectPosition();var e,n,r,i,o,a,s=this.sizeInfo.selectWidth,l=this.sizeInfo.liHeight,u=this.sizeInfo.headerHeight,c=this.sizeInfo.searchHeight,f=this.sizeInfo.actionsHeight,h=this.sizeInfo.doneButtonHeight,d=this.sizeInfo.dividerHeight,p=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&this.$newElement.toggleClass(v.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&l*this.selectpicker.current.elements.length+p.vert+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot),"auto"===this.options.size)n=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,r=(i=this.selectpicker.current.elements.length>3?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0)+u+c+f+h,a=Math.max(i-p.vert,0),this.$newElement.hasClass(v.DROPUP)&&(n=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),o=n,e=n-u-c-f-h-p.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var m=0;m<this.options.size;m++)"divider"===this.selectpicker.current.data[m].type&&g++;e=(n=l*this.options.size+g*d+p.vert)-p.vert,o=n+u+c+f+h,r=a=""}"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(v.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.$menu[0].offsetWidth-s),this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":r+"px"}),this.$menuInner.css({"max-height":e+"px","overflow-y":"auto","min-height":a+"px"}),this.sizeInfo.menuInnerHeight=e,this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth,this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(e){if(this.liHeight(e),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var n,r=this,i=t(window),o=0;this.setMenuSize(),"auto"===this.options.size?(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return r.setMenuSize()}),i.off("resize.setMenuSize scroll.setMenuSize").on("resize.setMenuSize scroll.setMenuSize",function(){return r.setMenuSize()})):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize"),i.off("resize.setMenuSize scroll.setMenuSize")),e?o=this.$menuInner[0].scrollTop:r.multiple||"number"==typeof(n=r.selectpicker.main.map.newIndex[r.$element[0].selectedIndex])&&!1!==r.options.size&&(o=(o=r.sizeInfo.liHeight*n)-r.sizeInfo.menuInnerHeight/2+r.sizeInfo.liHeight/2),r.createView(!1,o)}},setWidth:function(){var t=this;"auto"===this.options.width?requestAnimationFrame(function(){t.$menu.css("min-width","0"),t.liHeight(),t.setMenuSize();var e=t.$newElement.clone().appendTo("body"),n=e.css("width","auto").children("button").outerWidth();e.remove(),t.sizeInfo.selectWidth=Math.max(t.sizeInfo.totalMenuWidth,n),t.$newElement.css("width",t.sizeInfo.selectWidth+"px")}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=t('<div class="bs-container" />');var e,n,r,i=this,o=t(this.options.container),a=function(t){var a={};i.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(v.DROPUP,t.hasClass(v.DROPUP)),e=t.offset(),o.is("body")?n={top:0,left:0}:((n=o.offset()).top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),n.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),r=t.hasClass(v.DROPUP)?0:t[0].offsetHeight,g.major<4&&(a.top=e.top-n.top+r,a.left=e.left-n.left),a.width=t[0].offsetWidth,i.$bsContainer.css(a)};this.$button.on("click.bs.dropdown.data-api",function(){i.isDisabled()||(a(i.$newElement),i.$bsContainer.appendTo(i.options.container).toggleClass(v.SHOW,!i.$button.hasClass(v.SHOW)).append(i.$menu))}),t(window).on("resize scroll",function(){a(i.$newElement)}),this.$element.on("hide.bs.select",function(){i.$menu.data("height",i.$menu.height()),i.$bsContainer.detach()})},setOptionStatus:function(){var t=this,e=this.$element.find("option");if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length)for(var n=0;n<t.selectpicker.view.visibleElements.length;n++){var r=t.selectpicker.current.map.originalIndex[n+t.selectpicker.view.position0],i=e[r];if(i){var o=this.selectpicker.main.map.newIndex[r],a=this.selectpicker.main.elements[o];t.setDisabled(r,i.disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled,o,a),t.setSelected(r,i.selected,o,a)}}},setSelected:function(t,e,n,r){var i,o,a=void 0!==this.activeIndex,s=this.activeIndex===t||e&&!this.multiple&&!a;n||(n=this.selectpicker.main.map.newIndex[t]),r||(r=this.selectpicker.main.elements[n]),o=r.firstChild,e&&(this.selectedIndex=t),r.classList.toggle("selected",e),r.classList.toggle("active",s),s&&(this.selectpicker.view.currentActive=r,this.activeIndex=t),o&&(o.classList.toggle("selected",e),o.classList.toggle("active",s),o.setAttribute("aria-selected",e)),s||!a&&e&&void 0!==this.prevActiveIndex&&((i=this.selectpicker.main.elements[this.selectpicker.main.map.newIndex[this.prevActiveIndex]]).classList.remove("selected"),i.classList.remove("active"),i.firstChild&&(i.firstChild.classList.remove("selected"),i.firstChild.classList.remove("active")))},setDisabled:function(t,e,n,r){var i;n||(n=this.selectpicker.main.map.newIndex[t]),r||(r=this.selectpicker.main.elements[n]),i=r.firstChild,r.classList.toggle(v.DISABLED,e),i&&("4"===g.major&&i.classList.toggle(v.DISABLED,e),i.setAttribute("aria-disabled",e),i.setAttribute("tabindex",e?-1:0))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var t=this;this.isDisabled()?(this.$newElement.addClass(v.DISABLED),this.$button.addClass(v.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass(v.DISABLED)&&(this.$newElement.removeClass(v.DISABLED),this.$button.removeClass(v.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!t.isDisabled()})},togglePlaceholder:function(){var t=this.$element[0],e=t.selectedIndex,n=-1===e;n||t.options[e].value||(n=!0),this.$button.toggleClass("bs-placeholder",n)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var n=this,r=t(document);r.data("spaceSelect",!1),this.$button.on("keyup",function(t){/(32)/.test(t.keyCode.toString(10))&&r.data("spaceSelect")&&(t.preventDefault(),r.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){g.major>3&&!n.dropdown&&(n.dropdown=n.$button.data("bs.dropdown"),n.dropdown._menu=n.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(){n.$newElement.hasClass(v.SHOW)||n.setSize()}),this.$element.on("shown.bs.select",function(){n.$menuInner[0].scrollTop!==n.selectpicker.view.scrollTop&&(n.$menuInner[0].scrollTop=n.selectpicker.view.scrollTop),n.options.liveSearch?n.$searchbox.focus():n.$menuInner.focus()}),this.$menuInner.on("click","li a",function(r,i){var o=t(this),a=n.isVirtual()?n.selectpicker.view.position0:0,s=n.selectpicker.current.map.originalIndex[o.parent().index()+a],l=e(n.$element[0]),c=n.$element.prop("selectedIndex"),f=!0;if(n.multiple&&1!==n.options.maxOptions&&r.stopPropagation(),r.preventDefault(),!n.isDisabled()&&!o.parent().hasClass(v.DISABLED)){var h=n.$element.find("option"),d=h.eq(s),p=d.prop("selected"),g=d.parent("optgroup"),m=n.options.maxOptions,y=g.data("maxOptions")||!1;if(s===n.activeIndex&&(i=!0),i||(n.prevActiveIndex=n.activeIndex,n.activeIndex=void 0),n.multiple){if(d.prop("selected",!p),n.setSelected(s,!p),o.blur(),!1!==m||!1!==y){var _=m<h.filter(":selected").length,b=y<g.find("option:selected").length;if(m&&_||y&&b)if(m&&1==m)h.prop("selected",!1),d.prop("selected",!0),n.$menuInner.find(".selected").removeClass("selected"),n.setSelected(s,!0);else if(y&&1==y){g.find("option:selected").prop("selected",!1),d.prop("selected",!0);var w=n.selectpicker.current.data[o.parent().index()+n.selectpicker.view.position0].optID;n.$menuInner.find(".optgroup-"+w).removeClass("selected"),n.setSelected(s,!0)}else{var x="string"==typeof n.options.maxOptionsText?[n.options.maxOptionsText,n.options.maxOptionsText]:n.options.maxOptionsText,k="function"==typeof x?x(m,y):x,E=k[0].replace("{n}",m),z=k[1].replace("{n}",y),A=t('<div class="notify"></div>');k[2]&&(E=E.replace("{var}",k[2][m>1?0:1]),z=z.replace("{var}",k[2][y>1?0:1])),d.prop("selected",!1),n.$menu.append(A),m&&_&&(A.append(t("<div>"+E+"</div>")),f=!1,n.$element.trigger("maxReached.bs.select")),y&&b&&(A.append(t("<div>"+z+"</div>")),f=!1,n.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){n.setSelected(s,!1)},10),A.delay(750).fadeOut(300,function(){t(this).remove()})}}}else h.prop("selected",!1),d.prop("selected",!0),n.setSelected(s,!0);!n.multiple||n.multiple&&1===n.options.maxOptions?n.$button.focus():n.options.liveSearch&&n.$searchbox.focus(),f&&(l!=e(n.$element[0])&&n.multiple||c!=n.$element.prop("selectedIndex")&&!n.multiple)&&(u=[s,d.prop("selected"),l],n.$element.triggerNative("change"))}}),this.$menu.on("click","li."+v.DISABLED+" a, ."+v.POPOVERHEADER+", ."+v.POPOVERHEADER+" :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),n.options.liveSearch&&!t(e.target).hasClass("close")?n.$searchbox.focus():n.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(t){t.preventDefault(),t.stopPropagation(),n.options.liveSearch?n.$searchbox.focus():n.$button.focus()}),this.$menu.on("click","."+v.POPOVERHEADER+" .close",function(){n.$button.click()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){n.options.liveSearch?n.$searchbox.focus():n.$button.focus(),e.preventDefault(),e.stopPropagation(),t(this).hasClass("bs-select-all")?n.selectAll():n.deselectAll()}),this.$element.on({change:function(){n.render(),n.$element.trigger("changed.bs.select",u),u=null},focus:function(){n.$button.focus()}})},liveSearchListener:function(){var t=this,e=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){t.$searchbox.val()&&t.$searchbox.val("")}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(t){t.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var r=t.$searchbox.val();if(t.selectpicker.search.map.newIndex={},t.selectpicker.search.map.originalIndex={},t.selectpicker.search.elements=[],t.selectpicker.search.data=[],r){var i=[],o=r.toUpperCase(),a={},s=[],l=t._searchStyle(),u=t.options.liveSearchNormalize;t._$lisSelected=t.$menuInner.find(".selected");for(var c=0;c<t.selectpicker.main.data.length;c++){var f=t.selectpicker.main.data[c];a[c]||(a[c]=n(f,o,l,u)),a[c]&&void 0!==f.headerIndex&&-1===s.indexOf(f.headerIndex)&&(f.headerIndex>0&&(a[f.headerIndex-1]=!0,s.push(f.headerIndex-1)),a[f.headerIndex]=!0,s.push(f.headerIndex),a[f.lastIndex+1]=!0),a[c]&&"optgroup-label"!==f.type&&s.push(c)}c=0;for(var d=s.length;c<d;c++){var p=s[c],g=t.selectpicker.main.data[s[c-1]];("divider"!==(f=t.selectpicker.main.data[p]).type||"divider"===f.type&&g&&"divider"!==g.type&&d-1!==c)&&(t.selectpicker.search.data.push(f),i.push(t.selectpicker.main.elements[p]),t.selectpicker.search.map.newIndex[f.originalIndex]=i.length-1,t.selectpicker.search.map.originalIndex[i.length-1]=f.originalIndex)}t.activeIndex=void 0,t.noScroll=!0,t.$menuInner.scrollTop(0),t.selectpicker.search.elements=i,t.createView(!0),i.length||(e.className="no-results",e.innerHTML=t.options.noneResultsText.replace("{0}",'"'+h(r)+'"'),t.$menuInner[0].firstChild.appendChild(e))}else t.$menuInner.scrollTop(0),t.createView(!1)})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(t){return void 0!==t?(this.$element.val(t).triggerNative("change"),this.$element):this.$element.val()},changeAll:function(t){if(this.multiple){void 0===t&&(t=!0);var n=this.$element.find("option"),r=0,i=0,o=e(this.$element[0]);this.$element.addClass("bs-select-hidden");for(var a=0;a<this.selectpicker.current.elements.length;a++){var s=n[this.selectpicker.current.map.originalIndex[a]];s&&(s.selected&&r++,s.selected=t,s.selected&&i++)}this.$element.removeClass("bs-select-hidden"),r!==i&&(this.setOptionStatus(),this.togglePlaceholder(),u=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(t){(t=t||window.event)&&t.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(e){var r,i,o,a,s,l=t(this),u=(l.is("input")?l.parent().parent():l.parent()).data("this"),c=u.findLis(),f=!1,h=9===e.which&&!l.hasClass("dropdown-toggle")&&!u.options.selectOnTab,d=m.test(e.which)||h,g=u.$menuInner[0].scrollTop,_=u.isVirtual(),b=!0===_?u.selectpicker.view.position0:0;if(!(i=u.$newElement.hasClass(v.SHOW))&&(d||e.which>=48&&e.which<=57||e.which>=96&&e.which<=105||e.which>=65&&e.which<=90)&&u.$button.trigger("click.bs.dropdown.data-api"),27===e.which&&i&&(e.preventDefault(),u.$button.trigger("click.bs.dropdown.data-api").focus()),d){if(!c.length)return;void 0===(r=!0===_?c.index(c.filter(".active")):u.selectpicker.current.map.newIndex[u.activeIndex])&&(r=-1),-1!==r&&((o=u.selectpicker.current.elements[r+b]).classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active")),38===e.which?(-1!==r&&r--,r+b<0&&(r+=c.length),u.selectpicker.view.canHighlight[r+b]||-1==(r=u.selectpicker.view.canHighlight.slice(0,r+b).lastIndexOf(!0)-b)&&(r=c.length-1)):(40===e.which||h)&&(++r+b>=u.selectpicker.view.canHighlight.length&&(r=0),u.selectpicker.view.canHighlight[r+b]||(r=r+1+u.selectpicker.view.canHighlight.slice(r+b+1).indexOf(!0))),e.preventDefault();var w=b+r;38===e.which?0===b&&r===c.length-1?(u.$menuInner[0].scrollTop=u.$menuInner[0].scrollHeight,w=u.selectpicker.current.elements.length-1):f=(s=(a=u.selectpicker.current.data[w]).position-a.height)<g:(40===e.which||h)&&(0!==b&&0===r?(u.$menuInner[0].scrollTop=0,w=0):f=(s=(a=u.selectpicker.current.data[w]).position-u.sizeInfo.menuInnerHeight)>g),(o=u.selectpicker.current.elements[w]).classList.add("active"),o.firstChild&&o.firstChild.classList.add("active"),u.activeIndex=u.selectpicker.current.map.originalIndex[w],u.selectpicker.view.currentActive=o,f&&(u.$menuInner[0].scrollTop=s),u.options.liveSearch?u.$searchbox.focus():l.focus()}else if(!l.is("input")&&!y.test(e.which)||32===e.which&&u.selectpicker.keydown.keyHistory){var x,k,E=[];e.preventDefault(),u.selectpicker.keydown.keyHistory+=p[e.which],u.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(u.selectpicker.keydown.resetKeyHistory.cancel),u.selectpicker.keydown.resetKeyHistory.cancel=u.selectpicker.keydown.resetKeyHistory.start(),/^(.)\1+$/.test(k=u.selectpicker.keydown.keyHistory)&&(k=k.charAt(0));for(var z=0;z<u.selectpicker.current.data.length;z++){var A=u.selectpicker.current.data[z];n(A,k,"startsWith",!0)&&u.selectpicker.view.canHighlight[z]&&(A.index=z,E.push(A.originalIndex))}if(E.length){var C=0;c.removeClass("active").find("a").removeClass("active"),1===k.length&&(-1===(C=E.indexOf(u.activeIndex))||C===E.length-1?C=0:C++),g-(a=u.selectpicker.current.data[x=u.selectpicker.current.map.newIndex[E[C]]]).position>0?(s=a.position-a.height,f=!0):(s=a.position-u.sizeInfo.menuInnerHeight,f=a.position>g+u.sizeInfo.menuInnerHeight),(o=u.selectpicker.current.elements[x]).classList.add("active"),o.firstChild&&o.firstChild.classList.add("active"),u.activeIndex=E[C],o.firstChild.focus(),f&&(u.$menuInner[0].scrollTop=s),l.focus()}}i&&(32===e.which&&!u.selectpicker.keydown.keyHistory||13===e.which||9===e.which&&u.options.selectOnTab)&&(32!==e.which&&e.preventDefault(),u.options.liveSearch&&32===e.which||(u.$menuInner.find(".active a").trigger("click",!0),l.focus(),u.options.liveSearch||(e.preventDefault(),t(document).data("spaceSelect",!0))))},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){var e=t.extend({},this.options,this.$element.data());this.options=e,this.selectpicker.main.map.newIndex={},this.selectpicker.main.map.originalIndex={},this.createLi(),this.checkDisabled(),this.render(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var b=t.fn.selectpicker;t.fn.selectpicker=o,t.fn.selectpicker.Constructor=_,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=b,this},t(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.select",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',_.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',function(t){t.stopPropagation()}),t(window).on("load.bs.select.data-api",function(){t(".selectpicker").each(function(){var e=t(this);o.call(e,e.data())})})}(t)});