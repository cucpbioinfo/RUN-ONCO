!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var n=[],r=Object.getPrototypeOf,i=n.slice,o=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},a=n.push,s=n.indexOf,l={},u=l.toString,c=l.hasOwnProperty,f=c.toString,d=f.call(Object),h={},p=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},g=function(t){return null!=t&&t===t.window},v=t.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function y(t,e,n){var r,i,o=(n=n||v).createElement("script");if(o.text=t,e)for(r in m)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[u.call(t)]||"object":typeof t}var b="3.6.0",w=function(t,e){return new w.fn.init(t,e)};function x(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!p(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}w.fn=w.prototype={jquery:b,constructor:w,length:0,toArray:function(){return i.call(this)},get:function(t){return null==t?i.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||p(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(u&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,a[e]=w.extend(u,o,r)):void 0!==r&&(a[e]=r));return a},w.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==u.call(t)||(e=r(t))&&("function"!=typeof(n=c.call(e,"constructor")&&e.constructor)||f.call(n)!==d))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){y(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(x(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(x(Object(t))?w.merge(n,"string"==typeof t?[t]:t):a.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:s.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,a=0,s=[];if(x(t))for(r=t.length;a<r;a++)null!=(i=e(t[a],a,n))&&s.push(i);else for(a in t)null!=(i=e(t[a],a,n))&&s.push(i);return o(s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){l["[object "+e+"]"]=e.toLowerCase()}));var k=function(t){var e,n,r,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,_,b="sizzle"+1*new Date,w=t.document,x=0,k=0,E=lt(),z=lt(),A=lt(),C=lt(),T=function(t,e){return t===e&&(f=!0),0},S={}.hasOwnProperty,M=[],N=M.pop,D=M.push,O=M.push,I=M.slice,P=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+B+"*("+j+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+B+"*\\]",R=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",q=new RegExp(B+"+","g"),H=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),$=new RegExp("^"+B+"*,"+B+"*"),W=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),U=new RegExp(B+"|>"),V=new RegExp(R),Y=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},G=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){d()},at=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(M=I.call(w.childNodes),w.childNodes)}catch(e){O={apply:M.length?function(t,e){D.apply(t,I.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function st(t,e,r,i){var o,s,u,c,f,p,m,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return r;if(!i&&(d(e),e=e||h,g)){if(11!==w&&(f=J.exec(t)))if(o=f[1]){if(9===w){if(!(u=e.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&_(e,u)&&u.id===o)return r.push(u),r}else{if(f[2])return O.apply(r,e.getElementsByTagName(t)),r;if((o=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return O.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!C[t+" "]&&(!v||!v.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(m=t,y=e,1===w&&(U.test(t)||W.test(t))){for((y=tt.test(t)&&mt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=b)),s=(p=a(t)).length;s--;)p[s]=(c?"#"+c:":scope")+" "+_t(p[s]);m=p.join(",")}try{return O.apply(r,y.querySelectorAll(m)),r}catch(e){C(t,!0)}finally{c===b&&e.removeAttribute("id")}}}return l(t.replace(H,"$1"),e,r,i)}function lt(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ut(t){return t[b]=!0,t}function ct(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ft(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function dt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return ut((function(e){return e=+e,ut((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!G.test(t&&t.namespaceURI||e&&e.nodeName||"HTML")},d=st.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:w;return a!=h&&9===a.nodeType&&a.documentElement&&(p=(h=a).documentElement,g=!o(h),w!=h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.scope=ct((function(t){return p.appendChild(t).appendChild(h.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(h.getElementsByClassName),n.getById=ct((function(t){return p.appendChild(t).id=b,!h.getElementsByName||!h.getElementsByName(b).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],v=[],(n.qsa=Q.test(h.querySelectorAll))&&(ct((function(t){var e;p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+B+"*(?:value|"+L+")"),t.querySelectorAll("[id~="+b+"-]").length||v.push("~="),(e=h.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\["+B+"*name"+B+"*="+B+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+B+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),m.push("!=",R)})),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),e=Q.test(p.compareDocumentPosition),_=e||Q.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return f=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==h||t.ownerDocument==w&&_(w,t)?-1:e==h||e.ownerDocument==w&&_(w,e)?1:c?P(c,t)-P(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return f=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t==h?-1:e==h?1:i?-1:o?1:c?P(c,t)-P(c,e):0;if(i===o)return dt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?dt(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0}),h},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&g&&!C[e+" "]&&(!m||!m.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){C(e,!0)}return 0<st(e,h,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!=h&&d(t),_(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=h&&d(t);var i=r.attrHandle[e.toLowerCase()],o=i&&S.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(rt,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(T),f){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return c=null,t},i=st.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=st.selectors={cacheLength:50,createPseudo:ut,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&E(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&-1<i.indexOf(n):"$="===e?n&&i.slice(-n.length)===n:"~="===e?-1<(" "+i.replace(q," ")+" ").indexOf(n):"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,f,d,h,p,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(v){if(o){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(_=(h=(u=(c=(f=(d=v)[b]||(d[b]={}))[d.uniqueID]||(f[d.uniqueID]={}))[t]||[])[0]===x&&u[1])&&u[2],d=h&&v.childNodes[h];d=++h&&d&&d[g]||(_=h=0)||p.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[x,h,_];break}}else if(y&&(_=h=(u=(c=(f=(d=e)[b]||(d[b]={}))[d.uniqueID]||(f[d.uniqueID]={}))[t]||[])[0]===x&&u[1]),!1===_)for(;(d=++h&&d&&d[g]||(_=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++_||(y&&((c=(f=d[b]||(d[b]={}))[d.uniqueID]||(f[d.uniqueID]={}))[t]=[x,_]),d!==e)););return(_-=i)===r||_%r==0&&0<=_/r}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return i[b]?i(e):1<i.length?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ut((function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=P(t,o[a])]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:ut((function(t){var e=[],n=[],r=s(t.replace(H,"$1"));return r[b]?ut((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:ut((function(t){return function(e){return 0<st(t,e).length}})),contains:ut((function(t){return t=t.replace(et,nt),function(e){return-1<(e.textContent||i(e)).indexOf(t)}})),lang:ut((function(t){return Y.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt((function(){return[0]})),last:vt((function(t,e){return[e-1]})),eq:vt((function(t,e,n){return[n<0?n+e:n]})),even:vt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:vt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:vt((function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t})),gt:vt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function yt(){}function _t(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function bt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=k++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,l){var u,c,f,d=[x,s];if(l){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(c=(f=e[b]||(e[b]={}))[e.uniqueID]||(f[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((u=c[o])&&u[0]===x&&u[1]===s)return d[2]=u[2];if((c[o]=d)[2]=t(e,n,l))return!0}return!1}}function wt(t){return 1<t.length?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function xt(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),u&&e.push(s)));return a}function kt(t,e,n,r,i,o){return r&&!r[b]&&(r=kt(r)),i&&!i[b]&&(i=kt(i,o)),ut((function(o,a,s,l){var u,c,f,d=[],h=[],p=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)st(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!o&&e?g:xt(g,d,t,s,l),m=n?i||(o?t:p||r)?[]:a:v;if(n&&n(v,m,s,l),r)for(u=xt(m,h),r(u,[],s,l),c=u.length;c--;)(f=u[c])&&(m[h[c]]=!(v[h[c]]=f));if(o){if(i||t){if(i){for(u=[],c=m.length;c--;)(f=m[c])&&u.push(v[c]=f);i(null,m=[],u,l)}for(c=m.length;c--;)(f=m[c])&&-1<(u=i?P(o,f):d[c])&&(o[u]=!(a[u]=f))}}else m=xt(m===a?m.splice(p,m.length):m),i?i(null,a,m,l):O.apply(a,m)}))}function Et(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],l=a?1:0,c=bt((function(t){return t===e}),s,!0),f=bt((function(t){return-1<P(e,t)}),s,!0),d=[function(t,n,r){var i=!a&&(r||n!==u)||((e=n).nodeType?c(t,n,r):f(t,n,r));return e=null,i}];l<o;l++)if(n=r.relative[t[l].type])d=[bt(wt(d),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[b]){for(i=++l;i<o&&!r.relative[t[i].type];i++);return kt(1<l&&wt(d),1<l&&_t(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(H,"$1"),n,l<i&&Et(t.slice(l,i)),i<o&&Et(t=t.slice(i)),i<o&&_t(t))}d.push(n)}return wt(d)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,a=st.tokenize=function(t,e){var n,i,o,a,s,l,u,c=z[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=r.preFilter;s;){for(a in n&&!(i=$.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=W.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(i=X[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):z(t,l).slice(0)},s=st.compile=function(t,e){var n,i,o,s,l,c,f=[],p=[],v=A[t+" "];if(!v){for(e||(e=a(t)),n=e.length;n--;)(v=Et(e[n]))[b]?f.push(v):p.push(v);(v=A(t,(i=p,s=0<(o=f).length,l=0<i.length,c=function(t,e,n,a,c){var f,p,v,m=0,y="0",_=t&&[],b=[],w=u,k=t||l&&r.find.TAG("*",c),E=x+=null==w?1:Math.random()||.1,z=k.length;for(c&&(u=e==h||e||c);y!==z&&null!=(f=k[y]);y++){if(l&&f){for(p=0,e||f.ownerDocument==h||(d(f),n=!g);v=i[p++];)if(v(f,e||h,n)){a.push(f);break}c&&(x=E)}s&&((f=!v&&f)&&m--,t&&_.push(f))}if(m+=y,s&&y!==m){for(p=0;v=o[p++];)v(_,b,e,n);if(t){if(0<m)for(;y--;)_[y]||b[y]||(b[y]=N.call(a));b=xt(b)}O.apply(a,b),c&&!t&&0<b.length&&1<m+o.length&&st.uniqueSort(a)}return c&&(x=E,u=w),_},s?ut(c):c))).selector=t}return v},l=st.select=function(t,e,n,i){var o,l,u,c,f,d="function"==typeof t&&t,h=!i&&a(t=d.selector||t);if(n=n||[],1===h.length){if(2<(l=h[0]=h[0].slice(0)).length&&"ID"===(u=l[0]).type&&9===e.nodeType&&g&&r.relative[l[1].type]){if(!(e=(r.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=X.needsContext.test(t)?0:l.length;o--&&!r.relative[c=(u=l[o]).type];)if((f=r.find[c])&&(i=f(u.matches[0].replace(et,nt),tt.test(l[0].type)&&mt(e.parentNode)||e))){if(l.splice(o,1),!(t=i.length&&_t(l)))return O.apply(n,i),n;break}}return(d||s(t,h))(i,e,!g,n,!e||tt.test(t)&&mt(e.parentNode)||e),n},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!f,d(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ft("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ft("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ft(L,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),st}(t);w.find=k,w.expr=k.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=k.uniqueSort,w.text=k.getText,w.isXMLDoc=k.isXML,w.contains=k.contains,w.escapeSelector=k.escape;var E=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&w(t).is(n))break;r.push(t)}return r},z=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},A=w.expr.match.needsContext;function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function S(t,e,n){return p(e)?w.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?w.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?w.grep(t,(function(t){return-1<s.call(e,t)!==n})):w.filter(e,t,n)}w.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?w.find.matchesSelector(r,t)?[r]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<r;e++)if(w.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)w.find(t,i[e],n);return 1<r?w.uniqueSort(n):n},filter:function(t){return this.pushStack(S(this,t||[],!1))},not:function(t){return this.pushStack(S(this,t||[],!0))},is:function(t){return!!S(this,"string"==typeof t&&A.test(t)?w(t):t||[],!1).length}});var M,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:N.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(w.merge(this,w.parseHTML(r[1],(e=e instanceof w?e[0]:e)&&e.nodeType?e.ownerDocument||e:v,!0)),T.test(r[1])&&w.isPlainObject(e))for(r in e)p(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=v.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):p(t)?void 0!==n.ready?n.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,M=w(v);var D=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&w(t);if(!A.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&w.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?w.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?s.call(w(t),this[0]):s.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return E(t,"parentNode")},parentsUntil:function(t,e,n){return E(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return E(t,"nextSibling")},prevAll:function(t){return E(t,"previousSibling")},nextUntil:function(t,e,n){return E(t,"nextSibling",n)},prevUntil:function(t,e,n){return E(t,"previousSibling",n)},siblings:function(t){return z((t.parentNode||{}).firstChild,t)},children:function(t){return z(t.firstChild)},contents:function(t){return null!=t.contentDocument&&r(t.contentDocument)?t.contentDocument:(C(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(n,r){var i=w.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),1<this.length&&(O[t]||w.uniqueSort(i),D.test(t)&&i.reverse()),this.pushStack(i)}}));var P=/[^\x20\t\r\n\f]+/g;function L(t){return t}function B(t){throw t}function j(t,e,n,r){var i;try{t&&p(i=t.promise)?i.call(t).done(e).fail(n):t&&p(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}w.Callbacks=function(t){var e;t="string"==typeof t?(e={},w.each(t.match(P)||[],(function(t,n){e[n]=!0})),e):w.extend({},t);var n,r,i,o,a=[],s=[],l=-1,u=function(){for(o=o||t.once,i=n=!0;s.length;l=-1)for(r=s.shift();++l<a.length;)!1===a[l].apply(r[0],r[1])&&t.stopOnFalse&&(l=a.length,r=!1);t.memory||(r=!1),n=!1,o&&(a=r?[]:"")},c={add:function(){return a&&(r&&!n&&(l=a.length-1,s.push(r)),function e(n){w.each(n,(function(n,r){p(r)?t.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==_(r)&&e(r)}))}(arguments),r&&!n&&u()),this},remove:function(){return w.each(arguments,(function(t,e){for(var n;-1<(n=w.inArray(e,a,n));)a.splice(n,1),n<=l&&l--})),this},has:function(t){return t?-1<w.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=r="",this},disabled:function(){return!a},lock:function(){return o=s=[],r||n||(a=r=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],s.push(e),n||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(e){w.each(n,(function(n,r){var i=p(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&p(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(e,r,i){var o=0;function a(e,n,r,i){return function(){var s=this,l=arguments,u=function(){var t,u;if(!(e<o)){if((t=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");p(u=t&&("object"==typeof t||"function"==typeof t)&&t.then)?i?u.call(t,a(o,n,L,i),a(o,n,B,i)):(o++,u.call(t,a(o,n,L,i),a(o,n,B,i),a(o,n,L,n.notifyWith))):(r!==L&&(s=void 0,l=[t]),(i||n.resolveWith)(s,l))}},c=i?u:function(){try{u()}catch(u){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(u,c.stackTrace),o<=e+1&&(r!==B&&(s=void 0,l=[u]),n.rejectWith(s,l))}};e?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),t.setTimeout(c))}}return w.Deferred((function(t){n[0][3].add(a(0,t,p(i)?i:L,t.notifyWith)),n[1][3].add(a(0,t,p(e)?e:L)),n[2][3].add(a(0,t,p(r)?r:B))})).promise()},promise:function(t){return null!=t?w.extend(t,i):i}},o={};return w.each(n,(function(t,e){var a=e[2],s=e[5];i[e[1]]=a.add,s&&a.add((function(){r=s}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),o=i.call(arguments),a=w.Deferred(),s=function(t){return function(n){r[t]=this,o[t]=1<arguments.length?i.call(arguments):n,--e||a.resolveWith(r,o)}};if(e<=1&&(j(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||p(o[n]&&o[n].then)))return a.then();for(;n--;)j(o[n],s(n),a.reject);return a.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&F.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},w.readyException=function(e){t.setTimeout((function(){throw e}))};var R=w.Deferred();function q(){v.removeEventListener("DOMContentLoaded",q),t.removeEventListener("load",q),w.ready()}w.fn.ready=function(t){return R.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||R.resolveWith(v,[w])}}),w.ready.then=R.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?t.setTimeout(w.ready):(v.addEventListener("DOMContentLoaded",q),t.addEventListener("load",q));var H=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===_(n))for(s in i=!0,n)H(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,p(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(w(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},$=/^-ms-/,W=/-([a-z])/g;function U(t,e){return e.toUpperCase()}function V(t){return t.replace($,"ms-").replace(W,U)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=w.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[V(e)]=n;else for(r in e)i[V(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][V(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(V):(e=V(e))in r?[e]:e.match(P)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||w.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var G=new X,K=new X,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:Z.test(i)?JSON.parse(i):i)}catch(t){}K.set(t,e,n)}else n=void 0;return n}w.extend({hasData:function(t){return K.hasData(t)||G.hasData(t)},data:function(t,e,n){return K.access(t,e,n)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,n){return G.access(t,e,n)},_removeData:function(t,e){G.remove(t,e)}}),w.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=K.get(o),1===o.nodeType&&!G.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=V(r.slice(5)),J(o,r,i[r]));G.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){K.set(this,t)})):H(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=K.get(o,t))||void 0!==(n=J(o,t))?n:void 0;this.each((function(){K.set(this,t,e)}))}),null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each((function(){K.remove(this,t)}))}}),w.extend({queue:function(t,e,n){var r;if(t)return r=G.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=G.access(t,e,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=w.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=w._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){w.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return G.get(t,n)||G.access(t,n,{empty:w.Callbacks("once memory").add((function(){G.remove(t,[e+"queue",n])}))})}}),w.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?w.queue(this[0],t):void 0===e?this:this.each((function(){var n=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=G.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=v.documentElement,it=function(t){return w.contains(t.ownerDocument,t)},ot={composed:!0};rt.getRootNode&&(it=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&it(t)&&"none"===w.css(t,"display")};function st(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(t,e,"")},l=s(),u=n&&n[3]||(w.cssNumber[e]?"":"px"),c=t.nodeType&&(w.cssNumber[e]||"px"!==u&&+l)&&et.exec(w.css(t,e));if(c&&c[3]!==u){for(u=u||c[3],c=+(l/=2)||1;a--;)w.style(t,e,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;w.style(t,e,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var lt={};function ut(t,e){for(var n,r,i,o,a,s,l,u=[],c=0,f=t.length;c<f;c++)(r=t[c]).style&&(n=r.style.display,e?("none"===n&&(u[c]=G.get(r,"display")||null,u[c]||(r.style.display="")),""===r.style.display&&at(r)&&(u[c]=(l=a=o=void 0,a=(i=r).ownerDocument,(l=lt[s=i.nodeName])||(o=a.body.appendChild(a.createElement(s)),l=w.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),lt[s]=l)))):"none"!==n&&(u[c]="none",G.set(r,"display",n)));for(c=0;c<f;c++)null!=u[c]&&(t[c].style.display=u[c]);return t}w.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){at(this)?w(this).show():w(this).hide()}))}});var ct,ft,dt=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pt=/^$|^module$|\/(?:java|ecma)script/i;ct=v.createDocumentFragment().appendChild(v.createElement("div")),(ft=v.createElement("input")).setAttribute("type","radio"),ft.setAttribute("checked","checked"),ft.setAttribute("name","t"),ct.appendChild(ft),h.checkClone=ct.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!ct.cloneNode(!0).lastChild.defaultValue,ct.innerHTML="<option></option>",h.option=!!ct.lastChild;var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&C(t,e)?w.merge([t],n):n}function mt(t,e){for(var n=0,r=t.length;n<r;n++)G.set(t[n],"globalEval",!e||G.get(e[n],"globalEval"))}gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,h.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);var yt=/<|&#?\w+;/;function _t(t,e,n,r,i){for(var o,a,s,l,u,c,f=e.createDocumentFragment(),d=[],h=0,p=t.length;h<p;h++)if((o=t[h])||0===o)if("object"===_(o))w.merge(d,o.nodeType?[o]:o);else if(yt.test(o)){for(a=a||f.appendChild(e.createElement("div")),s=(ht.exec(o)||["",""])[1].toLowerCase(),a.innerHTML=(l=gt[s]||gt._default)[1]+w.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;w.merge(d,a.childNodes),(a=f.firstChild).textContent=""}else d.push(e.createTextNode(o));for(f.textContent="",h=0;o=d[h++];)if(r&&-1<w.inArray(o,r))i&&i.push(o);else if(u=it(o),a=vt(f.appendChild(o),"script"),u&&mt(a),n)for(c=0;o=a[c++];)pt.test(o.type||"")&&n.push(o);return f}var bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function xt(){return!1}function kt(t,e){return t===function(){try{return v.activeElement}catch(t){}}()==("focus"===e)}function Et(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Et(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=xt;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return w().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),t.each((function(){w.event.add(this,e,i,r,n)}))}function zt(t,e,n){n?(G.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var r,o,a=G.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=i.call(arguments),G.set(this,e,a),r=n(this,e),this[e](),a!==(o=G.get(this,e))||r?G.set(this,e,!1):o={},a!==o)return t.stopImmediatePropagation(),t.preventDefault(),o&&o.value}else a.length&&(G.set(this,e,{value:w.event.trigger(w.extend(a[0],w.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===G.get(t,e)&&w.event.add(t,e,wt)}w.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,f,d,h,p,g,v=G.get(t);if(Y(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(rt,i),n.guid||(n.guid=w.guid++),(l=v.events)||(l=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(P)||[""]).length;u--;)h=g=(s=bt.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),h&&(f=w.event.special[h]||{},f=w.event.special[h=(i?f.delegateType:f.bindType)||h]||{},c=w.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=l[h])||((d=l[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(h,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),w.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,f,d,h,p,g,v=G.hasData(t)&&G.get(t);if(v&&(l=v.events)){for(u=(e=(e||"").match(P)||[""]).length;u--;)if(h=g=(s=bt.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),h){for(f=w.event.special[h]||{},d=l[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(t,c));a&&!d.length&&(f.teardown&&!1!==f.teardown.call(t,p,v.handle)||w.removeEvent(t,h,v.handle),delete l[h])}else for(h in l)w.event.remove(t,h+e[u],n,r,!0);w.isEmptyObject(l)&&G.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),l=w.event.fix(t),u=(G.get(this,"events")||Object.create(null))[l.type]||[],c=w.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=w.event.handlers.call(this,l,u),e=0;(i=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,r,i,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?-1<w(i,this).index(u):w.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:p(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return dt.test(e.type)&&e.click&&C(e,"input")&&zt(e,"click",wt),!1},trigger:function(t){var e=this||t;return dt.test(e.type)&&e.click&&C(e,"input")&&zt(e,"click"),!0},_default:function(t){var e=t.target;return dt.test(e.type)&&e.click&&C(e,"input")&&G.get(e,"click")||C(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:xt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:xt,isPropagationStopped:xt,isImmediatePropagationStopped:xt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){w.event.special[t]={setup:function(){return zt(this,t,kt),!1},trigger:function(){return zt(this,t),!0},_default:function(){return!0},delegateType:e}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||w.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),w.fn.extend({on:function(t,e,n,r){return Et(this,t,e,n,r)},one:function(t,e,n,r){return Et(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,w(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=xt),this.each((function(){w.event.remove(this,t,n,e)}))}});var At=/<script|<style|<link/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function St(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Mt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Dt(t,e){var n,r,i,o,a,s;if(1===e.nodeType){if(G.hasData(t)&&(s=G.get(t).events))for(i in G.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)w.event.add(e,i,s[i][n]);K.hasData(t)&&(o=K.access(t),a=w.extend({},o),K.set(e,a))}}function Ot(t,e,n,r){e=o(e);var i,a,s,l,u,c,f=0,d=t.length,g=d-1,v=e[0],m=p(v);if(m||1<d&&"string"==typeof v&&!h.checkClone&&Ct.test(v))return t.each((function(i){var o=t.eq(i);m&&(e[0]=v.call(this,i,o.html())),Ot(o,e,n,r)}));if(d&&(a=(i=_t(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(l=(s=w.map(vt(i,"script"),Mt)).length;f<d;f++)u=i,f!==g&&(u=w.clone(u,!0,!0),l&&w.merge(s,vt(u,"script"))),n.call(t[f],u,f);if(l)for(c=s[s.length-1].ownerDocument,w.map(s,Nt),f=0;f<l;f++)pt.test((u=s[f]).type||"")&&!G.access(u,"globalEval")&&w.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):y(u.textContent.replace(Tt,""),u,c))}return t}function It(t,e,n){for(var r,i=e?w.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(vt(r)),r.parentNode&&(n&&it(r)&&mt(vt(r,"script")),r.parentNode.removeChild(r));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s,l,u,c=t.cloneNode(!0),f=it(t);if(!(h.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(a=vt(c),r=0,i=(o=vt(t)).length;r<i;r++)s=o[r],"input"===(u=(l=a[r]).nodeName.toLowerCase())&&dt.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||vt(t),a=a||vt(c),r=0,i=o.length;r<i;r++)Dt(o[r],a[r]);else Dt(t,c);return 0<(a=vt(c,"script")).length&&mt(a,!f&&vt(t,"script")),c},cleanData:function(t){for(var e,n,r,i=w.event.special,o=0;void 0!==(n=t[o]);o++)if(Y(n)){if(e=n[G.expando]){if(e.events)for(r in e.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,e.handle);n[G.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(t){return It(this,t,!0)},remove:function(t){return It(this,t)},text:function(t){return H(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ot(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||St(this,t).appendChild(t)}))},prepend:function(){return Ot(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=St(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ot(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ot(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return H(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!gt[(ht.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(w.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ot(this,arguments,(function(e){var n=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(vt(this)),n&&n.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var n,r=[],i=w(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),w(i[s])[e](n),a.apply(r,n.get());return this.pushStack(r)}}));var Pt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Lt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Bt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},jt=new RegExp(nt.join("|"),"i");function Ft(t,e,n){var r,i,o,a,s=t.style;return(n=n||Lt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||it(t)||(a=w.style(t,e)),!h.pixelBoxStyles()&&Pt.test(a)&&jt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Rt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(u).appendChild(c);var e=t.getComputedStyle(c);r="1%"!==e.top,l=12===n(e.marginLeft),c.style.right="60%",a=36===n(e.right),i=36===n(e.width),c.style.position="absolute",o=12===n(c.offsetWidth/3),rt.removeChild(u),c=null}}function n(t){return Math.round(parseFloat(t))}var r,i,o,a,s,l,u=v.createElement("div"),c=v.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,n,r,i;return null==s&&(e=v.createElement("table"),n=v.createElement("tr"),r=v.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",rt.appendChild(e).appendChild(n).appendChild(r),i=t.getComputedStyle(n),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,rt.removeChild(e)),s}}))}();var qt=["Webkit","Moz","ms"],Ht=v.createElement("div").style,$t={};function Wt(t){return w.cssProps[t]||$t[t]||(t in Ht?t:$t[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=qt.length;n--;)if((t=qt[n]+e)in Ht)return t}(t)||t)}var Ut=/^(none|table(?!-c[ea]).+)/,Vt=/^--/,Yt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"};function Gt(t,e,n){var r=et.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Kt(t,e,n,r,i,o){var a="width"===e?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=w.css(t,n+nt[a],!0,i)),r?("content"===n&&(l-=w.css(t,"padding"+nt[a],!0,i)),"margin"!==n&&(l-=w.css(t,"border"+nt[a]+"Width",!0,i))):(l+=w.css(t,"padding"+nt[a],!0,i),"padding"!==n?l+=w.css(t,"border"+nt[a]+"Width",!0,i):s+=w.css(t,"border"+nt[a]+"Width",!0,i));return!r&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function Zt(t,e,n){var r=Lt(t),i=(!h.boxSizingReliable()||n)&&"border-box"===w.css(t,"boxSizing",!1,r),o=i,a=Ft(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Pt.test(a)){if(!n)return a;a="auto"}return(!h.boxSizingReliable()&&i||!h.reliableTrDimensions()&&C(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===w.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===w.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+Kt(t,e,n||(i?"border":"content"),o,r,a)+"px"}function Qt(t,e,n,r,i){return new Qt.prototype.init(t,e,n,r,i)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ft(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=V(e),l=Vt.test(e),u=t.style;if(l||(e=Wt(s)),a=w.cssHooks[e]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e];"string"==(o=typeof n)&&(i=et.exec(n))&&i[1]&&(n=st(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,r){var i,o,a,s=V(e);return Vt.test(e)||(e=Wt(s)),(a=w.cssHooks[e]||w.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Ft(t,e,r)),"normal"===i&&e in Xt&&(i=Xt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,n,r){if(n)return!Ut.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,e,r):Bt(t,Yt,(function(){return Zt(t,e,r)}))},set:function(t,n,r){var i,o=Lt(t),a=!h.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===w.css(t,"boxSizing",!1,o),l=r?Kt(t,e,r,s,o):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Kt(t,e,"border",!1,o)-.5)),l&&(i=et.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=w.css(t,e)),Gt(0,n,l)}}})),w.cssHooks.marginLeft=Rt(h.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ft(t,"marginLeft"))||t.getBoundingClientRect().left-Bt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+nt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(w.cssHooks[t+e].set=Gt)})),w.fn.extend({css:function(t,e){return H(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Lt(t),i=e.length;a<i;a++)o[e[a]]=w.css(t,e[a],!1,r);return o}return void 0!==n?w.style(t,e,n):w.css(t,e)}),t,e,1<arguments.length)}}),((w.Tween=Qt).prototype={constructor:Qt,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var t=Qt.propHooks[this.prop];return t&&t.get?t.get(this):Qt.propHooks._default.get(this)},run:function(t){var e,n=Qt.propHooks[this.prop];return this.pos=e=this.options.duration?w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Qt.propHooks._default.set(this),this}}).init.prototype=Qt.prototype,(Qt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Wt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Qt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=Qt.prototype.init,w.fx.step={};var Jt,te,ee,ne,re=/^(?:toggle|show|hide)$/,ie=/queueHooks$/;function oe(){te&&(!1===v.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(oe):t.setTimeout(oe,w.fx.interval),w.fx.tick())}function ae(){return t.setTimeout((function(){Jt=void 0})),Jt=Date.now()}function se(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=nt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function le(t,e,n){for(var r,i=(ue.tweeners[e]||[]).concat(ue.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function ue(t,e,n){var r,i,o=0,a=ue.prefilters.length,s=w.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var e=Jt||ae(),n=Math.max(0,u.startTime+u.duration-e),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(t,[u,r,n]),r<1&&a?n:(a||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:e,originalOptions:n,startTime:Jt||ae(),duration:n.duration,tweens:[],createTween:function(e,n){var r=w.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=V(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=w.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);o<a;o++)if(r=ue.prefilters[o].call(u,t,c,u.opts))return p(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,le,u),p(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ue,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){p(t)?(e=t,t=["*"]):t=t.match(P);for(var n,r=0,i=t.length;r<i;r++)(ue.tweeners[n=t[r]]=ue.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,l,u,c,f="width"in e||"height"in e,d=this,h={},p=t.style,g=t.nodeType&&at(t),v=G.get(t,"fxshow");for(r in n.queue||(null==(a=w._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always((function(){d.always((function(){a.unqueued--,w.queue(t,"fx").length||a.empty.fire()}))}))),e)if(re.test(i=e[r])){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}h[r]=v&&v[r]||w.style(t,r)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(h))for(r in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=v&&v.display)&&(u=G.get(t,"display")),"none"===(c=w.css(t,"display"))&&(u?c=u:(ut([t],!0),u=t.style.display||u,c=w.css(t,"display"),ut([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===w.css(t,"float")&&(l||(d.done((function(){p.display=u})),null==u&&(u="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,h)l||(v?"hidden"in v&&(g=v.hidden):v=G.access(t,"fxshow",{display:u}),o&&(v.hidden=!g),g&&ut([t],!0),d.done((function(){for(r in g||ut([t]),G.remove(t,"fxshow"),h)w.style(t,r,h[r])}))),l=le(g?v[r]:0,r,d),r in v||(v[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ue.prefilters.unshift(t):ue.prefilters.push(t)}}),w.speed=function(t,e,n){var r=t&&"object"==typeof t?w.extend({},t):{complete:n||!n&&e||p(t)&&t,duration:t,easing:n&&e||e&&!p(e)&&e};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){p(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=w.isEmptyObject(t),o=w.speed(e,n,r),a=function(){var e=ue(this,w.extend({},t),o);(i||G.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=w.timers,a=G.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ie.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=G.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var n=w.fn[e];w.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(se(e,!0),t,r,i)}})),w.each({slideDown:se("show"),slideUp:se("hide"),slideToggle:se("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),w.timers=[],w.fx.tick=function(){var t,e=0,n=w.timers;for(Jt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||w.fx.stop(),Jt=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){te||(te=!0,oe())},w.fx.stop=function(){te=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,n){return e=w.fx&&w.fx.speeds[e]||e,this.queue(n=n||"fx",(function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}}))},ee=v.createElement("input"),ne=v.createElement("select").appendChild(v.createElement("option")),ee.type="checkbox",h.checkOn=""!==ee.value,h.optSelected=ne.selected,(ee=v.createElement("input")).value="t",ee.type="radio",h.radioValue="t"===ee.value;var ce,fe=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return H(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?w.prop(t,e,n):(1===o&&w.isXMLDoc(t)||(i=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?ce:void 0)),void 0!==n?null===n?void w.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=w.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!h.radioValue&&"radio"===e&&C(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(P);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),ce={set:function(t,e,n){return!1===e?w.removeAttr(t,n):t.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=fe[e]||w.find.attr;fe[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=fe[a],fe[a]=i,i=null!=n(t,e,r)?a:null,fe[a]=o),i}}));var de=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;function pe(t){return(t.match(P)||[]).join(" ")}function ge(t){return t.getAttribute&&t.getAttribute("class")||""}function ve(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(P)||[]}w.fn.extend({prop:function(t,e){return H(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(t)||(i=w.propHooks[e=w.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(w.propHooks.selected={get:function(t){return null},set:function(t){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(p(t))return this.each((function(e){w(this).addClass(t.call(this,e,ge(this)))}));if((e=ve(t)).length)for(;n=this[l++];)if(i=ge(n),r=1===n.nodeType&&" "+pe(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=pe(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(p(t))return this.each((function(e){w(this).removeClass(t.call(this,e,ge(this)))}));if(!arguments.length)return this.attr("class","");if((e=ve(t)).length)for(;n=this[l++];)if(i=ge(n),r=1===n.nodeType&&" "+pe(i)+" "){for(a=0;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=pe(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):p(t)?this.each((function(n){w(this).toggleClass(t.call(this,n,ge(this),e),e)})):this.each((function(){var e,i,o,a;if(r)for(i=0,o=w(this),a=ve(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ge(this))&&G.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":G.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+pe(ge(n))+" ").indexOf(e))return!0;return!1}});var me=/\r/g;w.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=p(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,w(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(me,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:pe(w.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(e=w(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=w.makeArray(e),a=i.length;a--;)((r=i[a]).selected=-1<w.inArray(w.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},h.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),h.focusin="onfocusin"in t;var ye=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,n,r,i){var o,a,s,l,u,f,d,h,m=[r||v],y=c.call(e,"type")?e.type:e,_=c.call(e,"namespace")?e.namespace.split("."):[];if(a=h=s=r=r||v,3!==r.nodeType&&8!==r.nodeType&&!ye.test(y+w.event.triggered)&&(-1<y.indexOf(".")&&(y=(_=y.split(".")).shift(),_.sort()),u=y.indexOf(":")<0&&"on"+y,(e=e[w.expando]?e:new w.Event(y,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=_.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:w.makeArray(n,[e]),d=w.event.special[y]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!g(r)){for(ye.test((l=d.delegateType||y)+y)||(a=a.parentNode);a;a=a.parentNode)m.push(a),s=a;s===(r.ownerDocument||v)&&m.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=m[o++])&&!e.isPropagationStopped();)h=a,e.type=1<o?l:d.bindType||y,(f=(G.get(a,"events")||Object.create(null))[e.type]&&G.get(a,"handle"))&&f.apply(a,n),(f=u&&a[u])&&f.apply&&Y(a)&&(e.result=f.apply(a,n),!1===e.result&&e.preventDefault());return e.type=y,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),n)||!Y(r)||u&&p(r[y])&&!g(r)&&((s=r[u])&&(r[u]=null),w.event.triggered=y,e.isPropagationStopped()&&h.addEventListener(y,_e),r[y](),e.isPropagationStopped()&&h.removeEventListener(y,_e),w.event.triggered=void 0,s&&(r[u]=s)),e.result}},simulate:function(t,e,n){var r=w.extend(new w.Event,n,{type:t,isSimulated:!0});w.event.trigger(r,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return w.event.trigger(t,e,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=G.access(r,e);i||r.addEventListener(t,n,!0),G.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=G.access(r,e)-1;i?G.access(r,e,i):(r.removeEventListener(t,n,!0),G.remove(r,e))}}}));var be=t.location,we={guid:Date.now()},xe=/\?/;w.parseXML=function(e){var n,r;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=n&&n.getElementsByTagName("parsererror")[0],n&&!r||w.error("Invalid XML: "+(r?w.map(r.childNodes,(function(t){return t.textContent})).join("\n"):e)),n};var ke=/\[\]$/,Ee=/\r?\n/g,ze=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;function Ce(t,e,n,r){var i;if(Array.isArray(e))w.each(e,(function(e,i){n||ke.test(t)?r(t,i):Ce(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==_(e))r(t,e);else for(i in e)Ce(t+"["+i+"]",e[i],n,r)}w.param=function(t,e){var n,r=[],i=function(t,e){var n=p(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){i(this.name,this.value)}));else for(n in t)Ce(n,t[n],e,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Ae.test(this.nodeName)&&!ze.test(t)&&(this.checked||!dt.test(t))})).map((function(t,e){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}})):{name:e.name,value:n.replace(Ee,"\r\n")}})).get()}});var Te=/%20/g,Se=/#.*$/,Me=/([?&])_=[^&]*/,Ne=/^(.*?):[ \t]*([^\r\n]*)$/gm,De=/^(?:GET|HEAD)$/,Oe=/^\/\//,Ie={},Pe={},Le="*/".concat("*"),Be=v.createElement("a");function je(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(P)||[];if(p(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Fe(t,e,n,r){var i={},o=t===Pe;function a(s){var l;return i[s]=!0,w.each(t[s]||[],(function(t,s){var u=s(e,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)})),l}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Re(t,e){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&w.extend(!0,t,r),t}Be.href=be.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Le,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Re(Re(t,w.ajaxSettings),e):Re(w.ajaxSettings,t)},ajaxPrefilter:je(Ie),ajaxTransport:je(Pe),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0);var r,i,o,a,s,l,u,c,f,d,h=w.ajaxSetup({},n=n||{}),p=h.context||h,g=h.context&&(p.nodeType||p.jquery)?w(p):w.event,m=w.Deferred(),y=w.Callbacks("once memory"),_=h.statusCode||{},b={},x={},k="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=Ne.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==u&&(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)E.always(t[E.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||k;return r&&r.abort(e),z(0,e),this}};if(m.promise(E),h.url=((e||h.url||be.href)+"").replace(Oe,be.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(P)||[""],null==h.crossDomain){l=v.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Be.protocol+"//"+Be.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),Fe(Ie,h,n,E),u)return E;for(f in(c=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!De.test(h.type),i=h.url.replace(Se,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Te,"+")):(d=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(xe.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Me,"$1"),d=(xe.test(i)?"&":"?")+"_="+we.guid+++d),h.url=i+d),h.ifModified&&(w.lastModified[i]&&E.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&E.setRequestHeader("If-None-Match",w.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Le+"; q=0.01":""):h.accepts["*"]),h.headers)E.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(p,E,h)||u))return E.abort();if(k="abort",y.add(h.complete),E.done(h.success),E.fail(h.error),r=Fe(Pe,h,n,E)){if(E.readyState=1,c&&g.trigger("ajaxSend",[E,h]),u)return E;h.async&&0<h.timeout&&(s=t.setTimeout((function(){E.abort("timeout")}),h.timeout));try{u=!1,r.send(b,z)}catch(e){if(u)throw e;z(-1,e)}}else z(-1,"No Transport");function z(e,n,a,l){var f,d,v,b,x,k=n;u||(u=!0,s&&t.clearTimeout(s),r=void 0,o=l||"",E.readyState=0<e?4:0,f=200<=e&&e<300||304===e,a&&(b=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,E,a)),!f&&-1<w.inArray("script",h.dataTypes)&&w.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),b=function(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(h,b,E,f),f?(h.ifModified&&((x=E.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=x),(x=E.getResponseHeader("etag"))&&(w.etag[i]=x)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=b.state,d=b.data,f=!(v=b.error))):(v=k,!e&&k||(k="error",e<0&&(e=0))),E.status=e,E.statusText=(n||k)+"",f?m.resolveWith(p,[d,k,E]):m.rejectWith(p,[E,k,v]),E.statusCode(_),_=void 0,c&&g.trigger(f?"ajaxSuccess":"ajaxError",[E,h,f?d:v]),y.fireWith(p,[E,k]),c&&(g.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return w.get(t,e,n,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,n,r,i){return p(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:t,type:e,dataType:i,data:n,success:r},w.isPlainObject(t)&&t))}})),w.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),w._evalUrl=function(t,e,n){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,n)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(p(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return p(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=p(t);return this.each((function(n){w(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var qe={0:200,1223:204},He=w.ajaxSettings.xhr();h.cors=!!He&&"withCredentials"in He,h.ajax=He=!!He,w.ajaxTransport((function(e){var n,r;if(h.cors||He&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(qe[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout((function(){n&&r()}))},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(i){if(n)throw i}},abort:function(){n&&n()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),v.head.appendChild(e[0])},abort:function(){n&&n()}}}));var $e,We=[],Ue=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||w.expando+"_"+we.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(Ue.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ue.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=p(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ue,"$1"+i):!1!==e.jsonp&&(e.url+=(xe.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always((function(){void 0===o?w(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,We.push(i)),a&&p(o)&&o(a[0]),a=o=void 0})),"script"})),h.createHTMLDocument=(($e=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$e.childNodes.length),w.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(h.createHTMLDocument?((r=(e=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,e.head.appendChild(r)):e=v),o=!n&&[],(i=T.exec(t))?[e.createElement(i[1])]:(i=_t([t],e,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var r,i,o},w.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return-1<s&&(r=pe(t.slice(s)),t=t.slice(0,s)),p(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<a.length&&w.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(r?w("<div>").append(w.parseHTML(t)).find(r):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u=w.css(t,"position"),c=w(t),f={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=w.css(t,"top"),l=w.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),p(e)&&(e=e.call(t,n,w.extend({},s))),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):c.css(f)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),i.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-w.css(r,"marginTop",!0),left:e.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||rt}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;w.fn[t]=function(r){return H(this,(function(t,r,i){var o;if(g(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=Rt(h.pixelPosition,(function(t,n){if(n)return n=Ft(t,e),Pt.test(n)?w(t).position()[e]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return H(this,(function(e,n,i){var o;return g(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?w.css(e,n,s):w.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}}));var Ve=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(t,e){var n,r,o;if("string"==typeof e&&(n=t[e],e=t,t=n),p(t))return r=i.call(arguments,2),(o=function(){return t.apply(e||this,r.concat(i.call(arguments)))}).guid=t.guid=t.guid||w.guid++,o},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=C,w.isFunction=p,w.isWindow=g,w.camelCase=V,w.type=_,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace(Ve,"")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return w}));var Ye=t.jQuery,Xe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Xe),e&&t.jQuery===w&&(t.jQuery=Ye),w},void 0===e&&(t.jQuery=t.$=w),w})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,(function(){"use strict";function t(t){return t&&"[object Function]"==={}.toString.call(t)}function e(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function n(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function r(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var i=e(t);return/(auto|scroll|overlay)/.test(i.overflow+i.overflowY+i.overflowX)?t:r(n(t))}function i(t){return 11===t?X:10===t?G:X||G}function o(t){if(!t)return document.documentElement;for(var n=i(10)?document.body:null,r=t.offsetParent||null;r===n&&t.nextElementSibling;)r=(t=t.nextElementSibling).offsetParent;var a=r&&r.nodeName;return a&&"BODY"!==a&&"HTML"!==a?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===e(r,"position")?o(r):r:t?t.ownerDocument.documentElement:document.documentElement}function a(t){return null===t.parentNode?t:a(t.parentNode)}function s(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,l=document.createRange();l.setStart(r,0),l.setEnd(i,0);var u=l.commonAncestorContainer;if(t!==u&&e!==u||r.contains(i))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||o(t.firstElementChild)===t)}(u)?u:o(u);var c=a(t);return c.host?s(c.host,e):s(t,a(e).host)}function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){var i=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||i;return o[n]}return t[n]}function u(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=l(e,"top"),i=l(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}function c(t,e){var n="x"===e?"Left":"Top",r="Left"==n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+r+"Width"],10)}function f(t,e,n,r){return H(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],i(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function d(t){var e=t.body,n=t.documentElement,r=i(10)&&getComputedStyle(n);return{height:f("Height",e,n,r),width:f("Width",e,n,r)}}function h(t){return J({},t,{right:t.left+t.width,bottom:t.top+t.height})}function p(t){var n={};try{if(i(10)){n=t.getBoundingClientRect();var r=l(t,"top"),o=l(t,"left");n.top+=r,n.left+=o,n.bottom+=r,n.right+=o}else n=t.getBoundingClientRect()}catch(e){}var a={left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top},s="HTML"===t.nodeName?d(t.ownerDocument):{},u=t.offsetWidth-(s.width||t.clientWidth||a.right-a.left),f=t.offsetHeight-(s.height||t.clientHeight||a.bottom-a.top);if(u||f){var p=e(t);u-=c(p,"x"),f-=c(p,"y"),a.width-=u,a.height-=f}return h(a)}function g(t,n){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=i(10),s="HTML"===n.nodeName,l=p(t),c=p(n),f=r(t),d=e(n),g=parseFloat(d.borderTopWidth,10),v=parseFloat(d.borderLeftWidth,10);o&&s&&(c.top=H(c.top,0),c.left=H(c.left,0));var m=h({top:l.top-c.top-g,left:l.left-c.left-v,width:l.width,height:l.height});if(m.marginTop=0,m.marginLeft=0,!a&&s){var y=parseFloat(d.marginTop,10),_=parseFloat(d.marginLeft,10);m.top-=g-y,m.bottom-=g-y,m.left-=v-_,m.right-=v-_,m.marginTop=y,m.marginLeft=_}return(a&&!o?n.contains(f):n===f&&"BODY"!==f.nodeName)&&(m=u(m,n)),m}function v(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=g(t,n),i=H(n.clientWidth,window.innerWidth||0),o=H(n.clientHeight,window.innerHeight||0),a=e?0:l(n),s=e?0:l(n,"left"),u={top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o};return h(u)}function m(t){var r=t.nodeName;return"BODY"!==r&&"HTML"!==r&&("fixed"===e(t,"position")||m(n(t)))}function y(t){if(!t||!t.parentElement||i())return document.documentElement;for(var n=t.parentElement;n&&"none"===e(n,"transform");)n=n.parentElement;return n||document.documentElement}function _(t,e,i,o){var a=4<arguments.length&&void 0!==arguments[4]&&arguments[4],l={top:0,left:0},u=a?y(t):s(t,e);if("viewport"===o)l=v(u,a);else{var c;"scrollParent"===o?"BODY"===(c=r(n(e))).nodeName&&(c=t.ownerDocument.documentElement):c="window"===o?t.ownerDocument.documentElement:o;var f=g(c,u,a);if("HTML"!==c.nodeName||m(u))l=f;else{var h=d(t.ownerDocument),p=h.height,_=h.width;l.top+=f.top-f.marginTop,l.bottom=p+f.top,l.left+=f.left-f.marginLeft,l.right=_+f.left}}var b="number"==typeof(i=i||0);return l.left+=b?i:i.left||0,l.top+=b?i:i.top||0,l.right-=b?i:i.right||0,l.bottom-=b?i:i.bottom||0,l}function b(t){return t.width*t.height}function w(t,e,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=_(n,r,o,i),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},l=Object.keys(s).map((function(t){return J({key:t},s[t],{area:b(s[t])})})).sort((function(t,e){return e.area-t.area})),u=l.filter((function(t){return t.width>=n.clientWidth&&t.height>=n.clientHeight})),c=0<u.length?u[0].key:l[0].key,f=t.split("-")[1];return c+(f?"-"+f:"")}function x(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=r?y(e):s(e,n);return g(n,i,r)}function k(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function E(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function z(t,e,n){n=n.split("-")[0];var r=k(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",u=o?"width":"height";return i[a]=e[a]+e[l]/2-r[l]/2,i[s]=n===s?e[s]-r[u]:e[E(s)],i}function A(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function C(e,n,r){return(void 0===r?e:e.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var r=A(t,(function(t){return t[e]===n}));return t.indexOf(r)}(e,"name",r))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=e.function||e.fn;e.enabled&&t(r)&&(n.offsets.popper=h(n.offsets.popper),n.offsets.reference=h(n.offsets.reference),n=r(n,e))})),n}function T(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=x(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=w(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=z(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=C(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function S(t,e){return t.some((function(t){return t.enabled&&t.name===e}))}function M(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function N(){return this.state.isDestroyed=!0,S(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[M("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function D(t){var e=t.ownerDocument;return e?e.defaultView:window}function O(){this.state.eventsEnabled||(this.state=function(t,e,n,i){n.updateBound=i,D(t).addEventListener("resize",n.updateBound,{passive:!0});var o=r(t);return function t(e,n,i,o){var a="BODY"===e.nodeName,s=a?e.ownerDocument.defaultView:e;s.addEventListener(n,i,{passive:!0}),a||t(r(s.parentNode),n,i,o),o.push(s)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}(this.reference,0,this.state,this.scheduleUpdate))}function I(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return D(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function P(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function L(t,e){Object.keys(e).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&P(e[n])&&(r="px"),t.style[n]=e[n]+r}))}function B(t,e,n){var r=A(t,(function(t){return t.name===e})),i=!!r&&t.some((function(t){return t.name===n&&t.enabled&&t.order<r.order}));if(!i){var o="`"+e+"`";console.warn("`"+n+"` modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}function j(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=nt.indexOf(t),r=nt.slice(n+1).concat(nt.slice(0,n));return e?r.reverse():r}for(var F=Math.min,R=Math.floor,q=Math.round,H=Math.max,$="undefined"!=typeof window&&"undefined"!=typeof document,W=["Edge","Trident","Firefox"],U=0,V=0;V<W.length;V+=1)if($&&0<=navigator.userAgent.indexOf(W[V])){U=1;break}var Y=$&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),U))}},X=$&&!(!window.MSInputMethodContext||!document.documentMode),G=$&&/MSIE 10/.test(navigator.userAgent),K=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Z=function(){function t(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Q=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},J=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},tt=$&&/Firefox/i.test(navigator.userAgent),et=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],nt=et.slice(3),rt=function(){function e(n,r){var i=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};K(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=Y(this.update.bind(this)),this.options=J({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=n&&n.jquery?n[0]:n,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(J({},e.Defaults.modifiers,o.modifiers)).forEach((function(t){i.options.modifiers[t]=J({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return J({name:t},i.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(e){e.enabled&&t(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)})),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return Z(e,[{key:"update",value:function(){return T.call(this)}},{key:"destroy",value:function(){return N.call(this)}},{key:"enableEventListeners",value:function(){return O.call(this)}},{key:"disableEventListeners",value:function(){return I.call(this)}}]),e}();return rt.Utils=("undefined"==typeof window?global:window).PopperUtils,rt.placements=et,rt.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",c={start:Q({},l,o[l]),end:Q({},l,o[l]+o[u]-a[u])};t.offsets.popper=J({},a,c[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n,r=e.offset,i=t.offsets,o=i.popper,a=i.reference,s=t.placement.split("-")[0];return n=P(+r)?[+r,0]:function(t,e,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=t.split(/(\+|\-)/).map((function(t){return t.trim()})),s=a.indexOf(A(a,(function(t){return-1!==t.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1===s?[a]:[a.slice(0,s).concat([a[s].split(l)[0]]),[a[s].split(l)[1]].concat(a.slice(s+1))];return(u=u.map((function(t,r){var i=(1===r?!o:o)?"height":"width",a=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return t;if(0===a.indexOf("%")){var s;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return h(s)[e]/100*o}return"vh"===a||"vw"===a?("vh"===a?H(document.documentElement.clientHeight,window.innerHeight||0):H(document.documentElement.clientWidth,window.innerWidth||0))/100*o:o}(t,i,e,n)}))}))).forEach((function(t,e){t.forEach((function(n,r){P(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))}))})),i}(r,o,a,s),"left"===s?(o.top+=n[0],o.left-=n[1]):"right"===s?(o.top+=n[0],o.left+=n[1]):"top"===s?(o.left+=n[0],o.top-=n[1]):"bottom"===s&&(o.left+=n[0],o.top+=n[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||o(t.instance.popper);t.instance.reference===n&&(n=o(n));var r=M("transform"),i=t.instance.popper.style,a=i.top,s=i.left,l=i[r];i.top="",i.left="",i[r]="";var u=_(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=a,i.left=s,i[r]=l,e.boundaries=u;var c=t.offsets.popper,f={primary:function(t){var n=c[t];return c[t]<u[t]&&!e.escapeWithReference&&(n=H(c[t],u[t])),Q({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=c[n];return c[t]>u[t]&&!e.escapeWithReference&&(r=F(c[n],u[t]-("right"===t?c.width:c.height))),Q({},n,r)}};return e.priority.forEach((function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";c=J({},c,f[e](t))})),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=R,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",l=a?"left":"top",u=a?"width":"height";return n[s]<o(r[l])&&(t.offsets.popper[l]=o(r[l])-n[u]),n[l]>o(r[s])&&(t.offsets.popper[l]=o(r[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,n){var r;if(!B(t.instance.modifiers,"arrow","keepTogether"))return t;var i=n.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],a=t.offsets,s=a.popper,l=a.reference,u=-1!==["left","right"].indexOf(o),c=u?"height":"width",f=u?"Top":"Left",d=f.toLowerCase(),p=u?"left":"top",g=u?"bottom":"right",v=k(i)[c];l[g]-v<s[d]&&(t.offsets.popper[d]-=s[d]-(l[g]-v)),l[d]+v>s[g]&&(t.offsets.popper[d]+=l[d]+v-s[g]),t.offsets.popper=h(t.offsets.popper);var m=l[d]+l[c]/2-v/2,y=e(t.instance.popper),_=parseFloat(y["margin"+f],10),b=parseFloat(y["border"+f+"Width"],10),w=m-t.offsets.popper[d]-_-b;return w=H(F(s[c]-v,w),0),t.arrowElement=i,t.offsets.arrow=(Q(r={},d,q(w)),Q(r,p,""),r),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(S(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=_(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=E(r),o=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case"flip":a=[r,i];break;case"clockwise":a=j(r);break;case"counterclockwise":a=j(r,!0);break;default:a=e.behavior}return a.forEach((function(s,l){if(r!==s||a.length===l+1)return t;r=t.placement.split("-")[0],i=E(r);var u=t.offsets.popper,c=t.offsets.reference,f=R,d="left"===r&&f(u.right)>f(c.left)||"right"===r&&f(u.left)<f(c.right)||"top"===r&&f(u.bottom)>f(c.top)||"bottom"===r&&f(u.top)<f(c.bottom),h=f(u.left)<f(n.left),p=f(u.right)>f(n.right),g=f(u.top)<f(n.top),v=f(u.bottom)>f(n.bottom),m="left"===r&&h||"right"===r&&p||"top"===r&&g||"bottom"===r&&v,y=-1!==["top","bottom"].indexOf(r),_=!!e.flipVariations&&(y&&"start"===o&&h||y&&"end"===o&&p||!y&&"start"===o&&g||!y&&"end"===o&&v);(d||m||_)&&(t.flipped=!0,(d||m)&&(r=a[l+1]),_&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=r+(o?"-"+o:""),t.offsets.popper=J({},t.offsets.popper,z(t.instance.popper,t.offsets.reference,t.placement)),t=C(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),t.placement=E(e),t.offsets.popper=h(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!B(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=A(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,a=A(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,l,u=void 0===a?e.gpuAcceleration:a,c=o(t.instance.popper),f=p(c),d={position:i.position},h=function(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=-1!==["left","right"].indexOf(t.placement),a=-1!==t.placement.indexOf("-"),s=function(t){return t},l=e?o||a||i.width%2==r.width%2?q:R:s,u=e?q:s;return{left:l(1==i.width%2&&1==r.width%2&&!a&&e?r.left-1:r.left),top:u(r.top),bottom:u(r.bottom),right:l(r.right)}}(t,2>window.devicePixelRatio||!tt),g="bottom"===n?"top":"bottom",v="right"===r?"left":"right",m=M("transform");if(l="bottom"==g?"HTML"===c.nodeName?-c.clientHeight+h.bottom:-f.height+h.bottom:h.top,s="right"==v?"HTML"===c.nodeName?-c.clientWidth+h.right:-f.width+h.right:h.left,u&&m)d[m]="translate3d("+s+"px, "+l+"px, 0)",d[g]=0,d[v]=0,d.willChange="transform";else{var y="right"==v?-1:1;d[g]=l*("bottom"==g?-1:1),d[v]=s*y,d.willChange=g+", "+v}return t.attributes=J({},{"x-placement":t.placement},t.attributes),t.styles=J({},d,t.styles),t.arrowStyles=J({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return L(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach((function(n){!1===e[n]?t.removeAttribute(n):t.setAttribute(n,e[n])}))}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&L(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var o=x(i,e,t,n.positionFixed),a=w(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",a),L(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},rt})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap={},t.jQuery,t.Popper)}(this,(function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(e),o=r(n);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c="transitionend",f={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=i.default(t).css("transition-duration"),n=i.default(t).css("transition-delay"),r=parseFloat(e),o=parseFloat(n);return r||o?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){i.default(t).trigger(c)},supportsTransitionEnd:function(){return Boolean(c)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r],o=e[r],a=o&&f.isElement(o)?"element":null===(s=o)||void 0===s?""+s:{}.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(a))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+a+'" but expected type "'+i+'".')}var s},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?f.findShadowRoot(t.parentNode):null},jQueryDetection:function(){if(void 0===i.default)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=i.default.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};f.jQueryDetection(),i.default.fn.emulateTransitionEnd=function(t){var e=this,n=!1;return i.default(this).one(f.TRANSITION_END,(function(){n=!0})),setTimeout((function(){n||f.triggerTransitionEnd(e)}),t),this},i.default.event.special[f.TRANSITION_END]={bindType:c,delegateType:c,handle:function(t){if(i.default(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var d="bs.alert",h=i.default.fn.alert,p=function(){function t(t){this._element=t}var e=t.prototype;return e.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},e.dispose=function(){i.default.removeData(this._element,d),this._element=null},e._getRootElement=function(t){var e=f.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n||(n=i.default(t).closest(".alert")[0]),n},e._triggerCloseEvent=function(t){var e=i.default.Event("close.bs.alert");return i.default(t).trigger(e),e},e._removeElement=function(t){var e=this;if(i.default(t).removeClass("show"),i.default(t).hasClass("fade")){var n=f.getTransitionDurationFromElement(t);i.default(t).one(f.TRANSITION_END,(function(n){return e._destroyElement(t,n)})).emulateTransitionEnd(n)}else this._destroyElement(t)},e._destroyElement=function(t){i.default(t).detach().trigger("closed.bs.alert").remove()},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this),r=n.data(d);r||(r=new t(this),n.data(d,r)),"close"===e&&r[e](this)}))},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),t}();i.default(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',p._handleDismiss(new p)),i.default.fn.alert=p._jQueryInterface,i.default.fn.alert.Constructor=p,i.default.fn.alert.noConflict=function(){return i.default.fn.alert=h,p._jQueryInterface};var g="bs.button",v=i.default.fn.button,m="active",y='[data-toggle^="button"]',_='input:not([type="hidden"])',b=".btn",w=function(){function t(t){this._element=t,this.shouldAvoidTriggerChange=!1}var e=t.prototype;return e.toggle=function(){var t=!0,e=!0,n=i.default(this._element).closest('[data-toggle="buttons"]')[0];if(n){var r=this._element.querySelector(_);if(r){if("radio"===r.type)if(r.checked&&this._element.classList.contains(m))t=!1;else{var o=n.querySelector(".active");o&&i.default(o).removeClass(m)}t&&("checkbox"!==r.type&&"radio"!==r.type||(r.checked=!this._element.classList.contains(m)),this.shouldAvoidTriggerChange||i.default(r).trigger("change")),r.focus(),e=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(m)),t&&i.default(this._element).toggleClass(m))},e.dispose=function(){i.default.removeData(this._element,g),this._element=null},t._jQueryInterface=function(e,n){return this.each((function(){var r=i.default(this),o=r.data(g);o||(o=new t(this),r.data(g,o)),o.shouldAvoidTriggerChange=n,"toggle"===e&&o[e]()}))},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),t}();i.default(document).on("click.bs.button.data-api",y,(function(t){var e=t.target,n=e;if(i.default(e).hasClass("btn")||(e=i.default(e).closest(b)[0]),!e||e.hasAttribute("disabled")||e.classList.contains("disabled"))t.preventDefault();else{var r=e.querySelector(_);if(r&&(r.hasAttribute("disabled")||r.classList.contains("disabled")))return void t.preventDefault();"INPUT"!==n.tagName&&"LABEL"===e.tagName||w._jQueryInterface.call(i.default(e),"toggle","INPUT"===n.tagName)}})).on("focus.bs.button.data-api blur.bs.button.data-api",y,(function(t){var e=i.default(t.target).closest(b)[0];i.default(e).toggleClass("focus",/^focus(in)?$/.test(t.type))})),i.default(window).on("load.bs.button.data-api",(function(){for(var t=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),e=0,n=t.length;e<n;e++){var r=t[e],i=r.querySelector(_);i.checked||i.hasAttribute("checked")?r.classList.add(m):r.classList.remove(m)}for(var o=0,a=(t=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;o<a;o++){var s=t[o];"true"===s.getAttribute("aria-pressed")?s.classList.add(m):s.classList.remove(m)}})),i.default.fn.button=w._jQueryInterface,i.default.fn.button.Constructor=w,i.default.fn.button.noConflict=function(){return i.default.fn.button=v,w._jQueryInterface};var x="carousel",k="bs.carousel",E=i.default.fn[x],z="active",A="next",C="prev",T="slid.bs.carousel",S=".active.carousel-item",M={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},N={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},D={TOUCH:"touch",PEN:"pen"},O=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var e=t.prototype;return e.next=function(){this._isSliding||this._slide(A)},e.nextWhenVisible=function(){var t=i.default(this._element);!document.hidden&&t.is(":visible")&&"hidden"!==t.css("visibility")&&this.next()},e.prev=function(){this._isSliding||this._slide(C)},e.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(f.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},e.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},e.to=function(t){var e=this;this._activeElement=this._element.querySelector(S);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)i.default(this._element).one(T,(function(){return e.to(t)}));else{if(n===t)return this.pause(),void this.cycle();this._slide(t>n?A:C,this._items[t])}},e.dispose=function(){i.default(this._element).off(".bs.carousel"),i.default.removeData(this._element,k),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},e._getConfig=function(t){return t=l({},M,t),f.typeCheckConfig(x,t,N),t},e._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;this.touchDeltaX=0,e>0&&this.prev(),e<0&&this.next()}},e._addEventListeners=function(){var t=this;this._config.keyboard&&i.default(this._element).on("keydown.bs.carousel",(function(e){return t._keydown(e)})),"hover"===this._config.pause&&i.default(this._element).on("mouseenter.bs.carousel",(function(e){return t.pause(e)})).on("mouseleave.bs.carousel",(function(e){return t.cycle(e)})),this._config.touch&&this._addTouchEventListeners()},e._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var e=function(e){t._pointerEvent&&D[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},n=function(e){t._pointerEvent&&D[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout((function(e){return t.cycle(e)}),500+t._config.interval))};i.default(this._element.querySelectorAll(".carousel-item img")).on("dragstart.bs.carousel",(function(t){return t.preventDefault()})),this._pointerEvent?(i.default(this._element).on("pointerdown.bs.carousel",(function(t){return e(t)})),i.default(this._element).on("pointerup.bs.carousel",(function(t){return n(t)})),this._element.classList.add("pointer-event")):(i.default(this._element).on("touchstart.bs.carousel",(function(t){return e(t)})),i.default(this._element).on("touchmove.bs.carousel",(function(e){return function(e){t.touchDeltaX=e.originalEvent.touches&&e.originalEvent.touches.length>1?0:e.originalEvent.touches[0].clientX-t.touchStartX}(e)})),i.default(this._element).on("touchend.bs.carousel",(function(t){return n(t)})))}},e._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},e._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},e._getItemByDirection=function(t,e){var n=t===A,r=t===C,i=this._getItemIndex(e);if((r&&0===i||n&&i===this._items.length-1)&&!this._config.wrap)return e;var o=(i+(t===C?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},e._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),r=this._getItemIndex(this._element.querySelector(S)),o=i.default.Event("slide.bs.carousel",{relatedTarget:t,direction:e,from:r,to:n});return i.default(this._element).trigger(o),o},e._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));i.default(e).removeClass(z);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&i.default(n).addClass(z)}},e._updateInterval=function(){var t=this._activeElement||this._element.querySelector(S);if(t){var e=parseInt(t.getAttribute("data-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}},e._slide=function(t,e){var n,r,o,a=this,s=this._element.querySelector(S),l=this._getItemIndex(s),u=e||s&&this._getItemByDirection(t,s),c=this._getItemIndex(u),d=Boolean(this._interval);if(t===A?(n="carousel-item-left",r="carousel-item-next",o="left"):(n="carousel-item-right",r="carousel-item-prev",o="right"),u&&i.default(u).hasClass(z))this._isSliding=!1;else if(!this._triggerSlideEvent(u,o).isDefaultPrevented()&&s&&u){this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(u),this._activeElement=u;var h=i.default.Event(T,{relatedTarget:u,direction:o,from:l,to:c});if(i.default(this._element).hasClass("slide")){i.default(u).addClass(r),f.reflow(u),i.default(s).addClass(n),i.default(u).addClass(n);var p=f.getTransitionDurationFromElement(s);i.default(s).one(f.TRANSITION_END,(function(){i.default(u).removeClass(n+" "+r).addClass(z),i.default(s).removeClass("active "+r+" "+n),a._isSliding=!1,setTimeout((function(){return i.default(a._element).trigger(h)}),0)})).emulateTransitionEnd(p)}else i.default(s).removeClass(z),i.default(u).addClass(z),this._isSliding=!1,i.default(this._element).trigger(h);d&&this.cycle()}},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this).data(k),r=l({},M,i.default(this).data());"object"==typeof e&&(r=l({},r,e));var o="string"==typeof e?e:r.slide;if(n||(n=new t(this,r),i.default(this).data(k,n)),"number"==typeof e)n.to(e);else if("string"==typeof o){if(void 0===n[o])throw new TypeError('No method named "'+o+'"');n[o]()}else r.interval&&r.ride&&(n.pause(),n.cycle())}))},t._dataApiClickHandler=function(e){var n=f.getSelectorFromElement(this);if(n){var r=i.default(n)[0];if(r&&i.default(r).hasClass("carousel")){var o=l({},i.default(r).data(),i.default(this).data()),a=this.getAttribute("data-slide-to");a&&(o.interval=!1),t._jQueryInterface.call(i.default(r),o),a&&i.default(r).data(k).to(a),e.preventDefault()}}},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return M}}]),t}();i.default(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",O._dataApiClickHandler),i.default(window).on("load.bs.carousel.data-api",(function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),e=0,n=t.length;e<n;e++){var r=i.default(t[e]);O._jQueryInterface.call(r,r.data())}})),i.default.fn[x]=O._jQueryInterface,i.default.fn[x].Constructor=O,i.default.fn[x].noConflict=function(){return i.default.fn[x]=E,O._jQueryInterface};var I="collapse",P="bs.collapse",L=i.default.fn[I],B="show",j="collapse",F="collapsing",R="collapsed",q="width",H='[data-toggle="collapse"]',$={toggle:!0,parent:""},W={toggle:"boolean",parent:"(string|element)"},U=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(H)),r=0,i=n.length;r<i;r++){var o=n[r],a=f.getSelectorFromElement(o),s=[].slice.call(document.querySelectorAll(a)).filter((function(e){return e===t}));null!==a&&s.length>0&&(this._selector=a,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var e=t.prototype;return e.toggle=function(){i.default(this._element).hasClass(B)?this.hide():this.show()},e.show=function(){var e,n,r=this;if(!(this._isTransitioning||i.default(this._element).hasClass(B)||(this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter((function(t){return"string"==typeof r._config.parent?t.getAttribute("data-parent")===r._config.parent:t.classList.contains(j)}))).length&&(e=null),e&&(n=i.default(e).not(this._selector).data(P))&&n._isTransitioning))){var o=i.default.Event("show.bs.collapse");if(i.default(this._element).trigger(o),!o.isDefaultPrevented()){e&&(t._jQueryInterface.call(i.default(e).not(this._selector),"hide"),n||i.default(e).data(P,null));var a=this._getDimension();i.default(this._element).removeClass(j).addClass(F),this._element.style[a]=0,this._triggerArray.length&&i.default(this._triggerArray).removeClass(R).attr("aria-expanded",!0),this.setTransitioning(!0);var s="scroll"+(a[0].toUpperCase()+a.slice(1)),l=f.getTransitionDurationFromElement(this._element);i.default(this._element).one(f.TRANSITION_END,(function(){i.default(r._element).removeClass(F).addClass("collapse show"),r._element.style[a]="",r.setTransitioning(!1),i.default(r._element).trigger("shown.bs.collapse")})).emulateTransitionEnd(l),this._element.style[a]=this._element[s]+"px"}}},e.hide=function(){var t=this;if(!this._isTransitioning&&i.default(this._element).hasClass(B)){var e=i.default.Event("hide.bs.collapse");if(i.default(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",f.reflow(this._element),i.default(this._element).addClass(F).removeClass("collapse show");var r=this._triggerArray.length;if(r>0)for(var o=0;o<r;o++){var a=this._triggerArray[o],s=f.getSelectorFromElement(a);null!==s&&(i.default([].slice.call(document.querySelectorAll(s))).hasClass(B)||i.default(a).addClass(R).attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[n]="";var l=f.getTransitionDurationFromElement(this._element);i.default(this._element).one(f.TRANSITION_END,(function(){t.setTransitioning(!1),i.default(t._element).removeClass(F).addClass(j).trigger("hidden.bs.collapse")})).emulateTransitionEnd(l)}}},e.setTransitioning=function(t){this._isTransitioning=t},e.dispose=function(){i.default.removeData(this._element,P),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},e._getConfig=function(t){return(t=l({},$,t)).toggle=Boolean(t.toggle),f.typeCheckConfig(I,t,W),t},e._getDimension=function(){return i.default(this._element).hasClass(q)?q:"height"},e._getParent=function(){var e,n=this;f.isElement(this._config.parent)?(e=this._config.parent,void 0!==this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);var r=[].slice.call(e.querySelectorAll('[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'));return i.default(r).each((function(e,r){n._addAriaAndCollapsedClass(t._getTargetFromElement(r),[r])})),e},e._addAriaAndCollapsedClass=function(t,e){var n=i.default(t).hasClass(B);e.length&&i.default(e).toggleClass(R,!n).attr("aria-expanded",n)},t._getTargetFromElement=function(t){var e=f.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this),r=n.data(P),o=l({},$,n.data(),"object"==typeof e&&e?e:{});if(!r&&o.toggle&&"string"==typeof e&&/show|hide/.test(e)&&(o.toggle=!1),r||(r=new t(this,o),n.data(P,r)),"string"==typeof e){if(void 0===r[e])throw new TypeError('No method named "'+e+'"');r[e]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return $}}]),t}();i.default(document).on("click.bs.collapse.data-api",H,(function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var e=i.default(this),n=f.getSelectorFromElement(this),r=[].slice.call(document.querySelectorAll(n));i.default(r).each((function(){var t=i.default(this),n=t.data(P)?"toggle":e.data();U._jQueryInterface.call(t,n)}))})),i.default.fn[I]=U._jQueryInterface,i.default.fn[I].Constructor=U,i.default.fn[I].noConflict=function(){return i.default.fn[I]=L,U._jQueryInterface};var V="dropdown",Y="bs.dropdown",X=i.default.fn[V],G=new RegExp("38|40|27"),K="disabled",Z="show",Q="dropdown-menu-right",J="hide.bs.dropdown",tt="hidden.bs.dropdown",et="click.bs.dropdown.data-api",nt="keydown.bs.dropdown.data-api",rt='[data-toggle="dropdown"]',it=".dropdown-menu",ot={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},at={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},st=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var e=t.prototype;return e.toggle=function(){if(!this._element.disabled&&!i.default(this._element).hasClass(K)){var e=i.default(this._menu).hasClass(Z);t._clearMenus(),e||this.show(!0)}},e.show=function(e){if(void 0===e&&(e=!1),!(this._element.disabled||i.default(this._element).hasClass(K)||i.default(this._menu).hasClass(Z))){var n={relatedTarget:this._element},r=i.default.Event("show.bs.dropdown",n),a=t._getParentFromElement(this._element);if(i.default(a).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar&&e){if(void 0===o.default)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var s=this._element;"parent"===this._config.reference?s=a:f.isElement(this._config.reference)&&(s=this._config.reference,void 0!==this._config.reference.jquery&&(s=this._config.reference[0])),"scrollParent"!==this._config.boundary&&i.default(a).addClass("position-static"),this._popper=new o.default(s,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===i.default(a).closest(".navbar-nav").length&&i.default(document.body).children().on("mouseover",null,i.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),i.default(this._menu).toggleClass(Z),i.default(a).toggleClass(Z).trigger(i.default.Event("shown.bs.dropdown",n))}}},e.hide=function(){if(!this._element.disabled&&!i.default(this._element).hasClass(K)&&i.default(this._menu).hasClass(Z)){var e={relatedTarget:this._element},n=i.default.Event(J,e),r=t._getParentFromElement(this._element);i.default(r).trigger(n),n.isDefaultPrevented()||(this._popper&&this._popper.destroy(),i.default(this._menu).toggleClass(Z),i.default(r).toggleClass(Z).trigger(i.default.Event(tt,e)))}},e.dispose=function(){i.default.removeData(this._element,Y),i.default(this._element).off(".bs.dropdown"),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},e.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},e._addEventListeners=function(){var t=this;i.default(this._element).on("click.bs.dropdown",(function(e){e.preventDefault(),e.stopPropagation(),t.toggle()}))},e._getConfig=function(t){return t=l({},this.constructor.Default,i.default(this._element).data(),t),f.typeCheckConfig(V,t,this.constructor.DefaultType),t},e._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(it))}return this._menu},e._getPlacement=function(){var t=i.default(this._element.parentNode),e="bottom-start";return t.hasClass("dropup")?e=i.default(this._menu).hasClass(Q)?"top-end":"top-start":t.hasClass("dropright")?e="right-start":t.hasClass("dropleft")?e="left-start":i.default(this._menu).hasClass(Q)&&(e="bottom-end"),e},e._detectNavbar=function(){return i.default(this._element).closest(".navbar").length>0},e._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=l({},e.offsets,t._config.offset(e.offsets,t._element)),e}:e.offset=this._config.offset,e},e._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),l({},t,this._config.popperConfig)},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this).data(Y);if(n||(n=new t(this,"object"==typeof e?e:null),i.default(this).data(Y,n)),"string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'+e+'"');n[e]()}}))},t._clearMenus=function(e){if(!e||3!==e.which&&("keyup"!==e.type||9===e.which))for(var n=[].slice.call(document.querySelectorAll(rt)),r=0,o=n.length;r<o;r++){var a=t._getParentFromElement(n[r]),s=i.default(n[r]).data(Y),l={relatedTarget:n[r]};if(e&&"click"===e.type&&(l.clickEvent=e),s){var u=s._menu;if(i.default(a).hasClass(Z)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&9===e.which)&&i.default.contains(a,e.target))){var c=i.default.Event(J,l);i.default(a).trigger(c),c.isDefaultPrevented()||("ontouchstart"in document.documentElement&&i.default(document.body).children().off("mouseover",null,i.default.noop),n[r].setAttribute("aria-expanded","false"),s._popper&&s._popper.destroy(),i.default(u).removeClass(Z),i.default(a).removeClass(Z).trigger(i.default.Event(tt,l)))}}}},t._getParentFromElement=function(t){var e,n=f.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},t._dataApiKeydownHandler=function(e){if(!(/input|textarea/i.test(e.target.tagName)?32===e.which||27!==e.which&&(40!==e.which&&38!==e.which||i.default(e.target).closest(it).length):!G.test(e.which))&&!this.disabled&&!i.default(this).hasClass(K)){var n=t._getParentFromElement(this),r=i.default(n).hasClass(Z);if(r||27!==e.which){if(e.preventDefault(),e.stopPropagation(),!r||27===e.which||32===e.which)return 27===e.which&&i.default(n.querySelector(rt)).trigger("focus"),void i.default(this).trigger("click");var o=[].slice.call(n.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter((function(t){return i.default(t).is(":visible")}));if(0!==o.length){var a=o.indexOf(e.target);38===e.which&&a>0&&a--,40===e.which&&a<o.length-1&&a++,a<0&&(a=0),o[a].focus()}}}},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return ot}},{key:"DefaultType",get:function(){return at}}]),t}();i.default(document).on(nt,rt,st._dataApiKeydownHandler).on(nt,it,st._dataApiKeydownHandler).on(et+" keyup.bs.dropdown.data-api",st._clearMenus).on(et,rt,(function(t){t.preventDefault(),t.stopPropagation(),st._jQueryInterface.call(i.default(this),"toggle")})).on(et,".dropdown form",(function(t){t.stopPropagation()})),i.default.fn[V]=st._jQueryInterface,i.default.fn[V].Constructor=st,i.default.fn[V].noConflict=function(){return i.default.fn[V]=X,st._jQueryInterface};var lt="bs.modal",ut=i.default.fn.modal,ct="modal-open",ft="fade",dt="show",ht="modal-static",pt="hidden.bs.modal",gt="show.bs.modal",vt="focusin.bs.modal",mt="resize.bs.modal",yt="click.dismiss.bs.modal",_t="keydown.dismiss.bs.modal",bt="mousedown.dismiss.bs.modal",wt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xt={backdrop:!0,keyboard:!0,focus:!0,show:!0},kt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Et=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var e=t.prototype;return e.toggle=function(t){return this._isShown?this.hide():this.show(t)},e.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){var n=i.default.Event(gt,{relatedTarget:t});i.default(this._element).trigger(n),n.isDefaultPrevented()||(this._isShown=!0,i.default(this._element).hasClass(ft)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),i.default(this._element).on(yt,'[data-dismiss="modal"]',(function(t){return e.hide(t)})),i.default(this._dialog).on(bt,(function(){i.default(e._element).one("mouseup.dismiss.bs.modal",(function(t){i.default(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return e._showElement(t)})))}},e.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=i.default.Event("hide.bs.modal");if(i.default(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var r=i.default(this._element).hasClass(ft);if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),i.default(document).off(vt),i.default(this._element).removeClass(dt),i.default(this._element).off(yt),i.default(this._dialog).off(bt),r){var o=f.getTransitionDurationFromElement(this._element);i.default(this._element).one(f.TRANSITION_END,(function(t){return e._hideModal(t)})).emulateTransitionEnd(o)}else this._hideModal()}}},e.dispose=function(){[window,this._element,this._dialog].forEach((function(t){return i.default(t).off(".bs.modal")})),i.default(document).off(vt),i.default.removeData(this._element,lt),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},e.handleUpdate=function(){this._adjustDialog()},e._getConfig=function(t){return t=l({},xt,t),f.typeCheckConfig("modal",t,kt),t},e._triggerBackdropTransition=function(){var t=this,e=i.default.Event("hidePrevented.bs.modal");if(i.default(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._element.scrollHeight>document.documentElement.clientHeight;n||(this._element.style.overflowY="hidden"),this._element.classList.add(ht);var r=f.getTransitionDurationFromElement(this._dialog);i.default(this._element).off(f.TRANSITION_END),i.default(this._element).one(f.TRANSITION_END,(function(){t._element.classList.remove(ht),n||i.default(t._element).one(f.TRANSITION_END,(function(){t._element.style.overflowY=""})).emulateTransitionEnd(t._element,r)})).emulateTransitionEnd(r),this._element.focus()}},e._showElement=function(t){var e=this,n=i.default(this._element).hasClass(ft),r=this._dialog?this._dialog.querySelector(".modal-body"):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),i.default(this._dialog).hasClass("modal-dialog-scrollable")&&r?r.scrollTop=0:this._element.scrollTop=0,n&&f.reflow(this._element),i.default(this._element).addClass(dt),this._config.focus&&this._enforceFocus();var o=i.default.Event("shown.bs.modal",{relatedTarget:t}),a=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,i.default(e._element).trigger(o)};if(n){var s=f.getTransitionDurationFromElement(this._dialog);i.default(this._dialog).one(f.TRANSITION_END,a).emulateTransitionEnd(s)}else a()},e._enforceFocus=function(){var t=this;i.default(document).off(vt).on(vt,(function(e){document!==e.target&&t._element!==e.target&&0===i.default(t._element).has(e.target).length&&t._element.focus()}))},e._setEscapeEvent=function(){var t=this;this._isShown?i.default(this._element).on(_t,(function(e){t._config.keyboard&&27===e.which?(e.preventDefault(),t.hide()):t._config.keyboard||27!==e.which||t._triggerBackdropTransition()})):this._isShown||i.default(this._element).off(_t)},e._setResizeEvent=function(){var t=this;this._isShown?i.default(window).on(mt,(function(e){return t.handleUpdate(e)})):i.default(window).off(mt)},e._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop((function(){i.default(document.body).removeClass(ct),t._resetAdjustments(),t._resetScrollbar(),i.default(t._element).trigger(pt)}))},e._removeBackdrop=function(){this._backdrop&&(i.default(this._backdrop).remove(),this._backdrop=null)},e._showBackdrop=function(t){var e=this,n=i.default(this._element).hasClass(ft)?ft:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),i.default(this._backdrop).appendTo(document.body),i.default(this._element).on(yt,(function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._triggerBackdropTransition():e.hide())})),n&&f.reflow(this._backdrop),i.default(this._backdrop).addClass(dt),!t)return;if(!n)return void t();var r=f.getTransitionDurationFromElement(this._backdrop);i.default(this._backdrop).one(f.TRANSITION_END,t).emulateTransitionEnd(r)}else if(!this._isShown&&this._backdrop){i.default(this._backdrop).removeClass(dt);var o=function(){e._removeBackdrop(),t&&t()};if(i.default(this._element).hasClass(ft)){var a=f.getTransitionDurationFromElement(this._backdrop);i.default(this._backdrop).one(f.TRANSITION_END,o).emulateTransitionEnd(a)}else o()}else t&&t()},e._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},e._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},e._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(t.left+t.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},e._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(wt)),n=[].slice.call(document.querySelectorAll(".sticky-top"));i.default(e).each((function(e,n){var r=n.style.paddingRight,o=i.default(n).css("padding-right");i.default(n).data("padding-right",r).css("padding-right",parseFloat(o)+t._scrollbarWidth+"px")})),i.default(n).each((function(e,n){var r=n.style.marginRight,o=i.default(n).css("margin-right");i.default(n).data("margin-right",r).css("margin-right",parseFloat(o)-t._scrollbarWidth+"px")}));var r=document.body.style.paddingRight,o=i.default(document.body).css("padding-right");i.default(document.body).data("padding-right",r).css("padding-right",parseFloat(o)+this._scrollbarWidth+"px")}i.default(document.body).addClass(ct)},e._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(wt));i.default(t).each((function(t,e){var n=i.default(e).data("padding-right");i.default(e).removeData("padding-right"),e.style.paddingRight=n||""}));var e=[].slice.call(document.querySelectorAll(".sticky-top"));i.default(e).each((function(t,e){var n=i.default(e).data("margin-right");void 0!==n&&i.default(e).css("margin-right",n).removeData("margin-right")}));var n=i.default(document.body).data("padding-right");i.default(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},e._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(e,n){return this.each((function(){var r=i.default(this).data(lt),o=l({},xt,i.default(this).data(),"object"==typeof e&&e?e:{});if(r||(r=new t(this,o),i.default(this).data(lt,r)),"string"==typeof e){if(void 0===r[e])throw new TypeError('No method named "'+e+'"');r[e](n)}else o.show&&r.show(n)}))},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return xt}}]),t}();i.default(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(t){var e,n=this,r=f.getSelectorFromElement(this);r&&(e=document.querySelector(r));var o=i.default(e).data(lt)?"toggle":l({},i.default(e).data(),i.default(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var a=i.default(e).one(gt,(function(t){t.isDefaultPrevented()||a.one(pt,(function(){i.default(n).is(":visible")&&n.focus()}))}));Et._jQueryInterface.call(i.default(e),o,this)})),i.default.fn.modal=Et._jQueryInterface,i.default.fn.modal.Constructor=Et,i.default.fn.modal.noConflict=function(){return i.default.fn.modal=ut,Et._jQueryInterface};var zt=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],At=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Ct=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function Tt(t,e,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);for(var r=(new window.DOMParser).parseFromString(t,"text/html"),i=Object.keys(e),o=[].slice.call(r.body.querySelectorAll("*")),a=function(t,n){var r=o[t],a=r.nodeName.toLowerCase();if(-1===i.indexOf(r.nodeName.toLowerCase()))return r.parentNode.removeChild(r),"continue";var s=[].slice.call(r.attributes),l=[].concat(e["*"]||[],e[a]||[]);s.forEach((function(t){(function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===zt.indexOf(n)||Boolean(At.test(t.nodeValue)||Ct.test(t.nodeValue));for(var r=e.filter((function(t){return t instanceof RegExp})),i=0,o=r.length;i<o;i++)if(r[i].test(n))return!0;return!1})(t,l)||r.removeAttribute(t.nodeName)}))},s=0,l=o.length;s<l;s++)a(s);return r.body.innerHTML}var St="tooltip",Mt="bs.tooltip",Nt=i.default.fn.tooltip,Dt=new RegExp("(^|\\s)bs-tooltip\\S+","g"),Ot=["sanitize","whiteList","sanitizeFn"],It="fade",Pt="show",Lt="show",Bt="hover",jt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Ft={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},Rt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},qt={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},Ht=function(){function t(t,e){if(void 0===o.default)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var e=t.prototype;return e.enable=function(){this._isEnabled=!0},e.disable=function(){this._isEnabled=!1},e.toggleEnabled=function(){this._isEnabled=!this._isEnabled},e.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=i.default(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),i.default(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(i.default(this.getTipElement()).hasClass(Pt))return void this._leave(null,this);this._enter(null,this)}},e.dispose=function(){clearTimeout(this._timeout),i.default.removeData(this.element,this.constructor.DATA_KEY),i.default(this.element).off(this.constructor.EVENT_KEY),i.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&i.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},e.show=function(){var t=this;if("none"===i.default(this.element).css("display"))throw new Error("Please use show on visible elements");var e=i.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){i.default(this.element).trigger(e);var n=f.findShadowRoot(this.element),r=i.default.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!r)return;var a=this.getTipElement(),s=f.getUID(this.constructor.NAME);a.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&i.default(a).addClass(It);var l="function"==typeof this.config.placement?this.config.placement.call(this,a,this.element):this.config.placement,u=this._getAttachment(l);this.addAttachmentClass(u);var c=this._getContainer();i.default(a).data(this.constructor.DATA_KEY,this),i.default.contains(this.element.ownerDocument.documentElement,this.tip)||i.default(a).appendTo(c),i.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new o.default(this.element,a,this._getPopperConfig(u)),i.default(a).addClass(Pt),i.default(a).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&i.default(document.body).children().on("mouseover",null,i.default.noop);var d=function(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,i.default(t.element).trigger(t.constructor.Event.SHOWN),"out"===e&&t._leave(null,t)};if(i.default(this.tip).hasClass(It)){var h=f.getTransitionDurationFromElement(this.tip);i.default(this.tip).one(f.TRANSITION_END,d).emulateTransitionEnd(h)}else d()}},e.hide=function(t){var e=this,n=this.getTipElement(),r=i.default.Event(this.constructor.Event.HIDE),o=function(){e._hoverState!==Lt&&n.parentNode&&n.parentNode.removeChild(n),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),i.default(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};if(i.default(this.element).trigger(r),!r.isDefaultPrevented()){if(i.default(n).removeClass(Pt),"ontouchstart"in document.documentElement&&i.default(document.body).children().off("mouseover",null,i.default.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,i.default(this.tip).hasClass(It)){var a=f.getTransitionDurationFromElement(n);i.default(n).one(f.TRANSITION_END,o).emulateTransitionEnd(a)}else o();this._hoverState=""}},e.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},e.isWithContent=function(){return Boolean(this.getTitle())},e.addAttachmentClass=function(t){i.default(this.getTipElement()).addClass("bs-tooltip-"+t)},e.getTipElement=function(){return this.tip=this.tip||i.default(this.config.template)[0],this.tip},e.setContent=function(){var t=this.getTipElement();this.setElementContent(i.default(t.querySelectorAll(".tooltip-inner")),this.getTitle()),i.default(t).removeClass("fade show")},e.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=Tt(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?i.default(e).parent().is(t)||t.empty().append(e):t.text(i.default(e).text())},e.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},e._getPopperConfig=function(t){var e=this;return l({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},this.config.popperConfig)},e._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=l({},e.offsets,t.config.offset(e.offsets,t.element)),e}:e.offset=this.config.offset,e},e._getContainer=function(){return!1===this.config.container?document.body:f.isElement(this.config.container)?i.default(this.config.container):i.default(document).find(this.config.container)},e._getAttachment=function(t){return jt[t.toUpperCase()]},e._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach((function(e){if("click"===e)i.default(t.element).on(t.constructor.Event.CLICK,t.config.selector,(function(e){return t.toggle(e)}));else if("manual"!==e){var n=e===Bt?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,r=e===Bt?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;i.default(t.element).on(n,t.config.selector,(function(e){return t._enter(e)})).on(r,t.config.selector,(function(e){return t._leave(e)}))}})),this._hideModalHandler=function(){t.element&&t.hide()},i.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},e._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},e._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||i.default(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),i.default(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?"focus":Bt]=!0),i.default(e.getTipElement()).hasClass(Pt)||e._hoverState===Lt?e._hoverState=Lt:(clearTimeout(e._timeout),e._hoverState=Lt,e.config.delay&&e.config.delay.show?e._timeout=setTimeout((function(){e._hoverState===Lt&&e.show()}),e.config.delay.show):e.show())},e._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||i.default(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),i.default(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?"focus":Bt]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState="out",e.config.delay&&e.config.delay.hide?e._timeout=setTimeout((function(){"out"===e._hoverState&&e.hide()}),e.config.delay.hide):e.hide())},e._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},e._getConfig=function(t){var e=i.default(this.element).data();return Object.keys(e).forEach((function(t){-1!==Ot.indexOf(t)&&delete e[t]})),"number"==typeof(t=l({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),f.typeCheckConfig(St,t,this.constructor.DefaultType),t.sanitize&&(t.template=Tt(t.template,t.whiteList,t.sanitizeFn)),t},e._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},e._cleanTipClass=function(){var t=i.default(this.getTipElement()),e=t.attr("class").match(Dt);null!==e&&e.length&&t.removeClass(e.join(""))},e._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},e._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(i.default(t).removeClass(It),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this),r=n.data(Mt),o="object"==typeof e&&e;if((r||!/dispose|hide/.test(e))&&(r||(r=new t(this,o),n.data(Mt,r)),"string"==typeof e)){if(void 0===r[e])throw new TypeError('No method named "'+e+'"');r[e]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return Ft}},{key:"NAME",get:function(){return St}},{key:"DATA_KEY",get:function(){return Mt}},{key:"Event",get:function(){return qt}},{key:"EVENT_KEY",get:function(){return".bs.tooltip"}},{key:"DefaultType",get:function(){return Rt}}]),t}();i.default.fn.tooltip=Ht._jQueryInterface,i.default.fn.tooltip.Constructor=Ht,i.default.fn.tooltip.noConflict=function(){return i.default.fn.tooltip=Nt,Ht._jQueryInterface};var $t="bs.popover",Wt=i.default.fn.popover,Ut=new RegExp("(^|\\s)bs-popover\\S+","g"),Vt=l({},Ht.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Yt=l({},Ht.DefaultType,{content:"(string|element|function)"}),Xt={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},Gt=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,u(e,n);var o=r.prototype;return o.isWithContent=function(){return this.getTitle()||this._getContent()},o.addAttachmentClass=function(t){i.default(this.getTipElement()).addClass("bs-popover-"+t)},o.getTipElement=function(){return this.tip=this.tip||i.default(this.config.template)[0],this.tip},o.setContent=function(){var t=i.default(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(".popover-body"),e),t.removeClass("fade show")},o._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},o._cleanTipClass=function(){var t=i.default(this.getTipElement()),e=t.attr("class").match(Ut);null!==e&&e.length>0&&t.removeClass(e.join(""))},r._jQueryInterface=function(t){return this.each((function(){var e=i.default(this).data($t),n="object"==typeof t?t:null;if((e||!/dispose|hide/.test(t))&&(e||(e=new r(this,n),i.default(this).data($t,e)),"string"==typeof t)){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}}))},s(r,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return Vt}},{key:"NAME",get:function(){return"popover"}},{key:"DATA_KEY",get:function(){return $t}},{key:"Event",get:function(){return Xt}},{key:"EVENT_KEY",get:function(){return".bs.popover"}},{key:"DefaultType",get:function(){return Yt}}]),r}(Ht);i.default.fn.popover=Gt._jQueryInterface,i.default.fn.popover.Constructor=Gt,i.default.fn.popover.noConflict=function(){return i.default.fn.popover=Wt,Gt._jQueryInterface};var Kt="scrollspy",Zt="bs.scrollspy",Qt=i.default.fn[Kt],Jt="active",te="position",ee=".nav, .list-group",ne={offset:10,method:"auto",target:""},re={offset:"number",method:"string",target:"(string|element)"},ie=function(){function t(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" .nav-link,"+this._config.target+" .list-group-item,"+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,i.default(this._scrollElement).on("scroll.bs.scrollspy",(function(t){return n._process(t)})),this.refresh(),this._process()}var e=t.prototype;return e.refresh=function(){var t=this,e="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":te:this._config.method,n=e===te?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map((function(t){var r,o=f.getSelectorFromElement(t);if(o&&(r=document.querySelector(o)),r){var a=r.getBoundingClientRect();if(a.width||a.height)return[i.default(r)[e]().top+n,o]}return null})).filter((function(t){return t})).sort((function(t,e){return t[0]-e[0]})).forEach((function(e){t._offsets.push(e[0]),t._targets.push(e[1])}))},e.dispose=function(){i.default.removeData(this._element,Zt),i.default(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},e._getConfig=function(t){if("string"!=typeof(t=l({},ne,"object"==typeof t&&t?t:{})).target&&f.isElement(t.target)){var e=i.default(t.target).attr("id");e||(e=f.getUID(Kt),i.default(t.target).attr("id",e)),t.target="#"+e}return f.typeCheckConfig(Kt,t,re),t},e._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},e._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},e._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},e._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;)this._activeTarget!==this._targets[i]&&t>=this._offsets[i]&&(void 0===this._offsets[i+1]||t<this._offsets[i+1])&&this._activate(this._targets[i])}},e._activate=function(t){this._activeTarget=t,this._clear();var e=this._selector.split(",").map((function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'})),n=i.default([].slice.call(document.querySelectorAll(e.join(","))));n.hasClass("dropdown-item")?(n.closest(".dropdown").find(".dropdown-toggle").addClass(Jt),n.addClass(Jt)):(n.addClass(Jt),n.parents(ee).prev(".nav-link, .list-group-item").addClass(Jt),n.parents(ee).prev(".nav-item").children(".nav-link").addClass(Jt)),i.default(this._scrollElement).trigger("activate.bs.scrollspy",{relatedTarget:t})},e._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter((function(t){return t.classList.contains(Jt)})).forEach((function(t){return t.classList.remove(Jt)}))},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this).data(Zt);if(n||(n=new t(this,"object"==typeof e&&e),i.default(this).data(Zt,n)),"string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'+e+'"');n[e]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return ne}}]),t}();i.default(window).on("load.bs.scrollspy.data-api",(function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),e=t.length;e--;){var n=i.default(t[e]);ie._jQueryInterface.call(n,n.data())}})),i.default.fn[Kt]=ie._jQueryInterface,i.default.fn[Kt].Constructor=ie,i.default.fn[Kt].noConflict=function(){return i.default.fn[Kt]=Qt,ie._jQueryInterface};var oe="bs.tab",ae=i.default.fn.tab,se="active",le=".active",ue="> li > .active",ce=function(){function t(t){this._element=t}var e=t.prototype;return e.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&i.default(this._element).hasClass(se)||i.default(this._element).hasClass("disabled"))){var e,n,r=i.default(this._element).closest(".nav, .list-group")[0],o=f.getSelectorFromElement(this._element);if(r){var a="UL"===r.nodeName||"OL"===r.nodeName?ue:le;n=(n=i.default.makeArray(i.default(r).find(a)))[n.length-1]}var s=i.default.Event("hide.bs.tab",{relatedTarget:this._element}),l=i.default.Event("show.bs.tab",{relatedTarget:n});if(n&&i.default(n).trigger(s),i.default(this._element).trigger(l),!l.isDefaultPrevented()&&!s.isDefaultPrevented()){o&&(e=document.querySelector(o)),this._activate(this._element,r);var u=function(){var e=i.default.Event("hidden.bs.tab",{relatedTarget:t._element}),r=i.default.Event("shown.bs.tab",{relatedTarget:n});i.default(n).trigger(e),i.default(t._element).trigger(r)};e?this._activate(e,e.parentNode,u):u()}}},e.dispose=function(){i.default.removeData(this._element,oe),this._element=null},e._activate=function(t,e,n){var r=this,o=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?i.default(e).children(le):i.default(e).find(ue))[0],a=n&&o&&i.default(o).hasClass("fade"),s=function(){return r._transitionComplete(t,o,n)};if(o&&a){var l=f.getTransitionDurationFromElement(o);i.default(o).removeClass("show").one(f.TRANSITION_END,s).emulateTransitionEnd(l)}else s()},e._transitionComplete=function(t,e,n){if(e){i.default(e).removeClass(se);var r=i.default(e.parentNode).find("> .dropdown-menu .active")[0];r&&i.default(r).removeClass(se),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}i.default(t).addClass(se),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),f.reflow(t),t.classList.contains("fade")&&t.classList.add("show");var o=t.parentNode;if(o&&"LI"===o.nodeName&&(o=o.parentNode),o&&i.default(o).hasClass("dropdown-menu")){var a=i.default(t).closest(".dropdown")[0];if(a){var s=[].slice.call(a.querySelectorAll(".dropdown-toggle"));i.default(s).addClass(se)}t.setAttribute("aria-expanded",!0)}n&&n()},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this),r=n.data(oe);if(r||(r=new t(this),n.data(oe,r)),"string"==typeof e){if(void 0===r[e])throw new TypeError('No method named "'+e+'"');r[e]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),t}();i.default(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',(function(t){t.preventDefault(),ce._jQueryInterface.call(i.default(this),"show")})),i.default.fn.tab=ce._jQueryInterface,i.default.fn.tab.Constructor=ce,i.default.fn.tab.noConflict=function(){return i.default.fn.tab=ae,ce._jQueryInterface};var fe="bs.toast",de=i.default.fn.toast,he="show",pe="showing",ge="click.dismiss.bs.toast",ve={animation:!0,autohide:!0,delay:500},me={animation:"boolean",autohide:"boolean",delay:"number"},ye=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var e=t.prototype;return e.show=function(){var t=this,e=i.default.Event("show.bs.toast");if(i.default(this._element).trigger(e),!e.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var n=function(){t._element.classList.remove(pe),t._element.classList.add(he),i.default(t._element).trigger("shown.bs.toast"),t._config.autohide&&(t._timeout=setTimeout((function(){t.hide()}),t._config.delay))};if(this._element.classList.remove("hide"),f.reflow(this._element),this._element.classList.add(pe),this._config.animation){var r=f.getTransitionDurationFromElement(this._element);i.default(this._element).one(f.TRANSITION_END,n).emulateTransitionEnd(r)}else n()}},e.hide=function(){if(this._element.classList.contains(he)){var t=i.default.Event("hide.bs.toast");i.default(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},e.dispose=function(){this._clearTimeout(),this._element.classList.contains(he)&&this._element.classList.remove(he),i.default(this._element).off(ge),i.default.removeData(this._element,fe),this._element=null,this._config=null},e._getConfig=function(t){return t=l({},ve,i.default(this._element).data(),"object"==typeof t&&t?t:{}),f.typeCheckConfig("toast",t,this.constructor.DefaultType),t},e._setListeners=function(){var t=this;i.default(this._element).on(ge,'[data-dismiss="toast"]',(function(){return t.hide()}))},e._close=function(){var t=this,e=function(){t._element.classList.add("hide"),i.default(t._element).trigger("hidden.bs.toast")};if(this._element.classList.remove(he),this._config.animation){var n=f.getTransitionDurationFromElement(this._element);i.default(this._element).one(f.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},e._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},t._jQueryInterface=function(e){return this.each((function(){var n=i.default(this),r=n.data(fe);if(r||(r=new t(this,"object"==typeof e&&e),n.data(fe,r)),"string"==typeof e){if(void 0===r[e])throw new TypeError('No method named "'+e+'"');r[e](this)}}))},s(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"DefaultType",get:function(){return me}},{key:"Default",get:function(){return ve}}]),t}();i.default.fn.toast=ye._jQueryInterface,i.default.fn.toast.Constructor=ye,i.default.fn.toast.noConflict=function(){return i.default.fn.toast=de,ye._jQueryInterface},t.Alert=p,t.Button=w,t.Carousel=O,t.Collapse=U,t.Dropdown=st,t.Modal=Et,t.Popover=Gt,t.Scrollspy=ie,t.Tab=ce,t.Toast=ye,t.Tooltip=Ht,t.Util=f,Object.defineProperty(t,"__esModule",{value:!0})})),function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function r(t){return null===t?NaN:+t}function i(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function a(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(t){return(t+="")===yo||t[0]===_o?_o+t:t}function f(t){return(t+="")[0]===_o?t.slice(1):t}function d(t){return c(t)in this._}function h(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(f(e));return t}function g(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(t){return t}function _(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=bo.length;r>n;++n){var i=bo[n]+e;if(i in t)return i}}function w(){}function x(){}function k(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new u;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function E(){ao.event.preventDefault()}function z(){for(var t,e=ao.event;t=e.sourceEvent;)e=t;return e}function A(t){for(var e=new x,n=0,r=arguments.length;++n<r;)e[arguments[n]]=k(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=ao.event;i.target=t,ao.event=i,e[i.type].apply(n,r)}finally{ao.event=o}}},e}function C(t){return xo(t,Ao),t}function T(t){return"function"==typeof t?t:function(){return ko(t,this)}}function S(t){return"function"==typeof t?t:function(){return Eo(t,this)}}function M(t,e){return t=ao.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function N(t){return t.trim().replace(/\s+/g," ")}function D(t){return new RegExp("(?:^|\\s+)"+ao.requote(t)+"(?:\\s+|$)","g")}function O(t){return(t+"").trim().split(/^|\s+/)}function I(t,e){var n=(t=O(t).map(P)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function P(t){var e=D(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",N(i+" "+t))):n.setAttribute("class",N(i.replace(e," ")))}}function L(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function B(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function j(t){return"function"==typeof t?t:(t=ao.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}}function F(){var t=this.parentNode;t&&t.removeChild(this)}function R(t){return{__data__:t}}function q(t){return function(){return zo(this,t)}}function H(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function $(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,n);return t}function W(t){return xo(t,To),t}function U(t){var e,n;return function(r,i,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<l;);return a}}function V(t,e,n){function r(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}var i="__on"+t,o=t.indexOf("."),a=Y;o>0&&(t=t.slice(0,o));var s=So.get(t);return s&&(t=s,a=X),o?e?function(){var o=a(e,lo(arguments));r.call(this),this.addEventListener(t,this[i]=o,o.$=n),o._=e}:r:e?w:function(){var e,n=new RegExp("^__on([^.]+)"+ao.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}function Y(t,e){return function(n){var r=ao.event;ao.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ao.event=r}}}function X(t,e){var n=Y(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function G(n){var r=".dragsuppress-"+ ++No,i="click"+r,o=ao.select(e(n)).on("touchmove"+r,E).on("dragstart"+r,E).on("selectstart"+r,E);if(null==Mo&&(Mo=!("onselectstart"in n)&&b(n.style,"userSelect")),Mo){var a=t(n).style,s=a[Mo];a[Mo]="none"}return function(t){if(o.on(r,null),Mo&&(a[Mo]=s),t){var e=function(){o.on(i,null)};o.on(i,(function(){E(),e()}),!0),setTimeout(e,0)}}}function K(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Do){var o=e(t);if(o.scrollX||o.scrollY){var a=(r=ao.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Do=!(a.f||a.e),r.remove()}}return Do?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function Z(){return ao.event.changedTouches[0].identifier}function Q(t){return t>0?1:0>t?-1:0}function J(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:-1>t?Po:Math.acos(t)}function et(t){return t>1?jo:-1>t?-jo:Math.asin(t)}function nt(t){return((t=Math.exp(t))+1/t)/2}function rt(t){return(t=Math.sin(t/2))*t}function it(){}function ot(t,e,n){return this instanceof ot?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ot?new ot(t.h,t.s,t.l):_t(""+t,bt,ot):new ot(t,e,n)}function at(t,e,n){function r(t){return Math.round(255*function(t){return t>360?t-=360:0>t&&(t+=360),60>t?i+(o-i)*t/60:180>t?o:240>t?i+(o-i)*(240-t)/60:i}(t))}var i,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||0>e?0:e>1?1:e,i=2*(n=0>n?0:n>1?1:n)-(o=.5>=n?n*(1+e):n+e-n*e),new gt(r(t+120),r(t),r(t-120))}function st(t,e,n){return this instanceof st?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.c,t.l):ft(t instanceof ut?t.l:(t=wt((t=ao.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new st(t,e,n)}function lt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ut(n,Math.cos(t*=Fo)*e,Math.sin(t)*e)}function ut(t,e,n){return this instanceof ut?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ut?new ut(t.l,t.a,t.b):t instanceof st?lt(t.h,t.c,t.l):wt((t=gt(t)).r,t.g,t.b):new ut(t,e,n)}function ct(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new gt(pt(3.2404542*(i=dt(i)*Xo)-1.5371385*(r=dt(r)*Go)-.4985314*(o=dt(o)*Ko)),pt(-.969266*i+1.8760108*r+.041556*o),pt(.0556434*i-.2040259*r+1.0572252*o))}function ft(t,e,n){return t>0?new st(Math.atan2(n,e)*Ro,Math.sqrt(e*e+n*n),t):new st(NaN,NaN,t)}function dt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ht(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function pt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function gt(t,e,n){return this instanceof gt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof gt?new gt(t.r,t.g,t.b):_t(""+t,gt,at):new gt(t,e,n)}function vt(t){return new gt(t>>16,t>>8&255,255&t)}function mt(t){return vt(t)+""}function yt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _t(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(kt(i[0]),kt(i[1]),kt(i[2]))}return(o=Jo.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function bt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=.5>l?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new ot(r,i,l)}function wt(t,e,n){var r=ht((.4124564*(t=xt(t))+.3575761*(e=xt(e))+.1804375*(n=xt(n)))/Xo),i=ht((.2126729*t+.7151522*e+.072175*n)/Go);return ut(116*i-16,500*(r-i),200*(i-ht((.0193339*t+.119192*e+.9503041*n)/Ko)))}function xt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Et(t){return"function"==typeof t?t:function(){return t}}function zt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),At(e,n,t,r)}}function At(t,e,n,r){function i(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=ao.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var e=ao.event;ao.event=t;try{a.progress.call(o,l)}finally{ao.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach((function(t){o[t]=function(){return o.send.apply(o,[t].concat(lo(arguments)))}})),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",(function(t){i(null,t)})),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},ao.rebind(o,a,"on"),null==r?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}function Ct(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return ea?ea.n=o:ta=o,ea=o,na||(ra=clearTimeout(ra),na=1,ia(Tt)),o}function Tt(){var t=St(),e=Mt()-t;e>24?(isFinite(e)&&(clearTimeout(ra),ra=setTimeout(Tt,e)),na=0):(na=1,ia(Tt))}function St(){for(var t=Date.now(),e=ta;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Mt(){for(var t,e=ta,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ta=e.n;return ea=t,n}function Nt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:y;return function(t){var n=aa.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],d=n[8],h=n[9],p=1,g="",v="",m=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),h){case"n":f=!0,h="g";break;case"%":p=100,v="%",h="f";break;case"p":p=100,v="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":m=!0,d=0;break;case"s":p=-1,h="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):("e"==h||"f"==h)&&(d=Math.max(0,Math.min(20,d)))),h=sa.get(h)||Ot;var _=u&&f;return function(t){var n=v;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>p){var l=ao.formatPrefix(t,d);t=l.scale(t),n=l.symbol+v}else t*=p;var b,w,x=(t=h(t,d)).lastIndexOf(".");if(0>x){var k=y?t.lastIndexOf("e"):-1;0>k?(b=t,w=""):(b=t.substring(0,k),w=t.substring(k))}else b=t.substring(0,x),w=e+t.substring(x+1);!u&&f&&(b=o(b,1/0));var E=g.length+b.length+w.length+(_?0:i.length),z=c>E?new Array(E=c-E+1).join(r):"";return _&&(b=o(z+b,z.length?c-w.length:1/0)),i+=g,t=b+w,("<"===a?i+t+z:">"===a?z+i+t:"^"===a?z.substring(0,E>>=1)+i+t+z.substring(E):i+(_?t:z+t))+n}}}function Ot(t){return t+""}function It(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new ua(n-1)),1),n}function o(t,n){return e(t=new ua(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;r>a;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=Lt(t);return s.floor=s,s.round=Lt(r),s.ceil=Lt(i),s.offset=Lt(o),s.range=function(t,e,n){try{ua=It;var r=new It;return r._=t,a(r,e,n)}finally{ua=Date}},t}function Lt(t){return function(e,n){try{ua=It;var r=new It;return r._=e,t(r,n)._}finally{ua=Date}}}function Bt(t){function e(t){function e(e){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=fa[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=b[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&ua!==It,o=new(i?It:ua);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;l>s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=w[a in fa?e.charAt(s++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var r=t.dateTime,i=t.date,o=t.time,a=t.periods,s=t.days,l=t.shortDays,u=t.months,c=t.shortMonths;e.utc=function(t){function n(t){try{var e=new(ua=It);return e._=t,r(e)}finally{ua=Date}}var r=e(t);return n.parse=function(t){try{ua=It;var e=r.parse(t);return e&&e._}finally{ua=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=ne;var f=ao.map(),d=Ft(s),h=Rt(s),p=Ft(l),g=Rt(l),v=Ft(u),m=Rt(u),y=Ft(c),_=Rt(c);a.forEach((function(t,e){f.set(t.toLowerCase(),e)}));var b={a:function(t){return l[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:e(r),d:function(t,e){return jt(t.getDate(),e,2)},e:function(t,e){return jt(t.getDate(),e,2)},H:function(t,e){return jt(t.getHours(),e,2)},I:function(t,e){return jt(t.getHours()%12||12,e,2)},j:function(t,e){return jt(1+la.dayOfYear(t),e,3)},L:function(t,e){return jt(t.getMilliseconds(),e,3)},m:function(t,e){return jt(t.getMonth()+1,e,2)},M:function(t,e){return jt(t.getMinutes(),e,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,e){return jt(t.getSeconds(),e,2)},U:function(t,e){return jt(la.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return jt(la.mondayOfYear(t),e,2)},x:e(i),X:e(o),y:function(t,e){return jt(t.getFullYear()%100,e,2)},Y:function(t,e){return jt(t.getFullYear()%1e4,e,4)},Z:te,"%":function(){return"%"}},w={a:function(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){d.lastIndex=0;var r=d.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,r){return n(t,b.c.toString(),e,r)},d:Xt,e:Xt,H:Kt,I:Kt,j:Gt,L:Jt,m:Yt,M:Zt,p:function(t,e,n){var r=f.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:Qt,U:Ht,w:qt,W:$t,x:function(t,e,r){return n(t,b.x.toString(),e,r)},X:function(t,e,r){return n(t,b.X.toString(),e,r)},y:Ut,Y:Wt,Z:Vt,"%":ee};return e}function jt(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Ft(t){return new RegExp("^(?:"+t.map(ao.requote).join("|")+")","i")}function Rt(t){for(var e=new u,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function qt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ht(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function $t(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Wt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ut(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+2));return r?(t.y=function(t){return t+(t>68?1900:2e3)}(+r[0]),n+r[0].length):-1}function Vt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Yt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Xt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Gt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Kt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Zt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Qt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Jt(t,e,n){da.lastIndex=0;var r=da.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function te(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=mo(e)/60|0,i=mo(e)%60;return n+jt(r,"0",2)+jt(i,"0",2)}function ee(t,e,n){ha.lastIndex=0;var r=ha.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ne(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function re(){}function ie(t,e,n){var r=n.s=t+e,i=r-t;n.t=t-(r-i)+(e-i)}function oe(t,e){t&&ma.hasOwnProperty(t.type)&&ma[t.type](t,e)}function ae(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function se(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ae(t[n],e,1);e.polygonEnd()}function le(){function t(t,e){e=e*Fo/2+Po/4;var n=(t*=Fo)-r,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,f=i*l+c*Math.cos(s),d=c*a*Math.sin(s);_a.add(Math.atan2(d,f)),r=t,i=l,o=u}var e,n,r,i,o;ba.point=function(a,s){ba.point=t,r=(e=a)*Fo,i=Math.cos(s=(n=s)*Fo/2+Po/4),o=Math.sin(s)},ba.lineEnd=function(){t(e,n)}}function ue(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function fe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function de(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function he(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function pe(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ge(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function ve(t,e){return mo(t[0]-e[0])<Oo&&mo(t[1]-e[1])<Oo}function me(t,e){t*=Fo;var n=Math.cos(e*=Fo);ye(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ye(t,e,n){++wa,ka+=(t-ka)/wa,Ea+=(e-Ea)/wa,za+=(n-za)/wa}function _e(){function t(t,i){t*=Fo;var o=Math.cos(i*=Fo),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+r*l);xa+=u,Aa+=u*(e+(e=a)),Ca+=u*(n+(n=s)),Ta+=u*(r+(r=l)),ye(e,n,r)}var e,n,r;Da.point=function(i,o){i*=Fo;var a=Math.cos(o*=Fo);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Da.point=t,ye(e,n,r)}}function be(){Da.point=me}function we(){function t(t,e){t*=Fo;var n=Math.cos(e*=Fo),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=i*l-o*s,c=o*a-r*l,f=r*s-i*a,d=Math.sqrt(u*u+c*c+f*f),h=r*a+i*s+o*l,p=d&&-tt(h)/d,g=Math.atan2(d,h);Sa+=p*u,Ma+=p*c,Na+=p*f,xa+=g,Aa+=g*(r+(r=a)),Ca+=g*(i+(i=s)),Ta+=g*(o+(o=l)),ye(r,i,o)}var e,n,r,i,o;Da.point=function(a,s){e=a,n=s,Da.point=t,a*=Fo;var l=Math.cos(s*=Fo);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),ye(r,i,o)},Da.lineEnd=function(){t(e,n),Da.lineEnd=be,Da.point=me}}function xe(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function ke(){return!0}function Ee(t,e,n,r,i){var o=[],a=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(ve(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var l=new Ae(n,t,null,!0),u=new Ae(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new Ae(r,t,null,!1),u=new Ae(r,null,l,!0),l.o=u,o.push(l),a.push(u)}})),a.sort(e),ze(o),ze(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,f,d=o[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(s=0,u=c.length;u>s;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=(c=h.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function ze(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Ae(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ce(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);v.point(n[0],n[1])}function l(){y.point=s,v.lineStart()}function u(){y.point=a,v.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=_.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&e){var i,a=-1;if((r=(t=n[0]).length-1)>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Te))}var h,p,g,v=e(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=d,h=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,h=ao.merge(h);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;_a.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],c=u.length;if(c)for(var f=u[0],d=f[0],h=f[1]/2+Po/4,p=Math.sin(h),g=Math.cos(h),v=1;;){v===c&&(v=0);var m=(t=u[v])[0],y=t[1]/2+Po/4,_=Math.sin(y),b=Math.cos(y),w=m-d,x=w>=0?1:-1,k=x*w,E=k>Po,z=p*_;if(_a.add(Math.atan2(z*x*Math.sin(k),g*b+z*Math.cos(k))),o+=E?w+x*Lo:w,E^d>=n^m>=n){var A=fe(ue(f),ue(t));pe(A);var C=fe(i,A);pe(C);var T=(E^w>=0?-1:1)*et(C[2]);(r>T||r===T&&(A[0]||A[1]))&&(a+=E^w>=0?1:-1)}if(!v++)break;d=m,p=_,g=b,f=t}}return(-Oo>o||Oo>o&&0>_a)^1&a}(m,p);h.length?(w||(o.polygonStart(),w=!0),Ee(h,Me,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),h=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},_=Se(),b=e(_),w=!1;return y}}function Te(t){return t.length>1}function Se(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:w,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Me(t,e){return((t=t.x)[0]<0?t[1]-jo-Oo:jo-t[1])-((e=e.x)[0]<0?e[1]-jo-Oo:jo-e[1])}function Ne(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t,e,n){var r=[1,0,0],o=fe(ue(t),ue(e)),a=ce(o,o),s=o[0],l=a-s*s;if(!l)return!n&&t;var u=i*a/l,c=-i*s/l,f=fe(r,o),d=he(r,u);de(d,he(o,c));var h=f,p=ce(d,h),g=ce(h,h),v=p*p-g*(ce(d,d)-1);if(!(0>v)){var m=Math.sqrt(v),y=he(h,(-p-m)/g);if(de(y,d),y=ge(y),!n)return y;var _,b=t[0],w=e[0],x=t[1],k=e[1];b>w&&(_=b,b=w,w=_);var E=w-b,z=mo(E-Po)<Oo;if(!z&&x>k&&(_=x,x=k,k=_),z||Oo>E?z?x+k>0^y[1]<(mo(y[0]-b)<Oo?x:k):x<=y[1]&&y[1]<=k:E>Po^(b<=y[0]&&y[0]<=w)){var A=he(h,(-p+m)/g);return de(A,d),[y,ge(A)]}}}function r(e,n){var r=o?t:Po-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var i=Math.cos(t),o=i>0,a=mo(i)>Oo;return Ce(e,(function(t){var i,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var h,p=[f,d],g=e(f,d),v=o?g?0:r(f,d):g?r(f+(0>f?Po:-Po),d):0;if(!i&&(u=l=g)&&t.lineStart(),g!==l&&(h=n(i,p),(ve(i,h)||ve(p,h))&&(p[0]+=Oo,p[1]+=Oo,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),h=n(p,i),t.point(h[0],h[1])):(h=n(i,p),t.point(h[0],h[1]),t.lineEnd()),i=h;else if(a&&i&&o^g){var m;v&s||!(m=n(p,i,!0))||(c=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||i&&ve(i,p)||t.point(p[0],p[1]),i=p,l=g,s=v},lineEnd:function(){l&&t.lineEnd(),i=null},clean:function(){return c|(u&&l)<<1}}}),rn(t,6*Fo),o?[0,-t]:[-Po,t-Po])}function De(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=0,f=1,d=s.x-l,h=s.y-u;if(o=t-l,d||!(o>0)){if(o/=d,0>d){if(c>o)return;f>o&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=n-l,d||!(0>o)){if(o/=d,0>d){if(o>f)return;o>c&&(c=o)}else if(d>0){if(c>o)return;f>o&&(f=o)}if(o=e-u,h||!(o>0)){if(o/=h,0>h){if(c>o)return;f>o&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=r-u,h||!(0>o)){if(o/=h,0>h){if(o>f)return;o>c&&(c=o)}else if(h>0){if(c>o)return;f>o&&(f=o)}return c>0&&(i.a={x:l+c*d,y:u+c*h}),1>f&&(i.b={x:l+f*d,y:u+f*h}),i}}}}}}function Oe(t,e,n,r){function i(r,i){return mo(r[0]-t)<Oo?i>0?0:3:mo(r[0]-n)<Oo?i>0?2:1:mo(r[1]-e)<Oo?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(o,s,l,u){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(s,l))||a(o,s)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+l+4)%4)!==f);else u.point(s[0],s[1])}function u(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function c(t,e){u(t,e)&&s.point(t,e)}function f(t,e){var n=u(t=Math.max(-Ia,Math.min(Ia,t)),e=Math.max(-Ia,Math.min(Ia,e)));if(h&&p.push([t,e]),w)g=t,v=e,m=n,w=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&b)s.point(t,e);else{var r={a:{x:y,y:_},b:{x:t,y:e}};z(r)?(b||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),x=!1):n&&(s.lineStart(),s.point(t,e),x=!1)}y=t,_=e,b=n}var d,h,p,g,v,m,y,_,b,w,x,k=s,E=Se(),z=De(t,e,n,r),A={point:c,lineStart:function(){A.point=f,h&&h.push(p=[]),w=!0,b=!1,y=_=NaN},lineEnd:function(){d&&(f(g,v),m&&b&&E.rejoin(),d.push(E.buffer())),A.point=c,b&&s.lineEnd()},polygonStart:function(){s=E,d=[],h=[],x=!0},polygonEnd:function(){s=k,d=ao.merge(d);var e=function(t){for(var e=0,n=h.length,r=t[1],i=0;n>i;++i)for(var o,a=1,s=h[i],l=s.length,u=s[0];l>a;++a)o=s[a],u[1]<=r?o[1]>r&&J(u,o,t)>0&&++e:o[1]<=r&&J(u,o,t)<0&&--e,u=o;return 0!==e}([t,r]),n=x&&e,i=d.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&Ee(d,o,e,l,s),s.polygonEnd()),d=h=p=null}};return A}}function Ie(t){var e=0,n=Po/3,r=Ge(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Po/180,n=t[1]*Po/180):[e/Po*180,n/Po*180]},i}function Pe(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,et((o-(t*t+n*n)*i*i)/(2*i))]},n}function Le(){function t(t,e){La+=i*t-r*e,r=t,i=e}var e,n,r,i;qa.point=function(o,a){qa.point=t,e=r=o,n=i=a},qa.lineEnd=function(){t(e,n)}}function Be(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=je(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=je(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function je(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Fe(t,e){ka+=t,Ea+=e,++za}function Re(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);Aa+=a*(e+t)/2,Ca+=a*(n+r)/2,Ta+=a,Fe(e=t,n=r)}var e,n;$a.point=function(r,i){$a.point=t,Fe(e=r,n=i)}}function qe(){$a.point=Fe}function He(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);Aa+=a*(r+t)/2,Ca+=a*(i+e)/2,Ta+=a,Sa+=(a=i*t-r*e)*(r+t),Ma+=a*(i+e),Na+=3*a,Fe(r=t,i=e)}var e,n,r,i;$a.point=function(o,a){$a.point=t,Fe(e=r=o,n=i=a)},$a.lineEnd=function(){t(e,n)}}function $e(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,Lo)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:w};return s}function We(t){function e(t){return(s?r:n)(t)}function n(e){return Ye(e,(function(n,r){n=t(n,r),e.point(n[0],n[1])}))}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){y=NaN,k.point=o,e.lineStart()}function o(n,r){var o=ue([n,r]),a=t(n,r);i(y,_,m,b,w,x,y=a[0],_=a[1],m=n,b=o[0],w=o[1],x=o[2],s,e),e.point(y,_)}function a(){k.point=n,e.lineEnd()}function l(){r(),k.point=u,k.lineEnd=c}function u(t,e){o(f=t,e),d=y,h=_,p=b,g=w,v=x,k.point=o}function c(){i(y,_,m,b,w,x,d,h,f,p,g,v,s,e),k.lineEnd=a,a()}var f,d,h,p,g,v,m,y,_,b,w,x,k={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),k.lineStart=l},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}function i(e,n,r,s,l,u,c,f,d,h,p,g,v,m){var y=c-e,_=f-n,b=y*y+_*_;if(b>4*o&&v--){var w=s+h,x=l+p,k=u+g,E=Math.sqrt(w*w+x*x+k*k),z=Math.asin(k/=E),A=mo(mo(k)-1)<Oo||mo(r-d)<Oo?(r+d)/2:Math.atan2(x,w),C=t(A,z),T=C[0],S=C[1],M=T-e,N=S-n,D=_*M-y*N;(D*D/b>o||mo((y*M+_*N)/b-.5)>.3||a>s*h+l*p+u*g)&&(i(e,n,r,s,l,u,T,S,A,w/=E,x/=E,k,v,m),m.point(T,S),i(T,S,A,w,x,k,c,f,d,h,p,g,v,m))}}var o=.5,a=Math.cos(30*Fo),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function Ue(t){var e=We((function(e,n){return t([e*Ro,n*Ro])}));return function(t){return Ke(e(t))}}function Ve(t){this.stream=t}function Ye(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Xe(t){return Ge((function(){return t}))()}function Ge(t){function e(t){return[(t=s(t[0]*Fo,t[1]*Fo))[0]*d+l,u-t[1]*d]}function n(t){return(t=s.invert((t[0]-l)/d,(u-t[1])/d))&&[t[0]*Ro,t[1]*Ro]}function r(){s=xe(a=Je(m,_,b),o);var t=o(g,v);return l=h-t[0]*d,u=p+t[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,f=We((function(t,e){return[(t=o(t,e))[0]*d+l,u-t[1]*d]})),d=150,h=480,p=250,g=0,v=0,m=0,_=0,b=0,w=Oa,x=y,k=null,E=null;return e.stream=function(t){return c&&(c.valid=!1),(c=Ke(w(a,f(x(t))))).valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(k=t,Oa):Ne((k=+t)*Fo),i()):k},e.clipExtent=function(t){return arguments.length?(E=t,x=t?Oe(t[0][0],t[0][1],t[1][0],t[1][1]):y,i()):E},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],r()):[h,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Fo,v=t[1]%360*Fo,r()):[g*Ro,v*Ro]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Fo,_=t[1]%360*Fo,b=t.length>2?t[2]%360*Fo:0,r()):[m*Ro,_*Ro,b*Ro]},ao.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function Ke(t){return Ye(t,(function(e,n){t.point(e*Fo,n*Fo)}))}function Ze(t,e){return[t,e]}function Qe(t,e){return[t>Po?t-Lo:-Po>t?t+Lo:t,e]}function Je(t,e,n){return t?e||n?xe(en(t),nn(e,n)):en(t):e||n?nn(e,n):Qe}function tn(t){return function(e,n){return[(e+=t)>Po?e-Lo:-Po>e?e+Lo:e,n]}}function en(t){var e=tn(t);return e.invert=tn(-t),e}function nn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),et(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),et(c*r-s*i)]},n}function rn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=on(n,i),o=on(n,o),(a>0?o>i:i>o)&&(i+=a*Lo)):(i=t+a*Lo,o=t-.5*l);for(var u,c=i;a>0?c>o:o>c;c-=l)s.point((u=ge([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function on(t,e){var n=ue(e);n[0]-=t,pe(n);var r=tt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Oo)%(2*Math.PI)}function an(t,e,n){var r=ao.range(t,e-Oo,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function sn(t,e,n){var r=ao.range(t,e-Oo,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function ln(t){return t.source}function un(t){return t.target}function cn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function fn(t,e){function n(t,e){a>0?-jo+Oo>e&&(e=-jo+Oo):e>jo-Oo&&(e=jo-Oo);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Po/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=Q(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-jo]},n):hn}function dn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return mo(i)<Oo?Ze:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-Q(i)*Math.sqrt(t*t+n*n)]},n)}function hn(t,e){return[t,Math.log(Math.tan(Po/4+e/2))]}function pn(t){var e,n=Xe(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Po*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function gn(t,e){return[Math.log(Math.tan(Po/4+e/2)),-t]}function vn(t){return t[0]}function mn(t){return t[1]}function yn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&J(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function _n(t,e){return t[0]-e[0]||t[1]-e[1]}function bn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function wn(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,f=r[1]-u,d=(s*(l-u)-f*(i-o))/(f*a-s*c);return[i+d*a,l+d*c]}function xn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function kn(){Hn(this),this.edge=this.site=this.circle=null}function En(t){var e=rs.pop()||new kn;return e.site=t,e}function zn(t){In(t),ts.remove(t),rs.push(t),Hn(t)}function An(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];zn(t);for(var l=o;l.circle&&mo(n-l.circle.x)<Oo&&mo(r-l.circle.cy)<Oo;)o=l.P,s.unshift(l),zn(l),l=o;s.unshift(l),In(l);for(var u=a;u.circle&&mo(n-u.circle.x)<Oo&&mo(r-u.circle.cy)<Oo;)a=u.N,s.push(u),zn(u),u=a;s.push(u),In(u);var c,f=s.length;for(c=1;f>c;++c)Fn((u=s[c]).edge,(l=s[c-1]).site,u.site,i);(u=s[f-1]).edge=Bn((l=s[0]).site,u.site,null,i),On(l),On(u)}function Cn(t){for(var e,n,r,i,o=t.x,a=t.y,s=ts._;s;)if((r=Tn(s,a)-o)>Oo)s=s.L;else{if(!((i=o-Sn(s,a))>Oo)){r>-Oo?(e=s.P,n=s):i>-Oo?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=En(t);if(ts.insert(e,l),e||n){if(e===n)return In(e),n=En(e.site),ts.insert(l,n),l.edge=n.edge=Bn(e.site,l.site),On(e),void On(n);if(!n)return void(l.edge=Bn(e.site,l.site));In(e),In(n);var u=e.site,c=u.x,f=u.y,d=t.x-c,h=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(d*v-h*g),y=d*d+h*h,_=g*g+v*v,b={x:(v*y-h*_)/m+c,y:(d*_-g*y)/m+f};Fn(n.edge,u,p,b),l.edge=Bn(u,t,null,b),n.edge=Bn(t,p,null,b),On(e),On(n)}}function Tn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,u=l-e;if(!u)return s;var c=s-r,f=1/o-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-o/2)))/f+r:(r+s)/2}function Sn(t,e){var n=t.N;if(n)return Tn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Mn(t){this.site=t,this.edges=[]}function Nn(t,e){return e.angle-t.angle}function Dn(){Hn(this),this.x=this.y=this.arc=this.site=this.cy=null}function On(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,f=2*(l*(v=o.y-s)-u*c);if(!(f>=-Io)){var d=l*l+u*u,h=c*c+v*v,p=(v*d-u*h)/f,g=(l*h-c*d)/f,v=g+s,m=is.pop()||new Dn;m.arc=t,m.site=i,m.x=p+a,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,_=ns._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}ns.insert(y,m),y||(es=m)}}}}function In(t){var e=t.circle;e&&(e.P||(es=e.N),ns.remove(e),is.push(e),Hn(e),t.circle=null)}function Pn(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,f=t.r,d=c.x,h=c.y,p=f.x,g=f.y,v=(d+p)/2;if(g===h){if(a>v||v>=s)return;if(d>p){if(o){if(o.y>=u)return}else o={x:v,y:l};n={x:v,y:u}}else{if(o){if(o.y<l)return}else o={x:v,y:u};n={x:v,y:l}}}else if(i=(h+g)/2-(r=(d-p)/(g-h))*v,-1>r||r>1)if(d>p){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(g>h){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Ln(t,e){this.l=t,this.r=e,this.a=this.b=null}function Bn(t,e,n,r){var i=new Ln(t,e);return Qa.push(i),n&&Fn(i,t,e,n),r&&Fn(i,e,t,r),Ja[t.i].edges.push(new Rn(i,t,e)),Ja[e.i].edges.push(new Rn(i,e,t)),i}function jn(t,e,n){var r=new Ln(t,null);return r.a=e,r.b=n,Qa.push(r),r}function Fn(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Rn(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function qn(){this._=null}function Hn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function $n(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Wn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Un(t){for(;t.L;)t=t.L;return t}function Vn(t,e){var n,r,i,o=t.sort(Yn).pop();for(Qa=[],Ja=new Array(t.length),ts=new qn,ns=new qn;;)if(i=es,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(Ja[o.i]=new Mn(o),Cn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;An(i.arc)}e&&(function(t){for(var e,n=Qa,r=De(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Pn(e=n[i],t)||!r(e)||mo(e.a.x-e.b.x)<Oo&&mo(e.a.y-e.b.y)<Oo)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,s,l,u,c,f=t[0][0],d=t[1][0],h=t[0][1],p=t[1][1],g=Ja,v=g.length;v--;)if((o=g[v])&&o.prepare())for(l=(s=o.edges).length,a=0;l>a;)r=(c=s[a].end()).x,i=c.y,n=(u=s[++a%l].start()).y,(mo(r-(e=u.x))>Oo||mo(i-n)>Oo)&&(s.splice(a,0,new Rn(jn(o.site,c,mo(r-f)<Oo&&p-i>Oo?{x:f,y:mo(e-f)<Oo?n:p}:mo(i-p)<Oo&&d-r>Oo?{x:mo(n-p)<Oo?e:d,y:p}:mo(r-d)<Oo&&i-h>Oo?{x:d,y:mo(e-d)<Oo?n:h}:mo(i-h)<Oo&&r-f>Oo?{x:mo(n-h)<Oo?e:f,y:h}:null),o.site,null)),++l)}(e));var a={cells:Ja,edges:Qa};return ts=ns=Qa=Ja=null,a}function Yn(t,e){return e.y-t.y||e.x-t.x}function Xn(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function Gn(t){return t.x}function Kn(t){return t.y}function Zn(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=e.nodes;l[0]&&Zn(t,l[0],n,r,a,s),l[1]&&Zn(t,l[1],a,r,i,s),l[2]&&Zn(t,l[2],n,s,a,o),l[3]&&Zn(t,l[3],a,s,i,o)}}function Qn(t,e,n,r,i,o,a){var s,l=1/0;return function t(u,c,f,d,h){if(!(c>o||f>a||r>d||i>h)){if(p=u.point){var p,g=e-u.x,v=n-u.y,m=g*g+v*v;if(l>m){var y=Math.sqrt(l=m);r=e-y,i=n-y,o=e+y,a=n+y,s=p}}for(var _=u.nodes,b=.5*(c+d),w=.5*(f+h),x=(n>=w)<<1|e>=b,k=x+4;k>x;++x)if(u=_[3&x])switch(3&x){case 0:t(u,c,f,b,w);break;case 1:t(u,b,f,d,w);break;case 2:t(u,c,w,b,h);break;case 3:t(u,b,w,d,h)}}}(t,r,i,o,a),s}function Jn(t,e){t=ao.rgb(t),e=ao.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+yt(Math.round(n+o*t))+yt(Math.round(r+a*t))+yt(Math.round(i+s*t))}}function tr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=rr(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function er(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function nr(t,e){var n,r,i,o=as.lastIndex=ss.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=as.exec(t))&&(r=ss.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:er(n,r)})),o=ss.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;e>r;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function rr(t,e){for(var n,r=ao.interpolators.length;--r>=0&&!(n=ao.interpolators[r](t,e)););return n}function ir(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(rr(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function or(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function ar(t){return function(e){return 1-t(1-e)}}function sr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function lr(t){return t*t}function ur(t){return t*t*t}function cr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function fr(t){return 1-Math.cos(t*jo)}function dr(t){return Math.pow(2,10*(t-1))}function hr(t){return 1-Math.sqrt(1-t*t)}function pr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function gr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function vr(t){var e=[t.a,t.b],n=[t.c,t.d],r=yr(e),i=mr(e,n),o=yr(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ro,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ro:0}function mr(t,e){return t[0]*e[0]+t[1]*e[1]}function yr(t){var e=Math.sqrt(mr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function _r(t){return t.length?t.pop()+",":""}function br(t,e){var n=[],r=[];return t=ao.transform(t),e=ao.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:er(t[0],e[0])},{i:i-2,x:er(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(_r(n)+"rotate(",null,")")-2,x:er(t,e)})):e&&n.push(_r(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(_r(n)+"skewX(",null,")")-2,x:er(t,e)}):e&&n.push(_r(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(_r(n)+"scale(",null,",",null,")");r.push({i:i-4,x:er(t[0],e[0])},{i:i-2,x:er(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(_r(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function wr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function xr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function kr(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;for(var n=Er(t),r=Er(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)i.push(e=e.parent);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Er(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function zr(t){t.fixed|=2}function Ar(t){t.fixed&=-7}function Cr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Tr(t){t.fixed&=-5}function Sr(t,e){return ao.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Pr,t}function Mr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Nr(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Dr(t){return t.children}function Or(t){return t.value}function Ir(t,e){return e.value-t.value}function Pr(t){return ao.merge(t.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}function Lr(t){return t.x}function Br(t){return t.y}function jr(t,e,n){t.y0=e,t.y=n}function Fr(t){return ao.range(t.length)}function Rr(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function qr(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Hr(t){return t.reduce($r,0)}function $r(t,e){return t+e[1]}function Wr(t,e){return Ur(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ur(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Vr(t){return[ao.min(t),ao.max(t)]}function Yr(t,e){return t.value-e.value}function Xr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Gr(t,e){t._pack_next=e,e._pack_prev=t}function Kr(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Zr(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,f=-1/0,d=1/0,h=-1/0;if(n.forEach(Qr),(r=n[0]).x=-r.r,r.y=0,e(r),u>1&&((i=n[1]).x=i.r,i.y=0,e(i),u>2))for(ti(r,i,o=n[2]),e(o),Xr(r,o),r._pack_prev=o,Xr(o,i),i=r._pack_next,a=3;u>a;a++){ti(r,i,o=n[a]);var p=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(Kr(s,o)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!Kr(l,o);l=l._pack_prev,v++);p?(v>g||g==v&&i.r<r.r?Gr(r,i=s):Gr(r=l,i),a--):(Xr(r,o),i=o,e(o))}var m=(c+f)/2,y=(d+h)/2,_=0;for(a=0;u>a;a++)(o=n[a]).x-=m,o.y-=y,_=Math.max(_,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=_,n.forEach(Jr)}}function Qr(t){t._pack_next=t._pack_prev=t}function Jr(t){delete t._pack_next,delete t._pack_prev}function ti(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function ei(t,e){return t.parent==e.parent?1:2}function ni(t){var e=t.children;return e.length?e[0]:t.t}function ri(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function ii(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function oi(t,e,n){return t.a.parent===e.parent?t.a:n}function ai(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function si(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function li(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function ui(t){return t.rangeExtent?t.rangeExtent():li(t.range())}function ci(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function fi(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function di(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=ao.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function hi(t,e){return ao.rebind(t,e,"range","rangeRound","interpolate","clamp")}function pi(t,e){return fi(t,function(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ys}(gi(t,e)[2]))}function gi(t,e){null==e&&(e=10);var n=li(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function vi(t,e){return ao.range.apply(ao,gi(t,e))}function mi(t,e,n){var r=gi(t,e);if(n){var i=aa.exec(n);if(i.shift(),"s"===i[8]){var o=ao.formatPrefix(Math.max(mo(r[0]),mo(r[1])));return i[7]||(i[7]="."+yi(o.scale(r[2]))),i[8]="f",n=ao.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+function(t,e){var n=yi(e[2]);return t in _s?Math.abs(n-yi(Math.max(mo(e[0]),mo(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+yi(r[2])+"f";return ao.format(n)}function yi(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function _i(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function bi(){return 0}function wi(t){return t.innerRadius}function xi(t){return t.outerRadius}function ki(t){return t.startAngle}function Ei(t){return t.endAngle}function zi(t){return t&&t.padAngle}function Ai(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ci(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,f=t[1]+u,d=e[0]+l,h=e[1]+u,p=(c+d)/2,g=(f+h)/2,v=d-c,m=h-f,y=v*v+m*m,_=n-r,b=c*h-d*f,w=(0>m?-1:1)*Math.sqrt(Math.max(0,_*_*y-b*b)),x=(b*m-v*w)/y,k=(-b*v-m*w)/y,E=(b*m+v*w)/y,z=(-b*v+m*w)/y,A=x-p,C=k-g,T=E-p,S=z-g;return A*A+C*C>T*T+S*S&&(x=E,k=z),[[x-l,k-u],[x*n/_,k*n/_]]}function Ti(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],f=-1,d=e.length,h=Et(n),p=Et(r);++f<d;)i.call(this,l=e[f],f)?c.push([+h.call(this,l,f),+p.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=vn,r=mn,i=ke,o=Si,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Cs.get(t)||Si).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function Si(t){return t.length>1?t.join("L"):t+"Z"}function Mi(t){return t.join("L")+"Z"}function Ni(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Di(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Oi(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Si(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-(s=e[1])[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)r+="S"+((o=t[l])[0]-(s=e[u])[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Ii(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,r.push([i*((a=t[s])[0]-n[0]),i*(a[1]-n[1])]);return r}function Pi(t){if(t.length<3)return Si(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Li(Ms,a),",",Li(Ms,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Bi(l,a,s);return t.pop(),l.push("L",r),l.join("")}function Li(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Bi(t,e,n){t.push("C",Li(Ts,e),",",Li(Ts,n),",",Li(Ss,e),",",Li(Ss,n),",",Li(Ms,e),",",Li(Ms,n))}function ji(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Fi(t){for(var e,n,r,i=-1,o=t.length;++i<o;)r=(e=t[i])[1]-jo,e[0]=(n=e[0])*Math.cos(r),e[1]=n*Math.sin(r);return t}function Ri(t){function e(e){function l(){g.push("M",s(t(m),f),c,u(t(v.reverse()),f),"Z")}for(var d,h,p,g=[],v=[],m=[],y=-1,_=e.length,b=Et(n),w=Et(i),x=n===r?function(){return h}:Et(r),k=i===o?function(){return p}:Et(o);++y<_;)a.call(this,d=e[y],y)?(v.push([h=+b.call(this,d,y),p=+w.call(this,d,y)]),m.push([+x.call(this,d,y),+k.call(this,d,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=vn,r=vn,i=0,o=mn,a=ke,s=Si,l=s.key,u=s,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Cs.get(t)||Si).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(f=t,e):f},e}function qi(t){return t.radius}function Hi(t){return[t.x,t.y]}function $i(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-jo;return[n*Math.cos(r),n*Math.sin(r)]}}function Wi(){return 64}function Ui(){return"circle"}function Vi(t){var e=Math.sqrt(t/Po);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Yi(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Xi(t,e,n){return xo(t,Bs),t.namespace=e,t.id=n,t}function Gi(t,e,n,r){var i=t.id,o=t.namespace;return $(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Ki(t){return null==t&&(t=""),function(){this.textContent=t}}function Zi(t){return null==t?"__transition__":"__transition_"+t+"__"}function Qi(t,e,n,r,i){function o(n){var i=h.active,o=h[i];for(var u in o&&(o.timer.c=null,o.timer.t=NaN,--h.count,delete h[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index)),h)if(r>+u){var g=h[u];g.timer.c=null,g.timer.t=NaN,--h.count,delete h[u]}h.active=r,p.event&&p.event.start.call(t,t.__data__,e),d=[],p.tween.forEach((function(n,r){(r=r.call(t,t.__data__,e))&&d.push(r)})),f=p.ease,c=p.duration,l.c=a,Ct((function(){return l.c&&a(n||1)&&(l.c=null,l.t=NaN),1}),0,s)}function a(i){for(var o=i/c,a=f(o),s=d.length;s>0;)d[--s].call(t,a);return o>=1?(p.event&&p.event.end.call(t,t.__data__,e),--h.count?delete h[r]:delete t[n],1):void 0}var s,l,c,f,d,h=t[n]||(t[n]={active:0,count:0}),p=h[r];p||(l=Ct((function(t){var e=p.delay;return l.t=e+s,t>=e?o(t-e):void(l.c=o)}),0,s=i.time),p=h[r]={tween:new u,time:s,timer:l,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++h.count)}function Ji(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"}))}function to(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"}))}function eo(t){return t.toISOString()}function no(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=ao.bisect(Vs,r);return i==Vs.length?[e.year,gi(t.map((function(t){return t/31536e6})),n)[2]]:i?e[r/Vs[i-1]<Vs[i]/r?i-1:i]:[Gs,gi(t,n)[2]]}return r.invert=function(e){return ro(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(ro)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ro(+n+1),e).length}var o=r.domain(),a=li(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(fi(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ro(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ro(+e+1);return e}}:t))},r.ticks=function(t,e){var n=li(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],ro(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return no(t.copy(),e,n)},hi(r,t)}function ro(t){return new Date(t)}function io(t){return JSON.parse(t.responseText)}function oo(t){var e=uo.createRange();return e.selectNode(uo.body),e.createContextualFragment(t.responseText)}var ao={version:"3.5.8"},so=[].slice,lo=function(t){return so.call(t)},uo=this.document;if(uo)try{lo(uo.documentElement.childNodes)}catch(Qs){lo=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),uo)try{uo.createElement("DIV").style.setProperty("opacity",0,"")}catch(Js){var co=this.Element.prototype,fo=co.setAttribute,ho=co.setAttributeNS,po=this.CSSStyleDeclaration.prototype,go=po.setProperty;co.setAttribute=function(t,e){fo.call(this,t,e+"")},co.setAttributeNS=function(t,e,n){ho.call(this,t,e,n+"")},po.setProperty=function(t,e,n){go.call(this,t,e+"",n)}}ao.ascending=n,ao.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},ao.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},ao.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},ao.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ao.sum=function(t,e){var n,r=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)i(n=+t[a])&&(r+=n);else for(;++a<o;)i(n=+e.call(t,t[a],a))&&(r+=n);return r},ao.mean=function(t,e){var n,o=0,a=t.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)i(n=r(t[s]))?o+=n:--l;else for(;++s<a;)i(n=r(e.call(t,t[s],s)))?o+=n:--l;return l?o/l:void 0},ao.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},ao.median=function(t,e){var o,a=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)i(o=r(t[l]))&&a.push(o);else for(;++l<s;)i(o=r(e.call(t,t[l],l)))&&a.push(o);return a.length?ao.quantile(a.sort(n),.5):void 0},ao.variance=function(t,e){var n,o,a=t.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)i(n=r(t[u]))&&(l+=(o=n-s)*(n-(s+=o/++c)));else for(;++u<a;)i(n=r(e.call(t,t[u],u)))&&(l+=(o=n-s)*(n-(s+=o/++c)));return c>1?l/(c-1):void 0},ao.deviation=function(){var t=ao.variance.apply(this,arguments);return t?Math.sqrt(t):t};var vo=o(n);ao.bisectLeft=vo.left,ao.bisect=ao.bisectRight=vo.right,ao.bisector=function(t){return o(1===t.length?function(e,r){return n(t(e),r)}:t)},ao.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},ao.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ao.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(0>n?0:n);n>e;)i[e]=[r,r=t[++e]];return i},ao.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=ao.min(arguments,a),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},ao.transpose=function(t){return ao.zip.apply(ao,t)},ao.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ao.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ao.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ao.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var mo=Math.abs;ao.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=s(mo(n)),a=-1;if(t*=o,e*=o,0>(n*=o))for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},ao.map=function(t,e){var n=new u;if(t instanceof u)t.forEach((function(t,e){n.set(t,e)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var yo="__proto__",_o="\0";l(u,{has:d,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:h,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),ao.nest=function(){function t(o,a,s){if(s>=i.length)return n?n.call(r,a):e?a.sort(e):a;for(var l,c,f,d,h=-1,p=a.length,g=i[s++],v=new u;++h<p;)(d=v.get(l=g(c=a[h])))?d.push(c):v.set(l,[c]);return o?(c=o(),f=function(e,n){c.set(e,t(o,n,s))}):(c={},f=function(e,n){c[e]=t(o,n,s)}),v.forEach(f),c}var e,n,r={},i=[],o=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(e){return function t(e,n){if(n>=i.length)return e;var r=[],a=o[n++];return e.forEach((function(e,i){r.push({key:e,values:t(i,n)})})),a?r.sort((function(t,e){return a(t.key,e.key)})):r}(t(ao.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return o[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},ao.set=function(t){var e=new m;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},l(m,{has:d,add:function(t){return this._[c(t+="")]=!0,t},remove:h,values:p,size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),ao.behavior={},ao.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=_(t,e,e[n]);return t};var bo=["webkit","ms","moz","Moz","o","O"];ao.dispatch=function(){for(var t=new x,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=k(t);return t},x.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ao.event=null,ao.requote=function(t){return t.replace(wo,"\\$&")};var wo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xo={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ko=function(t,e){return e.querySelector(t)},Eo=function(t,e){return e.querySelectorAll(t)},zo=function(t,e){var n=t.matches||t[b(t,"matchesSelector")];return(zo=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(ko=function(t,e){return Sizzle(t,e)[0]||null},Eo=Sizzle,zo=Sizzle.matchesSelector),ao.selection=function(){return ao.select(uo.documentElement)};var Ao=ao.selection.prototype=[];Ao.select=function(t){var e,n,r,i,o=[];t=T(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return C(o)},Ao.selectAll=function(t){var e,n,r=[];t=S(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(e=lo(t.call(n,n.__data__,s,i))),e.parentNode=n);return C(r)};var Co={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ao.ns={prefix:Co,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Co.hasOwnProperty(n)?{space:Co[n],local:t}:t}},Ao.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=ao.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(M(e,t[e]));return this}return this.each(M(t,e))},Ao.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=O(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!D(t[i]).test(e))return!1;return!0}for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},Ao.style=function(t,n,r){var i=arguments.length;if(3>i){if("string"!=typeof t){for(r in 2>i&&(n=""),t)this.each(L(r,t[r],n));return this}if(2>i){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(L(t,n,r))},Ao.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(B(e,t[e]));return this}return this.each(B(t,e))},Ao.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ao.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ao.append=function(t){return t=j(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},Ao.insert=function(t,e){return t=j(t),e=T(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},Ao.remove=function(){return this.each(F)},Ao.data=function(t,e){function n(t,n){var r,i,o,a=t.length,f=n.length,d=Math.min(a,f),h=new Array(f),p=new Array(f),g=new Array(a);if(e){var v,m=new u,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(m.has(v=e.call(i,i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<f;)(i=m.get(v=e.call(n,o=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=o):p[r]=R(o),m.set(v,!0);for(r=-1;++r<a;)r in y&&!0!==m.get(y[r])&&(g[r]=t[r])}else{for(r=-1;++r<d;)o=n[r],(i=t[r])?(i.__data__=o,h[r]=i):p[r]=R(o);for(;f>r;++r)p[r]=R(n[r]);for(;a>r;++r)g[r]=t[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=t.parentNode,s.push(p),l.push(h),c.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=W([]),l=C([]),c=C([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return l.enter=function(){return s},l.exit=function(){return c},l},Ao.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ao.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=q(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return C(i)},Ao.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Ao.sort=function(t){t=H.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ao.each=function(t){return $(this,(function(e,n,r){t.call(e,e.__data__,n,r)}))},Ao.call=function(t){var e=lo(arguments);return t.apply(e[0]=this,e),this},Ao.empty=function(){return!this.node()},Ao.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Ao.size=function(){var t=0;return $(this,(function(){++t})),t};var To=[];ao.selection.enter=W,ao.selection.enter.prototype=To,To.append=Ao.append,To.empty=Ao.empty,To.node=Ao.node,To.call=Ao.call,To.size=Ao.size,To.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return C(a)},To.insert=function(t,e){return arguments.length<2&&(e=U(this)),Ao.insert.call(this,t,e)},ao.select=function(e){var n;return"string"==typeof e?(n=[ko(e,uo)]).parentNode=uo.documentElement:(n=[e]).parentNode=t(e),C([n])},ao.selectAll=function(t){var e;return"string"==typeof t?(e=lo(Eo(t,uo))).parentNode=uo.documentElement:(e=lo(t)).parentNode=null,C([e])},Ao.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){for(n in 2>r&&(e=!1),t)this.each(V(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(V(t,e,n))};var So=ao.map({mouseenter:"mouseover",mouseleave:"mouseout"});uo&&So.forEach((function(t){"on"+t in uo&&So.remove(t)}));var Mo,No=0;ao.mouse=function(t){return K(t,z())};var Do=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ao.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=z().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return K(t,r)},ao.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,e,n,o,a){return function(){function s(){var t,n,r=e(d,g);r&&(p|=(t=r[0]-_[0])|(n=r[1]-_[1]),_=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:t,dy:n}))}function l(){e(d,g)&&(m.on(o+v,null).on(a+v,null),y(p&&ao.event.target===f),h({type:"dragend"}))}var u,c=this,f=ao.event.target,d=c.parentNode,h=r.of(c,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=ao.select(n(f)).on(o+v,s).on(a+v,l),y=G(f),_=e(d,g);u=i?[(u=i.apply(c,arguments)).x-_[0],u.y-_[1]]:[0,0],h({type:"dragstart"})}}var r=A(t,"drag","dragstart","dragend"),i=null,o=n(w,ao.mouse,e,"mousemove","mouseup"),a=n(Z,ao.touch,y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},ao.rebind(t,r,"on")},ao.touches=function(t,e){return arguments.length<2&&(e=z().touches),e?lo(e).map((function(e){var n=K(t,e);return n.identifier=e.identifier,n})):[]};var Oo=1e-6,Io=Oo*Oo,Po=Math.PI,Lo=2*Po,Bo=Lo-Oo,jo=Po/2,Fo=Po/180,Ro=180/Po,qo=Math.SQRT2;ao.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[2],l=e[0]-i,u=e[1]-o,c=l*l+u*u;if(Io>c)r=Math.log(s/a)/qo,n=function(t){return[i+t*l,o+t*u,a*Math.exp(qo*t*r)]};else{var f=Math.sqrt(c),d=(s*s-a*a+4*c)/(2*a*2*f),h=(s*s-a*a-4*c)/(2*s*2*f),p=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(h*h+1)-h);r=(g-p)/qo,n=function(t){var e=t*r,n=nt(p),s=a/(2*f)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(qo*e+p)-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[i+s*l,o+s*u,a*n/nt(qo*e+p)]}}return n.duration=1e3*r,n},ao.behavior.zoom=function(){function t(t){t.on(M,c).on($o+".zoom",d).on("dblclick.zoom",h).on(O,f)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function r(t){k.k=Math.max(C[0],Math.min(C[1],t))}function i(t,e){e=function(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}(e),k.x+=t[0]-e[0],k.y+=t[1]-e[1]}function o(e,n,o,a){e.__chart__={x:k.x,y:k.y,k:k.k},r(Math.pow(2,a)),i(g=n,o),e=ao.select(e),T>0&&(e=e.transition().duration(T)),e.call(t.event)}function a(){b&&b.domain(_.range().map((function(t){return(t-k.x)/k.k})).map(_.invert)),x&&x.domain(w.range().map((function(t){return(t-k.y)/k.k})).map(w.invert))}function s(t){S++||t({type:"zoomstart"})}function l(t){a(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function u(t){--S||(t({type:"zoomend"}),g=null)}function c(){function t(){f=1,i(ao.mouse(o),h),l(c)}function r(){d.on(N,null).on(D,null),p(f&&ao.event.target===a),u(c)}var o=this,a=ao.event.target,c=I.of(o,arguments),f=0,d=ao.select(e(o)).on(N,t).on(D,r),h=n(ao.mouse(o)),p=G(o);Ls.call(o),s(c)}function f(){function t(){var t=ao.touches(p);return h=k.k,t.forEach((function(t){t.identifier in v&&(v[t.identifier]=n(t))})),t}function e(){var e=ao.event.target;ao.select(e).on(b,a).on(w,d),x.push(e);for(var n=ao.event.changedTouches,r=0,i=n.length;i>r;++r)v[n[r].identifier]=null;var s=t(),l=Date.now();if(1===s.length)500>l-y&&(o(p,u=s[0],v[u.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),E()),y=l;else if(s.length>1){var u,c=s[1],f=(u=s[0])[0]-c[0],h=u[1]-c[1];m=f*f+h*h}}function a(){var t,e,n,o,a=ao.touches(p);Ls.call(p);for(var s=0,u=a.length;u>s;++s,o=null)if(o=v[(n=a[s]).identifier]){if(e)break;t=n,e=o}if(o){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r(f*h)}y=null,i(t,e),l(g)}function d(){if(ao.event.touches.length){for(var e=ao.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var i in v)return void t()}ao.selectAll(x).on(_,null),z.on(M,c).on(O,f),A(),u(g)}var h,p=this,g=I.of(p,arguments),v={},m=0,_=".zoom-"+ao.event.changedTouches[0].identifier,b="touchmove"+_,w="touchend"+_,x=[],z=ao.select(p),A=G(p);e(),s(g),z.on(M,null).on(O,e)}function d(){var t=I.of(this,arguments);m?clearTimeout(m):(Ls.call(this),p=n(g=v||ao.mouse(this)),s(t)),m=setTimeout((function(){m=null,u(t)}),50),E(),r(Math.pow(2,.002*Ho())*k.k),i(g,p),l(t)}function h(){var t=ao.mouse(this),e=Math.log(k.k)/Math.LN2;o(this,t,n(t),ao.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var p,g,v,m,y,_,b,w,x,k={x:0,y:0,k:1},z=[960,500],C=Wo,T=250,S=0,M="mousedown.zoom",N="mousemove.zoom",D="mouseup.zoom",O="touchstart.zoom",I=A(t,"zoomstart","zoom","zoomend");return $o||($o="onwheel"in uo?(Ho=function(){return-ao.event.deltaY*(ao.event.deltaMode?120:1)},"wheel"):"onmousewheel"in uo?(Ho=function(){return ao.event.wheelDelta},"mousewheel"):(Ho=function(){return-ao.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each((function(){var t=I.of(this,arguments),e=k;Is?ao.select(this).transition().each("start.zoom",(function(){k=this.__chart__||{x:0,y:0,k:1},s(t)})).tween("zoom:zoom",(function(){var n=z[0],r=g?g[0]:n/2,i=g?g[1]:z[1]/2,o=ao.interpolateZoom([(r-k.x)/k.k,(i-k.y)/k.k,n/k.k],[(r-e.x)/e.k,(i-e.y)/e.k,n/e.k]);return function(e){var a=o(e),s=n/a[2];this.__chart__=k={x:r-a[0]*s,y:i-a[1]*s,k:s},l(t)}})).each("interrupt.zoom",(function(){u(t)})).each("end.zoom",(function(){u(t)})):(this.__chart__=k,s(t),l(t),u(t))}))},t.translate=function(e){return arguments.length?(k={x:+e[0],y:+e[1],k:k.k},a(),t):[k.x,k.y]},t.scale=function(e){return arguments.length?(k={x:k.x,y:k.y,k:null},r(+e),a(),t):k.k},t.scaleExtent=function(e){return arguments.length?(C=null==e?Wo:[+e[0],+e[1]],t):C},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(z=e&&[+e[0],+e[1]],t):z},t.duration=function(e){return arguments.length?(T=+e,t):T},t.x=function(e){return arguments.length?(b=e,_=e.copy(),k={x:0,y:0,k:1},t):b},t.y=function(e){return arguments.length?(x=e,w=e.copy(),k={x:0,y:0,k:1},t):x},ao.rebind(t,I,"on")};var Ho,$o,Wo=[0,1/0];ao.color=it,it.prototype.toString=function(){return this.rgb()+""},ao.hsl=ot;var Uo=ot.prototype=new it;Uo.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ot(this.h,this.s,this.l/t)},Uo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ot(this.h,this.s,t*this.l)},Uo.rgb=function(){return at(this.h,this.s,this.l)},ao.hcl=st;var Vo=st.prototype=new it;Vo.brighter=function(t){return new st(this.h,this.c,Math.min(100,this.l+Yo*(arguments.length?t:1)))},Vo.darker=function(t){return new st(this.h,this.c,Math.max(0,this.l-Yo*(arguments.length?t:1)))},Vo.rgb=function(){return lt(this.h,this.c,this.l).rgb()},ao.lab=ut;var Yo=18,Xo=.95047,Go=1,Ko=1.08883,Zo=ut.prototype=new it;Zo.brighter=function(t){return new ut(Math.min(100,this.l+Yo*(arguments.length?t:1)),this.a,this.b)},Zo.darker=function(t){return new ut(Math.max(0,this.l-Yo*(arguments.length?t:1)),this.a,this.b)},Zo.rgb=function(){return ct(this.l,this.a,this.b)},ao.rgb=gt;var Qo=gt.prototype=new it;Qo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new gt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new gt(i,i,i)},Qo.darker=function(t){return new gt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},Qo.hsl=function(){return bt(this.r,this.g,this.b)},Qo.toString=function(){return"#"+yt(this.r)+yt(this.g)+yt(this.b)};var Jo=ao.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Jo.forEach((function(t,e){Jo.set(t,vt(e))})),ao.functor=Et,ao.xhr=zt(y),ao.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=At(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,(function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i}))},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(r=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u>c;){var r,s=1;if(10===(r=t.charCodeAt(c++)))i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,o={},a={},s=[],u=t.length,c=0,f=0;(r=n())!==a;){for(var d=[];r!==o&&r!==a;)d.push(r),r=n();e&&null==(d=e(d,f++))||s.push(d)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new m,i=[];return e.forEach((function(t){for(var e in t)r.has(e)||i.push(r.add(e))})),[i.map(a).join(t)].concat(e.map((function(e){return i.map((function(t){return a(e[t])})).join(t)}))).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ao.csv=ao.dsv(",","text/csv"),ao.tsv=ao.dsv("\t","text/tab-separated-values");var ta,ea,na,ra,ia=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ao.timer=function(){Ct.apply(this,arguments)},ao.timer.flush=function(){St(),Mt()},ao.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var oa=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map((function(t,e){var n=Math.pow(10,3*mo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}));ao.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=ao.round(t,Nt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),oa[8+n/3]};var aa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,sa=ao.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ao.round(t,Nt(t,e))).toFixed(Math.max(0,Math.min(20,Nt(t*(1+1e-15),e))))}}),la=ao.time={},ua=Date;It.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ca.setUTCDate.apply(this._,arguments)},setDay:function(){ca.setUTCDay.apply(this._,arguments)},setFullYear:function(){ca.setUTCFullYear.apply(this._,arguments)},setHours:function(){ca.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ca.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ca.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ca.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ca.setUTCSeconds.apply(this._,arguments)},setTime:function(){ca.setTime.apply(this._,arguments)}};var ca=Date.prototype;la.year=Pt((function(t){return(t=la.day(t)).setMonth(0,1),t}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t){return t.getFullYear()})),la.years=la.year.range,la.years.utc=la.year.utc.range,la.day=Pt((function(t){var e=new ua(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t){return t.getDate()-1})),la.days=la.day.range,la.days.utc=la.day.utc.range,la.dayOfYear=function(t){var e=la.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(t,e){e=7-e;var n=la[t]=Pt((function(t){return(t=la.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t}),(function(t,e){t.setDate(t.getDate()+7*Math.floor(e))}),(function(t){var n=la.year(t).getDay();return Math.floor((la.dayOfYear(t)+(n+e)%7)/7)-(n!==e)}));la[t+"s"]=n.range,la[t+"s"].utc=n.utc.range,la[t+"OfYear"]=function(t){var n=la.year(t).getDay();return Math.floor((la.dayOfYear(t)+(n+e)%7)/7)}})),la.week=la.sunday,la.weeks=la.sunday.range,la.weeks.utc=la.sunday.utc.range,la.weekOfYear=la.sundayOfYear;var fa={"-":"",_:" ",0:"0"},da=/^\s*\d+/,ha=/^%/;ao.locale=function(t){return{numberFormat:Dt(t),timeFormat:Bt(t)}};var pa=ao.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ao.format=pa.numberFormat,ao.geo={},re.prototype={s:0,t:0,add:function(t){ie(t,this.t,ga),ie(ga.s,this.s,this),this.s?this.t+=ga.t:this.s=ga.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ga=new re;ao.geo.stream=function(t,e){t&&va.hasOwnProperty(t.type)?va[t.type](t,e):oe(t,e)};var va={Feature:function(t,e){oe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)oe(n[r].geometry,e)}},ma={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){ae(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ae(n[r],e,0)},Polygon:function(t,e){se(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)se(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)oe(n[r],e)}};ao.geo.area=function(t){return ya=0,ao.geo.stream(t,ba),ya};var ya,_a=new re,ba={sphere:function(){ya+=4*Po},point:w,lineStart:w,lineEnd:w,polygonStart:function(){_a.reset(),ba.lineStart=le},polygonEnd:function(){var t=2*_a;ya+=0>t?4*Po+t:t,ba.lineStart=ba.lineEnd=ba.point=w}};ao.geo.bounds=function(){function t(t,e){_.push(b=[c=t,d=t]),f>e&&(f=e),e>h&&(h=e)}function e(e,n){var r=ue([e*Fo,n*Fo]);if(m){var i=fe(m,r),o=fe([i[1],-i[0],0],i);pe(o),o=ge(o);var a=e-p,l=a>0?1:-1,u=o[0]*Ro*l,g=mo(a)>180;if(g^(u>l*p&&l*e>u))(v=o[1]*Ro)>h&&(h=v);else if(g^((u=(u+360)%360-180)>l*p&&l*e>u)){var v;f>(v=-o[1]*Ro)&&(f=v)}else f>n&&(f=n),n>h&&(h=n);g?p>e?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e):d>=c?(c>e&&(c=e),e>d&&(d=e)):e>p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e)}else t(e,n);m=r,p=e}function n(){w.point=e}function r(){b[0]=c,b[1]=d,w.point=t,m=null}function i(t,n){if(m){var r=t-p;y+=mo(r)>180?r+(r>0?360:-360):r}else g=t,v=n;ba.point(t,n),e(t,n)}function o(){ba.lineStart()}function a(){i(g,v),ba.lineEnd(),mo(y)>Oo&&(c=-(d=180)),b[0]=c,b[1]=d,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,d,h,p,g,v,m,y,_,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,ba.polygonStart()},polygonEnd:function(){ba.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,0>_a?(c=-(d=180),f=-(h=90)):y>Oo?h=90:-Oo>y&&(f=-90),b[0]=c,b[1]=d}};return function(t){if(h=d=-(c=f=1/0),_=[],ao.geo.stream(t,w),o=_.length){_.sort(l);for(var e=1,n=[p=_[0]];o>e;++e)u((i=_[e])[0],p)||u(i[1],p)?(s(p[0],i[1])>s(p[0],p[1])&&(p[1]=i[1]),s(i[0],p[1])>s(p[0],p[1])&&(p[0]=i[0])):n.push(p=i);for(var r,i,o,a=-1/0,p=(e=0,n[o=n.length-1]);o>=e;p=i,++e)(r=s(p[1],(i=n[e])[0]))>a&&(a=r,c=i[0],d=p[1])}return _=b=null,1/0===c||1/0===f?[[NaN,NaN],[NaN,NaN]]:[[c,f],[d,h]]}}(),ao.geo.centroid=function(t){wa=xa=ka=Ea=za=Aa=Ca=Ta=Sa=Ma=Na=0,ao.geo.stream(t,Da);var e=Sa,n=Ma,r=Na,i=e*e+n*n+r*r;return Io>i&&(e=Aa,n=Ca,r=Ta,Oo>xa&&(e=ka,n=Ea,r=za),Io>(i=e*e+n*n+r*r))?[NaN,NaN]:[Math.atan2(n,e)*Ro,et(r/Math.sqrt(i))*Ro]};var wa,xa,ka,Ea,za,Aa,Ca,Ta,Sa,Ma,Na,Da={sphere:w,point:me,lineStart:_e,lineEnd:be,polygonStart:function(){Da.lineStart=we},polygonEnd:function(){Da.lineStart=_e}},Oa=Ce(ke,(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Po:-Po,l=mo(o-n);mo(l-Po)<Oo?(t.point(n,r=(r+a)/2>0?jo:-jo),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Po&&(mo(n-i)<Oo&&(n-=i*Oo),mo(o-s)<Oo&&(o-=s*Oo),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return mo(a)>Oo?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)r.point(-Po,i=n*jo),r.point(0,i),r.point(Po,i),r.point(Po,0),r.point(Po,-i),r.point(0,-i),r.point(-Po,-i),r.point(-Po,0),r.point(-Po,i);else if(mo(t[0]-e[0])>Oo){var o=t[0]<e[0]?Po:-Po;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Po,-Po/2]),Ia=1e9;ao.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=Oe(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(ao.geo.conicEqualArea=function(){return Ie(Pe)}).raw=Pe,ao.geo.albers=function(){return ao.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ao.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=ao.geo.albers(),a=ao.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ao.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Oo,f+.12*u+Oo],[c-.214*u-Oo,f+.234*u-Oo]]).stream(l).point,i=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Oo,f+.166*u+Oo],[c-.115*u-Oo,f+.234*u-Oo]]).stream(l).point,t},t.scale(1070)};var Pa,La,Ba,ja,Fa,Ra,qa={point:w,lineStart:w,lineEnd:w,polygonStart:function(){La=0,qa.lineStart=Le},polygonEnd:function(){qa.lineStart=qa.lineEnd=qa.point=w,Pa+=mo(La/2)}},Ha={point:function(t,e){Ba>t&&(Ba=t),t>Fa&&(Fa=t),ja>e&&(ja=e),e>Ra&&(Ra=e)},lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},$a={point:Fe,lineStart:Re,lineEnd:qe,polygonStart:function(){$a.lineStart=He},polygonEnd:function(){$a.point=Fe,$a.lineStart=Re,$a.lineEnd=qe}};ao.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),ao.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,s=4.5;return t.area=function(t){return Pa=0,ao.geo.stream(t,i(qa)),Pa},t.centroid=function(t){return ka=Ea=za=Aa=Ca=Ta=Sa=Ma=Na=0,ao.geo.stream(t,i($a)),Na?[Sa/Na,Ma/Na]:Ta?[Aa/Ta,Ca/Ta]:za?[ka/za,Ea/za]:[NaN,NaN]},t.bounds=function(t){return Fa=Ra=-(Ba=ja=1/0),ao.geo.stream(t,i(Ha)),[[Ba,ja],[Fa,Ra]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||Ue(t):y,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Be:new $e(t),"function"!=typeof s&&o.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(ao.geo.albersUsa()).context(null)},ao.geo.transform=function(t){return{stream:function(e){var n=new Ve(e);for(var r in t)n[r]=t[r];return n}}},Ve.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ao.geo.projection=Xe,ao.geo.projectionMutator=Ge,(ao.geo.equirectangular=function(){return Xe(Ze)}).raw=Ze.invert=Ze,ao.geo.rotation=function(t){function e(e){return(e=t(e[0]*Fo,e[1]*Fo))[0]*=Ro,e[1]*=Ro,e}return t=Je(t[0]%360*Fo,t[1]*Fo,t.length>2?t[2]*Fo:0),e.invert=function(e){return(e=t.invert(e[0]*Fo,e[1]*Fo))[0]*=Ro,e[1]*=Ro,e},e},Qe.invert=Ze,ao.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=Je(-t[0]*Fo,-t[1]*Fo,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Ro,t[1]*=Ro}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=rn((e=+r)*Fo,i*Fo),t):e},t.precision=function(r){return arguments.length?(n=rn(e*Fo,(i=+r)*Fo),t):i},t.angle(90)},ao.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Fo,i=t[1]*Fo,o=e[1]*Fo,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},ao.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ao.range(Math.ceil(o/v)*v,i,v).map(d).concat(ao.range(Math.ceil(u/m)*m,l,m).map(h)).concat(ao.range(Math.ceil(r/p)*p,n,p).filter((function(t){return mo(t%v)>Oo})).map(c)).concat(ao.range(Math.ceil(s/g)*g,a,g).filter((function(t){return mo(t%m)>Oo})).map(f))}var n,r,i,o,a,s,l,u,c,f,d,h,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return e().map((function(t){return{type:"LineString",coordinates:t}}))},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(l).slice(1),d(i).reverse().slice(1),h(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(u=+e[0][1],l=+e[1][1],(o=+e[0][0])>(i=+e[1][0])&&(e=o,o=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[i,l]]},t.minorExtent=function(e){return arguments.length?(s=+e[0][1],a=+e[1][1],(r=+e[0][0])>(n=+e[1][0])&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=an(s,a,90),f=sn(r,n,y),d=an(u,l,90),h=sn(o,i,y),t):y},t.majorExtent([[-180,-90+Oo],[180,90-Oo]]).minorExtent([[-180,-80-Oo],[180,80+Oo]])},ao.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=ln,i=un;return t.distance=function(){return ao.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},ao.geo.interpolate=function(t,e){return function(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),u=i*Math.sin(t),c=a*Math.cos(n),f=a*Math.sin(n),d=2*Math.asin(Math.sqrt(rt(r-e)+i*a*rt(n-t))),h=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*h,n=Math.sin(d-t)*h,r=n*l+e*c,i=n*u+e*f,a=n*o+e*s;return[Math.atan2(i,r)*Ro,Math.atan2(a,Math.sqrt(r*r+i*i))*Ro]}:function(){return[t*Ro,e*Ro]};return p.distance=d,p}(t[0]*Fo,t[1]*Fo,e[0]*Fo,e[1]*Fo)},ao.geo.length=function(t){return Wa=0,ao.geo.stream(t,Ua),Wa};var Wa,Ua={sphere:w,point:w,lineStart:function(){function t(t,i){var o=Math.sin(i*=Fo),a=Math.cos(i),s=mo((t*=Fo)-e),l=Math.cos(s);Wa+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),e=t,n=o,r=a}var e,n,r;Ua.point=function(i,o){e=i*Fo,n=Math.sin(o*=Fo),r=Math.cos(o),Ua.point=t},Ua.lineEnd=function(){Ua.point=Ua.lineEnd=w}},lineEnd:w,polygonStart:w,polygonEnd:w},Va=cn((function(t){return Math.sqrt(2/(1+t))}),(function(t){return 2*Math.asin(t/2)}));(ao.geo.azimuthalEqualArea=function(){return Xe(Va)}).raw=Va;var Ya=cn((function(t){var e=Math.acos(t);return e&&e/Math.sin(e)}),y);(ao.geo.azimuthalEquidistant=function(){return Xe(Ya)}).raw=Ya,(ao.geo.conicConformal=function(){return Ie(fn)}).raw=fn,(ao.geo.conicEquidistant=function(){return Ie(dn)}).raw=dn;var Xa=cn((function(t){return 1/t}),Math.atan);(ao.geo.gnomonic=function(){return Xe(Xa)}).raw=Xa,hn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-jo]},(ao.geo.mercator=function(){return pn(hn)}).raw=hn;var Ga=cn((function(){return 1}),Math.asin);(ao.geo.orthographic=function(){return Xe(Ga)}).raw=Ga;var Ka=cn((function(t){return 1/(1+t)}),(function(t){return 2*Math.atan(t)}));(ao.geo.stereographic=function(){return Xe(Ka)}).raw=Ka,gn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-jo]},(ao.geo.transverseMercator=function(){var t=pn(gn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=gn,ao.geom={},ao.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Et(n),o=Et(r),a=t.length,s=[],l=[];for(e=0;a>e;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(_n),e=0;a>e;e++)l.push([s[e][0],-s[e][1]]);var u=yn(s),c=yn(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],h=[];for(e=u.length-1;e>=0;--e)h.push(t[s[u[e]][2]]);for(e=+f;e<c.length-d;++e)h.push(t[s[c[e]][2]]);return h}var n=vn,r=mn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},ao.geom.polygon=function(t){return xo(t,Za),t};var Za=ao.geom.polygon.prototype=[];Za.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)i+=(t=r)[1]*(r=this[e])[0]-t[0]*r[1];return.5*i},Za.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)o+=((e=s)[0]+(s=this[r])[0])*(n=e[0]*s[1]-s[0]*e[1]),a+=(e[1]+s[1])*n;return[o*t,a*t]},Za.clip=function(t){for(var e,n,r,i,o,a,s=xn(t),l=-1,u=this.length-xn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)bn(a=e[n],c,i)?(bn(o,c,i)||t.push(wn(o,a,c,i)),t.push(a)):bn(o,c,i)&&t.push(wn(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var Qa,Ja,ts,es,ns,rs=[],is=[];Mn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Nn),e.length},Rn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},qn.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Un(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&($n(this,n),n=(t=n).U),n.C=!1,r.C=!0,Wn(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Wn(this,n),n=(t=n).U),n.C=!1,r.C=!0,$n(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Un(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,$n(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Wn(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,$n(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Wn(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,$n(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Wn(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ao.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return Vn(n(t),s).cells.forEach((function(n,s){var l=n.edges,u=n.site;(e[s]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[]).point=t[s]})),e}function n(t){return t.map((function(t,e){return{x:Math.round(o(t,e)/Oo)*Oo,y:Math.round(a(t,e)/Oo)*Oo,i:e}}))}var r=vn,i=mn,o=r,a=i,s=os;return t?e(t):(e.links=function(t){return Vn(n(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},e.triangles=function(t){var e=[];return Vn(n(t)).cells.forEach((function(n,r){for(var i,o=n.site,a=n.edges.sort(Nn),s=-1,l=a.length,u=a[l-1].edge,c=u.l===o?u.r:u.l;++s<l;)i=c,c=(u=a[s].edge).l===o?u.r:u.l,r<i.i&&r<c.i&&Xn(o,i,c)<0&&e.push([t[r],t[i.i],t[c.i]])})),e},e.x=function(t){return arguments.length?(o=Et(r=t),e):r},e.y=function(t){return arguments.length?(a=Et(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?os:t,e):s===os?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===os?null:s&&s[1]},e)};var os=[[-1e6,-1e6],[1e6,1e6]];ao.geom.delaunay=function(t){return ao.geom.voronoi().triangles(t)},ao.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(mo(l-n)+mo(c-r)<.01)u(t,e,n,r,i,o,a,s);else{var f=t.point;t.x=t.y=t.point=null,u(t,f,l,c,i,o,a,s),u(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,i,o,a,s)}function u(t,e,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),f=n>=u,d=r>=c,h=d<<1|f;t.leaf=!1,f?i=u:s=u,d?a=c:l=c,o(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,a,s,l)}var c,f,d,h,p,g,v,m,y,_=Et(s),b=Et(l);if(null!=e)g=e,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],d=[],p=t.length,a)for(h=0;p>h;++h)(c=t[h]).x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),d.push(c.y);else for(h=0;p>h;++h){var w=+_(c=t[h],h),x=+b(c,h);g>w&&(g=w),v>x&&(v=x),w>m&&(m=w),x>y&&(y=x),f.push(w),d.push(x)}var k=m-g,E=y-v;k>E?y=v+k:m=g+E;var z={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){o(z,t,+_(t,++h),+b(t,h),g,v,m,y)},visit:function(t){Zn(t,z,g,v,m,y)},find:function(t){return Qn(z,t[0],t[1],g,v,m,y)}};if(h=-1,null==e){for(;++h<p;)o(z,t[h],f[h],d[h],g,v,m,y);--h}else t.forEach(z.add);return f=d=t=c=null,z}var a,s=vn,l=mn;return(a=arguments.length)?(s=Gn,l=Kn,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},ao.interpolateRgb=Jn,ao.interpolateObject=tr,ao.interpolateNumber=er,ao.interpolateString=nr;var as=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ss=new RegExp(as.source,"g");ao.interpolate=rr,ao.interpolators=[function(t,e){var n=typeof e;return("string"===n?Jo.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Jn:nr:e instanceof it?Jn:Array.isArray(e)?ir:"object"===n&&isNaN(e)?tr:er)(t,e)}],ao.interpolateArray=ir;var ls=function(){return y},us=ao.map({linear:ls,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return lr},cubic:function(){return ur},sin:function(){return fr},exp:function(){return dr},circle:function(){return hr},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Lo*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Lo/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return pr}}),cs=ao.map({in:y,out:ar,"in-out":sr,"out-in":function(t){return sr(ar(t))}});ao.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=us.get(n)||ls,or((r=cs.get(r)||y)(n.apply(null,so.call(arguments,1))))},ao.interpolateHcl=function(t,e){t=ao.hcl(t),e=ao.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return lt(n+o*t,r+a*t,i+s*t)+""}},ao.interpolateHsl=function(t,e){t=ao.hsl(t),e=ao.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return at(n+o*t,r+a*t,i+s*t)+""}},ao.interpolateLab=function(t,e){t=ao.lab(t),e=ao.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return ct(n+o*t,r+a*t,i+s*t)+""}},ao.interpolateRound=gr,ao.transform=function(t){var e=uo.createElementNS(ao.ns.prefix.svg,"g");return(ao.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new vr(n?n.matrix:fs)})(t)},vr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fs={a:1,b:0,c:0,d:1,e:0,f:0};ao.interpolateTransform=br,ao.layout={},ao.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(kr(t[n]));return e}},ao.layout.chord=function(){function t(){var t,u,f,d,h,p={},g=[],v=ao.range(o),m=[];for(n=[],r=[],t=0,d=-1;++d<o;){for(u=0,h=-1;++h<o;)u+=i[d][h];g.push(u),m.push(ao.range(o)),t+=u}for(a&&v.sort((function(t,e){return a(g[t],g[e])})),s&&m.forEach((function(t,e){t.sort((function(t,n){return s(i[e][t],i[e][n])}))})),t=(Lo-c*o)/t,u=0,d=-1;++d<o;){for(f=u,h=-1;++h<o;){var y=v[d],_=m[y][h],b=i[y][_],w=u,x=u+=b*t;p[y+"-"+_]={index:y,subindex:_,startAngle:w,endAngle:x,value:b}}r[y]={index:y,startAngle:f,endAngle:u,value:(u-f)/t},u+=c}for(d=-1;++d<o;)for(h=d-1;++h<o;){var k=p[d+"-"+h],E=p[h+"-"+d];(k.value||E.value)&&n.push(k.value<E.value?{source:E,target:k}:{source:k,target:E})}l&&e()}function e(){n.sort((function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,u):i},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=r=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},ao.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o,a=e.cx-t.x,s=e.cy-t.y,l=i-n,u=a*a+s*s;if(u>l*l/m)return g>u&&(t.px-=a*(o=e.charge/u),t.py-=s*o),!0;e.point&&u&&g>u&&(t.px-=a*(o=e.pointCharge/u),t.py-=s*o)}return!e.charge}}function e(t){t.px=ao.event.x,t.py=ao.event.y,l.resume()}var n,r,i,o,a,s,l={},u=ao.dispatch("start","tick","end"),c=[1,1],f=.9,d=ds,h=hs,p=-30,g=ps,v=.1,m=.64,_=[],b=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var e,r,l,d,h,g,m,y,w,x=_.length,k=b.length;for(r=0;k>r;++r)(g=(y=(h=(l=b[r]).target).x-(d=l.source).x)*y+(w=h.y-d.y)*w)&&(w*=g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,h.x-=(y*=g)*(m=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=w*m,d.x+=y*(m=1-m),d.y+=w*m);if((m=i*v)&&(y=c[0]/2,w=c[1]/2,r=-1,m))for(;++r<x;)(l=_[r]).x+=(y-l.x)*m,l.y+=(w-l.y)*m;if(p)for(function t(e,n,r){var i=0,o=0;if(e.charge=0,!e.leaf)for(var a,s=e.nodes,l=s.length,u=-1;++u<l;)null!=(a=s[u])&&(t(a,n,r),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*r[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,o+=c*e.point.y}e.cx=i/e.charge,e.cy=o/e.charge}(e=ao.geom.quadtree(_),i,s),r=-1;++r<x;)(l=_[r]).fixed||e.visit(t(l));for(r=-1;++r<x;)(l=_[r]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);u.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(_=t,l):_},l.links=function(t){return arguments.length?(b=t,l):b},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(m=t*t,l):Math.sqrt(m)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,u.start({type:"end",alpha:i=0})):t>0&&(u.start({type:"start",alpha:i=t}),n=Ct(l.tick)),l):i},l.start=function(){function t(t,r){if(!n){for(n=new Array(i),l=0;i>l;++l)n[l]=[];for(l=0;u>l;++l){var o=b[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[e],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][t]))return a;return Math.random()*r}var e,n,r,i=_.length,u=b.length,f=c[0],g=c[1];for(e=0;i>e;++e)(r=_[e]).index=e,r.weight=0;for(e=0;u>e;++e)"number"==typeof(r=b[e]).source&&(r.source=_[r.source]),"number"==typeof r.target&&(r.target=_[r.target]),++r.source.weight,++r.target.weight;for(e=0;i>e;++e)r=_[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof d)for(e=0;u>e;++e)o[e]=+d.call(this,b[e],e);else for(e=0;u>e;++e)o[e]=d;if(a=[],"function"==typeof h)for(e=0;u>e;++e)a[e]=+h.call(this,b[e],e);else for(e=0;u>e;++e)a[e]=h;if(s=[],"function"==typeof p)for(e=0;i>e;++e)s[e]=+p.call(this,_[e],e);else for(e=0;i>e;++e)s[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=ao.behavior.drag().origin(y).on("dragstart.force",zr).on("drag.force",e).on("dragend.force",Ar)),arguments.length?void this.on("mouseover.force",Cr).on("mouseout.force",Tr).call(r):r},ao.rebind(l,u,"on")};var ds=20,hs=1,ps=1/0;ao.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return Nr(i,(function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)})),s}var e=Ir,n=Dr,r=Or;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(Mr(e,(function(t){t.children&&(t.value=0)})),Nr(e,(function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)}))),e},t},ao.layout.partition=function(){function t(t,r){var i=e.call(this,t,r);return function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=e.value?r/e.value:0;++u<a;)t(s=o[u],n,l=s.value*r,i),n+=l}}(i[0],0,n[0],n[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}(i[0])),i}var e=ao.layout.hierarchy(),n=[1,1];return t.size=function(e){return arguments.length?(n=e,t):n},Sr(t,e)},ao.layout.pie=function(){function t(a){var s,l=a.length,u=a.map((function(n,r){return+e.call(t,n,r)})),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),h=d*(0>f?-1:1),p=ao.sum(u),g=p?(f-l*h)/p:0,v=ao.range(l),m=[];return null!=n&&v.sort(n===gs?function(t,e){return u[e]-u[t]}:function(t,e){return n(a[t],a[e])}),v.forEach((function(t){m[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*g+h,padAngle:d}})),m}var e=Number,n=gs,r=0,i=Lo,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var gs={};ao.layout.stack=function(){function t(s,l){if(!(d=s.length))return s;var u=s.map((function(n,r){return e.call(t,n,r)})),c=u.map((function(e){return e.map((function(e,n){return[o.call(t,e,n),a.call(t,e,n)]}))})),f=n.call(t,c,l);u=ao.permute(u,f),c=ao.permute(c,f);var d,h,p,g,v=r.call(t,c,l),m=u[0].length;for(p=0;m>p;++p)for(i.call(t,u[0][p],g=v[p],c[0][p][1]),h=1;d>h;++h)i.call(t,u[h][p],g+=c[h-1][p][1],c[h][p][1]);return s}var e=y,n=Fr,r=Rr,i=jr,o=Lr,a=Br;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:vs.get(e)||Fr,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:ms.get(e)||Rr,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var vs=ao.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(qr),o=t.map(Hr),a=ao.range(r).sort((function(t,e){return i[t]-i[e]})),s=0,l=0,u=[],c=[];for(e=0;r>e;++e)n=a[e],l>s?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return ao.range(t.length).reverse()},default:Fr}),ms=ao.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,u,c=t.length,f=t[0],d=f.length,h=[];for(h[0]=l=u=0,n=1;d>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,o=0,s=f[n][0]-f[n-1][0];c>e;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}h[n]=l-=i?o/i*s:0,u>l&&(u=l)}for(n=0;d>n;++n)h[n]-=u;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:Rr});ao.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=r.call(this,u,o),f=i.call(this,c,u,o),d=(o=-1,u.length),h=f.length-1,p=e?1:1/d;++o<h;)(a=l[o]=[]).dx=f[o+1]-(a.x=f[o]),a.y=0;if(h>0)for(o=-1;++o<d;)(s=u[o])>=c[0]&&s<=c[1]&&((a=l[ao.bisect(f,s,1,h)-1]).y+=p,a.push(t[o]));return l}var e=!0,n=Number,r=Vr,i=Wr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Et(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return Ur(t,e)}:Et(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ao.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=i[0],u=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Nr(s,(function(t){t.r=+c(t.value)})),Nr(s,Zr),r){var f=r*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;Nr(s,(function(t){t.r+=f})),Nr(s,Zr),Nr(s,(function(t){t.r-=f}))}return function t(e,n,r,i){var o=e.children;if(e.x=n+=i*e.x,e.y=r+=i*e.y,e.r*=i,o)for(var a=-1,s=o.length;++a<s;)t(o[a],n,r,i)}(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=ao.layout.hierarchy().sort(Yr),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},Sr(t,n)},ao.layout.tree=function(){function t(t,l){var u=i.call(this,t,l),c=u[0],f=function(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(c);if(Nr(f,e),f.parent.m=-f.z,Mr(f,n),s)Mr(c,r);else{var d=c,h=c,p=c;Mr(c,(function(t){t.x<d.x&&(d=t),t.x>h.x&&(h=t),t.depth>p.depth&&(p=t)}));var g=o(d,h)/2-d.x,v=a[0]/(h.x+o(h,d)/2+g),m=a[1]/(p.depth||1);Mr(c,(function(t){t.x=(t.x+g)*v,t.y=t.depth*m}))}return u}function e(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var i=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+o(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+o(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,i=t,a=t,s=e,l=i.parent.children[0],u=i.m,c=a.m,f=s.m,d=l.m;s=ri(s),i=ni(i),s&&i;)l=ni(l),(a=ri(a)).a=t,(r=s.z+f-i.z-u+o(s._,i._))>0&&(ii(oi(s,t,n),t,r),u+=r,c+=r),f+=s.m,u+=i.m,d+=l.m,c+=a.m;s&&!ri(a)&&(a.t=s,a.m+=f-c),i&&!ni(l)&&(l.t=i,l.m+=u-d,n=t)}return n}(t,r,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=a[0],t.y=t.depth*a[1]}var i=ao.layout.hierarchy().sort(null).value(null),o=ei,a=[1,1],s=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(s=null==(a=e)?r:null,t):s?null:a},t.nodeSize=function(e){return arguments.length?(s=null==(a=e)?null:r,t):s?a:null},Sr(t,i)},ao.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;Nr(l,(function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(e),t.y=function(t){return 1+ao.max(t,(function(t){return t.y}))}(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)}));var c=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(l),f=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(l),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return Nr(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-d)/(h-d)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),s}var e=ao.layout.hierarchy().sort(null).value(null),n=ei,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},Sr(t,e)},ao.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=f(n),c=[],d=o.slice(),p=1/0,g="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==h||(s=r(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=f(e),s=r.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*p/r,r/(e*o*p)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)(i=t[o]).x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)(i=t[o]).x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),d&&(a=i),i}var a,s=ao.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=ai,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?ai(e):si(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return si(e,t)}return arguments.length?(f=null==(c=t)?ai:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o):c;var r},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(d=t,a=null,o):d},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(h=t+"",o):h},Sr(o,s)},ao.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ao.random.normal.apply(ao,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ao.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},ao.scale={};var ys={floor:y,ceil:y};ao.scale.linear=function(){return function t(e,n,r,i){function o(){var t=Math.min(e.length,n.length)>2?di:ci,o=i?xr:wr;return s=t(e,n,o,r),l=t(n,e,o,rr),a}function a(t){return s(t)}var s,l;return a.invert=function(t){return l(t)},a.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},a.range=function(t){return arguments.length?(n=t,o()):n},a.rangeRound=function(t){return a.range(t).interpolate(gr)},a.clamp=function(t){return arguments.length?(i=t,o()):i},a.interpolate=function(t){return arguments.length?(r=t,o()):r},a.ticks=function(t){return vi(e,t)},a.tickFormat=function(t,n){return mi(e,t,n)},a.nice=function(t){return pi(e,t),o()},a.copy=function(){return t(e,n,r,i)},o()}([0,1],[0,1],rr,!1)};var _s={s:1,g:1,p:1,r:1,e:1};ao.scale.log=function(){return function t(e,n,r,i){function o(t){return(r?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function a(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function s(t){return e(o(t))}return s.invert=function(t){return a(e.invert(t))},s.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((i=t.map(Number)).map(o)),s):i},s.base=function(t){return arguments.length?(n=+t,e.domain(i.map(o)),s):n},s.nice=function(){var t=fi(i.map(o),r?Math:ws);return e.domain(t),i=t.map(a),s},s.ticks=function(){var t=li(i),e=[],s=t[0],l=t[1],u=Math.floor(o(s)),c=Math.ceil(o(l)),f=n%1?2:n;if(isFinite(c-u)){if(r){for(;c>u;u++)for(var d=1;f>d;d++)e.push(a(u)*d);e.push(a(u))}else for(e.push(a(u));u++<c;)for(d=f-1;d>0;d--)e.push(a(u)*d);for(u=0;e[u]<s;u++);for(c=e.length;e[c-1]>l;c--);e=e.slice(u,c)}return e},s.tickFormat=function(t,e){if(!arguments.length)return bs;arguments.length<2?e=bs:"function"!=typeof e&&(e=ao.format(e));var n,i=Math.max(.1,t/s.ticks().length),l=r?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/a(l(o(t)+n))<=i?e(t):""}},s.copy=function(){return t(e.copy(),n,r,i)},hi(s,e)}(ao.scale.linear().domain([0,1]),10,!0,[1,10])};var bs=ao.format(".0e"),ws={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ao.scale.pow=function(){return function t(e,n,r){function i(t){return e(o(t))}var o=_i(n),a=_i(1/n);return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(o)),i):r},i.ticks=function(t){return vi(r,t)},i.tickFormat=function(t,e){return mi(r,t,e)},i.nice=function(t){return i.domain(pi(r,t))},i.exponent=function(t){return arguments.length?(o=_i(n=t),a=_i(1/n),e.domain(r.map(o)),i):n},i.copy=function(){return t(e.copy(),n,r)},hi(i,e)}(ao.scale.linear(),1,[0,1])},ao.scale.sqrt=function(){return ao.scale.pow().exponent(.5)},ao.scale.ordinal=function(){return function t(e,n){function r(t){return a[((o.get(t)||("range"===n.t?o.set(t,e.push(t)):NaN))-1)%a.length]}function i(t,n){return ao.range(e.length).map((function(e){return t+n*e}))}var o,a,s;return r.domain=function(t){if(!arguments.length)return e;e=[],o=new u;for(var i,a=-1,s=t.length;++a<s;)o.has(i=t[a])||o.set(i,e.push(i));return r[n.t].apply(r,n.a)},r.range=function(t){return arguments.length?(a=t,s=0,n={t:"range",a:arguments},r):a},r.rangePoints=function(t,o){arguments.length<2&&(o=0);var l=t[0],u=t[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+o);return a=i(l+c*o/2,c),s=0,n={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(t,o){arguments.length<2&&(o=0);var l=t[0],u=t[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+o)|0;return a=i(l+Math.round(c*o/2+(u-l-(e.length-1+o)*c)/2),c),s=0,n={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(t,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=t[1]<t[0],c=t[u-0],f=t[1-u],d=(f-c)/(e.length-o+2*l);return a=i(c+d*l,d),u&&a.reverse(),s=d*(1-o),n={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(t,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=t[1]<t[0],c=t[u-0],f=t[1-u],d=Math.floor((f-c)/(e.length-o+2*l));return a=i(c+Math.round((f-c-(e.length-o)*d)/2),d),u&&a.reverse(),s=Math.round(d*(1-o)),n={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return s},r.rangeExtent=function(){return li(n.a[0])},r.copy=function(){return t(e,n)},r.domain(e)}([],{t:"range",a:[[]]})},ao.scale.category10=function(){return ao.scale.ordinal().range(xs)},ao.scale.category20=function(){return ao.scale.ordinal().range(ks)},ao.scale.category20b=function(){return ao.scale.ordinal().range(Es)},ao.scale.category20c=function(){return ao.scale.ordinal().range(zs)};var xs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mt),ks=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mt),Es=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mt),zs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mt);ao.scale.quantile=function(){return function t(e,o){function a(){var t=0,n=o.length;for(l=[];++t<n;)l[t-1]=ao.quantile(e,t/n);return s}function s(t){return isNaN(t=+t)?void 0:o[ao.bisect(l,t)]}var l;return s.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),a()):e},s.range=function(t){return arguments.length?(o=t,a()):o},s.quantiles=function(){return l},s.invertExtent=function(t){return 0>(t=o.indexOf(t))?[NaN,NaN]:[t>0?l[t-1]:e[0],t<l.length?l[t]:e[e.length-1]]},s.copy=function(){return t(e,o)},a()}([],[])},ao.scale.quantize=function(){return function t(e,n,r){function i(t){return r[Math.max(0,Math.min(s,Math.floor(a*(t-e))))]}function o(){return a=r.length/(n-e),s=r.length-1,i}var a,s;return i.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],o()):[e,n]},i.range=function(t){return arguments.length?(r=t,o()):r},i.invertExtent=function(t){return[t=0>(t=r.indexOf(t))?NaN:t/a+e,t+1/a]},i.copy=function(){return t(e,n,r)},o()}(0,1,[0,1])},ao.scale.threshold=function(){return function t(e,n){function r(t){return t>=t?n[ao.bisect(e,t)]:void 0}return r.domain=function(t){return arguments.length?(e=t,r):e},r.range=function(t){return arguments.length?(n=t,r):n},r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},r.copy=function(){return t(e,n)},r}([.5],[0,1])},ao.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return vi(e,t)},n.tickFormat=function(t,n){return mi(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},ao.svg={},ao.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-jo,f=s.apply(this,arguments)-jo,d=Math.abs(f-c),h=c>f?0:1;if(t>u&&(p=u,u=t,t=p),d>=Bo)return e(u,h)+(t?e(t,1-h):"")+"Z";var p,g,v,m,y,_,b,w,x,k,E,z,A=0,C=0,T=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=o===As?Math.sqrt(t*t+u*u):+o.apply(this,arguments),h||(C*=-1),u&&(C=et(v/u*Math.sin(m))),t&&(A=et(v/t*Math.sin(m)))),u){y=u*Math.cos(c+C),_=u*Math.sin(c+C),b=u*Math.cos(f-C),w=u*Math.sin(f-C);var S=Math.abs(f-c-2*C)<=Po?0:1;if(C&&Ai(y,_,b,w)===h^S){var M=(c+f)/2;y=u*Math.cos(M),_=u*Math.sin(M),b=w=null}}else y=_=0;if(t){x=t*Math.cos(f-A),k=t*Math.sin(f-A),E=t*Math.cos(c+A),z=t*Math.sin(c+A);var N=Math.abs(c-f+2*A)<=Po?0:1;if(A&&Ai(x,k,E,z)===1-h^N){var D=(c+f)/2;x=t*Math.cos(D),k=t*Math.sin(D),E=z=null}}else x=k=0;if(d>Oo&&(p=Math.min(Math.abs(u-t)/2,+i.apply(this,arguments)))>.001){g=u>t^h?0:1;var O=p,I=p;if(Po>d){var P=null==E?[x,k]:null==b?[y,_]:wn([y,_],[E,z],[b,w],[x,k]),L=y-P[0],B=_-P[1],j=b-P[0],F=w-P[1],R=1/Math.sin(Math.acos((L*j+B*F)/(Math.sqrt(L*L+B*B)*Math.sqrt(j*j+F*F)))/2),q=Math.sqrt(P[0]*P[0]+P[1]*P[1]);I=Math.min(p,(t-q)/(R-1)),O=Math.min(p,(u-q)/(R+1))}if(null!=b){var H=Ci(null==E?[x,k]:[E,z],[y,_],u,O,h),$=Ci([b,w],[x,k],u,O,h);p===O?T.push("M",H[0],"A",O,",",O," 0 0,",g," ",H[1],"A",u,",",u," 0 ",1-h^Ai(H[1][0],H[1][1],$[1][0],$[1][1]),",",h," ",$[1],"A",O,",",O," 0 0,",g," ",$[0]):T.push("M",H[0],"A",O,",",O," 0 1,",g," ",$[0])}else T.push("M",y,",",_);if(null!=E){var W=Ci([y,_],[E,z],t,-I,h),U=Ci([x,k],null==b?[y,_]:[b,w],t,-I,h);p===I?T.push("L",U[0],"A",I,",",I," 0 0,",g," ",U[1],"A",t,",",t," 0 ",h^Ai(U[1][0],U[1][1],W[1][0],W[1][1]),",",1-h," ",W[1],"A",I,",",I," 0 0,",g," ",W[0]):T.push("L",U[0],"A",I,",",I," 0 0,",g," ",W[0])}else T.push("L",x,",",k)}else T.push("M",y,",",_),null!=b&&T.push("A",u,",",u," 0 ",S,",",h," ",b,",",w),T.push("L",x,",",k),null!=E&&T.push("A",t,",",t," 0 ",N,",",1-h," ",E,",",z);return T.push("Z"),T.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=wi,r=xi,i=bi,o=As,a=ki,s=Ei,l=zi;return t.innerRadius=function(e){return arguments.length?(n=Et(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Et(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Et(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==As?As:Et(e),t):o},t.startAngle=function(e){return arguments.length?(a=Et(e),t):a},t.endAngle=function(e){return arguments.length?(s=Et(e),t):s},t.padAngle=function(e){return arguments.length?(l=Et(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-jo;return[Math.cos(e)*t,Math.sin(e)*t]},t};var As="auto";ao.svg.line=function(){return Ti(y)};var Cs=ao.map({linear:Si,"linear-closed":Mi,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Ni,"step-after":Di,basis:Pi,"basis-open":function(t){if(t.length<4)return Si(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)o.push((e=t[r])[0]),a.push(e[1]);for(n.push(Li(Ms,o)+","+Li(Ms,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Bi(n,o,a);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)a.push((n=t[r%i])[0]),s.push(n[1]);for(e=[Li(Ms,a),",",Li(Ms,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Bi(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)(r=t[u])[0]=e*r[0]+(1-e)*(o+(i=u/n)*s),r[1]=e*r[1]+(1-e)*(a+i*l);return Pi(t)},cardinal:function(t,e){return t.length<3?Si(t):t[0]+Oi(t,Ii(t,e))},"cardinal-open":function(t,e){return t.length<4?Si(t):t[1]+Oi(t.slice(1,-1),Ii(t,e))},"cardinal-closed":function(t,e){return t.length<3?Mi(t):t[0]+Oi((t.push(t[0]),t),Ii([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Si(t):t[0]+Oi(t,function(t){for(var e,n,r,i,o=[],a=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=ji(i,o);++e<n;)r[e]=(a+(a=ji(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),s=-1,l=t.length-1;++s<l;)e=ji(t[s],t[s+1]),mo(e)<Oo?a[s]=a[s+1]=0:(i=(n=a[s]/e)*n+(r=a[s+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r);for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});Cs.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var Ts=[0,2/3,1/3,0],Ss=[0,1/3,2/3,0],Ms=[0,1/6,2/3,1/6];ao.svg.line.radial=function(){var t=Ti(Fi);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ni.reverse=Di,Di.reverse=Ni,ao.svg.area=function(){return Ri(y)},ao.svg.area.radial=function(){var t=Ri(Fi);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ao.svg.chord=function(){function t(t,a){var s=e(this,i,t,a),l=e(this,o,t,a);return"M"+s.p0+n(s.r,s.p1,s.a1-s.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(s,l)?r(0,0,0,s.p0):r(0,0,0,l.p0)+n(l.r,l.p1,l.a1-l.a0)+r(0,0,0,s.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=a.call(t,i,r),u=s.call(t,i,r)-jo,c=l.call(t,i,r)-jo;return{r:o,a0:u,a1:c,p0:[o*Math.cos(u),o*Math.sin(u)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Po)+",1 "+e}function r(t,e,n,r){return"Q 0,0 "+r}var i=ln,o=un,a=qi,s=ki,l=Ei;return t.radius=function(e){return arguments.length?(a=Et(e),t):a},t.source=function(e){return arguments.length?(i=Et(e),t):i},t.target=function(e){return arguments.length?(o=Et(e),t):o},t.startAngle=function(e){return arguments.length?(s=Et(e),t):s},t.endAngle=function(e){return arguments.length?(l=Et(e),t):l},t},ao.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=ln,n=un,r=Hi;return t.source=function(n){return arguments.length?(e=Et(n),t):e},t.target=function(e){return arguments.length?(n=Et(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},ao.svg.diagonal.radial=function(){var t=ao.svg.diagonal(),e=Hi,n=t.projection;return t.projection=function(t){return arguments.length?n($i(e=t)):e},t},ao.svg.symbol=function(){function t(t,r){return(Ns.get(e.call(this,t,r))||Vi)(n.call(this,t,r))}var e=Ui,n=Wi;return t.type=function(n){return arguments.length?(e=Et(n),t):e},t.size=function(e){return arguments.length?(n=Et(e),t):n},t};var Ns=ao.map({circle:Vi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Os)),n=e*Os;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ds),n=e*Ds/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ds),n=e*Ds/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ao.svg.symbolTypes=Ns.keys();var Ds=Math.sqrt(3),Os=Math.tan(30*Fo);Ao.transition=function(t){for(var e,n,r=Is||++js,i=Zi(t),o=[],a=Ps||{time:Date.now(),ease:cr,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Qi(n,c,i,r,a),e.push(n)}return Xi(o,i,r)},Ao.interrupt=function(t){return this.each(null==t?Ls:Yi(Zi(t)))};var Is,Ps,Ls=Yi(Zi()),Bs=[],js=0;Bs.call=Ao.call,Bs.empty=Ao.empty,Bs.node=Ao.node,Bs.size=Ao.size,ao.transition=function(t,e){return t&&t.transition?Is?t.transition(e):t:ao.selection().transition(t)},ao.transition.prototype=Bs,Bs.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=T(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Qi(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return Xi(a,o,i)},Bs.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=S(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[s][a],n=t.call(r,r.__data__,d,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Qi(i,p,s,a,o),e.push(i)}return Xi(l,s,a)},Bs.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=q(t));for(var i=0,o=this.length;o>i;i++){r.push(e=[]);for(var a,s=0,l=(a=this[i]).length;l>s;s++)(n=a[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return Xi(r,this.namespace,this.id)},Bs.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):$(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Bs.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?br:rr,s=ao.ns.qualify(t);return Gi(this,"attr."+t,e,s.local?o:i)},Bs.attrTween=function(t,e){var n=ao.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},Bs.style=function(t,n,r){function i(){this.style.removeProperty(t)}function o(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=rr(o,n),function(e){this.style.setProperty(t,i(e),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){for(r in 2>a&&(n=""),t)this.style(r,t[r],n);return this}r=""}return Gi(this,"style."+t,n,o)},Bs.styleTween=function(t,n,r){function i(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Bs.text=function(t){return Gi(this,"text",t,Ki)},Bs.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},Bs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ao.ease.apply(ao,arguments)),$(this,(function(r){r[n][e].ease=t})))},Bs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:$(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Bs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:$(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Bs.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ps,o=Is;try{Is=n,$(this,(function(e,i,o){Ps=e[r][n],t.call(e,e.__data__,i,o)}))}finally{Ps=i,Is=o}}else $(this,(function(i){var o=i[r][n];(o.event||(o.event=ao.dispatch("start","end","interrupt"))).on(t,e)}));return this},Bs.transition=function(){for(var t,e,n,r=this.id,i=++js,o=this.namespace,a=[],s=0,l=this.length;l>s;s++){a.push(t=[]);for(var u,c=0,f=(u=this[s]).length;f>c;c++)(e=u[c])&&Qi(e,c,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Xi(a,o,i)},ao.svg.axis=function(){function t(t){t.each((function(){var t,u=ao.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,h=null==e?f.tickFormat?f.tickFormat.apply(f,s):y:e,p=u.selectAll(".tick").data(d,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Oo),v=ao.transition(p.exit()).style("opacity",Oo).remove(),m=ao.transition(p.order()).style("opacity",1),_=Math.max(i,0)+a,b=ui(f),w=u.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),ao.transition(w));g.append("line"),g.append("text");var k,E,z,A,C=g.select("line"),T=m.select("line"),S=p.select("text").text(h),M=g.select("text"),N=m.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Ji,k="x",z="y",E="x2",A="y2",S.attr("dy",0>D?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+D*o+"V0H"+b[1]+"V"+D*o)):(t=to,k="y",z="x",E="y2",A="x2",S.attr("dy",".32em").style("text-anchor",0>D?"end":"start"),x.attr("d","M"+D*o+","+b[0]+"H0V"+b[1]+"H"+D*o)),C.attr(A,D*i),M.attr(z,D*_),T.attr(E,0).attr(A,D*i),N.attr(k,0).attr(z,D*_),f.rangeBand){var O=f,I=O.rangeBand()/2;c=f=function(t){return O(t)+I}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),m.call(t,f,f)}))}var e,n=ao.scale.linear(),r=Fs,i=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Rs?e+"":Fs,t):r},t.ticks=function(){return arguments.length?(s=lo(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Fs="bottom",Rs={top:1,right:1,bottom:1,left:1};ao.svg.brush=function(){function t(e){e.each((function(){var e=ao.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return qs[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,f=ao.transition(e),d=ao.transition(a);u&&(l=ui(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=ui(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)}))}function n(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+f[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"}))}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){32==ao.event.keyCode&&(S||(_=null,N[0]-=f[1],N[1]-=d[1],S=2),E())}function g(){32==ao.event.keyCode&&2==S&&(N[0]+=f[1],N[1]+=d[1],S=0,E())}function v(){var t=ao.mouse(w),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),S||(ao.event.altKey?(_||(_=[(f[0]+f[1])/2,(d[0]+d[1])/2]),N[0]=f[+(t[0]<_[0])],N[1]=d[+(t[1]<_[1])]):_=null),C&&m(t,u,0)&&(r(z),e=!0),T&&m(t,c,1)&&(i(z),e=!0),e&&(n(z),k({type:"brush",mode:S?"move":"resize"}))}function m(t,e,n){var r,i,o=ui(e),l=o[0],u=o[1],c=N[n],g=n?d:f,v=g[1]-g[0];return S&&(l-=c,u-=v+c),r=(n?p:h)?Math.max(l,Math.min(u,t[n])):t[n],S?i=(r+=c)+v:(_&&(c=Math.max(l,Math.min(u,2*_[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:a=null,g[0]=r,g[1]=i,!0):void 0}function y(){v(),z.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ao.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),k({type:"brushend"})}var _,b,w=this,x=ao.select(ao.event.target),k=l.of(w,arguments),z=ao.select(w),A=x.datum(),C=!/^(n|s)$/.test(A)&&u,T=!/^(e|w)$/.test(A)&&c,S=x.classed("extent"),M=G(w),N=ao.mouse(w),D=ao.select(e(w)).on("keydown.brush",o).on("keyup.brush",g);if(ao.event.changedTouches?D.on("touchmove.brush",v).on("touchend.brush",y):D.on("mousemove.brush",v).on("mouseup.brush",y),z.interrupt().selectAll("*").interrupt(),S)N[0]=f[0]-N[0],N[1]=d[0]-N[1];else if(A){var O=+/w$/.test(A),I=+/^n/.test(A);b=[f[1-O]-N[0],d[1-I]-N[1]],N[0]=f[O],N[1]=d[I]}else ao.event.altKey&&(_=N.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null),ao.select("body").style("cursor",x.style("cursor")),k({type:"brushstart"}),v()}var a,s,l=A(t,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],d=[0,0],h=!0,p=!0,g=Hs[0];return t.event=function(t){t.each((function(){var t=l.of(this,arguments),e={x:f,y:d,i:a,j:s},n=this.__chart__||e;this.__chart__=e,Is?ao.select(this).transition().each("start.brush",(function(){a=n.i,s=n.j,f=n.x,d=n.y,t({type:"brushstart"})})).tween("brush:brush",(function(){var n=ir(f,e.x),r=ir(d,e.y);return a=s=null,function(i){f=e.x=n(i),d=e.y=r(i),t({type:"brush",mode:"resize"})}})).each("end.brush",(function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})})):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))}))},t.x=function(e){return arguments.length?(g=Hs[!(u=e)<<1|!c],t):u},t.y=function(e){return arguments.length?(g=Hs[!u<<1|!(c=e)],t):c},t.clamp=function(e){return arguments.length?(u&&c?(h=!!e[0],p=!!e[1]):u?h=!!e:c&&(p=!!e),t):u&&c?[h,p]:u?h:c?p:null},t.extent=function(e){var n,r,i,o,l;return arguments.length?(u&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(l=n,n=r,r=l),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=e[0],o=e[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(l=i,i=o,o=l),(i!=d[0]||o!=d[1])&&(d=[i,o])),t):(u&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=d[0],o=d[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],d=[0,0],a=s=null),t},t.empty=function(){return!!u&&f[0]==f[1]||!!c&&d[0]==d[1]},ao.rebind(t,l,"on")};var qs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$s=la.format=pa.timeFormat,Ws=$s.utc,Us=Ws("%Y-%m-%dT%H:%M:%S.%LZ");$s.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eo:Us,eo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},eo.toString=Us.toString,la.second=Pt((function(t){return new ua(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))}),(function(t){return t.getSeconds()})),la.seconds=la.second.range,la.seconds.utc=la.second.utc.range,la.minute=Pt((function(t){return new ua(6e4*Math.floor(t/6e4))}),(function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))}),(function(t){return t.getMinutes()})),la.minutes=la.minute.range,la.minutes.utc=la.minute.utc.range,la.hour=Pt((function(t){var e=t.getTimezoneOffset()/60;return new ua(36e5*(Math.floor(t/36e5-e)+e))}),(function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))}),(function(t){return t.getHours()})),la.hours=la.hour.range,la.hours.utc=la.hour.utc.range,la.month=Pt((function(t){return(t=la.day(t)).setDate(1),t}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t){return t.getMonth()})),la.months=la.month.range,la.months.utc=la.month.utc.range;var Vs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ys=[[la.second,1],[la.second,5],[la.second,15],[la.second,30],[la.minute,1],[la.minute,5],[la.minute,15],[la.minute,30],[la.hour,1],[la.hour,3],[la.hour,6],[la.hour,12],[la.day,1],[la.day,2],[la.week,1],[la.month,1],[la.month,3],[la.year,1]],Xs=$s.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",ke]]),Gs={range:function(t,e,n){return ao.range(Math.ceil(t/n)*n,+e,n).map(ro)},floor:y,ceil:y};Ys.year=la.year,la.scale=function(){return no(ao.scale.linear(),Ys,Xs)};var Ks=Ys.map((function(t){return[t[0].utc,t[1]]})),Zs=Ws.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",ke]]);Ks.year=la.year.utc,la.scale.utc=function(){return no(ao.scale.linear(),Ks,Zs)},ao.text=zt((function(t){return t.responseText})),ao.json=function(t,e){return At(t,"application/json",io,e)},ao.html=function(t,e){return At(t,"text/html",oo,e)},ao.xml=zt((function(t){return t.responseXML})),"function"==typeof define&&define.amd?define(this.d3=ao):"object"==typeof module&&module.exports?module.exports=ao:this.d3=ao}(),function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},e=t._,n=Array.prototype,r=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,o=n.push,a=n.slice,s=r.toString,l=r.hasOwnProperty,u=Array.isArray,c=Object.keys,f=Object.create,d=function(){},h=function(t){return t instanceof h?t:this instanceof h?void(this._wrapped=t):new h(t)};"undefined"==typeof exports||exports.nodeType?t._=h:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=h),exports._=h),h.VERSION="1.9.1";var p,g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},v=function(t,e,n){return h.iteratee!==p?h.iteratee(t,e):null==t?h.identity:h.isFunction(t)?g(t,e,n):h.isObject(t)&&!h.isArray(t)?h.matcher(t):h.property(t)};h.iteratee=p=function(t,e){return v(t,e,1/0)};var m=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},y=function(t){if(!h.isObject(t))return{};if(f)return f(t);d.prototype=t;var e=new d;return d.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},b=function(t,e){return null!=t&&l.call(t,e)},w=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},x=Math.pow(2,53)-1,k=_("length"),E=function(t){var e=k(t);return"number"==typeof e&&0<=e&&e<=x};h.each=h.forEach=function(t,e,n){var r,i;if(e=g(e,n),E(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=h.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},h.map=h.collect=function(t,e,n){e=v(e,n);for(var r=!E(t)&&h.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o};var z=function(t){return function(e,n,r,i){var o=3<=arguments.length;return function(e,n,r,i){var o=!E(e)&&h.keys(e),a=(o||e).length,s=0<t?0:a-1;for(i||(r=e[o?o[s]:s],s+=t);0<=s&&s<a;s+=t){var l=o?o[s]:s;r=n(r,e[l],l,e)}return r}(e,g(n,i,4),r,o)}};h.reduce=h.foldl=h.inject=z(1),h.reduceRight=h.foldr=z(-1),h.find=h.detect=function(t,e,n){var r=(E(t)?h.findIndex:h.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},h.filter=h.select=function(t,e,n){var r=[];return e=v(e,n),h.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},h.reject=function(t,e,n){return h.filter(t,h.negate(v(e)),n)},h.every=h.all=function(t,e,n){e=v(e,n);for(var r=!E(t)&&h.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},h.some=h.any=function(t,e,n){e=v(e,n);for(var r=!E(t)&&h.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},h.contains=h.includes=h.include=function(t,e,n,r){return E(t)||(t=h.values(t)),("number"!=typeof n||r)&&(n=0),0<=h.indexOf(t,e,n)},h.invoke=m((function(t,e,n){var r,i;return h.isFunction(e)?i=e:h.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),h.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=w(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),h.pluck=function(t,e){return h.map(t,h.property(e))},h.where=function(t,e){return h.filter(t,h.matcher(e))},h.findWhere=function(t,e){return h.find(t,h.matcher(e))},h.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=E(t)?t:h.values(t)).length;s<l;s++)null!=(r=t[s])&&o<r&&(o=r);else e=v(e,n),h.each(t,(function(t,n,r){i=e(t,n,r),(a<i||i===-1/0&&o===-1/0)&&(o=t,a=i)}));return o},h.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=E(t)?t:h.values(t)).length;s<l;s++)null!=(r=t[s])&&r<o&&(o=r);else e=v(e,n),h.each(t,(function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)}));return o},h.shuffle=function(t){return h.sample(t,1/0)},h.sample=function(t,e,n){if(null==e||n)return E(t)||(t=h.values(t)),t[h.random(t.length-1)];var r=E(t)?h.clone(t):h.values(t),i=k(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var s=h.random(a,o),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,e)},h.sortBy=function(t,e,n){var r=0;return e=v(e,n),h.pluck(h.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var A=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=v(r,i),h.each(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}};h.groupBy=A((function(t,e,n){b(t,n)?t[n].push(e):t[n]=[e]})),h.indexBy=A((function(t,e,n){t[n]=e})),h.countBy=A((function(t,e,n){b(t,n)?t[n]++:t[n]=1}));var C=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;h.toArray=function(t){return t?h.isArray(t)?a.call(t):h.isString(t)?t.match(C):E(t)?h.map(t,h.identity):h.values(t):[]},h.size=function(t){return null==t?0:E(t)?t.length:h.keys(t).length},h.partition=A((function(t,e,n){t[n?0:1].push(e)}),!0),h.first=h.head=h.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:h.initial(t,t.length-e)},h.initial=function(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},h.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:h.rest(t,Math.max(0,t.length-e))},h.rest=h.tail=h.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},h.compact=function(t){return h.filter(t,Boolean)};var T=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,a=k(t);o<a;o++){var s=t[o];if(E(s)&&(h.isArray(s)||h.isArguments(s)))if(e)for(var l=0,u=s.length;l<u;)r[i++]=s[l++];else T(s,e,n,r),i=r.length;else n||(r[i++]=s)}return r};h.flatten=function(t,e){return T(t,e,!1)},h.without=m((function(t,e){return h.difference(t,e)})),h.uniq=h.unique=function(t,e,n,r){h.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=v(n,r));for(var i=[],o=[],a=0,s=k(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e&&!n?(a&&o===u||i.push(l),o=u):n?h.contains(o,u)||(o.push(u),i.push(l)):h.contains(i,l)||i.push(l)}return i},h.union=m((function(t){return h.uniq(T(t,!0,!0))})),h.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=k(t);r<i;r++){var o=t[r];if(!h.contains(e,o)){var a;for(a=1;a<n&&h.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},h.difference=m((function(t,e){return e=T(e,!0,!0),h.filter(t,(function(t){return!h.contains(e,t)}))})),h.unzip=function(t){for(var e=t&&h.max(t,k).length||0,n=Array(e),r=0;r<e;r++)n[r]=h.pluck(t,r);return n},h.zip=m(h.unzip),h.object=function(t,e){for(var n={},r=0,i=k(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var S=function(t){return function(e,n,r){n=v(n,r);for(var i=k(e),o=0<t?0:i-1;0<=o&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};h.findIndex=S(1),h.findLastIndex=S(-1),h.sortedIndex=function(t,e,n,r){for(var i=(n=v(n,r,1))(e),o=0,a=k(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o};var M=function(t,e,n){return function(r,i,o){var s=0,l=k(r);if("number"==typeof o)0<t?s=0<=o?o:Math.max(o+l,s):l=0<=o?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return r[o=n(r,i)]===i?o:-1;if(i!=i)return 0<=(o=e(a.call(r,s,l),h.isNaN))?o+s:-1;for(o=0<t?s:l-1;0<=o&&o<l;o+=t)if(r[o]===i)return o;return-1}};h.indexOf=M(1,h.findIndex,h.sortedIndex),h.lastIndexOf=M(-1,h.findLastIndex),h.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},h.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(a.call(t,r,r+=e));return n};var N=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=y(t.prototype),a=t.apply(o,i);return h.isObject(a)?a:o};h.bind=m((function(t,e,n){if(!h.isFunction(t))throw new TypeError("Bind must be called on a function");var r=m((function(i){return N(t,r,e,this,n.concat(i))}));return r})),h.partial=m((function(t,e){var n=h.partial.placeholder,r=function(){for(var i=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[i++]:e[s];for(;i<arguments.length;)a.push(arguments[i++]);return N(t,r,this,this,a)};return r})),(h.partial.placeholder=h).bindAll=m((function(t,e){var n=(e=T(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=h.bind(t[r],t)}})),h.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},h.delay=m((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),h.defer=h.partial(h.delay,h,1),h.throttle=function(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:h.now(),r=null,a=t.apply(i,o),r||(i=o=null)},u=function(){var u=h.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return i=this,o=arguments,c<=0||e<c?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u},h.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},a=m((function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,e),s&&(i=t.apply(this,a))}else r=h.delay(o,e,this,a);return i}));return a.cancel=function(){clearTimeout(r),r=null},a},h.wrap=function(t,e){return h.partial(e,t)},h.negate=function(t){return function(){return!t.apply(this,arguments)}},h.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},h.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},h.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},h.once=h.partial(h.before,2),h.restArguments=m;var D=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],I=function(t,e){var n=O.length,i=t.constructor,o=h.isFunction(i)&&i.prototype||r,a="constructor";for(b(t,a)&&!h.contains(e,a)&&e.push(a);n--;)(a=O[n])in t&&t[a]!==o[a]&&!h.contains(e,a)&&e.push(a)};h.keys=function(t){if(!h.isObject(t))return[];if(c)return c(t);var e=[];for(var n in t)b(t,n)&&e.push(n);return D&&I(t,e),e},h.allKeys=function(t){if(!h.isObject(t))return[];var e=[];for(var n in t)e.push(n);return D&&I(t,e),e},h.values=function(t){for(var e=h.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},h.mapObject=function(t,e,n){e=v(e,n);for(var r=h.keys(t),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=e(t[s],s,t)}return o},h.pairs=function(t){for(var e=h.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},h.invert=function(t){for(var e={},n=h.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},h.functions=h.methods=function(t){var e=[];for(var n in t)h.isFunction(t[n])&&e.push(n);return e.sort()};var P=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}};h.extend=P(h.allKeys),h.extendOwn=h.assign=P(h.keys),h.findKey=function(t,e,n){e=v(e,n);for(var r,i=h.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};var L,B,j=function(t,e,n){return e in n};h.pick=m((function(t,e){var n={},r=e[0];if(null==t)return n;h.isFunction(r)?(1<e.length&&(r=g(r,e[1])),e=h.allKeys(t)):(r=j,e=T(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],s=t[a];r(s,a,t)&&(n[a]=s)}return n})),h.omit=m((function(t,e){var n,r=e[0];return h.isFunction(r)?(r=h.negate(r),1<e.length&&(n=e[1])):(e=h.map(T(e,!1,!1),String),r=function(t,n){return!h.contains(e,n)}),h.pick(t,r,n)})),h.defaults=P(h.allKeys,!0),h.create=function(t,e){var n=y(t);return e&&h.extendOwn(n,e),n},h.clone=function(t){return h.isObject(t)?h.isArray(t)?t.slice():h.extend({},t):t},h.tap=function(t,e){return e(t),t},h.isMatch=function(t,e){var n=h.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},L=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&B(t,e,n,r)},B=function(t,e,n,r){t instanceof h&&(t=t._wrapped),e instanceof h&&(e=e._wrapped);var o=s.call(t);if(o!==s.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return i.valueOf.call(t)===i.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,u=e.constructor;if(l!==u&&!(h.isFunction(l)&&l instanceof l&&h.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),a){if((c=t.length)!==e.length)return!1;for(;c--;)if(!L(t[c],e[c],n,r))return!1}else{var f,d=h.keys(t);if(c=d.length,h.keys(e).length!==c)return!1;for(;c--;)if(!b(e,f=d[c])||!L(t[f],e[f],n,r))return!1}return n.pop(),r.pop(),!0},h.isEqual=function(t,e){return L(t,e)},h.isEmpty=function(t){return null==t||(E(t)&&(h.isArray(t)||h.isString(t)||h.isArguments(t))?0===t.length:0===h.keys(t).length)},h.isElement=function(t){return!(!t||1!==t.nodeType)},h.isArray=u||function(t){return"[object Array]"===s.call(t)},h.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},h.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){h["is"+t]=function(e){return s.call(e)==="[object "+t+"]"}})),h.isArguments(arguments)||(h.isArguments=function(t){return b(t,"callee")});var F=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof F&&(h.isFunction=function(t){return"function"==typeof t||!1}),h.isFinite=function(t){return!h.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},h.isNaN=function(t){return h.isNumber(t)&&isNaN(t)},h.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===s.call(t)},h.isNull=function(t){return null===t},h.isUndefined=function(t){return void 0===t},h.has=function(t,e){if(!h.isArray(e))return b(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!l.call(t,i))return!1;t=t[i]}return!!n},h.noConflict=function(){return t._=e,this},h.identity=function(t){return t},h.constant=function(t){return function(){return t}},h.noop=function(){},h.property=function(t){return h.isArray(t)?function(e){return w(e,t)}:_(t)},h.propertyOf=function(t){return null==t?function(){}:function(e){return h.isArray(e)?w(t,e):t[e]}},h.matcher=h.matches=function(t){return t=h.extendOwn({},t),function(e){return h.isMatch(e,t)}},h.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},h.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},h.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=h.invert(R),H=function(t){var e=function(e){return t[e]},n="(?:"+h.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(i,e):t}};h.escape=H(R),h.unescape=H(q),h.result=function(t,e,n){h.isArray(e)||(e=[e]);var r=e.length;if(!r)return h.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=h.isFunction(o)?o.call(t):o}return t};var $=0;h.uniqueId=function(t){var e=++$+"";return t?t+e:e},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(t){return"\\"+U[t]};h.template=function(t,e,n){!e&&n&&(e=n),e=h.defaults({},e,h.templateSettings);var r,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,(function(e,n,r,i,s){return a+=t.slice(o,s).replace(V,Y),o=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e})),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(t){return r.call(this,t,h)};return s.source="function("+(e.variable||"obj")+"){\n"+a+"}",s},h.chain=function(t){var e=h(t);return e._chain=!0,e};var X=function(t,e){return t._chain?h(e).chain():e};h.mixin=function(t){return h.each(h.functions(t),(function(e){var n=h[e]=t[e];h.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),X(this,n.apply(h,t))}})),h},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=n[t];h.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],X(this,n)}})),h.each(["concat","join","slice"],(function(t){var e=n[t];h.prototype[t]=function(){return X(this,e.apply(this._wrapped,arguments))}})),h.prototype.value=function(){return this._wrapped},h.prototype.valueOf=h.prototype.toJSON=h.prototype.value,h.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],(function(){return h}))}();var Clustergrammer=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){var r=n(1),i=n(10),o=n(89),a=n(154),s=n(197),l=n(237),u=n(240),c=n(241),f=n(242),d=n(243),h=n(146),p=n(245),g=n(248),v=n(252),m=n(155),y=n(100),_=n(145),b=n(250);d3.slider=n(254),n(256),n(257),n(261),t.exports=function(t){var e=r(t),w={};function x(t){a(t)}return w.params=i(e),w.config=e,w.params.zoom_behavior=d3.behavior.zoom().scaleExtent([1,w.params.viz.square_zoom*w.params.viz.zoom_ratio.x]).on("zoom",(function(){m(w)})),w.params.zoom_behavior.translate([w.params.viz.clust.margin.left,w.params.viz.clust.margin.top]),w.params.use_sidebar&&n(263)(w),o(w),w.update_view=p,w.resize_viz=function(){d3.select(w.params.viz.viz_svg).style("opacity",.5);var t=500;!0===this.params.viz.run_trans&&(t=2500),setTimeout(x,t,this)},w.play_demo=s,w.ini_demo=l,w.filter_viz_using_nodes=u,w.filter_viz_using_names=c,w.update_cats=function(t){f(this,t)},w.reset_cats=d,w.zoom=function(t,e,n){h(this,t,e,n)},w.save_matrix=g,w.brush_crop_matrix=v,w.d3_tip_custom=function(){return y},w.reorder=function(t,e){"sum"===e&&(e="rank"),"var"===e&&(e="rankvar"),_(this,e,t)},w.export_matrix_string=function(){return b(this.params)},w.update_view=function(t,e){p(this,t,e)},w}},function(t,e,n){var r=n(2),i=n(4),o=n(5),a=n(6),s=n(7),l=n(8),u=n(9),c=n(3);t.exports=function(t){var e=s(),n=r.extend(e,t);n.network_data=t.network_data,c.each(["row","col"],(function(t){var e=n.network_data[t+"_nodes"],r=u(e);e.forEach((function(e,i){e[t+"_index"]=i,r&&(n.super_labels=!0,n.super[t]=e.name.split(": ")[0],e.name=e.name.split(": ")[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")}))})),n.network_data.row_nodes_names=r.pluck(n.network_data.row_nodes,"name"),n.network_data.col_nodes_names=r.pluck(n.network_data.col_nodes,"name"),n.sim_mat=l(n);var f=o(n.network_data.views),d={};c.each(c.keys(f.possible_filters),(function(t){var e=a(f.filter_data,t);d[t]=e})),_.has(n.network_data,"views")&&n.network_data.views.forEach((function(t){c.each(c.keys(f.possible_filters),(function(e){_.has(t,e)||(t[e]=d[e])}));var e=t.nodes;c.each(["row","col"],(function(t){var n=u(e[t+"_nodes"]);e[t+"_nodes"].forEach((function(e,r){e[t+"_index"]=r,n&&(e.name=e.name.split(": ")[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")}))}))}));var h=n.network_data.col_nodes,p=n.network_data.row_nodes;if(_.has(n.network_data,"mat")){for(var g=[],v=n.network_data.mat,m={},y=0;y<v.length;y++)for(var b=0;b<v[0].length;b++)(m={}).source=y,m.target=b,m.value=v[y][b],g.push(m);n.network_data.links=g}if(n.network_data.links.forEach((function(t){t.name=p[t.source].name+"_"+h[t.target].name,t.row_name=p[t.source].name,t.col_name=h[t.target].name})),n.transpose){n.network_data=i(n.network_data);var w=t.row_label;t.row_label=t.col_label,t.col_label=w}r.is_undefined(t.row_label)||r.is_undefined(t.col_label)||(n.super_labels=!0,n.super={},n.super.row=t.row_label,n.super.col=t.col_label),n.inst_order={},!r.is_undefined(t.order)&&r.is_supported_order(t.order)?(n.inst_order.row=t.order,n.inst_order.col=t.order):(n.inst_order.row="clust",n.inst_order.col="clust"),!r.is_undefined(t.row_order)&&r.is_supported_order(t.row_order)&&(n.inst_order.col=t.row_order),!r.is_undefined(t.col_order)&&r.is_supported_order(t.col_order)&&(n.inst_order.row=t.col_order);var x=r.has(n.network_data.row_nodes[0],"group"),k=r.has(n.network_data.col_nodes[0],"group");return n.show_dendrogram=x||k,n.keep_orig=!!r.has(n.network_data.links[0],"value_orig"),n}},function(t,e,n){var r=n(3);t.exports={normal_name:function(t){return t.name.replace(/_/g," ").split("#")[0]},is_supported_order:function(t){return"ini"===t||"clust"===t||"rank_var"===t||"rank"===t||"class"===t||"alpha"==t},has:function(t,e){return null!=t&&hasOwnProperty.call(t,e)},property:function(t){return function(e){return null==e?void 0:e[t]}},pluck:function(t,e){if(window._){if("function"==typeof r.pluck)return r.pluck(t,e);if("function"==typeof r.map)return r.map(t,this.property(e))}else if(t.map&&"function"==typeof t.map)return t.map(this.property(e))},is_undefined:function(t){return void 0===t},extend:function(t,e){for(var n in t=t||{},e)t[n]="object"==typeof e[n]?this.extend(t[n],e[n]):e[n];return t}}},function(t,e,n){var r;(function(){var n=this,i=n._,o=Array.prototype,a=Object.prototype,s=Function.prototype,l=o.push,u=o.slice,c=a.toString,f=a.hasOwnProperty,d=Array.isArray,h=Object.keys,p=s.bind,g=Object.create,v=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};void 0!==t&&t.exports&&(e=t.exports=m),e._=m,m.VERSION="1.8.3";var y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?m.identity:m.isFunction(t)?y(t,e,n):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return _(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}},w=function(t){if(!m.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},x=function(t){return function(e){return null==e?void 0:e[t]}},k=Math.pow(2,53)-1,E=x("length"),z=function(t){var e=E(t);return"number"==typeof e&&e>=0&&e<=k};function A(t){function e(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=y(r,o,4);var a=!z(n)&&m.keys(n),s=(a||n).length,l=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[l]:l],l+=t),e(n,r,i,a,l,s)}}m.each=m.forEach=function(t,e,n){var r,i;if(e=y(e,n),z(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=_(e,n);for(var r=!z(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},m.reduce=m.foldl=m.inject=A(1),m.reduceRight=m.foldr=A(-1),m.find=m.detect=function(t,e,n){var r;if(void 0!==(r=z(t)?m.findIndex(t,e,n):m.findKey(t,e,n))&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=_(e,n),m.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},m.reject=function(t,e,n){return m.filter(t,m.negate(_(e)),n)},m.every=m.all=function(t,e,n){e=_(e,n);for(var r=!z(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=_(e,n);for(var r=!z(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return z(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=function(t,e){var n=u.call(arguments,2),r=m.isFunction(e);return m.map(t,(function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)}))},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e&&null!=t)for(var s=0,l=(t=z(t)?t:m.values(t)).length;s<l;s++)(r=t[s])>o&&(o=r);else e=_(e,n),m.each(t,(function(t,n,r){((i=e(t,n,r))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)}));return o},m.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t)for(var s=0,l=(t=z(t)?t:m.values(t)).length;s<l;s++)(r=t[s])<o&&(o=r);else e=_(e,n),m.each(t,(function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)}));return o},m.shuffle=function(t){for(var e,n=z(t)?t:m.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=m.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},m.sample=function(t,e,n){return null==e||n?(z(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=_(e,n),m.pluck(m.map(t,(function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var C=function(t){return function(e,n,r){var i={};return n=_(n,r),m.each(e,(function(r,o){var a=n(r,o,e);t(i,r,a)})),i}};m.groupBy=C((function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]})),m.indexBy=C((function(t,e,n){t[n]=e})),m.countBy=C((function(t,e,n){m.has(t,n)?t[n]++:t[n]=1})),m.toArray=function(t){return t?m.isArray(t)?u.call(t):z(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:z(t)?t.length:m.keys(t).length},m.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return m.each(t,(function(t,n,o){(e(t,n,o)?r:i).push(t)})),[r,i]},m.first=m.head=m.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var T=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=E(t);a<s;a++){var l=t[a];if(z(l)&&(m.isArray(l)||m.isArguments(l))){e||(l=T(l,e,n));var u=0,c=l.length;for(i.length+=c;u<c;)i[o++]=l[u++]}else n||(i[o++]=l)}return i};function S(t){return function(e,n,r){n=_(n,r);for(var i=E(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function M(t,e,n){return function(r,i,o){var a=0,s=E(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(u.call(r,a,s),m.isNaN))>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}m.flatten=function(t,e){return T(t,e,!1)},m.without=function(t){return m.difference(t,u.call(arguments,1))},m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=E(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&o===u||i.push(l),o=u):n?m.contains(o,u)||(o.push(u),i.push(l)):m.contains(i,l)||i.push(l)}return i},m.union=function(){return m.uniq(T(arguments,!0,!0))},m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=E(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){for(var a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=function(t){var e=T(arguments,!0,!0,1);return m.filter(t,(function(t){return!m.contains(e,t)}))},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,E).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.object=function(t,e){for(var n={},r=0,i=E(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},m.findIndex=S(1),m.findLastIndex=S(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=_(n,r,1))(e),o=0,a=E(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},m.indexOf=M(1,m.findIndex,m.sortedIndex),m.lastIndexOf=M(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var N=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=w(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,u.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),r=function(){return N(t,r,e,this,n.concat(u.call(arguments)))};return r},m.partial=function(t){var e=u.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===m?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return N(t,n,this,this,o)};return n},m.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return m.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=function(t,e){var n=u.call(arguments,2);return setTimeout((function(){return t.apply(null,n)}),e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:m.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var u=m.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return r=this,i=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,c)),o}},m.debounce=function(t,e,n){var r,i,o,a,s,l=function(){var u=m.now()-a;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=m.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(s=t.apply(o,i),o=i=null),s}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function I(t,e){var n=O.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||a,o="constructor";for(m.has(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=O[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)}m.keys=function(t){if(!m.isObject(t))return[];if(h)return h(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return D&&I(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return D&&I(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=e(t[r],r,t);return a},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=b(m.allKeys),m.extendOwn=m.assign=b(m.keys),m.findKey=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r},m.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;m.isFunction(e)?(i=m.allKeys(a),r=y(e,n)):(i=T(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var u=i[s],c=a[u];r(c,u,a)&&(o[u]=c)}return o},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(T(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(r,e)}}return m.pick(t,e,n)},m.defaults=b(m.allKeys,!0),m.create=function(t,e){var n=w(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var P=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=c.call(t);if(i!==c.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),o){if((l=t.length)!==e.length)return!1;for(;l--;)if(!P(t[l],e[l],n,r))return!1}else{var u,f=m.keys(t);if(l=f.length,m.keys(e).length!==l)return!1;for(;l--;)if(!m.has(e,u=f[l])||!P(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};m.isEqual=function(t,e){return P(t,e)},m.isEmpty=function(t){return null==t||(z(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===c.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],(function(t){m["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}})),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&f.call(t,e)},m.noConflict=function(){return n._=i,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=x,m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=y(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=m.invert(L),j=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(i,e):t}};m.escape=j(L),m.unescape=j(B),m.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),m.isFunction(r)?r.call(t):r};var F=0;m.uniqueId=function(t){var e=++F+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+q[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,(function(e,n,r,a,s){return o+=t.slice(i,s).replace(H,$),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e})),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(l){throw l.source=o,l}var s=function(t){return a.call(this,t,m)};return s.source="function("+(e.variable||"obj")+"){\n"+o+"}",s},m.chain=function(t){var e=m(t);return e._chain=!0,e};var W=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),(function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),W(this,n.apply(m,t))}}))},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=o[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],W(this,n)}})),m.each(["concat","join","slice"],(function(t){var e=o[t];m.prototype[t]=function(){return W(this,e.apply(this._wrapped,arguments))}})),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},void 0===(r=(function(){return m}).apply(e,[]))||(t.exports=r)}).call(this)},function(t,e,n){var r=n(2);t.exports=function(t){var e,n,i={};for(i.row_nodes=t.col_nodes,i.col_nodes=t.row_nodes,i.links=[],n=0;n<t.links.length;n++)(e={}).source=t.links[n].target,e.target=t.links[n].source,e.value=t.links[n].value,r.has(t.links[n],"highlight")&&(e.highlight=t.links[n].highlight),r.has(t.links[n],"value_up")&&(e.value_up=t.links[n].value_up),r.has(t.links[n],"value_dn")&&(e.value_dn=t.links[n].value_dn),r.has(t.links[n],"info")&&(e.info=t.links[n].info),i.links.push(e);return i}},function(t,e,n){var r=n(3);t.exports=function(t){var e={},n={};r.each(t,(function(t){var e=r.keys(t);r.each(e,(function(e){"nodes"!=e&&(_.has(n,e)||(n[e]=[]),n[e].push(t[e]),n[e]=r.uniq(n[e]))}))}));var i=r.keys(n);r.each(i,(function(t){var i=n[t],o=i.length,a="categorical";r.each(i,(function(t){"number"==typeof t&&(a="numerical")})),o>1&&(e[t]=a)}));var o={};return o.possible_filters=e,o.filter_data=n,o}},function(t,e){t.exports=function(t,e){var n=t[e].sort((function(t,e){return e-t}))[0];return String(n)}},function(t,e){t.exports=function(){return{row_label_scale:1,col_label_scale:1,super_labels:!1,super:{},show_label_tooltips:!0,show_tile_tooltips:!0,transpose:!1,tile_colors:["#FF0000","#1C86EE"],bar_colors:["#FF0000","#1C86EE"],cat_value_colors:["#2F4F4F","#9370DB"],outline_colors:["orange","black"],highlight_color:"#FFFF00",tile_title:!1,input_domain:0,opacity_scale:"linear",do_zoom:!0,is_zoom:0,is_slider_drag:!1,is_cropping:!1,background_color:"#FFFFFF",super_border_color:"#F5F5F5",outer_margins:{top:0,bottom:0,left:0,right:0},ini_expand:!1,grey_border_width:2,tile_click_hlight:!1,super_label_scale:1,make_tile_tooltip:function(t){return t.info},ini_view:null,requested_view:null,use_sidebar:!0,title:null,about:null,sidebar_width:160,sidebar_icons:!0,row_search_placeholder:"Row",buffer_width:10,show_sim_mat:!1,cat_colors:null,resize:!0,clamp_opacity:.85,expand_button:!0,max_allow_fs:20,dendro_filter:{row:!1,col:!1},cat_filter:{row:!1,col:!1},crop_filter_nodes:{row:!1,col:!1},row_tip_callback:null,col_tip_callback:null,tile_tip_callback:null,matrix_update_callback:null,cat_update_callback:null,dendro_callback:null,dendro_click_callback:null,new_row_cats:null,make_modals:!0,show_viz_border:!1}}},function(t,e,n){var r=n(3);t.exports=function(t){var e=!1;if(t.network_data.row_nodes_names.length==t.network_data.col_nodes_names.length){var n=t.network_data.row_nodes_names,i=t.network_data.col_nodes_names;e=!0,r.each(n,(function(t){var r=n.indexOf(t);t!==i[r]&&(e=!1)}))}return e&&(t.expand_button=!1),e}},function(t,e,n){var r=n(3);t.exports=function(t){var e=!0;return r.each(t,(function(t){String(t.name).indexOf(": ")<0&&(e=!1)})),e}},function(t,e,n){var r=n(11),i=n(65),o=n(66),a=n(5),s=n(67),l=n(88);t.exports=function(t){var e=$.extend(!0,{},t),n=e;if(n.inst_nodes={},n.inst_nodes.row_nodes=n.network_data.row_nodes,n.inst_nodes.col_nodes=n.network_data.col_nodes,null!==n.ini_view){var u=n.ini_view,c=a(n.network_data.views);n.viz={},n.viz.possible_filters=c.possible_filters,n.viz.filter_data=c.filter_data,u=o(n,u),n.network_data=r(e,n,u),n.requested_view=u}return(n=s(n)).use_sidebar&&(n.sidebar=i(n)),n.zoom_info=l(),n}},function(t,e,n){var r=n(12),i=n(64);t.exports=function(t,e,n){var o=t.network_data.views,a=!1;_.has(o[0],"enr_score_type")&&(a=!0);var s=i(e,o,n);a&&0==s.length&&(s=i(e,o,n={N_row_sum:"all",N_col_sum:"10"}));var l=s[0];return void 0!==l?r(t,l.nodes):t.network_data}},function(t,e,n){var r=n(2),i=n(13),o=n(3),a=i.create();a.import(n(26)),a.import(n(63)),t.exports=function(t,e){var n=t.network_data.links,i=r.pluck(e.row_nodes,"name"),s=r.pluck(e.col_nodes,"name"),l=a.matrix(a.zeros([e.row_nodes.length,e.col_nodes.length]));l=l.toArray();var u=o.filter(n,(function(t){var e=t.name.split("_")[0],n=t.name.split("_")[1],r=o.indexOf(i,e),a=o.indexOf(s,n);if(r>-1&a>-1)return t.source=r,t.target=a,l[r][a]=t.value,t})),c={};return c.row_nodes=e.row_nodes,c.row_nodes_names=i,c.col_nodes=e.col_nodes,c.col_nodes_names=s,c.links=u,c.all_links=n,c.mat=l,c.views=t.network_data.views,_.has(t.network_data,"cat_colors")&&(c.cat_colors=t.network_data.cat_colors),c}},function(t,e,n){t.exports=n(14)},function(t,e,n){var r=n(15).isFactory,i=n(17),o=n(21),a=n(23),s=n(25);e.create=function(t){if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var e=[],n=[],l=o.mixin({});l.type={},l.expression={transform:{},mathWithTransform:{}},l.typed=i.create(l.type);var u={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function c(t){if(!r(t))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var i,o=e.indexOf(t);return-1===o?(i=!0===t.math?t.factory(l.type,u,c,l.typed,l):t.factory(l.type,u,c,l.typed),e.push(t),n.push(i)):i=n[o],i}return l.import=c(a),l.config=c(s),l.expression.mathWithTransform.config=l.config,t&&l.config(t),l}},function(t,e,n){"use strict";var r=n(16);e.clone=function t(n){var i=typeof n;if("number"===i||"string"===i||"boolean"===i||null==n)return n;if("function"==typeof n.clone)return n.clone();if(Array.isArray(n))return n.map((function(e){return t(e)}));if(n instanceof Number)return new Number(n.valueOf());if(n instanceof String)return new String(n.valueOf());if(n instanceof Boolean)return new Boolean(n.valueOf());if(n instanceof Date)return new Date(n.valueOf());if(r(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return e.map(n,t)},e.map=function(t,n){var r={};for(var i in t)e.hasOwnProperty(t,i)&&(r[i]=n(t[i]));return r},e.extend=function(t,n){for(var r in n)e.hasOwnProperty(n,r)&&(t[r]=n[r]);return t},e.deepExtend=function t(n,r){if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(e.hasOwnProperty(r,i))if(r[i]&&r[i].constructor===Object)void 0===n[i]&&(n[i]={}),n[i].constructor===Object?t(n[i],r[i]):n[i]=r[i];else{if(Array.isArray(r[i]))throw new TypeError("Arrays are not supported by deepExtend");n[i]=r[i]}return n},e.deepEqual=function(t,n){var r,i,o;if(Array.isArray(t)){if(!Array.isArray(n))return!1;if(t.length!=n.length)return!1;for(i=0,o=t.length;i<o;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if(t instanceof Object){if(Array.isArray(n)||!(n instanceof Object))return!1;for(r in t)if(!e.deepEqual(t[r],n[r]))return!1;for(r in n)if(!e.deepEqual(t[r],n[r]))return!1;return!0}return typeof t==typeof n&&t==n},e.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(t){}return!1},e.lazy=function(t,n,r){if(e.canDefineProperty()){var i,o=!0;Object.defineProperty(t,n,{get:function(){return o&&(i=r(),o=!1),i},set:function(t){i=t,o=!1},configurable:!0,enumerable:!0})}else t[n]=r()},e.traverse=function(t,e){var n=t;if(e)for(var r=e.split("."),i=0;i<r.length;i++){var o=r[i];o in n||(n[o]={}),n=n[o]}return n},e.hasOwnProperty=function(t,e){return t&&Object.hasOwnProperty.call(t,e)},e.isFactory=function(t){return t&&"function"==typeof t.factory}},function(t,e){t.exports=function(t){return t&&t.constructor.prototype.isBigNumber||!1}},function(t,e,n){var r=n(18),i=n(19).digits,o=n(16),a=n(20),s=function(){return s=r.create,r};e.create=function(t){t.isNumber=function(t){return"number"==typeof t},t.isComplex=function(e){return t.Complex&&e instanceof t.Complex||!1},t.isBigNumber=o,t.isFraction=function(e){return t.Fraction&&e instanceof t.Fraction||!1},t.isUnit=function(t){return t&&t.constructor.prototype.isUnit||!1},t.isString=function(t){return"string"==typeof t},t.isArray=Array.isArray,t.isMatrix=a,t.isDenseMatrix=function(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix||!1},t.isSparseMatrix=function(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix||!1},t.isRange=function(t){return t&&t.constructor.prototype.isRange||!1},t.isIndex=function(t){return t&&t.constructor.prototype.isIndex||!1},t.isBoolean=function(t){return"boolean"==typeof t},t.isResultSet=function(t){return t&&t.constructor.prototype.isResultSet||!1},t.isHelp=function(t){return t&&t.constructor.prototype.isHelp||!1},t.isFunction=function(t){return"function"==typeof t},t.isDate=function(t){return t instanceof Date},t.isRegExp=function(t){return t instanceof RegExp},t.isObject=function(t){return"object"==typeof t},t.isNull=function(t){return null===t},t.isUndefined=function(t){return void 0===t},t.isAccessorNode=function(t){return t&&t.isAccessorNode&&t.constructor.prototype.isNode||!1},t.isArrayNode=function(t){return t&&t.isArrayNode&&t.constructor.prototype.isNode||!1},t.isAssignmentNode=function(t){return t&&t.isAssignmentNode&&t.constructor.prototype.isNode||!1},t.isBlockNode=function(t){return t&&t.isBlockNode&&t.constructor.prototype.isNode||!1},t.isConditionalNode=function(t){return t&&t.isConditionalNode&&t.constructor.prototype.isNode||!1},t.isConstantNode=function(t){return t&&t.isConstantNode&&t.constructor.prototype.isNode||!1},t.isFunctionAssignmentNode=function(t){return t&&t.isFunctionAssignmentNode&&t.constructor.prototype.isNode||!1},t.isFunctionNode=function(t){return t&&t.isFunctionNode&&t.constructor.prototype.isNode||!1},t.isIndexNode=function(t){return t&&t.isIndexNode&&t.constructor.prototype.isNode||!1},t.isNode=function(t){return t&&t.isNode&&t.constructor.prototype.isNode||!1},t.isObjectNode=function(t){return t&&t.isObjectNode&&t.constructor.prototype.isNode||!1},t.isOperatorNode=function(t){return t&&t.isOperatorNode&&t.constructor.prototype.isNode||!1},t.isParenthesisNode=function(t){return t&&t.isParenthesisNode&&t.constructor.prototype.isNode||!1},t.isRangeNode=function(t){return t&&t.isRangeNode&&t.constructor.prototype.isNode||!1},t.isSymbolNode=function(t){return t&&t.isSymbolNode&&t.constructor.prototype.isNode||!1},t.isChain=function(t){return t&&t.constructor.prototype.isChain||!1};var e=s();return e.types=[{name:"number",test:t.isNumber},{name:"Complex",test:t.isComplex},{name:"BigNumber",test:t.isBigNumber},{name:"Fraction",test:t.isFraction},{name:"Unit",test:t.isUnit},{name:"string",test:t.isString},{name:"Array",test:t.isArray},{name:"Matrix",test:t.isMatrix},{name:"DenseMatrix",test:t.isDenseMatrix},{name:"SparseMatrix",test:t.isSparseMatrix},{name:"Range",test:t.isRange},{name:"Index",test:t.isIndex},{name:"boolean",test:t.isBoolean},{name:"ResultSet",test:t.isResultSet},{name:"Help",test:t.isHelp},{name:"function",test:t.isFunction},{name:"Date",test:t.isDate},{name:"RegExp",test:t.isRegExp},{name:"Object",test:t.isObject},{name:"null",test:t.isNull},{name:"undefined",test:t.isUndefined},{name:"OperatorNode",test:t.isOperatorNode},{name:"ConstantNode",test:t.isConstantNode},{name:"SymbolNode",test:t.isSymbolNode},{name:"ParenthesisNode",test:t.isParenthesisNode},{name:"FunctionNode",test:t.isFunctionNode},{name:"FunctionAssignmentNode",test:t.isFunctionAssignmentNode},{name:"ArrayNode",test:t.isArrayNode},{name:"AssignmentNode",test:t.isAssignmentNode},{name:"BlockNode",test:t.isBlockNode},{name:"ConditionalNode",test:t.isConditionalNode},{name:"IndexNode",test:t.isIndexNode},{name:"RangeNode",test:t.isRangeNode},{name:"Node",test:t.isNode}],e.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(i(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t.BigNumber(e)}},{from:"number",to:"Complex",convert:function(e){return new t.Complex(e,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(e){return new t.Complex(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return new t.Complex(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){if(new t.Fraction(e).valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return new t.Fraction(e)}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(e){try{return new t.BigNumber(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){try{return new t.Fraction(e)}catch(n){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){try{return new t.Complex(e)}catch(n){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(e){return new t.BigNumber(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return new t.Fraction(+e)}},{from:"boolean",to:"string",convert:function(t){return+t}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new t.BigNumber(0)}},{from:"null",to:"Fraction",convert:function(){return new t.Fraction(0)}},{from:"Array",to:"Matrix",convert:function(e){return new t.DenseMatrix(e)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],e}},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){return function t(){function e(t){for(var e,n=0;n<v.types.length;n++){var r=v.types[n];if(r.name===t){e=r.test;break}}if(!e){var i;for(n=0;n<v.types.length;n++)if((r=v.types[n]).name.toLowerCase()==t.toLowerCase()){i=r.name;break}throw new Error('Unknown type "'+t+'"'+(i?'. Did you mean "'+i+'"?':""))}return e}function n(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(r.signatures&&""!=r.name)if(""==e)e=r.name;else if(e!=r.name){var i=new Error("Function names do not match (expected: "+e+", actual: "+r.name+")");throw i.data={actual:r.name,expected:e},i}}return e}function r(t,e,n,r,i){var o,a=u(r),s=i?i.split(","):null,l=t||"unnamed",f=s&&c(s,"any"),d={fn:t,index:n,actual:r,expected:s};o=s?e>n&&!f?"Unexpected type of argument in function "+l+" (expected: "+s.join(" or ")+", actual: "+a+", index: "+n+")":"Too few arguments in function "+l+" (expected: "+s.join(" or ")+", index: "+n+")":"Too many arguments in function "+l+" (expected: "+n+", actual: "+e+")";var h=new TypeError(o);return h.data=d,h}function i(t){this.name=t||"refs",this.categories={}}function o(t,e){if("string"==typeof t){var n=t.trim(),r="..."===n.substr(0,3);if(r&&(n=n.substr(3)),""===n)this.types=["any"];else{this.types=n.split("|");for(var i=0;i<this.types.length;i++)this.types[i]=this.types[i].trim()}}else{if(!Array.isArray(t)){if(t instanceof o)return t.clone();throw new Error("String or Array expected")}this.types=t}this.conversions=[],this.varArgs=r||e||!1,this.anyType=-1!==this.types.indexOf("any")}function a(t,e){var n;if("string"==typeof t)n=""!==t?t.split(","):[];else{if(!Array.isArray(t))throw new Error("string or Array expected");n=t}this.params=new Array(n.length),this.anyType=!1,this.varArgs=!1;for(var r=0;r<n.length;r++){var i=new o(n[r]);if(this.params[r]=i,i.anyType&&(this.anyType=!0),r===n.length-1)this.varArgs=i.varArgs;else if(i.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."')}this.fn=e}function s(t,e,n,r){this.path=t||[],this.param=t[t.length-1]||null,this.signature=e||null,this.childs=n||[],this.fallThrough=r||!1}function l(t,e){var n=new i,l=function(t){var e,n,r={},i=[];for(var o in t)if(t.hasOwnProperty(o)){if((e=new a(o,t[o])).ignore())continue;var s=e.expand();for(n=0;n<s.length;n++){var l=s[n],u=l.toString(),f=r[u];if(f){var d=a.compare(l,f);if(d<0)r[u]=l;else if(0===d)throw new Error('Signature "'+u+'" is defined twice')}else r[u]=l}}for(u in r)r.hasOwnProperty(u)&&i.push(r[u]);for(i.sort((function(t,e){return a.compare(t,e)})),n=0;n<i.length;n++)if((e=i[n]).varArgs)for(var h=e.params.length-1,p=e.params[h],g=0;g<p.types.length;){if(p.conversions[g])for(var v=p.types[g],m=0;m<i.length;m++){var y=i[m],_=y.params[h];if(y!==e&&_&&c(_.types,v)&&!_.conversions[h]){p.types.splice(g,1),p.conversions.splice(g,1),g--;break}}g++}return i}(e);if(0==l.length)throw new Error("No signatures provided");var u=function t(e,n,r){var i,a,l,u=n.length,f=[];for(i=0;i<e.length;i++)(a=e[i]).params.length!==u||l||(l=a),null!=a.params[u]&&f.push(a);f.sort((function(t,e){return o.compare(t.params[u],e.params[u])}));var d=[];for(i=0;i<f.length;i++){var h=(a=f[i]).params[u],p=d.filter((function(t){return t.param.overlapping(h)}))[0];if(p){if(p.param.varArgs)throw new Error('Conflicting types "'+p.param+'" and "'+h+'"');p.signatures.push(a)}else d.push({param:h,signatures:[a]})}var g=[];for(i=0;i<r.length;i++)r[i].paramsStartWith(n)&&g.push(r[i]);var v=!1;for(i=0;i<g.length;i++)if(!c(e,g[i])){v=!0;break}var m=new Array(d.length);for(i=0;i<d.length;i++){var y=d[i];m[i]=t(y.signatures,n.concat(y.param),g)}return new s(n,l,m,v)}(l,[],function(t){for(var e=[],n=0;n<t.length;n++)t[n].anyType&&e.push(t[n]);return e}(l)),f=[],d=(t||"").replace(/[^a-zA-Z0-9_$]/g,"_"),h=function(t){for(var e=[],n=0;n<t;n++)e[n]="arg"+n;return e}(function(t){for(var e=0,n=0;n<t.length;n++){var r=t[n].params.length;r>e&&(e=r)}return e}(l));f.push("function "+d+"("+h.join(", ")+") {"),f.push('  "use strict";'),f.push("  var name = "+JSON.stringify(t||"")+";"),f.push(u.toCode(n,"  ",!1)),f.push("}");var p=[n.toCode(),"return "+f.join("\n")].join("\n"),g=new Function(n.name,"createError",p)(n,r);return g.signatures=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.fn&&!r.hasConversions()&&(e[r.params.join(",")]=r.fn)}return e}(l),g}function u(t){for(var e,n=0;n<v.types.length;n++){var r=v.types[n];if("Object"===r.name)e=r;else if(r.test(t))return r.name}return e&&e.test(t)?e.name:"unknown"}function c(t,e){return-1!==t.indexOf(e)}function f(t){return t[t.length-1]}i.prototype.add=function(t,e){var n=e||"fn";this.categories[n]||(this.categories[n]=[]);var r=this.categories[n].indexOf(t);return-1==r&&(r=this.categories[n].length,this.categories[n].push(t)),n+r},i.prototype.toCode=function(){var t=[],e=this.name+".categories",n=this.categories;for(var r in n)if(n.hasOwnProperty(r))for(var i=n[r],o=0;o<i.length;o++)t.push("var "+r+o+" = "+e+"['"+r+"']["+o+"];");return t.join("\n")},o.compare=function(t,e){if(t.anyType)return 1;if(e.anyType)return-1;if(c(t.types,"Object"))return 1;if(c(e.types,"Object"))return-1;if(t.hasConversions()){if(e.hasConversions()){var n,r,i;for(n=0;n<t.conversions.length;n++)if(void 0!==t.conversions[n]){r=t.conversions[n];break}for(n=0;n<e.conversions.length;n++)if(void 0!==e.conversions[n]){i=e.conversions[n];break}return v.conversions.indexOf(r)-v.conversions.indexOf(i)}return 1}if(e.hasConversions())return-1;var o,a;for(n=0;n<v.types.length;n++)if(v.types[n].name===t.types[0]){o=n;break}for(n=0;n<v.types.length;n++)if(v.types[n].name===e.types[0]){a=n;break}return o-a},o.prototype.overlapping=function(t){for(var e=0;e<this.types.length;e++)if(c(t.types,this.types[e]))return!0;return!1},o.prototype.matches=function(t){return this.anyType||t.anyType||this.overlapping(t)},o.prototype.clone=function(){var t=new o(this.types.slice(),this.varArgs);return t.conversions=this.conversions.slice(),t},o.prototype.hasConversions=function(){return this.conversions.length>0},o.prototype.contains=function(t){for(var e=0;e<this.types.length;e++)if(t[this.types[e]])return!0;return!1},o.prototype.toString=function(t){for(var e=[],n={},r=0;r<this.types.length;r++){var i=this.conversions[r],o=t&&i?i.to:this.types[r];o in n||(n[o]=!0,e.push(o))}return(this.varArgs?"...":"")+e.join("|")},a.prototype.clone=function(){return new a(this.params.slice(),this.fn)},a.prototype.expand=function(){var t=[];return function e(n,r){if(r.length<n.params.length){var i,s,l,u=n.params[r.length];if(u.varArgs){for(s=u.clone(),i=0;i<v.conversions.length;i++)if(!c(u.types,(l=v.conversions[i]).from)&&c(u.types,l.to)){var f=s.types.length;s.types[f]=l.from,s.conversions[f]=l}e(n,r.concat(s))}else{for(i=0;i<u.types.length;i++)e(n,r.concat(new o(u.types[i])));for(i=0;i<v.conversions.length;i++)!c(u.types,(l=v.conversions[i]).from)&&c(u.types,l.to)&&((s=new o(l.from)).conversions[0]=l,e(n,r.concat(s)))}}else t.push(new a(r,n.fn))}(this,[]),t},a.compare=function(t,e){if(t.params.length>e.params.length)return 1;if(t.params.length<e.params.length)return-1;var n,r=t.params.length,i=0,a=0;for(n=0;n<r;n++)t.params[n].hasConversions()&&i++,e.params[n].hasConversions()&&a++;if(i>a)return 1;if(i<a)return-1;for(n=0;n<t.params.length;n++){var s=o.compare(t.params[n],e.params[n]);if(0!==s)return s}return 0},a.prototype.hasConversions=function(){for(var t=0;t<this.params.length;t++)if(this.params[t].hasConversions())return!0;return!1},a.prototype.ignore=function(){for(var t={},e=0;e<v.ignore.length;e++)t[v.ignore[e]]=!0;for(e=0;e<this.params.length;e++)if(this.params[e].contains(t))return!0;return!1},a.prototype.paramsStartWith=function(t){if(0===t.length)return!0;for(var e=f(this.params),n=f(t),r=0;r<t.length;r++){var i=this.params[r]||(e.varArgs?e:null),o=t[r]||(n.varArgs?n:null);if(!i||!o||!i.matches(o))return!1}return!0},a.prototype.toCode=function(t,e){for(var n=new Array(this.params.length),r=0;r<this.params.length;r++){var i=this.params[r],o=i.conversions[0];n[r]=i.varArgs?"varArgs":o?t.add(o.convert,"convert")+"(arg"+r+")":"arg"+r}var a=this.fn?t.add(this.fn,"signature"):void 0;return a?e+"return "+a+"("+n.join(", ")+"); // signature: "+this.params.join(", "):[].join("\n")},a.prototype.toString=function(){return this.params.join(", ")},s.prototype.toCode=function(t,n){var r=[];if(this.param){var i=this.path.length-1,o=this.param.conversions[0],a="// type: "+(o?o.from+" (convert to "+o.to+")":this.param);if(this.param.varArgs)if(this.param.anyType)r.push(n+"if (arguments.length > "+i+") {"),r.push(n+"  var varArgs = [];"),r.push(n+"  for (var i = "+i+"; i < arguments.length; i++) {"),r.push(n+"    varArgs.push(arguments[i]);"),r.push(n+"  }"),r.push(this.signature.toCode(t,n+"  ")),r.push(n+"}");else{for(var s=(function(n,r){for(var i=[],o=0;o<n.length;o++)i[o]=t.add(e(n[o]),"test")+"("+r+")";return i.join(" || ")}).bind(this),l=this.param.types,u=[],c=0;c<l.length;c++)void 0===this.param.conversions[c]&&u.push(l[c]);for(r.push(n+"if ("+s(l,"arg"+i)+") { "+a),r.push(n+"  var varArgs = [arg"+i+"];"),r.push(n+"  for (var i = "+(i+1)+"; i < arguments.length; i++) {"),r.push(n+"    if ("+s(u,"arguments[i]")+") {"),r.push(n+"      varArgs.push(arguments[i]);"),c=0;c<l.length;c++){var f=this.param.conversions[c];if(f){var d=t.add(e(l[c]),"test"),h=t.add(f.convert,"convert");r.push(n+"    }"),r.push(n+"    else if ("+d+"(arguments[i])) {"),r.push(n+"      varArgs.push("+h+"(arguments[i]));")}}r.push(n+"    } else {"),r.push(n+"      throw createError(name, arguments.length, i, arguments[i], '"+u.join(",")+"');"),r.push(n+"    }"),r.push(n+"  }"),r.push(this.signature.toCode(t,n+"  ")),r.push(n+"}")}else if(this.param.anyType)r.push(n+"// type: any"),r.push(this._innerCode(t,n));else{var p=this.param.types[0];d="any"!==p?t.add(e(p),"test"):null,r.push(n+"if ("+d+"(arg"+i+")) { "+a),r.push(this._innerCode(t,n+"  ")),r.push(n+"}")}}else r.push(this._innerCode(t,n));return r.join("\n")},s.prototype._innerCode=function(t,e){var n,r=[];for(this.signature&&(r.push(e+"if (arguments.length === "+this.path.length+") {"),r.push(this.signature.toCode(t,e+"  ")),r.push(e+"}")),n=0;n<this.childs.length;n++)r.push(this.childs[n].toCode(t,e));if(!this.fallThrough||this.param&&this.param.anyType){var i=this._exceptions(t,e);i&&r.push(i)}return r.join("\n")},s.prototype._exceptions=function(t,e){var n=this.path.length;if(0===this.childs.length)return[e+"if (arguments.length > "+n+") {",e+"  throw createError(name, arguments.length, "+n+", arguments["+n+"]);",e+"}"].join("\n");for(var r={},i=[],o=0;o<this.childs.length;o++){var a=this.childs[o];if(a.param)for(var s=0;s<a.param.types.length;s++){var l=a.param.types[s];l in r||a.param.conversions[s]||(r[l]=!0,i.push(l))}}return e+"throw createError(name, arguments.length, "+n+", arguments["+n+"], '"+i.join(",")+"');"};var d=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],h={},p=[],g=[],v={config:h,types:d,conversions:p,ignore:g};return(v=l("typed",{Object:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);return l(n(e),t)},"string, Object":l,"...Function":function(t){for(var e,r=n(t),i={},o=0;o<t.length;o++){var a=t[o];if("object"!=typeof a.signatures)throw(e=new TypeError("Function is no typed-function (index: "+o+")")).data={index:o},e;for(var s in a.signatures)if(a.signatures.hasOwnProperty(s))if(i.hasOwnProperty(s)){if(a.signatures[s]!==i[s])throw(e=new Error('Signature "'+s+'" is defined twice')).data={signature:s},e}else i[s]=a.signatures[s]}return l(r,i)}})).config=h,v.types=d,v.conversions=p,v.ignore=g,v.create=t,v.find=function(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof e){n=e.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");n=e}var i=n.join(","),o=t.signatures[i];if(o)return o;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+n.join(", ")+"))")},v.convert=function(t,e){var n=u(t);if(e===n)return t;for(var r=0;r<v.conversions.length;r++){var i=v.conversions[r];if(i.from===n&&i.to===e)return i.convert(t)}throw new Error("Cannot convert from "+n+" to "+e)},v.addType=function(t){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");v.types.push(t)},v.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");v.conversions.push(t)},v}()})?r.apply(e,[]):r)||(t.exports=i)},function(t,e){"use strict";function n(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}e.isNumber=function(t){return"number"==typeof t},e.isInteger=function(t){return!!isFinite(t)&&t==Math.round(t)},e.sign=Math.sign||function(t){return t>0?1:t<0?-1:0},e.format=function(t,n){if("function"==typeof n)return n(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",i=void 0;switch(n&&(n.notation&&(r=n.notation),e.isNumber(n)?i=n:n.precision&&(i=n.precision)),r){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"engineering":return e.toEngineering(t,i);case"auto":return e.toPrecision(t,i,n&&n.exponential).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},e.splitNumber=function(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,(function(t){return i-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}},e.toEngineering=function(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=e.roundDigits(e.splitNumber(t),r),o=i.exponent,a=i.coefficients,s=o%3==0?o:o<0?o-3-o%3:o-o%3,l=o>=0?o:Math.abs(s);a.length-1<l&&(a=a.concat(n(l-(a.length-1))));for(var u=Math.abs(o-s),c=1;--u>=0;)c++;var f=a.slice(c).join(""),d=f.match(/[1-9]/)?"."+f:"",h=a.slice(0,c).join("")+d+"e"+(o>=0?"+":"")+s.toString();return i.sign+h},e.toFixed=function(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=e.splitNumber(t),o=e.roundDigits(i,i.exponent+1+(r||0)),a=o.coefficients,s=o.exponent+1,l=s+(r||0);return a.length<l&&(a=a.concat(n(l-a.length))),s<0&&(a=n(1-s).concat(a),s=1),r&&a.splice(s,0,0===s?"0.":"."),o.sign+a.join("")},e.toExponential=function(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=e.splitNumber(t),o=r?e.roundDigits(i,r):i,a=o.coefficients,s=o.exponent;a.length<r&&(a=a.concat(n(r-a.length)));var l=a.shift();return o.sign+l+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s},e.toPrecision=function(t,r,i){if(isNaN(t)||!isFinite(t))return String(t);var o=i&&void 0!==i.lower?i.lower:.001,a=i&&void 0!==i.upper?i.upper:1e5,s=e.splitNumber(t),l=Math.abs(Math.pow(10,s.exponent));if(l<o||l>=a)return e.toExponential(t,r);var u=r?e.roundDigits(s,r):s,c=u.coefficients,f=u.exponent;c.length<r&&(c=c.concat(n(r-c.length))),c=c.concat(n(f-c.length+1+(c.length<r?r-c.length:0)));var d=f>0?f:0;return d<(c=n(-f).concat(c)).length-1&&c.splice(d+1,0,"."),u.sign+c.join("")},e.roundDigits=function(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e&&r.splice(e,r.length-e)[0]>=5){var i=e-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n},e.digits=function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},e.DBL_EPSILON=Number.EPSILON||2220446049250313e-31,e.nearlyEqual=function(t,n,r){if(null==r)return t==n;if(t==n)return!0;if(isNaN(t)||isNaN(n))return!1;if(isFinite(t)&&isFinite(n)){var i=Math.abs(t-n);return i<e.DBL_EPSILON||i<=Math.max(Math.abs(t),Math.abs(n))*r}return!1}},function(t,e){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isMatrix||!1}},function(t,e,n){var r=n(22);e.mixin=function(t){var e=new r;return t.on=e.on.bind(e),t.off=e.off.bind(e),t.once=e.once.bind(e),t.emit=e.emit.bind(e),t}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},t.exports=n},function(t,e,n){"use strict";var r=n(15).lazy,i=n(15).isFactory,o=n(15).traverse,a=n(24);e.math=!0,e.name="import",e.factory=function(t,e,n,s,l){function u(t,e,n){if(n.wrap&&"function"==typeof e&&(i=function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var i=arguments[e];t[e]=i&&i.valueOf()}return r.apply(l,t)},(r=e).transform&&(i.transform=r.transform),e=i),h(l[t])&&h(e))return e=n.override?s(t,e.signatures):s(l[t],e),l[t]=e,c(t,e),void l.emit("import",t,(function(){return e}));var r,i;if(void 0===l[t]||n.override)return l[t]=e,c(t,e),void l.emit("import",t,(function(){return e}));if(!n.silent)throw new Error('Cannot import "'+t+'": already exists')}function c(t,e){e&&"function"==typeof e.transform?(l.expression.transform[t]=e.transform,p(t)&&(l.expression.mathWithTransform[t]=e.transform)):(delete l.expression.transform[t],p(t)&&(l.expression.mathWithTransform[t]=e))}function f(t,e){if("string"==typeof t.name){var i=t.name,a=i in l.expression.transform,u=t.path?o(l,t.path):l,c=u.hasOwnProperty(i)?u[i]:void 0,f=function(){var r=n(t);if(r&&"function"==typeof r.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(h(c)&&h(r))return e.override||(r=s(c,r)),r;if(void 0===c||e.override)return r;if(!e.silent)throw new Error('Cannot import "'+i+'": already exists')};!1!==t.lazy?(r(u,i,f),a||("expression.transform"===t.path||g(t))&&r(l.expression.mathWithTransform,i,f)):(u[i]=f(),a||("expression.transform"===t.path||g(t))&&(l.expression.mathWithTransform[i]=f())),l.emit("import",i,f,t.path)}else n(t)}function d(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||e&&t.isUnit(e)||e&&t.isComplex(e)||e&&t.isBigNumber(e)||e&&t.isFraction(e)||e&&t.isMatrix(e)||e&&Array.isArray(e)}function h(t){return"function"==typeof t&&"object"==typeof t.signatures}function p(t){return!v.hasOwnProperty(t)}function g(t){return void 0===t.path&&!v.hasOwnProperty(t.name)}var v={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function t(e,n){var r=arguments.length;if(1!==r&&2!==r)throw new a("import",r,1,2);if(n||(n={}),i(e))f(e,n);else if(Array.isArray(e))e.forEach((function(e){t(e,n)}));else if("object"==typeof e){for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];d(s)?u(o,s,n):i(e)?f(e,n):t(s,n)}}else if(!n.silent)throw new TypeError("Factory, Object, or Array expected")}},e.lazy=!0},function(t,e){"use strict";function n(t,e,r,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=i,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}(n.prototype=new Error).constructor=Error,n.prototype.name="ArgumentsError",n.prototype.isArgumentsError=!0,t.exports=n},function(t,e,n){"use strict";var r=n(15);function i(t,e,n){if(void 0!==t[e]&&-1===n.indexOf(t[e])){var r=function(t,e){return t.map((function(t){return t.toLowerCase()})).indexOf(e.toLowerCase())}(n,t[e]);-1!==r?(console.warn('Warning: Wrong casing for configuration option "'+e+'", should be "'+n[r]+'" instead of "'+t[e]+'".'),t[e]=n[r]):console.warn('Warning: Unknown value "'+t[e]+'" for configuration option "'+e+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}}e.name="config",e.math=!0,e.factory=function(t,e,n,o,a){var s=["Matrix","Array"],l=["number","BigNumber","Fraction"];function u(t){if(t){var n=r.map(e,r.clone);i(t,"matrix",s),i(t,"number",l),r.deepExtend(e,t);var o=r.map(e,r.clone),u=r.map(t,r.clone);return a.emit("config",o,n,u),o}return r.map(e,r.clone)}return u.MATRIX=s,u.NUMBER=l,u}},function(t,e,n){t.exports=[n(27),n(37),n(39),n(42),n(52),n(58),n(59),n(60),n(61),n(44),n(62)]},function(t,e,n){"use strict";var r=n(28).string.isString;e.name="Matrix",e.path="type",e.factory=function(t,e,n,i){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator")}return o.prototype.type="Matrix",o.prototype.isMatrix=!0,o.storage=function(t){if(!r(t))throw new TypeError("format must be a string value");var e=o._storage[t];if(!e)throw new SyntaxError("Unsupported matrix storage format: "+t);return e},o._storage={},o.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},o.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},o.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},o.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},o.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},o.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},o.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},o.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},o.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},o.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},o.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},o.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},o.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},o.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},o.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},o.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},o}},function(t,e,n){"use strict";e.array=n(29),e.boolean=n(35),e.function=n(36),e.number=n(19),e.object=n(15),e.string=n(30),e.types=n(32),e.emitter=n(21)},function(t,e,n){"use strict";var r=n(19),i=n(30),o=(n(15),n(32),n(33)),a=n(34);e.size=function(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e},e.validate=function(t,e){if(0==e.length){if(Array.isArray(t))throw new o(t.length,0)}else!function t(e,n,r){var i,a=e.length;if(a!=n[r])throw new o(a,n[r]);if(r<n.length-1){var s=r+1;for(i=0;i<a;i++){if(!Array.isArray(e[i]))throw new o(n.length-1,n.length,"<");t(e[i],n,s)}}else for(i=0;i<a;i++)if(Array.isArray(e[i]))throw new o(n.length+1,n.length,">")}(t,e,0)},e.validateIndex=function(t,e){if(!r.isNumber(t)||!r.isInteger(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new a(t,e)},e.UNINITIALIZED={},e.resize=function(t,n,o){if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new Error("Resizing to scalar is not supported");return n.forEach((function(t){if(!r.isNumber(t)||!r.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+i.format(n)+")")})),function t(n,r,i,o){var a,s,l=r[i],u=Math.min(n.length,l);if(n.length=l,i<r.length-1){var c=i+1;for(a=0;a<u;a++)s=n[a],Array.isArray(s)||(n[a]=s=[s]),t(s,r,c,o);for(a=u;a<l;a++)n[a]=s=[],t(s,r,c,o)}else{for(a=0;a<u;a++)for(;Array.isArray(n[a]);)n[a]=n[a][0];if(o!==e.UNINITIALIZED)for(a=u;a<l;a++)n[a]=o}}(t,n,0,void 0!==o?o:0),t},e.reshape=function(t,n){var r,i=e.flatten(t),a=function(t){return t.reduce((function(t,e){return t*e}))};if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new o(0,a(e.size(t)),"!=");try{r=function t(e,n){var r,i=[];if(0===n.length){if(0===e.length)throw new o(null,null,"!=");return e.shift()}for(r=0;r<n[0];r+=1)i.push(t(e,n.slice(1)));return i}(i,n)}catch(s){if(s instanceof o)throw new o(a(n),a(e.size(t)),"!=");throw s}if(i.length>0)throw new o(a(n),a(e.size(t)),"!=");return r},e.squeeze=function(t,n){for(var r=n||e.size(t);Array.isArray(t)&&1===t.length;)t=t[0],r.shift();for(var i=r.length;1===r[i-1];)i--;return i<r.length&&(t=function t(e,n,r){var i,o;if(r<n){var a=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,a)}else for(;Array.isArray(e);)e=e[0];return e}(t,i,0),r.length=i),t},e.unsqueeze=function(t,n,r,i){var o=i||e.size(t);if(r)for(var a=0;a<r;a++)t=[t],o.unshift(1);for(t=function t(e,n,r){var i,o;if(Array.isArray(e)){var a=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,a)}else for(var s=r;s<n;s++)e=[e];return e}(t,n,0);o.length<n;)o.push(1);return t},e.flatten=function(t){if(!Array.isArray(t))return t;var e=[];return t.forEach((function t(n){Array.isArray(n)?n.forEach(t):e.push(n)})),e},e.map=function(t,e){return Array.prototype.map.call(t,e)},e.forEach=function(t,e){Array.prototype.forEach.call(t,e)},e.filter=function(t,n){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n)},e.filterRegExp=function(t,n){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,(function(t){return n.test(t)}))},e.join=function(t,e){return Array.prototype.join.call(t,e)},e.identify=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e},e.generalize=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e},e.isArray=Array.isArray},function(t,e,n){"use strict";var r=n(19).format,i=n(31).format,o=n(16);e.isString=function(t){return"string"==typeof t},e.endsWith=function(t,e){return t.substring(t.length-e.length,t.length)===e},e.format=function(t,n){if("number"==typeof t)return r(t,n);if(o(t))return i(t,n);if(function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t))return n&&"decimal"===n.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return function t(n,r){if(Array.isArray(n)){for(var i="[",o=n.length,a=0;a<o;a++)0!=a&&(i+=", "),i+=t(n[a],r);return i+"]"}return e.format(n,r)}(t,n);if(e.isString(t))return'"'+t+'"';if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"==typeof t){if("function"==typeof t.format)return t.format(n);if(t&&t.toString()!=={}.toString())return t.toString();var a=[];for(var s in t)t.hasOwnProperty(s)&&a.push('"'+s+'": '+e.format(t[s],n));return"{"+a.join(", ")+"}"}return String(t)},e.stringify=function(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);"\\"===i?(n+=i,r++,""!==(i=e.charAt(r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++}return'"'+n+'"'},e.escape=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(t,e){e.format=function(t,n){if("function"==typeof n)return n(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",i=void 0;switch(void 0!==n&&(n.notation&&(r=n.notation),"number"==typeof n?i=n:n.precision&&(i=n.precision)),r){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"auto":var o=.001,a=1e5;if(n&&n.exponential&&(void 0!==n.exponential.lower&&(o=n.exponential.lower),void 0!==n.exponential.upper&&(a=n.exponential.upper)),t.constructor.config({toExpNeg:Math.round(Math.log(o)/Math.LN10),toExpPos:Math.round(Math.log(a)/Math.LN10)}),t.isZero())return"0";var s=t.abs();return(s.gte(o)&&s.lt(a)?t.toSignificantDigits(i).toFixed():e.toExponential(t,i)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},e.toExponential=function(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()},e.toFixed=function(t,e){return t.toFixed(e||0)}},function(t,e){"use strict";e.type=function(t){var e=typeof t;return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":"Object":"function"===e?"Function":e}},function(t,e){"use strict";function n(t,e,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}(n.prototype=new RangeError).constructor=RangeError,n.prototype.name="DimensionError",n.prototype.isDimensionError=!0,t.exports=n},function(t,e){"use strict";function n(t,e,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}(n.prototype=new RangeError).constructor=RangeError,n.prototype.name="IndexError",n.prototype.isIndexError=!0,t.exports=n},function(t,e){"use strict";e.isBoolean=function(t){return"boolean"==typeof t}},function(t,e){e.memoize=function(t,e){return function n(){"object"!=typeof n.cache&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e(r):JSON.stringify(r);return o in n.cache?n.cache[o]:n.cache[o]=t.apply(t,r)}},e.maxArgumentCount=function(t){return Object.keys(t.signatures||{}).reduce((function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)}),-1)},e.callWithRightArgumentCount=function(t,e,n){return Object.keys(t.signatures||{}).reduce((function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)}),-1)}},function(t,e,n){"use strict";var r=n(28),i=n(33),o=(n(38),n(38),r.string),a=r.array,s=r.object,l=r.number,u=Array.isArray,c=l.isNumber,f=l.isInteger,d=o.isString,h=a.validateIndex;e.name="DenseMatrix",e.path="type",e.factory=function(t,e,l,p){var g=l(n(27));function v(e,n){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!d(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))"DenseMatrix"===e.type?(this._data=s.clone(e._data),this._size=s.clone(e._size),this._datatype=n||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=n||e._datatype);else if(e&&u(e.data)&&u(e.size))this._data=e.data,this._size=e.size,this._datatype=n||e.datatype;else if(u(e))this._data=function t(e){for(var n=0,r=e.length;n<r;n++){var i=e[n];u(i)?e[n]=t(i):i&&!0===i.isMatrix&&(e[n]=t(i.valueOf()))}return e}(e),this._size=a.size(this._data),a.validate(this._data,this._size),this._datatype=n;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n}}function m(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r=n.size();if(r.length!=e._size.length)throw new i(r.length,e._size.length);for(var o=n.min(),a=n.max(),s=0,l=e._size.length;s<l;s++)h(o[s],e._size[s]),h(a[s],e._size[s]);return new v(function t(e,n,r,i){var o=i===r-1,a=n.dimension(i);return o?a.map((function(t){return h(t,e.length),e[t]})).valueOf():a.map((function(o){return h(o,e.length),t(e[o],n,r,i+1)})).valueOf()}(e._data,n,r.length,0),e._datatype)}function y(e,n,r,o){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,u=n.size(),c=n.isScalar();if(t.isMatrix(r)?(l=r.size(),r=r.valueOf()):l=a.size(r),c){if(0!==l.length)throw new TypeError("Scalar expected");e.set(n.min(),r,o)}else{if(u.length<e._size.length)throw new i(u.length,e._size.length,"<");if(l.length<u.length){for(var f=0,d=0;1===u[f]&&1===l[f];)f++;for(;1===u[f];)d++,f++;r=a.unsqueeze(r,u.length,d,l)}if(!s.deepEqual(u,l))throw new i(u,l,">");b(e,n.max().map((function(t){return t+1})),o),function t(e,n,r,i,o){var a=o===i-1;n.dimension(o).forEach(a?function(t,n){h(t),e[t]=r[n[0]]}:function(a,s){h(a),t(e[a],n,r[s[0]],i,o+1)})}(e._data,n,r,u.length,0)}return e}(v.prototype=new g).type="DenseMatrix",v.prototype.isDenseMatrix=!0,v.prototype.storage=function(){return"dense"},v.prototype.datatype=function(){return this._datatype},v.prototype.create=function(t,e){return new v(t,e)},v.prototype.subset=function(t,e,n){switch(arguments.length){case 1:return m(this,t);case 2:case 3:return y(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}},v.prototype.get=function(t){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);for(var e=0;e<t.length;e++)h(t[e],this._size[e]);for(var n=this._data,r=0,o=t.length;r<o;r++){var a=t[r];h(a,n.length),n=n[a]}return n},v.prototype.set=function(t,e,n){if(!u(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new i(t.length,this._size.length,"<");var r,o,a;b(this,t.map((function(t){return t+1})),n);var s=this._data;for(r=0,o=t.length-1;r<o;r++)h(a=t[r],s.length),s=s[a];return h(a=t[t.length-1],s.length),s[a]=e,this},v.prototype.resize=function(t,e,n){if(!u(t))throw new TypeError("Array expected");var r=n?this.clone():this;return _(r,t,e)};var _=function(t,e,n){if(0===e.length){for(var r=t._data;u(r);)r=r[0];return r}return t._size=e.slice(0),t._data=a.resize(t._data,t._size,n),t};function b(t,e,n){for(var r=t._size.slice(0),i=!1;r.length<e.length;)r.push(0),i=!0;for(var o=0,a=e.length;o<a;o++)e[o]>r[o]&&(r[o]=e[o],i=!0);i&&_(t,r,n)}return v.prototype.reshape=function(t,e){var n=e?this.clone():this;return n._data=a.reshape(n._data,t),n._size=t.slice(0),n},v.prototype.clone=function(){return new v({data:s.clone(this._data),size:s.clone(this._size),datatype:this._datatype})},v.prototype.size=function(){return this._size.slice(0)},v.prototype.map=function(t){var e=this,n=function(r,i){return u(r)?r.map((function(t,e){return n(t,i.concat(e))})):t(r,i,e)};return new v({data:n(this._data,[]),size:s.clone(this._size),datatype:this._datatype})},v.prototype.forEach=function(t){var e=this,n=function(r,i){u(r)?r.forEach((function(t,e){n(t,i.concat(e))})):t(r,i,e)};n(this._data,[])},v.prototype.toArray=function(){return s.clone(this._data)},v.prototype.valueOf=function(){return this._data},v.prototype.format=function(t){return o.format(this._data,t)},v.prototype.toString=function(){return o.format(this._data)},v.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},v.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var n=e>0?e:0,r=e<0?-e:0,i=Math.min(this._size[0]-r,this._size[1]-n),o=[],a=0;a<i;a++)o[a]=this._data[a+r][a+n];return new v({data:o,size:[i],datatype:this._datatype})},v.diagonal=function(e,n,r,i,o){if(!u(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!c(r)||!f(r))throw new TypeError("The parameter k must be an integer number")}else r=0;i&&d(o)&&(i=p.convert(i,o));var s,l=r>0?r:0,h=r<0?-r:0,g=e[0],m=e[1],y=Math.min(g-h,m-l);if(u(n)){if(n.length!==y)throw new Error("Invalid value array length");s=function(t){return n[t]}}else if(t.isMatrix(n)){var _=n.size();if(1!==_.length||_[0]!==y)throw new Error("Invalid matrix length");s=function(t){return n.get([t])}}else s=function(){return n};i||(i=t.isBigNumber(s(0))?new t.BigNumber(0):0);var b=[];if(e.length>0){b=a.resize(b,e,i);for(var w=0;w<y;w++)b[w+h][w+l]=s(w)}return new v({data:b,size:[g,m]})},v.fromJSON=function(t){return new v(t)},v.prototype.swapRows=function(t,e){if(!(c(t)&&f(t)&&c(e)&&f(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return h(t,this._size[0]),h(e,this._size[0]),v._swapRows(t,e,this._data),this},v._swapRows=function(t,e,n){var r=n[t];n[t]=n[e],n[e]=r},t.Matrix._storage.dense=v,t.Matrix._storage.default=v,v},e.lazy=!1},function(t,e,n){"use strict";var r=n(15).hasOwnProperty;function i(t,e){return!(!t||"object"!=typeof t||!r(s,e)&&(e in Object.prototype||e in Function.prototype))}function o(t,e){return!(!t||"function"!=typeof t[e]||r(t,e)&&t.__proto__&&e in t.__proto__||!r(l,e)&&(e in Object.prototype||e in Function.prototype))}function a(t){return"object"==typeof t&&t&&t.constructor===Object}var s={length:!0,name:!0},l={toString:!0,valueOf:!0,toLocaleString:!0};e.getSafeProperty=function(t,e){if(a(t)&&i(t,e))return t[e];if("function"==typeof t[e]&&o(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')},e.setSafeProperty=function(t,e,n){if(a(t)&&i(t,e))return t[e]=n;throw new Error('No access to property "'+e+'"')},e.isSafeProperty=i,e.validateSafeMethod=function(t,e){if(!o(t,e))throw new Error('No access to method "'+e+'"')},e.isSafeMethod=o,e.isPlainObject=a},function(t,e,n){"use strict";var r=n(28),i=n(33),o=r.array,a=r.object,s=r.string,l=r.number,u=Array.isArray,c=l.isNumber,f=l.isInteger,d=s.isString,h=o.validateIndex;e.name="SparseMatrix",e.path="type",e.factory=function(t,e,p,g){var v=p(n(27)),m=p(n(40));function y(e,n){if(!(this instanceof y))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!d(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))_(this,e,n);else if(e&&u(e.index)&&u(e.ptr)&&u(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=n||e.datatype;else if(u(e))b(this,e,n);else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=n}}var _=function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?a.clone(e._values):void 0,t._index=a.clone(e._index),t._ptr=a.clone(e._ptr),t._size=a.clone(e._size),t._datatype=n||e._datatype):b(t,e.valueOf(),n||e._datatype)},b=function(t,e,n){t._values=[],t._index=[],t._ptr=[],t._datatype=n;var r=e.length,i=0,o=m,a=0;if(d(n)&&(o=g.find(m,[n,n])||m,a=g.convert(0,n)),r>0){var s=0;do{t._ptr.push(t._index.length);for(var l=0;l<r;l++){var c=e[l];if(u(c)){if(0===s&&i<c.length&&(i=c.length),s<c.length){var f=c[s];o(f,a)||(t._values.push(f),t._index.push(l))}}else 0===s&&i<1&&(i=1),o(c,a)||(t._values.push(c),t._index.push(l))}s++}while(s<i)}t._ptr.push(t._index.length),t._size=[r,i]};(y.prototype=new v).type="SparseMatrix",y.prototype.isSparseMatrix=!0,y.prototype.storage=function(){return"sparse"},y.prototype.datatype=function(){return this._datatype},y.prototype.create=function(t,e){return new y(t,e)},y.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},y.prototype.subset=function(t,e,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return w(this,t);case 2:case 3:return x(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}};var w=function(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r,o,a,s,l=n.size();if(l.length!=e._size.length)throw new i(l.length,e._size.length);var u=n.min(),c=n.max();for(r=0,o=e._size.length;r<o;r++)h(u[r],e._size[r]),h(c[r],e._size[r]);var f=e._values,d=e._index,p=e._ptr,g=n.dimension(0),v=n.dimension(1),m=[],_=[];g.forEach((function(t,e){_[t]=e[0],m[t]=!0}));var b=f?[]:void 0,w=[],x=[];return v.forEach((function(t){for(x.push(w.length),a=p[t],s=p[t+1];a<s;a++)!0===m[r=d[a]]&&(w.push(_[r]),b&&b.push(f[a]))})),x.push(w.length),new y({values:b,index:w,ptr:x,size:l,datatype:e._datatype})},x=function(e,n,r,s){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,u=n.size(),c=n.isScalar();if(t.isMatrix(r)?(l=r.size(),r=r.toArray()):l=o.size(r),c){if(0!==l.length)throw new TypeError("Scalar expected");e.set(n.min(),r,s)}else{if(1!==u.length&&2!==u.length)throw new i(u.length,e._size.length,"<");if(l.length<u.length){for(var f=0,d=0;1===u[f]&&1===l[f];)f++;for(;1===u[f];)d++,f++;r=o.unsqueeze(r,u.length,d,l)}if(!a.deepEqual(u,l))throw new i(u,l,">");for(var h=n.min()[0],p=n.min()[1],g=l[0],v=l[1],m=0;m<g;m++)for(var y=0;y<v;y++)e.set([m+h,y+p],r[m][y],s)}return e};y.prototype.get=function(t){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];h(e,this._size[0]),h(n,this._size[1]);var r=k(e,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===e?this._values[r]:0},y.prototype.set=function(t,e,n){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var r=t[0],o=t[1],a=this._size[0],s=this._size[1],l=m,c=0;d(this._datatype)&&(l=g.find(m,[this._datatype,this._datatype])||m,c=g.convert(0,this._datatype)),(r>a-1||o>s-1)&&(A(this,Math.max(r+1,a),Math.max(o+1,s),n),a=this._size[0],s=this._size[1]),h(r,a),h(o,s);var f=k(r,this._ptr[o],this._ptr[o+1],this._index);return f<this._ptr[o+1]&&this._index[f]===r?l(e,c)?E(f,o,this._values,this._index,this._ptr):this._values[f]=e:z(f,r,o,e,this._values,this._index,this._ptr),this};var k=function(t,e,n,r){if(n-e==0)return n;for(var i=e;i<n;i++)if(r[i]===t)return i;return e},E=function(t,e,n,r,i){n.splice(t,1),r.splice(t,1);for(var o=e+1;o<i.length;o++)i[o]--},z=function(t,e,n,r,i,o,a){i.splice(t,0,r),o.splice(t,0,e);for(var s=n+1;s<a.length;s++)a[s]++};y.prototype.resize=function(t,e,n){if(!u(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");t.forEach((function(e){if(!l.isNumber(e)||!l.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(t)+")")}));var r=n?this.clone():this;return A(r,t[0],t[1],e)};var A=function(t,e,n,r){var i=r||0,o=m,a=0;d(t._datatype)&&(o=g.find(m,[t._datatype,t._datatype])||m,a=g.convert(0,t._datatype),i=g.convert(i,t._datatype));var s,l,u,c=!o(i,a),f=t._size[0],h=t._size[1];if(n>h){for(l=h;l<n;l++)if(t._ptr[l]=t._values.length,c)for(s=0;s<f;s++)t._values.push(i),t._index.push(s);t._ptr[n]=t._values.length}else n<h&&(t._ptr.splice(n+1,h-n),t._values.splice(t._ptr[n],t._values.length),t._index.splice(t._ptr[n],t._index.length));if(h=n,e>f){if(c){var p=0;for(l=0;l<h;l++){t._ptr[l]=t._ptr[l]+p,u=t._ptr[l+1]+p;var v=0;for(s=f;s<e;s++,v++)t._values.splice(u+v,0,i),t._index.splice(u+v,0,s),p++}t._ptr[h]=t._values.length}}else if(e<f){var y=0;for(l=0;l<h;l++){t._ptr[l]=t._ptr[l]-y;var _=t._ptr[l+1]-y;for(u=t._ptr[l];u<_;u++)(s=t._index[u])>e-1&&(t._values.splice(u,1),t._index.splice(u,1),y++)}t._ptr[l]=t._values.length}return t._size[0]=e,t._size[1]=n,t};y.prototype.reshape=function(t,e){if(!u(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(t.forEach((function(e){if(!l.isNumber(e)||!l.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(t)+")")})),this._size[0]*this._size[1]!=t[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var o=0;o<n._ptr[i+1]-n._ptr[i];o++)r.push(i);var a=n._values.slice(),c=n._index.slice();for(i=0;i<n._index.length;i++){var f=c[i]*n._size[1]+r[i];r[i]=f%t[1],c[i]=Math.floor(f/t[1])}for(n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice(),i=0;i<n._ptr.length;i++)n._ptr[i]=0;for(var d=0;d<a.length;d++){var h=a[d],p=k(i=c[d],n._ptr[o=r[d]],n._ptr[o+1],n._index);z(p,i,o,h,n._values,n._index,n._ptr)}return n},y.prototype.clone=function(){return new y({values:this._values?a.clone(this._values):void 0,index:a.clone(this._index),ptr:a.clone(this._ptr),size:a.clone(this._size),datatype:this._datatype})},y.prototype.size=function(){return this._size.slice(0)},y.prototype.map=function(t,e){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var n=this;return C(this,0,this._size[0]-1,0,this._size[1]-1,(function(e,r,i){return t(e,[r,i],n)}),e)};var C=function(t,e,n,r,i,o,a){var s=[],l=[],u=[],c=m,f=0;d(t._datatype)&&(c=g.find(m,[t._datatype,t._datatype])||m,f=g.convert(0,t._datatype));for(var h=function(t,e,n){t=o(t,e,n),c(t,f)||(s.push(t),l.push(e))},p=r;p<=i;p++){u.push(s.length);for(var v=t._ptr[p+1],_=e,b=t._ptr[p];b<v;b++){var w=t._index[b];if(w>=e&&w<=n){if(!a)for(var x=_;x<w;x++)h(0,x-e,p-r);h(t._values[b],w-e,p-r)}_=w+1}if(!a)for(var k=_;k<=n;k++)h(0,k-e,p-r)}return u.push(s.length),new y({values:s,index:l,ptr:u,size:[n-e+1,i-r+1]})};y.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){for(var o=this._ptr[i+1],a=0,s=this._ptr[i];s<o;s++){var l=this._index[s];if(!e)for(var u=a;u<l;u++)t(0,[u,i],this);t(this._values[s],[l,i],this),a=l+1}if(!e)for(var c=a;c<n;c++)t(0,[c,i],this)}},y.prototype.toArray=function(){return T(this._values,this._index,this._ptr,this._size,!0)},y.prototype.valueOf=function(){return T(this._values,this._index,this._ptr,this._size,!1)};var T=function(t,e,n,r,i){var o,s,l=r[0],u=r[1],c=[];for(o=0;o<l;o++)for(c[o]=[],s=0;s<u;s++)c[o][s]=0;for(s=0;s<u;s++)for(var f=n[s+1],d=n[s];d<f;d++)c[o=e[d]][s]=t?i?a.clone(t[d]):t[d]:1;return c};return y.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+s.format(e,t)+" x "+s.format(n,t)+"] density: "+s.format(r,t)+"\n",o=0;o<n;o++)for(var a=this._ptr[o+1],l=this._ptr[o];l<a;l++)i+="\n    ("+s.format(this._index[l],t)+", "+s.format(o,t)+") ==> "+(this._values?s.format(this._values[l],t):"X");return i},y.prototype.toString=function(){return s.format(this.toArray())},y.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},y.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var n=e>0?e:0,r=e<0?-e:0,i=this._size[1],o=Math.min(this._size[0]-r,i-n),a=[],s=[],l=[];l[0]=0;for(var u=n;u<i&&a.length<o;u++)for(var d=this._ptr[u+1],h=this._ptr[u];h<d;h++){var p=this._index[h];if(p===u-n+r){a.push(this._values[h]),s[a.length-1]=p-r;break}}return l.push(a.length),new y({values:a,index:s,ptr:l,size:[o,1]})},y.fromJSON=function(t){return new y(t)},y.diagonal=function(e,n,r,i,o){if(!u(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!c(e)||!f(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!c(r)||!f(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a=m,s=0;d(o)&&(a=g.find(m,[o,o])||m,s=g.convert(0,o));var l,h=r>0?r:0,p=r<0?-r:0,v=e[0],_=e[1],b=Math.min(v-p,_-h);if(u(n)){if(n.length!==b)throw new Error("Invalid value array length");l=function(t){return n[t]}}else if(t.isMatrix(n)){var w=n.size();if(1!==w.length||w[0]!==b)throw new Error("Invalid matrix length");l=function(t){return n.get([t])}}else l=function(){return n};for(var x=[],k=[],E=[],z=0;z<_;z++){E.push(x.length);var A=z-h;if(A>=0&&A<b){var C=l(A);a(C,s)||(k.push(A+p),x.push(C))}}return E.push(x.length),new y({values:x,index:k,ptr:E,size:[v,_]})},y.prototype.swapRows=function(t,e){if(!(c(t)&&f(t)&&c(e)&&f(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return h(t,this._size[0]),h(e,this._size[0]),y._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},y._forEachRow=function(t,e,n,r,i){for(var o=r[t+1],a=r[t];a<o;a++)i(n[a],e[a])},y._swapRows=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=o[a],l=o[a+1],u=k(t,s,l,i),c=k(e,s,l,i);if(u<l&&c<l&&i[u]===t&&i[c]===e){if(r){var f=r[u];r[u]=r[c],r[c]=f}}else if(u<l&&i[u]===t&&(c>=l||i[c]!==e)){var d=r?r[u]:void 0;i.splice(c,0,e),r&&r.splice(c,0,d),i.splice(c<=u?u+1:u,1),r&&r.splice(c<=u?u+1:u,1)}else if(c<l&&i[c]===e&&(u>=l||i[u]!==t)){var h=r?r[c]:void 0;i.splice(u,0,t),r&&r.splice(u,0,h),i.splice(u<=c?c+1:c,1),r&&r.splice(u<=c?c+1:c,1)}}},t.Matrix._storage.sparse=y,y},e.lazy=!1},function(t,e,n){"use strict";var r=n(19).nearlyEqual,i=n(41);e.factory=function(t,e,n,o){var a=o("equalScalar",{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,n){return t===n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.eq(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return a(t.value,e.value)},"string, string":function(t,e){return t===e}});return a}},function(t,e){"use strict";t.exports=function(t,e,n){if(null==n)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}},function(t,e,n){"use strict";e.name="Spa",e.path="type",e.factory=function(t,e,r){var i=r(n(43)),o=r(n(40));function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t.FibonacciHeap}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var n=this._heap.insert(t,e);this._values[t]=n}},a.prototype.get=function(t){var e=this._values[t];return e?e.value:0},a.prototype.accumulate=function(t,e){var n=this._values[t];n?n.value=i(n.value,e):(n=this._heap.insert(t,e),this._values[t]=n)},a.prototype.forEach=function(t,e,n){var r=this._heap,i=this._values,a=[],s=r.extractMinimum();for(s&&a.push(s);s&&s.key<=e;)s.key>=t&&(o(s.value,0)||n(s.key,s.value,this)),(s=r.extractMinimum())&&a.push(s);for(var l=0;l<a.length;l++){var u=a[l];i[(s=r.insert(u.key,u.value)).key]=s}},a.prototype.swap=function(t,e){var n=this._values[t],r=this._values[e];if(!n&&r)n=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=n,this._values[e]=void 0;else if(n&&!r)r=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=r,this._values[t]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},a}},function(t,e,n){"use strict";var r=n(15).extend;e.name="add",e.factory=function(t,e,i,o){var a=i(n(44)),s=i(n(45)),l=n(46),u=i(n(47)),c=i(n(48)),f=i(n(49)),d=i(n(50)),h=i(n(51)),p=o("add",r({"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,s);break;default:n=u(e,t,s,!0)}break;default:switch(e.storage()){case"sparse":n=u(t,e,s,!1);break;default:n=d(t,e,s)}}return n},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=f(t,e,s,!1);break;default:n=h(t,e,s,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=f(e,t,s,!0);break;default:n=h(e,t,s,!0)}return n},"Array, any":function(t,e){return h(a(t),e,s,!1).valueOf()},"any, Array":function(t,e){return h(a(e),t,s,!0).valueOf()},"any, any":s,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,n){for(var r=p(t,e),i=0;i<n.length;i++)r=p(r,n[i]);return r}},s.signatures));return p.toTex={2:"\\left(${args[0]}"+l.operators.add+"${args[1]}\\right)"},p}},function(t,e){"use strict";e.name="matrix",e.factory=function(t,e,n,r){var i=r("matrix",{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return i.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},i;function o(e,n,r){return new(t.Matrix.storage(n||"default"))(e,r)}}},function(t,e){"use strict";e.factory=function(t,e,n,r){var i=r("add",{"number, number":function(t,e){return t+e},"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=i(n.value,e.value),n.fixPrefix=!1,n}});return i}},function(t,e){"use strict";e.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},e.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},e.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var n={deg:"^\\circ"};e.toSymbol=function(t,r){if(r=void 0!==r&&r)return n.hasOwnProperty(t)?n[t]:"\\mathrm{"+t+"}";if(e.symbols.hasOwnProperty(t))return e.symbols[t];if(-1!==t.indexOf("_")){var i=t.indexOf("_");return e.toSymbol(t.substring(0,i))+"_{"+e.toSymbol(t.substring(i+1))+"}"}return t}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm01",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,a){var s=t._data,l=t._size,u=t._datatype,c=e._values,f=e._index,d=e._ptr,h=e._size,p=e._datatype;if(l.length!==h.length)throw new r(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g,v,m=l[0],y=l[1],_="string"==typeof u&&u===p?u:void 0,b=_?i.find(n,[_,_]):n,w=[];for(g=0;g<m;g++)w[g]=[];var x=[],k=[];for(v=0;v<y;v++){for(var E=v+1,z=d[v+1],A=d[v];A<z;A++)x[g=f[A]]=a?b(c[A],s[g][v]):b(s[g][v],c[A]),k[g]=E;for(g=0;g<m;g++)w[g][v]=k[g]===E?x[g]:s[g][v]}return new o({data:w,size:[m,y],datatype:_})}}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm04",e.factory=function(t,e,i,o){var a=i(n(40)),s=t.SparseMatrix;return function(t,e,n){var i=t._values,l=t._index,u=t._ptr,c=t._size,f=t._datatype,d=e._values,h=e._index,p=e._ptr,g=e._size,v=e._datatype;if(c.length!==g.length)throw new r(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var m,y=c[0],_=c[1],b=a,w=0,x=n;"string"==typeof f&&f===v&&(b=o.find(a,[m=f,m]),w=o.convert(0,m),x=o.find(n,[m,m]));var k,E,z,A,C=i&&d?[]:void 0,T=[],S=[],M=new s({values:C,index:T,ptr:S,size:[y,_],datatype:m}),N=i&&d?[]:void 0,D=i&&d?[]:void 0,O=[],I=[];for(E=0;E<_;E++){S[E]=T.length;var P=E+1;for(A=u[E+1],z=u[E];z<A;z++)T.push(k=l[z]),O[k]=P,N&&(N[k]=i[z]);for(A=p[E+1],z=p[E];z<A;z++)if(O[k=h[z]]===P){if(N){var L=x(N[k],d[z]);b(L,w)?O[k]=null:N[k]=L}}else T.push(k),I[k]=P,D&&(D[k]=d[z]);if(N&&D)for(z=S[E];z<T.length;)O[k=T[z]]===P?(C[z]=N[k],z++):I[k]===P?(C[z]=D[k],z++):T.splice(z,1)}return S[_]=T.length,M}}},function(t,e){"use strict";e.name="algorithm10",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var a=t._values,s=t._index,l=t._ptr,u=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,d=u[0],h=u[1],p=n;"string"==typeof c&&(e=r.convert(e,f=c),p=r.find(n,[f,f]));for(var g=[],v=new i({data:g,size:[d,h],datatype:f}),m=[],y=[],_=0;_<h;_++){for(var b=_+1,w=l[_+1],x=l[_];x<w;x++){var k=s[x];m[k]=a[x],y[k]=b}for(var E=0;E<d;E++)0===_&&(g[E]=[]),g[E][_]=y[E]===b?o?p(e,m[E]):p(m[E],e):e}return v}}},function(t,e,n){"use strict";n(28);var r=n(33);e.name="algorithm13",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i,o){var s=[];if(e===n.length-1)for(var l=0;l<r;l++)s[l]=t(i[l],o[l]);else for(var u=0;u<r;u++)s[u]=a(t,e+1,n,n[e+1],i[u],o[u]);return s};return function(t,e,n){var s,l=t._data,u=t._size,c=t._datatype,f=e._data,d=e._size,h=e._datatype,p=[];if(u.length!==d.length)throw new r(u.length,d.length);for(var g=0;g<u.length;g++){if(u[g]!==d[g])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");p[g]=u[g]}var v=n;"string"==typeof c&&c===h&&(e=i.convert(e,s=c),v=i.find(n,[s,s]));var m=p.length>0?a(v,0,p,p[0],l,f):[];return new o({data:m,size:p,datatype:s})}}},function(t,e,n){"use strict";var r=n(15).clone;e.name="algorithm14",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i,o,s){var l=[];if(e===n.length-1)for(var u=0;u<r;u++)l[u]=s?t(o,i[u]):t(i[u],o);else for(var c=0;c<r;c++)l[c]=a(t,e+1,n,n[e+1],i[c],o,s);return l};return function(t,e,n,s){var l,u=t._data,c=t._size,f=t._datatype,d=n;"string"==typeof f&&(e=i.convert(e,l=f),d=i.find(n,[l,l]));var h=c.length>0?a(d,0,c,c[0],u,e,s):[];return new o({data:h,size:r(c),datatype:l})}}},function(t,e,n){"use strict";e.name="FibonacciHeap",e.path="type",e.factory=function(t,e,r,i){var o=r(n(53)),a=r(n(57)),s=1/Math.log((1+Math.sqrt(5))/2);function l(){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}l.prototype.type="FibonacciHeap",l.prototype.isFibonacciHeap=!0,l.prototype.insert=function(t,e){var n={key:t,value:e,degree:0};if(this._minimum){var r=this._minimum;n.left=r,n.right=r.right,r.right=n,n.right.left=n,o(t,r.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},l.prototype.size=function(){return this._size},l.prototype.clear=function(){this._minimum=null,this._size=0},l.prototype.isEmpty=function(){return 0===this._size},l.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var e=this._minimum,n=t.degree,r=t.child;n>0;){var i=r.right;r.left.right=r.right,r.right.left=r.left,r.left=e,r.right=e.right,e.right=r,r.right.left=r,r.parent=null,r=i,n--}return t.left.right=t.right,t.right.left=t.left,e=t==t.right?null:d(e=t.right,this._size),this._size--,this._minimum=e,t},l.prototype.remove=function(t){this._minimum=u(this._minimum,t,-1),this.extractMinimum()};var u=function(t,e,n){e.key=n;var r=e.parent;return r&&o(e.key,r.key)&&(c(t,e,r),f(t,r)),o(e.key,t.key)&&(t=e),t},c=function(t,e,n){e.left.right=e.right,e.right.left=e.left,n.degree--,n.child==e&&(n.child=e.right),0===n.degree&&(n.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1},f=function(t,e){var n=e.parent;n&&(e.mark?(c(t,e,n),f(n)):e.mark=!0)},d=function(t,e){var n,r,i,l=Math.floor(Math.log(e)*s)+1,u=new Array(l),c=0,f=t;if(f)for(c++,f=f.right;f!==t;)c++,f=f.right;for(;c>0;){for(var d=f.degree,h=f.right;n=u[d];){if(a(f.key,n.key)){var p=n;n=f,f=p}i=f,(r=n).left.right=r.right,r.right.left=r.left,r.parent=i,i.child?(r.left=i.child,r.right=i.child.right,i.child.right=r,r.right.left=r):(i.child=r,r.right=r,r.left=r),i.degree++,r.mark=!1,u[d]=null,d++}u[d]=f,f=h,c--}t=null;for(var g=0;g<l;g++)(n=u[g])&&(t?(n.left.right=n.right,n.right.left=n.left,n.left=t,n.right=t.right,t.right=n,n.right.left=n,o(n.key,t.key)&&(t=n)):t=n);return t};return l}},function(t,e,n){"use strict";var r=n(19).nearlyEqual,i=n(41);e.name="smaller",e.factory=function(t,e,o,a){var s=o(n(44)),l=o(n(54)),u=o(n(55)),c=o(n(56)),f=o(n(50)),d=o(n(51)),h=n(46),p=a("smaller",{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,n){return t<n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.lt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return-1===t.compare(e)},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t<e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,p);break;default:n=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,p,!1);break;default:n=f(t,e,p)}}return n},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,p,!1);break;default:n=d(t,e,p,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,p,!0);break;default:n=d(e,t,p,!0)}return n},"Array, any":function(t,e){return d(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+h.operators.smaller+"${args[1]}\\right)"},p}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm03",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,a){var s=t._data,l=t._size,u=t._datatype,c=e._values,f=e._index,d=e._ptr,h=e._size,p=e._datatype;if(l.length!==h.length)throw new r(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g,v=l[0],m=l[1],y=0,_=n;"string"==typeof u&&u===p&&(y=i.convert(0,g=u),_=i.find(n,[g,g]));for(var b=[],w=0;w<v;w++)b[w]=[];for(var x=[],k=[],E=0;E<m;E++){for(var z=E+1,A=d[E+1],C=d[E];C<A;C++){var T=f[C];x[T]=a?_(c[C],s[T][E]):_(s[T][E],c[C]),k[T]=z}for(var S=0;S<v;S++)b[S][E]=k[S]===z?x[S]:a?_(y,s[S][E]):_(s[S][E],y)}return new o({data:b,size:[v,m],datatype:g})}}},function(t,e,n){"use strict";var r=n(33);e.name="algorithm07",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i){for(var o=t._values,a=t._index,s=t._ptr,l=s[e],u=s[e+1];l<u;l++){var c=a[l];n[c]=i,r[c]=o[l]}};return function(t,e,n){var s=t._size,l=t._datatype,u=e._size,c=e._datatype;if(s.length!==u.length)throw new r(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var f,d,h,p=s[0],g=s[1],v=0,m=n;"string"==typeof l&&l===c&&(v=i.convert(0,f=l),m=i.find(n,[f,f]));var y=[];for(d=0;d<p;d++)y[d]=[];var _=new o({data:y,size:[p,g],datatype:f}),b=[],w=[],x=[],k=[];for(h=0;h<g;h++){var E=h+1;for(a(t,h,x,b,E),a(e,h,k,w,E),d=0;d<p;d++)y[d][h]=m(x[d]===E?b[d]:v,k[d]===E?w[d]:v)}return _}}},function(t,e){"use strict";e.name="algorithm12",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var a=t._values,s=t._index,l=t._ptr,u=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,d=u[0],h=u[1],p=n;"string"==typeof c&&(e=r.convert(e,f=c),p=r.find(n,[f,f]));for(var g=[],v=new i({data:g,size:[d,h],datatype:f}),m=[],y=[],_=0;_<h;_++){for(var b=_+1,w=l[_+1],x=l[_];x<w;x++){var k=s[x];m[k]=a[x],y[k]=b}for(var E=0;E<d;E++)0===_&&(g[E]=[]),g[E][_]=y[E]===b?o?p(e,m[E]):p(m[E],e):o?p(e,0):p(0,e)}return v}}},function(t,e,n){"use strict";var r=n(19).nearlyEqual,i=n(41);e.name="larger",e.factory=function(t,e,o,a){var s=o(n(44)),l=o(n(54)),u=o(n(55)),c=o(n(56)),f=o(n(50)),d=o(n(51)),h=n(46),p=a("larger",{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,n){return t>n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.gt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t>e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,p);break;default:n=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,p,!1);break;default:n=f(t,e,p)}}return n},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,p,!1);break;default:n=d(t,e,p,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,p,!0);break;default:n=d(e,t,p,!0)}return n},"Array, any":function(t,e){return d(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+h.operators.larger+"${args[1]}\\right)"},p}},function(t,e,n){"use strict";var r=n(28),i=r.object,o=Array.isArray,a=r.string.isString;e.name="ImmutableDenseMatrix",e.path="type",e.factory=function(t,e,s){var l=s(n(37)),u=s(n(53));function c(e,n){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!a(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e)||o(e)){var i=new l(e,n);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&o(e.data)&&o(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n,this._min=null,this._max=null}}return(c.prototype=new l).type="ImmutableDenseMatrix",c.prototype.isImmutableDenseMatrix=!0,c.prototype.subset=function(e){switch(arguments.length){case 1:var n=l.prototype.subset.call(this,e);return t.isMatrix(n)?new c({data:n._data,size:n._size,datatype:n._datatype}):n;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},c.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},c.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},c.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},c.prototype.clone=function(){return new c({data:i.clone(this._data),size:i.clone(this._size),datatype:this._datatype})},c.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},c.fromJSON=function(t){return new c(t)},c.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},c.prototype.min=function(){if(null===this._min){var t=null;this.forEach((function(e){(null===t||u(e,t))&&(t=e)})),this._min=null!==t?t:void 0}return this._min},c.prototype.max=function(){if(null===this._max){var t=null;this.forEach((function(e){(null===t||u(t,e))&&(t=e)})),this._max=null!==t?t:void 0}return this._max},c}},function(t,e,n){"use strict";var r=n(15).clone,i=n(19).isInteger;e.name="Index",e.path="type",e.factory=function(t){function e(r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,o=arguments.length;i<o;i++){var a=arguments[i];if(t.isRange(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||t.isMatrix(a)){var s=n(a.valueOf());this._dimensions.push(s);var l=s.size();1===l.length&&1===l[0]||(this._isScalar=!1)}else if("number"==typeof a)this._dimensions.push(n([a]));else{if("string"!=typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(a)}}}function n(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!i(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t.ImmutableDenseMatrix(e)}return e.prototype.type="Index",e.prototype.isIndex=!0,e.prototype.clone=function(){var t=new e;return t._dimensions=r(this._dimensions),t._isScalar=this._isScalar,t},e.create=function(t){var n=new e;return e.apply(n,t),n},e.prototype.size=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?1:r.size()[0]}return t},e.prototype.max=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.max()}return t},e.prototype.min=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.min()}return t},e.prototype.forEach=function(t){for(var e=0,n=this._dimensions.length;e<n;e++)t(this._dimensions[e],e,this)},e.prototype.dimension=function(t){return this._dimensions[t]||null},e.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},e.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},e.prototype.isScalar=function(){return this._isScalar},e.prototype.valueOf=e.prototype.toArray=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t.push("string"==typeof r?r:r.toArray())}return t},e.prototype.toString=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t.push("string"==typeof r?JSON.stringify(r):r.toString())}return"["+t.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},e.fromJSON=function(t){return e.create(t.dimensions)},e}},function(t,e,n){"use strict";var r=n(19);e.name="Range",e.path="type",e.factory=function(t,e,n,i){function o(e,n,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(null!=e)if(t.isBigNumber(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(null!=n)if(t.isBigNumber(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(null!=r)if(t.isBigNumber(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=null!=e?parseFloat(e):0,this.end=null!=n?parseFloat(n):0,this.step=null!=r?parseFloat(r):1}return o.prototype.type="Range",o.prototype.isRange=!0,o.parse=function(t){if("string"!=typeof t)return null;var e=t.split(":").map((function(t){return parseFloat(t)}));if(e.some((function(t){return isNaN(t)})))return null;switch(e.length){case 2:return new o(e[0],e[1]);case 3:return new o(e[0],e[2],e[1]);default:return null}},o.prototype.clone=function(){return new o(this.start,this.end,this.step)},o.prototype.size=function(){var t=0,e=this.step,n=this.end-this.start;return r.sign(e)==r.sign(n)?t=Math.ceil(n/e):0==n&&(t=0),isNaN(t)&&(t=0),[t]},o.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},o.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},o.prototype.forEach=function(t){var e=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;e<r;)t(e,[i],this),e+=n,i++;else if(n<0)for(;e>r;)t(e,[i],this),e+=n,i++},o.prototype.map=function(t){var e=[];return this.forEach((function(n,r,i){e[r[0]]=t(n,r,i)})),e},o.prototype.toArray=function(){var t=[];return this.forEach((function(e,n){t[n[0]]=e})),t},o.prototype.valueOf=function(){return this.toArray()},o.prototype.format=function(t){var e=r.format(this.start,t);return 1!=this.step&&(e+=":"+r.format(this.step,t)),e+":"+r.format(this.end,t)},o.prototype.toString=function(){return this.format()},o.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},o.fromJSON=function(t){return new o(t.start,t.end,t.step)},o}},function(t,e){"use strict";e.name="index",e.factory=function(t,e,n,r){return r("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var n=e.map((function(e){return t.isBigNumber(e)?e.toNumber():Array.isArray(e)||t.isMatrix(e)?e.map((function(e){return t.isBigNumber(e)?e.toNumber():e})):e})),r=new t.Index;return t.Index.apply(r,n),r}})}},function(t,e){"use strict";e.name="sparse",e.factory=function(t,e,n,r){var i=t.SparseMatrix,o=r("sparse",{"":function(){return new i([])},string:function(t){return new i([],t)},"Array | Matrix":function(t){return new i(t)},"Array | Matrix, string":function(t,e){return new i(t,e)}});return o.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(19).isInteger,i=n(29).resize;e.name="zeros",e.factory=function(t,e,o,a){var s=o(n(44)),l=a("zeros",{"":function(){return"Array"===e.matrix?u([]):u([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var n=t.pop();return u(t,n)}return"Array"===e.matrix?u(t):u(t,"default")},Array:u,Matrix:function(t){var e=t.storage();return u(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return u(t.valueOf(),e)}});return l.toTex=void 0,l;function u(e,n){var o=function(e){var n=!1;return e.forEach((function(e,r,i){t.isBigNumber(e)&&(n=!0,i[r]=e.toNumber())})),n}(e)?new t.BigNumber(0):0;if(function(t){t.forEach((function(t){if("number"!=typeof t||!r(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),n){var a=s(n);return e.length>0?a.resize(e,o):a}var l=[];return e.length>0?i(l,e,o):l}}},function(t,e,n){var r=n(2),i=n(6),o=n(3);t.exports=function(t,e,n){var a,s,l=o.keys(n);o.each(l,(function(t){/[^a-z_]/i.test(a=n[t])&&(a=parseInt(a,10)),s=!1,o.each(e,(function(e){r.has(e,t)&&(s=!0)})),s&&(e=o.filter(e,(function(e){return e[t]==a})))}));var u,c,f=[],d=!1;return o.each(e,(function(e){u=!0,o.each(o.keys(t.viz.possible_filters),(function(n){c=i(t.viz.filter_data,n),e[n]!=c&&(u=!1)})),u?!1===d&&(d=!0,f.push(e)):f.push(e)})),f}},function(t,e){t.exports=function(t){var e={wrapper:{},row_search:{}};return e.row_search.box={},e.row_search.box.height=34,e.row_search.box.width=95,e.row_search.placeholder=t.row_search_placeholder,e.row_search.margin_left=7,e.slider={},e.slider.width=t.sidebar_width-30,e.slider.margin_left=15,e.key_cat={},e.key_cat.width=t.sidebar_width-15,e.key_cat.margin_left=5,e.key_cat.max_height=100,e.title=t.title,e.title_margin_left=7,e.about=t.about,e.width=t.sidebar_width,e.buttons={},e.buttons.width=t.sidebar_width-15,e.text={},e.icons=t.sidebar_icons,e.icon_margin_left=-5,e}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=r.keys(e)[0];return r.each(r.keys(t.viz.possible_filters),(function(r){if(r!=n&&!d3.select(t.root+" .slider_"+r).empty()){var i=d3.select(t.root+" .slider_"+r).attr("current_state");e[r]=i}})),e}},function(t,e,n){var r=n(68),i=n(69),o=n(71),a=n(72),s=n(73),l=n(74),u=n(75),c=n(76),f=n(81),d=n(83),h=n(2),p=n(5),g=n(84);t.exports=function(t,e=!0){return t.labels=r(t),t.viz=function(t,e=!0){var n={};n.root=t.root,n.root_tips=t.root.replace("#",".")+"_d3-tip",n.viz_wrapper=t.root+" .viz_wrapper",n.do_zoom=t.do_zoom,n.background_color=t.background_color,n.super_border_color=t.super_border_color,n.outer_margins=t.outer_margins,n.is_expand=t.ini_expand,n.grey_border_width=t.grey_border_width,n.show_dendrogram=t.show_dendrogram,n.tile_click_hlight=t.tile_click_hlight,n.inst_order=t.inst_order,n.expand_button=t.expand_button,n.sim_mat=t.sim_mat,n.dendro_filter=t.dendro_filter,n.cat_filter=t.cat_filter,n.cat_value_colors=t.cat_value_colors,n.cat_bar_width=180,n.cat_bar_height=20,n.tree_menu_width=400,n.tree_menu_height=237,n.tree_menu_x_offset=20,n.filter_menu_width=500,n.filter_menu_height=237,n.filter_menu_x_offset=20,n.update_button_width=100,n.viz_svg=n.viz_wrapper+" .viz_svg",n.zoom_element=n.viz_wrapper+" .viz_svg",n.uni_duration=1e3,n.bottom_space=10,n.run_trans=!1,n.duration=1e3,n.resize=t.resize,n.fixed_size=!!h.has(t,"size")&&t.size,n.border_fraction=65,n.uni_margin=5,n.super_labels={},n.super_labels.margin={},n.super_labels.dim={},n.super_labels.margin.left=n.grey_border_width,n.super_labels.margin.top=n.grey_border_width,n.super_labels.dim.width=0,t.labels.super_labels&&(n.super_labels.dim.width=15*t.labels.super_label_scale),n.triangle_opacity=.6,n.norm_labels={},n.norm_labels.width={},n.dendro_room={},n.dendro_room.symbol_width=n.show_dendrogram?10:0,n.cat_colors=t.cat_colors,n=g(t,n,e),0==_.has(t,"group_level")&&(n.show_dendrogram&&(t.group_level={}),0==_.has(t,"group_level")&&(t.group_level={}),t.group_level.row=5,t.group_level.col=5),n.dendro_opacity=.35,n.spillover_col_slant=n.norm_labels.width.col;var r=p(t.network_data.views);return n.possible_filters=r.possible_filters,n.filter_data=r.filter_data,n.viz_nodes={},n.viz_nodes.row=t.network_data.row_nodes_names,n.viz_nodes.col=t.network_data.col_nodes_names,n.viz_nodes.curr_row=t.network_data.row_nodes_names,n.viz_nodes.curr_col=t.network_data.col_nodes_names,n.x_offset=0,n}(t,e),i(t),(t=o(t)).viz=a(t.viz),t.viz=s(t.viz),t.viz=l(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t=u(t),t=c(t),t=f(t),d(t)}},function(t,e,n){var r=n(3);t.exports=function(t){var e={};return e.super_label_scale=t.super_label_scale,e.super_labels=t.super_labels,e.super_label_fs=13.8,e.super_labels&&(e.super={},e.super.row=t.super.row,e.super.col=t.super.col),e.show_label_tooltips=t.show_label_tooltips,e.row_max_char=r.max(t.network_data.row_nodes,(function(t){return t.name.length})).name.length,e.col_max_char=r.max(t.network_data.col_nodes,(function(t){return t.name.length})).name.length,e.max_allow_fs=t.max_allow_fs,e}},function(t,e,n){var r=n(70);t.exports=function(t){d3.select(t.root+" .viz_wrapper").empty()&&(d3.select(t.root).append("div").classed("sidebar_wrapper",!0),d3.select(t.root).append("div").classed("viz_wrapper",!0));var e=r(t);d3.select(t.root+" .sidebar_wrapper").style("float","left").style("width",t.sidebar_width+"px").style("height",e.height+"px").style("overflow","hidden"),d3.select(t.viz.viz_wrapper).style("float","left").style("width",e.width+"px").style("height",e.height+"px")}},function(t,e){t.exports=function(t){var e,n={},r=t.buffer_width,i=d3.select(t.root).style("width").replace("px",""),o=d3.select(t.root).style("height").replace("px","");return!1===t.viz.is_expand?(e=t.viz.outer_margins,n.width=i-t.sidebar_width-r):(e=t.viz.outer_margins,n.width=i-r),n.top=e.top,n.left=e.left,t.viz.resize?n.height=o:(n.width=t.viz.is_expand?t.viz.fixed_size.width:t.viz.fixed_size.width-t.sidebar_width,n.height=t.viz.fixed_size.height),n}},function(t,e){t.exports=function(t){return t.viz.svg_dim={},t.viz.svg_dim.width=Number(d3.select(t.viz.viz_wrapper).style("width").replace("px","")),t.viz.svg_dim.height=Number(d3.select(t.viz.viz_wrapper).style("height").replace("px","")),t}},function(t,e){t.exports=function(t){return t.norm_labels.margin={},t.norm_labels.margin.left=t.super_labels.margin.left+t.super_labels.dim.width,t.norm_labels.margin.top=t.super_labels.margin.top+t.super_labels.dim.width,t.label_background={},t.label_background.row=t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.label_background.col=t.norm_labels.width.col+t.cat_room.col+t.uni_margin,t}},function(t,e){t.exports=function(t){t.clust={},t.clust.margin={},t.clust.margin.left=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.clust.margin.top=t.norm_labels.margin.top+t.norm_labels.width.col+t.cat_room.col+t.uni_margin;var e=t.svg_dim.width-t.clust.margin.left-t.spillover_col_slant,n=d3.scale.ordinal().rangeBands([0,e]).domain(_.range(t.num_col_nodes)).rangeBand()/2;return n>t.norm_labels.width.col&&(e*=t.norm_labels.width.col/n),t.clust.dim={},t.clust.dim.width=e,t}},function(t,e){t.exports=function(t){return t.clust.dim.height=t.svg_dim.height-t.clust.margin.top-t.dendro_room.col-t.bottom_space,t}},function(t,e,n){var r=n(3);t.exports=function(t){var e=Math.abs(r.max(t.network_data.col_nodes,(function(t){return Math.abs(t.value)})).value);return t.labels.bar_scale_col=d3.scale.linear().domain([0,e]).range([0,.75*t.viz.norm_labels.width.col]),e=Math.abs(r.max(t.network_data.row_nodes,(function(t){return Math.abs(t.value)})).value),t.labels.bar_scale_row=d3.scale.linear().domain([0,e]).range([0,t.viz.norm_labels.width.row]),t}},function(t,e,n){var r=n(77),i=n(79),o=n(3);t.exports=function(t){var e;return t.matrix=r(t),t.viz.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),o.each(["row","col"],(function(n){"custom"===(e=t.viz.inst_order[n])&&(e="clust"),"row"===n?t.viz.x_scale.domain(t.matrix.orders[e+"_"+n]):t.viz.y_scale.domain(t.matrix.orders[e+"_"+n])})),t.viz.border_width={},t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,i(t),t}},function(t,e,n){var r=n(2),i=n(78),o=n(3);t.exports=function(t){var e={},n=t.network_data;e.tile_colors=t.tile_colors,e.bar_colors=t.bar_colors,e.outline_colors=t.outline_colors,e.hlight_color=t.highlight_color,e.tile_title=t.tile_title,e.show_tile_tooltips=t.show_tile_tooltips,e.make_tile_tooltip=t.make_tile_tooltip,e.distance_metric="cosine",e.linkage_type="average",e.filter_state="no-filter",e.normalization_state="no-normalization",e.click_hlight_x=-666,e.click_hlight_y=-666,e.click_hlight_row=-666,e.click_hlight_col=-666,e.def_large_matrix=2e4,e.opacity_function=t.opacity_scale,e.orders={},o.each(["row","col"],(function(i){var a,s=n[(a="row"===i?"col":"row")+"_nodes"],l=s.length,u=r.pluck(s,"name").sort(),c=o.map(u,(function(t){return n[a+"_nodes_names"].indexOf(t)}));e.orders["alpha_"+i]=c;var f=["clust","rank"];_.has(s[0],"rankvar")&&f.push("rankvar"),t.viz.all_cats[a].length>0&&o.each(t.viz.all_cats[a],(function(t){t=t.replace("-","_"),f.push(t+"_index")})),o.each(f,(function(t){var n=d3.range(l).sort((function(e,n){return s[n][t]-s[e][t]}));e.orders[t+"_"+i]=n}))})),e.max_link=r.has(n,"all_links")?o.max(n.all_links,(function(t){return Math.abs(t.value)})).value:o.max(n.links,(function(t){return Math.abs(t.value)})).value,e.abs_max_val=Math.abs(e.max_link)*t.clamp_opacity,0===t.input_domain?"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,e.abs_max_val]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,e.abs_max_val]).clamp(!0).range([0,1])):"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,t.input_domain]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,t.input_domain]).clamp(!0).range([0,1]));var a=r.has(n.links[0],"value_up"),s=r.has(n.links[0],"value_dn");return e.tile_type=a||s?"updn":"simple",e.highlight=r.has(n.links[0],"highlight")?1:0,e.matrix=i(n),e.wait_tooltip=0,e}},function(t,e,n){var r=n(2);t.exports=function(t){var e,n,i=[];return n=!!r.has(t.links[0],"value_orig"),t.row_nodes.forEach((function(o,a){i[a]={},i[a].name=t.row_nodes[a].name,i[a].row_index=a,i[a].row_data=d3.range(t.col_nodes.length).map((function(i){return e=r.has(t.links[0],"value_up")||r.has(t.links[0],"value_dn")?{pos_x:i,pos_y:a,value:0,value_up:0,value_dn:0,highlight:0}:{pos_x:i,pos_y:a,value:0,highlight:0},n&&(e.value_orig=0),e}))})),t.links.forEach((function(t){i[t.source].row_data[t.target].value=t.value,i[t.source].row_data[t.target].row_name=t.row_name,i[t.source].row_data[t.target].col_name=t.col_name,(r.has(t,"value_up")||r.has(t,"value_dn"))&&(i[t.source].row_data[t.target].value_up=t.value_up,i[t.source].row_data[t.target].value_dn=t.value_dn),n&&(i[t.source].row_data[t.target].value_orig=t.value_orig),t.highlight&&(i[t.source].row_data[t.target].highlight=t.highlight),t.info&&(i[t.source].row_data[t.target].info=t.info)})),i}},function(t,e,n){var r=n(80);t.exports=function(t){var e=3/t.viz.rect_height;t.viz.ds_zt=2;var n=Math.floor(Math.log(e)/Math.log(2));if(t.viz.rect_height<2&&n>0){var i;t.viz.ds_opacity_scale=d3.scale.linear().domain([1,100]).range([1,2]).clamp(!0),t.viz.ds_num_levels=n,t.viz.ds=[],t.matrix.ds_matrix=[];for(var o=t.viz.inst_order.row,a=$.extend(!0,{},t.matrix.matrix),s=0;s<n;s++){t.viz.ds_level=0,(i={}).height=3,i.num_levels=n;var l=Math.pow(2,s);i.zt=l,i.num_rows=Math.round(t.viz.clust.dim.height/(i.height/l)),i.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),i.x_scale.domain(t.matrix.orders[o+"_row"]),i.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),i.y_scale.domain(d3.range(i.num_rows+1)),i.rect_height=i.y_scale.rangeBand()-t.viz.border_width.y,t.viz.ds.push(i);var u=r(t,a,s);t.matrix.ds_matrix.push(u)}t.viz.viz_nodes.row=d3.range(t.matrix.ds_matrix[0].length).map(String)}else t.viz.ds=null,t.viz.ds_level=-1,t.viz.ds_num_levels=0}},function(t,e,n){var r=n(3);t.exports=function(t,e,n){var i,o,a,s=t.viz.ds[n].num_rows,l=t.viz.ds_opacity_scale(t.network_data.row_nodes.length/s),u=t.viz.clust.dim.height/s,c=[],f=s+1;for(o=0;o<f;o++)(i={}).row_index=o,i.name=String(o),i.all_names=[],c.push(i);r.each(e,(function(e){var n=t.viz.y_scale(e.row_index),r=Math.round(n/u),i=e.row_data;if(c[r].all_names.push(e.name),_.has(c[r],"row_data"))for(a=0;a<i.length;a++)c[r].row_data[a].value=c[r].row_data[a].value+i[a].value;else{var o=[];for(a=0;a<i.length;a++)o[a]=i[a];c[r].row_data=o}})),r.each(c,(function(t){var e=t.all_names.length;r.each(t.row_data,(function(t){t.value=t.value/e*l}))}));var d=[];return r.each(c,(function(t){d=d.concat(t.all_names)})),c}},function(t,e,n){var r=n(82);t.exports=function(t){t.viz.zoom_scale_font={},t.viz.zoom_scale_font.row=1,t.viz.zoom_scale_font.col=1;var e=t.viz.x_scale.rangeBand()/2;return t.viz.square_zoom=t.viz.norm_labels.width.col/e*.75,t.viz=r(t.viz),t}},function(t,e){t.exports=function(t){var e=t.clust.dim.width/t.num_col_nodes,n=t.clust.dim.height/t.num_row_nodes;return t.zoom_ratio={},t.zoom_ratio.x=e/n,t.zoom_ratio.y=1,t.zoom_ratio.x<1&&(t.zoom_ratio.y=1/t.zoom_ratio.x,t.zoom_ratio.x=1),t}},function(t,e){t.exports=function(t){return t.labels.default_fs_row=1.01*t.viz.y_scale.rangeBand(),t.labels.default_fs_col=.87*t.viz.x_scale.rangeBand(),t.labels.default_fs_row>t.labels.max_allow_fs&&(t.labels.default_fs_row=t.labels.max_allow_fs),t.labels.default_fs_col>t.labels.max_allow_fs&&(t.labels.default_fs_col=t.labels.max_allow_fs),t}},function(t,e,n){var r=n(85),i=n(2),o=n(86),a=n(87),s=n(3);t.exports=function(t,e,n=!0){var l,u,c;e.show_categories={},e.all_cats={},e.cat_names={},e.cat_info={},e.cat_colors={},e.cat_colors.value_opacity={row:null,col:null};var f=0;return s.each(["row","col"],(function(r){e.show_categories[r]=!1,e.all_cats[r]=[];var d=s.keys(t.network_data[r+"_nodes"][0]);d=d.sort(),s.each(d,(function(t){t.indexOf("cat-")>=0&&(e.show_categories[r]=!0,e.all_cats[r].push(t))})),e.cat_info[r]=null,e.show_categories[r]&&(e.cat_colors[r]={},e.cat_info[r]={},e.cat_names[r]={},s.each(e.all_cats[r],(function(n){var d=t.network_data[r+"_nodes"][0];"string"==typeof d[n]&&d[n].indexOf(": ")>0?(l=d[n].split(": ")[0],e.cat_names[r][n]=l):e.cat_names[r][n]=n;var h=i.pluck(t.network_data[r+"_nodes"],n),p=[];s.each(h,(function(t){var e;e=t.indexOf(": ")>0?t.split(": ")[1]:t,p.push(e)}));var g=s.uniq(h).sort();if("cat_strings"===(u=a(g)).type){var v=s.countBy(p);u.cat_hist=v}else u.cat_hist=null;e.cat_info[r][n]=u,e.cat_colors[r][n]={},s.each(g,(function(t,i){c=o.get_random_color(i+f),e.cat_colors[r][n][t]=c,"string"==typeof t&&(t.indexOf("Not ")>=0||t.indexOf(": false")>0)&&(e.cat_colors[r][n][t]="#eee"),f+=1}))}))),_.has(t.network_data,"cat_colors")&&!0===n&&(e.cat_colors[r]=t.network_data.cat_colors[r]),t.sim_mat&&(e.cat_colors.col=e.cat_colors.row)})),e.cat_colors=e.cat_colors,e.cat_colors.opacity=.6,e.cat_colors.active_opacity=.9,e=r(t,e)}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=d3.scale.linear().domain([5,15]).range([85,120]).clamp("true");return e.cat_room={},e.cat_room.symbol_width=12,e.cat_room.separation=3,r.each(["row","col"],(function(r){e.norm_labels.width[r]=n(t.labels[r+"_max_char"])*t[r+"_label_scale"],e["num_"+r+"_nodes"]=t.network_data[r+"_nodes"].length,e.dendro_room[r]="row"===r?e.dendro_room.symbol_width:e.dendro_room.symbol_width+3*e.uni_margin;var i=e.all_cats[r].length;e.cat_room[r]=e.show_categories[r]?("row"===r?i+1:i)*e.cat_room.symbol_width+(i-1)*e.cat_room.separation:"row"==r?e.cat_room.symbol_width:0})),e}},function(t,e){var n;function r(){return n.length}n=["#393b79","#aec7e8","#ff7f0e","#ffbb78","#98df8a","#bcbd22","#404040","#ff9896","#c5b0d5","#8c564b","#1f77b4","#5254a3","#FFDB58","#c49c94","#e377c2","#7f7f7f","#2ca02c","#9467bd","#dbdb8d","#17becf","#637939","#6b6ecf","#9c9ede","#d62728","#8ca252","#8c6d31","#bd9e39","#e7cb94","#843c39","#ad494a","#d6616b","#7b4173","#a55194","#ce6dbd","#de9ed6"],t.exports={get_default_color:function(){return"#EEE"},get_random_color:function(t){return n[t%r()]},get_num_colors:r}},function(t,e,n){var r=n(3);t.exports=function(t){var e=t[0],n=!1,i=!1,o="cat_strings",a=NaN,s=[],l=null;if("string"==typeof e&&e.indexOf(": ")>-1&&(n=!0,e=e.split(": ")[1]),0==isNaN(e)&&(i=!0),i&&(o="cat_values",r.each(t,(function(t){n&&(t=t.split(": ")[1]),!0===isNaN(t)?o="cat_strings":(t=parseFloat(t),s.push(t))}))),"cat_values"===o){var u=r.max(s,(function(t){return Math.abs(t)}));a=Math.abs(u),l=d3.scale.linear().domain([0,a]).range([0,1])}var c={};return c.type=o,c.max_abs_val=a,c.cat_scale=l,c}},function(t,e){t.exports=function(){return{zoom_x:1,zoom_y:1,trans_x:0,trans_y:0}}},function(t,e,n){var r=n(90),i=n(101),o=n(133),a=n(141),s=n(142),l=n(153),u=n(163),c=n(185),f=n(190),d=n(148),h=n(191),p=n(192),g=n(193),v=n(196),m=n(3);t.exports=function(t){var e=t.params;d3.select(e.viz.viz_wrapper+" svg").remove();var n=d3.select(e.viz.viz_wrapper).append("svg").attr("class","viz_svg").attr("id","svg_"+e.root.replace("#","")).attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height).attr("is_zoom",0).attr("stopped_zoom",1);function y(){var t=e.viz.super_border_color;return(e.viz.is_expand||0==e.show_viz_border)&&(t="white"),t}n.append("rect").attr("class","super_background").style("width",e.viz.svg_dim.width).style("height",e.viz.svg_dim.height).style("fill","white"),r(e,n),i(t),e.viz.show_dendrogram&&(h(t),p(t),v(t)),o(t),-1===e.viz.ds_level&&m.each(["row","col"],(function(t){Number(d3.select("."+t+"_label_group").select("text").style("font-size").replace("px",""))>8&&d3.selectAll(e.root+" ."+t+"_label_group").each((function(){d(e,this,t)}))})),f(t),e.viz.show_categories.col&&c(t),s(t),e.labels.super_labels&&a(e),g(t),d3.select(e.viz.viz_svg).append("rect").classed("left_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.grey_border_width).attr("height",e.viz.svg_dim.height).attr("transform","translate(0,0)"),d3.select(e.viz.viz_svg).append("rect").classed("right_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.grey_border_width).attr("height",e.viz.svg_dim.height).attr("transform",(function(){return"translate("+(e.viz.svg_dim.width-e.viz.grey_border_width)+",0)"})),d3.select(e.viz.viz_svg).append("rect").classed("top_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.svg_dim.width).attr("height",e.viz.grey_border_width).attr("transform",(function(){return"translate(0,0)"})),d3.select(e.viz.viz_svg).append("rect").classed("bottom_border",!0).classed("borders",!0).attr("fill",y).attr("width",e.viz.svg_dim.width).attr("height",e.viz.grey_border_width).attr("transform",(function(){return"translate(0,"+(e.viz.svg_dim.height-e.viz.grey_border_width)+")"})),l(t),u(t),e.viz.do_zoom&&d3.select(e.viz.zoom_element).call(e.zoom_behavior),d3.select(e.viz.zoom_element).on("dblclick.zoom",null)}},function(t,e,n){var r=n(2),i=n(91),o=n(92),a=n(93);t.exports=function(t,e){var n,s=t.network_data,l=[];(n=e.append("g").attr("class","clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")").append("g").attr("class","clust_group").classed("clust_group",!0)).append("rect").classed("background",!0).classed("grey_background",!0).style("fill","#eee").style("opacity",.25).attr("width",t.viz.clust.dim.width).attr("height",t.viz.clust.dim.height),a(t,null===t.viz.ds?t.matrix.matrix:t.matrix.ds_matrix[0],"all",t.viz.ds_level),"function"==typeof t.click_tile?d3.selectAll(t.root+" .tile").on("click",(function(e){var n={};n.row=t.network_data.row_nodes[e.pos_y].name,n.col=t.network_data.col_nodes[e.pos_x].name,n.value=e.value,r.has(e,"value_up")&&(n.value_up=e.value_up),r.has(e,"value_dn")&&(n.value_dn=e.value_dn),r.has(e,"info")&&(n.info=e.info),t.click_tile(n),o(t,this)})):t.tile_click_hlight&&d3.selectAll(t.root+" .tile").on("click",(function(){o(t,this)}));return i(t,{enter:0},0),{get_clust_group:function(){return n},get_matrix:function(){return l},get_nodes:function(t){return"row"===t?s.row_nodes:s.col_nodes}}}},function(t,e){t.exports=function(t,e,n){}},function(t,e){t.exports=function(t,e){d3.select(e).each((function(n){var r=n.pos_x,i=n.pos_y;if(d3.selectAll(t.root+" .click_hlight").remove(),r!=t.matrix.click_hlight_x||i!=t.matrix.click_hlight_y){t.matrix.click_hlight_x=r,t.matrix.click_hlight_y=i;var o=6*t.viz.border_width.x,a=6*t.viz.border_width.y;d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("top_hlight",!0).attr("width",t.viz.x_scale.rangeBand()).attr("height",a).attr("fill",t.matrix.hlight_color).attr("transform",(function(){return"translate("+t.viz.x_scale(r)+",0)"})).attr("opacity",.85),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("left_hlight",!0).attr("width",o).attr("height",t.viz.y_scale.rangeBand()-.99*a).attr("fill",t.matrix.hlight_color).attr("transform",(function(){return"translate("+t.viz.x_scale(r)+","+.99*a+")"})).attr("opacity",.85),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("right_hlight",!0).attr("width",o).attr("height",t.viz.y_scale.rangeBand()-.99*a).attr("fill",t.matrix.hlight_color).attr("transform",(function(){return"translate("+(t.viz.x_scale(r)+t.viz.x_scale.rangeBand()-o)+","+.99*a+")"})).attr("opacity",.85),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("bottom_hlight",!0).attr("width",(function(){return t.viz.x_scale.rangeBand()-1.98*o})).attr("height",a).attr("fill",t.matrix.hlight_color).attr("transform",(function(){return"translate("+(t.viz.x_scale(r)+.99*o)+","+(t.viz.y_scale.rangeBand()-a)+")"})).attr("opacity",.85)}else t.matrix.click_hlight_x=-666,t.matrix.click_hlight_y=-666}))}},function(t,e,n){var r=n(94),i=n(100),o=n(3);t.exports=function(t,e,n="all",a=-1){var s=t.viz.y_scale,l=!0,u="row";if(a>=0&&(s=t.viz.ds[a].y_scale,l=!1,u="ds"+String(a)+"_row"),l)var c=i().attr("class",(function(){var e=t.viz.root_tips.replace(".","");return e+" d3-tip "+e+"_tile_tip"})).style("display","none").direction("nw").offset([0,0]).html((function(e){var n,r=String(e.value.toFixed(3));if(t.keep_orig){var i=String(e.value_orig.toFixed(3));n="<p>"+e.row_name+" and "+e.col_name+"</p><p> normalized value: "+r+"</p><div> original value: "+i+"</div>"}else n="<p>"+e.row_name+" and "+e.col_name+"</p><div> value: "+r+"</div>";return n}));else c=null;var f=[];"all"===n?f=e:o.each(e,(function(t){o.contains(n,t.name)&&f.push(t)})),d3.select(t.root+" .clust_group").selectAll(".row").data(f,(function(t){return t.name})).enter().append("g").classed(u,!0).attr("transform",(function(t){return"translate(0,"+s(t.row_index)+")"})).each((function(e){r(t,e,c,this,a)})),-1===t.viz.ds_level&&null!=c&&d3.selectAll(t.root+" .row").call(c)}},function(t,e,n){var r=n(95),i=n(96),o=n(97),a=n(98),s=n(99),l=n(3);t.exports=function(t,e,n,u,c=-1){var f,d=e.row_data,h=t.viz.rect_height;c>=0&&(h=t.viz.ds[c].rect_height),f=0==!!_.has(t.network_data.links[0],"value_orig")?l.filter(d,(function(t){return 0!==t.value})):d;var p=d3.select(u).selectAll("rect").data(f,(function(t){return t.col_name})).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",h).style("fill",(function(e){return"NaN"===e.value_orig?"#000000":e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]})).style("fill-opacity",(function(e){return"NaN"===e.value_orig?.175:t.matrix.opacity_scale(Math.abs(e.value))})).attr("transform",(function(e){return s(t,e)}));if(p.on("mouseover",(function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];o(t,this,n,r)})).on("mouseout",(function(){a(t,this,n)})),"updn"==t.matrix.tile_type){var g=l.filter(d,(function(t){return 0!=t.value_up||0!=t.value_dn}));d3.select(u).selectAll(".tile_up").data(g,(function(t){return t.col_name})).enter().append("path").attr("class","tile_up").attr("d",(function(){return r(t)})).attr("transform",(function(e){s(t,e)})).style("fill",(function(){return t.matrix.tile_colors[0]})).style("fill-opacity",(function(e){var n=0;return Math.abs(e.value_dn)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_up))),n})).on("mouseover",(function(...e){o(t,this,n,e)})).on("mouseout",(function(){a(t,this,n)})),d3.select(u).selectAll(".tile_dn").data(g,(function(t){return t.col_name})).enter().append("path").attr("class","tile_dn").attr("d",(function(){return i(t)})).attr("transform",(function(e){s(t,e)})).style("fill",(function(){return t.matrix.tile_colors[1]})).style("fill-opacity",(function(e){var n=0;return Math.abs(e.value_up)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_dn))),n})).on("mouseover",(function(...e){o(t,this,n,e)})).on("mouseout",(function(){a(t,this,n)})),p.each((function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()}))}t.matrix.tile_title&&p.append("title").text((function(t){return"value: "+t.value}))}},function(t,e){t.exports=function(t){var e=t.viz.x_scale.rangeBand()-t.viz.border_width.x;return"M0,0 L0, "+(t.viz.y_scale.rangeBand()-t.viz.border_width.y)+" L"+e+",0 Z"}},function(t,e){t.exports=function(t){var e=t.viz.x_scale.rangeBand()-t.viz.border_width.x;return"M0, "+(t.viz.y_scale.rangeBand()-t.viz.border_width.y)+"   L"+e+", "+(t.viz.y_scale.rangeBand()-t.viz.border_width.y)+" L"+e+",0 Z"}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i){var o,a=i[0],s=[].slice.call(i);d3.select(e).classed("hovering",!0),r.each(["row","col"],(function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight",(function(t){return a[e+"_name"].replace(/_/g," ")===t.name?"bold":"normal"}))})),s.push(e),clearTimeout(o),o=setTimeout((function(){d3.select(e).classed("hovering")&&0===Number(d3.select(t.root+" .viz_svg").attr("is_zoom"))&&t.matrix.show_tile_tooltips&&null!==n&&(d3.selectAll(t.viz.root_tips+"_tile_tip").style("display","block"),n.show.apply(e,s),null!=t.tile_tip_callback&&t.tile_tip_callback(s[0]))}),1e3,e)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n){d3.select(e).classed("hovering",!1),d3.selectAll(t.viz.root_tips+"_tile_tip").style("display","none"),r.each(["row","col"],(function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight","normal")})),null!=n&&n.hide()}},function(t,e){t.exports=function(t,e){return"translate("+((e.pos_x in t.viz.x_scale.domain()?t.viz.x_scale(e.pos_x):0)+.5*t.viz.border_width.x)+","+.5*t.viz.border_width.y+")"}},function(t,e){t.exports=function(){var t=function(){return"n"},e=function(){return[0,0]},n=function(){return" "},r=function(){var t=d3.select(document.createElement("div"));return t.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"}),t.node()}(),i=null,o=null,a=null;function s(t){var e;i="svg"==(e=(e=t).node()).tagName.toLowerCase()?e:e.ownerSVGElement,o=i.createSVGPoint(),document.body.appendChild(r)}s.show=function(){var i=Array.prototype.slice.call(arguments);i[i.length-1]instanceof SVGElement&&(a=i.pop());var o,c=n.apply(this,i),h=e.apply(this,i),p=t.apply(this,i),g=d3.select(r),v=0;for(g.html(c).style({opacity:1,"pointer-events":"all"}).style("z-index",99);v--;)g.classed(u[v],!1);if(o=l.get(p).apply(this),g.classed(p,!0).style({top:o.top+h[0]+"px",left:o.left+h[1]+"px"}),!1===d(this)){var m=d3.select(this).attr("class");m.indexOf("tile")>=0&&setTimeout(f,5e3,this)}return s},s.hide=function(){return d3.select(r).style({opacity:0,"pointer-events":"none"}),s},s.attr=function(t){if(arguments.length<2&&"string"==typeof t)return d3.select(r).attr(t);var e=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(d3.select(r),e),s},s.style=function(t){if(arguments.length<2&&"string"==typeof t)return d3.select(r).style(t);var e=Array.prototype.slice.call(arguments);return d3.selection.prototype.style.apply(d3.select(r),e),s},s.direction=function(e){return arguments.length?(t=null==e?e:d3.functor(e),s):t},s.offset=function(t){return arguments.length?(e=null==t?t:d3.functor(t),s):e},s.html=function(t){return arguments.length?(n=null==t?t:d3.functor(t),s):n};var l=d3.map({n:function(){var t=c();return{top:t.n.y-r.offsetHeight,left:t.n.x-r.offsetWidth/2}},s:function(){var t=c();return{top:t.s.y,left:t.s.x-r.offsetWidth/2}},e:function(){var t=c();return{top:t.e.y-r.offsetHeight/2,left:t.e.x}},w:function(){var t=c();return{top:t.w.y-r.offsetHeight/2,left:t.w.x-r.offsetWidth}},nw:function(){var t=c();return{top:t.nw.y-r.offsetHeight,left:t.nw.x-r.offsetWidth}},ne:function(){var t=c();return{top:t.ne.y-r.offsetHeight,left:t.ne.x}},sw:function(){var t=c();return{top:t.sw.y,left:t.sw.x-r.offsetWidth}},se:function(){var t=c();return{top:t.se.y,left:t.e.x}},south_custom:function(){var t=c();return{top:t.s.y,left:t.s.x}}}),u=l.keys();function c(){var t=a||d3.event.target,e={},n=t.getScreenCTM(),r=t.getBBox(),i=r.width,s=r.height,l=r.x,u=r.y,c=document.documentElement.scrollTop||document.body.scrollTop,f=document.documentElement.scrollLeft||document.body.scrollLeft;return n.a=1,n.d=1,n.e=n.e+f,n.f=n.f+c,o.x=l,o.y=u,e.nw=o.matrixTransform(n),o.x=o.x+i,e.ne=o.matrixTransform(n),o.y=o.y+s,e.se=o.matrixTransform(n),o.x=o.x-i,e.sw=o.matrixTransform(n),o.y=o.y-s/2,e.w=o.matrixTransform(n),o.x=o.x+i,e.e=o.matrixTransform(n),o.x=o.x-i/2,o.y=o.y-s/2,e.n=o.matrixTransform(n),o.y=o.y+s,e.s=o.matrixTransform(n),e}function f(t){d3.select(t).classed("hovering")&&d3.selectAll(".d3-tip").transition().duration(250).style("opacity",0).style("display","none")}function d(t){return t&&"[object Function]"==={}.toString.call(t)}return s}},function(t,e,n){var r=n(102);t.exports=function(t,e){var n,i=t.params;n=d3.select(i.viz.viz_svg+" .row_container").empty()?d3.select(i.viz.viz_svg).append("g").classed("row_container",!0).attr("transform","translate("+i.viz.norm_labels.margin.left+","+i.viz.clust.margin.top+")"):d3.select(i.viz.viz_svg).select(".row_container").attr("transform","translate("+i.viz.norm_labels.margin.left+","+i.viz.clust.margin.top+")"),d3.select(i.root+" .row_white_background").empty()&&n.append("rect").classed("row_white_background",!0).classed("white_bars",!0).attr("fill",i.viz.background_color).attr("width",i.viz.label_background.row).attr("height",30*i.viz.clust.dim.height+"px"),d3.select(i.root+" .row_label_container").empty()?n.append("g").classed("row_label_container",!0).attr("transform","translate("+i.viz.norm_labels.width.row+",0)").append("g").classed("row_label_zoom_container",!0):n.select(i.root+" .row_label_container").attr("transform","translate("+i.viz.norm_labels.width.row+",0)"),-1===i.viz.ds_level&&r(t,"all",e)}},function(t,e,n){var r=n(2),i=n(103),o=n(104),a=n(132),s=n(3);t.exports=function(t,e="all",n=0){var l=t.params,u=[];"all"===e?u=l.network_data.row_nodes:s.each(l.network_data.row_nodes,(function(t){s.contains(e,t.name)&&u.push(t)}));var c=d3.select(l.root+" .row_label_zoom_container").selectAll("g").data(u,(function(t){return t.name})).enter().append("g").classed("row_label_group",!0),f=l.network_data.row_nodes_names;c.attr("transform",(function(t){var e=s.indexOf(f,t.name);return"translate(0,"+l.viz.y_scale(e)+")"})),c.on("dblclick",(function(e){o(t,this,this.__data__.name),l.tile_click_hlight&&i(this,e.ini)})),a(l),c.insert("rect").style("opacity",0),c.append("text").attr("y",.5*l.viz.rect_height+.35*l.labels.default_fs_row).attr("text-anchor","end").style("font-size",l.labels.default_fs_row+"px").text((function(t){return r.normal_name(t)})).attr("pointer-events","none").style("opacity",0).style("cursor","default").transition().delay(n).duration(n).style("opacity",1),c.each((function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",l.viz.y_scale.rangeBand()).style("fill",(function(){return"yellow"})).style("opacity",(function(t){var e=0;return 1===t.target&&(e=1),e}))})),r.has(l.network_data.row_nodes[0],"value")&&c.append("rect").classed("row_bars",!0).attr("width",(function(t){return l.labels.bar_scale_row(Math.abs(t.value))})).attr("x",(function(t){return-l.labels.bar_scale_row(Math.abs(t.value))})).attr("height",l.viz.y_scale.rangeBand()).attr("fill",(function(t){return t.value>0?l.matrix.bar_colors[0]:l.matrix.bar_colors[1]})).attr("opacity",.4)}},function(t,e){t.exports=function(t,e,n){if(n!=t.click_hlight_row){var r=6*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_top_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_bottom_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85).attr("transform",(function(){return"translate(0,"+(t.viz.y_scale.rangeBand()-r)+")"}))}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_row=-666}},function(t,e,n){var r=n(105),i=n(106),o=n(88),a=n(131),s=n(79),l=n(3);t.exports=function(t,e,n){var u=t.params,c=a(u);if(1===c.zoom_y&&1===c.zoom_x){u.viz.inst_order.row="custom",i(t,"col"),d3.selectAll(u.root+" .toggle_col_order .btn").classed("active",!1),u.viz.run_trans=!0;var f=$.extend(!0,{},u.matrix.matrix),d=u.network_data.col_nodes,h=[];u.network_data.row_nodes.forEach((function(t){h.push(t.name)})),n=l.indexOf(h,n),h=[],d.forEach((function(t,e){h.push(f[n].row_data[e].value)}));var p,g=d3.range(h.length).sort((function(t,e){return h[e]-h[t]}));u.viz.x_scale.domain(g),u.matrix.orders.custom_row=g,p=u.network_data.links.length>u.matrix.def_large_matrix?d3.select(u.root+" .viz_svg"):d3.select(u.root+" .viz_svg").transition().duration(2500);var v=u.network_data.col_nodes_names;p.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",(function(t){var e=l.indexOf(v,t.name);return"translate("+u.viz.x_scale(e)+")rotate(-90)"})),p.selectAll(".col_cat_group").attr("transform",(function(t){var e=l.indexOf(v,t.name);return"translate("+u.viz.x_scale(e)+",0)"})),-1===u.viz.ds_level&&(p.selectAll(".tile").attr("transform",(function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"})),p.selectAll(".tile_up").attr("transform",(function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"})),p.selectAll(".tile_dn").attr("transform",(function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"}))),d3.selectAll(u.root+" .row_label_group").select("rect").style("opacity",0),d3.select(e).select("rect").style("opacity",1),r(u),u.network_data.links.forEach((function(t){t.x=u.viz.x_scale(t.target),t.y=u.viz.y_scale(t.source)})),u.zoom_info=o(),setTimeout((function(){u.viz.run_trans=!1}),2500),u.viz.ds_num_levels>0&&u.viz.ds_level>=0&&s(u)}}},function(t,e){t.exports=function(t){var e=6*t.viz.border_width.x,n=6*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.x_scale.rangeBand()).attr("height",n).transition().duration(2500).attr("transform",(function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"})),d3.select(t.root+" .left_hlight").attr("width",e).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",(function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"})),d3.select(t.root+" .right_hlight").attr("width",e).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",(function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.x_scale.rangeBand()-e)+","+.99*n+")"})),d3.select(t.root+" .bottom_hlight").attr("width",(function(){return t.viz.x_scale.rangeBand()-1.98*e})).attr("height",n).transition().duration(2500).attr("transform",(function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+.99*e)+","+(t.viz.y_scale.rangeBand()-n)+")"}))}},function(t,e,n){var r=n(107);t.exports=function(t,e,n=1500){var i=t.params;"row"===e&&"clust"===i.viz.inst_order.col&&setTimeout(r,n,t,"row",!0),"col"===e&&"clust"===i.viz.inst_order.row&&setTimeout(r,n,t,"col",!0),"clust"!=i.viz.inst_order.row&&!1===i.viz.dendro_filter.col&&(d3.selectAll(i.root+" .col_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null),d3.select(i.root+" .col_slider_group").style("opacity",0),d3.selectAll(i.root+" .col_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null)),"clust"!=i.viz.inst_order.col&&!1===i.viz.dendro_filter.row&&(d3.selectAll(i.root+" .row_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null).on("click",null),d3.select(i.root+" .row_slider_group").style("opacity",0),d3.selectAll(i.root+" .row_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null))}},function(t,e,n){var r=n(108),i=n(109),o=n(110),a=n(100),s=n(112),l=n(115);t.exports=function(t,e,n=!1){var u,c,f=t.params;"both"===e&&(e="row"),"clust"===f.viz.inst_order[u="row"===e?"col":"row"]&&d3.select(f.root+" ."+e+"_slider_group").style("opacity",1),f.viz.show_dendrogram&&(c="row"===e?r(f):i(f),!1===d3.select(t.params.root+" ."+e+"_dendro_crop_buttons").empty()&&s(t,e));var d,h=f.viz.dendro_opacity;function p(t,n,r){if(d3.select(t).classed("hovering")){var i=f.viz.root_tips+"_"+e+"_dendro_tip";d3.select(i+" .cat_graph").empty()&&null!==f.viz.cat_info[e]&&l(f,e,n,c[r],i,!0),d3.selectAll(f.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",1)}}d3.selectAll(t.params.viz.root_tips+"_"+e+"_dendro_tip").remove(),d3.selectAll(f.root+" ."+e+"_dendro_group").empty()?d=!1:(d=!0,d3.selectAll(f.root+" ."+e+"_dendro_group").remove());var g=a().attr("class",(function(){var t=f.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_"+e+"_dendro_tip"})).direction("nw").offset([0,-5]).style("display","none").style("opacity",0);g.html((function(){return'<div class="cluster_info_container"></div>Click for cluster information <br>and additional options.'})),n&&(d=!1);var v,m,y,_,b,w,x,k=d3.select(f.root+" ."+e+"_dendro_container").selectAll("path").data(c,(function(t){return t.name})).enter().append("path").style("opacity",0).attr("class",e+"_dendro_group").style("fill","black");k.attr("d",(function(t){return"row"===e?(v=0,m=t.pos_top,y=30,_=t.pos_mid,b=0,w=t.pos_bot):(v=t.pos_top,m=0,y=t.pos_mid,_=30,b=t.pos_bot,w=0),"M"+v+","+m+" L"+y+", "+_+" L"+b+","+w+" Z"})),k.on("mouseover",(function(n,r){d3.select(this).classed("hovering",!0),null!=t.params.dendro_callback&&t.params.dendro_callback(this),d3.select(f.viz.root_tips+"_"+e+"_dendro_tip").style("display","block"),o(f,this,n,e),g.show(n),d3.select(f.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",0),setTimeout(p,500,this,n,r)})).on("mouseout",(function(){"clust"===f.viz.inst_order[u]&&d3.select(this).style("opacity",h),d3.selectAll(f.root+" .dendro_shadow").remove(),d3.select(this).classed("hovering",!1),g.hide(this)})).on("click",(function(n,r){$(f.root+" .dendro_info").modal("toggle");var i=n.all_names.join(", ");d3.select(f.root+" .dendro_info input").attr("value",i);var o=f.root+" .dendro_info";d3.selectAll(".dendro_info .cluster_info_container .cat_graph").remove(),null!==f.viz.cat_info[e]&&l(f,e,n,c[r],o),null!=t.params.dendro_click_callback&&t.params.dendro_click_callback(this)})).call(g),x="clust"===f.viz.inst_order[u]?h:0,d?d3.select(f.root+" ."+e+"_dendro_container").selectAll("path").transition().delay(1e3).duration(1e3).style("opacity",x):d3.select(f.root+" ."+e+"_dendro_container").selectAll("path").style("opacity",x)}},function(t,e,n){var r=n(3);t.exports=function(t){var e={},n=t.group_level.row,i=t.network_data.row_nodes_names;r.each(t.network_data.row_nodes,(function(o){var a=o.group[n],s=r.indexOf(i,o.name),l=t.viz.y_scale(s),u=l+t.viz.y_scale.rangeBand();!1===r.has(e,a)&&(e[a]={},e[a].name_top=o.name,e[a].name_bot=o.name,e[a].pos_top=l,e[a].pos_bot=u,e[a].pos_mid=(l+u)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="row"),e[a].all_names.push(o.name),l<e[a].pos_top&&(e[a].name_top=o.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),u>e[a].pos_bot&&(e[a].name_bot=o.name,e[a].pos_bot=u,e[a].pos_mid=(e[a].pos_top+u)/2)}));var o=[];return r.each(e,(function(t){o.push(t)})),o}},function(t,e,n){var r=n(3);t.exports=function(t){var e={},n=t.group_level.col,i=t.network_data.col_nodes_names;r.each(t.network_data.col_nodes,(function(o){var a=o.group[n],s=r.indexOf(i,o.name),l=t.viz.x_scale(s),u=l+t.viz.x_scale.rangeBand();!1===r.has(e,a)&&(e[a]={},e[a].name_top=o.name,e[a].name_bot=o.name,e[a].pos_top=l,e[a].pos_bot=u,e[a].pos_mid=(l+u)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="col"),e[a].all_names.push(o.name),l<e[a].pos_top&&(e[a].name_top=o.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),u>e[a].pos_bot&&(e[a].name_bot=o.name,e[a].pos_bot=u,e[a].pos_mid=(e[a].pos_top+u)/2)}));var o=[];return r.each(e,(function(t){o.push(t)})),o}},function(t,e,n){var r=n(111);t.exports=function(t,e,n,i){d3.selectAll(t.root+" ."+i+"_dendro_crop_buttons")[0].length>1?setTimeout((function(){d3.select(e).classed("hovering")&&!1===t.is_slider_drag&&(d3.select(e).style("opacity",.7),!1===d3.select(t.viz.viz_svg).classed("running_update")&&("row"===i?"clust"===t.viz.inst_order.col&&r(t,e,i,n):"col"===i?"clust"===t.viz.inst_order.row&&r(t,e,i,n):"both"===i&&("clust"===t.viz.inst_order.col&&r(t,e,"row",n),"clust"===t.viz.inst_order.row&&r(t,e,"col",n))))}),500):d3.selectAll(t.root+" .dendro_shadow").remove()}},function(t,e){t.exports=function(t,e,n,r){var i;d3.selectAll(t.root+" .dendro_shadow").remove(),"row"==n?(d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",r.pos_top+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2),i=t.viz.clust.dim.height-r.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",i+"px").attr("transform","translate(0,"+r.pos_bot+")").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2)):"col"===n&&(d3.select(t.root+" .clust_group").append("rect").attr("width",r.pos_top+"px").attr("height",t.viz.clust.dim.height+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2),i=t.viz.clust.dim.width-r.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",i+"px").attr("height",t.viz.clust.dim.height+"px").attr("transform","translate("+r.pos_bot+",0)").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",.2))}},function(t,e,n){var r=n(108),i=n(109),o=n(100),a=n(110),s=n(113),l=n(114);t.exports=function(t,e){var n,u,c=t.params,f=.6*c.viz.dendro_opacity;"row"===e?(n=r(c),u="col"):(n=i(c),u="row");var d,h,p,g,v,m,y,_=o().attr("class",(function(){var t=c.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_"+e+"_dendro_crop_tip"})).direction("nw").style("display","none").offset([5,-5]);d3.selectAll(c.viz.root_tips+"_"+e+"_dendro_crop_tip").remove(),d3.selectAll(c.root+" ."+e+"_dendro_crop_buttons").remove();var b,w,x,k=e+"_dendro_crop_buttons";function E(t){d3.select(t).classed("hovering")&&d3.selectAll(c.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",1).style("display","block")}!1===d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter")?(d=d3.select(c.root+" ."+e+"_dendro_icons_group").selectAll("path").data(n,(function(t){return t.name})).enter().append("path").classed(k,!0).attr("d",(function(t){b=10,w=10;var n=t.pos_bot-t.pos_top;return"row"===e?(n<45&&(b=.25*n),h=w,p=-b,g=0,v=0,m=w,y=b,x=b):(n<45&&(w=.25*n),h=-w,p=b,g=0,v=0,m=w,y=b,x=w),d3.select(this)[0][0].__data__.tri_dim=x,"M"+h+","+p+" L"+g+", "+v+" L"+m+","+y+" Z"})),_.html((function(){return"Click to crop cluster"}))):(d=d3.select(c.root+" ."+e+"_dendro_icons_group").selectAll("path").data(n,(function(t){return t.name})).enter().append("path").classed(k,!0).attr("d",(function(t){b=10,w=12;var n=t.pos_bot-t.pos_top;return"row"===e?(n<45&&(b=.25*n),h=0,p=-b,g=w,v=0,m=0,y=b):(n<45&&(w=.25*n),h=-w,p=0,g=0,v=b,m=w,y=0),d3.select(this)[0][0].__data__.tri_dim=10,"M"+h+","+p+" L"+g+", "+v+" L"+m+","+y+" Z"})),_.html((function(){return"Click to undo crop"}))),d.style("cursor","pointer").style("opacity",(function(){return f})).attr("transform",(function(t){var n,r;return"row"===e?(n=c.viz.uni_margin,r=t.pos_mid):(n=t.pos_mid,r=c.viz.uni_margin),"translate("+n+","+r+")"})).on("mouseover",(function(t){d3.select(this).classed("hovering",!0),_.show(t),a(c,this,t,e),d3.selectAll(c.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",0).style("display","block"),setTimeout(E,500,this)})).on("mouseout",(function(){d3.select(this).classed("hovering",!1),d3.selectAll(c.root+" .dendro_shadow").remove(),d3.select(this).style("opacity",f),_.hide(this)})).on("click",(function(n){d3.select(this).style("opacity",.9).transition().duration(1e3).style("opacity",0),d3.selectAll(c.root+" .dendro_shadow").remove(),!1===t.params.dendro_filter.row&&!1===t.params.dendro_filter.col&&!1===t.params.cat_filter.row&&!1===t.params.cat_filter.col?(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!0),d3.select(t.params.root+" ."+u+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),d3.select(t.params.root+" ."+e+"_slider_group").style("display","none"),d3.select(t.params.root+" ."+u+"_dendro_icons_container").style("display","none"),d3.select(t.params.root+" .crop_button").style("opacity",.2)):(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!1),d3.select(t.params.root+" ."+u+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),"clust"===c.viz.inst_order[u]&&d3.select(t.params.root+" ."+e+"_slider_group").style("display","block"),d3.select(t.params.root+" ."+u+"_dendro_icons_container").style("display","block"),d3.select(t.params.root+" .crop_button").style("opacity",1)),s(t,n,e)})).call(_),"clust"!=c.viz.inst_order[u]&&d3.select(c.root+" ."+e+"_dendro_icons_group").selectAll("path").style("display","none"),l(c,c.zoom_info,e)}},function(t,e){t.exports=function(t,e,n){var r={};if(!1===t.params.dendro_filter.row&&!1===t.params.dendro_filter.col&&!1===t.params.cat_filter.row&&!1===t.params.cat_filter.col){d3.select(t.params.root+" ."+n+"_slider_group").style("opacity",.35).style("pointer-events","none"),r[n]=e.all_names;var i=t.params.network_data[n+"_nodes_names"],o=t.params.network_data.row_nodes,a=t.params.network_data.col_nodes;t.filter_viz_using_names(r),t.params.inst_nodes.row_nodes=o,t.params.inst_nodes.col_nodes=a,d3.selectAll(t.params.root+" .dendro_shadow").transition().duration(1e3).style("opacity",0).remove(),t.params.dendro_filter[n]=i}else r[n]=t.params.dendro_filter[n],t.filter_viz_using_names(r),t.params.dendro_filter[n]=!1}},function(t,e){t.exports=function(t,e,n){function r(t,e){return e*t<10?1:t/(10/e)}"row"===n?d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",(function(n){return"translate("+t.viz.uni_margin+","+n.pos_mid+") scale(1, "+1/r(e.zoom_y,d3.select(this).data()[0].tri_dim)+")"})):d3.select(t.root+" .col_dendro_icons_group").selectAll("path").attr("transform",(function(n){return"translate("+n.pos_mid+","+t.viz.uni_margin+") scale("+1/r(e.zoom_x,d3.select(this).data()[0].tri_dim)+", 1)"}))}},function(t,e,n){var r=n(116),i=n(3),o=n(129),a=n(130);t.exports=function(t,e,n,s,l,u=!1){"both"===e&&(e="row");var c=r(t,n,e);if(c.length>0){var f=d3.select(l+" .cluster_info_container"),d=370,h=177,p=!1;null!=c[0].bar_data[0][5]&&(d+=100,h=h+150-47,p=!0);var g=s.all_names.length,v=4;p&&(v=5,g=0,i.each(c[0].bar_data,(function(t){g+=t[5]})));var m=20;i.each(c.slice(0,3),(function(t){var e=t.bar_data.length;e>25&&(e=25),m+=27*(e+1)})),u&&f.append("text").text("Cluster Information");var y=f.append("div").style("margin-top","5px").classed("cat_graph",!0).append("svg").style("height",m+"px").style("width",d+"px");f.style("margin-bottom","5px"),y.append("rect").classed("cat_background",!0).attr("height",m+"px").attr("width",d+"px").attr("fill","white").attr("opacity",1),c=c.slice(0,3);var _=d3.scale.linear().domain([0,1e5]).range([20,30]),b=27;if(i.each(c,(function(e){var n=_(e.bar_data[0][v]),r=y.append("g").classed("cat_graph_group",!0).attr("transform","translate(10, "+b+")"),i=r.append("g").classed("cat_bar_container",!0).attr("transform","translate(0, 10)").selectAll("g").data(e.bar_data).enter().append("g").attr("transform",(function(t,e){return"translate(0,"+23*e+")"}));o(t,e,r,27,v,25,i),a(t,r,i,4,p,n,v,g),b+=27*(e.bar_data.length+1)})),u){var w=d3.select(l),x=w.style("top").split(".px")[0],k=w.style("left").split(".px")[0],E=0,z=0;"row"===e?(E=0,z=h):(E=m+32,z=30),w.style("top",(function(){return String(parseInt(x,10)-E)+"px"})).style("left",(function(){return String(parseInt(k,10)-z)+"px"}))}}}},function(t,e,n){var r=n(117),i=n(3);t.exports=function(t,e,n){"both"===n&&(n="row");var o=e.all_names,a=[],s=null,l=!1;i.each(t.network_data[n+"_nodes"],(function(t){o.indexOf(t.name)>=0&&a.push(t)}));var u=[];if(null!==t.viz.cat_info[n]){for(var c,f,d,h=i.keys(t.viz.cat_info[n]),p=[],g=[],v=0;v<h.length;v++)d="cat-"+String(v),"cat_strings"===t.viz.cat_info[n][d].type?(g.push(c=t.viz.cat_names[n][d]),p.push(d)):"number in clust"===t.viz.cat_names[n][d]&&(s=d,l=!0);var m,y,b={},w={},x=4;if(l&&(x=5),y=c===d,g.length>0){var k,E=o.length;i.each(p,(function(e){if(f=e.split("-")[1],c=g[f],y)if(e.indexOf("-")>=0){var o=parseInt(e.split("-")[1],10)+1;c="Category "+String(o)}else c="Category";var l;b[c]={},i.each(a,(function(t){(k=t[e]).indexOf(": ")>=0&&(k=k.split(": ")[1]),k in b[c]?(b[c][k].num_nodes=b[c][k].num_nodes+1,null!=s&&(b[c][k].num_nodes_ds=b[c][k].num_nodes_ds+parseInt(t[s].split(": ")[1],10))):(b[c][k]={},b[c][k].num_nodes=1,null!=s&&(b[c][k].num_nodes_ds=parseInt(t[s].split(": ")[1],10)))})),(w={}).type_name=c,w.num_in_clust=E,m=[];var d=b[c];for(var h in d){l=y?h:c+": "+h;var p=d[h].num_nodes,v=r(p,E,t.viz.cat_info[n][e].cat_hist[h]/t.network_data[n+"_nodes"].length);if(_.has(d[h],"num_nodes_ds"))var z=d[h].num_nodes_ds;else z=null;m.push([e,l,d[h],t.viz.cat_colors[n][e][l],p,z,v])}m.sort((function(t,e){return e[x]-t[x]})),w.bar_data=m,u.push(w)}))}}return u}},function(t,e,n){var r=n(118),i=n(13).create();i.import(n(119)),t.exports=function(t,e,n){var o,a=i.factorial;function s(t,e,n){return a(e)/(a(t)*a(e-t))*(Math.pow(n,t)*Math.pow(1-n,e-t))}return o=function(t,e,n){for(var r=0,i=t;i<e+1;i++)r+=s(i,e,n);return r}(t,e,n),isNaN(o)&&(o=function(t,e,n){for(var i=(t-e*n)/Math.sqrt(e*n*(1-n)),a=r.z,s=r.p,l=-1,u=!1,c=0;c<a.length;c++)i<a[c]&&!1===u&&(l=c,u=!0);return-1===l&&(l=a.length-1),o=s[l]}(t,e,n)),o}},function(t,e){t.exports={p:[.5,.4800611941616275,.460172162722971,.4403823076297575,.42074029056089696,.4012936743170763,.3820885778110473,.3631693488243809,.3445782583896758,.32635522028791997,.3085375387259869,.29115968678834636,.27425311775007355,.2578461108058647,.24196365222307303,.2266273523768682,.2118553985833967,.19766254312269238,.18406012534675947,.17105612630848183,.15865525393145707,.1468590563758959,.13566606094638267,.12507193563715024,.11506967022170828,.10564977366685535,.09680048458561036,.08850799143740196,.08075665923377107,.0735292596096483,.06680720126885807,.06057075800205901,.054799291699557974,.049471468033648075,.044565462758543006,.040059156863817086,.03593031911292579,.03215677479561371,.028716559816001783,.02558805952163861,.022750131948179195,.020182215405704383,.017864420562816542,.0157776073910905,.013903447513498595,.012224472655044696,.010724110021675795,.009386705534838566,.008197535924596114,.007142810735271415,.006209665325776132,.005386145954066684,.004661188023718747,.004024588542758303,.0034669738030406647,.002979763235054555,.002555130330427929,.0021859614549132405,.0018658133003840339,.0015888696473648667,.0013498980316300933,.0011442068310226977,.0009676032132183563,.0008163523128285604,.0006871379379158471,.0005770250423907659,.00048342414238377663,.0004040578018640207,.0003369292656768799,.00028029327681617744,.00023262907903552502,.00019261557563563279,.00015910859015753364,.00013112015442048433,.00010779973347738823,8841728520080377e-20,7234804392511979e-20,59058912418922374e-21,48096344017602614e-21,39075596597787456e-21,3167124183311986e-20,2560881647404149e-20,20657506912546683e-21,16623763729652213e-21,1334574901590631e-20,10688525774934402e-21,8539905470991794e-21,6806876599334031e-21,5412543907703841e-21,4293514469971858e-21,33976731247300535e-22,26822957796388472e-22,2112454702502842e-21,16596751443714555e-22,13008074539172771e-22,10170832425687032e-22,7.933281519755892e-7,6.173073720091925e-7,4.791832765903185e-7,3.710674079633327e-7,2.8665157187919333e-7,2.2090503226954194e-7,1.6982674071475937e-7,1.3024322953320117e-7,9.96442631693347e-8,7.6049605164887e-8,5.790134039964557e-8,4.397711594005869e-8,3.332044848542845e-8,2.518491005446105e-8,1.898956246588768e-8,1.4283479893922661e-8,1.0717590258310852e-8,8.022391850663474e-9,5.99037140106353e-9,4.462172453901611e-9,3.3157459783261365e-9,2.4578650618080152e-9,1.8175078630994235e-9,1.3407124440918662e-9,9.865876450376946e-10,7.242291705137605e-10,5.303423262948808e-10,3.8741473466756636e-10,2.823158037043268e-10,2.0522634252189396e-10,1.4882282217622966e-10,1.0765746385121517e-10,7768847581709776e-26,5592507575942645e-26,4016000583859088e-26,2876854173604311e-26,2055788909399508e-26,14654650977302715e-27,10420976987965154e-27,7392257778017794e-27,5230957544144525e-27,3692499427235561e-27,2600126965638173e-27,1826431061976961e-27,1279812543885835e-27,8945889558769844e-28,623784446333152e-27,43388950271780343e-29,3010627981117422e-28,20838581586720548e-29,14388386381575764e-29,9910342749547509e-29,6809224890620016e-29,46670115887190274e-30,31908916729108844e-30,21762912097085575e-30,14806537490047908e-30,10048965656526223e-30,6803311540773901e-30,4594627435778562e-30,3095358771958668e-30,20801863521393674e-31,1394517146659261e-30,9325575771681205e-31,622096057427174e-30,4139701816273122e-31,2747959392398221e-31,18196213635266084e-32,12019351542735647e-32,7919726314642476e-32,52055697448902465e-33,3413148326458146e-32,2232393197288031e-32,1456514112590909e-32,947953482220325e-32,6154425590850395e-33,3985804962848151e-33,25749715380118873e-34,16594208699647519e-34,10667637375474856e-34,6840807685935497e-34,4375964799309017e-34,27923343749396233e-35,17774117841455144e-35,11285884059538324e-35,7.148417011269684e-20,4.516591491435403e-20,2.846677408460209e-20,1.7897488120140146e-20,1.1224633591327901e-20,7022284240441541e-36,438238629906646e-35,27281535713460872e-37,16941535024881097e-37,10494515075362604e-37,6484814453077208e-37,39972212057261192e-38,24577864834723153e-38,1507493168810159e-37,9223413524939353e-38,5629282311376514e-38,34271987941135974e-39,20813752194932085e-39,12609160670206559e-39],z:[0,.05,.1,.15000000000000002,.2,.25,.30000000000000004,.35000000000000003,.4,.45,.5,.55,.6000000000000001,.65,.7000000000000001,.75,.8,.8500000000000001,.9,.9500000000000001,1,1.05,1.1,1.1500000000000001,1.2000000000000002,1.25,1.3,1.35,1.4000000000000001,1.4500000000000002,1.5,1.55,1.6,1.6500000000000001,1.7000000000000002,1.75,1.8,1.85,1.9000000000000001,1.9500000000000002,2,2.0500000000000003,2.1,2.15,2.2,2.25,2.3000000000000003,2.35,2.4000000000000004,2.45,2.5,2.5500000000000003,2.6,2.6500000000000004,2.7,2.75,2.8000000000000003,2.85,2.9000000000000004,2.95,3,3.0500000000000003,3.1,3.1500000000000004,3.2,3.25,3.3000000000000003,3.35,3.4000000000000004,3.45,3.5,3.5500000000000003,3.6,3.6500000000000004,3.7,3.75,3.8000000000000003,3.85,3.9000000000000004,3.95,4,4.05,4.1000000000000005,4.15,4.2,4.25,4.3,4.3500000000000005,4.4,4.45,4.5,4.55,4.6000000000000005,4.65,4.7,4.75,4.800000000000001,4.8500000000000005,4.9,4.95,5,5.050000000000001,5.1000000000000005,5.15,5.2,5.25,5.300000000000001,5.3500000000000005,5.4,5.45,5.5,5.550000000000001,5.6000000000000005,5.65,5.7,5.75,5.800000000000001,5.8500000000000005,5.9,5.95,6,6.050000000000001,6.1000000000000005,6.15,6.2,6.25,6.300000000000001,6.3500000000000005,6.4,6.45,6.5,6.550000000000001,6.6000000000000005,6.65,6.7,6.75,6.800000000000001,6.8500000000000005,6.9,6.95,7,7.050000000000001,7.1000000000000005,7.15,7.2,7.25,7.300000000000001,7.3500000000000005,7.4,7.45,7.5,7.550000000000001,7.6000000000000005,7.65,7.7,7.75,7.800000000000001,7.8500000000000005,7.9,7.95,8,8.05,8.1,8.15,8.200000000000001,8.25,8.3,8.35,8.4,8.450000000000001,8.5,8.55,8.6,8.65,8.700000000000001,8.75,8.8,8.85,8.9,8.950000000000001,9,9.05,9.1,9.15,9.200000000000001,9.25,9.3,9.35,9.4,9.450000000000001,9.5,9.55,9.600000000000001,9.65,9.700000000000001,9.75,9.8,9.850000000000001,9.9,9.950000000000001]}},function(t,e,n){"use strict";var r=n(120);e.name="factorial",e.factory=function(t,e,i,o){var a=i(n(121)),s=n(46),l=o("factorial",{number:function(t){if(t<0)throw new Error("Value must be non-negative");return a(t+1)},BigNumber:function(t){if(t.isNegative())throw new Error("Value must be non-negative");return a(t.plus(1))},"Array | Matrix":function(t){return r(t,l)}});return l.toTex={1:"\\left(${args[0]}\\right)"+s.operators.factorial},l}},function(t,e){"use strict";t.exports=function t(e,n,r){return e&&"function"==typeof e.map?e.map((function(e){return t(e,n,r)})):n(e)}},function(t,e,n){"use strict";var r=n(120),i=n(19).isInteger,o=4.7421875,a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];e.name="gamma",e.factory=function(t,e,s,l){var u=s(n(122)),c=s(n(125)),f=l("gamma",{number:function(t){var e,n;if(i(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,s=t-1;r>1;)s*=r,r--;return 0==s&&(s=1),s}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*f(1-t));if(t>=171.35)return 1/0;if(t>85){var l=t*t,u=l*t,c=u*t,d=c*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*l)-139/(51840*u)-571/(2488320*c)+163879/(209018880*d)+5246819/(75246796800*d*t))}--t,n=a[0];for(var h=1;h<a.length;++h)n+=a[h]/(t+h);return e=t+o+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n},Complex:function(e){var n,r;if(0==e.im)return f(e.re);e=new t.Complex(e.re-1,e.im),r=new t.Complex(a[0],0);for(var i=1;i<a.length;++i){var s=e.re+i,l=s*s+e.im*e.im;0!=l?(r.re+=a[i]*s/l,r.im+=-a[i]*e.im/l):r.re=a[i]<0?-1/0:1/0}n=new t.Complex(e.re+o+.5,e.im);var d=Math.sqrt(2*Math.PI);e.re+=.5;var h=c(n,e);0==h.im?h.re*=d:(0==h.re||(h.re*=d),h.im*=d);var p=Math.exp(-n.re);return n.re=p*Math.cos(-n.im),n.im=p*Math.sin(-n.im),u(u(h,n),r)},BigNumber:function(n){if(n.isInteger())return n.isNegative()||n.isZero()?new t.BigNumber(1/0):function(n){if(n.isZero())return new t.BigNumber(1);for(var r=e.precision+(0|Math.log(n.toNumber())),i=new(t.BigNumber.clone({precision:r}))(n),o=n.toNumber()-1;o>1;)i=i.times(o),o--;return new t.BigNumber(i.toPrecision(t.BigNumber.precision))}(n.minus(1));if(!n.isFinite())return new t.BigNumber(n.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(t){return r(t,f)}});return f.toTex={1:"\\Gamma\\left(${args[0]}\\right)"},f}},function(t,e,n){"use strict";var r=n(15).extend,i=n(29);e.name="multiply",e.factory=function(t,e,o,a){var s=n(46),l=o(n(44)),u=o(n(45)),c=o(n(123)),f=o(n(40)),d=o(n(124)),h=o(n(51)),p=t.DenseMatrix,g=t.SparseMatrix,v=a("multiply",r({"Array, Array":function(e,n){m(i.size(e),i.size(n));var r=v(l(e),l(n));return t.isMatrix(r)?r.valueOf():r},"Matrix, Matrix":function(t,e){var n=t.size(),r=e.size();return m(n,r),1===n.length?1===r.length?y(t,e,n[0]):_(t,e):1===r.length?w(t,e):x(t,e)},"Matrix, Array":function(t,e){return v(t,l(e))},"Array, Matrix":function(t,e){return v(l(t,e.storage()),e)},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=d(t,e,c,!1);break;case"dense":n=h(t,e,c,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=d(e,t,c,!0);break;case"dense":n=h(e,t,c,!0)}return n},"Array, any":function(t,e){return h(l(t),e,c,!1).valueOf()},"any, Array":function(t,e){return h(l(e),t,c,!0).valueOf()},"any, any":c,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,n){for(var r=v(t,e),i=0;i<n.length;i++)r=v(r,n[i]);return r}},c.signatures)),m=function(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}},y=function(t,e,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var r,i=t._data,o=t._datatype,s=e._data,l=e._datatype,f=u,d=c;o&&l&&o===l&&"string"==typeof o&&(f=a.find(u,[r=o,r]),d=a.find(c,[r,r]));for(var h=d(i[0],s[0]),p=1;p<n;p++)h=f(h,d(i[p],s[p]));return h},_=function(t,e){switch(e.storage()){case"dense":return b(t,e)}throw new Error("Not implemented")},b=function(t,e){var n,r=t._data,i=t._datatype,o=e._data,s=e._datatype,l=t._size[0],f=e._size[1],d=u,h=c;i&&s&&i===s&&"string"==typeof i&&(d=a.find(u,[n=i,n]),h=a.find(c,[n,n]));for(var g=[],v=0;v<f;v++){for(var m=h(r[0],o[0][v]),y=1;y<l;y++)m=d(m,h(r[y],o[y][v]));g[v]=m}return new p({data:g,size:[f],datatype:n})},w=function(t,e){switch(t.storage()){case"dense":return k(t,e);case"sparse":return A(t,e)}},x=function(t,e){switch(t.storage()){case"dense":switch(e.storage()){case"dense":return E(t,e);case"sparse":return z(t,e)}break;case"sparse":switch(e.storage()){case"dense":return C(t,e);case"sparse":return T(t,e)}}},k=function(t,e){var n,r=t._data,i=t._size,o=t._datatype,s=e._data,l=e._datatype,f=i[0],d=i[1],h=u,g=c;o&&l&&o===l&&"string"==typeof o&&(h=a.find(u,[n=o,n]),g=a.find(c,[n,n]));for(var v=[],m=0;m<f;m++){for(var y=r[m],_=g(y[0],s[0]),b=1;b<d;b++)_=h(_,g(y[b],s[b]));v[m]=_}return new p({data:v,size:[f],datatype:n})},E=function(t,e){var n,r=t._data,i=t._size,o=t._datatype,s=e._data,l=e._datatype,f=i[0],d=i[1],h=e._size[1],g=u,v=c;o&&l&&o===l&&"string"==typeof o&&(g=a.find(u,[n=o,n]),v=a.find(c,[n,n]));for(var m=[],y=0;y<f;y++){var _=r[y];m[y]=[];for(var b=0;b<h;b++){for(var w=v(_[0],s[0][b]),x=1;x<d;x++)w=g(w,v(_[x],s[x][b]));m[y][b]=w}}return new p({data:m,size:[f,h],datatype:n})},z=function(t,e){var n=t._data,r=t._size,i=t._datatype,o=e._values,s=e._index,l=e._ptr,d=e._size,h=e._datatype;if(!o)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,v=r[0],m=d[1],y=u,_=c,b=f,w=0;i&&h&&i===h&&"string"==typeof i&&(y=a.find(u,[p=i,p]),_=a.find(c,[p,p]),b=a.find(f,[p,p]),w=a.convert(0,p));for(var x=[],k=[],E=[],z=new g({values:x,index:k,ptr:E,size:[v,m],datatype:p}),A=0;A<m;A++){E[A]=k.length;var C=l[A],T=l[A+1];if(T>C)for(var S=0,M=0;M<v;M++){for(var N,D=M+1,O=C;O<T;O++){var I=s[O];S!==D?(N=_(n[M][I],o[O]),S=D):N=y(N,_(n[M][I],o[O]))}S!==D||b(N,w)||(k.push(M),x.push(N))}}return E[m]=k.length,z},A=function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,d=e._datatype,h=t._size[0],p=e._size[0],v=[],m=[],y=[],_=u,b=c,w=f,x=0;o&&d&&o===d&&"string"==typeof o&&(_=a.find(u,[s=o,s]),b=a.find(c,[s,s]),w=a.find(f,[s,s]),x=a.convert(0,s));var k=[],E=[];y[0]=0;for(var z=0;z<p;z++){var A=l[z];if(!w(A,x))for(var C=i[z+1],T=i[z];T<C;T++){var S=r[T];E[S]?k[S]=_(k[S],b(A,n[T])):(E[S]=!0,m.push(S),k[S]=b(A,n[T]))}}for(var M=m.length,N=0;N<M;N++)v[N]=k[m[N]];return y[1]=m.length,new g({values:v,index:m,ptr:y,size:[h,1],datatype:s})},C=function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,d=e._datatype,h=t._size[0],p=e._size[0],v=e._size[1],m=u,y=c,_=f,b=0;o&&d&&o===d&&"string"==typeof o&&(m=a.find(u,[s=o,s]),y=a.find(c,[s,s]),_=a.find(f,[s,s]),b=a.convert(0,s));for(var w=[],x=[],k=[],E=new g({values:w,index:x,ptr:k,size:[h,v],datatype:s}),z=[],A=[],C=0;C<v;C++){k[C]=x.length;for(var T=C+1,S=0;S<p;S++){var M=l[S][C];if(!_(M,b))for(var N=i[S+1],D=i[S];D<N;D++){var O=r[D];A[O]!==T?(A[O]=T,x.push(O),z[O]=y(M,n[D])):z[O]=m(z[O],y(M,n[D]))}}for(var I=x.length,P=k[C];P<I;P++)w[P]=z[x[P]]}return k[v]=x.length,E},T=function(t,e){var n,r=t._values,i=t._index,o=t._ptr,s=t._datatype,l=e._values,f=e._index,d=e._ptr,h=e._datatype,p=t._size[0],v=e._size[1],m=r&&l,y=u,_=c;s&&h&&s===h&&"string"==typeof s&&(y=a.find(u,[n=s,n]),_=a.find(c,[n,n]));for(var b,w,x,k,E,z,A=m?[]:void 0,C=[],T=[],S=new g({values:A,index:C,ptr:T,size:[p,v],datatype:n}),M=m?[]:void 0,N=[],D=0;D<v;D++){T[D]=C.length;var O=D+1;for(k=d[D+1],x=d[D];x<k;x++)if(z=f[x],m)for(w=o[z+1],b=o[z];b<w;b++)N[E=i[b]]!==O?(N[E]=O,C.push(E),M[E]=_(l[x],r[b])):M[E]=y(M[E],_(l[x],r[b]));else for(w=o[z+1],b=o[z];b<w;b++)N[E=i[b]]!==O&&(N[E]=O,C.push(E));if(m)for(var I=C.length,P=T[D];P<I;P++)A[P]=M[C[P]]}return T[v]=C.length,S};return v.toTex={2:"\\left(${args[0]}"+s.operators.multiply+"${args[1]}\\right)"},v}},function(t,e){"use strict";e.factory=function(t,e,n,r){var i=r("multiplyScalar",{"number, number":function(t,e){return t*e},"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var n=e.clone();return n.value=null===n.value?n._normalize(t):i(n.value,t),n},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var n=t.clone();return n.value=null===n.value?n._normalize(e):i(n.value,e),n},"Unit, Unit":function(t,e){return t.multiply(e)}});return i}},function(t,e,n){"use strict";e.name="algorithm11",e.factory=function(t,e,r,i){var o=r(n(40)),a=t.SparseMatrix;return function(t,e,n,r){var s=t._values,l=t._index,u=t._ptr,c=t._size,f=t._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,h=c[0],p=c[1],g=o,v=0,m=n;"string"==typeof f&&(g=i.find(o,[d=f,d]),v=i.convert(0,d),e=i.convert(e,d),m=i.find(n,[d,d]));for(var y=[],_=[],b=[],w=new a({values:y,index:_,ptr:b,size:[h,p],datatype:d}),x=0;x<p;x++){b[x]=_.length;for(var k=u[x+1],E=u[x];E<k;E++){var z=l[E],A=r?m(e,s[E]):m(s[E],e);g(A,v)||(_.push(z),y.push(A))}}return b[p]=_.length,w}}},function(t,e,n){"use strict";var r=n(19).isInteger,i=n(29).size;e.name="pow",e.factory=function(t,e,o,a){var s=n(46),l=o(n(126)),u=o(n(122)),c=o(n(44)),f=o(n(127)),d=o(n(128)),h=a("pow",{"number, number":p,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(n,r){return r.isInteger()||n>=0||e.predictable?n.pow(r):new t.Complex(n.toNumber(),0).pow(r.toNumber(),0)},"Fraction, Fraction":function(t,n){if(1!==n.d){if(e.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return p(t.valueOf(),n.valueOf())}return t.pow(n)},"Array, number":g,"Array, BigNumber":function(t,e){return g(t,e.toNumber())},"Matrix, number":v,"Matrix, BigNumber":function(t,e){return v(t,e.toNumber())},"Unit, number":function(t,e){return t.pow(e)}});function p(n,i){if(e.predictable&&!r(i)&&n<0)try{var o=f(i),a=d(o);if((i===a||Math.abs((i-a)/i)<1e-14)&&o.d%2==1)return(o.n%2==0?1:-1)*Math.pow(-n,i)}catch(s){}return n*n<1&&i===1/0||n*n>1&&i===-1/0?0:e.predictable&&(n<-1&&i===1/0||n>-1&&n<0&&i===-1/0)?NaN:r(i)||n>=0||e.predictable?Math.pow(n,i):new t.Complex(n,0).pow(i,0)}function g(t,e){if(!r(e)||e<0)throw new TypeError("For A^b, b must be a positive integer (value is "+e+")");var n=i(t);if(2!=n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!=n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var o=l(n[0]).valueOf(),a=t;e>=1;)1==(1&e)&&(o=u(a,o)),e>>=1,a=u(a,a);return o}function v(t,e){return c(g(t.valueOf(),e))}return h.toTex={2:"\\left(${args[0]}\\right)"+s.operators.pow+"{${args[1]}}"},h}},function(t,e,n){"use strict";var r=n(29),i=n(19).isInteger;e.name="eye",e.factory=function(t,e,o,a){var s=o(n(44)),l=a("eye",{"":function(){return"Matrix"===e.matrix?s([]):[]},string:function(t){return s(t)},"number | BigNumber":function(t){return c(t,t,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, string":function(t,e){return c(t,t,e)},"number | BigNumber, number | BigNumber":function(t,n){return c(t,n,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,n){return c(t,e,n)},Array:function(t){return u(t)},"Array, string":function(t,e){return u(t,e)},Matrix:function(t){return u(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return u(t.valueOf(),e)}});return l.toTex=void 0,l;function u(t,e){switch(t.length){case 0:return e?s(e):[];case 1:return c(t[0],t[0],e);case 2:return c(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function c(e,n,o){var a=t.isBigNumber(e)||t.isBigNumber(n)?t.BigNumber:null;if(t.isBigNumber(e)&&(e=e.toNumber()),t.isBigNumber(n)&&(n=n.toNumber()),!i(e)||e<1)throw new Error("Parameters in function eye must be positive integers");if(!i(n)||n<1)throw new Error("Parameters in function eye must be positive integers");var s=a?new t.BigNumber(1):1,l=a?new a(0):0,u=[e,n];if(o)return t.Matrix.storage(o).diagonal(u,s,0,l);for(var c=r.resize([],u,l),f=e<n?e:n,d=0;d<f;d++)c[d][d]=s;return c}}},function(t,e,n){"use strict";var r=n(120);e.name="fraction",e.factory=function(t,e,n,i){var o=i("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new t.Fraction(e)},string:function(e){return new t.Fraction(e)},"number, number":function(e,n){return new t.Fraction(e,n)},BigNumber:function(e){return new t.Fraction(e.toString())},Fraction:function(t){return t},Object:function(e){return new t.Fraction(e)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(120);e.name="number",e.factory=function(t,e,n,i){var o=i("number",{"":function(){return 0},number:function(t){return t},string:function(t){var e=Number(t);if(isNaN(e))throw new SyntaxError('String "'+t+'" is no valid number');return e},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},o}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=t.viz.cat_bar_width,l=t.viz.cat_bar_height,u=e.bar_data[0][i];e.bar_data=e.bar_data.slice(0,o);var c=e.type_name;c.length>=25&&(c=c.slice(0,25)+".."),n.append("text").classed("cat_graph_title",!0).text(c).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",800),n.append("line").attr("x1",0).attr("x2",s).attr("y1",4).attr("y2",4).attr("stroke","blue").attr("stroke-width",1).attr("opacity",1);var f=d3.scale.linear().domain([0,u]).range([0,s]);a.append("rect").attr("height",l+"px").attr("width",(function(t){return f(t[i])+"px"})).attr("fill",(function(t){return t[3]})).attr("opacity",t.viz.cat_colors.opacity).attr("stroke","grey").attr("stroke-width","0.5px"),a.append("text").classed("bar_labels",!0).text((function(t){var e=t[1];return e.indexOf(": ")>0&&(e=e.split(": ")[1]),e.indexOf("<p>")>0&&(e=e.split("<p>")[0]),e.length>=25&&(e=e.slice(0,25)+".."),e})).attr("transform",(function(){return"translate(5, "+.75*l+")"})).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","right")}},function(t,e){t.exports=function(t,e,n,r,i,o,a,s){var l=t.viz.cat_bar_width,u=t.viz.cat_bar_height;e.append("text").text("Count").attr("transform",(function(){return"translate("+(l+o)+", 0)"})),e.append("text").text("Pct").attr("transform",(function(){return"translate("+(l+o+60)+", 0)"})),e.append("text").text("P-val").attr("transform",(function(){return"translate("+(l+o+115)+", 0)"})),i&&e.append("text").text("Clusters").attr("transform",(function(){return"translate("+(l+150)+", 0)"})),n.append("text").classed("count_labels",!0).text((function(t){var e=t[a];return e=e.toLocaleString(),String(e)})).attr("transform",(function(){return"translate("+(l+o+35)+", "+.75*u+")"})).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),n.append("text").classed("count_labels",!0).text((function(t){var e=t[a]/s*100;return e=(e=Math.round(10*e)/10).toLocaleString(),String(e)})).attr("transform",(function(){return"translate("+(l+o+35+47)+", "+.75*u+")"})).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),n.append("text").classed("count_labels",!0).text((function(t){var e=t[6];return e<.001?(e=parseFloat(e.toPrecision(3))).toExponential():parseFloat(e.toPrecision(2))})).attr("transform",(function(){return"translate("+(l+o+35+112)+", "+.75*u+")"})).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),i&&n.append("text").classed("count_labels",!0).text((function(t){return String(t[r].toLocaleString())})).attr("transform",(function(){return"translate("+(l+35+150+20)+", "+.75*u+")"})).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end")}},function(t,e){t.exports=function(t){var e={},n=d3.select(t.root+" .clust_group").attr("transform");return null!=n&&n.indexOf("scale")>0?(e.zoom_x=parseFloat(n.split("scale")[1].replace("(","").replace(")","").split(",")[0]),e.zoom_y=parseFloat(n.split("scale")[1].replace("(","").replace(")","").split(",")[1])):(e.zoom_x=1,e.zoom_y=1),e}},function(t,e,n){var r=n(100);t.exports=function(t){if(t.labels.show_label_tooltips){d3.selectAll(t.viz.root_tips+"_row_tip").remove();var e=t.viz.root_tips.replace(".",""),n=r().attr("class",(function(){return e+" d3-tip "+e+"_row_tip"})).direction("e").offset([0,10]).style("display","none").html((function(t){return"<span>"+t.name.replace(/_/g," ").split("#")[0]+"</span>"}));d3.select(t.viz.viz_wrapper).select(t.root+" .row_container").call(n),d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",(function(e){d3.select(t.viz.root_tips+"_row_tip").classed(e.name,!0),d3.selectAll(t.viz.root_tips+"_row_tip").style("display","block"),d3.select(this).select("text").classed("active",!0),n.show(e),null!=t.row_tip_callback&&t.row_tip_callback(t.viz.root_tips,e)})).on("mouseout",(function(e){d3.selectAll(t.viz.root_tips+"_row_tip").style("display","none").classed(e.name,!1),d3.select(this).select("text").classed("active",!1),n.hide(e)}))}else d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",(function(){d3.select(this).select("text").classed("active",!0)})).on("mouseout",(function(){d3.select(this).select("text").classed("active",!1)}))}},function(t,e,n){var r=n(2),i=n(134),o=n(135),a=n(104),s=n(139),l=n(140);t.exports=function(t,e=0){var n,u=t.params,c=u.network_data.col_nodes,f=u.viz.x_scale.rangeBand()/2+u.viz.border_width.x;d3.select(u.root+" .col_container").empty()?((n=d3.select(u.viz.viz_svg).append("g").attr("class","col_container").attr("transform","translate("+u.viz.clust.margin.left+","+u.viz.norm_labels.margin.top+")")).append("rect").attr("fill",u.viz.background_color).attr("width",30*u.viz.clust.dim.width+"px").attr("height",u.viz.label_background.col).attr("class","white_bars"),n.append("g").attr("class","col_label_outer_container").attr("transform","translate(0,"+u.viz.norm_labels.width.col+")").append("g").attr("class","col_zoom_container")):((n=d3.select(u.root+" .col_container").attr("transform","translate("+u.viz.clust.margin.left+","+u.viz.norm_labels.margin.top+")")).select(".white_bars").attr("fill",u.viz.background_color).attr("width",30*u.viz.clust.dim.width+"px").attr("height",u.viz.label_background.col),n.select(u.root+" .col_label_outer_container"));var d=d3.select(u.root+" .col_zoom_container").selectAll(".col_label_text").data(c,(function(t){return t.name})).enter().append("g").attr("class","col_label_text").attr("transform",(function(t){return"translate("+u.viz.x_scale(t.col_index)+", 0) rotate(-90)"})).append("g").attr("class","col_label_group").attr("transform","translate("+u.viz.x_scale.rangeBand()/2+","+f+") rotate(45)").on("mouseover",(function(){d3.select(this).select("text").classed("active",!0)})).on("mouseout",(function(){d3.select(this).select("text").classed("active",!1)}));r.has(u.network_data.col_nodes[0],"value")&&d.append("rect").attr("class","col_bars").attr("width",(function(t){var e=0;return t.value>0&&(e=u.labels.bar_scale_col(t.value)),e})).attr("height",.66*u.viz.x_scale.rangeBand()).style("fill",(function(t){return t.value>0?u.matrix.bar_colors[0]:u.matrix.bar_colors[1]})).attr("opacity",.6),d.append("text").attr("x",0).attr("y",.64*u.viz.x_scale.rangeBand()).attr("dx",u.viz.border_width.x).attr("text-anchor","start").attr("full_name",(function(t){return t.name})).style("font-size",u.labels.default_fs_col+"px").style("cursor","default").text((function(t){return r.normal_name(t)})).style("opacity",0).transition().delay(e).duration(e).style("opacity",1),s(u),d.append("path").style("stroke-width",0).attr("d",(function(){return l(u)})).attr("fill","#eee").style("opacity",0).transition().delay(e).duration(e).style("opacity",u.viz.triangle_opacity),d3.selectAll(u.root+" .col_label_text").on("click",(function(t){"function"==typeof u.click_label?(u.click_label(t.name,"col"),i(u,this,t.ini)):u.tile_click_hlight&&i(u,this,t.ini)})).on("dblclick",(function(e){var n=this.__data__.name;if(u.sim_mat){o(t,this,n);var r=d3.selectAll(u.root+" .row_label_group").filter((function(t){return t.name==n}))[0][0];a(t,r,n)}else o(t,this,n);u.tile_click_hlight&&i(u,this,e.ini)}))}},function(t,e){t.exports=function(t,e,n){if(n!=t.click_hlight_col){t.click_hlight_col=n;var r=6*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_top_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85).attr("transform",(function(){return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+",0)"})),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_bottom_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",r).attr("fill",t.matrix.hlight_color).attr("opacity",.85).attr("transform",(function(){var e=t.viz.x_scale.rangeBand()-r;return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+","+e+")"}))}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_col=-666}},function(t,e,n){var r=n(105),i=n(106),o=n(136),a=n(88),s=n(131),l=n(79),u=n(3);t.exports=function(t,e,n){var c=t.params,f=s(c);if(1===f.zoom_y&&1===f.zoom_x){c.viz.inst_order.col="custom",i(t,"col"),d3.selectAll(c.root+" .toggle_row_order .btn").classed("active",!1),c.viz.run_trans=!0;var d=$.extend(!0,{},c.matrix.matrix),h=c.network_data.row_nodes,p=[];c.network_data.col_nodes.forEach((function(t){p.push(t.name)}));var g=u.indexOf(p,n);p=[],h.forEach((function(t,e){p.push(d[e].row_data[g].value)}));var v,m=d3.range(p.length).sort((function(t,e){return p[e]-p[t]}));c.viz.y_scale.domain(m),c.matrix.orders.custom_col=m;var y=c.network_data.row_nodes_names;(v=c.network_data.links.length>c.matrix.def_large_matrix?d3.select(c.root+" .viz_svg"):d3.select(c.root+" .viz_svg").transition().duration(2500)).selectAll(".row_cat_group").attr("transform",(function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"})),v.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",(function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"})),-1===c.viz.ds_level&&v.selectAll(".row").attr("transform",(function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"})),d3.selectAll(c.root+" .col_label_text").select(".highlight_rect").style("opacity",0),d3.select(e).select(".highlight_rect").style("opacity",1),c.network_data.links.forEach((function(t){t.x=c.viz.x_scale(t.target),t.y=c.viz.y_scale(t.source)})),r(c),c.zoom_info=a(),setTimeout((function(){c.viz.run_trans=!1}),2500),c.viz.ds_num_levels>0&&c.viz.ds_level>=0&&(l(c),o(t,!0,!0,!0))}}},function(t,e,n){var r=n(137),i=n(93),o=n(102),a=n(138),s=n(3);t.exports=function(t,e=!1,n=!1,l=!1){var u=t.params,c=u.zoom_info,f=u.viz.ds_level,d=u.viz.ds_level;(null===u.viz.ds||(f=Math.floor(Math.log(c.zoom_y)/Math.log(u.viz.ds_zt)))>u.viz.ds_num_levels-1)&&(f=-1);var h,p=!1;-1==d?f>=0&&(p=!0):f<d&&(p=!0),!0===e||!0===p?(e=!0,u.viz.ds_level=h=f):h=d;var g,v,m={};if(m.min_x=Math.abs(c.trans_x)/c.zoom_x-6*u.viz.rect_width,m.min_y=Math.abs(c.trans_y)/c.zoom_y-6*u.viz.rect_height,m.max_x=Math.abs(c.trans_x)/c.zoom_x+u.viz.clust.dim.width/c.zoom_x+5*u.viz.rect_width,m.max_y=Math.abs(c.trans_y)/c.zoom_y+u.viz.clust.dim.height/c.zoom_y+5*u.viz.rect_height,r(u,m),!1===l?g=s.difference(u.viz.viz_nodes.row,u.viz.viz_nodes.curr_row):(g="all",d3.selectAll(u.root+" .ds"+String(h)+"_row").remove()),null!=u.viz.ds){var y=".ds"+String(u.viz.ds_level)+"_row";d3.selectAll(y).style("display","block")}if(h>=0&&(d3.selectAll(u.root+" .row").remove(),d3.selectAll(u.viz.root_tips+"_tile_tip").remove(),d3.selectAll(u.viz.root_tips+"_row_tip").remove()),h<0?(v=u.matrix.matrix,a(u)):(v=u.matrix.ds_matrix[h],d3.selectAll(u.root+" .row_cat_group path").remove()),!0===n&&d3.selectAll(u.root+" .row_cat_group path").remove(),!0===e&&(h>=0?d3.selectAll(u.root+" .ds"+String(h)+"_row").each((function(t){!1===s.contains(u.viz.viz_nodes.row,t.name)&&d3.select(this).remove()})):d3.selectAll(u.root+" .row").each((function(t){!1===s.contains(u.viz.viz_nodes.row,t.name)&&d3.select(this).remove()})),d3.selectAll(u.root+" .row_label_group").each((function(t){!1===s.contains(u.viz.viz_nodes.row,t.name)&&d3.select(this).remove()})),h!=d&&(g=u.viz.viz_nodes.row,d3.selectAll(u.root+" .ds"+String(d)+"_row").remove())),(g.length>=1||"all"===g)&&i(u,v,g,h),-1===h&&(!1===n||e)){var _=[];d3.selectAll(u.root+" .row_label_group").each((function(t){_.push(t.name)}));var b=s.difference(u.viz.viz_nodes.row,_);b.length>1&&o(t,b)}}},function(t,e){t.exports=function(t,e){var n,r=[],i=[],o=t.viz.y_scale,a=t.viz.ds_level,s=t.network_data.row_nodes_names,l=".row";a>=0&&(o=t.viz.ds[a].y_scale,s=d3.range(t.matrix.ds_matrix[a].length).map(String),l=".ds"+String(a)+"_row");for(var u=0;u<s.length;u++)(n=o(u))<e.max_y&&n>e.min_y&&r.push(s[u]);d3.selectAll(t.root+" "+l).each((function(t){i.push(t.name)})),t.viz.viz_nodes.row=r,t.viz.viz_nodes.curr_row=i}},function(t,e){t.exports=function(t){!0===d3.select(t.root+" .row_cat_group path").empty()&&d3.selectAll(t.root+" .row_cat_group").append("path").attr("d",(function(){return"M "+(t.viz.cat_room.symbol_width-1)+",0 L 1,"+t.viz.y_scale.rangeBand()/2+" L "+(t.viz.cat_room.symbol_width-1)+","+t.viz.y_scale.rangeBand()+" Z"})).attr("fill","#eee").style("opacity",t.viz.triangle_opacity)}},function(t,e,n){var r=n(100);t.exports=function(t){if(t.labels.show_label_tooltips){d3.selectAll(t.viz.root_tips+"_col_tip").remove();var e=r().attr("class",(function(){var e=t.viz.root_tips.replace(".","");return e+" d3-tip "+e+"_col_tip"})).direction("w").offset([20,0]).style("display","none").html((function(t){return"<span>"+t.name.replace(/_/g," ").split("#")[0]+"</span>"}));d3.select(t.viz.viz_wrapper).select("svg").select(t.root+" .col_zoom_container").selectAll(".col_label_group").select("text").call(e),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_group").on("mouseover",(function(n){d3.selectAll(t.viz.root_tips+"_col_tip").style("display","block"),e.show(n),null!=t.col_tip_callback&&t.col_tip_callback(n)})).on("mouseout",(function(){e.hide(this),d3.selectAll(t.viz.root_tips+"_col_tip").style("display","none")}))}}},function(t,e){t.exports=function(t){var e=.36*t.viz.x_scale.rangeBand(),n=-t.viz.border_width.x,r=t.viz.x_scale.rangeBand()-e;return"M "+n+",0 L "+-(t.viz.x_scale.rangeBand()-e+t.viz.border_width.x)+",0 L "+-t.viz.border_width.x+","+r+" Z"}},function(t,e){t.exports=function(t){d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("height",t.viz.super_labels.dim.width+"px").attr("width","3000px").classed("super_col_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.super_labels.margin.top+")"),d3.select(t.viz.viz_svg).append("text").attr("class","super_col").text(t.labels.super.col).attr("text-anchor","center").attr("transform",(function(){var e=d3.select(this)[0][0].getBBox().width;return"translate("+(t.viz.clust.dim.width/2+t.viz.norm_labels.width.row-e/2)+","+t.viz.super_labels.dim.width+")"})).style("font-size",(function(){return t.labels.super_label_fs*t.labels.super_label_scale+"px"})).style("font-weight",300),d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("width",t.viz.super_labels.dim.width+"px").attr("height","3000px").classed("super_row_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.super_labels.margin.left+",0)"),d3.select(t.viz.viz_svg).append("g").classed("super_row",!0).attr("transform",(function(){return"translate("+t.viz.super_labels.dim.width+","+(t.viz.clust.dim.height/2+t.viz.norm_labels.width.col)+")"})),d3.select(t.root+" .super_row").append("text").text(t.labels.super.row).attr("text-anchor","center").attr("transform",(function(){return"translate(0,"+(d3.select(this)[0][0].getBBox().width/2+t.viz.norm_labels.width.col)+"), rotate(-90)"})).style("font-size",(function(){return t.labels.super_label_fs*t.labels.super_label_scale+"px"})).style("font-weight",300)}},function(t,e,n){var r=n(143),i=n(144),o=n(152),a=n(112);t.exports=function(t){var e=t.params,n=e.viz;d3.select(n.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 1000,-1000, L 1000,0 Z").attr("fill",n.background_color).attr("class","right_slant_triangle").attr("transform","translate("+n.clust.dim.width+","+n.norm_labels.width.col+")"),d3.select(n.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 500,-500, L 0,-500 Z").attr("fill",n.background_color).attr("class","left_slant_triangle").attr("transform","translate(-1,"+n.norm_labels.width.col+")");var s=n.clust.margin.top+n.uni_margin/5;d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",n.clust.margin.left).attr("height",s).attr("class","top_left_white");var l=n.cat_room.col+1.5*n.uni_margin;d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",2*n.clust.dim.width).attr("height",l).attr("class","top_right_white").attr("transform",(function(){return"translate("+(n.clust.margin.left+n.clust.dim.width)+", "+(n.norm_labels.width.col+n.norm_labels.margin.top-n.uni_margin)+")"})),f=n.clust.margin.left+n.clust.dim.width+n.uni_margin,d=n.norm_labels.margin.top+n.norm_labels.width.col+2.5*n.uni_margin;var u=1.15*n.cat_room.symbol_width;n.show_categories.col&&d3.select(n.viz_svg).selectAll().data(n.all_cats.col).enter().append("text").classed("col_cat_super",!0).style("font-size",u+"px").style("opacity",.65).style("cursor","default").attr("transform",(function(t){var e=parseInt(t.split("-")[1],10);return"translate("+f+","+(d+1.25*n.cat_room.symbol_width*e)+")"})).text((function(t){return r(n,t,"col")})),o(t),d=n.show_dendrogram?n.clust.margin.top+n.clust.dim.height+n.dendro_room.col-2*n.uni_margin:n.clust.margin.top+n.clust.dim.height;var c=d3.select(n.viz_svg).append("g").classed("bottom_spillover_container",!0).attr("transform",(function(){return"translate(0,"+d+")"}));c.append("rect").attr("class","bottom_spillover").attr("fill",n.background_color).attr("width",n.svg_dim.width).attr("height",2*n.svg_dim.height),f=n.clust.margin.left,d=0,c.append("g").classed("col_dendro_icons_container",!0).attr("transform","translate("+f+","+d+")").append("g").classed("col_dendro_icons_group",!0),e.viz.show_dendrogram&&a(t,"col");var f=n.clust.margin.left+n.clust.dim.width,d=n.clust.margin.top+n.clust.dim.height,h=n.cat_room.col+n.clust.dim.width,p=n.cat_room.row+10*n.uni_margin;d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",h).attr("height",p).attr("transform",(function(){return"translate("+f+","+d+")"})).classed("white_bars",!0).classed("dendro_corner_spillover",!0),f=0,d=n.clust.margin.top+n.clust.dim.height,h=n.clust.margin.left,p=10*n.clust.dim.height,d3.select(n.viz_svg).append("rect").attr("fill",n.background_color).attr("width",h).attr("height",p).attr("transform",(function(){return"translate("+f+","+d+")"})).classed("white_bars",!0).classed("dendro_col_spillover",!0),i(t)}},function(t,e){t.exports=function(t,e,n){return t.cat_names[n][e]===e?"Category "+(parseInt(e.split("-")[1],10)+1):t.cat_names[n][e]}},function(t,e,n){var r=n(145),i=n(3);t.exports=function(t){var e=t.params;i.each(["row","col"],(function(n){e.viz.show_categories[n]&&d3.selectAll(e.root+" ."+n+"_cat_super").on("dblclick",(function(){e.sim_mat&&(n="both"),d3.selectAll(e.root+" .toggle_"+n+"_order .btn").classed("active",!1);var i=this.__data__.replace("-","_")+"_index";e.viz.sim_mat?(r(t,i,"row"),r(t,i,"col")):r(t,i,n)}))}))}},function(t,e,n){var r=n(106),i=n(136),o=n(88),a=n(79),s=n(146),l=n(131),u=n(3);t.exports=function(t,e,n){var c,f,d=t.params,h=l(d),p=0;1==h.zoom_y&&1==h.zoom_x||(s(t,0,0,1),p=1200),"row"===n?c="col":"col"===n&&(c="row"),d.viz.run_trans=!0,"row"===c?d.viz.inst_order.row=e:"col"===c&&(d.viz.inst_order.col=e),d.viz.show_dendrogram&&r(t,n),"row"===c?d.viz.x_scale.domain(d.matrix.orders[d.viz.inst_order.row+"_row"]):"col"==c&&d.viz.y_scale.domain(d.matrix.orders[d.viz.inst_order.col+"_col"]),f=d3.selectAll(d.root+" .tile")[0].length<d.matrix.def_large_matrix?d3.select(d.root+" .viz_svg").transition().duration(2500).delay(p):d3.select(d.root+" .viz_svg");var g=d.network_data.row_nodes_names,v=d.network_data.col_nodes_names;-1===d.viz.ds_level&&(f.selectAll(".row").attr("transform",(function(t){var e=u.indexOf(g,t.name);return"translate(0,"+d.viz.y_scale(e)+")"})).selectAll(".tile").attr("transform",(function(t){return"translate("+d.viz.x_scale(t.pos_x)+" , 0)"})),f.selectAll(".tile_up").attr("transform",(function(t){return"translate("+d.viz.x_scale(t.pos_x)+" , 0)"})),f.selectAll(".tile_dn").attr("transform",(function(t){return"translate("+d.viz.x_scale(t.pos_x)+" , 0)"}))),f.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",(function(t){var e=u.indexOf(g,t.name);return"translate(0,"+d.viz.y_scale(e)+")"})),f.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",(function(t){var e=u.indexOf(v,t.name);return"translate("+d.viz.x_scale(e)+") rotate(-90)"})),f.selectAll(".row_cat_group").attr("transform",(function(t){var e=u.indexOf(g,t.name);return"translate(0,"+d.viz.y_scale(e)+")"})),f.selectAll(".col_cat_group").attr("transform",(function(t){var e=u.indexOf(v,t.name);return"translate("+d.viz.x_scale(e)+",0)"})),d.network_data.links.forEach((function(t){t.x=d.viz.x_scale(t.target),t.y=d.viz.y_scale(t.source)})),d.zoom_info=o(),d.viz.ds_num_levels>0&&d.viz.ds_level>=0&&(a(d),i(t,!0,!0,!0)),setTimeout((function(){d.viz.run_trans=!1}),2500)}},function(t,e,n){var r=n(2),i=n(147),o=n(136),a=n(88),s=n(151),l=n(3);t.exports=function(t,e,n,u){var c=t.params;if(d3.selectAll(c.viz.root_tips).style("display","none"),c.zoom_info=a(),o(t),!c.viz.run_trans){var f=c.viz.clust.dim.height/2,d=f/u;if(n>=f-d){var h=f-n,p=-f/u+h;n+=p}n<-(f-d)&&(n+=p=f/u-(h=f+n));var g,v=u,m=700,y=-(v-1)*f;d3.select(c.root+" .clust_group").transition().duration(m).attr("transform","translate("+[0,0+y]+") scale(1,"+v+")translate("+[e,n]+")"),d3.select(c.root+" .row_label_zoom_container").transition().duration(m).attr("transform","translate("+[0,y]+") scale("+v+","+v+")translate("+[0,n]+")"),d3.select(c.root+" .row_cat_container").transition().duration(m).attr("transform","translate("+[0,y]+") scale(1,"+v+")translate("+[0,n]+")"),d3.select(c.root+" .row_dendro_container").transition().duration(m).attr("transform","translate("+[0,y]+") scale(1,"+v+")translate("+[c.viz.uni_margin/2,n]+")"),l.each(["row","col"],(function(t){g=d3.select(c.root+" ."+t+"_dendro_crop_buttons").style("opacity"),d3.selectAll(c.root+" ."+t+"_dendro_crop_buttons").style("opacity",0),setTimeout(w,700,t,g)})),d3.select(c.root+" .col_zoom_container").transition().duration(m).attr("transform"," scale(1,1)translate("+[e,0]+")"),d3.select(c.root+" .col_cat_container").transition().duration(m).attr("transform"," scale(1,1)translate("+[e,0]+")"),d3.select(c.root+" .col_dendro_container").transition().duration(m).attr("transform"," scale(1,1)translate("+[e,c.viz.uni_margin/2]+")");var _=c.viz.clust.margin.top+y+n*v,b=c.viz.clust.margin.left+e;c.zoom_behavior.scale(v).translate([b,_]),i(c),!1===d3.select(c.root+" .row_label_zoom_container text").empty()&&d3.select(c.root+" .row_label_zoom_container").each((function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",.5*t.x).attr("y",0).attr("width",.5*t.width).attr("height",c.viz.y_scale.rangeBand()).style("fill","yellow")})),d3.select(c.root+" .row_dendro_icons_group").attr("transform","translate("+[0,0+y]+") scale(1,"+v+")translate("+[e,n]+")"),d3.select(c.root+" .row_dendro_icons_group").selectAll("path").attr("transform",(function(t){return"translate("+c.viz.uni_margin+","+t.pos_mid+") scale(1, "+1/v+")"})),d3.select(c.root+" .col_dendro_icons_group").attr("transform",(function(){return" scale(1,"+v+")"})),d3.select(c.root+" .col_dendro_icons_group").selectAll("path").attr("transform",(function(t){return"translate("+t.pos_mid+","+c.viz.uni_margin+") scale(1,1)"})),r.has(c.network_data.col_nodes[0],"value")&&d3.selectAll(c.root+" .col_bars").attr("width",(function(t){var e=0;return t.value>0&&(e=c.labels.bar_scale_col(t.value)/1),e})),r.has(c.network_data.row_nodes[0],"value")&&d3.selectAll(c.root+" .row_bars").transition().duration(m).attr("width",(function(t){return c.labels.bar_scale_row(Math.abs(t.value))/v})).attr("x",(function(t){return-c.labels.bar_scale_row(Math.abs(t.value))/v})),s(c)}function w(t,e){d3.selectAll(c.root+" ."+t+"_dendro_crop_buttons").transition().duration(m).style("opacity",e)}}},function(t,e,n){var r=n(2),i=n(148),o=n(149);t.exports=function(t){d3.selectAll(t.root+" .row_label_group").select("text").text((function(t){return r.normal_name(t)})),d3.selectAll(t.root+" .col_label_text").select("text").text((function(t){return r.normal_name(t)})),o(t),d3.selectAll(t.root+" .row_label_group").each((function(){i(t,this,"row")})),d3.selectAll(t.root+" .col_label_group").each((function(){i(t,this,"col")}))}},function(t,e){t.exports=function(t,e,n){if("none"!=d3.select(e).style("display")){var r,i,o,a,s,l,u,c,f=t.viz.norm_labels.width[n];r="row"===n?t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale():t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale(),d3.select(e).select("text").each((function(t){c=t.name.length}));var d=d3.select(e).select("text").node().getBBox().width;if((i=g(d,r))>f)for(u=1;u<c;u++)i>f&&(d3.select(e).select("text").text(h),d=d3.select(e).select("text").node().getBBox().width,i=g(d,r));else if(i<.75*f)for(u=1;u<c;u++)i<.75*f&&(d3.select(e).select("text").text(p),d=d3.select(e).select("text").node().getBBox().width,i=g(d,r))}function h(){return s=d3.select(this).text(),o=s.substring(0,(a=s.length)-3)+".."}function p(t){return s=d3.select(this).text(),a=".."===s.slice(-2)?s.length-2:s.length,(o=(l=t.name).substring(0,a+2)+"..").length>l.length&&(o=l),o}function g(t,e){return i=e<1?t:t*e}}},function(t,e,n){var r=n(150);t.exports=function(t){var e,n=t.labels.default_fs_row,i=r(t);i.row>3&&(i.row>t.labels.max_allow_fs?((e=t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale())<1&&(e=1),n=t.labels.max_allow_fs/e,d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",n+"px").attr("y",.5*t.viz.rect_height+.35*n)):d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",t.labels.default_fs_row+"px").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row)),i.col>3&&(i.col>t.labels.max_allow_fs?((e=t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale())<1&&(e=1),(n=t.labels.max_allow_fs/e)>.7*t.viz.rect_width&&(n=.7*t.viz.rect_width),d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",n+"px")):d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",t.labels.default_fs_col+"px"))}},function(t,e){t.exports=function(t){var e={};return t.viz.zoom_ratio.x>1?(e.row=t.labels.default_fs_row*t.zoom_behavior.scale(),e.col=t.labels.default_fs_col*t.zoom_behavior.scale()):(e.row=t.labels.default_fs_row*t.zoom_behavior.scale()/t.viz.zoom_ratio.y,e.col=t.labels.default_fs_col*t.zoom_behavior.scale()),e}},function(t,e){t.exports=function(t){t.zoom_info.zoom_x*t.viz.border_width.x>1?d3.selectAll(t.root+" .vert_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .vert_lines").select("line").style("display","none"),t.zoom_info.zoom_y*t.viz.border_width.y>1?d3.selectAll(t.root+" .horz_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .horz_lines").select("line").style("display","none")}},function(t,e,n){var r=n(143),i=n(100);t.exports=function(t){var e=t.params,n=e.viz;d3.select(e.root+" .row_cat_label_container").empty()&&(d3.select(t.params.viz.viz_svg).append("g").classed("row_cat_label_container",!0),d3.select(t.params.viz.viz_svg+" .row_cat_label_container").append("g").classed("row_cat_label_bar_container",!0));var o=1.15*n.cat_room.symbol_width;d3.select(e.root+" .row_cat_label_container").attr("transform",(function(){return"translate("+(n.norm_labels.margin.left+n.norm_labels.width.row+n.cat_room.symbol_width+2.75*n.uni_margin)+","+(n.clust.margin.top-n.uni_margin)+") rotate(-90)"})),d3.selectAll(e.root+" .row_cat_label_container text").remove(),d3.selectAll(e.root+" .row_cat_selection_bar").remove(),d3.selectAll(t.params.viz.root_tips+"_row_cat_super").remove();var a=i().attr("class",(function(){var t=e.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_row_cat_super"})).direction("south_custom").offset([50,-75]).style("display","none").style("opacity",0).html((function(t){var i=e.network_data.row_nodes[0][t];return i.indexOf("<p>")>-1?i.split(": ")[0]+"<p>"+i.split("<p>")[1]:r(n,t,"row")})),s=1.25*n.cat_room.symbol_width,l=.9*s;if(d3.select(e.root+" .row_cat_label_container").selectAll().data(n.all_cats.row).enter().append("text").style("width","100px").style("height",l+"px").classed("row_cat_super",!0).style("font-size",o+"px").style("opacity",.65).style("cursor","default").attr("transform",(function(t){return"translate(0,"+1.25*n.cat_room.symbol_width*parseInt(t.split("-")[1],10)+")"})).text((function(t){return r(n,t,"row")})),d3.select(e.root+" .row_cat_label_container").selectAll().data(n.all_cats.row).enter().append("rect").classed("row_cat_super",!0).classed("row_cat_selection_bar",!0).style("height",l+"px").style("fill","green").style("width","120px").style("opacity",0).attr("transform",(function(t){return"translate(0,"+s*(parseInt(t.split("-")[1],10)-.75)+")"})).on("mouseover",(function(t){d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","block").style("opacity",1),a.show(t)})).on("mouseout",(function(){a.hide(this),d3.selectAll(".d3-tip").style("display","none"),d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","none").style("opacity",0)})),!1===d3.select(e.root+" .row_cat_selection_bar").empty()&&d3.selectAll(e.root+" .row_cat_selection_bar").call(a),_.has(e.network_data,"row_cat_bars")){d3.select(e.root+" .enr_title").remove();var u=d3.select(e.root+" .viz_svg").append("g").classed("enr_title",!0).attr("transform",(function(){var t=d3.select(e.root+" .row_cat_label_container").attr("transform").split("(")[1].split(")")[0],n=Number(t.split(",")[0])-10;return"translate("+String(n)+", 0)"}));u.append("rect").attr("width",e.viz.cat_room.row).attr("height",25).attr("fill","white");var c=e.network_data.enrichrgram_lib.substring(0,40);u.append("text").attr("transform","translate(0, 17)").text(c.replace(/_/g," ")).style("font-size","15px").attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),d3.selectAll(e.root+" .enrichr_bars").remove();var f=e.viz.clust.margin.top-35,d=e.network_data.row_cat_bars[0],h=d3.scale.linear().domain([0,d]).range([0,f]);d3.select(e.root+" .row_cat_label_bar_container").selectAll().data(e.network_data.row_cat_bars).enter().append("rect").classed("enrichr_bars",!0).attr("height",l+"px").attr("fill","red").attr("width",(function(t){return h(t)+"px"})).attr("opacity",.4).attr("transform",(function(t,e){return"translate(0, "+s*(e-.75)+")"}))}}},function(t,e,n){var r=n(154);t.exports=function(t){var e=t.params;d3.select(e.root+" .expand_button").on("click",null),(d3.select(e.root+" .expand_button").empty()?d3.select(e.viz.viz_svg).append("text").attr("class","expand_button"):d3.select(e.root+" .expand_button")).attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-family","FontAwesome").attr("font-size","30px").text((function(){return!1===e.viz.is_expand?"\uf0b2":"\uf0c9"})).attr("y","25px").attr("x","25px").style("cursor","pointer").style("opacity",.4).on("mouseover",(function(){d3.select(this).style("opacity",.75)})).on("mouseout",(function(){d3.select(this).style("opacity",.4)})).on("click",(function(){!1===e.viz.is_expand?(d3.select(this).text((function(){return"\uf0c9"})),e.viz.is_expand=!0,d3.selectAll(e.root+" .borders").style("fill","white"),d3.select(e.root+" .sidebar_wrapper").style("display","none")):(d3.select(this).text((function(){return"\uf0b2"})),e.viz.is_expand=!1,d3.selectAll(e.root+" .borders").style("fill","#eee"),d3.select(e.root+" .viz_wrapper").style("width","100px"),d3.select(e.root+" .sidebar_wrapper").style("display","block")),d3.select(e.viz.viz_svg).style("opacity",.5);var n=500;1==e.viz.run_trans&&(n=2500),setTimeout(r,n,t)}))}},function(t,e,n){var r=n(2),i=n(155),o=n(163),a=n(164),s=n(165),l=n(166),u=n(167),c=n(168),f=n(169),d=n(170),h=n(171),p=n(172),g=n(173),v=n(174),m=n(175),y=n(176),_=n(177),b=n(178),w=n(147),x=n(107),k=n(106),E=n(136),z=n(70),A=n(179),C=n(152),T=n(144),S=n(180),M=n(181),N=n(182),D=n(183),O=n(88),I=n(184),P=n(3);t.exports=function(t){var e=t.params,n=z(e);d3.select(e.root+" .play_button"),d3.select(e.root+" .sidebar_wrapper").style("height",n.height+"px"),d3.select(e.viz.viz_wrapper).style("margin-top",n.top+"px").style("width",n.width+"px").style("height",n.height+"px"),(e=y(e)).zoom_info=O(),a(e);var L=d3.select(e.viz.viz_svg);P.each(e.network_data.links,(function(t){t.x=e.viz.x_scale(t.target),t.y=e.viz.y_scale(t.source)})),L.on(".zoom",null),e.zoom_behavior.scaleExtent([1,e.viz.square_zoom*e.viz.zoom_ratio.x]).on("zoom",(function(){i(t)})),e.viz.do_zoom&&L.call(e.zoom_behavior),o(t),L.attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height),L.select(".super_background").style("width",e.viz.svg_dim.width).style("height",e.viz.svg_dim.height),L.select(".grey_background").attr("width",e.viz.clust.dim.width).attr("height",e.viz.clust.dim.height),setTimeout(A,100,e);var B=r.pluck(e.network_data.row_nodes,"name");_(e,L),L.selectAll(".highlighting_rect").attr("width",.8*e.viz.x_scale.rangeBand()).attr("height",.8*e.viz.y_scale.rangeBand()),d(e),f(e,L),h(e,L),L.selectAll(".row_label_group").each((function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",e.viz.rect_height).style("fill","yellow").style("opacity",(function(t){var e=0;return 1===t.target&&(e=1),e}))})),L.selectAll(".row_label_group").select("text").attr("y",.5*e.viz.rect_height+.35*e.labels.default_fs_row),r.has(e.network_data.row_nodes[0],"value")&&b(t,L),L.selectAll(".row_cat_group").attr("transform",(function(t){var n=P.indexOf(B,t.name);return"translate(0, "+e.viz.y_scale(n)+")"})),L.selectAll(".row_cat_group").select("path").attr("d",(function(){return"M "+(e.viz.cat_room.symbol_width-1)+",0 L 1,"+e.viz.rect_height/2+" L "+(e.viz.cat_room.symbol_width-1)+","+e.viz.rect_height+" Z"})),e.viz.show_dendrogram?(x(t,"row",!0),x(t,"col",!0),s(e,L),k(t,"row",0),k(t,"col",0)):s(e,L),p(e,L),g(e,L),v(e,L),m(e,L),l(e,L),u(e.viz,L),I(e),c(e,L),e.zoom_behavior.scale(1).translate([e.viz.clust.margin.left,e.viz.clust.margin.top]),w(e),d3.select(e.root+" .clust_container").attr("transform","translate("+e.viz.clust.margin.left+","+e.viz.clust.margin.top+")"),-1===t.params.viz.ds_level&&E(t),C(t),d3.select(e.viz.viz_svg).style("opacity",1),T(t),d3.select(t.params.root+" .row_slider_group").style("opacity",0),d3.select(t.params.root+" .col_slider_group").style("opacity",0),setTimeout(S,500,t,"row"),setTimeout(S,500,t,"col"),setTimeout(M,500,t),setTimeout(D,500,t),setTimeout(N,500,t)}},function(t,e,n){var r=n(156),i=n(161),o=n(162);t.exports=function(t){var e=t.params,n={};n.zoom_x=d3.event.scale,n.zoom_y=d3.event.scale,n.trans_x=e.zoom_behavior.translate()[0]-e.viz.clust.margin.left,n.trans_y=e.zoom_behavior.translate()[1]-e.viz.clust.margin.top,d3.selectAll(e.viz.root_tips).style("display","none"),e.zoom_info=i(e,n),e.zoom_info=o(e,n),!1===e.is_slider_drag&&!1===e.is_cropping&&(e.zoom_behavior.translate([e.zoom_info.trans_x+e.viz.clust.margin.left,e.zoom_info.trans_y+e.viz.clust.margin.top]),t.params=e,r(t))}},function(t,e,n){var r=n(149),i=n(136),o=n(157),a=n(114),s=n(131),l=n(158),u=n(160);t.exports=function(t){var e=t.params,n=e.zoom_info,c=s(e);if(d3.select(e.root+" .clust_group").attr("transform","translate("+[n.trans_x,n.trans_y]+") scale("+n.zoom_x+","+n.zoom_y+")"),d3.select(e.root+" .row_label_zoom_container").attr("transform","translate("+[0,n.trans_y]+") scale("+n.zoom_y+")"),d3.select(e.root+" .col_zoom_container").attr("transform","translate("+[n.trans_x,0]+") scale("+n.zoom_x+")"),d3.select(e.root+" .row_cat_container").attr("transform","translate("+[0,n.trans_y]+") scale( 1,"+n.zoom_y+")"),d3.select(e.root+" .row_dendro_container").attr("transform","translate("+[e.viz.uni_margin/2,n.trans_y]+") scale( 1,"+n.zoom_y+")"),d3.select(e.root+" .row_dendro_icons_group").attr("transform",(function(){return"translate("+[0,n.trans_y]+") scale(1, "+n.zoom_y+")"})),d3.select(e.root+" .col_dendro_icons_group").attr("transform",(function(){return"translate("+[n.trans_x,0]+")scale("+n.zoom_x+", 1)"})),a(e,n,"row"),a(e,n,"col"),d3.select(e.root+" .col_cat_container").attr("transform","translate("+[n.trans_x,0]+") scale("+n.zoom_x+",1)"),d3.select(e.root+" .col_dendro_container").attr("transform","translate("+[n.trans_x,e.viz.uni_margin/2]+") scale("+n.zoom_x+",1)"),o(e,n),d3.select(e.root+" .viz_svg").attr("is_zoom",(function(){var t=Number(d3.select(e.root+" .viz_svg").attr("is_zoom"));return d3.select(e.root+" .viz_svg").attr("stopped_zoom",1),t+1})),r(e),n.zoom_y<=c.zoom_y){var f=!1;n.zoom_y<c.zoom_y&&(f=!0),i(t,!1,f)}setTimeout((function(){d3.select(e.root+" .viz_svg").attr("is_zoom",(function(){return Number(d3.select(e.root+" .viz_svg").attr("is_zoom"))-1}))}),50),setTimeout((function(t){!0===u(t.params)&&setTimeout(l,50,t)}),100,t)}},function(t,e,n){var r=n(2);t.exports=function(t){var e=t.zoom_info;r.has(t.network_data.row_nodes[0],"value")&&d3.selectAll(t.root+" .row_bars").attr("width",(function(n){return t.labels.bar_scale_row(Math.abs(n.value))/e.zoom_y})).attr("x",(function(n){return-t.labels.bar_scale_row(Math.abs(n.value))/e.zoom_y})),r.has(t.network_data.col_nodes[0],"value")&&d3.selectAll(t.root+" .col_bars").attr("width",(function(n){var r=0;return n.value>0&&(r=t.labels.bar_scale_col(n.value)/e.zoom_x),r}))}},function(t,e,n){var r=n(149),i=n(148),o=n(159),a=n(151),s=n(136),l=n(160),u=n(3);t.exports=function(t){var e=t.params;function n(){u.each(["row","col"],(function(t){d3.selectAll(e.root+" ."+t+"_label_group").filter((function(){return"none"!=d3.select(this).style("display")})).select("text").style("font-size",(function(){return Number(d3.select(this).style("font-size").replace("px",""))}))}))}!0===l(e)&&(u.each(["row","col"],(function(t){d3.selectAll(e.root+" ."+t+"_label_group").select("text").style("opacity",1),d3.selectAll(e.root+" ."+t+"_cat_group").select("path").style("display","block")})),s(t,!0),d3.selectAll(e.viz.root_tips).style("display","block"),d3.selectAll(e.root+" .row_label_group").select("text").style("display","none"),d3.selectAll(e.root+" .row_label_group").select("text").style("display","block"),d3.select(e.root+" .viz_svg").attr("stopped_zoom",0),d3.selectAll(e.root+" .row_label_group").select("text").style("display","block"),d3.selectAll(e.root+" .col_label_group").select("text").style("display","block"),a(e),t.params.viz.x_offset=0,u.each(["row","col"],(function(t){o(e,t)<150&&d3.selectAll(e.root+" ."+t+"_label_group").each((function(){i(e,this,t)}))})),n(),r(e),setTimeout(n,100))}},function(t,e){t.exports=function(t,e){var n;return"row"===e?(n=1e4,-1===t.viz.ds_level&&(n=d3.selectAll(t.root+" .row")[0].length)):"col"===e&&(n=d3.selectAll(t.root+" ."+e+"_label_text").filter((function(){return"none"!=d3.select(this).style("display")}))[0].length),n}},function(t,e){t.exports=function(t){var e=Number(d3.select(t.root+" .viz_svg").attr("is_zoom")),n=Number(d3.select(t.root+" .viz_svg").attr("stopped_zoom")),r=!1;return 0===e&&0!=n&&(r=!0),r}},function(t,e){t.exports=function(t,e){var n=t.viz;return n.zoom_ratio.y>1&&(e.zoom_y<n.zoom_ratio.y?(e.trans_y=0,e.zoom_y=1):e.zoom_y=e.zoom_y/n.zoom_ratio.y),e.pan_room_y=(e.zoom_y-1)*n.clust.dim.height,e.trans_y>=0?e.trans_y=0:e.trans_y<=-e.pan_room_y&&(e.trans_y=-e.pan_room_y),e}},function(t,e){t.exports=function(t,e){var n=t.viz;return n.zoom_ratio.x>1&&(e.zoom_x=e.zoom_x<n.zoom_ratio.x?1:e.zoom_x/n.zoom_ratio.x),e.pan_room_x=(e.zoom_x-1)*n.clust.dim.width,e.trans_x>0?e.trans_x=0:e.trans_x<=-e.pan_room_x&&(e.trans_x=-e.pan_room_x),e}},function(t,e,n){var r=n(146);t.exports=function(t){var e=t.params;d3.selectAll(e.viz.zoom_element).on("dblclick.zoom",null),d3.select(e.viz.zoom_element).on("dblclick",(function(){r(t,0,0,1)}))}},function(t,e){t.exports=function(t){var e=t.viz.clust.dim.height/2*-0;d3.select(t.root+" .clust_group").attr("transform","translate("+[0,0+e]+") scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .row_label_zoom_container").attr("transform","translate("+[0,e]+") scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .row_cat_container").attr("transform","translate("+[0,e]+") scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .row_dendro_container").attr("transform","translate("+[0,e]+") scale(1,1)translate("+[t.viz.uni_margin/2,0]+")"),d3.select(t.root+" .col_zoom_container").attr("transform"," scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .col_cat_container").attr("transform"," scale(1,1)translate("+[0,0]+")"),d3.select(t.root+" .col_dendro_container").attr("transform"," scale(1,1)translate("+[0,t.viz.uni_margin/2]+")"),d3.select(t.root+" .row_dendro_icons_group").attr("transform",(function(){return"translate(0,0) scale(1)"})),d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",(function(t){return"translate(7,"+t.pos_mid+") scale(1, 1)"}))}},function(t,e,n){var r=n(3);t.exports=function(t,e,n=!1){var i={};!1===n?i.run_transition=!1:i=n;var o,a,s,l=t.viz.duration,u=t.network_data.col_nodes,c=t.network_data.col_nodes_names;i.run_transition?(o=e.transition().delay(i.update).duration(l),e.selectAll(".col_cat_group").data(u,(function(t){return t.name})).transition().delay(i.update).duration(l).attr("transform",(function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"})),e.selectAll(".col_dendro_group").data(u,(function(t){return t.name})).transition().delay(i.update).duration(l).attr("transform",(function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"}))):(o=e,e.selectAll(".col_cat_group").data(u,(function(t){return t.name})).attr("transform",(function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"})),d3.select(t.root).selectAll(".col_dendro_group").data(u,(function(t){return t.name})).attr("transform",(function(e){var n=r.indexOf(c,e.name);return"translate("+t.viz.x_scale(n)+",0)"}))),r.each(["row","col"],(function(e){var n=t.viz.all_cats[e].length;for(a=0;a<n;a++)s="."+e+"_cat_rect_"+String(a),"row"===e?o.selectAll(s).attr("height",t.viz.y_scale.rangeBand()):o.selectAll(s).attr("width",t.viz.x_scale.rangeBand())}));var f=t.viz.clust.margin.left+t.viz.clust.dim.width,d=t.viz.clust.margin.top,h=t.viz.dendro_room.row+t.viz.uni_margin;d3.select(t.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+f+","+d+")"),d3.select(t.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",h+"px").attr("height",t.viz.svg_dim.height),f=t.viz.clust.margin.left,d=t.viz.clust.margin.top+t.viz.clust.dim.height;var p=t.viz.dendro_room.col+t.viz.uni_margin;d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",t.viz.svg_dim.width).attr("height",p+"px"),d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover_top").attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,"+t.viz.dendro_room.col+")"),f=t.viz.clust.margin.left,d=0,d3.select(t.root+" .col_dendro_icons_container").attr("transform","translate("+f+","+d+")")}},function(t,e){t.exports=function(t,e,n=!1){var r,i={},o=t.viz.duration;!1===n?i.run_transition=!1:i=n,(r=i.run_transition?e.transition().delay(i.update).duration(o):e).select(".super_col_bkg").attr("height",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.grey_border_width+")"),r.select(".super_col").attr("transform",(function(){return"translate("+(t.viz.clust.dim.width/2+t.viz.norm_labels.width.row)+","+t.viz.super_labels.dim.width+")"})),r.select(".super_row_bkg").attr("width",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.grey_border_width+",0)"),r.select(".super_row").attr("transform",(function(){return"translate("+t.viz.super_labels.dim.width+","+(t.viz.clust.dim.height/2+t.viz.norm_labels.width.col)+")"}))}},function(t,e){t.exports=function(t,e,n=!1){var r,i={},o=t.duration;!1===n?i.run_transition=!1:i=n,(r=i.run_transition?e.transition().delay(i.update).duration(o):e).select(t.root+" .right_slant_triangle").attr("transform","translate("+t.clust.dim.width+","+t.norm_labels.width.col+")"),r.select(t.root+" .left_slant_triangle").attr("transform","translate(-1,"+t.norm_labels.width.col+")");var a=t.clust.margin.top+t.uni_margin/5;r.select(t.root+" .top_left_white").attr("width",t.clust.margin.left).attr("height",a);var s,l=t.clust.margin.left+t.clust.dim.width+t.uni_margin+t.dendro_room.row;r.select(t.root+" .right_spillover_container").attr("transform",(function(){return"translate("+l+", 0)"})),s=t.norm_labels.margin.top+t.norm_labels.width.col,r.select(t.root+" .right_spillover_container rect").attr("transform",(function(){return"translate( 0,"+s+")"})),r.select(t.root+" .right_spillover").attr("height",t.svg_dim.height+"px");var u=t.clust.margin.left+t.clust.dim.width,c=s,f=t.dendro_room.row+t.uni_margin,d=t.cat_room.col+t.uni_margin;d3.select(t.root+" .dendro_row_spillover").attr("width",f).attr("height",d).attr("transform",(function(){return"translate("+u+","+c+")"})),u=0,c=t.clust.margin.top+t.clust.dim.height,f=t.clust.margin.left,d=10*t.clust.dim.height,r.select(".dendro_col_spillover").attr("width",f).attr("height",d).attr("transform",(function(){return"translate("+u+","+c+")"})),u=t.clust.margin.left+t.clust.dim.width,c=t.clust.margin.top+t.clust.dim.height,f=t.cat_room.col+t.clust.dim.width,d=t.cat_room.row+t.uni_margin,r.select(".dendro_corner_spillover").attr("width",f).attr("height",d).attr("transform",(function(){return"translate("+u+","+c+")"})),u=t.clust.margin.left+t.clust.dim.width+t.uni_margin,c=t.norm_labels.margin.top+t.norm_labels.width.col+2.5*t.uni_margin,t.show_categories.col&&d3.selectAll(t.root+" .col_cat_super").attr("transform",(function(e){var n=parseInt(e.split("-")[1],10);return"translate("+u+","+(c+1.2*t.cat_room.symbol_width*n)+")"})),t.show_categories.row&&d3.select(t.root+" .row_cat_label_container").attr("transform",(function(){return"translate("+(u=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.symbol_width+2.75*t.uni_margin)+","+(c=t.clust.margin.top-t.uni_margin)+") rotate(-90)"})),c=t.show_dendrogram?t.clust.margin.top+t.clust.dim.height+t.dendro_room.col-2*t.uni_margin:t.clust.margin.top+t.clust.dim.height,d3.select(t.root+" .bottom_spillover_container").attr("transform",(function(){return"translate(0,"+c+")"})),r.select(t.root+" .bottom_spillover").attr("width",t.svg_dim.width).attr("height",2*t.svg_dim.height);var h=t.cat_room.col+1.5*t.uni_margin;d3.select(t.viz_svg+" .top_right_white").attr("fill",t.background_color).attr("width",2*t.clust.dim.width).attr("height",h).attr("transform",(function(){return"translate("+(t.clust.margin.left+t.clust.dim.width)+", "+(t.norm_labels.width.col+t.norm_labels.margin.top-t.uni_margin)+")"}))}},function(t,e){t.exports=function(t,e){e.select(".left_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,0)"),e.select(".right_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform",(function(){return"translate("+(t.viz.svg_dim.width-t.viz.grey_border_width)+",0)"})),e.select(".top_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",(function(){return"translate(0,0)"})),e.select(".bottom_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",(function(){return"translate(0,"+(t.viz.svg_dim.height-t.viz.grey_border_width)+")"}))}},function(t,e,n){var r=n(3);t.exports=function(t,e,n=!1){var i,o={},a=t.viz.duration,s=t.network_data.row_nodes,l=t.network_data.row_nodes_names;!1===n?o.run_transition=!1:o=n,o.run_transition?(e.selectAll(".row_label_group").data(s,(function(t){return t.name})).transition().delay(o.update).duration(a).attr("transform",(function(e){var n=r.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(n)+")"})).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),i=e.transition().delay(o.update).duration(a)):(e.selectAll(".row_label_group").data(s,(function(t){return t.name})).attr("transform",(function(e){var n=r.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(n)+")"})).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),i=e),i.select(t.root+" .row_container").attr("transform","translate("+t.viz.norm_labels.margin.left+","+t.viz.clust.margin.top+")"),i.select(t.root+" .row_container").select(".white_bars").attr("width",t.viz.label_background.row).attr("height",30*t.viz.clust.dim.height+"px"),i.select(t.root+" .row_container").select(".row_label_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)")}},function(t,e){t.exports=function(t){var e=6*t.viz.border_width.x,n=6*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.rect_width).attr("height",n).attr("transform",(function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"})),d3.select(t.root+" .left_hlight").attr("width",e).attr("height",t.viz.rect_width-.99*n).attr("transform",(function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"})),d3.select(t.root+" .right_hlight").attr("width",e).attr("height",t.viz.rect_height-.99*n).attr("transform",(function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.rect_width-e)+","+.99*n+")"})),d3.select(t.root+" .bottom_hlight").attr("width",(function(){return t.viz.rect_width-1.98*e})).attr("height",n).attr("transform",(function(){return"translate("+(t.viz.x_scale(t.matrix.click_hlight_x)+.99*e)+","+(t.viz.rect_height-n)+")"})),d3.select(t.root+" .row_top_hlight").attr("width",t.viz.svg_dim.width).attr("height",n),d3.select(t.root+" .row_bottom_hlight").attr("width",t.viz.svg_dim.width).attr("height",n).attr("transform",(function(){return"translate(0,"+(t.viz.rect_height-n)+")"})),d3.select(t.root+" .col_top_hlight").attr("width",t.viz.clust.dim.height).attr("height",e).attr("transform",(function(){return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+",0)"})),d3.select(t.root+" .col_bottom_hlight").attr("width",t.viz.clust.dim.height).attr("height",e).attr("transform",(function(){return"translate("+-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin)+","+(t.viz.rect_width-e)+")"}))}},function(t,e){t.exports=function(t,e,n=!1){var r,i={},o=t.viz.duration;!1===n?i.run_transition=!1:i=n,(r=i.run_transition?e.transition().delay(i.update).duration(o):e).select(".row_cat_outer_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)").select("white_bars").attr("width",t.viz.cat_room.row+"px").attr("height",(function(){return t.viz.clust.dim.height}));var a=t.viz.clust.margin.left+t.viz.clust.dim.width,s=t.viz.clust.margin.top;r.select(".row_dendro_outer_container").attr("transform","translate("+a+","+s+")"),a=t.viz.clust.margin.left,s=t.viz.clust.margin.top+t.viz.clust.dim.height,r.select(" .col_dendro_outer_container").attr("transform",(function(){return"translate("+a+","+s+")"}))}},function(t,e,n){var r=n(3);t.exports=function(t,e,n=!1){var i,o={},a=t.viz.duration,s=t.network_data.col_nodes,l=t.network_data.col_nodes_names;!1===n?o.run_transition=!1:o=n,o.run_transition?(i=e.transition().delay(o.update).duration(a),e.selectAll(".col_label_text").data(s,(function(t){return t.name})).transition().delay(o.update).duration(a).attr("transform",(function(e){var n=r.indexOf(l,e.name);return"translate("+t.viz.x_scale(n)+", 0) rotate(-90)"}))):(i=e,e.selectAll(".col_label_text").data(s,(function(t){return t.name})).attr("transform",(function(e){var n=r.indexOf(l,e.name);return"translate("+t.viz.x_scale(n)+", 0) rotate(-90)"})));var u=t.viz.x_scale.rangeBand()/2+t.viz.border_width.x;i.select(t.root+" .col_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.norm_labels.margin.top+")"),i.select(t.root+" .col_container").select(".white_bars").attr("width",30*t.viz.clust.dim.width+"px").attr("height",t.viz.label_background.col),i.select(t.root+" .col_container").select(".col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),i.selectAll(".col_label_group").attr("transform","translate("+t.viz.x_scale.rangeBand()/2+","+u+") rotate(45)"),i.selectAll(".col_label_group").select("text").attr("y",.6*t.viz.x_scale.rangeBand()).attr("dx",2*t.viz.border_width.x)}},function(t,e,n){var r=n(2);t.exports=function(t,e){e.selectAll(".col_label_group").select("text").style("font-size",t.labels.default_fs_col+"px").text((function(t){return r.normal_name(t)})),e.selectAll(".col_label_group").each((function(){d3.select(this).select("text")[0][0].getBBox()}))}},function(t,e,n){var r=n(140);t.exports=function(t,e,n=!1){var i=e.selectAll(".col_label_group").select("path"),o={},a=t.viz.duration;!1===n?o.run_transition=!1:o=n,(o.run_transition?i.transition().delay(o.update).duration(a):i).attr("d",(function(){return r(t)})).attr("fill","#eee")}},function(t,e,n){var r=n(2);t.exports=function(t,e,n=!1){var i={};!1===n?i.run_transition=!1:i=n,r.has(t.network_data.col_nodes[0],"value")&&e.selectAll(".col_bars").data(t.network_data.col_nodes,(function(t){return t.name})).attr("width",(function(e){var n=0;return e.value>0&&(n=t.labels.bar_scale_col(e.value)),n})).attr("height",.66*t.viz.rect_width)}},function(t,e,n){var r=n(71),i=n(74),o=n(73),a=n(83),s=n(82),l=n(3);t.exports=function(t){if((t=r(t)).viz=o(t.viz),t.viz=i(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t.viz=s(t.viz),t.viz.x_scale.rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale.rangeBands([0,t.viz.clust.dim.height]),t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,null!=t.viz.ds)for(var e;e<t.viz.ds.length;e++)t.viz.ds[e].rect_height=t.viz.ds[e].y_scale.rangeBand()-t.viz.border_width.y;return t.viz.ds_num_levels>0&&l.each(t.viz.ds,(function(e){e.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),e.y_scale.domain(d3.range(e.num_rows+1)),e.rect_height=e.y_scale.rangeBand()-t.viz.border_width.y})),t.viz.square_zoom=t.viz.norm_labels.width.col/(t.viz.rect_width/2),t=a(t)}},function(t,e,n){var r=n(95),i=n(96),o=n(99),a=n(3);t.exports=function(t,e){var n=t.network_data.row_nodes_names;if(-1===t.viz.ds_level)e.selectAll(".row").attr("transform",(function(e){var r=a.indexOf(n,e.name);return"translate(0,"+t.viz.y_scale(r)+")"})),e.selectAll(".row").selectAll(".tile").attr("transform",(function(e){return o(t,e)})).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height),e.selectAll(".row").selectAll(".tile_up").attr("d",(function(){return r(t)})).attr("transform",(function(e){return o(t,e)})),e.selectAll(".row").selectAll(".tile_dn").attr("d",(function(){return i(t)})).attr("transform",(function(e){return o(t,e)}));else{var s=t.viz.ds_level,l=".ds"+String(s)+"_row",u=t.viz.ds[s].rect_height;e.selectAll(l).attr("transform",(function(e){return"translate(0,"+t.viz.ds[s].y_scale(e.row_index)+")"})),e.selectAll(l).selectAll(".tile").attr("transform",(function(e){return o(t,e)})).attr("width",t.viz.rect_width).attr("height",u)}}},function(t,e,n){var r=n(75);t.exports=function(t,e){var n=t.params;n=r(n),e.selectAll(".row_bars").attr("width",(function(t){return n.labels.bar_scale_row(Math.abs(t.value))})).attr("x",(function(t){return-n.labels.bar_scale_row(Math.abs(t.value))})).attr("height",n.viz.y_scale.rangeBand())}},function(t,e){t.exports=function(t){var e=d3.select(t.root+" .clust_container").attr("transform"),n=Number(e.split("(")[1].split(",")[0]),r=Number(e.split(",")[1].replace(")","")),i=n+t.viz.clust.dim.width/2,o=r+t.viz.clust.dim.height/2;d3.select(t.root+" .play_button").attr("transform",(function(){return"translate("+i+","+o+")"}))}},function(t,e){t.exports=function(t,e="row"){var n,r,i=t.params.viz;if("row"===e){var o=i.svg_dim.width-3*i.uni_margin;(n=i.clust.margin.left+i.clust.dim.width+5.25*i.dendro_room.row+2)>o&&(n=o),r=i.clust.margin.top+3*i.uni_margin+30}else n=2*i.uni_margin,r=i.clust.margin.top+i.clust.dim.height+i.dendro_room.col-2*i.uni_margin;d3.select(t.params.root+" ."+e+"_slider_group").attr("transform",(function(){return"row"===e?"translate("+(n+=.8*i.dendro_room.row)+","+r+")":"translate("+n+","+r+"), rotate(-90)"})).style("opacity",1)}},function(t,e){t.exports=function(t){var e,n,r=t.params.viz,i=r.svg_dim.width-3*r.uni_margin;(e=r.clust.margin.left+r.clust.dim.width+5.25*r.dendro_room.row)>i&&(e=i),n=r.clust.margin.top+3*r.uni_margin+90,d3.select(t.params.root+" .tree_icon").attr("transform",(function(){return"translate("+e+","+(n-=75)+")"})).style("opacity",1)}},function(t,e){t.exports=function(t){var e,n,r=t.params.viz,i=r.svg_dim.width-3*r.uni_margin;(e=r.clust.margin.left+r.clust.dim.width+4*r.dendro_room.row+7)>i&&(e=i),n=r.clust.margin.top+3*r.uni_margin+152,d3.select(t.params.root+" .filter_icon").attr("transform",(function(){return"translate("+e+","+(n-=75)+")"})).style("opacity",1)}},function(t,e){t.exports=function(t){var e=t.params;if(!1===d3.select(e.root+" .tree_menu").empty()){var n=t.params.viz.tree_menu_width;d3.select(e.root+" .tree_menu").attr("transform",(function(){var t={};return t.x=e.viz.clust.dim.width+e.viz.clust.margin.left-n+30,t.y=e.viz.clust.margin.top+15,"translate("+t.x+", "+t.y+")"}))}}},function(t,e){t.exports=function(t,e=0){var n=0;e>0&&(n=2e3);var r=d3.selectAll(t.root+" .horz_lines"),i=d3.selectAll(t.root+" .vert_lines");r.style("opacity",0).attr("transform",(function(e){return"translate(  0,"+t.viz.y_scale(e.row_index)+") rotate(0)"})).transition().duration(e).delay(n).style("opacity",1),r.append("line").attr("x1",0).attr("x2",t.viz.clust.dim.width).style("stroke-width",(function(){return t.viz.border_width.y+"px"})),i.style("opacity",0).attr("transform",(function(e){return"translate("+t.viz.x_scale(e.col_index)+") rotate(-90)"})).transition().duration(e).delay(n).style("opacity",1),i.append("line").attr("x1",0).attr("x2",-t.viz.clust.dim.height).style("stroke-width",(function(){return t.viz.border_width.x+"px"}))}},function(t,e,n){var r=n(186),i=n(100),o=n(187),a=n(188),s=n(189),l=n(3);t.exports=function(t){var e=t.params;d3.select(e.root+" .col_cat_outer_container").empty()?d3.select(e.root+" .col_container").append("g").attr("class","col_cat_outer_container").attr("transform",(function(){return"translate(0,"+(e.viz.norm_labels.width.col+2)+")"})).append("g").attr("class","col_cat_container"):d3.select(e.root+" .col_container").select("col_cat_outer_container").attr("transform",(function(){return"translate(0,"+(e.viz.norm_labels.width.col+2)+")"})),d3.selectAll(e.viz.root_tips+"_col_cat_tip").remove();var n=i().attr("class",(function(){var t=e.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_col_cat_tip"})).direction("s").offset([5,0]).style("display","none").html((function(t){return r(e,t,this,"col")}));d3.select(e.root+" .col_cat_container").selectAll("g").data(e.network_data.col_nodes,(function(t){return t.name})).enter().append("g").attr("class","col_cat_group").attr("transform",(function(t){var n=l.indexOf(e.network_data.col_nodes_names,t.name);return"translate("+e.viz.x_scale(n)+",0)"})),d3.select(e.root+" .col_cat_container").selectAll(".col_cat_group").call(n),d3.selectAll(e.root+" .col_cat_group").each((function(){var t,r=this;l.each(e.viz.all_cats.col,(function(i){var l=parseInt(i.split("-")[1],10),u="col_cat_rect_"+String(l);(t=d3.select(r).select("."+u).empty()?d3.select(r).append("rect").attr("class",u).attr("cat",i).attr("transform",(function(){return"translate(0,"+l*(e.viz.cat_room.symbol_width+e.viz.cat_room.separation)+")"})).on("click",(function(t){if(d3.select(this).classed("cat_strings")){var n=s(e,t,this,"col");$(e.root+" .dendro_info").modal("toggle");var r=n.join(", ");d3.select(e.root+" .dendro_info input").attr("value",r)}})):d3.select(r).select("."+u)).attr("width",e.viz.x_scale.rangeBand()).attr("height",e.viz.cat_room.symbol_width).style("fill",(function(t){return e.viz.cat_colors.col[i][t[i]]})).on("mouseover",n.show).on("mouseout",(function(){n.hide(this),o(e),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")})),a(e.viz,"col",t,i)}))}))}},function(t,e,n){var r=n(143),i=n(3);t.exports=function(t,e,n,o){d3.selectAll(t.viz.root_tips+"_col_cat_tip").style("display","block"),d3.selectAll(t.viz.root_tips+"_row_cat_tip").style("display","block");var a=d3.select(n).attr("cat"),s=r(t.viz,a,o),l=e[a];"string"==typeof l&&l.indexOf(": ")>=0&&(l=l.split(": ")[1]);var u="<div>"+s+": "+l+"</div> <div> <br>Click for Category Menu </div>";return d3.select(n).classed("hovering",!0),setTimeout((function(){var e=!1;if(d3.select(n).classed("hovering")){var r=[o];t.viz.sim_mat&&(r=["row","col"]),i.each(r,(function(n){"string"==typeof l&&l.indexOf("Not ")<0&&"false"!=l&&(e=!0),e&&d3.selectAll(t.root+" ."+n+"_cat_group").selectAll("rect").style("opacity",(function(e){var n=d3.select(this).style("opacity");if(d3.select(this).classed("cat_strings")&&!1===d3.select(this).classed("filtered_cat")){var r,i=d3.select(this).attr("cat");r=e[i].indexOf(": ")>=0?e[i].split(": ")[1]:e[i],n=i===a&&r===l?t.viz.cat_colors.active_opacity:t.viz.cat_colors.opacity/4}return n}))}))}}),500),u}},function(t,e,n){var r=n(3);t.exports=function(t){r.each(["row","col"],(function(e){d3.selectAll(t.root+" ."+e+"_cat_group").selectAll("rect").style("opacity",(function(){var e=d3.select(this).style("opacity");return d3.select(this).classed("cat_strings")&&!1===d3.select(this).classed("filtered_cat")&&(e=t.viz.cat_colors.opacity),e}))}))}},function(t,e){t.exports=function(t,e,n,r,i=!1){function o(t){return"string"==typeof t&&t.indexOf(": ")>-1&&(t=t.split(": ")[1]),parseFloat(t)}"cat_strings"===t.cat_info[e][r].type?i?n.classed("cat_strings",!0).style("opacity",0).transition().duration(1e3).style("opacity",t.cat_colors.opacity):n.classed("cat_strings",!0).style("opacity",t.cat_colors.opacity):n.classed("cat_values",!0).style("opacity",(function(n){var i=o(n[r]);return t.cat_info[e][r].cat_scale(Math.abs(i))})).style("fill",(function(e){return o(e[r])>0?t.cat_value_colors[0]:t.cat_value_colors[1]}))}},function(t,e,n){var r=n(2),i=n(3);t.exports=function(t,e,n,o){var a=d3.select(n).attr("cat"),s=e[a],l=i.filter(t.network_data[o+"_nodes"],(function(t){return t[a]==s}));return r.pluck(l,"name")}},function(t,e,n){var r=n(186),i=n(100),o=n(187),a=n(188),s=n(189),l=n(3);t.exports=function(t,e=!1){var n=t.params;d3.select(n.root+" .row_cat_outer_container").empty()?d3.select(n.root+" .row_container").append("g").attr("class","row_cat_outer_container").attr("transform","translate("+n.viz.norm_labels.width.row+",0)").append("g").attr("class","row_cat_container"):d3.select(n.root+" .row_container").select("row_cat_outer_container").attr("transform","translate("+n.viz.norm_labels.width.row+",0)"),d3.select(n.root+" .row_cat_container").select(".white_bars").empty()?d3.select(n.root+" .row_cat_container").append("rect").attr("class","white_bars").attr("fill",n.viz.background_color).attr("width",n.viz.cat_room.row+"px").attr("height",(function(){return n.viz.clust.dim.height})):d3.select(n.root+" .row_cat_container").select(".white_bars").attr("fill",n.viz.background_color).attr("width",n.viz.cat_room.row+"px").attr("height",(function(){return n.viz.clust.dim.height})),d3.selectAll(n.viz.root_tips+"_row_cat_tip").remove();var u,c,f=i().attr("class",(function(){var t=n.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_row_cat_tip"})).direction("e").offset([5,0]).style("display","none").html((function(t){return r(n,t,this,"row")}));d3.select(n.root+" .row_cat_container").selectAll("g").data(n.network_data.row_nodes,(function(t){return t.name})).enter().append("g").attr("class","row_cat_group").attr("transform",(function(t){var e=l.indexOf(n.network_data.row_nodes_names,t.name);return"translate(0, "+n.viz.y_scale(e)+")"})),d3.select(n.root+" .row_cat_container").selectAll(".row_cat_group").call(f),d3.selectAll(n.root+" .row_cat_group rect").remove(),n.viz.show_categories.row&&d3.selectAll(n.root+" .row_cat_group").each((function(){c=this,l.each(n.viz.all_cats.row,(function(t){var r=parseInt(t.split("-")[1],10),i="row_cat_rect_"+String(r);(u=d3.select(c).select("."+i).empty()?d3.select(c).append("rect").attr("class",i).attr("cat",t):d3.select(c).select("."+i)).attr("width",n.viz.cat_room.symbol_width).attr("height",n.viz.y_scale.rangeBand()).style("fill",(function(e){return n.viz.cat_colors.row[t][e[t]]})).attr("x",(function(){return n.viz.cat_room.symbol_width+n.viz.uni_margin/2+"px"})).attr("transform",(function(){return"translate("+r*(n.viz.cat_room.symbol_width+n.viz.cat_room.separation)+",0)"})).on("click",(function(t){if(d3.select(this).classed("cat_strings")){var e=s(n,t,this,"row");$(n.root+" .dendro_info").modal("toggle");var r=e.join(", ");d3.select(n.root+" .dendro_info input").attr("value",r)}})).on("mouseover",f.show).on("mouseout",(function(){f.hide(this),o(n),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")})),a(n.viz,"row",u,t,e)}))}))}},function(t,e,n){var r=n(107);t.exports=function(t){var e=t.params,n=e.viz.dendro_room.row+e.viz.uni_margin,i=e.viz.clust.margin.left+e.viz.clust.dim.width,o=e.viz.clust.margin.top;d3.select(e.root+" .row_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","row_dendro_outer_container").attr("transform","translate("+i+","+o+")"),d3.select(e.root+" .row_dendro_outer_container").append("rect").classed("row_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",n+"px").attr("height",e.viz.svg_dim.height),d3.select(e.root+" .row_dendro_outer_container").append("g").attr("class","row_dendro_container").attr("transform","translate("+e.viz.uni_margin/2+",0)")):(d3.select(e.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+i+","+o+")"),d3.select(e.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",n+"px").attr("height",e.viz.svg_dim.height)),r(t,"row",!1),"clust"!=e.viz.inst_order.col&&d3.selectAll(e.root+" .row_dendro_group").remove()}},function(t,e,n){var r=n(107);t.exports=function(t){var e=t.params,n=e.viz.clust.margin.left,i=e.viz.clust.margin.top+e.viz.clust.dim.height,o=e.viz.dendro_room.col+e.viz.uni_margin;d3.select(e.root+" .col_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","col_dendro_outer_container").attr("transform","translate("+n+","+i+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",o+"px"),d3.select(e.root+" .col_dendro_outer_container").append("g").attr("class","col_dendro_container").attr("transform","translate(0,"+e.viz.uni_margin/2+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover_top",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height).attr("transform","translate(0,"+e.viz.dendro_room.col+")")):(d3.select(e.root+" .viz_svg").select("col_dendro_outer_container").attr("transform","translate("+n+","+i+")"),d3.select(e.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",e.viz.svg_dim.width).attr("height",o+"px")),r(t,"col",!1),"clust"!=e.viz.inst_order.row&&d3.selectAll(e.root+" .col_dendro_group").remove()}},function(t,e,n){var r=n(194);t.exports=function(t){r(t,"row"),r(t,"col")}},function(t,e,n){var r=n(195),i=n(180);t.exports=function(t,e){var n=d3.behavior.drag().on("drag",(function(){t.params.is_slider_drag=!0;var n=d3.event.y;n<0&&(n=0),n>100&&(n=100),this.nextSibling&&this.parentNode.appendChild(this);var i=10-(n=d3.round(n,-1))/10;d3.select(this).attr("transform","translate(0, "+n+")"),r(t,e,i)})).on("dragend",(function(){t.params.is_slider_drag=!1})),o=d3.select(t.params.root+" .viz_svg").append("g").classed(e+"_slider_group",!0);function a(){var n=d3.mouse(this),i=d3.round(n[1],-1);d3.select(t.params.root+" ."+e+"_group_circle").attr("transform","translate(0, "+i+")"),r(t,e,10-i/10)}i(t,e),o.append("rect").classed(e+"_slider_background",!0).attr("height","120px").attr("width","30px").attr("fill",t.params.viz.background_color).attr("transform",(function(){return"translate(-10, -5)"})).style("opacity",0),o.append("line").style("stroke-width",100/7+"px").style("stroke","black").style("stroke-linecap","round").style("opacity",0).attr("y1",0).attr("y2",(function(){return 98})).on("click",a),o.append("path").style("fill","black").attr("transform","translate(-2.5, 0)").attr("d",(function(){return"M0,0 L0, 100 L10,0 Z"})).style("opacity",.35).on("click",a),o.append("circle").classed(e+"_group_circle",!0).attr("r",8).attr("transform",(function(){return"translate(0, 50)"})).style("fill","blue").style("opacity",.35).on("mouseover",(function(){d3.select(this).style("opacity",.6)})).on("mouseout",(function(){d3.select(this).style("opacity",.35)})).call(n)}},function(t,e,n){var r=n(107);t.exports=function(t,e,n){var i=t.params;"row"===e?i.group_level.row=n:"col"===e&&(i.group_level.col=n),r(t,e,!0)}},function(t,e,n){var r=n(112);t.exports=function(t){var e=t.params.viz,n=e.clust.margin.left+e.clust.dim.width+e.uni_margin+e.dendro_room.row,i=d3.select(e.viz_svg).append("g").classed("right_spillover_container",!0).attr("transform",(function(){return"translate("+n+", 0)"})),o=e.norm_labels.margin.top+e.norm_labels.width.col;i.append("rect").attr("fill",e.background_color).attr("width",10*e.clust.dim.width).attr("height",e.svg_dim.height+"px").attr("class","white_bars").attr("class","right_spillover").attr("transform",(function(){return"translate( 0,"+o+")"}));var a=0,s=e.clust.margin.top;i.append("g").classed("row_dendro_icons_container",!0).attr("transform","translate("+a+","+s+")").append("g").classed("row_dendro_icons_group",!0),r(t,"row"),a=e.clust.margin.left+e.clust.dim.width,s=o;var l=e.dendro_room.row+e.uni_margin,u=e.cat_room.col+e.uni_margin;d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",l).attr("height",u).attr("transform",(function(){return"translate("+a+","+s+")"})).classed("white_bars",!0).classed("dendro_row_spillover",!0)}},function(t,e,n){var r=n(198),i=n(199),o=n(201),a=n(202),s=n(204),l=n(205),u=n(207),c=n(208),f=n(231),d=n(232),h=n(233),p=n(234),g=n(235),v=n(236);t.exports=function(){var t=this.params;if(d3.select(t.root+" .running_demo").empty()){d3.select(t.root+" .play_button").classed("running_demo",!0),g(t,!1),$.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0,color:"#fff",cursor:"default"}}),d3.selectAll(".blockUI").style("opacity",0);var e=750;!1===this.params.viz.is_expand&&(e=r(t,e,f),e-=1500),e=r(t,e,i),e=r(t,e,o),e=r(this,e,a),e=r(t,e,h),e=r(t,e,s),e=r(t,e,v),e=r(t,e,d),e=r(t,e,l),e=r(t,e,u),e=r(this,e,c),e=r(t,e,f),e=r(t,e,p)}}},function(t,e){t.exports=function(t,e,n){return setTimeout(n().run,e,t),e+n().get_duration()}},function(t,e,n){var r=n(200);t.exports=function(){return{run:function(t){setTimeout(r,0,t,"Clustergrammer allows users to generate\ninteractive and sharable visualizations\nby uploading a matrix",4500),setTimeout(r,4500,t,"This demo will quickly overview some\nof Clustergrammer's interactive features",4500)},get_duration:function(){return 1e4}}}},function(t,e){t.exports=function(t,e,n){var r=e.split("\n");r.length<3&&r.push(""),d3.select(t.root+" .demo_group").style("opacity",0).transition().duration(250).style("opacity",1).transition().duration(250).delay(n).style("opacity",0);for(var i=0;i<r.length;i++){var o=i+1,a=d3.select(t.root+" .demo_group").select("#text_"+o).text(r[i])[0][0].getBBox(),s=1.3*Number(d3.select(".demo_group").select("text").style("font-size").replace("px",""));d3.select(t.root+" .demo_group").select(".rect_"+o).style("fill","white").attr("width",a.width+20).attr("height",a.height).attr("x",-10).attr("y",a.y+i*s).style("opacity",.9)}}},function(t,e,n){var r=n(200),i=n(146);t.exports=function(){return{run:function(t){r(t.params,"Zoom and pan by\nscrolling and dragging",4e3),setTimeout(i,1500,t,0,0,4)},get_duration:function(){return 4e3}}}},function(t,e,n){var r=n(200),i=n(146),o=n(203);t.exports=function(){return{run:function(t){var e=t.params;r(e,"Reset zoom by double-clicking\n",4e3),setTimeout(o,2e3,e,"double",300,300),setTimeout(i,2400,t,0,0,1)},get_duration:function(){return 4500}}}},function(t,e){t.exports=function(t,e,n,r){var i=d3.select(t.root+" .viz_svg").append("circle").attr("cx",n).attr("cy",r).attr("r",25).style("stroke","black").style("stroke-width","3px").style("fill","#007f00").style("opacity",.5);"double"===e?i.transition().duration(200).style("opacity",0).transition().duration(50).style("opacity",.5).transition().duration(200).style("opacity",0).remove():i.transition().duration(200).style("opacity",0).transition().duration(250).remove()}},function(t,e,n){var r=n(200),i=n(203);t.exports=function(){function t(t,e){$(e).d3DblClick()}return jQuery.fn.d3DblClick=function(){this.each((function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}))},{run:function(e){r(e,"Reorder the matrix based on a single\nrow or column by double-clicking a\nlabel",7e3);var n=function(t,e){return d3.selectAll(t.root+" .row_label_group").filter((function(){return"EGFR"==this.__data__.name}))[0][0]}(e),o=d3.select(n).attr("transform"),a=d3.select(e.root+" .clust_container").attr("transform").split(",")[1].replace(")",""),s=.9*e.viz.norm_labels.width.row,l=o.split(",")[1].replace(")",""),u=String(Number(l)+Number(a)+e.viz.rect_height/2);setTimeout(i,4e3,e,"double",s,u),setTimeout(t,4300,e,n)},get_duration:function(){return 8e3}}}},function(t,e,n){var r=n(200),i=n(206);t.exports=function(){function t(t,e,n){var r=d3.selectAll(".toggle_"+e+"_order .btn").filter((function(){return this.__data__==n}))[0];$(r).click()}return{run:function(e){r(e,"Reorder all rows and columns\nby clicking the reorder\n buttons",9e3),setTimeout(i,3e3,e,"toggle_col_order"),setTimeout(t,3500,e,"col","rank"),setTimeout(i,7e3,e,"toggle_row_order"),setTimeout(t,7500,e,"row","rank")},get_duration:function(){return 11e3}}}},function(t,e){t.exports=function(t,e,n=4e3){e.indexOf("slider")<0?d3.select(t.root+" ."+e).style("background","#007f00").style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(n).style("background","#FFFFFF").style("box-shadow","none"):d3.select(t.root+" ."+e).style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(n).style("box-shadow","none")}},function(t,e,n){var r=n(200),i=n(206),o=n(146);t.exports=function(){function t(t,e){$(t.root+" .gene_search_box").val(e),$(t.root+" .gene_search_box").autocomplete("search",e)}function e(t){$(t.root+" .submit_gene_button").click(),$(t.root+" .gene_search_box").autocomplete("search","")}return{run:function(n){var a=n.params;r(a,"Search for rows using\nthe search box",5e3),setTimeout(i,2500,a,"gene_search_container"),setTimeout(t,3500,a,"E"),setTimeout(t,4e3,a,"EG"),setTimeout(t,4500,a,"EGF"),setTimeout(t,5e3,a,"EGFR"),setTimeout(e,5500,a),setTimeout(o,7500,n,0,0,1)},get_duration:function(){return 1e4}}}},function(t,e,n){var r=n(200),i=n(206),o=n(209);t.exports=function(){function t(t,e,n,r){var i,a=t.params,s={};s[e]=n,o(t,s),$(a.root+" .slider_"+e).slider("value",r),i="N_row_sum"===e?"sum":"variance",d3.select(a.root+" .title_"+e).text("Top rows "+i+": "+n)}return{run:function(e){var n=e.params,o="Filter rows based on sum or\nvariance using the sliders";r(n,o,4e3),setTimeout(i,5e3,n,"slider_N_row_sum",13e3),o="Filter: Top 20 rows by sum",setTimeout(r,5e3,n,o,4e3),setTimeout(t,5300,e,"N_row_sum",20,1),o="Filter: Top 10 rows by sum",setTimeout(r,1e4,n,o,4e3),setTimeout(t,10300,e,"N_row_sum",10,2),o="Filter: All rows",setTimeout(r,15e3,n,o,4e3),setTimeout(t,15300,e,"N_row_sum","all",0)},get_duration:function(){return 19500}}}},function(t,e,n){var r=n(11),i=n(210),o=n(211),a=n(3);t.exports=function(t,e){i(t.params);var n=r(t.config,t.params,e);d3.select(t.params.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!0).classed("fa-undo",!1).classed("active_cropping",!1),a.each(["row","col"],(function(e){d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter",!1),d3.select(t.params.root+" ."+e+"_dendro_icons_container").style("display","block")})),o(t,n)}},function(t,e){t.exports=function(t){d3.selectAll(t.root+" .btn").attr("disabled",!0),d3.select(t.viz.viz_svg).style("opacity",.7)}},function(t,e,n){var r=n(10),i=n(212),o=n(213),a=n(153),s=n(185),l=n(190),u=n(191),c=n(192),f=n(224),d=n(226),h=n(163),p=n(227),g=n(152),v=n(228),m=n(155),y=n(230),_=n(84);t.exports=function(t,e){d3.select(t.params.viz.viz_svg).classed("running_update",!0),d3.selectAll(t.params.root+" .ds"+String(t.params.viz.ds_level)+"_row").remove(),null!=t.params.matrix_update_callback&&t.params.matrix_update_callback();var n=t.params.matrix.distance_metric,b=t.params.matrix.linkage_type,w=t.params.matrix.filter_state,x=t.params.matrix.normalization_state,k=t.params.group_level,E=t.params.crop_filter_nodes,z=jQuery.extend(!0,{},t.config);null!=t.params.new_row_cats&&(v(t.params.new_row_cats,e.row_nodes),t.params.new_row_cats=t.params.new_row_cats,t.params.viz=_(t.params,t.params.viz,!0)),z.network_data=e,z.inst_order=t.params.viz.inst_order,z.input_domain=t.params.matrix.opacity_scale.domain()[1],p(z,t.params),z.ini_view=null,z.current_col_cat=t.params.current_col_cat,z.cat_colors=t.params.viz.cat_colors;var A=r(z),C=i(t.params,A);function T(){d3.selectAll(".dendro_shadow").remove()}function S(){d3.select(t.params.viz.viz_svg).classed("running_update",!1)}t.params=A,t.params.zoom_behavior=d3.behavior.zoom().scaleExtent([1,t.params.viz.square_zoom*t.params.viz.zoom_ratio.x]).on("zoom",(function(){m(t)})),t.params.matrix.distance_metric=n,t.params.matrix.linkage_type=b,t.params.matrix.filter_state=w,t.params.matrix.normalization_state=x,t.params.group_level=k,t.params.crop_filter_nodes=E,0===t.params.viz.ds_num_levels?o(t,e,C):y(t),d3.select(t.params.viz.viz_svg).style("opacity",.7),l(t),g(t),t.params.viz.show_categories.col&&s(t),t.params.viz.show_dendrogram&&(u(t),c(t)),a(t),d3.select(t.params.viz.viz_svg).call(t.params.zoom_behavior),h(t),f(t),t.params.viz.run_trans=!0,setTimeout(d,2500,t.params),setTimeout(T,50),setTimeout(T,100),setTimeout(T,500),setTimeout(T,1e3),setTimeout(T,1500),setTimeout((function(){d3.select(t.params.viz.viz_svg).transition().duration(250).style("opacity",1),setTimeout(S,1e3)}),C.enter)}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=t.network_data.col_nodes,i=r.map(t.network_data.row_nodes,(function(t){return t.name})),o=r.map(n,(function(t){return t.name})),a=i.concat(o),s=e.network_data.col_nodes,l=r.map(e.network_data.row_nodes,(function(t){return t.name})),u=r.map(s,(function(t){return t.name})),c=l.concat(u),f=r.difference(a,c).length,d=r.difference(c,a).length,h={};h.update=f>0?1e3:0,h.enter=d>0?1e3:0,h.enter=h.enter+h.update,h.run_transition=!0;var p=.5*e.matrix.def_large_matrix;return(t.network_data.links.length>p||e.network_data.links.length>p)&&(h.run_transition=!1,h.update=0,h.enter=0),h}},function(t,e,n){var r=n(214),i=n(101),o=n(133),a=n(215),s=n(219),l=n(91),u=n(220),c=n(223),f=n(147),d=n(100);t.exports=function(t,e,n){var h=t.params;d3.selectAll(h.viz.root_tips).remove();var p=d().attr("class",(function(){var t=h.viz.root_tips.replace(".","");return t+" d3-tip "+t+"_tile_tip"})).direction("nw").offset([0,0]).style("display","none").html((function(t){var e,n=String(t.value.toFixed(3));if(h.keep_orig){var r=String(t.value_orig.toFixed(3));e="<p>"+t.row_name+" and "+t.col_name+"</p><p> normalized value: "+n+"</p><div> original value: "+r+"</div>"}else e="<p>"+t.row_name+" and "+t.col_name+"</p><div> value: "+n+"</div>";return e}));d3.select(h.root+" .clust_group").call(p),c(h);for(var g=e.row_nodes,v=e.col_nodes,m=e.links,y=0;y<m.length;y++){var _=m[y];m[y].name=g[_.source].name+"_"+v[_.target].name}var b=d3.select(h.root+" .clust_group").selectAll(".row").data(h.matrix.matrix,(function(t){return t.name}));n.run_transition?b.transition().delay(n.update).duration(1e3).attr("transform",(function(t){return"translate(0,"+h.viz.y_scale(t.row_index)+")"})):b.attr("transform",(function(t){return"translate(0,"+h.viz.y_scale(t.row_index)+")"})),d3.select(h.root+" .clust_group").selectAll(".row").each((function(t){a(h,t,n,1e3,this,p)})),d3.selectAll(h.root+" .horz_lines").remove(),d3.selectAll(h.root+" .vert_lines").remove(),s(h,n,1e3),r(t,1e3,n),u(h,n,1e3,p),i(t,1e3),o(t,1e3),l(h,n,1e3),setTimeout(f,2e3,h)}},function(t,e,n){var r=n(2),i=n(74),o=n(71),a=n(73),s=n(164),l=n(165),u=n(166),c=n(167),f=n(169),d=n(171),h=n(172),p=n(173),g=n(174),v=n(175),m=n(178),y=n(83),_=n(82),b=n(88),w=n(3);t.exports=function(t,e=0,n=null){null===n&&((n={}).enter=0,n.update=0,n.run_transition=!1);var x=t.params,k=t.params.network_data.row_nodes;x.zoom_info=b();var E=x.network_data.row_nodes_names;s(x),(x=o(x)).viz=a(x.viz),x.viz=i(x.viz),x.sim_mat&&(x.viz.clust.dim.width<=x.viz.clust.dim.height?x.viz.clust.dim.height=x.viz.clust.dim.width:x.viz.clust.dim.width=x.viz.clust.dim.height),x.viz=_(x.viz),x.viz.x_scale.rangeBands([0,x.viz.clust.dim.width]),x.viz.y_scale.rangeBands([0,x.viz.clust.dim.height]),x.viz.square_zoom=x.viz.norm_labels.width.col/(x.viz.x_scale.rangeBand()/2),x.zoom_behavior.scaleExtent([1,x.viz.square_zoom*x.viz.zoom_ratio.x]),x.viz.border_width.x=x.viz.x_scale.rangeBand()/x.viz.border_fraction,x.viz.border_width.y=x.viz.y_scale.rangeBand()/x.viz.border_fraction,x=y(x);var z=d3.select(x.viz.viz_wrapper).select("svg");z.select(x.root+" .grey_background").transition().delay(n.update).duration(e).attr("width",x.viz.clust.dim.width).attr("height",x.viz.clust.dim.height),f(x,z,n),z.selectAll(".row_label_group").select("text").style("font-size",x.labels.default_fs_row+"px").text((function(t){return r.normal_name(t)})),z.selectAll(".row_label_group").each((function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",x.viz.y_scale.rangeBand()).style("fill","yellow").style("opacity",(function(t){var e=0;return 1===t.target&&(e=1),e}))})),d(x,z,n),n.run_transition?(z.selectAll(".row_label_group").select("text").transition().delay(n.update).duration(e).attr("y",.5*x.viz.rect_height+.35*x.labels.default_fs_row),z.selectAll(".row_cat_group").data(k,(function(t){return t.name})).transition().delay(n.update).duration(e).attr("transform",(function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"})),z.selectAll(".row_cat_group").select("path").transition().delay(n.update).duration(e).attr("d",(function(){return"M "+(x.viz.cat_room.symbol_width-1)+",0 L 1,"+x.viz.y_scale.rangeBand()/2+" L "+(x.viz.cat_room.symbol_width-1)+","+x.viz.y_scale.rangeBand()+" Z"})),z.selectAll(".row_dendro_group").data(k,(function(t){return t.name})).transition().delay(n.update).duration(e).attr("transform",(function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"}))):(z.selectAll(".row_label_group").select("text").attr("y",.5*x.viz.rect_height+.35*x.labels.default_fs_row),z.selectAll(".row_cat_group").data(k,(function(t){return t.name})).attr("transform",(function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"})),z.selectAll(".row_cat_group").select("path").attr("d",(function(){return"M "+(x.viz.cat_room.symbol_width-1)+",0 L 1,"+x.viz.y_scale.rangeBand()/2+" L "+(x.viz.cat_room.symbol_width-1)+","+x.viz.y_scale.rangeBand()+" Z"})),z.selectAll(".row_dendro_group").data(k,(function(t){return t.name})).attr("transform",(function(t){var e=w.indexOf(E,t.name);return"translate(0, "+x.viz.y_scale(e)+")"}))),r.has(x.network_data.row_nodes[0],"value")&&m(t,z),h(x,z,n),p(x,z),g(x,z,n),v(x,z,n),l(x,z,n),u(x,z,n),c(x.viz,z,n),x.zoom_behavior.scale(1).translate([x.viz.clust.margin.left,x.viz.clust.margin.top])}},function(t,e,n){var r=n(216),i=n(217),o=n(218),a=n(97),s=n(98),l=n(99),u=n(3);t.exports=function(t,e,n,c,f,d){var h=e.row_data,p=u.filter(h,(function(t){return 0!=t.value})),g=d3.select(f).selectAll(".tile").data(p,(function(t){return t.col_name}));r(t,n,g,h,f);var v=g.on("mouseover",(function(...e){a(t,this,d,e)})).on("mouseout",(function(){s(t,this,d)})),m=t.network_data.col_nodes_names;n.run_transition?v.transition().delay(n.update).duration(c).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",(function(e){return u.contains(m,e.col_name)?l(t,e):"translate(0,0)"})):v.attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",(function(e){return u.contains(m,e.col_name)?l(t,e):"translate(0,0)"})),"updn"==t.matrix.tile_type&&o(t,h,f,n,c,g,d),i(t,n,c,g,d)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o){if(e.run_transition?n.exit().transition().duration(300).attr("fill-opacity",0).remove():n.exit().attr("fill-opacity",0).remove(),"updn"==t.matrix.tile_type){var a=r.filter(i,(function(t){return 0!=t.value_up||0!=t.value_dn})),s=d3.select(o).selectAll(".tile_up").data(a,(function(t){return t.col_name}));e.run_transition?s.exit().transition().duration(300).attr("fill","0").remove():s.exit().attr("fill",0).remove();var l=d3.select(o).selectAll(".tile_dn").data(a,(function(t){return t.col_name}));e.run_transition?l.exit().transition().duration(300).attr("fill",0).remove():l.exit().attr("fill",0).remove()}}},function(t,e,n){var r=n(97),i=n(98),o=n(99);t.exports=function(t,e,n,a,s){var l=a.enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).on("mouseover",(function(...e){r(t,this,s,e)})).on("mouseout",(function(){i(t,this,s)})).attr("fill-opacity",0).attr("transform",(function(e){return o(t,e)}));e.run_transition?l.transition().delay(e.enter).duration(n).style("fill",(function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]})).attr("fill-opacity",(function(e){return t.matrix.opacity_scale(Math.abs(e.value))})):l.style("fill",(function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]})).attr("fill-opacity",(function(e){return t.matrix.opacity_scale(Math.abs(e.value))})),l.each((function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()}))}},function(t,e,n){var r=n(95),i=n(96),o=n(97),a=n(98),s=n(99),l=n(3);t.exports=function(t,e,n,u,c,f,d){var h=l.filter(e,(function(t){return 0!=t.value_up||0!=t.value_dn})),p=d3.select(n).selectAll(".tile_up").data(h,(function(t){return t.col_name})).on("mouseover",(function(...e){o(t,this,d,e)})).on("mouseout",(function(){a(t,this,d)}));u.run_transition?p.transition().delay(u.update).duration(c).attr("d",(function(){return r(t)})).attr("transform",(function(e){return s(t,e)})):p.attr("d",(function(){return r(t)})).attr("transform",(function(e){return s(t,e)}));var g=d3.select(n).selectAll(".tile_dn").data(h,(function(t){return t.col_name})).on("mouseover",(function(...e){o(t,this,d,e)})).on("mouseout",(function(){a(t,this,d)}));u.run_transition?g.transition().delay(u.update).duration(c).attr("d",(function(){return i(t)})).attr("transform",(function(e){return s(t,e)})):g.attr("d",(function(){return i(t)})).attr("transform",(function(e){return s(t,e)})),f.selectAll(".tile").each((function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()}))}},function(t,e){t.exports=function(t,e,n){var r=t.network_data.row_nodes,i=t.network_data.col_nodes,o=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,(function(t){return t.name})).exit();e.run_transition?o.transition().duration(n).style("opacity",0).remove():o.style("opacity",0).remove(),d3.selectAll(t.root+" .row_label_group").data(r,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_group").data(i,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .row_cat_group").data(r,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .row_dendro_group").data(r,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_text").data(i,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .horz_lines").data(r,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .vert_lines").data(i,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_cat_group").data(i,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove(),d3.selectAll(t.root+" .col_dendro_group").data(i,(function(t){return t.name})).exit().transition().duration(n).style("opacity",0).remove()}},function(t,e,n){var r=n(221);t.exports=function(t,e,n,i){d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,(function(t){return t.name})).enter().append("g").classed("row",!0).attr("transform",(function(e){return"translate(0,"+t.viz.y_scale(e.row_index)+")"})).each((function(o){r(t,o,e,n,i,this)}))}},function(t,e,n){var r=n(222),i=n(97),o=n(98),a=n(99),s=n(3);t.exports=function(t,e,n,l,u,c){var f=e.row_data,d=s.filter(f,(function(t){return 0!==t.value})),h=d3.select(c).selectAll("rect").data(d,(function(t){return t.col_name})).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).style("fill",(function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]})).on("mouseover",(function(...e){i(t,this,u,e)})).on("mouseout",(function(){o(t,this,u)}));h.style("fill-opacity",0).transition().delay(n.enter).duration(l).style("fill-opacity",(function(e){return t.matrix.opacity_scale(Math.abs(e.value))})),h.attr("transform",(function(e){return a(t,e)})),"updn"==t.matrix.tile_type&&r(t,f,c,u,n,l,h)}},function(t,e,n){var r=n(95),i=n(96),o=n(99),a=n(3);t.exports=function(t,e,n,s,l,u,c){var f=a.filter(e,(function(t){return 0!=t.value_up||0!=t.value_dn}));d3.select(n).selectAll(".tile_up").data(f,(function(t){return t.col_name})).enter().append("path").attr("class","tile_up").attr("d",(function(){return r(t)})).attr("transform",(function(e){return o(t,e)})).style("fill",(function(){return t.matrix.tile_colors[0]})).on("mouseover",(function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",(function(t){return e.row_name===t.name})),d3.selectAll(t.root+" .col_label_text text").classed("active",(function(t){return e.col_name===t.name})),t.matrix.show_tile_tooltips&&s.show(e)})).on("mouseout",(function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()})).style("fill-opacity",0).transition().delay(l.enter).duration(u).style("fill-opacity",(function(e){var n=0;return Math.abs(e.value_dn)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_up))),n})),d3.select(n).selectAll(".tile_dn").data(f,(function(t){return t.col_name})).enter().append("path").attr("class","tile_dn").attr("d",(function(){return i(t)})).attr("transform",(function(e){return o(t,e)})).style("fill",(function(){return t.matrix.tile_colors[1]})).on("mouseover",(function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",(function(t){return e.row_name===t.name})),d3.selectAll(t.root+" .col_label_text text").classed("active",(function(t){return e.col_name===t.name})),t.matrix.show_tile_tooltips&&s.show(e)})).on("mouseout",(function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()})).style("fill-opacity",0).transition().delay(l.enter).duration(u).style("fill-opacity",(function(e){var n=0;return Math.abs(e.value_up)>0&&(n=t.matrix.opacity_scale(Math.abs(e.value_dn))),n})),c.each((function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()}))}},function(t,e){t.exports=function(t){d3.select(t.root+" .clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")"),d3.select(t.root+" .col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),d3.select(t.root+" .col_cat_outer_container").attr("transform",(function(){return"translate(0,"+(t.viz.norm_labels.width.col+2)+")"}))}},function(t,e,n){n(195);var r=n(145),i=n(144),o=n(225),a=n(3);t.exports=function(t){var e=t.params,n=d3.select(e.root+" .gene_search_box")[0][0],s=new Awesomplete(n,{minChars:1,maxItems:15}),l=t.params.network_data.row_nodes_names;if(s.list=l,d3.selectAll(".awesomplete ul").style("z-index",99),$(e.root+" .gene_search_box").keyup((function(n){if(13===n.keyCode){var r=$(e.root+" .gene_search_box").val();o(t,r,l)}})),$(e.root+" .submit_gene_button").off().click((function(){var n=$(e.root+" .gene_search_box").val();o(t,n,l)})),a.each(e.sim_mat?["both"]:["row","col"],(function(n){$(e.root+" .toggle_"+n+"_order .btn").off().click((function(i){var o=$(i.target).attr("name").replace("_row","").replace("_col","");d3.selectAll(e.root+" .toggle_"+n+"_order .btn").classed("active",!1),d3.select(this).classed("active",!0),"both"!=n?r(t,o,n):(r(t,o,"row"),r(t,o,"col"))}))})),i(t),d3.select(t.params.root+" .opacity_slider").select("#handle-one").empty()){var u=d3.slider().snap(!0).value(1).min(.1).max(1.9).step(.1).on("slide",(function(e,n){!function(e,n){t.params.matrix.opacity_scale.domain([0,t.params.matrix.abs_max_val*(2-n)]),d3.selectAll(t.params.root+" .tile").style("fill-opacity",(function(e){return t.params.matrix.opacity_scale(Math.abs(e.value))}))}(0,n)}));d3.select(t.params.root+" .opacity_slider").call(u)}}},function(t,e,n){var r=n(146),i=n(3);t.exports=function(t,e,n){if(-1!==n.indexOf(e)){d3.selectAll(t.params.root+" .row_label_group").select("rect").style("opacity",0);var o=i.indexOf(n,e),a=t.params.viz.y_scale(o),s=t.params.viz.zoom_ratio.x;r(t,0,t.params.viz.clust.dim.height/2-a,s),t.params.zoom_info.zoom_y=s,d3.selectAll(t.params.root+" .row_label_group").filter((function(t){return t.name===e})).select("rect").style("opacity",1)}}},function(t,e){t.exports=function(t){!1===t.dendro_filter.row&&"clust"===t.viz.inst_order.col&&d3.select(t.root+" .row_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_row_order .btn").attr("disabled",null),!1===t.dendro_filter.col&&"clust"===t.viz.inst_order.row&&d3.select(t.root+" .col_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_col_order .btn").attr("disabled",null),d3.selectAll(t.root+" .gene_search_button .btn").attr("disabled",null),t.viz.run_trans=!1}},function(t,e,n){var r=n(3);t.exports=function(t,e){r.each(["row","col"],(function(n){d3.selectAll(e.root+" .toggle_"+("row"===n?"col":"row")+"_order .btn").filter((function(){return d3.select(this).attr("name")===t.inst_order[n]})).classed("active",!0)}))}},function(t,e,n){var r=n(229),i=n(2),o=n(3);t.exports=function(t,e,n=!1){var a,s,l,u,c,f,d=0,h=0;o.each(e,(function(e){s=e.name,!0===n&&(s.indexOf(" ")?s=s.split(" ")[0]:s.indexOf("_")&&(s=s.split("_")[0])),d=0,r(e),o.each(t,(function(t){if(a=t.cat_title,l="false",h=-1,f=0,o.each(t.cats,(function(t){u=t.cat_name,o.contains(t.members,s)&&(l=u,h=f),f+=1})),i.has(t,"pval")){var n=t.pval.toExponential();c=a+": "+l+"<p> Pval "+String(n)+"</p>"}else c=-1===a.indexOf("cat-")?a+": "+l:l;e["cat-"+String(d)]=c,e["cat_"+String(d)+"_index"]=h,d+=1}))}))}},function(t,e,n){var r=n(3);t.exports=function(t){var e=r.keys(t);r.each(e,(function(e){e.indexOf("cat-")>-1&&delete t[e],e.indexOf("cat_")>-1&&delete t[e]}))}},function(t,e,n){var r=n(214),i=n(133),o=n(136),a=n(223);t.exports=function(t){d3.selectAll(t.params.root+" .row_cat_group").remove(),d3.selectAll(t.params.root+" .row_label_group").remove(),d3.selectAll(t.params.root+" .row").remove(),o(t,!0,!0,!0),i(t);var e=t.params.network_data.col_nodes;d3.selectAll(t.params.root+" .col_label_group").data(e,(function(t){return t.name})).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_label_text").data(e,(function(t){return t.name})).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_cat_group").data(e,(function(t){return t.name})).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_dendro_group").data(e,(function(t){return t.name})).exit().style("opacity",0).remove(),a(t.params),r(t,0,{enter:0,update:0,run_transition:!1})}},function(t,e,n){var r=n(203);t.exports=function(){function t(t){$(t.root+" .expand_button").d3Click()}function e(t){n(0,"row","clust"),n(0,"col","clust")}function n(t,e,n){var r=d3.selectAll(".toggle_"+e+"_order .btn").filter((function(){return this.__data__==n}))[0];$(r).click()}return jQuery.fn.d3Click=function(){this.each((function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}))},{run:function(n){var i=Number(d3.select(n.root+" .expand_button").attr("x").replace("px","")),o=Number(d3.select(n.root+" .expand_button").attr("y").replace("px",""));setTimeout(r,0,n,"single",i,o),setTimeout(t,400,n),setTimeout(e,1500,n)},get_duration:function(){return 3500}}}},function(t,e,n){var r=n(200),i=n(206),o=n(195);t.exports=function(){function t(t,e,n){$(cgm.params.root+" .slider_col").slider("value",n/10),o(cgm,e,n)}return{run:function(e){r(e,"Identify row and column groups\nof varying sizes using  the\nsliders and dendrogram",1e4),setTimeout(i,3e3,e,"slider_col",7e3),setTimeout(t,4e3,e,"row",3),setTimeout(t,5e3,e,"row",4),setTimeout(t,6e3,e,"row",5),setTimeout(t,7e3,e,"row",6),setTimeout(t,8e3,e,"row",7),setTimeout(t,9e3,e,"row",5)},get_duration:function(){return 11e3}}}},function(t,e,n){var r=n(200),i=n(203);t.exports=function(){function t(t,e){$(e).d3DblClick()}return jQuery.fn.d3DblClick=function(){this.each((function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}))},{run:function(e){r(e,"Row and column categories\ncan be use to reorder\nby double-clicking",7e3);var n=d3.selectAll(e.root+" .col_cat_super").filter((function(){return"cat-1"===this.__data__}))[0],o=d3.select(".col_cat_super").attr("transform"),a=Number(o.split("(")[1].split(",")[0].replace(")",""))+20,s=Number(o.split(",")[1].replace(")",""));setTimeout(i,4e3,e,"double",a,s),setTimeout(t,4300,e,n)},get_duration:function(){return 8e3}}}},function(t,e,n){var r=n(200),i=n(235);t.exports=function(){function t(t){d3.select(t.root+" .play_button").classed("running_demo",!1),i(t,!0)}return{run:function(e){setTimeout(r,0,e,"Clustergrammer is built with gene\nexpression data in mind and interfaces\nwith several Ma'ayan lab web tools",4500),setTimeout(r,4500,e,"The example data being visualized is\ngene expression data obtained from the\nCancer Cell Line Encyclopedia",4500),setTimeout(r,9e3,e,"For more information please view\nthe help documentation",4500),setTimeout(t,14e3,e)},get_duration:function(){return 12e3}}}},function(t,e){t.exports=function(t,e){!1===e?d3.select(t.root+" .play_button").transition().duration(500).style("opacity",0):(d3.select(t.root+" .play_button").transition().duration(500).style("opacity",1),$.unblockUI())}},function(t,e,n){var r=n(200),i=n(203);t.exports=function(){function t(t){$(t.root+" .expand_button").d3Click()}return jQuery.fn.d3Click=function(){this.each((function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}))},jQuery.fn.d3DblClick=function(){this.each((function(t,e){var n=document.createEvent("MouseEvents");n.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}))},{run:function(e){r(e,"View additional controls\nby clicking the menu button",4e3);var n=Number(d3.select(e.root+" .expand_button").attr("x").replace("px","")),o=Number(d3.select(e.root+" .expand_button").attr("y").replace("px",""));setTimeout(i,3e3,e,"single",n,o),setTimeout(t,3400,e)},get_duration:function(){return 5e3}}}},function(t,e,n){var r=n(238),i=n(239);t.exports=function(){var t=this.params;r(this),i(t,30)}},function(t,e,n){var r=n(179);t.exports=function(t){var e=t.params;if(d3.select(e.root+" .play_button").empty()){var n=d3.select(e.root+" .viz_svg").append("g").classed("play_button",!0).classed("running_demo",!1);r(e),n.append("circle").style("r",45).style("fill","white").style("stroke","black").style("stroke-width","3px").style("opacity",.5),n.append("path").attr("d",(function(){return"M-15,-22 l 40,22 l -40,22 z "})).style("fill","black").style("opacity",.5),n.on("mouseover",(function(){d3.select(this).select("path").style("fill","red").style("opacity",1),d3.select(this).select("circle").style("opacity",1)})).on("mouseout",(function(){d3.select(this).select("path").style("fill","black").style("opacity",.5),d3.select(this).select("circle").style("opacity",.5)})).on("click",(function(){t.play_demo()}))}}},function(t,e){t.exports=function(t,e){if(d3.select(t.root+" .demo_group").empty()){var n=d3.select(t.root+" .clust_container").attr("transform"),r=Number(n.split("(")[1].split(",")[0]),i=Number(n.split(",")[1].replace(")","")),o=d3.select(t.root+" .viz_svg").append("g").classed("demo_group",!0).attr("transform",(function(){return"translate("+(r+20)+","+(i+40)+")"}));o.append("rect").classed("rect_1",!0),o.append("rect").classed("rect_2",!0),o.append("rect").classed("rect_3",!0);var a=1.3*e;o.append("text").attr("id","text_1").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),o.append("text").attr("id","text_2").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",(function(){return"translate(0,"+String(a)+")"})),o.append("text").attr("id","text_3").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",(function(){return"translate(0,"+String(2*a)+")"}))}}},function(t,e,n){var r=n(12),i=n(211);t.exports=function(t){var e=r(this.config,t);i(this,e)}},function(t,e,n){var r=n(12),i=n(211),o=n(3);t.exports=function(t,e=!1){var n,a,s=(n=!1===e?this:e).params,l={};o.each(["row","col"],(function(e){var n=s.inst_nodes[e+"_nodes"];if(_.has(t,e))if(t[e].length>0){var r=t[e];a=$.grep(n,(function(t){return $.inArray(t.name,r)>-1}))}else a=n;else a=n;l[e+"_nodes"]=a}));var u=n.params.network_data.row_nodes,c=n.params.network_data.col_nodes,f=r(n.config,l);i(n,f),u.length>n.params.inst_nodes.row_nodes.length&&(n.params.inst_nodes.row_nodes=u),c.length>n.params.inst_nodes.col_nodes.length&&(n.params.inst_nodes.col_nodes=c)}},function(t,e,n){var r=n(190),i=n(67),o=n(154),a=n(228);t.exports=function(t,e){null!=t.params.cat_update_callback&&t.params.cat_update_callback(this);var n=t.params.viz.cat_colors.col;a(e,t.params.network_data.row_nodes,!0),a(e,t.params.inst_nodes.row_nodes,!0),t.params=i(t.params,!1),r(t,!0),o(t),t.params.new_row_cats=e,t.params.viz.cat_colors.col=n}},function(t,e,n){var r=n(190),i=n(67),o=n(154),a=n(228),s=n(244);t.exports=function(t=!0){var e=this,n=s(e),l=e.params.viz.cat_colors.col;a(n,e.params.network_data.row_nodes),a(n,e.params.inst_nodes.row_nodes),e.params.new_row_cats=n,e.params.viz.cat_colors.col=l,t&&(e.params=i(e.params,!0),r(e,!0),o(e))}},function(t,e,n){var r=n(3);t.exports=function(t){var e,n,i,o,a,s,l,u=t.config.network_data.row_nodes,c=[],f=u[0],d=r.keys(f),h={};r.each(d,(function(t){t.indexOf("cat-")>=0&&(a=f[t],l=parseInt(t.split("cat-")[1],10),s=a.indexOf(": ")>=0?a.split(": ")[0]:t,h[l]=s)}));var p,g=r.keys(h).sort();return r.each(g,(function(t){(p={}).cat_title=h[t],p.cats=[],c.push(p)})),r.each(u,(function(t){var a=r.keys(t);r.each(a,(function(a){if(a.indexOf("cat-")>-1){o=t[a],l=parseInt(a.split("cat-")[1],10);var s=a;o=t[a];var u=t[a],f=t.name;u.indexOf(": ")>-1?(s=u.split(": ")[0],o=u.split(": ")[1]):(s=a,o=u),0===c.length?function(t,r,i){(e={}).cat_title=t,e.cats=[],(n={}).cat_name=r,n.members=[],n.members.push(i),e.cats.push(n),c.push(e)}(s,o,f):r.each(c,(function(t){s===t.cat_title&&(i=!1,r.each(t.cats,(function(t){o===t.cat_name&&(i=!0,t.members.push(f))})),!1===i&&((n={}).cat_name=o,n.members=[],n.members.push(f),t.cats.push(n)))}))}}))})),c}},function(t,e,n){var r=n(209),i=n(246);t.exports=function(t,e,n){var o={};o[e]=n,r(t,o),i(t,e,n)}},function(t,e,n){var r=n(247),i=n(3);t.exports=function(t,e,n){var o,a,s=t.params;d3.select(s.root+" .slider_"+e).attr("current_state",n),i.each(i.keys(s.viz.possible_filters),(function(n){if(o=e.indexOf("row")>-1?"row":e.indexOf("col")>-1?"col":"neither",a=n.indexOf("row")>-1?"row":n.indexOf("col")>-1?"col":"neither",e!=n&&"neither"!=o&&o==a){var i=r(s,n);t.slider_functions[n].value(0),d3.select(s.root+" .title_"+n).text(i.text+i.state),d3.select(s.root+" .slider_"+n).attr("current_state",i.state)}}));var l=r(s,e);d3.select(s.root+" .title_"+e).text(l.text+n+l.suffix)}},function(t,e,n){var r=n(6),i=n(3);t.exports=function(t,e){var n={},o={},a={};return n.state=r(t.viz.filter_data,e),a.top=e.split("_")[0],a.node=e.split("_")[1],a.measure=e.split("_")[2],o.node="row"===a.node?"rows":"columns","N"===a.top&&(n.suffix=""),"pct"===a.top&&(n.suffix="%"),"sum"==a.measure?o.measure="sum":"var"==a.measure&&(o.measure="variance"),"sum"===a.measure&&(n.text="Top "+o.node+" "+o.measure+": "),"var"===a.measure&&(n.text="Top "+o.node+" "+o.measure+": "),i.keys(t.viz.possible_filters).indexOf("enr_score_type")>-1&&"col"===a.node&&(n.text="Top Enriched Terms: ",n.suffix=""),n}},function(t,e,n){var r=n(249),i=n(250);t.exports=function(){var t=r(),e=i(this.params);t(new Blob([e],{type:"text/plain;charset=utf-8"}),"clustergrammer.txt")}},function(t,e){t.exports=function(){var t=t||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){"use strict";var e=t.document,n=t.URL||t.webkitURL||t,r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=t.webkitRequestFileSystem,a=t.requestFileSystem||o||t.mozRequestFileSystem,s=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},l=0,u=[],c=function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(o){s(o)}}},f=function(n,s){var f,d,h,p,g=this,v=n.type,m=!1,y=function(){var e=(t.URL||t.webkitURL||t).createObjectURL(n);return u.push(e),e},_=function(){c(g,"writestart progress write writeend".split(" "))},b=function(){!m&&f||(f=y()),d&&(d.location.href=f),g.readyState=g.DONE,_()},w=function(t){return function(){if(g.readyState!==g.DONE)return t.apply(this,arguments)}},x={create:!0,exclusive:!1};if(g.readyState=g.INIT,s||(s="download"),i)return f=y(),r.href=f,r.download=s,h=r,(p=e.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),h.dispatchEvent(p),g.readyState=g.DONE,void _();t.chrome&&v&&"application/octet-stream"!==v&&(n=(n.slice||n.webkitSlice).call(n,0,n.size,"application/octet-stream"),m=!0),o&&"download"!==s&&(s+=".download"),d="application/octet-stream"===v||o?t:t.open(),a?a(t.TEMPORARY,l+=n.size,w((function(t){t.root.getDirectory("saved",x,w((function(t){var e=function(){t.getFile(s,x,w((function(t){t.createWriter(w((function(e){e.onwriteend=function(e){d.location.href=t.toURL(),u.push(t),g.readyState=g.DONE,c(g,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&b()},"writestart progress write abort".split(" ").forEach((function(t){e["on"+t]=g["on"+t]})),e.write(n),g.abort=function(){e.abort(),g.readyState=g.DONE},g.readyState=g.WRITING})),b)})),b)};t.getFile(s,{create:!1},w((function(t){t.remove(),e()})),w((function(t){t.code===t.NOT_FOUND_ERR?e():b()})))})),b)})),b):b()},d=f.prototype;return d.abort=function(){this.readyState=this.DONE,c(this,"abort")},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,t.addEventListener("unload",(function(){for(var t=u.length;t--;){var e=u[t];"string"==typeof e?n.revokeObjectURL(e):e.remove()}u.length=0}),!1),function(t,e){return new f(t,e)}}(self);return t}},function(t,e,n){var r=n(251),i=n(3);t.exports=function(t){var e=t.matrix,n={};i.each(["row","col"],(function(r){n["row"===r?"col":"row"]=e.orders[t.inst_order[r]+"_"+r]}));for(var o,a="\t",s=t.network_data.row_nodes,l=t.network_data.col_nodes,u=0;u<n.col.length;u++){var c=r(t,l[n.col[u]],"col");u<n.col.length-1?a=a+c+"\t":a+=c}return a+="\n",i.each(n.row,(function(i){o=e.matrix[i].row_data;var l=r(t,s[i],"row");a=a+l+"\t";for(var u=0;u<n.col.length;u++){var c=n.col[u];u<n.col.length-1?a=a+String(o[c].value)+"\t":a+=String(o[c].value)}a+="\n"})),a}},function(t,e){t.exports=function(t,e,n){var r,i=e.name,o=t.viz.all_cats[n].length;if(o>0){i="('"+i+"'";for(var a=0;a<o;a++)r="cat-"+String(a),i=i+", '"+String(e[r])+"'";i+=")"}else i=String(i);return i}},function(t,e,n){var r=n(253),i=n(3);t.exports=function(){var t=this,e=t.params,n=e.viz.clust.dim.width,o=e.viz.clust.dim.height,a=d3.scale.linear().domain([0,n]).range([0,n]),s=d3.scale.linear().domain([0,o]).range([0,o]);d3.select(e.root+" .clust_container").append("g").classed("brush_group",!0),t.params.is_cropping=!0;var l=d3.svg.brush().x(a).y(s).on("brushend",(function(){d3.select(t.params.root+" .col_dendro_icons_container").style("display","none"),d3.select(t.params.root+" .row_dendro_icons_container").style("display","none");var n=l.extent(),o=n[0],a=n[1],s=o[0],u=a[0],c=o[1],f=a[1];if(s!=u&&c!=f){setTimeout(r,500,t);var d=function(t,n,r,o,a,s){t>n&&(t=s[0],n=a[0]),r>o&&(r=s[1],o=a[1]),r-=e.viz.rect_height,t-=e.viz.rect_width;var l={row:[],col:[]};return i.each(e.matrix.matrix,(function(t){var n=e.viz.y_scale(t.row_index);n>r&&n<o&&l.row.push(t.name)})),d3.selectAll(e.root+" .col_label_text").each((function(e){var r=d3.select(this).attr("transform"),i=Number(r.split(",")[0].split("(")[1]);i>t&&i<n&&l.col.push(e.name)})),l}(s,u,c,f,o,a);t.filter_viz_using_names(d),d3.select(e.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!1).classed("fa-undo",!0)}}));d3.select(e.root+" .brush_group").call(l),d3.selectAll(e.root+" .extent").style("opacity",.2).style("fill","black")}},function(t,e){t.exports=function(t){d3.select(t.params.root+" .brush_group").transition().style("opacity",0).remove(),t.params.is_cropping=!1}},function(t,e,n){var r,i,o,a;a=function(t){return function(){"use strict";var e,n,r,i,o,a,s=0,l=100,u=.01,c=!1,f="horizontal",d=!1,h=50,p=1,g=!1,v=t.dispatch("slide","slideend"),m=t.format(".2%"),y=t.format(".0"),_=null;function b(u){u.each((function(){n||(n=t.scale.linear().domain([s,l])),e=e||n.domain()[0];var u=t.select(this).classed("d3-slider d3-slider-"+f,!0),c=t.behavior.drag();if(c.on("dragend",(function(){v.slideend(t.event,e)})),"array"==E(e)&&2==e.length?(i=u.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",C).call(c),_=u.append("a").classed("d3-slider-handle",!0).attr("id","handle-two").attr("xlink:href","#").on("click",C).call(c)):i=u.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",C).call(c),"horizontal"===f){if(u.on("click",(function(){if("array"!=E(e)){var r=Math.max(0,Math.min(a,t.event.offsetX||t.event.layerX));w(n.invert?x(n.invert(r/a)):k(r/a))}})),"array"==E(e)&&2==e.length){o=t.select(this).append("div").classed("d3-slider-range",!0),i.style("left",m(n(e[0]))),o.style("left",m(n(e[0]))),c.on("drag",z);var g=100-parseFloat(m(n(e[1])));_.style("left",m(n(e[1]))),o.style("right",g+"%"),c.on("drag",z)}else i.style("left",m(n(e))),c.on("drag",z);a=parseInt(u.style("width"),10)}else{if(u.on("click",(function(){if("array"!=E(e)){var r=a-Math.max(0,Math.min(a,t.event.offsetY||t.event.layerY));w(n.invert?x(n.invert(r/a)):k(r/a))}})),c.on("drag",A),"array"==E(e)&&2==e.length){o=t.select(this).append("div").classed("d3-slider-range-vertical",!0),i.style("bottom",m(n(e[0]))),o.style("bottom",m(n(e[0]))),c.on("drag",A);var b=100-parseFloat(m(n(e[1])));_.style("bottom",m(n(e[1]))),o.style("top",b+"%"),c.on("drag",A)}else i.style("bottom",m(n(e))),c.on("drag",A);a=parseInt(u.style("height"),10)}function z(){"handle-one"===t.event.sourceEvent.target.id?p=1:"handle-two"==t.event.sourceEvent.target.id&&(p=2);var e=Math.max(0,Math.min(a,t.event.x));w(n.invert?x(n.invert(e/a)):k(e/a))}function A(){"handle-one"===t.event.sourceEvent.target.id?p=1:"handle-two"==t.event.sourceEvent.target.id&&(p=2);var e=a-Math.max(0,Math.min(a,t.event.y));w(n.invert?x(n.invert(e/a)):k(e/a))}function C(){t.event.stopPropagation()}d&&function(e){"boolean"==typeof d&&(d=t.svg.axis().ticks(Math.round(a/100)).tickFormat(y).orient("horizontal"===f?"bottom":"right")),r=n.ticks?n.copy().range([0,a]):n.copy().rangePoints([0,a],.5),d.scale(r);var i=e.append("svg").classed("d3-slider-axis d3-slider-axis-"+d.orient(),!0).on("click",C),o=i.append("g");"horizontal"===f?(i.style("margin-left",-h+"px"),i.attr({width:a+2*h,height:h}),"top"===d.orient()?(i.style("top",-h+"px"),o.attr("transform","translate("+h+","+h+")")):o.attr("transform","translate("+h+",0)")):(i.style("top",-h+"px"),i.attr({width:h,height:a+2*h}),"left"===d.orient()?(i.style("left",-h+"px"),o.attr("transform","translate("+h+","+h+")")):o.attr("transform","translate(0,"+h+")")),o.call(d)}(u)}))}function w(r){var a="array"==E(e)&&2==e.length?e[p-1]:e,s=m(n(x(a))),l=m(n(x(r))),u="horizontal"===f?"left":"bottom";if(s!==l){if("array"==E(e)&&2==e.length?(e[p-1]=r,t.event&&v.slide(t.event,e)):t.event&&v.slide(t.event.sourceEvent||t.event,e=r),e[0]>=e[1])return;if(1===p)"array"==E(e)&&2==e.length&&o.style("left"===u?"left":"bottom",l),c?i.transition().styleTween(u,(function(){return t.interpolate(s,l)})).duration("number"==typeof c?c:250):i.style(u,l);else{var d=100-parseFloat(l),h=100-parseFloat(l);"left"===u?o.style("right",d+"%"):o.style("top",h+"%"),c?_.transition().styleTween(u,(function(){return t.interpolate(s,l)})).duration("number"==typeof c?c:250):_.style(u,l)}}}function x(t){if(t===n.domain()[0]||t===n.domain()[1])return t;var e=t;if(g)e=k(n(t));else{var r=(t-n.domain()[0])%u;e=t-r,2*Math.abs(r)>=u&&(e+=r>0?u:-u)}return e}function k(t){var e=n.ticks?n.ticks():n.domain(),r=e.map((function(e){return t-n(e)})),i=-1,o=0,a=n.ticks?n.range()[1]:n.rangeExtent()[1];do{i++,Math.abs(r[i])<a&&(a=Math.abs(r[i]),o=i)}while(r[i]>0&&i<r.length-1);return e[o]}function E(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}return b.min=function(t){return arguments.length?(s=t,b):s},b.max=function(t){return arguments.length?(l=t,b):l},b.step=function(t){return arguments.length?(u=t,b):u},b.animate=function(t){return arguments.length?(c=t,b):c},b.orientation=function(t){return arguments.length?(f=t,b):f},b.axis=function(t){return arguments.length?(d=t,b):d},b.margin=function(t){return arguments.length?(h=t,b):h},b.value=function(t){return arguments.length?(e&&w(x(t)),e=t,b):e},b.snap=function(t){return arguments.length?(g=t,b):g},b.scale=function(t){return arguments.length?(n=t,b):n},t.rebind(b,v,"on"),b}},i=[n(255)],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o)},function(t,e){t.exports=d3},function(t,e){!function(){var e=function(t,n){var r=this;this.input=i(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),function(t,e,n){for(var r in e){var i=e[r],o=t.input.getAttribute("data-"+r.toLowerCase());t[r]="number"==typeof i?parseInt(o):!1===i?null!==o:i instanceof Function?null:o,t[r]||0===t[r]||(t[r]=r in n?n[r]:i)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:e.DATA,filter:e.FILTER_CONTAINS,sort:e.SORT_BYLENGTH,item:e.ITEM,replace:e.REPLACE},n=n||{}),this.index=-1,this.container=i.create("div",{className:"awesomplete",around:t}),this.ul=i.create("ul",{hidden:"hidden",inside:this.container}),this.status=i.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),i.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(t){var e=t.keyCode;r.opened&&(13===e&&r.selected?(t.preventDefault(),r.select()):27===e?r.close({reason:"esc"}):38!==e&&40!==e||(t.preventDefault(),r[38===e?"previous":"next"]()))}}),i.bind(this.input.form,{submit:this.close.bind(this,{reason:"submit"})}),i.bind(this.ul,{mousedown:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&0===t.button&&(t.preventDefault(),r.select(e,t.target))}}}),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],e.all.push(this)};function n(t){var e=Array.isArray(t)?{label:t[0],value:t[1]}:"object"==typeof t&&"label"in t&&"value"in t?t:{label:t,value:t};this.label=e.label||e.value,this.value=e.value}e.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if((t=i(t))&&t.children){var e=[];r.apply(t.children).forEach((function(t){if(!t.disabled){var n=t.textContent.trim(),r=t.value||n;""!==r&&e.push({label:t.label||n,value:r})}})),this._list=e}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return!this.ul.hasAttribute("hidden")},close:function(t){this.opened&&(this.ul.setAttribute("hidden",""),this.index=-1,i.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),i.fire(this.input,"awesomplete-open")},next:function(){this.goto(this.index<this.ul.children.length-1?this.index+1:-1)},previous:function(){this.goto(this.selected?this.index-1:this.ul.children.length-1)},goto:function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent,i.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,e){if(t?this.index=i.siblingIndex(t):t=this.ul.children[this.index],t){var n=this.suggestions[this.index];i.fire(this.input,"awesomplete-select",{text:n,origin:e||t})&&(this.replace(n),this.close({reason:"select"}),i.fire(this.input,"awesomplete-selectcomplete",{text:n}))}},evaluate:function(){var t=this,e=this.input.value;e.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map((function(r){return new n(t.data(r,e))})).filter((function(n){return t.filter(n,e)})).sort(this.sort).slice(0,this.maxItems),this.suggestions.forEach((function(n){t.ul.appendChild(t.item(n,e))})),0===this.ul.children.length?this.close({reason:"nomatches"}):this.open()):this.close({reason:"nomatches"})}},e.all=[],e.FILTER_CONTAINS=function(t,e){return RegExp(i.regExpEscape(e.trim()),"i").test(t)},e.FILTER_STARTSWITH=function(t,e){return RegExp("^"+i.regExpEscape(e.trim()),"i").test(t)},e.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:t<e?-1:1},e.ITEM=function(t,e){var n=""===e?t:t.replace(RegExp(i.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>");return i.create("li",{innerHTML:n,"aria-selected":"false"})},e.REPLACE=function(t){this.input.value=t.value},e.DATA=function(t){return t},Object.defineProperty(n.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),n.prototype.toString=n.prototype.valueOf=function(){return""+this.label};var r=Array.prototype.slice;function i(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function o(t,e){return r.call((e||document).querySelectorAll(t))}function a(){o("input.awesomplete").forEach((function(t){new e(t)}))}i.create=function(t,e){var n=document.createElement(t);for(var r in e){var o=e[r];if("inside"===r)i(o).appendChild(n);else if("around"===r){var a=i(o);a.parentNode.insertBefore(n,a),n.appendChild(a)}else r in n?n[r]=o:n.setAttribute(r,o)}return n},i.bind=function(t,e){if(t)for(var n in e){var r=e[n];n.split(/\s+/).forEach((function(e){t.addEventListener(e,r)}))}},i.fire=function(t,e,n){var r=document.createEvent("HTMLEvents");for(var i in r.initEvent(e,!0,!0),n)r[i]=n[i];return t.dispatchEvent(r)},i.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},i.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},"undefined"!=typeof Document&&("loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)),e.$=i,e.$$=o,"undefined"!=typeof self&&(self.Awesomplete=e),"object"==typeof t&&t.exports&&(t.exports=e)}()},function(t,e,n){var r=n(258);"string"==typeof r&&(r=[[t.id,r,""]]),n(260)(r,{}),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(259)()).push([t.id,".d3-slider {\n    position: relative;\n    font-family: Verdana,Arial,sans-serif;\n    font-size: 1.1em;\n    border: 1px solid #aaaaaa;\n    z-index: 2;\n}\n\n.d3-slider-horizontal {\n    height: .8em;\n}  \n\n.d3-slider-range {\n  background:#2980b9;\n  left:0px;\n  right:0px;\n  height: 0.8em;\n  position: absolute;\n}\n\n.d3-slider-range-vertical {\n  background:#2980b9;\n  left:0px;\n  right:0px;\n  position: absolute;\n  top:0;\n}\n\n.d3-slider-vertical {\n    width: .8em;\n    height: 100px;\n}      \n\n.d3-slider-handle {\n    position: absolute;\n    width: 1.2em;\n    height: 1.2em;\n    border: 1px solid #d3d3d3;\n    border-radius: 4px;\n    background: #eee;\n    background: linear-gradient(to bottom, #eee 0%, #ddd 100%);\n    z-index: 3;\n}\n\n.d3-slider-handle:hover {\n    border: 1px solid #999999;\n}\n\n.d3-slider-horizontal .d3-slider-handle {\n    top: -.3em;\n    margin-left: -.6em;\n}\n\n.d3-slider-axis {\n    position: relative;\n    z-index: 1;    \n}\n\n.d3-slider-axis-bottom {\n    top: .8em;\n}\n\n.d3-slider-axis-right {\n    left: .8em;\n}\n\n.d3-slider-axis path {\n    stroke-width: 0;\n    fill: none;\n}\n\n.d3-slider-axis line {\n    fill: none;\n    stroke: #aaa;\n    shape-rendering: crispEdges;\n}\n\n.d3-slider-axis text {\n    font-size: 11px;\n}\n\n.d3-slider-vertical .d3-slider-handle {\n    left: -.25em;\n    margin-left: 0;\n    margin-bottom: -.6em;      \n}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];t.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},o=i((function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())})),a=i((function(){return document.head||document.getElementsByTagName("head")[0]})),s=null,l=0,u=[];function c(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(g(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],a={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(a):e.push(n[o]={id:o,parts:[a]})}return e}function d(t,e){var n=a(),r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function h(t){t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function p(t){var e=document.createElement("style");return e.type="text/css",d(t,e),e}function g(t,e){var n,r,i;if(e.singleton){var o=l++;n=s||(s=p(e)),r=y.bind(null,n,o,!1),i=y.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return e.rel="stylesheet",d(t,e),e}(e),r=b.bind(null,n),i=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(e),r=_.bind(null,n),i=function(){h(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){void 0===(e=e||{}).singleton&&(e.singleton=o()),void 0===e.insertAt&&(e.insertAt="bottom");var n=f(t);return c(n,e),function(t){for(var i=[],o=0;o<n.length;o++)(a=r[n[o].id]).refs--,i.push(a);for(t&&c(f(t),e),o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var s=0;s<a.parts.length;s++)a.parts[s]();delete r[a.id]}}}};var v,m=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function y(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function _(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function b(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}},function(t,e,n){var r=n(262);"string"==typeof r&&(r=[[t.id,r,""]]),n(260)(r,{}),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(259)()).push([t.id,'[hidden] { display: none; }\n\n.visually-hidden {\n\tposition: absolute;\n\tclip: rect(0, 0, 0, 0);\n}\n\ndiv.awesomplete {\n\tdisplay: inline-block;\n\tposition: relative;\n}\n\ndiv.awesomplete > input {\n\tdisplay: block;\n}\n\ndiv.awesomplete > ul {\n\tposition: absolute;\n\tleft: 0;\n\tz-index: 1;\n\tmin-width: 100%;\n\tbox-sizing: border-box;\n\tlist-style: none;\n\tpadding: 0;\n\tborder-radius: .3em;\n\tmargin: .2em 0 0;\n\tbackground: hsla(0,0%,100%,.9);\n\tbackground: linear-gradient(to bottom right, white, hsla(0,0%,100%,.8));\n\tborder: 1px solid rgba(0,0,0,.3);\n\tbox-shadow: .05em .2em .6em rgba(0,0,0,.2);\n\ttext-shadow: none;\n}\n\ndiv.awesomplete > ul[hidden],\ndiv.awesomplete > ul:empty {\n\tdisplay: none;\n}\n\n@supports (transform: scale(0)) {\n\tdiv.awesomplete > ul {\n\t\ttransition: .3s cubic-bezier(.4,.2,.5,1.4);\n\t\ttransform-origin: 1.43em -.43em;\n\t}\n\t\n\tdiv.awesomplete > ul[hidden],\n\tdiv.awesomplete > ul:empty {\n\t\topacity: 0;\n\t\ttransform: scale(0);\n\t\tdisplay: block;\n\t\ttransition-timing-function: ease;\n\t}\n}\n\n\t/* Pointer */\n\tdiv.awesomplete > ul:before {\n\t\tcontent: "";\n\t\tposition: absolute;\n\t\ttop: -.43em;\n\t\tleft: 1em;\n\t\twidth: 0; height: 0;\n\t\tpadding: .4em;\n\t\tbackground: white;\n\t\tborder: inherit;\n\t\tborder-right: 0;\n\t\tborder-bottom: 0;\n\t\t-webkit-transform: rotate(45deg);\n\t\ttransform: rotate(45deg);\n\t}\n\n\tdiv.awesomplete > ul > li {\n\t\tposition: relative;\n\t\tpadding: .2em .5em;\n\t\tcursor: pointer;\n\t}\n\t\n\tdiv.awesomplete > ul > li:hover {\n\t\tbackground: hsl(200, 40%, 80%);\n\t\tcolor: black;\n\t}\n\t\n\tdiv.awesomplete > ul > li[aria-selected="true"] {\n\t\tbackground: hsl(205, 40%, 40%);\n\t\tcolor: white;\n\t}\n\t\n\t\tdiv.awesomplete mark {\n\t\t\tbackground: hsl(65, 100%, 50%);\n\t\t}\n\t\t\n\t\tdiv.awesomplete li:hover mark {\n\t\t\tbackground: hsl(68, 100%, 41%);\n\t\t}\n\t\t\n\t\tdiv.awesomplete li[aria-selected="true"] mark {\n\t\t\tbackground: hsl(86, 100%, 21%);\n\t\t\tcolor: inherit;\n\t\t}',""])},function(t,e,n){var r=n(224),i=n(264),o=n(269),a=n(270),s=n(271),l=n(272),u=n(274),c=n(276),f=n(277),d=n(3);t.exports=function(t){var e=t.params,n=d3.select(e.root+" .sidebar_wrapper");e.viz.is_expand&&n.style("display","none"),n.append("div").classed("title_section",!0),null!=e.sidebar.title&&n.select(".title_section").append("h4").style("margin-left","20px").style("margin-top","5px").style("margin-bottom","0px").text(e.sidebar.title),n.append("div").style("padding-right","2px").classed("about_section",!0),null!=e.sidebar.about&&n.select(".about_section").append("h5").classed("sidebar_text",!0).style("margin-left","7px").style("margin-top","5px").style("margin-bottom","2px").style("text-align","justify").html(e.sidebar.about),n.append("div").classed("icons_section",!0).style("text-align","center"),t.params.make_modals&&u(e),e.sidebar.icons&&l(t,n),a(e,n),o(n,e),c(n);var h=d.keys(e.viz.possible_filters);h.indexOf("enr_score_type")>-1&&h.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())})),t.slider_functions={},d.each(h,(function(e){i(t,e)})),r(t),null!==e.ini_view&&(s(e),e.ini_view=null),f(t)}},function(t,e,n){var r=n(265),i=n(268);t.exports=function(t,e){var n=t.params,o=d3.select(n.root+" .sidebar_wrapper").append("div").classed("div_filters",!0).style("padding-left","10px").style("padding-right","10px");"numerical"==n.viz.possible_filters[e]?r(t,e,o):"categorical"==n.viz.possible_filters[e]&&i(t,e,o)}},function(t,e,n){var r=n(247),i=n(266),o=n(6),a=n(64);d3.slider=n(254);var s=n(3);t.exports=function(t,e,n){var l=t.params,u={},c=s.keys(l.viz.possible_filters);s.each(c,(function(t){if(t!=e){var n=o(l.viz.filter_data,t);u[t]=n}}));var f=r(l,e);n.append("div").classed("title_"+e,!0).classed("sidebar_text",!0).classed("slider_description",!0).style("margin-top","5px").style("margin-bottom","3px").text(f.text+f.state+f.suffix),n.append("div").classed("slider_"+e,!0).classed("slider",!0).attr("current_state",f.state);var d=a(l,l.network_data.views,u),h=(d=d.sort((function(t,n){return n[e]-t[e]}))).length-1,p=0;if(null!==l.requested_view&&e in l.requested_view){var g=l.requested_view[e];if("all"!=g){var v=d.map((function(t){return t[e]})).indexOf(g);v>0&&(p=v)}}var m=d3.slider().value(p).min(0).max(h).step(1).on("slide",(function(n,r){y(t,e,d,r)})).on("slideend",(function(n,r){y(t,e,d,r)}));t.slider_functions[e]=m,d3.select(t.params.root+" .slider_"+e).call(m);var y=s.debounce(i,800)}},function(t,e,n){var r=n(209),i=n(246),o=n(267),a=n(66),s=n(3);t.exports=function(t,e,n,l){if(!1===d3.select(t.params.viz.viz_svg).classed("running_update")){var u=t.params,c=n[l][e];i(t,e,c),u=o(u);var f={};if(f[e]=c,f=a(u,f),s.has(n[0],"enr_score_type")){var d=d3.select(u.root+" .toggle_enr_score_type").attr("current_state");f.enr_score_type=d}r(t,f)}}},function(t,e,n){var r=n(3);t.exports=function(t){var e;return r.each(["row","col"],(function(n){e="row"===n?"col":"row",t.viz.inst_order[n]=!1===d3.select(t.root+" .toggle_"+e+"_order .active").empty()?d3.select(t.root+" .toggle_"+e+"_order").select(".active").attr("name"):"clust"})),t}},function(t,e,n){var r=n(66);t.exports=function(t,e,n,i){var o=i.append("div").classed("categorical_filter",!0).classed("toggle_"+n,!0).classed("btn-group-vertical",!0).style("width","100%").style("margin-top","10px").attr("current_state","combined_score"),a=e.viz.filter_data[n],s={combined_score:"Combined Score",pval:"P-Value",zscore:"Z-score"};o.selectAll("button").data(a).enter().append("button").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed(".filter_button",!0).classed("active",(function(t){var e=!1;return"combined_score"==t&&(e=!0),e})).attr("name",(function(t){return t})).html((function(t){return s[t]})),$(e.root+" .categorical_filter .btn").off().click((function(){d3.selectAll(e.root+" .categorical_filter .btn").classed("active",!1),d3.select(this).classed("active",!0);var t=d3.select(this).attr("name");r(e,{enr_score_type:t}),d3.select(e.root+" .toggle_enr_score_type").attr("current_state",t)}))}},function(t,e){t.exports=function(t,e){var n=t.append("div").classed("gene_search_container",!0).style("padding-left","10px").style("padding-right","10px").style("margin-top","10px");n.append("input").classed("form-control",!0).classed("gene_search_box",!0).classed("sidebar_text",!0).attr("type","text").attr("placeholder",e.sidebar.row_search.placeholder).style("height",e.sidebar.row_search.box.height+"px").style("margin-top","10px"),n.append("div").classed("gene_search_button",!0).style("margin-top","5px").attr("data-toggle","buttons").append("button").classed("sidebar_text",!0).html("Search").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed("submit_gene_button",!0).style("width","100%").style("font-size","14px")}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n,i,o,a={row:"Row",col:"Column",both:""},s=e.append("div").style("padding-left","10px").style("padding-right","10px").classed("reorder_section",!0);r.each(t.sim_mat?["both"]:["row","col"],(function(e){var l;n={clust:"Cluster",rank:"Rank by Sum",rankvar:"Rank by Variance",ini:"Initial Order",alpha:"Alphabetically"},l="row"===e?"col":"row",i=Object.keys(t.matrix.orders);var u,c=[];r.each(i,(function(t){t.indexOf(l)>-1&&(t=t.replace("_row","").replace("_col","")).indexOf("cat_")<0&&c.push(t)})),r.keys(t.viz.filter_data).indexOf("enr_score_type")>-1&&(c=["clust","rank"]),c=(c=r.uniq(c)).sort(),u="both"!=e?" Order":"Reorder Matrix",s.append("div").classed("sidebar_button_text",!0).style("clear","both").style("margin-top","10px").html(a[e]+u),s.append("div").classed("btn-group-vertical",!0).style("width","100%").classed("toggle_"+e+"_order",!0).attr("role","group").selectAll(".button").data(c).enter().append("button").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed("sidebar_button_text",!0).classed("active",(function(e){return o=!1,e==t.viz.inst_order[l]&&(o=!0),o})).attr("name",(function(t){return t})).html((function(t){return n[t]}))}))}},function(t,e,n){var r=n(247),i=n(3);t.exports=function(t){i.each(i.keys(t.ini_view),(function(e){var n=t.ini_view[e];if("numerical"===t.viz.possible_filters[e]){"all"!=n&&(n=parseInt(n,10)),t.viz.filter_data[e].indexOf(n)<=-1&&(n="all");var i=r(t,e);d3.select(t.root+" .title_"+e).text(i.text+n+i.suffix),d3.select(t.root+" .slider_"+e).attr("current_state",n)}}))}},function(t,e,n){var r=n(249),i=n(146),o=n(253),a=n(273);t.exports=function(t,e){var n=t.params,s=r(),l=e.select(".icons_section").style("margin-top","7px").style("margin-left","5%");l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","0px").append("i").classed("fa",!0).classed("fa-share-alt",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",(function(){$(n.root+" .share_info").modal("toggle"),$(".share_url").val(window.location.href)})).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Share").style("left","0%"),l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","0px").append("i").classed("fa",!0).classed("fa-camera",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",(function(){$(n.root+" .picture_info").modal("toggle")})).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Take snapshot").style("left","-100%"),l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","0px").append("i").classed("fa",!0).classed("fa fa-cloud-download",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",(function(){t.save_matrix()})).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Download matrix").style("left","-200%"),l.append("div").classed("clust_icon",!0).style("float","left").style("width","22%").style("padding-left","0px").style("padding-right","-5px").append("i").classed("fa",!0).classed("fa-crop",!0).classed("crop_button",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",(function(){if(!1===t.params.dendro_filter.row&&!1===t.params.dendro_filter.col){var e=d3.select(this).classed("fa-crop"),r=d3.select(this).classed("fa-undo");e&&(t.params.crop_filter_nodes={},t.params.crop_filter_nodes.row_nodes=t.params.network_data.row_nodes,t.params.crop_filter_nodes.col_nodes=t.params.network_data.col_nodes,t.brush_crop_matrix(),!1===d3.select(this).classed("active_cropping")?d3.select(this).classed("active_cropping",!0).style("color","red"):(d3.select(this).classed("active_cropping",!1).style("color","#337ab7"),o(t))),r&&(d3.select(n.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!0).classed("fa-undo",!1),t.filter_viz_using_nodes(t.params.crop_filter_nodes),d3.select(t.params.root+" .col_dendro_icons_container").style("display","block"),d3.select(t.params.root+" .row_dendro_icons_container").style("display","block")),i(t,0,0,1)}})).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Crop matrix").style("left","-400%"),d3.select(n.root+" .download_buttons").append("p").append("a").html("Download SVG").on("click",(function(){!function(){d3.select(n.root+" .expand_button").style("opacity",0);var t=d3.select(n.root+" .viz_svg").attr("title","test2").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML,e=new Blob([t],{type:"image/svg+xml"});s(e,"clustergrammer.svg"),d3.select(n.root+" .expand_button").style("opacity",.4)}()}));var u="svg_"+n.root.replace("#","");d3.select(n.root+" .download_buttons").append("p").append("a").html("Download PNG").on("click",(function(){d3.select(n.root+" .expand_button").style("opacity",0),a.saveSvgAsPng(document.getElementById(u),"clustergrammer.png"),d3.select(n.root+" .expand_button").style("opacity",.4)}))}},function(t,e,n){var r;!function(){var i=void 0!==e&&e||{}||this;function o(t){if(!((e=t)instanceof HTMLElement||e instanceof SVGElement))throw new Error("an HTMLElement or SVGElement is required; got "+t);var e}function a(t,e,n){var r=t.viewBox&&t.viewBox.baseVal&&t.viewBox.baseVal[n]||null!==e.getAttribute(n)&&!e.getAttribute(n).match(/%$/)&&parseInt(e.getAttribute(n))||t.getBoundingClientRect()[n]||parseInt(e.style[n])||parseInt(window.getComputedStyle(t).getPropertyValue(n));return null==r||isNaN(parseFloat(r))?0:r}function s(t){for(var e=window.atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([r],{type:n})}i.prepareSvg=function(t,e,n){o(t),(e=e||{}).scale=e.scale||1,e.responsive=e.responsive||!1;var r="http://www.w3.org/2000/xmlns/";!function(t,e){o(t);var n=t.querySelectorAll("image"),r=n.length,i=function(){0===r&&e()};i();for(var a=0;a<n.length;a++)!function(t){var e=t.getAttributeNS("http://www.w3.org/1999/xlink","href");if(e&&(n=e.value)&&0==n.lastIndexOf("http",0)&&-1==n.lastIndexOf(window.location.host))console.warn("Cannot render embedded images linking to external hosts: "+e.value);else{var n,o=document.createElement("canvas"),a=o.getContext("2d"),s=new Image;s.crossOrigin="anonymous",(e=e||t.getAttribute("href"))?(s.src=e,s.onload=function(){o.width=s.width,o.height=s.height,a.drawImage(s,0,0),t.setAttributeNS("http://www.w3.org/1999/xlink","href",o.toDataURL("image/png")),r--,i()},s.onerror=function(){console.log("Could not load "+e),r--,i()}):(r--,i())}}(n[a])}(t,(function(){var i,o,s=document.createElement("div"),l=t.cloneNode(!0);if("svg"==t.tagName)i=e.width||a(t,l,"width"),o=e.height||a(t,l,"height");else{if(!t.getBBox)return void console.error("Attempted to render non-SVG element",t);var u=t.getBBox();i=u.x+u.width,o=u.y+u.height,l.setAttribute("transform",l.getAttribute("transform").replace(/translate\(.*?\)/,""));var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.appendChild(l),l=c}l.setAttribute("version","1.1"),l.getAttribute("xmlns")||l.setAttributeNS(r,"xmlns","http://www.w3.org/2000/svg"),l.getAttribute("xmlns:xlink")||l.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),e.responsive?(l.removeAttribute("width"),l.removeAttribute("height"),l.setAttribute("preserveAspectRatio","xMinYMin meet")):(l.setAttribute("width",i*e.scale),l.setAttribute("height",o*e.scale)),l.setAttribute("viewBox",[e.left||0,e.top||0,i,o].join(" "));for(var f=l.querySelectorAll("foreignObject > *"),d=0;d<f.length;d++)f[d].getAttribute("xmlns")||f[d].setAttributeNS(r,"xmlns","http://www.w3.org/1999/xhtml");s.appendChild(l),function(t,e,n){for(var r=e.selectorRemap,i=e.modifyStyle,o="",a=[],s=document.styleSheets,l=0;l<s.length;l++){try{var u=s[l].cssRules}catch(b){console.warn("Stylesheet could not be loaded: "+s[l].href);continue}if(null!=u)for(var c,f=0;f<u.length;f++,c=null){var d=u[f];if(void 0!==d.style){var h;try{h=d.selectorText}catch(w){console.warn('The following CSS rule has an invalid selector: "'+d+'"',w)}try{h&&(c=t.querySelector(h)||t.parentNode.querySelector(h))}catch(w){console.warn('Invalid CSS selector "'+h+'"',w)}if(c){var p=r?r(d.selectorText):d.selectorText,g=i?i(d.style.cssText):d.style.cssText;o+=p+" { "+g+" }\n"}else if(d.cssText.match(/^@font-face/)){var v=/url\(["']?(.+?)["']?\)/,m=d.cssText.match(v),y=m&&m[1]||"";y.match(/^data:/)&&(y=""),y?(y.startsWith("../")?y=s[l].href+"/../"+y:y.startsWith("./")&&(y=s[l].href+"/."+y),a.push({text:d.cssText,fontUrlRegexp:v,format:_(y),url:y})):o+=d.cssText+"\n"}}}}function _(t){for(var e={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];if(t.indexOf("."+i)>0)return e[i]}return console.error("Unknown font format for "+t+"; Fonts may not be working correctly"),"application/octet-stream"}!function t(e){e.length>0?function(n){var r=new XMLHttpRequest;function i(e){console.warn("Failed to load font from: "+n.url),console.warn(e),o+=n.text+"\n",t()}r.addEventListener("load",(function(){var i=function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}(r.response);!function(n,r){o+=n.text.replace(n.fontUrlRegexp,'url("data:'+n.format+";base64,"+r+'")')+"\n",setTimeout((function(){t(e)}),0)}(n,i)})),r.addEventListener("error",i),r.addEventListener("abort",i),r.open("GET",n.url),r.responseType="arraybuffer",r.send()}(e.pop()):n(o)}(a)}(t,e,(function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML="<![CDATA[\n"+t+"\n]]>";var r=document.createElement("defs");if(r.appendChild(e),l.insertBefore(r,l.firstChild),n){var a=s.innerHTML;a=a.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href'),n(a,i,o)}}))}))},i.svgAsDataUri=function(t,e,n){i.prepareSvg(t,e,(function(t){var e,r="data:image/svg+xml;base64,"+window.btoa((e='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+t,e=(e=encodeURIComponent(e)).replace(/%([0-9A-F]{2})/g,(function(t,e){var n=String.fromCharCode("0x"+e);return"%"===n?"%25":n})),decodeURIComponent(e)));n&&n(r)}))},i.svgAsPngUri=function(t,e,n){o(t),(e=e||{}).encoderType=e.encoderType||"image/png",e.encoderOptions=e.encoderOptions||.8;var r=function(t,r,i){var o,a=document.createElement("canvas"),s=a.getContext("2d");a.width=r,a.height=i,e.canvg?e.canvg(a,t):s.drawImage(t,0,0),e.backgroundColor&&(s.globalCompositeOperation="destination-over",s.fillStyle=e.backgroundColor,s.fillRect(0,0,a.width,a.height));try{o=a.toDataURL(e.encoderType,e.encoderOptions)}catch(l){if("undefined"!=typeof SecurityError&&l instanceof SecurityError||"SecurityError"==l.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw l}n(o)};e.canvg?i.prepareSvg(t,e,r):i.svgAsDataUri(t,e,(function(t){var e=new Image;e.onload=function(){r(e,e.width,e.height)},e.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n",window.atob(t.slice(26)),"\n","Open the following link to see browser's diagnosis\n",t)},e.src=t}))},i.download=function(t,e){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(s(e),t);else{var n=document.createElement("a");if("download"in n){n.download=t,n.style.display="none",document.body.appendChild(n);try{var r=s(e),i=URL.createObjectURL(r);n.href=i,n.onclick=function(){requestAnimationFrame((function(){URL.revokeObjectURL(i)}))}}catch(o){console.warn("This browser does not support object URLs. Falling back to string URL."),n.href=e}n.click(),document.body.removeChild(n)}else window.open(e,"_temp","menubar=no,toolbar=no,status=no")}},i.saveSvg=function(t,e,n){o(t),i.svgAsDataUri(t,n=n||{},(function(t){i.download(e,t)}))},i.saveSvgAsPng=function(t,e,n){o(t),i.svgAsPngUri(t,n=n||{},(function(t){i.download(e,t)}))},void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(275);t.exports=function(t){var e=r(t,"share_info");e.header.append("a").attr("target","_blank").attr("href","/clustergrammer/"),e.header.append("h4").classed("modal-title",!0).html("Share the visualization using the current URL:"),e.body.append("input").classed("bootstrap_highlight",!0).classed("share_url",!0);var n=r(t,"picture_info");n.header.append("h4").classed("modal-title",!0).html("Save a snapshot of the visualization"),n.body.append("div").classed("download_buttons",!0);var i=r(t,"dendro_info");i.header.append("h4").classed("modal-title",!0).html("Cluster Information"),i.body.append("g").classed("cluster_info_container",!0),i.body.append("div").classed("dendro_text",!0).append("input").classed("bootstrap_highlight",!0).classed("current_names",!0).style("width","100%")}},function(t,e){t.exports=function(t,e){var n={},r=d3.select(t.root).append("div").classed("modal",!0).classed("fade",!0).classed(e,!0).attr("role","dialog").append("div").classed("modal-dialog",!0).append("div").classed("modal-content",!0);return n.header=r.append("div").classed("modal-header",!0),n.header.append("button").attr("type","button").classed("close",!0).attr("data-dismiss","modal").html("&times;"),n.body=r.append("div").classed("modal-body",!0),n}},function(t,e){t.exports=function(t){var e=t.append("div").classed("opacity_slider_container",!0).style("margin-top","5px").style("padding-left","10px").style("padding-right","10px");e.append("div").classed("sidebar_text",!0).classed("opacity_slider_text",!0).style("margin-bottom","3px").text("Opacity Slider"),e.append("div").classed("slider",!0).classed("opacity_slider",!0)}},function(t,e,n){var r=n(3);t.exports=function(t){var e=t.params;d3.select(e.root+" .sidebar_wrapper").append("div").classed("sidebar_text",!0).style("padding-left","10px").style("padding-top","5px").text("Matrix Values");var n=e.sidebar.width-20,i=1.2*n,o=n+10,a=e.network_data,s=r.max(a.links,(function(t){return t.value})).value,l=r.min(a.links,(function(t){return t.value})).value,u=d3.select(e.root+" .sidebar_wrapper").append("svg").attr("height","39px").attr("width",i+"px"),c=u.append("defs").append("linearGradient").attr("id","linear-gradient"),f="none";l>=0?(c.append("stop").attr("offset","0%").attr("stop-color","white"),c.append("stop").attr("offset","100%").attr("stop-color","red"),f="all_postiive"):s<=0?(c.append("stop").attr("offset","0%").attr("stop-color","blue"),c.append("stop").attr("offset","100%").attr("stop-color","white"),f="all_negative"):(c.append("stop").attr("offset","0%").attr("stop-color","blue"),c.append("stop").attr("offset","50%").attr("stop-color","white"),c.append("stop").attr("offset","100%").attr("stop-color","red")),u.append("rect").classed("background",!0).attr("height","13px").attr("width",n+"px").attr("fill","url(#linear-gradient)").attr("transform","translate(10, 3)").attr("stroke","grey").attr("stroke-width","0.25px");var d=Math.abs(Math.round(10*e.matrix.max_link)/10);u.append("text").text((function(){return"all_postiive"===f?0:"-"+d.toLocaleString()})).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",300).style("font-size",13).attr("transform","translate(10,33)").attr("text-anchor","start"),u.append("text").text(d.toLocaleString()).text((function(){return"all_negative"===f?0:d.toLocaleString()})).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",300).style("font-size",13).attr("transform","translate("+o+",33)").attr("text-anchor","end")}}]);!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/js",n(n.s=8)}([function(t,e,n){"use strict";n.r(e);var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t},a=function(t){var e=o(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r&&e.documentElement.namespaceURI===r?e.createElement(t):e.createElementNS(n,t)}})(e)};function s(){}var l=function(t){return null==t?s:function(){return this.querySelector(t)}};function u(){return[]}var c=function(t){return null==t?u:function(){return this.querySelectorAll(t)}},f=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var d=document.documentElement;if(!d.matches){var h=d.webkitMatchesSelector||d.msMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector;f=function(t){return function(){return h.call(this,t)}}}}var p=f,g=function(t){return new Array(t.length)};function v(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function m(t,e,n,r,i,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new v(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function y(t,e,n,r,i,o,a){var s,l,u,c={},f=e.length,d=o.length,h=new Array(f);for(s=0;s<f;++s)(l=e[s])&&(h[s]=u="$"+a.call(l,l.__data__,s,e),u in c?i[s]=l:c[u]=l);for(s=0;s<d;++s)(l=c[u="$"+a.call(t,o[s],s,o)])?(r[s]=l,l.__data__=o[s],c[u]=null):n[s]=new v(t,o[s]);for(s=0;s<f;++s)(l=e[s])&&c[h[s]]===l&&(i[s]=l)}function _(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}v.prototype={constructor:v,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var b=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function w(t,e){return t.style.getPropertyValue(e)||b(t).getComputedStyle(t,null).getPropertyValue(e)}function x(t){return t.trim().split(/^|\s+/)}function k(t){return t.classList||new E(t)}function E(t){this._node=t,this._names=x(t.getAttribute("class")||"")}function z(t,e){for(var n=k(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function A(t,e){for(var n=k(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function C(){this.textContent=""}function T(){this.innerHTML=""}function S(){this.nextSibling&&this.parentNode.appendChild(this)}function M(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function N(){return null}function D(){var t=this.parentNode;t&&t.removeChild(this)}function O(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function I(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}E.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var P={},L=null;function B(t,e,n){return t=j(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function j(t,e,n){return function(r){var i=L;L=r;try{t.call(this,this.__data__,e,n)}finally{L=i}}}function F(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function R(t,e,n){var r=P.hasOwnProperty(t.type)?B:j;return function(i,o,a){var s,l=this.__on,u=r(e,o,a);if(l)for(var c=0,f=l.length;c<f;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function q(t,e,n,r){var i=L;t.sourceEvent=L,L=t;try{return e.apply(n,r)}finally{L=i}}function H(t,e,n){var r=b(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(P={mouseenter:"mouseover",mouseleave:"mouseout"}));var $=[null];function W(t,e){this._groups=t,this._parents=e}function U(){return new W([[document.documentElement]],$)}W.prototype=U.prototype={constructor:W,select:function(t){"function"!=typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),f=0;f<u;++f)(o=s[f])&&(a=t.call(o,o.__data__,f,s))&&("__data__"in o&&(a.__data__=o.__data__),c[f]=a);return new W(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),i.push(a));return new W(r,i)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new W(r,this._parents)},data:function(t,e){if(!t)return h=new Array(this.size()),u=-1,this.each((function(t){h[++u]=t})),h;var n=e?y:m,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],d=f.length,h=t.call(c,c&&c.__data__,u,r),p=h.length,g=s[u]=new Array(p),v=a[u]=new Array(p);n(c,f,g,v,l[u]=new Array(d),h,e);for(var _,b,w=0,x=0;w<p;++w)if(_=g[w]){for(w>=x&&(x=w+1);!(b=v[x])&&++x<p;);_._next=b||null}}return(a=new W(a,r))._enter=s,a._exit=l,a},enter:function(){return new W(this._enter||this._groups.map(g),this._parents)},exit:function(){return new W(this._exit||this._groups.map(g),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),o=new Array(r),a=0;a<i;++a)for(var s,l=e[a],u=n[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d]||u[d])&&(f[d]=s);for(;a<r;++a)o[a]=e[a];return new W(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=_);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new W(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=o(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):w(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=x(t+"");if(arguments.length<2){for(var r=k(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?z:A)(this,t)}}:e?function(t){return function(){z(this,t)}}:function(t){return function(){A(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?C:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(S)},lower:function(){return this.each(M)},append:function(t){var e="function"==typeof t?t:a(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:a(t),r=null==e?N:"function"==typeof e?e:l(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(D)},clone:function(t){return this.select(t?I:O)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?R:F,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return H(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return H(this,t,e)}})(t,e))}};var V=U,Y=function(t){return"string"==typeof t?new W([[document.querySelector(t)]],[document.documentElement]):new W([[t]],$)},X=function(t){return Y(a(t).call(document.documentElement))},G=0;function K(){return new Z}function Z(){this._="@"+(++G).toString(36)}Z.prototype=K.prototype={constructor:Z,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Q=function(){for(var t,e=L;t=e.sourceEvent;)e=t;return e},J=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},tt=function(t){var e=Q();return e.changedTouches&&(e=e.changedTouches[0]),J(t,e)},et=function(t){return"string"==typeof t?new W([document.querySelectorAll(t)],[document.documentElement]):new W([null==t?[]:t],$)},nt=function(t,e,n){arguments.length<3&&(n=e,e=Q().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return J(t,r);return null},rt=function(t,e){null==e&&(e=Q().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=J(t,e[n]);return i};n.d(e,"create",(function(){return X})),n.d(e,"creator",(function(){return a})),n.d(e,"local",(function(){return K})),n.d(e,"matcher",(function(){return p})),n.d(e,"mouse",(function(){return tt})),n.d(e,"namespace",(function(){return o})),n.d(e,"namespaces",(function(){return i})),n.d(e,"clientPoint",(function(){return J})),n.d(e,"select",(function(){return Y})),n.d(e,"selectAll",(function(){return et})),n.d(e,"selection",(function(){return V})),n.d(e,"selector",(function(){return l})),n.d(e,"selectorAll",(function(){return c})),n.d(e,"style",(function(){return w})),n.d(e,"touch",(function(){return nt})),n.d(e,"touches",(function(){return rt})),n.d(e,"window",(function(){return b})),n.d(e,"event",(function(){return L})),n.d(e,"customEvent",(function(){return q}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"d",(function(){return f})),n.d(e,"a",(function(){return Object}));var r=n(0),i=Object.assign({},r);function o(){return"assembly"in this.config&&/(GCF_|GCA_)/.test(this.config.assembly)}function a(t){return"assembly"in t.config&&!1===/(GCA_)/.test(t.config.assembly)}function s(t){return"assembly"in t.config&&/(GCA_)/.test(t.config.assembly)}function l(){var t,e,n,r=document.scripts,i=location.host.split(":")[0],o=Ideogram.version;if("localhost"!==i&&"127.0.0.1"!==i)return"https://unpkg.com/ideogram@"+o+"/dist/data/bands/native/";for(var a=0;a<r.length;a++)if(n=/ideogram/.test((t=r[a]).src.split("/").slice(-1)),"src"in t&&n)return(e=t.src.split("//"))[0]+"//"+(e="/"+e[1].split("/").slice(0,-2).join("/"))+"/data/bands/native/";return"../data/bands/native/"}function u(t){return Math.round(100*t)/100}function c(t){call(this.onDidRotateCallback,t)}function f(){return i.select(this.selector).node()}},function(t,e,n){"use strict";function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}n.r(e);var i=function(t,e){return fetch(t,e).then(r)};function o(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var a=function(t,e){return fetch(t,e).then(o)},s={},l={};function u(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}var c=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,u=0,c=o<=0,f=!1;function d(){if(c)return l;if(f)return f=!1,s;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?c=!0:10===(r=t.charCodeAt(a++))?f=!0:13===r&&(f=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))f=!0;else if(13===r)f=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return c=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=d())!==l;){for(var h=[];r!==s&&r!==l;)h.push(r),r=d();e&&null==(h=e(h,u++))||i.push(h)}return i}function i(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=u(t);return function(r,i){return e(n(r),i,t)}}(t,e):u(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}(e)),[n.map(o).join(t)].concat(e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}},f=c(",").parse,d=c("\t").parse;function h(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var p=function(t,e){return fetch(t,e).then(h)};function g(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),p(e,n).then((function(e){return t(e,r)}))}}function v(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=c(t);return p(e,n).then((function(t){return i.parse(t,r)}))}var m=g(f),y=g(d),_=function(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))};function b(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var w=function(t,e){return fetch(t,e).then(b)};function x(t){return function(e,n){return p(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var k=x("application/xml"),E=x("text/html"),z=x("image/svg+xml");n.d(e,"blob",(function(){return i})),n.d(e,"buffer",(function(){return a})),n.d(e,"dsv",(function(){return v})),n.d(e,"csv",(function(){return m})),n.d(e,"tsv",(function(){return y})),n.d(e,"image",(function(){return _})),n.d(e,"json",(function(){return w})),n.d(e,"text",(function(){return p})),n.d(e,"xml",(function(){return k})),n.d(e,"html",(function(){return E})),n.d(e,"svg",(function(){return z}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getTaxidFromEutils})),__webpack_require__.d(__webpack_exports__,"d",(function(){return setTaxidAndAssemblyAndChromosomes})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTaxids})),__webpack_require__.d(__webpack_exports__,"e",(function(){return setTaxidData})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getOrganismFromEutils}));var d3_fetch__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),d3=Object.assign({},d3_fetch__WEBPACK_IMPORTED_MODULE_0__);function getTaxidFromEutils(t){var e,n=this;d3.json(n.esearch+"&db=taxonomy&term="+n.config.organism).then((function(r){return e=r.esearchresult.idlist[0],void 0===n.config.taxids?n.config.taxids=[e]:n.config.taxids.push(e),t(e)}))}function setTaxidData(taxid){var organism,dataDir,urlOrg,taxids,ideo=this;organism=ideo.config.organism,dataDir=ideo.config.dataDir,urlOrg=organism.replace(" ","-"),taxids=[taxid],ideo.organisms[taxid]={commonName:"",scientificName:organism,scientificNameAbbr:""};var fullyBandedTaxids=["9606","10090","10116"];fullyBandedTaxids.includes(taxid)&&!ideo.config.showFullyBanded&&(urlOrg+="-no-bands");var chromosomesUrl=dataDir+urlOrg+".js",promise2=new Promise((function(t,e){fetch(chromosomesUrl).then((function(n){if(!1!==n.ok)return n.text().then((function(e){t(e)}));e(Error("Fetch failed for "+chromosomesUrl))}))}));return promise2.then((function(data){var asmAndChrTaxidsArray=[""],chromosomes=[],seenChrs={},chr;eval(data);for(var i=0;i<chrBands.length;i++)chr=chrBands[i].split(" ")[0],chr in seenChrs||(chromosomes.push({name:chr,type:"nuclear"}),seenChrs[chr]=1);return chromosomes=chromosomes.sort(Ideogram.sortChromosomes),asmAndChrTaxidsArray.push(chromosomes),asmAndChrTaxidsArray.push(taxids),ideo.coordinateSystem="iscn",asmAndChrTaxidsArray}),(function(){return new Promise((function(t){ideo.coordinateSystem="bp",ideo.getAssemblyAndChromosomesFromEutils(t)}))}))}function setTaxidAndAssemblyAndChromosomes(t){var e,n,r,i=this;new Promise((function(t){i.getTaxidFromEutils(t)})).then((function(t){return i.setTaxidData(n=t)})).then((function(o){e=o[0],r=i.config.taxids,i.config.chromosomes=o[1],i.organisms[n].assemblies={default:e},t(r)}))}function prepareTmpChrsAndTaxids(t){var e,n,r,i,o,a,s=t.config;for(n=[],r={},e=s.multiorganism?s.organism:[s.organism],i=0;i<e.length;i++)for(a in o=e[i],t.organisms)t.organisms[a].commonName.toLowerCase()===o&&(n.push(a),s.multiorganism&&(r[a]=s.chromosomes[o]));return[r,n]}function getTaxidsForOrganismInConfig(t,e,n){var r;[r,t]=prepareTmpChrsAndTaxids(n),0===t.length||n.assemblyIsAccession()&&/GCA_/.test(n.config.assembly)?n.setTaxidAndAssemblyAndChromosomes(e):(n.config.taxids=t,n.config.multiorganism&&(n.config.chromosomes=r),e(t))}function getIsMultiorganism(t,e){return"organism"in e.config&&e.config.organism instanceof Array||t&&e.config.taxid instanceof Array}function getTaxidsForOrganismNotInConfig(t,e,n,r){r.config.multiorganism?(r.coordinateSystem="bp",e&&(t=r.config.taxid)):(e&&(t=[r.config.taxid]),r.config.taxids=t),n(t)}function getTaxids(t){var e;this.config.multiorganism=getIsMultiorganism(e="taxid"in this.config,this),"organism"in this.config?getTaxidsForOrganismInConfig(void 0,t,this):getTaxidsForOrganismNotInConfig(void 0,e,t,this)}function getOrganismFromEutils(t){var e,n,r=this;d3.json(r.esummary+"&db=taxonomy&id="+(n=r.config.organism)).then((function(i){return e=i.result[String(n)].commonname,r.config.organism=e,t(e)}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parseBands}));var _lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);function getDelimiterTsvLinesAndInit(source,content){var delimiter,tsvLines,init;return"undefined"==typeof chrBands&&"native"!==source?(delimiter=/\t/,tsvLines=content.split(/\r\n|\n/),init=1):(delimiter=/ /,tsvLines="native"===source?eval(content):content,init=0),[delimiter,tsvLines,init]}function updateChromosomes(t){var e,n;if(t instanceof Array&&"object"==typeof t[0]){for(e=[],n=0;n<t.length;n++)e.push(t[n].name);t=e}return t}function getLineObject(t,e,n,r){return{chr:t,bp:{start:parseInt(e[5],10),stop:parseInt(e[6],10)},iscn:{start:parseInt(e[3],10),stop:parseInt(e[4],10)},px:{start:-1,stop:-1,width:-1},name:e[1]+e[2],stain:n,taxid:r}}function getStain(t){var e=t[7];return t[8]&&(e+=t[8]),e}function updateLines(t,e,n){var r,i;return(r=e[0])in t==0&&(t[r]=[]),i=getLineObject(r,e,getStain(e),n),t[r].push(i),t}function parseBands(t,e,n){var r,i,o,a,s,l,u,c={};for("window.chrBands"===t.slice(0,15)&&(u="native"),n=updateChromosomes(n),[r,i,l]=getDelimiterTsvLinesAndInit(u,t),s=l;s<i.length;s++)a=(o=i[s].split(r))[0],void 0!==n&&-1===n.indexOf(a)||(c=updateLines(c,o,e));return c}},function(module,__webpack_exports__,__webpack_require__){"use strict";function setBandData(t,e,n,r){var i,o,a;for(i in e)t.includes(a=e[i])&&""!==a&&(o=i);r.bandData[o]=n}function fetchBands(bandDataFileNames,taxid,t0,ideo){var bandDataUrl=ideo.config.dataDir+bandDataFileNames[taxid];ideo.numBandDataResponses||(ideo.numBandDataResponses=0),fetch(bandDataUrl).then((function(response){return response.text().then((function(rawBands){if(delete window.chrBands,eval(rawBands),setBandData(response.url,bandDataFileNames,chrBands,ideo),ideo.numBandDataResponses+=1,ideo.numBandDataResponses===ideo.config.taxids.length){var bandsArray=ideo.processBandData();ideo.writeContainer(bandsArray,taxid,t0),delete ideo.numBandDataResponses}}))}))}__webpack_require__.d(__webpack_exports__,"a",(function(){return fetchBands}))},function(t,e,n){t.exports=n(7).crossfilter},function(t,e){!function(t){function e(t){return t}function n(t,e){for(var n=0,r=e.length,i=new Array(r);n<r;++n)i[n]=t[e[n]];return i}k.version="1.3.12",k.permute=n;var r=k.bisect=i(e);function i(t){function e(e,n,r,i){for(;r<i;){var o=r+i>>>1;n<t(e[o])?i=o:r=o+1}return r}return e.right=e,e.left=function(e,n,r,i){for(;r<i;){var o=r+i>>>1;t(e[o])<n?r=o+1:i=o}return r},e}function o(t){function e(t,e,r){for(var i=r-e,o=1+(i>>>1);--o>0;)n(t,o,i,e);return t}function n(e,n,r,i){for(var o,a=e[--i+n],s=t(a);(o=n<<1)<=r&&(o<r&&t(e[i+o])>t(e[i+o+1])&&o++,!(s<=t(e[i+o])));)e[i+n]=e[i+o],n=o;e[i+n]=a}return e.sort=function(t,e,r){for(var i,o=r-e;--o>0;)i=t[e],t[e]=t[e+o],t[e+o]=i,n(t,1,o,e);return t},e}function a(t){var e=o(t);return function(n,r,i,o){var a,s,l,u=new Array(o=Math.min(i-r,o));for(s=0;s<o;++s)u[s]=n[r++];if(e(u,0,o),r<i){a=t(u[0]);do{t(l=n[r])>a&&(u[0]=l,a=t(e(u,0,o)[0]))}while(++r<i)}return u}}function s(t){return function(e,n,r){for(var i=n+1;i<r;++i){for(var o=i,a=e[i],s=t(a);o>n&&t(e[o-1])>s;--o)e[o]=e[o-1];e[o]=a}return e}}function l(t){var e=s(t);return function n(r,i,o){return(o-i<u?e:function(e,r,i){var o,a=(i-r)/6|0,s=r+a,l=i-1-a,u=r+i-1>>1,c=u-a,f=u+a,d=e[s],h=t(d),p=e[c],g=t(p),v=e[u],m=t(v),y=e[f],_=t(y),b=e[l],w=t(b);h>g&&(o=d,d=p,p=o,o=h,h=g,g=o),_>w&&(o=y,y=b,b=o,o=_,_=w,w=o),h>m&&(o=d,d=v,v=o,o=h,h=m,m=o),g>m&&(o=p,p=v,v=o,o=g,g=m,m=o),h>_&&(o=d,d=y,y=o,o=h,h=_,_=o),m>_&&(o=v,v=y,y=o,o=m,m=_,_=o),g>w&&(o=p,p=b,b=o,o=g,g=w,w=o),g>m&&(o=p,p=v,v=o,o=g,g=m,m=o),_>w&&(o=y,y=b,b=o,o=_,_=w,w=o);var x=p,k=g,E=y,z=_;e[s]=d,e[c]=e[r],e[u]=v,e[f]=e[i-1],e[l]=b;var A=r+1,C=i-2,T=k<=z&&k>=z;if(T){for(var S=A;S<=C;++S)if((D=t(N=e[S]))<k)S!==A&&(e[S]=e[A],e[A]=N),++A;else if(D>k)for(;;){if(!((O=t(e[C]))>k)){if(O<k){e[S]=e[A],e[A++]=e[C],e[C--]=N;break}e[S]=e[C],e[C--]=N;break}C--}}else for(S=A;S<=C;S++)if((D=t(N=e[S]))<k)S!==A&&(e[S]=e[A],e[A]=N),++A;else if(D>z)for(;;){if(!((O=t(e[C]))>z)){O<k?(e[S]=e[A],e[A++]=e[C],e[C--]=N):(e[S]=e[C],e[C--]=N);break}if(--C<S)break}if(e[r]=e[A-1],e[A-1]=x,e[i-1]=e[C+1],e[C+1]=E,n(e,r,A-1),n(e,C+2,i),T)return e;if(A<s&&C>l){for(var M;(M=t(e[A]))<=k&&M>=k;)++A;for(;(O=t(e[C]))<=z&&O>=z;)--C;for(S=A;S<=C;S++){var N,D;if((D=t(N=e[S]))<=k&&D>=k)S!==A&&(e[S]=e[A],e[A]=N),A++;else if(D<=z&&D>=z)for(;;){var O;if(!((O=t(e[C]))<=z&&O>=z)){O<k?(e[S]=e[A],e[A++]=e[C],e[C--]=N):(e[S]=e[C],e[C--]=N);break}if(--C<S)break}}}return n(e,A,C+1)})(r,i,o)}}r.by=i,(k.heap=o(e)).by=o,(k.heapselect=a(e)).by=a,(k.insertionsort=s(e)).by=s,(k.quicksort=l(e)).by=l;var u=32,c=g,f=g,d=g,h=function(t,e){for(var n=t.length;n<e;)t[n++]=0;return t},p=function(t,e){if(e>32)throw new Error("invalid array width!");return t};function g(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function v(t){return[0,t.length]}function m(){return null}function y(){return 0}function _(t){return t+1}function b(t){return t-1}function w(t){return function(e,n){return e+ +t(n)}}function x(t){return function(e,n){return e-t(n)}}function k(){var t={add:C,remove:function(){for(var t=E(s,s),e=[],n=0,r=0;n<s;++n)d[n]?t[n]=r++:e.push(n);var o;for(g.forEach((function(t){t(0,[],e)})),A.forEach((function(e){e(t)})),n=0,r=0;n<s;++n)(o=d[n])&&(n!==r&&(d[r]=o,i[r]=i[n]),++r);for(i.length=r;s>r;)d[--s]=0},dimension:function(t){var c,C,T,S,M,N={filter:function(t){return null==t?V():Array.isArray(t)?U(t):"function"==typeof t?Y(t):W(t)},filterExact:W,filterRange:U,filterFunction:Y,filterAll:V,top:function(t){for(var e,n=[],r=F;--r>=j&&t>0;)d[e=C[r]]||(n.push(i[e]),--t);return n},bottom:function(t){for(var e,n=[],r=j;r<F&&t>0;)d[e=C[r]]||(n.push(i[e]),--t),r++;return n},group:G,groupAll:function(){var t=G(m),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:K,remove:K},D=~u&-~u,O=~D,I=l((function(t){return T[t]})),P=v,L=[],B=[],j=0,F=0;function R(e,r,i){T=e.map(t),S=I(function(t){for(var e=E(t,t),n=-1;++n<t;)e[n]=n;return e}(i),0,i),T=n(T,S);var o,a=P(T),l=a[0],u=a[1];if(M)for(o=0;o<i;++o)M(T[o],o)||(d[S[o]+r]|=D);else{for(o=0;o<l;++o)d[S[o]+r]|=D;for(o=u;o<i;++o)d[S[o]+r]|=D}if(!r)return c=T,C=S,j=l,void(F=u);var f=c,h=C,p=0,g=0;for(c=new Array(s),C=E(s,s),o=0;p<r&&g<i;++o)f[p]<T[g]?(c[o]=f[p],C[o]=h[p++]):(c[o]=T[g],C[o]=S[g++]+r);for(;p<r;++p,++o)c[o]=f[p],C[o]=h[p];for(;g<i;++g,++o)c[o]=T[g],C[o]=S[g]+r;a=P(c),j=a[0],F=a[1]}function q(t,e,n){L.forEach((function(t){t(T,S,e,n)})),T=S=null}function H(t){for(var e,n=0,r=0;n<s;++n)d[e=C[n]]&&(n!==r&&(c[r]=c[n]),C[r]=t[e],++r);for(c.length=r;r<s;)C[r++]=0;var i=P(c);j=i[0],F=i[1]}function $(t){var e=t[0],n=t[1];if(M)return M=null,X((function(t,r){return e<=r&&r<n})),j=e,F=n,N;var r,i,o,a=[],s=[];if(e<j)for(r=e,i=Math.min(j,n);r<i;++r)d[o=C[r]]^=D,a.push(o);else if(e>j)for(r=j,i=Math.min(e,F);r<i;++r)d[o=C[r]]^=D,s.push(o);if(n>F)for(r=Math.max(e,F),i=n;r<i;++r)d[o=C[r]]^=D,a.push(o);else if(n<F)for(r=Math.max(j,n),i=F;r<i;++r)d[o=C[r]]^=D,s.push(o);return j=e,F=n,g.forEach((function(t){t(D,a,s)})),N}function W(t){return $((P=function(t,e){return function(n){var r=n.length;return[t.left(n,e,0,r),t.right(n,e,0,r)]}}(r,t))(c))}function U(t){return $((P=function(t,e){var n=e[0],r=e[1];return function(e){var i=e.length;return[t.left(e,n,0,i),t.left(e,r,0,i)]}}(r,t))(c))}function V(){return $((P=v)(c))}function Y(t){return P=v,X(M=t),j=0,F=s,N}function X(t){var e,n,r,i=[],o=[];for(e=0;e<s;++e)!(d[n=C[e]]&D)^!!(r=t(c[e],e))&&(r?(d[n]&=O,i.push(n)):(d[n]|=D,o.push(n)));g.forEach((function(t){t(D,i,o)}))}function G(t){var n={top:function(t){var e=u(V(),0,r.length,t);return f.sort(e,0,e.length)},all:V,reduce:Y,reduceCount:X,reduceSum:function(t){return Y(w(t),x(t),y)},order:G,orderNatural:function(){return G(e)},size:function(){return N},dispose:K,remove:K};B.push(n);var r,l,u,f,v,k,T,S=8,M=z(S),N=0,I=m,P=m,j=!0,F=t===m;function R(e,n,o,a){var u,c,f,y,_,b,w=r,x=E(N,M),k=v,A=T,C=N,D=0,L=0;for(j&&(k=A=m),r=new Array(N),N=0,l=C>1?h(l,s):E(s,M),C&&(f=(c=w[0]).key);L<a&&!((y=t(e[L]))>=y);)++L;for(;L<a;){for(c&&f<=y?(_=c,b=f,x[D]=N,(c=w[++D])&&(f=c.key)):(_={key:y,value:A()},b=y),r[N]=_;!(y>b||(l[u=n[L]+o]=N,d[u]&O||(_.value=k(_.value,i[u])),++L>=a));)y=t(e[L]);B()}for(;D<C;)r[x[D]=N]=w[D++],B();if(N>D)for(D=0;D<o;++D)l[D]=x[l[D]];function B(){++N===M&&(x=p(x,S<<=1),l=p(l,S),M=z(S))}u=g.indexOf(I),N>1?(I=H,P=W):(!N&&F&&(N=1,r=[{key:null,value:A()}]),1===N?(I=$,P=U):(I=m,P=m),l=null),g[u]=I}function q(){if(N>1){for(var t=N,e=r,n=E(t,t),i=0,o=0;i<s;++i)d[i]&&(n[l[o]=l[i]]=1,++o);for(r=[],N=0,i=0;i<t;++i)n[i]&&(n[i]=N++,r.push(e[i]));if(N>1)for(i=0;i<o;++i)l[i]=n[l[i]];else l=null;g[g.indexOf(I)]=N>1?(P=W,I=H):1===N?(P=U,I=$):P=I=m}else if(1===N){if(F)return;for(i=0;i<s;++i)if(d[i])return;r=[],N=0,g[g.indexOf(I)]=I=P=m}}function H(t,e,n){if(t!==D&&!j){var o,a,s,u;for(o=0,s=e.length;o<s;++o)d[a=e[o]]&O||((u=r[l[a]]).value=v(u.value,i[a]));for(o=0,s=n.length;o<s;++o)(d[a=n[o]]&O)===t&&((u=r[l[a]]).value=k(u.value,i[a]))}}function $(t,e,n){if(t!==D&&!j){var o,a,s,l=r[0];for(o=0,s=e.length;o<s;++o)d[a=e[o]]&O||(l.value=v(l.value,i[a]));for(o=0,s=n.length;o<s;++o)(d[a=n[o]]&O)===t&&(l.value=k(l.value,i[a]))}}function W(){var t,e;for(t=0;t<N;++t)r[t].value=T();for(t=0;t<s;++t)d[t]&O||((e=r[l[t]]).value=v(e.value,i[t]))}function U(){var t,e=r[0];for(e.value=T(),t=0;t<s;++t)d[t]&O||(e.value=v(e.value,i[t]))}function V(){return j&&(P(),j=!1),r}function Y(t,e,r){return v=t,k=e,T=r,j=!0,n}function X(){return Y(_,b,y)}function G(t){function e(e){return t(e.value)}return u=a(e),f=o(e),n}function K(){var t=g.indexOf(I);return t>=0&&g.splice(t,1),(t=L.indexOf(R))>=0&&L.splice(t,1),(t=A.indexOf(q))>=0&&A.splice(t,1),n}return arguments.length<1&&(t=e),g.push(I),L.push(R),A.push(q),R(c,C,0,s),X().orderNatural()}function K(){B.forEach((function(t){t.dispose()}));var t=k.indexOf(R);return t>=0&&k.splice(t,1),(t=k.indexOf(q))>=0&&k.splice(t,1),(t=A.indexOf(H))>=0&&A.splice(t,1),u&=O,V()}return k.unshift(R),k.push(q),A.push(H),u|=D,(f>=32?!D:u&-(1<<f))&&(d=p(d,f<<=1)),R(i,0,s),q(0,0,s),N},groupAll:function(){var t,e,n,r,o={reduce:c,reduceCount:f,reduceSum:function(t){return c(w(t),x(t),y)},value:function(){return a&&(function(){var n;for(t=r(),n=0;n<s;++n)d[n]||(t=e(t,i[n]))}(),a=!1),t},dispose:h,remove:h},a=!0;function l(n,r){var o;if(!a)for(o=r;o<s;++o)d[o]||(t=e(t,i[o]))}function u(r,o,s){var l,u,c;if(!a){for(l=0,c=o.length;l<c;++l)d[u=o[l]]||(t=e(t,i[u]));for(l=0,c=s.length;l<c;++l)d[u=s[l]]===r&&(t=n(t,i[u]))}}function c(t,i,s){return e=t,n=i,r=s,a=!0,o}function f(){return c(_,b,y)}function h(){var t=g.indexOf(u);return t>=0&&g.splice(t),(t=k.indexOf(l))>=0&&k.splice(t),o}return g.push(u),k.push(l),l(0,0),f()},size:function(){return s}},i=[],s=0,u=0,f=8,d=c(0),g=[],k=[],A=[];function C(e){var n=s,r=e.length;return r&&(i=i.concat(e),d=h(d,s+=r),k.forEach((function(t){t(e,n,r)}))),t}return arguments.length?C(arguments[0]):t}function E(t,e){return(e<257?c:e<65537?f:d)(t)}function z(t){return 8===t?256:16===t?65536:4294967296}"undefined"!=typeof Uint8Array&&(c=function(t){return new Uint8Array(t)},f=function(t){return new Uint16Array(t)},d=function(t){return new Uint32Array(t)},h=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},p=function(t,e){var n;switch(e){case 16:n=f(t.length);break;case 32:n=d(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),t.crossfilter=k}(void 0!==e&&e||this)},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"dispatch",(function(){return d}));var i={};n.r(i),n.d(i,"brush",(function(){return We})),n.d(i,"brushX",(function(){return He})),n.d(i,"brushY",(function(){return $e})),n.d(i,"brushSelection",(function(){return qe}));var o=n(0),a=n(2),s={value:function(){}};function l(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new u(r)}function u(t){this._=t}function c(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function f(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=s,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}u.prototype=l.prototype={constructor:u,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=f(r[n],t.name,e);else if(null==e)for(n in r)r[n]=f(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=c(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new u(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var d=l,h=function(){o.event.preventDefault(),o.event.stopImmediatePropagation()},p=function(t){var e=t.document.documentElement,n=Object(o.select)(t).on("dragstart.drag",h,!0);"onselectstart"in e?n.on("selectstart.drag",h,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function g(t,e){var n=t.document.documentElement,r=Object(o.select)(t).on("dragstart.drag",null);e&&(r.on("click.drag",h,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var v=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function m(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function y(){}var _="\\s*([+-]?\\d+)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",w="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x=/^#([0-9a-f]{3})$/,k=/^#([0-9a-f]{6})$/,E=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),z=new RegExp("^rgb\\("+[w,w,w]+"\\)$"),A=new RegExp("^rgba\\("+[_,_,_,b]+"\\)$"),C=new RegExp("^rgba\\("+[w,w,w,b]+"\\)$"),T=new RegExp("^hsl\\("+[b,w,w]+"\\)$"),S=new RegExp("^hsla\\("+[b,w,w,b]+"\\)$"),M={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function N(t){var e;return t=(t+"").trim().toLowerCase(),(e=x.exec(t))?new L((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=k.exec(t))?D(parseInt(e[1],16)):(e=E.exec(t))?new L(e[1],e[2],e[3],1):(e=z.exec(t))?new L(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=A.exec(t))?O(e[1],e[2],e[3],e[4]):(e=C.exec(t))?O(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=T.exec(t))?j(e[1],e[2]/100,e[3]/100,1):(e=S.exec(t))?j(e[1],e[2]/100,e[3]/100,e[4]):M.hasOwnProperty(t)?D(M[t]):"transparent"===t?new L(NaN,NaN,NaN,0):null}function D(t){return new L(t>>16&255,t>>8&255,255&t,1)}function O(t,e,n,r){return r<=0&&(t=e=n=NaN),new L(t,e,n,r)}function I(t){return t instanceof y||(t=N(t)),t?new L((t=t.rgb()).r,t.g,t.b,t.opacity):new L}function P(t,e,n,r){return 1===arguments.length?I(t):new L(t,e,n,null==r?1:r)}function L(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function B(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function j(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,r)}function F(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof y||(t=N(t)),!t)return new R;if(t instanceof R)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new R(a,s,l,t.opacity)}(t):new R(t,e,n,null==r?1:r)}function R(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function q(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}v(y,N,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),v(L,P,m(y,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+B(this.r)+B(this.g)+B(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),v(R,F,m(y,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new R(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new L(q(t>=240?t-240:t+120,i,r),q(t,i,r),q(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var H=Math.PI/180,$=180/Math.PI,W=.96422,U=.82521,V=6/29,Y=3*V*V;function X(t){if(t instanceof G)return new G(t.l,t.a,t.b,t.opacity);if(t instanceof nt){if(isNaN(t.h))return new G(t.l,0,0,t.opacity);var e=t.h*H;return new G(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof L||(t=I(t));var n,r,i=J(t.r),o=J(t.g),a=J(t.b),s=K((.2225045*i+.7168786*o+.0606169*a)/1);return i===o&&o===a?n=r=s:(n=K((.4360747*i+.3850649*o+.1430804*a)/W),r=K((.0139322*i+.0971045*o+.7141733*a)/U)),new G(116*s-16,500*(n-s),200*(s-r),t.opacity)}function G(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function K(t){return t>.008856451679035631?Math.pow(t,1/3):t/Y+4/29}function Z(t){return t>V?t*t*t:Y*(t-4/29)}function Q(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function J(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function tt(t){if(t instanceof nt)return new nt(t.h,t.c,t.l,t.opacity);if(t instanceof G||(t=X(t)),0===t.a&&0===t.b)return new nt(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*$;return new nt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function et(t,e,n,r){return 1===arguments.length?tt(t):new nt(t,e,n,null==r?1:r)}function nt(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}v(G,(function(t,e,n,r){return 1===arguments.length?X(t):new G(t,e,n,null==r?1:r)}),m(y,{brighter:function(t){return new G(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new G(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new L(Q(3.1338561*(e=W*Z(e))-1.6168667*(t=1*Z(t))-.4906146*(n=U*Z(n))),Q(-.9787684*e+1.9161415*t+.033454*n),Q(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),v(nt,et,m(y,{brighter:function(t){return new nt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new nt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return X(this).rgb()}}));var rt=1.78277,it=-.29227,ot=-.90649,at=1.97294,st=at*ot,lt=at*rt,ut=rt*it- -.14861*ot;function ct(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ft)return new ft(t.h,t.s,t.l,t.opacity);t instanceof L||(t=I(t));var e=t.g/255,n=t.b/255,r=(ut*n+st*(t.r/255)-lt*e)/(ut+st-lt),i=n-r,o=(at*(e-r)-it*i)/ot,a=Math.sqrt(o*o+i*i)/(at*r*(1-r)),s=a?Math.atan2(o,i)*$-120:NaN;return new ft(s<0?s+360:s,a,r,t.opacity)}(t):new ft(t,e,n,null==r?1:r)}function ft(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function dt(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}v(ft,ct,m(y,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ft(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ft(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*H,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new L(255*(e+n*(-.14861*r+rt*i)),255*(e+n*(it*r+ot*i)),255*(e+n*(at*r)),this.opacity)}}));var ht=function(t){return function(){return t}};function pt(t,e){return function(n){return t+n*e}}function gt(t,e){var n=e-t;return n?pt(t,n>180||n<-180?n-360*Math.round(n/360):n):ht(isNaN(t)?e:t)}function vt(t,e){var n=e-t;return n?pt(t,n):ht(isNaN(t)?e:t)}var mt=function t(e){var n=function(t){return 1==(t=+t)?vt:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ht(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=P(t)).r,(e=P(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=vt(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function yt(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=P(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}yt((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1];return dt((n-r/e)*e,r>0?t[r-1]:2*i-o,i,o,r<e-1?t[r+2]:2*o-i)}})),yt((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return dt((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}}));var _t,bt,wt,xt,kt=function(t,e){return e-=t=+t,function(n){return t+e*n}},Et=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zt=new RegExp(Et.source,"g"),At=function(t,e){var n,r,i,o=Et.lastIndex=zt.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Et.exec(t))&&(r=zt.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:kt(n,r)})),o=zt.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})},Ct=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?ht(e):("number"===r?kt:"string"===r?(n=N(e))?(e=n,mt):At:e instanceof N?mt:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Ct(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Ct(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:kt)(t,e)},Tt=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},St=180/Math.PI,Mt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Nt=function(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*St,skewX:Math.atan(l)*St,scaleX:a,scaleY:s}};function Dt(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:kt(t,i)},{i:l-2,x:kt(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:kt(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:kt(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,l),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:kt(t,n)},{i:s-2,x:kt(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Ot=Dt((function(t){return"none"===t?Mt:(_t||(_t=document.createElement("DIV"),bt=document.documentElement,wt=document.defaultView),_t.style.transform=t,t=wt.getComputedStyle(bt.appendChild(_t),null).getPropertyValue("transform"),bt.removeChild(_t),t=t.slice(7,-1).split(","),Nt(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),It=Dt((function(t){return null==t?Mt:(xt||(xt=document.createElementNS("http://www.w3.org/2000/svg","g")),xt.setAttribute("transform",t),(t=xt.transform.baseVal.consolidate())?Nt((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Mt)}),", ",")",")");function Pt(t){return function(e,n){var r=t((e=F(e)).h,(n=F(n)).h),i=vt(e.s,n.s),o=vt(e.l,n.l),a=vt(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function Lt(t){return function(e,n){var r=t((e=et(e)).h,(n=et(n)).h),i=vt(e.c,n.c),o=vt(e.l,n.l),a=vt(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function Bt(t){return function e(n){function r(e,r){var i=t((e=ct(e)).h,(r=ct(r)).h),o=vt(e.s,r.s),a=vt(e.l,r.l),s=vt(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}Math,Pt(gt),Pt(vt),Lt(gt),Lt(vt),Bt(gt);var jt,Ft,Rt=Bt(vt),qt=0,Ht=0,$t=0,Wt=0,Ut=0,Vt=0,Yt="object"==typeof performance&&performance.now?performance:Date,Xt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gt(){return Ut||(Xt(Kt),Ut=Yt.now()+Vt)}function Kt(){Ut=0}function Zt(){this._call=this._time=this._next=null}function Qt(t,e,n){var r=new Zt;return r.restart(t,e,n),r}function Jt(){Ut=(Wt=Yt.now())+Vt,qt=Ht=0;try{!function(){Gt(),++qt;for(var t,e=jt;e;)(t=Ut-e._time)>=0&&e._call.call(null,t),e=e._next;--qt}()}finally{qt=0,function(){for(var t,e,n=jt,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:jt=e);Ft=t,ee(r)}(),Ut=0}}function te(){var t=Yt.now(),e=t-Wt;e>1e3&&(Vt-=e,Wt=t)}function ee(t){qt||(Ht&&(Ht=clearTimeout(Ht)),t-Ut>24?(t<1/0&&(Ht=setTimeout(Jt,t-Yt.now()-Vt)),$t&&($t=clearInterval($t))):($t||(Wt=Yt.now(),$t=setInterval(te,1e3)),qt=1,Xt(Jt)))}Zt.prototype=Qt.prototype={constructor:Zt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Gt():+n)+(null==e?0:+e),this._next||Ft===this||(Ft?Ft._next=this:jt=this,Ft=this),this._call=t,this._time=n,ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,ee())}};var ne=function(t,e,n){var r=new Zt;return r.restart((function(n){r.stop(),t(n+e)}),e=null==e?0:+e,n),r},re=d("start","end","interrupt"),ie=[],oe=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(l){var u,c,f,d;if(1!==n.state)return s();for(u in i)if((d=i[u]).name===n.name){if(3===d.state)return ne(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=6,d.timer.stop(),delete i[u])}if(ne((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),u=0,c=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Qt((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:re,tween:ie,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function ae(t,e){var n=le(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function se(t,e){var n=le(t,e);if(n.state>2)throw new Error("too late; already started");return n}function le(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var ue=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}};function ce(t,e,n){var r=t._id;return t.each((function(){var t=se(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return le(t,r).value[e]}}var fe=function(t,e){var n;return("number"==typeof e?kt:e instanceof N?mt:(n=N(e))?(e=n,mt):At)(t,e)},de=o.selection.prototype.constructor,he=0;function pe(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ge(){return++he}var ve=o.selection.prototype;pe.prototype=(function(t){return Object(o.selection)().transition(t)}).prototype={constructor:pe,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(o.selector)(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var l,u,c=r[s],f=c.length,d=a[s]=new Array(f),h=0;h<f;++h)(l=c[h])&&(u=t.call(l,l.__data__,h,c))&&("__data__"in l&&(u.__data__=l.__data__),d[h]=u,oe(d[h],e,n,h,d,le(l,n)));return new pe(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(o.selectorAll)(t));for(var r=this._groups,i=r.length,a=[],s=[],l=0;l<i;++l)for(var u,c=r[l],f=c.length,d=0;d<f;++d)if(u=c[d]){for(var h,p=t.call(u,u.__data__,d,c),g=le(u,n),v=0,m=p.length;v<m;++v)(h=p[v])&&oe(h,e,n,v,p,g);a.push(p),s.push(u)}return new pe(a,s,e,n)},filter:function(t){"function"!=typeof t&&(t=Object(o.matcher)(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s=e[i],l=s.length,u=r[i]=[],c=0;c<l;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&u.push(a);return new pe(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),o=new Array(r),a=0;a<i;++a)for(var s,l=e[a],u=n[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d]||u[d])&&(f[d]=s);for(;a<r;++a)o[a]=e[a];return new pe(o,this._parents,this._name,this._id)},selection:function(){return new de(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ge(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=le(a,e);oe(a,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new pe(r,this._parents,t,n)},call:ve.call,nodes:ve.nodes,node:ve.node,size:ve.size,empty:ve.empty,each:ve.each,on:function(t,e){var n=this._id;return arguments.length<2?le(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?ae:se;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Object(o.namespace)(t),r="transform"===n?It:fe;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(t))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttribute(t)}})(n,r,ce(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}:function(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}})(n,r,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Object(o.namespace)(t);return this.tween(n,(r.local?function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Ot:fe;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Object(o.style)(this,t),s=(this.style.removeProperty(t),Object(o.style)(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var r,i,a;return function(){var s=Object(o.style)(this,t),l=n(this);return null==l&&(this.style.removeProperty(t),l=Object(o.style)(this,t)),s===l?null:s===r&&l===i?a:a=e(r=s,i=l)}}(t,r,ce(this,"style."+t,e)):function(t,e,n){var r,i;return function(){var a=Object(o.style)(this,t);return a===n?null:a===r?i:i=e(r=a,n)}}(t,r,e+""),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ce(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=le(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=se(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=se(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ae(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ae(this,t).delay=e}})(e,t)):le(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){se(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){se(this,t).duration=e}})(e,t)):le(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){se(this,t).ease=e}}(e,t)):le(this.node(),e).ease}},function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math,function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158);var me=2*Math.PI,ye=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=me);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*me)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=me);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*me)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=me);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*me)},i.period=function(n){return t(e,n)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function _e(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ye.time=Gt(),ye;return n}o.selection.prototype.interrupt=function(t){return this.each((function(){ue(this,t)}))},o.selection.prototype.transition=function(t){var e,n;t instanceof pe?(e=t._id,t=t._name):(e=ge(),(n=ye).time=Gt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&oe(a,t,e,u,s,n||_e(a,e));return new pe(r,this._parents,t,e)};var be=function(t){return function(){return t}},we=function(t,e,n){this.target=t,this.type=e,this.selection=n};function xe(){o.event.stopImmediatePropagation()}var ke=function(){o.event.preventDefault(),o.event.stopImmediatePropagation()},Ee={name:"drag"},ze={name:"space"},Ae={name:"handle"},Ce={name:"center"},Te={name:"x",handles:["e","w"].map(Le),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Se={name:"y",handles:["n","s"].map(Le),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Me={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Le),input:function(t){return t},output:function(t){return t}},Ne={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},De={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Oe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ie={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Pe={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Le(t){return{type:t}}function Be(){return!o.event.button}function je(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Fe(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Re(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function qe(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function He(){return Ue(Te)}function $e(){return Ue(Se)}var We=function(){return Ue(Me)};function Ue(t){var e,n=je,r=Be,i=d(s,"start","brush","end"),a=6;function s(e){var n=e.property("__brush",h).selectAll(".overlay").data([Le("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ne.overlay).merge(n).each((function(){var t=Fe(this).extent;Object(o.select)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Le("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ne.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Ne[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",f)}function l(){var t=Object(o.select)(this),e=Fe(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e){return t.__brush.emitter||new c(t,e)}function c(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if(o.event.touches){if(o.event.changedTouches.length<o.event.touches.length)return ke()}else if(e)return;if(r.apply(this,arguments)){var n,i,a,s,c,f,d,h,v,m,y,_,b,w=this,x=o.event.target.__data__.type,k="selection"===(o.event.metaKey?x="overlay":x)?Ee:o.event.altKey?Ce:Ae,E=t===Se?null:Ie[x],z=t===Te?null:Pe[x],A=Fe(w),C=A.extent,T=A.selection,S=C[0][0],M=C[0][1],N=C[1][0],D=C[1][1],O=E&&z&&o.event.shiftKey,I=Object(o.mouse)(w),P=I,L=u(w,arguments).beforestart();"overlay"===x?A.selection=T=[[n=t===Se?S:I[0],a=t===Te?M:I[1]],[c=t===Se?N:n,d=t===Te?D:a]]:(n=T[0][0],a=T[0][1],c=T[1][0],d=T[1][1]),i=n,s=a,f=c,h=d;var B=Object(o.select)(w).attr("pointer-events","none"),j=B.selectAll(".overlay").attr("cursor",Ne[x]);if(o.event.touches)B.on("touchmove.brush",R,!0).on("touchend.brush touchcancel.brush",H,!0);else{var F=Object(o.select)(o.event.view).on("keydown.brush",(function(){switch(o.event.keyCode){case 16:O=E&&z;break;case 18:k===Ae&&(E&&(c=f-v*E,n=i+v*E),z&&(d=h-m*z,a=s+m*z),k=Ce,q());break;case 32:k!==Ae&&k!==Ce||(E<0?c=f-v:E>0&&(n=i-v),z<0?d=h-m:z>0&&(a=s-m),k=ze,j.attr("cursor",Ne.selection),q());break;default:return}ke()}),!0).on("keyup.brush",(function(){switch(o.event.keyCode){case 16:O&&(_=b=O=!1,q());break;case 18:k===Ce&&(E<0?c=f:E>0&&(n=i),z<0?d=h:z>0&&(a=s),k=Ae,q());break;case 32:k===ze&&(o.event.altKey?(E&&(c=f-v*E,n=i+v*E),z&&(d=h-m*z,a=s+m*z),k=Ce):(E<0?c=f:E>0&&(n=i),z<0?d=h:z>0&&(a=s),k=Ae),j.attr("cursor",Ne[x]),q());break;default:return}ke()}),!0).on("mousemove.brush",R,!0).on("mouseup.brush",H,!0);p(o.event.view)}xe(),ue(w),l.call(w),L.start()}function R(){var t=Object(o.mouse)(w);!O||_||b||(Math.abs(t[0]-P[0])>Math.abs(t[1]-P[1])?b=!0:_=!0),P=t,y=!0,ke(),q()}function q(){var t;switch(v=P[0]-I[0],m=P[1]-I[1],k){case ze:case Ee:E&&(v=Math.max(S-n,Math.min(N-c,v)),i=n+v,f=c+v),z&&(m=Math.max(M-a,Math.min(D-d,m)),s=a+m,h=d+m);break;case Ae:E<0?(v=Math.max(S-n,Math.min(N-n,v)),i=n+v,f=c):E>0&&(v=Math.max(S-c,Math.min(N-c,v)),i=n,f=c+v),z<0?(m=Math.max(M-a,Math.min(D-a,m)),s=a+m,h=d):z>0&&(m=Math.max(M-d,Math.min(D-d,m)),s=a,h=d+m);break;case Ce:E&&(i=Math.max(S,Math.min(N,n-v*E)),f=Math.max(S,Math.min(N,c+v*E))),z&&(s=Math.max(M,Math.min(D,a-m*z)),h=Math.max(M,Math.min(D,d+m*z)))}f<i&&(E*=-1,t=n,n=c,c=t,t=i,i=f,f=t,x in De&&j.attr("cursor",Ne[x=De[x]])),h<s&&(z*=-1,t=a,a=d,d=t,t=s,s=h,h=t,x in Oe&&j.attr("cursor",Ne[x=Oe[x]])),A.selection&&(T=A.selection),_&&(i=T[0][0],f=T[1][0]),b&&(s=T[0][1],h=T[1][1]),T[0][0]===i&&T[0][1]===s&&T[1][0]===f&&T[1][1]===h||(A.selection=[[i,s],[f,h]],l.call(w),L.brush())}function H(){if(xe(),o.event.touches){if(o.event.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),B.on("touchmove.brush touchend.brush touchcancel.brush",null)}else g(o.event.view,y),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),j.attr("cursor",Ne.overlay),A.selection&&(T=A.selection),Re(T)&&(A.selection=null,l.call(w)),L.end()}}function h(){var e=this.__brush||{selection:null};return e.extent=n.apply(this,arguments),e.dim=t,e}return s.move=function(e,n){e.selection?e.on("start.brush",(function(){u(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){u(this,arguments).end()})).tween("brush",(function(){var e=this,r=e.__brush,i=u(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Ct(o,a);function c(t){r.selection=1===t&&Re(a)?null:s(t),l.call(e),i.brush()}return o&&a?c:c(1)})):e.each((function(){var e=arguments,r=this.__brush,i=t.input("function"==typeof n?n.apply(this,e):n,r.extent),o=u(this,e).beforestart();ue(this),r.selection=null==i||Re(i)?null:i,l.call(this),o.start().brush().end()}))},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Object(o.customEvent)(new we(s,e,t.output(this.state.selection)),i.apply,i,[e,this.that,this.args])}},s.extent=function(t){return arguments.length?(n="function"==typeof t?t:be([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),s):n},s.filter=function(t){return arguments.length?(r="function"==typeof t?t:be(!!t),s):r},s.handleSize=function(t){return arguments.length?(a=+t,s):a},s.on=function(){var t=i.on.apply(i,arguments);return t===i?s:t},s}var Ve=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Ye=function(t){return 1===t.length&&(t=function(t){return function(e,n){return Ve(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Ve).right,Xe=Math.sqrt(50),Ge=Math.sqrt(10),Ke=Math.sqrt(2);function Ze(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Xe?10:o>=Ge?5:o>=Ke?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Xe?10:o>=Ge?5:o>=Ke?2:1)}var Qe=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r};function Je(){}function tn(t,e){var n=new Je;if(t instanceof Je)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function en(){}Je.prototype=tn.prototype={constructor:Je,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var nn=tn.prototype;en.prototype=(function(t,e){var n=new en;if(t instanceof en)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}).prototype={constructor:en,has:nn.has,add:function(t){return this["$"+(t+="")]=t,this},remove:nn.remove,clear:nn.clear,values:nn.keys,size:nn.size,empty:nn.empty,each:nn.each};var rn=Array.prototype,on=rn.map,an=rn.slice,sn=function(t){return+t},ln=[0,1];function un(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(e)}function cn(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function fn(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=Ye(t,e,1,i)-1;return a[n](o[n](e))}}var dn=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},hn=function(t){return(t=dn(Math.abs(t)))?t[1]:NaN},pn=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gn(t){return new vn(t)}function vn(t){if(!(e=pn.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}gn.prototype=vn.prototype,vn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mn,yn,_n,bn,wn=function(t,e){var n=dn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},xn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return wn(100*t,e)},r:wn,s:function(t,e){var n=dn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(mn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+dn(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},kn=function(t){return t},En=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function zn(){var t=function(t,e){var n,r,i,o=ln,a=ln,s=Ct,l=!1;function u(){return n=Math.min(o.length,a.length)>2?fn:cn,r=i=null,c}function c(e){return(r||(r=n(o,a,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return c.invert=function(t){return(i||(i=n(a,o,un,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},c.domain=function(t){return arguments.length?(o=on.call(t,sn),u()):o.slice()},c.range=function(t){return arguments.length?(a=an.call(t),u()):a.slice()},c.rangeRound=function(t){return a=an.call(t),s=Tt,u()},c.clamp=function(t){return arguments.length?(l=!!t,u()):l},c.interpolate=function(t){return arguments.length?(s=t,u()):s},u()}(un,kt);return t.copy=function(){return function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}(t,zn())},function(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Ze(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return function(t,e,n){var r,i=t[0],o=t[t.length-1],a=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Xe?i*=10:o>=Ge?i*=5:o>=Ke&&(i*=2),e<t?-i:i}(i,o,null==e?10:e);switch((n=gn(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(hn(e)/3)))-hn(Math.abs(t)))}(a,s))||(n.precision=r),bn(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hn(e)-hn(t))+1}(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-hn(Math.abs(t)))}(a))||(n.precision=r-2*("%"===n.type))}return _n(n)}(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],l=i[a];return l<s&&(r=s,s=l,l=r,r=o,o=a,a=r),(r=Ze(s,l,n))>0?r=Ze(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=Ze(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,e(i)),t},t}(t)}yn=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):kn,n=t.currency,r=t.decimal,i=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(t.numerals):kn,o=t.percent||"%";function a(t){var a=(t=gn(t)).fill,s=t.align,l=t.sign,u=t.symbol,c=t.zero,f=t.width,d=t.comma,h=t.precision,p=t.trim,g=t.type;"n"===g?(d=!0,g="g"):xn[g]||(null==h&&(h=12),p=!0,g="g"),(c||"0"===a&&"="===s)&&(c=!0,a="0",s="=");var v="$"===u?n[0]:"#"===u&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",m="$"===u?n[1]:/[%p]/.test(g)?o:"",y=xn[g],_=/[defgprs%]/.test(g);function b(t){var n,o,u,b=v,w=m;if("c"===g)w=y(t)+w,t="";else{var x=(t=+t)<0;if(t=y(Math.abs(t),h),p&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),x&&0==+t&&(x=!1),b=(x?"("===l?l:"-":"-"===l||"("===l?"":l)+b,w=("s"===g?En[8+mn/3]:"")+w+(x&&"("===l?")":""),_)for(n=-1,o=t.length;++n<o;)if(48>(u=t.charCodeAt(n))||u>57){w=(46===u?r+t.slice(n+1):t.slice(n))+w,t=t.slice(0,n);break}}d&&!c&&(t=e(t,1/0));var k=b.length+t.length+w.length,E=k<f?new Array(f-k+1).join(a):"";switch(d&&c&&(t=e(E+t,E.length?f-w.length:1/0),E=""),s){case"<":t=b+t+w+E;break;case"=":t=b+E+t+w;break;case"^":t=E.slice(0,k=E.length>>1)+b+t+w+E.slice(k);break;default:t=E+b+t+w}return i(t)}return h=null==h?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),b.toString=function(){return t+""},b}return{format:a,formatPrefix:function(t,e){var n=a(((t=gn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(hn(e)/3))),i=Math.pow(10,-r),o=En[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),_n=yn.format,bn=yn.formatPrefix;var An=new Date,Cn=new Date;function Tn(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Tn((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return An.setTime(+e),Cn.setTime(+r),t(An),t(Cn),Math.floor(n(An,Cn))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Sn=Tn((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Sn.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Tn((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Sn:null};var Mn=6e4,Nn=6048e5,Dn=(Tn((function(t){t.setTime(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),Tn((function(t){t.setTime(Math.floor(t/Mn)*Mn)}),(function(t,e){t.setTime(+t+e*Mn)}),(function(t,e){return(e-t)/Mn}),(function(t){return t.getMinutes()})),Tn((function(t){var e=t.getTimezoneOffset()*Mn%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Tn((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mn)/864e5}),(function(t){return t.getDate()-1})));function On(t){return Tn((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mn)/Nn}))}var In=On(0),Pn=On(1),Ln=(On(2),On(3),On(4)),Bn=(On(5),On(6),Tn((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Tn((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));Bn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Tn((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var jn=Bn,Fn=(Tn((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Mn)}),(function(t,e){return(e-t)/Mn}),(function(t){return t.getUTCMinutes()})),Tn((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),Tn((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})));function Rn(t){return Tn((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Nn}))}var qn=Rn(0),Hn=Rn(1),$n=(Rn(2),Rn(3),Rn(4)),Wn=(Rn(5),Rn(6),Tn((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Tn((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Wn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Tn((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Un=Wn;function Vn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Yn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var Gn,Kn,Zn={"-":"",_:" ",0:"0"},Qn=/^\s*\d+/,Jn=/^%/,tr=/[\\^$*+?|[\]().{}]/g;function er(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function nr(t){return t.replace(tr,"\\$&")}function rr(t){return new RegExp("^(?:"+t.map(nr).join("|")+")","i")}function ir(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function or(t,e,n){var r=Qn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ar(t,e,n){var r=Qn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function sr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ur(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function cr(t,e,n){var r=Qn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function fr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function dr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function pr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function gr(t,e,n){var r=Qn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function vr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function mr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function yr(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function _r(t,e,n){var r=Qn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function br(t,e,n){var r=Qn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function wr(t,e,n){var r=Jn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function xr(t,e,n){var r=Qn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function kr(t,e,n){var r=Qn.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Er(t,e){return er(t.getDate(),e,2)}function zr(t,e){return er(t.getHours(),e,2)}function Ar(t,e){return er(t.getHours()%12||12,e,2)}function Cr(t,e){return er(1+Dn.count(jn(t),t),e,3)}function Tr(t,e){return er(t.getMilliseconds(),e,3)}function Sr(t,e){return Tr(t,e)+"000"}function Mr(t,e){return er(t.getMonth()+1,e,2)}function Nr(t,e){return er(t.getMinutes(),e,2)}function Dr(t,e){return er(t.getSeconds(),e,2)}function Or(t){var e=t.getDay();return 0===e?7:e}function Ir(t,e){return er(In.count(jn(t),t),e,2)}function Pr(t,e){var n=t.getDay();return t=n>=4||0===n?Ln(t):Ln.ceil(t),er(Ln.count(jn(t),t)+(4===jn(t).getDay()),e,2)}function Lr(t){return t.getDay()}function Br(t,e){return er(Pn.count(jn(t),t),e,2)}function jr(t,e){return er(t.getFullYear()%100,e,2)}function Fr(t,e){return er(t.getFullYear()%1e4,e,4)}function Rr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+er(e/60|0,"0",2)+er(e%60,"0",2)}function qr(t,e){return er(t.getUTCDate(),e,2)}function Hr(t,e){return er(t.getUTCHours(),e,2)}function $r(t,e){return er(t.getUTCHours()%12||12,e,2)}function Wr(t,e){return er(1+Fn.count(Un(t),t),e,3)}function Ur(t,e){return er(t.getUTCMilliseconds(),e,3)}function Vr(t,e){return Ur(t,e)+"000"}function Yr(t,e){return er(t.getUTCMonth()+1,e,2)}function Xr(t,e){return er(t.getUTCMinutes(),e,2)}function Gr(t,e){return er(t.getUTCSeconds(),e,2)}function Kr(t){var e=t.getUTCDay();return 0===e?7:e}function Zr(t,e){return er(qn.count(Un(t),t),e,2)}function Qr(t,e){var n=t.getUTCDay();return t=n>=4||0===n?$n(t):$n.ceil(t),er($n.count(Un(t),t)+(4===Un(t).getUTCDay()),e,2)}function Jr(t){return t.getUTCDay()}function ti(t,e){return er(Hn.count(Un(t),t),e,2)}function ei(t,e){return er(t.getUTCFullYear()%100,e,2)}function ni(t,e){return er(t.getUTCFullYear()%1e4,e,4)}function ri(){return"+0000"}function ii(){return"%"}function oi(t){return+t}function ai(t){return Math.floor(+t/1e3)}Kn=(Gn=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=rr(i),c=ir(i),f=rr(o),d=ir(o),h=rr(a),p=ir(a),g=rr(s),v=ir(s),m=rr(l),y=ir(l),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Er,e:Er,f:Sr,H:zr,I:Ar,j:Cr,L:Tr,m:Mr,M:Nr,p:function(t){return i[+(t.getHours()>=12)]},Q:oi,s:ai,S:Dr,u:Or,U:Ir,V:Pr,w:Lr,W:Br,x:null,X:null,y:jr,Y:Fr,Z:Rr,"%":ii},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:qr,e:qr,f:Vr,H:Hr,I:$r,j:Wr,L:Ur,m:Yr,M:Xr,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:oi,s:ai,S:Gr,u:Kr,U:Zr,V:Qr,w:Jr,W:ti,x:null,X:null,y:ei,Y:ni,Z:ri,"%":ii},w={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:pr,e:pr,f:br,H:vr,I:vr,j:gr,L:_r,m:hr,M:mr,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:xr,s:kr,S:yr,u:ar,U:sr,V:lr,w:or,W:ur,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:fr,Y:cr,Z:dr,"%":wr};function x(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=Zn[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=Xn(1900);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=(r=Yn(Xn(o.y))).getUTCDay())>4||0===i?Hn.ceil(r):Hn(r),r=Fn.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(i=(r=e(Xn(o.y))).getDay())>4||0===i?Pn.ceil(r):Pn(r),r=Dn.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Yn(Xn(o.y)).getUTCDay():e(Xn(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Yn(o)):e(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in Zn?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=x(n,_),_.X=x(r,_),_.c=x(e,_),b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),{format:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",Vn);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,Yn);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).utcParse,Date.prototype.toISOString||(0,Gn.utcFormat)("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||Kn("%Y-%m-%dT%H:%M:%S.%LZ");var si=function(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))};function li(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function ui(t,e){var n,r,i=/(^([+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|^0x[\da-fA-F]+$|\d+)/g,o=/^\s+|\s+$/g,a=/\s+/g,s=/^0x[0-9a-f]+$/i,l=/^0/,u=function(t){return(ui.insensitive&&(""+t).toLowerCase()||""+t).replace(o,"")},c=u(t),f=u(e),d=c.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=f.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=parseInt(c.match(s),16)||1!==d.length&&Date.parse(c),g=parseInt(f.match(s),16)||p&&f.match(/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/)&&Date.parse(f)||null,v=function(t,e){return(!t.match(l)||1==e)&&parseFloat(t)||t.replace(a," ").replace(o,"")||0};if(g){if(p<g)return-1;if(p>g)return 1}for(var m=0,y=d.length,_=h.length,b=Math.max(y,_);m<b;m++){if(n=v(d[m]||"",y),r=v(h[m]||"",_),isNaN(n)!==isNaN(r))return isNaN(n)?1:-1;if(/[^\x00-\x80]/.test(n+r)&&n.localeCompare){var w=n.localeCompare(r);return w/Math.abs(w)}if(n<r)return-1;if(n>r)return 1}}si("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),si("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),si("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),si("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Rt(ct(300,.5,0),ct(-240,.5,1)),Rt(ct(-100,.75,.35),ct(80,1.5,.8)),Rt(ct(260,.75,.35),ct(80,1.5,.8)),ct(),li(si("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),li(si("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),li(si("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),li(si("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var ci=n(1);function fi(t){this.config=JSON.parse(JSON.stringify(t)),function(t){t.chromosomesArray=[],t.coordinateSystem="iscn",t.maxLength={bp:0,iscn:0},t.chromosomes={},t.numChromosomes=0,t.config.debug||(t.config.debug=!1),t.config.dataDir||(t.config.dataDir=t.getDataDir()),t.config.container||(t.config.container="body"),t.selector=t.config.container+" #_ideogram",t.config.resolution||(t.config.resolution=""),t.config.orientation||(t.config.orientation="vertical"),t.config.brush||(t.config.brush=null),t.config.rows||(t.config.rows=1),"showChromosomeLabels"in t.config==0&&(t.config.showChromosomeLabels=!0),t.config.showNonNuclearChromosomes||(t.config.showNonNuclearChromosomes=!1)}(this),function(t){t.config.ploidy||(t.config.ploidy=1),t.config.ploidy>1&&(t.sexChromosomes={},t.config.sex||(t.config.sex="male"),2!==t.config.ploidy||t.config.ancestors||(t.config.ancestors={M:"#ffb6c1",P:"#add8e6"},t.config.ploidyDesc="MP"))}(this),function(t){t.config.showBandLabels||(t.config.showBandLabels=!1),t.config.showFullyBanded=!("showFullyBanded"in t.config)||t.config.showFullyBanded,t.bandsToShow=[],t.bandData={}}(this),function(t){var e,n,r;t.config.chrHeight||(e=t.config.container,n=document.querySelector(e).getBoundingClientRect(),r="vertical"===t.config.orientation?n.height:n.width,"body"!==e&&0!==r||(r=400),t.config.chrHeight=r)}(this),function(t){var e,n;t.config.chrWidth||(e=10,(n=t.config.chrHeight)<900&&n>500?e=Math.round(n/40):n>=900&&(e=Math.round(n/45)),t.config.chrWidth=e)}(this),function(t){t.config.chrMargin||(t.config.chrMargin=1===t.config.ploidy?10:Math.round(t.config.chrWidth/4)),t.config.showBandLabels&&(t.config.chrMargin+=20)}(this),function(t,e){t.onLoad&&(e.onLoadCallback=t.onLoad),t.onLoadAnnots&&(e.onLoadAnnotsCallback=t.onLoadAnnots),t.onDrawAnnots&&(e.onDrawAnnotsCallback=t.onDrawAnnots),t.onBrushMove&&(e.onBrushMoveCallback=t.onBrushMove),t.onDidRotate&&(e.onDidRotateCallback=t.onDidRotate),t.onWillShowAnnotTooltip&&(e.onWillShowAnnotTooltipCallback=t.onWillShowAnnotTooltip)}(t,this),function(t){t.organisms={9606:{commonName:"Human",scientificName:"Homo sapiens",scientificNameAbbr:"H. sapiens",assemblies:{default:"GCF_000001405.26",GRCh38:"GCF_000001405.26",GRCh37:"GCF_000001405.13"}},10090:{commonName:"Mouse",scientificName:"Mus musculus",scientificNameAbbr:"M. musculus",assemblies:{default:"GCF_000001635.20"}},4641:{commonName:"banana",scientificName:"Musa acuminata",scientificNameAbbr:"M. acuminata",assemblies:{default:"mock"}}}}(this),function(t){t.bump=Math.round(t.config.chrHeight/125),t.adjustedBump=!1,t.config.chrHeight<200&&(t.adjustedBump=!0,t.bump=4)}(this),function(t,e){t.chromosome&&(e.config.chromosomes=[t.chromosome],"showBandLabels"in t==0&&(e.config.showBandLabels=!0),"rotatable"in t==0&&(e.config.rotatable=!1))}(t,this),this.initAnnotSettings(),this.config.chrMargin+=this.config.chrWidth,this.config.chrMargin+="heatmap"===this.config.annotationsLayout?this.config.annotTracksHeight:2*this.config.annotTracksHeight,this.init()}var di=ci.a.assign({},o);function hi(t){void 0!==t.timeout&&window.clearTimeout(t.timeout),t.rawAnnots=t.setOriginalTrackIndexes(t.rawAnnots),t.config.annotationsDisplayedTracks?t.annots=t.updateDisplayedTracks(t.config.annotationsDisplayedTracks):(t.annots=t.processAnnotData(t.rawAnnots),t.config.filterable&&t.initCrossFilter(),t.drawProcessedAnnots(t.annots))}function pi(t,e){var n=(new Date).getTime(),r=this.config;this.initDrawChromosomes(t),r.annotationsPath&&function(t){t.rawAnnots?hi(t):function e(){t.timeout=setTimeout((function(){t.rawAnnots?hi(t):e()}),50)}()}(this),function(t,e){var n,r,i;if(!0===t.showBandLabels&&(r=(new Date).getTime(),e.hideUnshownBandLabels(),i=(new Date).getTime(),t.debug&&console.log("Time in showing bands: "+(i-r)+" ms"),"vertical"===t.orientation))for(n=0;n<e.chromosomesArray.length;n++)e.rotateChromosomeLabels(di.select("#"+e.chromosomesArray[n].id),n);!0===t.showChromosomeLabels&&e.drawChromosomeLabels(e.chromosomes)}(r,this),r.brush&&this.createBrush(r.brush),r.annotations&&this.drawAnnots(r.annotations),function(t,e,n){var r=(new Date).getTime();t.debug&&console.log("Time in drawChromosome: "+(r-n)+" ms");var i=(new Date).getTime();t.debug&&console.log("Time constructing ideogram: "+(i-e)+" ms")}(r,e,n),this.setOverflowScroll(),this.onLoadCallback&&this.onLoadCallback()}class gi{constructor(t){this._config=t,this._description=this._normalize(this._config.ploidyDesc)}getChromosomesNumber(t){if(this._config.ploidyDesc){var e=this._config.ploidyDesc[t];return e instanceof Object?Object.keys(e)[0].length:e.length}return this._config.ploidy||1}_normalize(t){var e,n,r=[];if(!t)return t;for(e in t)"string"==typeof(n=t[e])?("vertical"===this._config.orientation&&(n=n.split("").reverse()),r.push({ancestors:n,existence:this._getexistenceArray(n.length)})):r.push({ancestors:Object.keys(n)[0],existence:n[Object.keys(n)[0]]});return r}_getexistenceArray(t){for(var e=[],n=0;n<t;n++)e.push("11");return e}getSetSize(t){return this._description?this._description[t].ancestors.length:1}getAncestor(t,e){return this._description?this._description[t].ancestors[e]:""}exists(t,e,n){return!this._description||Number(this._description[t].existence[e][n])>0}}var vi=ci.a.assign({},o);class mi{constructor(t){this._node=t}getLabel(){return vi.select(this._node.parentNode).select("text.chrLabel").text()}getSetLabel(){return vi.select(this._node.parentNode).select("text.chrSetLabel").text()}}var yi=ci.a.assign({},o),_i=class{constructor(t,e){this._config=t,this._ideo=e,this._ploidy=this._ideo._ploidy,this._translate=void 0,this.chrSetMargin="chrSetMargin"in t?t.chrSetMargin:this._config.ploidy>1?this._config.chrMargin:0,this._tickSize=8,this._isRotated=!1}_getLeftMargin(){return this.margin.left}_getYScale(){return 20/this._config.chrWidth}getChromosomeLabels(t){var e=new mi(t),n=[];return this._ideo.config.ploidy>1&&n.push(e.getSetLabel()),n.push(e.getLabel()),n.filter((function(t){return t.length>0}))}getChromosomeBandLabelTranslate(t){var e,n,r,i=this._ideo,o=this._tickSize,a=i.config.orientation;return"vertical"===a?r="rotate(-90)translate("+(e=o)+","+(n=i.round(2+t.px.start+t.px.width/2))+")":"horizontal"===a&&(r="translate("+(e=i.round(-o+t.px.start+t.px.width/2))+","+(n=-10)+")"),{x:e,y:n,translate:r}}didRotate(t,e){var n,r,i,o,a,s,l,u,c;r=(n=this._ideo).config.taxid,i=e.id.split("-")[0].replace("chr",""),o=(a=n.chromosomes[r][i]).bands,u=(l=yi.select(e.parentNode)).attr("transform"),c=/scale\(.*\)/.exec(u),u=u.replace(c,""),l.attr("transform",u),s=a.width,(a=n.getChromosomeModel(o,i,r,t)).oldWidth=s,n.chromosomes[r][i]=a,n.drawChromosome(a),n.handleRotateOnClick(),n.rawAnnots&&(n.displayedTrackIndexes?n.updateDisplayedTracks(n.displayedTrackIndexes):(n.annots=n.processAnnotData(n.rawAnnots),n.drawProcessedAnnots(n.annots),n.config.filterable&&n.initCrossFilter())),!0===n.config.showBandLabels&&(n.drawBandLabels(n.chromosomes),n.hideUnshownBandLabels()),n.onDidRotateCallback&&n.onDidRotateCallback(a)}rotate(t,e,n){var r,i,o,a;a=(r=this._ideo).selector+" .chrSetLabel, "+r.selector+" .chrLabel",o=document.querySelector(r.selector).getBoundingClientRect(),i=yi.selectAll(r.selector+" g.chromosome").filter((function(){return this!==n})),this._isRotated?(this._isRotated=!1,r.config.chrHeight=r.config.chrHeightOriginal,r.config.chrWidth=r.config.chrWidthOriginal,r.config.annotationHeight=r.config.annotationHeightOriginal,this.rotateBack(t,e,n,(function(){i.style("display",null),yi.selectAll(a).style("display",null),r._layout.didRotate(e,n)}))):(this._isRotated=!0,i.style("display","none"),yi.selectAll(a).style("display","none"),this.rotateForward(t,e,n,(function(){var t,i,a;r.config.chrHeightOriginal=r.config.chrHeight,r.config.chrWidthOriginal=r.config.chrWidth,r.config.annotationHeightOriginal=r.config.annotationHeight,"VerticalLayout"===r._layout._class?(i=o.width,a=window.innerWidth):(i=o.height-10,a=window.innerHeight-10),t=a<i?a:i,r.config.chrHeight=t-=2*r.config.chrMargin,r.config.chrWidth*=2.3,r.config.annotationHeight*=1.7,r._layout.didRotate(e,n)})))}getChromosomeLabelClass(){return 1===this._config.ploidy?"chrLabel":"chrSetLabel"}_getAdditionalOffset(){return(this._config.annotationHeight||0)*(this._config.annotationsNumTracks||1)}_getChromosomeSetSize(t){return this._ploidy.getSetSize(t)*this._config.chrWidth*2+this.chrSetMargin}getChromosomeSetLabelAnchor(){return"middle"}getChromosomeLabelYPosition(){return-5.5}getChromosomeSetLabelYPosition(t){return 1===this._config.ploidy?this.getChromosomeLabelYPosition(t):-2*this._config.chrWidth}},bi=ci.a.assign({},o),wi=class extends _i{constructor(t,e){super(t,e),this._class="VerticalLayout",this.margin={top:30,left:15}}rotateForward(t,e,n,r){var i="translate(20, 25) "+this.getChromosomeScale(n);bi.select(n.parentNode).transition().attr("transform",i).on("end",r);var o=this.getChromosomeLabels(n),a=1.3*(20+this._config.chrWidth);bi.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(o).enter().append("text").attr("class",(function(t,e){return 0===e&&2===o.length?"chrSetLabel":null})).attr("x",0).attr("y",a).style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="horizontal"}rotateBack(t,e,n,r){var i=this.getChromosomeScaleBack(n),o=this.getChromosomeSetTranslate(t);bi.select(n.parentNode).transition().attr("transform",o+" "+i).on("end",r),bi.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="vertical"}getHeight(){return this._config.chrHeight+1.5*this.margin.top}getWidth(){return"97%"}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeBandLabelAnchor(){return null}getChromosomeScale(t){var e,n;return e=bi.select(this._ideo.selector).node().getBoundingClientRect(),n=t.getBoundingClientRect(),"scale("+e.width/n.height*.97+", "+this._getYScale()+")"}getChromosomeScaleBack(t){var e,n,r;return n=(r=this._ideo.config).taxid,e=t.id.split("-")[0].replace("chr",""),"scale("+this._ideo.chromosomes[n][e].oldWidth/(3*r.chrHeight)*.97+", "+1/this._getYScale()+")"}getChromosomeSetTranslate(t){return"rotate(90) translate("+this.margin.top+", -"+this.getChromosomeSetYTranslate(t)+")"}getChromosomeSetYTranslate(t){var e,n=this._getAdditionalOffset(),r=this._config.chrMargin,i=this._config.chrWidth;if(!this._config.ploidyDesc)return"histogram"===this._config.annotationsLayout?r/2+t*(r+i+2)+2*n+1:(e=i+t*(r+i)+2*n,n>0?e:e+4+2*t);if(!this._translate){this._translate=[this._ploidy.getSetSize(0)*i*2];for(var o=1;o<this._config.ploidyDesc.length;o++)this._translate[o]=this._translate[o-1]+this._getChromosomeSetSize(o-1)}return this._translate[t]}getChromosomeSetLabelXPosition(){return this._config.chrWidth*this._config.ploidy/-2}getChromosomeLabelXPosition(){return this._config.chrWidth/-2}},xi=ci.a.assign({},o),ki=class extends _i{constructor(t,e){super(t,e),this._class="HorizontalLayout",this.margin={left:20,top:30}}_getLeftMargin(){var t=_i.prototype._getLeftMargin.call(this);return this._config.ploidy>1&&(t*=1.8),t}rotateForward(t,e,n,r){var i;xi.select(n.parentNode).transition().attr("transform","rotate(90) translate(30, -37.5) ").on("end",r),i=this.getChromosomeLabels(n),xi.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(i).enter().append("text").attr("class",(function(t,e){return 0===e&&2===i.length?"chrSetLabel":null})).attr("x",26).attr("y",(function(t,e){return 12*(e+1+i.length%2)})).style("text-anchor","middle").style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="vertical"}rotateBack(t,e,n,r){var i=this.getChromosomeSetTranslate(t);xi.select(n.parentNode).transition().attr("transform",i).on("end",r),xi.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="horizontal"}getHeight(t){var e=this._config.chromosomes[t].length,n=this.getChromosomeSetYTranslate(e-1);return(n+=this._getChromosomeSetSize(e-1))+2*this._getAdditionalOffset()}getWidth(){return this._config.chrHeight+1.5*this.margin.top}getChromosomeSetLabelAnchor(){return"end"}getChromosomeBandLabelAnchor(){return null}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return null}getChromosomeSetTranslate(t){return"translate("+this._getLeftMargin()+", "+this.getChromosomeSetYTranslate(t)+")"}getChromosomeSetYTranslate(t){if(!this._config.ploidyDesc)return this._config.chrMargin*(t+1);if(!this._translate){this._translate=[1];for(var e=1;e<this._config.ploidyDesc.length;e++)this._translate[e]=this._translate[e-1]+this._getChromosomeSetSize(e-1)}return this._translate[t]}getChromosomeSetLabelXPosition(t){return 1===this._config.ploidy?this.getChromosomeLabelXPosition(t):-20}getChromosomeSetLabelYPosition(t){var e=this._ploidy.getSetSize(t),n=this._config;return 1===n.ploidy?n.chrWidth/2+3:e*n.chrMargin/2}getChromosomeLabelXPosition(){return-8}getChromosomeLabelYPosition(){return this._config.chrWidth}};ci.a.assign({},o);var Ei=class extends _i{constructor(t,e){super(t,e),this._class="PairedLayout",this.margin={left:30}}rotateForward(t,e,n,r){console.warn("rotateForward not implemented for PairedLayout")}rotateBack(t,e,n,r){console.warn("rotateBack not implemented for PairedLayout")}getHeight(){return this._config.chrHeight+1.5*this.margin.left}getWidth(){return"97%"}getChromosomeBandTickY1(t){return t%2?this._config.chrWidth:2*this._config.chrWidth}getChromosomeBandTickY2(t){var e=this._config.chrWidth;return t%2?e-this._tickSize:2*e+this._tickSize}getChromosomeBandLabelAnchor(t){return t%2?null:"end"}getChromosomeBandLabelTranslate(t,e){var n=e%2?10:-this._config.chrWidth-10,r=this._ideo.round(t.px.start+t.px.width/2)+3;return{x:r,y:r,translate:"rotate(-90) translate("+n+", "+r+")"}}getChromosomeLabelXPosition(){return-this._tickSize}getChromosomeSetLabelXPosition(){return this._config.chrWidth/-2}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(t){var e=this.getChromosomeSetYTranslate(t);return"rotate(90) translate("+this.margin.left+", -"+e+")"}getChromosomeSetYTranslate(t){return 200*(t+1)}};ci.a.assign({},o);var zi=class extends _i{constructor(t,e){super(t,e),this._class="SmallLayout",this.margin={left:36.5,top:10}}getHeight(){return this._config.rows*(this._config.chrHeight+1.5*this.margin.top)}getWidth(){return"97%"}getChromosomeBandLabelTranslate(){}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(t){var e=[];this._ideo.getTaxids((function(t){e=t}));var n,r,i=this._ideo.config.chromosomes[e[0]].length/this._config.rows;return t>i-1?(n=this.margin.left+1.4*this._config.chrHeight,r=this.getChromosomeSetYTranslate(t-i)):(n=this.margin.left,r=this.getChromosomeSetYTranslate(t)),"rotate(90) translate("+n+", -"+r+")"}getChromosomeSetYTranslate(t){var e=this._getAdditionalOffset();return this.margin.left*t+this._config.chrWidth+2*e+e*t}getChromosomeSetLabelXPosition(t){return(this._ploidy.getSetSize(t)*this._config.chrWidth+20)/-2+(this._config.ploidy>1?0:this._config.chrWidth)}getChromosomeLabelXPosition(){return this._config.chrWidth/-2}},Ai=ci.a.assign({},o);function Ci(t,e,n){this.config.annotationsPath&&this.fetchAnnots(this.config.annotationsPath),function(t){if("ploidyDesc"in t.config&&"string"==typeof t.config.ploidyDesc){for(var e=[],n=0;n<t.numChromosomes;n++)e.push(t.config.ploidyDesc);t.config.ploidyDesc=e}t._ploidy=new gi(t.config)}(this),this._layout=function(t){var e=t.config;return"perspective"in e&&"comparative"===e.perspective?new Ei(e,t):"rows"in e&&e.rows>1?new zi(e,t):"vertical"===e.orientation?new wi(e,t):"horizontal"===e.orientation?new ki(e,t):new wi(e,t)}(this),function(t,e){Ai.selectAll(e.config.container+" #_ideogramOuterWrap").remove(),Ai.select(e.config.container).append("div").attr("id","_ideogramOuterWrap").append("div").attr("id","_ideogramTrackLabelContainer").style("position","absolute"),Ai.select(e.config.container+" #_ideogramOuterWrap").append("div").attr("id","_ideogramMiddleWrap").style("position","relative").style("overflow-x","auto").append("div").attr("id","_ideogramInnerWrap").append("svg").attr("id","_ideogram").attr("class",function(t){var e="";return t.config.showChromosomeLabels&&(e+="horizontal"===t.config.orientation?"labeledLeft ":"labeled "),t.config.annotationsLayout&&"overlay"===t.config.annotationsLayout&&(e+="faint"),e}(e)).attr("width",e._layout.getWidth(t)).attr("height",e._layout.getHeight(t)).html(e.getBandColorGradients())}(e,this),this.isOnlyIdeogram=1===document.querySelectorAll("#_ideogram").length,function(t){Ai.select(t.config.container+" #_ideogramOuterWrap").append("div").attr("class","_ideogramTooltip").attr("id","_ideogramTooltip").style("opacity",0).style("position","fixed").style("text-align","center").style("padding","4px").style("font","12px sans-serif").style("background","white").style("border","1px solid black").style("border-radius","5px").style("z-index","100")}(this),this.finishInit(t,n)}var Ti=n(5),Si=ci.a.assign({},a,o);function Mi(t,e,n){return"sex"in n.config&&(2===n.config.ploidy&&n.sexChromosomes.index+2===e||"female"===n.config.sex&&"Y"===t.name)}function Ni(t,e,n,r,i){var o,a,s,l;for(o=0;o<e.length;o++)"bandsArray"in i&&(a=t[r]),l=i.getChromosomeModel(a,s=e[o],n,r),r+=1,"string"!=typeof s&&(s=s.name),i.chromosomes[n][s]=l,i.chromosomesArray.push(l),Mi(l,r,i)||i.drawChromosome(l);return r}function Di(t,e){"undefined"!=typeof chrBands&&t.length>=chrBands.length/2&&(e.coordinateSystem="bp")}function Oi(t){var e,n,r,i=this.config.taxids,o=0;for(t.length>0&&(this.bandsArray={}),n=0;n<i.length;n++)Di(r=this.config.chromosomes[e=i[n]],this),this.chromosomes[e]={},this.setSexChromosomes(r),"bandsArray"in this&&(this.bandsArray[e]=t),o=Ni(t,r,e,o,this),this.config.showBandLabels&&this.drawBandLabels(this.chromosomes),this.handleRotateOnClick(),this._gotChrModels=!0}function Ii(){var t=this;"rotatable"in t.config&&!1===t.config.rotatable?Si.selectAll(t.selector+" .chromosome").style("cursor","default"):Si.selectAll(t.selector+" .chromosome").on("click",(function(){t.rotateAndToggleDisplay(this)}))}function Pi(){call(this.onLoadCallback)}function Li(t,e,n){var r,i,o,a=n.config;return r=n.organisms[t],a.assembly||(n.config.assembly="default"),i=r.assemblies,o=function(t,e,n){var r=n.organisms[t],i=[Ideogram.slugify(r.scientificName)],o=r.assemblies,a=n.config.resolution;return e!==o.default&&i.push(e),"9606"===t&&(e in o==="false"&&ci.a.values(o).includes(config.assembly)||""!==a&&850!==a)&&i.push(a),i.join("-")+".js"}(t,n.assemblyIsAccession()?a.assembly:i[a.assembly],n),"9606"!==t&&"10090"!==t||(e[t]=o),e}function Bi(t,e,n,r){var i;Object(ci.f)(r)&&"undefined"==typeof chrBands&&t in e?Object(Ti.a)(e,t,n,r):("undefined"!=typeof chrBands&&(r.bandData[t]=chrBands),i=r.processBandData(),r.writeContainer(i,t,n))}function ji(){var t=(new Date).getTime(),e=this;(function(t){return new Promise((function(e){"number"==typeof t.config.organism?t.getOrganismFromEutils((function(){t.getTaxids(e)})):t.getTaxids(e)}))})(e).then((function(n){!function(t,e,n){var r,i,o;for(n.config.taxid=o=t[0],n.config.taxids=t,r={9606:"",10090:""},i=0;i<t.length;i++)Bi(o=String(t[i]),r=Li(o,r,n),e,n)}(n,t,e)}))}class Fi{constructor(t,e){this.rawAnnots=this.parseBed(t,e)}static componentToHex(t){var e=parseInt(t,10).toString(16);return 1===e.length?"0"+e:e}static rgbToHex(t,e,n){return"#"+Fi.componentToHex(t)+Fi.componentToHex(e)+Fi.componentToHex(n)}parseGenomicCoordinates(t,e){var n,r,i,o;return n=t[0],r=parseInt(t[1],10),o=(i=parseInt(t[2],10))-r,e&&(n=n.slice(3)),[n,r,i,o]}parseAnnotFromTsvLine(t,e,n){var r,i,o,a,s,l,u,c=t.split(/\s/g);return[o,a,s,length]=this.parseGenomicCoordinates(c,n),-1===(i=e.indexOf(o))?[null,null]:(r=["",a,length,0],c.length>=4&&(r[0]=c[3]),c.length>=8&&(l=c[8].split(","),u=Fi.rgbToHex(l[0],l[1],l[2]),r.push(u)),[i,r])}parseRawAnnots(t,e,n,r){var i,o,a,s,l,u;for(u=!0,!1===isNaN(parseInt(n[e],10))&&(u=!1),i=e;i<n.length;i++)o=n[i],[a,s]=this.parseAnnotFromTsvLine(o,r,u),null!==a&&t[a].annots.push(s);return l=["name","start","length","trackIndex"],n[e].length>=8&&l.push("color"),{keys:l,annots:t}}parseBed(t,e){var n,r,i,o=[],a=t.split(/\r\n|\n/);for(r=Object.keys(e.chromosomes[e.config.taxid]),n=0;n<r.length;n++)o.push({chr:r[n],annots:[]});return i=0,("chr"===a[0].slice(0,3)||isNaN(parseInt(a[0],10)))&&(i=1),this.parseRawAnnots(o,i,a,r)}}var Ri=Object.assign({},o),qi=["name","start","length","trackIndex","trackIndexOriginal","color"];function Hi(t){!1!==t.config.showTrackLabel&&(t.hideTrackLabelTimeout=window.setTimeout((function(){Ri.select(t.config.container+" #_ideogramTrackLabel").transition().duration(500).style("opacity",0)}),250))}var $i=Object.assign({},o);function Wi(t,e,n,r){var i,o,a,s,l,u=[],c=r.config.numAnnotTracks;for(i=0;i<c;i++)l=t.id+"-canvas-"+i,o=e-(a=r.config.annotationHeight)*(c-i)-7,s=$i.select(r.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",l).attr("width",a).attr("height",n).style("position","absolute").style("left",o+"px").nodes()[0].getContext("2d"),u.push(s);return u}function Ui(t,e,n,r){var i,o,a;for(i=0;i<t.length;i++)(a=e[(o=t[i]).trackIndex]).fillStyle=o.color,a.fillRect(o.trackIndex-1,o.startPx+r,n,.5)}function Vi(t){var e,n,r=this,i=r._layout.margin.top,o=r.config.chrHeight+i;for($i.selectAll(r.config.container+" canvas").remove(),function(t){Ri.select(t.config.container+" #_ideogramTrackLabelContainer").append("div").attr("id","_ideogramTrackLabel").style("opacity",0).style("position","absolute").style("text-align","center").style("padding","1px").style("font","11px sans-serif").style("background","white").style("line-height","10px").style("z-index","9000")}(r),n=0;n<t.length;n++)e=r.config.chrWidth,Ui(t[n].annots,Wi(r.chromosomesArray[n],r._layout.getChromosomeSetYTranslate(n),o,r),e,i);$i.selectAll(r.config.container+" canvas").on("mouseover",(function(){!function(t,e){var n,r,i;clearTimeout(e.hideTrackLabelTimeout),n=function(t){var e,n,r;if(t.rawAnnots.metadata)e=t.rawAnnots.metadata.trackLabels;else if(t.config.heatmaps)for(e=[],n=t.config.heatmaps,r=0;r<n.length;r++)e.push(n[r].key);else e=t.rawAnnots.keys.slice(0).filter(t=>!qi.includes(t));return t.displayedTrackIndexes&&(e=e.filter((function(e,n){return t.displayedTrackIndexes.includes(n+1)}))),e.join("<br>")}(e),Ri.select(e.config.container+" #_ideogramTrackLabel").interrupt().style("top","").style("left","").style("transform",null).style("transform","rotate(-90deg)").html(n),[r,i]=function(t,e,n){var r,i,o,a,s;return r=e.id.split("-").slice(0,-1).join("-")+"-0",i=Ri.select(n.config.container+" #"+r).nodes()[0].getBoundingClientRect(),o=Ri.select(n.config.container+" #_ideogramTrackLabel").nodes()[0].getBoundingClientRect(),a=Ri.select(n.config.container).nodes()[0].getBoundingClientRect(),s=Math.round(i.left+o.width)-i.width-1,[s-=a.left-7,-(t.split("<br>").length-2)*i.width+2]}(n,t,e),function(t,e,n){Ri.select(n.config.container+" #_ideogramTrackLabel").style("opacity",1).style("left",e+"px").style("top",t+"px").style("width","max-content").style("transform-origin","bottom left").style("text-align","left").on("mouseover",(function(){clearTimeout(n.hideTrackLabelTimeout)})).on("mouseout",(function(){Hi(n)}))}(i,r,e)}(this,r)})).on("mouseout",(function(){Hi(r)})),r.onDrawAnnotsCallback&&r.onDrawAnnotsCallback()}function Yi(t,e,n,r,i){return t===e&&"+"===i&&n>r||n===i||0!==t&&t!==e&&n<=i&&n>r||0===t&&n<=i}function Xi(t,e){var n,r,i,o,a,s,l,u;for(n=0;n<t.length;n++)r=t.length-1,o=(i=t[n])[0],a=parseFloat(o),!1===isNaN(a)&&(o=a),0!==n&&(l=parseFloat(t[n-1][0])),s=i[1],Yi(n,r,e,l,o)&&(u=s);return u}function Gi(t,e,n){var r,i,o,a,s,l,u=[];for(r=0;r<e.length;r++)for(o=e[r],i=0;i<t.length;i++)a=o.slice(0,3),l=Xi(n.config.heatmaps[i].thresholds,s=o[t[i]]),a.push(i,l,s),u.push(a);return u}function Ki(t){var e,n,r,i=(new Date).getTime(),o=t.keys,a=t.annots;for(n=[],r=0;r<this.config.heatmaps.length;r++)n.push(o.indexOf(this.config.heatmaps[r].key));e=function(t,e,n){var r,i,o,a,s=[];for(a=0;a<e.length;a++)i=(r=e[a]).chr,o=Gi(t,r.annots,n),s.push({chr:i,annots:o});return s}(n,a,this),o.splice(3,0,"trackIndex"),o.splice(4,0,"color"),this.rawAnnots.keys=o,this.rawAnnots.annots=e,function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in deserializeAnnotsForHeatmap: "+(n-t)+" ms")}(i,this)}var Zi=Object.assign({},o);function Qi(){call(this.onLoadAnnotsCallback)}function Ji(){call(this.onDrawAnnotsCallback)}function to(){!1!==this.config.showAnnotTooltip&&(this.hideAnnotTooltipTimeout=window.setTimeout((function(){Zi.select("._ideogramTooltip").transition().duration(500).style("opacity",0).style("pointer-events","none")}),250))}function eo(t){call(this.onWillShowAnnotTooltipCallback,t)}function no(t,e){var n,r,i,o;!1!==this.config.showAnnotTooltip&&(clearTimeout(this.hideAnnotTooltipTimeout),this.onWillShowAnnotTooltipCallback&&(t=this.onWillShowAnnotTooltipCallback(t)),(o=Zi.select("._ideogramTooltip")).interrupt(),n=e.getScreenCTM().translate(+e.getAttribute("cx"),+e.getAttribute("cy")),[r,i]=function(t){var e,n,r;return r="chr"+t.chr+":"+t.start.toLocaleString(),t.length>0&&(r+="-"+t.stop.toLocaleString()),e=r,n=24,t.name&&(e=(t.displayName?t.displayName:t.name)+"<br/>"+e,n+=8),[e,n]}(t),function(t,e,n,r,i){t.html(e).style("opacity",1).style("left",n.e+"px").style("top",n.f-r+"px").style("pointer-events",null).on("mouseover",(function(){clearTimeout(i.hideAnnotTooltipTimeout)})).on("mouseout",(function(){i.startHideAnnotTooltipTimeout()}))}(o,r,n,i,this))}function ro(t){var e,n,r=!1,i=(new Date).getTime();return e=this.chromosomes[this.config.taxid],function(t){"histogramScaling"in t.config==0&&(t.config.histogramScaling="absolute")}(this),void 0===this.maxAnnotsPerBar&&(this.maxAnnotsPerBar={},r=!0),function(t,e,n){var r,i,o,a,s,l,u;if(e||"relative"===n.config.histogramScaling){for(r=0,i=0;i<t.length;i++){for(o=0,a=t[i].annots,s=t[i].chr,l=0;l<a.length;l++)(u=a[l].count)>o&&(o=u),u>r&&(r=u);n.maxAnnotsPerBar[s]=o}n.maxAnnotsPerBarAllChrs=r}}(n=function(t,e,n,r){var i,o,a,s,l,u,c,f,d,h,p=r.config.barWidth;for(i in t)for(o=t[i].annots,s=e[(a=n[t[i].chr]).chrIndex].annots,l=0;l<o.length;l++)for(c=(u=o[l]).px-r.bump,f=0;f<s.length;f++)if(h=(d=s[f].px)+p,f===s.length-1&&(h+=p),c>=d&&c<h){e[a.chrIndex].annots[f].count+=1,e[a.chrIndex].annots[f].annots.push(u);break}return e}(t,n=function(t,e){var n,r,i,o,a,s,l,u=e.config.barWidth,c=[];for(n in t){for(i=(r=t[n]).bands[r.bands.length-1],o=Math.round(i.px.stop/u),a={chr:n,annots:[]},s=0;s<o;s++)a.annots.push({bp:e.convertPxToBp(r,(l=s*u-e.bump)+e.bump),px:l,count:0,chrIndex:r.chrIndex,chrName:n,color:e.config.annotationsColor,annots:[]});c.push(a)}return c}(e,this),e,this),r,this),n=function(t,e,n){var r,i,o,a,s,l=n._layout._isRotated;for(r=0;r<e.length;r++)for(t=e[r].annots,i=e[r].chr,o=0;o<t.length;o++)a=t[o].count,s="relative"===n.config.histogramScaling?a/n.maxAnnotsPerBar[i]:a/n.maxAnnotsPerBarAllChrs,e[r].annots[o].height=!1===l?s*n.config.chrMargin:s*n.config.chrHeightOriginal*3;return e}(t,n,this),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time spent in getHistogramBars: "+(n-t)+" ms")}(i,this),this.bars=n,n}var io=Object.assign({},o);function oo(t){var e,n='fill="'+t.color+'" style="stroke: #AAA;"',r=t.shape;return"shape"in t&&["circle","triangle"].includes(r)?"circle"===r?e='<path d="m2,9a 4.5,4.5 0 1,0 9,0a 4.5,4.5 0 1,0 -9,0" '+n+"></path>":"triangle"===r&&(e='<path d="m7,3 l -5 9 l 9 0 z" '+n+"></path>"):e='<rect height="10" width="10"  y="3" '+n+"/>",e}function ao(t,e,n){var r,i,o;for(r=0;r<n.rows.length;r++)t+="<li>"+(o=n.rows[r]).name+"</li>",i=19*r,"name"in n&&(i+=19),e+='<g transform="translate(0, '+i+')">'+oo(o)+"</g>";return[t,e]}var so=Object.assign({},o);function lo(t){var e,n,r=[],i=this.chromosomes[this.config.taxid];if("annots"in t[0])return this.drawProcessedAnnots(t);for(n in i)r.push({chr:n,annots:[]});r=function(t,e){var n,r,i,o;for(n=0;n<t.length;n++)for(i=t[n],r=0;r<e.length;r++)if(i.chr===e[r].chr){o=[i.name,i.start,i.stop-i.start],"color"in i&&o.push(i.color),"shape"in i&&o.push(i.shape),e[r].annots.push(o);break}return e}(t,r),e=function(t){var e=["name","start","length"];return"color"in t[0]&&e.push("color"),"shape"in t[0]&&e.push("shape"),e}(t),this.rawAnnots={keys:e,annots:r},this.annots=this.processAnnotData(this.rawAnnots),this.drawProcessedAnnots(this.annots)}function uo(t){var e;so.selectAll(this.selector+" .annot").remove(),e="tracks",this.config.annotationsLayout&&(e=this.config.annotationsLayout),"legend"in this.config&&function(t){var e,n,r,i,o,a;for(io.select(t.config.container+" #_ideogramLegend").remove(),n=t.config.legend,a="",e=0;e<n.length;e++)"name"in(o=n[e])&&(i="<span>"+o.name+"</span>"),r='<svg width="19">',[i,r]=ao(i,r,o),a+=(r+="</svg>")+"<ul>"+i+"</ul>";var s=io.select(t.config.container+" #_ideogramOuterWrap");s.append("style").html("#_ideogramLegend {font: 12px Arial; line-height: 19px;} #_ideogramLegend svg {float: left;} #_ideogramLegend ul {position: relative; left: -14px; list-style: none; float: left; padding-left: 10px; margin-top: 0px;} #_ideogramLegend ul span {position: relative; left: -15px;} "),s.append("div").attr("id","_ideogramLegend").html(a)}(this),"heatmap"!==e?(function(t,e,n){var r;!function(t,e){var n,r;if("heatmap"!==t&&"histogram"!==t){for(r=0,n=0;n<e.length;n++)r+=e[n].annots.length;r>2e3&&console.warn('Rendering more than 2000 annotations in Ideogram?\nTry setting "annotationsLayout" to "heatmap" or "histogram" in your Ideogram configuration object for better layout and performance.')}}(t,e),"histogram"===t&&(e=n.getHistogramBars(e)),r=function(t,e){return so.selectAll(e.selector+" .chromosome").data(t).selectAll("path.annot").data((function(t){return t.annots})).enter()}(n.fillAnnots(e),n),"tracks"===t?function(t,e){var n,r=e.config.annotationHeight;n=function(t){var e;return{triangle:"m0,0 l -"+t+" "+2*t+" l "+2*t+" 0 z",circle:"m -"+(e=t)+", "+e+"a "+e+","+e+" 0 1,0 "+2*e+",0a "+e+","+e+" 0 1,0 -"+2*e+",0",rectangle:"m0,0 l 0 "+2*t+"l "+t+" 0l 0 -"+2*t+"z"}}(r),t.append("g").attr("id",(function(t){return t.id})).attr("class","annot").attr("transform",(function(t){return"translate("+t.px+","+(e.config.chrWidth+t.trackIndex*r*2)+")"})).append("path").attr("d",(function(t){return function(t,e){return t.shape&&"triangle"!==t.shape?"circle"===t.shape?e.circle:"rectangle"===t.shape?e.rectangle:t.shape:e.triangle}(t,n)})).attr("fill",(function(t){return t.color})).on("mouseover",(function(t){e.showAnnotTooltip(t,this)})).on("mouseout",(function(){e.startHideAnnotTooltipTimeout()}))}(r,n):"overlay"===t?function(t,e){t.append("polygon").attr("id",(function(t){return t.id})).attr("class","annot").attr("points",(function(t){var n,r,i=e.config.chrWidth;return t.stopPx-t.startPx>1?(n=t.startPx,r=t.stopPx):(n=t.px-.5,r=t.px+.5),n+","+i+" "+r+","+i+" "+r+",0 "+n+",0"})).attr("fill",(function(t){return t.color})).on("mouseover",(function(t){e.showAnnotTooltip(t,this)})).on("mouseout",(function(){e.startHideAnnotTooltipTimeout()}))}(r,n):"histogram"===t&&function(t,e){var n,r,i={},o=e.config.chrWidth;for(r in n=e.chromosomes[e.config.taxid])i[r]=n[r];t.append("polygon").attr("class","annot").attr("points",(function(t){return function(t,e,n,r){var i,o,a,s,l=n[t.chr];return(o=t.px+r.config.barWidth+r.bump)>l&&(o=l),(i=t.px+r.bump)+","+(a=e)+" "+o+","+a+" "+o+","+(s=e+t.height)+" "+i+","+s}(t,o,i,e)})).attr("fill",(function(t){return t.color}))}(r,n)}(e,t,this),this.onDrawAnnotsCallback&&this.onDrawAnnotsCallback()):this.drawHeatmaps(t)}var co=Object.assign({},o);function fo(t,e,n){return t.append("g").attr("class","syntenicRegion").attr("id",e).on("click",(function(){var t=this,e=co.selectAll(n.selector+" .syntenicRegion").filter((function(){return this!==t}));e.classed("hidden",!e.classed("hidden"))})).on("mouseover",(function(){var t=this;co.selectAll(n.selector+" .syntenicRegion").filter((function(){return this!==t})).classed("ghost",!0)})).on("mouseout",(function(){co.selectAll(n.selector+" .syntenicRegion").classed("ghost",!1)}))}function ho(t,e,n){var r,i;return i=t.r2,(r=t.r1).startPx=n.convertBpToPx(r.chr,r.start)+e,r.stopPx=n.convertBpToPx(r.chr,r.stop)+e,i.startPx=n.convertBpToPx(i.chr,i.start)+e,i.stopPx=n.convertBpToPx(i.chr,i.stop)+e,[r,i]}function po(t,e,n,r,i,o){var a,s;a="color"in o?o.color:"#CFC",s="opacity"in o?o.opacity:1,t.append("polygon").attr("points",e+", "+r.startPx+" "+e+", "+r.stopPx+" "+n+", "+i.stopPx+" "+n+", "+i.startPx).attr("style","fill: "+a+"; fill-opacity: "+s)}function go(t,e,n,r,i){t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",r.startPx).attr("y2",i.startPx),t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",r.stopPx).attr("y2",i.stopPx)}function vo(t){var e=(new Date).getTime();(function(t,e,n,r){var i,o,a,s,l,u,c,f;for(i=0;i<t.length;i++)o=t[i],[a,s]=ho(o,n,r),l=fo(e,a.chr.id+"_"+a.start+"_"+a.stop+"___"+s.chr.id+"_"+s.start+"_"+s.stop,r),u=r.config.chrWidth,po(l,c=r._layout.getChromosomeSetYTranslate(0),f=r._layout.getChromosomeSetYTranslate(1)-u,a,s,o),go(l,c,f,a,s)})(t,co.select(this.selector).insert("g",":first-child").attr("class","synteny"),this._layout.margin.left,this),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in drawSyntenicRegions: "+(n-t)+" ms")}(e,this)}var mo=ci.a.assign({},o);function yo(){this.config.numAnnotTracks=this.config.annotationsNumTracks,mo.selectAll(this.selector+" .annot").remove(),this.drawAnnots(this.processAnnotData(this.rawAnnots))}function _o(t){var e,n,r=this.rawAnnots.annots;return this.config.numAnnotTracks=t.length,e=function(t,e){var n,r,i,o,a,s,l;for(r=[],o=0;o<t.length;o++){for(i=t[o],a=[],s=0;s<i.annots.length;s++)l=(n=i.annots[s].slice())[3]+1,e.includes(l)&&(n[3]=e.indexOf(l),a.push(n));r.push({chr:i.chr,annots:a})}return r}(r,t),n=this.processAnnotData({keys:this.rawAnnots.keys,annots:e}),mo.selectAll(this.selector+" .annot").remove(),ideogram.displayedTrackIndexes=t,this.drawAnnots(n),n}function bo(t){var e,n;return(e=t.keys).length<4||"trackIndex"!==e[3]||"trackIndexOriginal"===e[4]||(n=function(t,e){var n,r,i,o,a,s,l,u=[];for(l=1,n=0;n<t.length;n++){for(i=t[n],a=[],r=0;r<i.annots.length;r++)(s=(o=i.annots[r].slice())[3])+1>l&&(l=s+1),o.splice(4,0,s),a.push(o);u.push({chr:i.chr,annots:a})}return e.numAvailTracks=l,u}(t.annots,this),e.splice(4,0,"trackIndexOriginal"),t={keys:e,annots:n},this.rawAnnots.metadata&&(t.metadata=this.rawAnnots.metadata)),t}var wo=[["F00"],["F00","88F"],["F00","CCC","88F"],["F00","FA0","0AF","88F"],["F00","FA0","CCC","0AF","88F"],["F00","FA0","875","578","0AF","88F"],["F00","FA0","875","CCC","578","0AF","88F"],["F00","FA0","7A0","875","0A7","578","0AF","88F"],["F00","FA0","7A0","875","CCC","0A7","578","0AF","88F"],["F00","FA0","7A0","875","552","255","0A7","578","0AF","88F"]];function xo(t,e,n,r,i,o,a){return a.config.annotationTracks?i=function(t,e,n,r,i){var o;return e.trackIndex=n[3],(o=i.config.annotationTracks[e.trackIndex]).color&&(e.color=o.color),o.shape&&(e.shape=o.shape),t[r].annots.push(e),t}(i,t,n,o,a):"trackIndex"===e[3]&&1!==a.numAvailTracks?[i,r]=function(t,e,n,r,i,o){var a=wo[o.numAvailTracks-1];return t.trackIndex=e[3],t.trackIndexOriginal=e[4],t.color="#"+a[t.trackIndexOriginal],t.trackIndex>o.config.numTracks-1?(t.trackIndex in n?n[t.trackIndex].push(t):n[t.trackIndex]=[t],[r,n]):(r[i].annots.push(t),[r,n])}(t,n,r,i,o,a):i=function(t,e,n,r){return e.trackIndex=0,e.color||(e.color=r.config.annotationsColor),e.shape||(e.shape="triangle"),t[n].annots.push(e),t}(i,t,o,a),[i,r]}function ko(t,e,n,r,i,o,a){var s,l,u,c;for(s=0;s<n.annots.length;s++){for(c=n.annots[s],u={},l=0;l<o.length;l++)u[o[l]]=c[l];u.stop=u.start+u.length,u.chr=n.chr,u.chrIndex=i,u.startPx=a.convertBpToPx(r,u.start),u.stopPx=a.convertBpToPx(r,u.stop),u.px=Math.round((u.startPx+u.stopPx)/2),[t,e]=xo(u,o,c,e,t,i,a)}return[t,e]}function Eo(t){console.warn('Chromosome "'+t.chr+'" undefined in ideogram; '+t.annots.length+" annotations not shown")}function zo(t){var e,n,r;return e=t.keys,t=t.annots,[n,r]=function(t,e,n){var r,i,o,a,s=[],l={};for(r=-1,i=0;i<t.length;i++)void 0!==(a=n.chromosomes[n.config.taxid][(o=t[i]).chr])?(r++,s.push({chr:o.chr,annots:[]}),[s,l]=ko(s,l,o,a,r,e,n)):Eo(o);return[s,l]}(t,e,this),n=function(t,e){var n,r,i,o,a,s;for(n=t,t=[],s=e.chromosomesArray,r=0;r<s.length;r++)for(a=s[r].name,i=0;i<n.length;i++)(o=n[i]).chr===a&&t.push(o);return t}(n,this),function(t,e){var n,r=e.config.numAnnotTracks;r>10&&console.error("Ideogram only displays up to 10 tracks at a time.  You specified "+r+" tracks.  Perhaps consider a different way to visualize your data."),(n=Object.keys(t).length)&&console.warn("Ideogram configuration specified "+r+" tracks, but loaded annotations contain "+n+" extra tracks.")}(r,this),n}var Ao=ci.a.assign({},o,a);function Co(){var t=this.config;t.annotationsPath||t.localAnnotationsPath||this.annots||t.annotations?function(t,e){var n;e.annotationHeight||(n="heatmap"===e.annotationsLayout?e.chrWidth-1:Math.round(e.chrHeight/100),t.config.annotationHeight=n),t.config.numAnnotTracks=e.annotationTracks?e.annotationTracks.length:e.annotationsNumTracks?e.annotationsNumTracks:1,t.config.annotTracksHeight=e.annotationHeight*e.numAnnotTracks,void 0===e.barWidth&&(t.config.barWidth=3)}(this,t):this.config.annotTracksHeight=0,void 0===t.annotationsColor&&(this.config.annotationsColor="#F00"),function(t,e){!1!==e.showAnnotTooltip&&(t.config.showAnnotTooltip=!0),e.onWillShowAnnotTooltip&&(t.onWillShowAnnotTooltipCallback=e.onWillShowAnnotTooltip)}(this,t)}function To(t){t.rawAnnots.annots=t.rawAnnots.annots.sort((function(t,e){return ui(t.chr,e.chr)})),t.onLoadAnnotsCallback&&t.onLoadAnnotsCallback(),t.config.heatmaps&&t.deserializeAnnotsForHeatmap(t.rawAnnots)}function So(t){var e,n=this;"http"===t.slice(0,4)?(e=function(t){var e,n;return"bed"!==(n=(e=t.split("?")[0].split("."))[e.length-1])&&"json"!==n?(n=n.toUpperCase(),void alert("Ideogram.js only supports BED and Ideogram JSON at the moment.  Sorry, check back soon for "+n+" support!")):n}(t),Ao.text(t).then((function(t){n.rawAnnots="bed"===e?new Fi(t,n).rawAnnots:JSON.parse(t),To(n)}))):Ao.json(n.config.annotationsPath).then((function(t){n.rawAnnots=t,To(n)}))}function Mo(t){var e,n,r,i,o,a,s;for(e=[],n=[],r=this.chromosomesArray,i=0;i<r.length;i++)n.push(o=r[i].name),e.push({chr:o,annots:[]});for(i=0;i<t.length;i++)-1!==(s=n.indexOf((a=t[i]).chr))&&(e[s]=a);return e}var No=n(3),Do=ci.a.assign({},a,r);function Oo(t,e){var n,r,[n,r]=function(t,e){var n=t.genome;return"mitochondrion"===n?function(t,e){var n,r;return e.config.showNonNuclearChromosomes?(n=t.genome,[-1===(r=t.subtype.split("|").indexOf("plasmid"))?"MT":t.subname.split("|")[r],n]):[null,null]}(t,e):"chloroplast"===n||"plastid"===n?function(t){return t.config.showNonNuclearChromosomes?["CP","chloroplast"]:[null,null]}(e):"apicoplast"===n?function(t){return t.config.showNonNuclearChromosomes?["AP","apicoplast"]:[null,null]}(e):function(t){var e,n;return e=t.subtype.split("|").indexOf("chromosome"),void 0!==(n=t.subname.split("|")[e])&&"chr"===n.substr(0,3)&&(n=n.substr(3)),[n,"nuclear"]}(t)}(t,e);return{name:n,length:t.slen,type:r}}function Io(t,e){var n,r,i=[],o=this,a={callback:t,recovering:e,ideo:o};n=function(t){var e,n;return e=t.config.organism,n=t.assemblyIsAccession()?t.config.assembly+"%22[Assembly%20Accession]":e+"%22[organism]AND%20(%22latest%20refseq%22[filter])%20",t.esearch+"&db=assembly&term=%22"+n+"AND%20(%22chromosome%20level%22[filter]%20OR%20%22complete%20genome%22[filter])"}(o),Do.json(n).then((function(t){return function(t,e){return Do.json(e.esummary+"&db=assembly&id="+t.esearchresult.idlist[0])}(t,o)})).then((function(t){return[i,r]=function(t,e,n,r){var i,o,a,s;return a=(i=t.result[s=t.result.uids[0]]).gbuid,e.push(i.assemblyaccession),o=function(t,e,n,r){return Object(ci.e)(r)||void 0!==n?"&db=nuccore&linkname=gencoll_nuccore_chr&from_uid="+t:"&db=nuccore&linkname=assembly_nuccore_refseq&from_uid="+e}(a,s,n,r),[e,r.elink+o]}(t,i,e,o),Do.json(r)})).then((function(t){return function(t,e,n){var r;return function(t,e,n){var r=e[0];if(t.linksets[0].linksetdbs[0].links.length>100){if(void 0===n.recovering)return n.ideo.getAssemblyAndChromosomesFromEutils(n.callback,!0),Promise.reject("Unexpectedly found genomic scaffolds instead of chromosomes while querying RefSeq.  Recovering.");throw Error("Failed to find chromosomes for genome "+r)}}(t,e,n),r=t.linksets[0].linksetdbs[0].links.join(","),Do.json(n.ideo.esummary+"&db=nucleotide&id="+r)}(t,i,a)})).then((function(e){return i=function(t,e,n){var r,i,o=[];for(r in t)"uids"!==r&&(i=Oo(t[r],n),o.push(i));return o=o.sort(Ideogram.sortChromosomes),n.coordinateSystem="bp",e.push(o),e}(e.result,i,o),t(i)}),(function(t){console.warn(t)}))}var Po,Lo=ci.a.assign({},o);function Bo(){var t=this.bandsToShow.join(",");Lo.selectAll(this.selector+" .bandLabel, .bandLabelStalk").style("display","none"),Lo.selectAll(t).style("display","")}function jo(t,e,n,r,i){return e!==n&&(t=r[i.id][n]+36),t}function Fo(t,e,n,r,i,o,a){var s,l;return n<r+(a?e:i)?(e=i,s=o,l=!!a):t.push(o),[t,e,s,l]}function Ro(t,e){var n,r,i,o,a,s=[],l=t[e.id].length,u=0;for(n=0;n<l;n++)i=t[e.id][n],[s,u,r,a]=Fo(s,u,i,5,o,n,!0),a||(o=jo(o,r,n,t,e),[s,u,r,a]=Fo(s,u,i,5,o,n,!1));return s}function qo(t,e){var n,r,i,o,a,s;for(this.bandsToShow=[],n=0;n<t.length;n++){for(o=[],a=(r=Ro(e,i=t[n])).length,s=0;s<a;s++)o.push("#"+i.id+" .bsbsl-"+r[s]);this.bandsToShow=this.bandsToShow.concat(o)}}Po=[["gneg","#FFF","#FFF","#DDD"],["gpos25","#C8C8C8","#DDD","#BBB"],["gpos33","#BBB","#BBB","#AAA"],["gpos50","#999","#AAA","#888"],["gpos66","#888","#888","#666"],["gpos75","#777","#777","#444"],["gpos100","#444","#666","#000"],["acen","#FEE","#FEE","#FDD"],["noBands","#BBB","#BBB","#AAA"]];var Ho=ci.a.assign({},o);function $o(t,e,n,r){var i=this,o=i._layout,a=n.chrIndex;return t.selectAll("text").data(e).enter().append("g").attr("class",(function(t,e){return"bandLabel bsbsl-"+e})).attr("transform",(function(t){var e=o.getChromosomeBandLabelTranslate(t,a);return r[n.id].push("horizontal"===i.config.orientation?e.x+13:e.y+6),e.translate})).append("text").attr("text-anchor",o.getChromosomeBandLabelAnchor(a)).text((function(t){return t.name})),r}function Wo(t,e,n,r){var i=this;t.selectAll("line.bandLabelStalk").data(e).enter().append("g").attr("class",(function(t,e){return"bandLabelStalk bsbsl-"+e})).attr("transform",(function(t){var e;return e=i.round(t.px.start+t.px.width/2),r[n.id].push(e+13),"translate("+e+",-10)"})).append("line").attr("x1",0).attr("y1",i._layout.getChromosomeBandTickY1(n.chrIndex)).attr("x2",0).attr("y2",i._layout.getChromosomeBandTickY2(n.chrIndex))}function Uo(t){var e,n,r,i,o,a={};for(i=function(t){var e,n,r=[];for(e in t)for(n in t[e])r.push(t[e][n]);return r}(t),e=0;e<i.length;e++)n=Ho.select(this.selector+" #"+(r=i[e]).id),a[r.id]=[],o=r.bands.filter(t=>"pter"!==t.name),a=this.drawBandLabelText(n,o,r,a),this.drawBandLabelStalk(n,o,r,a);this.setBandsToShow(i,a)}function Vo(t,e){return[e[t][0],e[t][1],e[t][2],e[t][3]]}function Yo(){var t="";return t=function(t){var e,n,r,i,o,a="";for(e=0;e<t.length;e++)[n,r,i,o]=Vo(e,t),a+='<linearGradient id="'+n+'" x1="0%" y1="0%" x2="0%" y2="100%">',a+="gneg"===n?'<stop offset="70%" stop-color="'+i+'" /><stop offset="95%" stop-color="'+o+'" /><stop offset="100%" stop-color="'+r+'" />':'<stop offset="5%" stop-color="'+r+'" /><stop offset="15%" stop-color="'+i+'" /><stop offset="60%" stop-color="'+o+'" />',a+="</linearGradient>";return a}(Po),'<style>#_ideogram {padding-left: 5px;} #_ideogram .labeled {padding-left: 15px;} #_ideogram.labeledLeft {padding-left: 15px; padding-top: 15px;} #_ideogram text {font: 9px Tahoma; fill: #000;} #_ideogram .italic {font-style: italic;} #_ideogram .chromosome {cursor: pointer; fill: #AAA;}#_ideogram .chrSetLabel {font-weight: bolder;}#_ideogram .ghost {opacity: 0.2;}#_ideogram .hidden {display: none;}#_ideogram .bandLabelStalk line {stroke: #AAA; stroke-width: 1;}#_ideogram .syntenyBorder {stroke:#AAA;stroke-width:1;}#_ideogram .brush .selection {  fill: #F00;  stroke: #F00;  fill-opacity: .3;  shape-rendering: crispEdges;}#_ideogram .noBands {fill: #AAA;}#_ideogram .gneg {fill: #FFF}#_ideogram .gpos25 {fill: #BBB}#_ideogram .gpos33 {fill: #AAA}#_ideogram .gpos50 {fill: #888}#_ideogram .gpos66 {fill: #666}#_ideogram .gpos75 {fill: #444}#_ideogram .gpos100 {fill: #000}#_ideogram .gpos {fill: #000}#_ideogram .acen {fill: #FDD}#_ideogram .stalk {fill: #CCE;}#_ideogram .gvar {fill: #DDF}#_ideogram.faint .gneg {fill: #FFF}#_ideogram.faint .gpos25 {fill: #EEE}#_ideogram.faint .gpos33 {fill: #EEE}#_ideogram.faint .gpos50 {fill: #EEE}#_ideogram.faint .gpos66 {fill: #EEE}#_ideogram.faint .gpos75 {fill: #EEE}#_ideogram.faint .gpos100 {fill: #DDD}#_ideogram.faint .gpos {fill: #DDD}#_ideogram.faint .acen {fill: #FEE}#_ideogram.faint .stalk {fill: #EEF;}#_ideogram.faint .gvar {fill: #EEF}#_ideogram .gneg {fill: url("#gneg")} #_ideogram .gpos25 {fill: url("#gpos25")} #_ideogram .gpos33 {fill: url("#gpos33")} #_ideogram .gpos50 {fill: url("#gpos50")} #_ideogram .gpos66 {fill: url("#gpos66")} #_ideogram .gpos75 {fill: url("#gpos75")} #_ideogram .gpos100 {fill: url("#gpos100")} #_ideogram .gpos {fill: url("#gpos100")} #_ideogram .acen {fill: url("#acen")} #_ideogram .stalk {fill: url("#stalk")} #_ideogram .gvar {fill: url("#gvar")} #_ideogram .noBands {fill: url("#noBands")} #_ideogram .chromosome {fill: url("#noBands")} </style><defs>'+(t+='<pattern id="stalk" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#CCE" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#88B; stroke-width:0.7;" /></pattern><pattern id="gvar" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(-30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#DDF" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#99C; stroke-width:0.7;" /></pattern>')+"</defs>"}var Xo=n(4);function Go(t,e,n,r){var i,o;return n.push(i=e[t]),(o={iscn:i[i.length-1].iscn.stop,bp:i[i.length-1].bp.stop}).iscn>r.maxLength.iscn&&(r.maxLength.iscn=o.iscn),o.bp>r.maxLength.bp&&(r.maxLength.bp=o.bp),n}function Ko(t,e,n,r){var i,o;if("iscn"===r.coordinateSystem||r.config.multiorganism)n=function(t,e,n,r){var i,o;for(i=r.parseBands(r.bandData[t],t,e),e=Object.keys(i).sort((function(t,e){return ui(t,e)})),r.config.chromosomes[t]=e.slice(),r.numChromosomes+=r.config.chromosomes[t].length,o=0;o<e.length;o++)n=Go(e[o],i,n,r);return n}(t,e,n,r);else if("bp"===r.coordinateSystem)for(r.config.chromosomes[t]=e.slice(),r.numChromosomes+=r.config.chromosomes[t].length,o=0;o<e.length;o++)(i=e[o]).length>r.maxLength.bp&&(r.maxLength.bp=i.length);return n}function Zo(){var t,e,n,r,i,o,a=(new Date).getTime();t=[],[n,r]=function(t){var e,n,r;if(!0===t.config.multiorganism)for(t.coordinateSystem="bp",r=t.config.taxids,e=0;e<r.length;e++)n=r[e];else void 0===t.config.taxid&&(t.config.taxid=t.config.taxids[0]),r=[n=t.config.taxid],t.config.taxids=r;return[n,r]}(this),"chromosomes"in this.config&&(i=this.config.chromosomes),this.config.multiorganism&&(o=i),this.config.chromosomes={};for(e=0;e<r.length;e++)n=r[e],this.config.multiorganism&&(i=o[n]),t=Ko(n,i,t,this);return function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in processBandData: "+(n-t)+" ms")}(a,this),t}var Qo=ci.a.assign({},i,o);function Jo(){call(this.onBrushMoveCallback)}function ta(t,e,n){var r,i,a,s,l=this.config.chrWidth+6.5,u=this._layout.margin.left;[t,e,n]=function(t,e,n){var r,i;return r=t.split(":"),i=t.split("-"),r.length>1&&i.length>1&&(t=r[0].replace("chr",""),i=r[1].split("-"),e=parseInt(i[0]),n=parseInt(i[1]-1)),[t,e,n]}(t,e,n),r=function(t,e){var n,r;for(n=0;n<e.chromosomesArray.length;n++)if((r=e.chromosomesArray[n]).name===t)return r}(t,this),[a,s]=function(t,e){var n,r,i=[1],o=[1],a=t.bands.slice(-1)[0];for(r=0;r<t.bands.length;r++)i.push((n=t.bands[r]).bp.start),o.push(n.px.start+e);return i.push(a.bp.stop-1),o.push(a.px.stop+e),[i,o]}(r,u),i=r.bands.slice(-1)[0].bp.stop,void 0===e&&(e=Math.floor(i/10)),void 0===n&&(n=Math.ceil(2*e)),function(t,e,n,r,i){var a,s=i.config.chrHeight;a=Qo.scaleLinear().domain(t).range(e),i.brush=Qo.brushX().extent([[n,0],[s+n,r]]).on("brush",(function(){var t=o.event.selection.map(a.invert),e=Math.floor(t[0]),n=Math.ceil(t[1]);i.selectedRegion={from:e,to:n,extent:n-e},i.onBrushMove&&i.onBrushMoveCallback()}))}(a,s,u,l,this),function(t,e,n){n.selectedRegion={from:t,to:e,extent:e-t+1}}(e,n,this),function(t,e,n,r,i,o){var a,s,l;a=o.convertBpToPx(t,e)+r,s=o.convertBpToPx(t,n)+r,l=o._layout.getChromosomeSetYTranslate(0)+(o.config.chrWidth-i)/2,Qo.select(o.selector).append("g").attr("class","brush").attr("transform","translate(0, "+l+")").call(o.brush).call(o.brush.move,[a,s])}(r,e,n,u,l,this)}function ea(t,e){var n,r,i,o,a,s,l,u,c;for(n=this.bandsArray,i=this.config.chromosomes[r=this.config.taxid],a=(o="male"===this.config.sex?[1,0]:[0,0]).length,c=0;c<a;c++)s=i[u=o[c]+e],l=this.getChromosomeModel(n[r][u],s,r,u),this.appendHomolog(l,e,c,t)}function na(t){var e,n,r={X:1,Y:1};if(2===this.config.ploidy&&this.config.sex)for(this.sexChromosomes.list=[],n=0;n<t.length;n++)e=t[n],"male"===this.config.sex&&e in r?(this.sexChromosomes.list.push(e),this.sexChromosomes.index||(this.sexChromosomes.index=n)):"X"===e&&(this.sexChromosomes.list.push(e,e),this.sexChromosomes.index=n)}function ra(t,e){var n,r;if(t.bands.length>1){if([r,n]=function(t,e){var n,r,i,o,a,s,l;for(n=0;n<t.bands.length;n++)if(a=(r=t.bands[n]).bp.start,l=(s=r.bp.stop)-a,o=r.iscn.stop-(i=r.iscn.start),e>=a&&e<=s)return[r.px.start+r.px.width*(i+o/l*(e-a)-i)/o,r];return[null,r]}(t,e),null!==r)return r}else if(e>=1&&e<=t.length)return t.scale.bp*e;!function(t,e,n){throw new Error("Base pair out of range.  bp: "+t+"; length of chr"+e.name+": "+n.bp.stop)}(e,t,n)}function ia(t,e,n,r,i,o,a){return a=t-e,Math.round(o.bp.start+(o.bp.stop-o.bp.start)*(e+a/(r-i)*(n-i)-e)/a)}function oa(t,e){var n,r,i,o;for(0===e&&(e=t.bands[0].px.start),n=0;n<t.bands.length;n++)if(i=(r=t.bands[n]).px.start,o=r.px.stop,e>=i&&e<=o)return ia(r.iscn.stop,r.iscn.start,e,o,i,r,void 0);!function(t,e,n){throw new Error("Pixel out of range.  px: "+t+"; length of chr"+e.name+": "+n)}(e,t,o)}Qo.scaleLinear=zn,Qo.max=Qe;var aa=n(6),sa=Object.assign({},o);function la(){var t,e=[],n=this.annots;for(t=0;t<n.length;t++)e=e.concat(n[t].annots);return e}function ua(t){var e,n,r,i=[],o=this.annots;for(e in o)i.push({chr:o[e].chr,annots:[]});for(r=0;r<t.length;r++)i[(n=t[r]).chrIndex].annots.push(n);return i}function ca(){var t,e,n=this.rawAnnots.keys;for(this.unpackedAnnots=this.unpackAnnots(),this.crossfilter=aa(this.unpackedAnnots),this.annotsByFacet={},this.facets=n.slice(3,n.length),t=0;t<this.facets.length;t++)this.annotsByFacet[e=this.facets[t]]=this.crossfilter.dimension((function(t){return t[e]}));"filterSelections"in this&&this.filterAnnots(this.filterSelections)}function fa(t){var e,n,r,i=Date.now();for(this.filterSelections=t,[n,r]=function(t,e){var n,r,i,o,a={};if(0===Object.keys(t).length)o=e.unpackedAnnots;else{for(r=0;r<e.facets.length;r++)n=(i=e.facets[r])in t?function(e){return e in t[i]}:null,e.annotsByFacet[i].filter(n),a[i]=e.annotsByFacet[i].group().top(1/0);o=e.annotsByFacet[i].top(1/0)}return[o,a]}(t,this);e<this.facets.length;e++)this.annotsByFacet[void 0].filterAll();return n=this.packAnnots(n),delete this.maxAnnotsPerBar,delete this.maxAnnotsPerBarAllChrs,sa.selectAll(this.selector+" polygon.annot").remove(),this.drawAnnots(n),console.log("Time in filterAnnots: "+(Date.now()-i)+" ms"),r}function da(t){var e,n,r,i;return n=this.config.chrHeight,r=0,(i=void 0!==(e=t.bands))?[e,t,r]=function(t,e,n,r){for(var i,o,a,s=0,l=r.coordinateSystem,u=r.config.chrHeight,c=0;c<t.length;c++)o=(i=t[c])[l].stop-i[l].start,t[c].px={start:s,stop:s+(a=r._layout._isRotated?u*o/e.length:u*e.length/r.maxLength[l]*o/e.length),width:a},s=t[c].px.stop,n&&"acen"===i.stain&&"p"===i.name[0]&&(e.pcenIndex=c);return[t,e,s]}(e,t,i,this):r=n*t.length/this.maxLength[this.coordinateSystem],t.width=r,t.scale=function(t,e,n){var r=n.config.chrHeight,i=t.length,o=n.maxLength,a={};return!0===n.config.multiorganism?(a.bp=1,a.iscn=r*i/o.bp):(a.bp=r/o.bp,e&&(a.iscn=r/o.iscn)),a}(t,i,this),t.bands=e,t}function ha(t,e,n,r){var i,o={};return i=void 0!==t,(o=function(t,e,n,r){return void 0!==e?(t.name=n,t.length=e[e.length-1][r.coordinateSystem].stop,t.type="nuclear"):t=n,t}(o,t,e,this)).chrIndex=r,o.id="chr"+o.name+"-"+n,!0===this.config.fullChromosomeLabels&&(o.name=this.organisms[n].scientificNameAbbr+" chr"+o.name),o.bands=t,(o=this.getChromosomePixels(o)).centromerePosition=function(t,e){return t&&"p"===e[0].name[0]&&"q"===e[1].name[0]&&e[0].bp.stop-e[0].bp.start<2e6?"telocentric":""}(i,t),function(t,e){return e&&1===t.bands.length&&delete t.bands,t}(o,i)}class pa{constructor(t){this._model=t,this._class="ModelAdapter"}static getInstance(t){return t.bands?new pa(t):new ga(t)}getModel(){return this._model}getCssClass(){return""}}class ga extends pa{constructor(t){super(t),this._class="ModelNoBandsAdapter"}getModel(){return this._model.bands=[],this._model.width>1&&this._model.bands.push({name:"q",px:{start:0,stop:this._model.width,width:this._model.width},bp:{start:1,stop:this._model.length}}),this._model}getCssClass(){return"noBands"}}class va{constructor(t){this._config=t,this._ploidy=new gi(this._config)}getArmColor(t,e,n){return this._config.armColors?this._config.armColors[n]:this._config.ancestors?this._getPolyploidArmColor(t,e,n):null}getBorderColor(t,e,n){return e<this._config.ploidy||this._ploidy.exists(t,e,n)?"#000":"#fff"}_getPolyploidArmColor(t,e,n){if(this._ploidy.exists(t,e,n)){var r=this._ploidy.getAncestor(t,e,n);return this._config.ancestors[r]}return"transparent"}}class ma{constructor(t){this._data=t,this.start=t.start,this.stop=t.stop,this.length=this.stop-this.start}getColor(t){return"ploidy"in this._data?"ploidy"in this._data&&this._data.ploidy[t]?this._getColor(t):"transparent":this._getColor(t)}_getColor(t){return Array.isArray(this._data.color)?this._data.color[t]:this._data.color}}class ya{constructor(t,e,n){this._adapter=t,this._model=this._adapter.getModel(),this._config=e,this._ideo=n,this._color=new va(this._config),this._bumpCoefficient=5}static getInstance(t,e,n){return"telocentric"===t.getModel().centromerePosition?new ba(t,e,n):new _a(t,e,n)}_addPArmShape(t,e){return e?t.concat(this._getPArmShape()):t}_addQArmShape(t,e){return e?t.concat(this._getQArmShape()):t}render(t,e,n){var r,i,o,a,s,l,u;return r=this,t=t.append("g").attr("class","bands").attr("clip-path","url(#"+this._model.id+"-chromosome-set-clippath)"),i=this._renderArm(t,e,n,"p"),o=this._renderArm(t,e,n,"q"),this._renderRangeSet(t,e,n),a=this._addPArmShape(a=[],i),a=this._addQArmShape(a,o),s="0",l="",u=this.isFullyBanded(),"ancestors"in this._ideo.config&&!("rangeSet"in this._ideo.config)?(l=r._color.getArmColor(e,n,0),u&&(s="0.5")):u?(s=null,l="transparent"):"ancestors"in this._ideo.config||(s="1"),t.append("g").attr("class","chromosome-border").selectAll("path").data(a).enter().append("path").attr("fill",l).style("fill-opacity",s).attr("stroke",(function(t,i){return r._color.getBorderColor(e,n,i)})).attr("stroke-width",(function(t){return"strokeWidth"in t?t.strokeWidth:1})).attr("d",(function(t){return t.path})).attr("class",(function(t){return t.class})),a}_renderRangeSet(t,e,n){var r,i,o,a;"rangeSet"in this._config&&(i=this._config.rangeSet.filter((function(t){return t.chr-1===e})).map((function(t){return new ma(t)})),o=t.append("g").attr("class","range-set"),a=(r=this)._ideo,o.selectAll("rect.range").data(i).enter().append("rect").attr("class","range").attr("x",(function(t){return a.convertBpToPx(r._model,t.start)})).attr("y",0).attr("width",(function(t){return a.convertBpToPx(r._model,t.length)})).attr("height",this._config.chrWidth).style("fill",(function(t){return t.getColor(n)})))}_getShapeData(){var t,e,n;for(e=0;e<this._model.bands.length;e++)if("q"===this._model.bands[e].name[0]){t=this._model.bands[e];break}return n=this._model.bands[this._model.bands.length-1].px.stop,{x1:0,x2:t?t.px.start:n,x3:n,w:this._config.chrWidth,b:this._config.chrWidth/this._bumpCoefficient}}_getPArmShape(){var t=this._getShapeData(),e=t.x2-t.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+t.b+",0 L"+e+",0 Q"+(t.x2+t.b)+","+t.w/2+","+e+","+t.w+" L"+t.b+","+t.w+" Q-"+t.b+","+t.w/2+","+t.b+",0"}:[{class:"",path:"M"+t.b+",0 L"+(e-2)+",0 L"+(e-2)+","+t.w+" L"+t.b+","+t.w+" Q-"+t.b+","+t.w/2+","+t.b+",0"},{class:"acen",path:"M"+e+",0 Q"+(t.x2+t.b)+","+t.w/2+","+e+","+t.w+" L"+e+","+t.w+" L"+(e-2)+","+t.w+" L"+(e-2)+",0"}]}_getQArmShape(){var t=this._getShapeData(),e=t.x3-t.b,n=t.x2+t.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+n+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+n+","+t.w+" Q"+(t.x2-t.b)+","+t.w/2+","+n+",0"}:[{path:"M"+n+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+n+","+t.w+" L"+n+",0"},{class:"acen",path:"M"+n+",0Q"+(t.x2-t.b)+","+t.w/2+","+n+","+t.w+" L"+n+","+t.w+"L"+(n+2)+","+t.w+"L"+(n+2)+",0"}]}isFullyBanded(){return this._model.bands&&(2!==this._model.bands.length||"q"===this._model.bands[0].name[0])}_renderBands(t,e,n,r,i){var o,a,s;a="p"===i?0:1,s="","ancestors"in(o=this)._ideo.config&&!o.isFullyBanded()&&(s=o._color.getArmColor(e,n,a)),t.selectAll("path.band."+i).data(r).enter().append("path").attr("id",(function(t){return o._model.id+"-"+t.name.replace(".","-")})).attr("class",(function(t){return"band "+i+"-band "+t.stain})).attr("d",(function(t){var e;return"M "+o._ideo.round(t.px.start)+", 0l "+(e=o._ideo.round(t.px.width))+" 0 l 0 "+o._config.chrWidth+" l -"+e+" 0 z"})).style("fill",s)}_renderArm(t,e,n,r){var i=this._model.bands.filter((function(t){return t.name[0]===r}));return this._renderBands(t,e,n,i,r),Boolean(i.length)}}class _a extends ya{constructor(t,e,n){super(t,e,n),this._class="MetacentricChromosome"}}class ba extends ya{constructor(t,e,n){super(t,e,n),this._class="TelocentricChromosome",this._pArmOffset=3}_addPArmShape(t){return t.concat(this._getPArmShape())}_getPArmShape(){var t=this._getShapeData();return t.o=this._pArmOffset,[{class:"acen",path:"M"+(t.x2+2)+",1L"+(t.x2+t.o+3.25)+",1 L"+(t.x2+t.o+3.25)+","+(t.w-1)+" L"+(t.x2+2)+","+(t.w-1)},{class:"gpos66",path:"M"+(t.x2-t.o+5)+",0L"+(t.x2-t.o+3)+",0 L"+(t.x2-t.o+3)+","+t.w+" L"+(t.x2-t.o+5)+","+t.w,strokeWidth:.5}]}_getQArmShape(){var t=this._getShapeData(),e=t.x3-t.b,n=this._pArmOffset+3;return{class:"",path:"M"+(t.x2+n)+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+(t.x2+n)+","+t.w}}}var wa=Object.assign({},o);function xa(t,e,n,r){var i,o,a,s,l;s=wa.select(this.selector+" defs"),l=pa.getInstance(t),i=n*this.config.chrMargin,o=r.append("g").attr("id",t.id).attr("class","chromosome "+l.getCssClass()).attr("transform","translate(0, "+i+")"),a=ya.getInstance(l,this.config,this).render(o,e,n),wa.select("#"+t.id+"-chromosome-set-clippath").remove(),s.append("clipPath").attr("id",t.id+"-chromosome-set-clippath").selectAll("path").data(a).enter().append("path").attr("d",(function(t){return t.path})).attr("class",(function(t){return t.class}))}function ka(t){var e,n,r,i,o,a;if(i=this._layout.getChromosomeSetTranslate(e=t.chrIndex),wa.selectAll((a=this.selector+" #"+t.id+"-chromosome-set")+" g").remove(),0===(n=wa.select(a)).nodes().length&&(n=wa.select(this.selector).append("g").attr("class","chromosome-set-container").attr("data-set-number",e).attr("transform",i).attr("id",t.id+"-chromosome-set")),"sex"in this.config&&2===this.config.ploidy&&this.sexChromosomes.index===e)this.drawSexChromosomes(n,e);else for(r=1,this.config.ploidy>1&&(r=this._ploidy.getChromosomesNumber(e)),o=0;o<r;o++)this.appendHomolog(t,e,o,n)}function Ea(t){var e,n,r;this.config.taxid&&(e=t.id.split("-")[0].replace("chr",""),n=this.chromosomes[this.config.taxid][e].chrIndex,r=Number(wa.select(t.parentNode).attr("data-set-number")),this._layout.rotate(r,n,t))}function za(){var t,e,n,r,i,o,a;i=wa.select((t=this.config).container+" svg#_ideogram"),n=wa.select(t.container+" #_ideogramInnerWrap"),r=wa.select(t.container+" #_ideogramMiddleWrap"),a=(o=t.ploidy)-1,"vertical"===t.orientation&&"comparative"!==t.perspective&&(e=(this.numChromosomes+2)*(t.chrWidth+t.chrMargin+a),e=Math.round(e*o/t.rows),"SmallLayout"===this._layout._class&&(e+=40),r.style("height",this._layout.getHeight()+"px"),n.style("max-width",e+"px").style("overflow-x","scroll").style("position","absolute"),i.style("min-width",e-5+"px"))}var Aa=Object.assign({},o);function Ca(){(function(t){var e=t._layout;Aa.selectAll(t.selector+" .chromosome-set-container").insert("text",":first-child").data(t.chromosomesArray).attr("class",e.getChromosomeLabelClass()).attr("transform",e.getChromosomeSetLabelTranslate()).attr("x",e.getChromosomeSetLabelXPosition()).attr("y",(function(t,n){return e.getChromosomeSetLabelYPosition(n)})).attr("text-anchor",e.getChromosomeSetLabelAnchor()).each((function(e,n){!function(t,e,n,r){var i=function(t,e,n){var r;return r=-1===t.name.indexOf(" ")?[t.name]:t.name.match(/^(.*)\s+([^\s]+)$/).slice(1).reverse(),"sex"in n.config&&2===n.config.ploidy&&e===n.sexChromosomes.index&&(r="male"===n.config.sex?["XY"]:["XX"]),r}(t,e,r);Aa.select(n).selectAll("tspan").data(i).enter().append("tspan").attr("dy",(function(t,e){return-1.2*e+"em"})).attr("x",r._layout.getChromosomeSetLabelXPosition()).attr("class",(function(t,e){return 1===e&&r.config.fullChromosomeLabels?"italic":null})).text(String)}(e,n,this,t)}))})(this),function(t){var e=t._layout;Aa.selectAll(t.selector+" .chromosome-set-container").each((function(n,r){Aa.select(this).selectAll(".chromosome").append("text").attr("class","chrLabel").attr("transform",e.getChromosomeSetLabelTranslate()).attr("x",(function(t,n){return e.getChromosomeLabelXPosition(n)})).attr("y",(function(t,n){return e.getChromosomeLabelYPosition(n)})).text((function(e,n){return t._ploidy.getAncestor(r,n)})).attr("text-anchor","middle")}))}(this)}function Ta(t,e,n,r){var i;e-=1,i=function(t){var e,n,r;return void 0===t||!t.hasOwnProperty("x")||1===t.x&&1===t.y?(e=-8,n=-16,t={x:1,y:1},r=""):(r="scale("+t.x+","+t.y+")",e=-6,n=""===t?-16:-14),{x:e,y:n,scaleSvg:r,scale:t}}(r),"vertical"===n||""===n?function(t,e,n,r){var i,o,a,s=r.config;e=function(t,e){return(e.numAnnotTracks>1||""===e.orientation)&&(t-=1),t}(e,s),i=-4,!0===s.showBandLabels&&(i=s.chrMargin+s.chrWidth+26),o=s.chrMargin*e,s.numAnnotTracks>1==0&&(o+=1),a=o+i,t.selectAll("text.chrLabel").attr("transform",n.scaleSvg).selectAll("tspan").attr("x",n.x).attr("y",a)}(t,e,i,this):function(t,e,n,r){var i,o,a,s=r.config;i=-s.chrWidth-2,!0===s.showBandLabels&&(i=s.chrMargin+8),o=s.annotTracksHeight,"overlay"!==s.annotationsLayout&&(o*=2),a=3-(s.chrMargin*e+i)+o,a/=n.scale.x,t.selectAll("text.chrLabel").attr("transform","rotate(-90)"+n.scaleSvg).selectAll("tspan").attr("x",a).attr("y",n.y)}(t,e,i,this)}var Sa=ci.a.assign({},o,a,i,r);Sa.scaleLinear=zn,Sa.max=Qe;class Ma{constructor(t){this.configure=fi,this.initDrawChromosomes=Oi,this.onLoad=Pi,this.handleRotateOnClick=Ii,this.init=ji,this.finishInit=pi,this.writeContainer=Ci,this.onLoadAnnots=Qi,this.onDrawAnnots=Ji,this.processAnnotData=zo,this.restoreDefaultTracks=yo,this.updateDisplayedTracks=_o,this.initAnnotSettings=Co,this.fetchAnnots=So,this.drawAnnots=lo,this.getHistogramBars=ro,this.drawHeatmaps=Vi,this.deserializeAnnotsForHeatmap=Ki,this.fillAnnots=Mo,this.drawProcessedAnnots=uo,this.drawSynteny=vo,this.startHideAnnotTooltipTimeout=to,this.showAnnotTooltip=no,this.onWillShowAnnotTooltip=eo,this.setOriginalTrackIndexes=bo,this.esearch="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?retmode=json&api_key=7e33ac6a08a6955ec3b83d214d22b21a2808",this.esummary="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?retmode=json&api_key=7e33ac6a08a6955ec3b83d214d22b21a2808",this.elink="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/elink.fcgi?retmode=json&api_key=7e33ac6a08a6955ec3b83d214d22b21a2808",this.getTaxidFromEutils=No.b,this.setTaxidData=No.e,this.setTaxidAndAssemblyAndChromosomes=No.d,this.getOrganismFromEutils=No.a,this.getTaxids=No.c,this.getAssemblyAndChromosomesFromEutils=Io,this.parseBands=Xo.a,this.drawBandLabels=Uo,this.getBandColorGradients=Yo,this.processBandData=Zo,this.setBandsToShow=qo,this.hideUnshownBandLabels=Bo,this.drawBandLabelText=$o,this.drawBandLabelStalk=Wo,this.onBrushMove=Jo,this.createBrush=ta,this.drawSexChromosomes=ea,this.setSexChromosomes=na,this.convertBpToPx=ra,this.convertPxToBp=oa,this.unpackAnnots=la,this.packAnnots=ua,this.initCrossFilter=ca,this.filterAnnots=fa,this.assemblyIsAccession=ci.b,this.getDataDir=ci.c,this.round=ci.h,this.onDidRotate=ci.g,this.getSvg=ci.d,this.getChromosomeModel=ha,this.getChromosomePixels=da,this.drawChromosomeLabels=Ca,this.rotateChromosomeLabels=Ta,this.appendHomolog=xa,this.drawChromosome=ka,this.rotateAndToggleDisplay=Ea,this.setOverflowScroll=za,this.configure(t)}static get version(){return"1.4.1"}static get d3(){return Sa}static slugify(t){return t.toLowerCase().replace(" ","-")}static sortChromosomes(t,e){var n="nuclear"===t.type,r="nuclear"===e.type,i="chloroplast"===t.type,o="chloroplast"===e.type,a="mitochondrion"===t.type,s="mitochondrion"===e.type,l="apicoplast"===t.type,u="apicoplast"===e.type;return n&&r?ui(t.name,e.name):!n&&r||a&&o?1:i&&s?-1:l||a||i||!(s||o||u)?void 0:-1}}window.Ideogram=Ma,e.default=Ma}])})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).cytoscape=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o="undefined"==typeof window?null:window,a=o?o.navigator:null,s=t(""),l=t({}),u=t((function(){})),c="undefined"==typeof HTMLElement?"undefined":t(HTMLElement),f=function(t){return t&&t.instanceString&&h(t.instanceString)?t.instanceString():null},d=function(e){return null!=e&&t(e)==s},h=function(e){return null!=e&&t(e)===u},p=function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},g=function(e){return null!=e&&t(e)===l&&!p(e)&&e.constructor===Object},v=function(e){return null!=e&&t(e)===t(1)&&!isNaN(e)},m=function(t){return"undefined"===c?void 0:null!=t&&t instanceof HTMLElement},y=function(t){return _(t)||b(t)},_=function(t){return"collection"===f(t)&&t._private.single},b=function(t){return"collection"===f(t)&&!t._private.single},w=function(t){return"core"===f(t)},x=function(t){return"stylesheet"===f(t)},k=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},E=function(e){return function(e){return null!=e&&t(e)===l}(e)&&h(e.then)},z=function(){return a&&a.userAgent.match(/msie|trident|edge/i)},A=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=arguments,o=e.apply(this,i),a=n.cache;return(r=a[o])||(r=a[o]=t.apply(this,i)),r};return n.cache={},n},C=A((function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))})),T=A((function(t){return t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))})),S=A((function(t,e){return t+e[0].toUpperCase()+e.substring(1)}),(function(t,e){return t+"$"+e})),M=function(t){return k(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},N="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",D=function(t,e){return t<e?-1:t>e?1:0},O=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},I=function(t){return(p(t)?t:null)||function(t){return P[t.toLowerCase()]}(t)||function(t){var e,n,r;if((4===t.length||7===t.length)&&"#"===t[0])return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}(t)||function(t){var e,n=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}if((r[1]||r[2]||r[3])&&!(r[1]&&r[2]&&r[3]))return;var a=n[4];if(void 0!==a){if((a=parseFloat(a))<0||a>1)return;e.push(a)}}return e}(t)||function(t){var e,n,r,i,o,a,s,l;function u(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var c=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=l=Math.round(255*i);else{var f=i<.5?i*(1+r):i+r-i*r,d=2*i-f;a=Math.round(255*u(d,f,n+1/3)),s=Math.round(255*u(d,f,n)),l=Math.round(255*u(d,f,n-1/3))}e=[a,s,l,o]}return e}(t)},P={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},L=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(g(o))throw Error("Tried to set map with object key");i<n.length-1?(null==e[o]&&(e[o]={}),e=e[o]):e[o]=t.value}},B=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(g(o))throw Error("Tried to get map with object key");if(null==(e=e[o]))return e}return e},j="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},F=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,q=/^0b[01]+$/i,H=/^0o[0-7]+$/i,$=parseInt,W="object"==typeof self&&self&&self.Object===Object&&self,U="object"==typeof j&&j&&j.Object===Object&&j||W||Function("return this")(),V=Object.prototype.toString,Y=Math.max,X=Math.min,G=function(){return U.Date.now()};function K(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Z(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==V.call(t)}(t))return NaN;if(K(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=K(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(F,"");var n=q.test(t);return n||H.test(t)?$(t.slice(2),n?2:8):R.test(t)?NaN:+t}var Q=function(t,e,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-u>=o}function g(){var t=G();if(p(t))return v(t);s=setTimeout(g,function(t){var n=e-(t-l);return f?X(n,o-(t-u)):n}(t))}function v(t){return s=void 0,d&&r?h(t):(r=i=void 0,a)}function m(){var t=G(),n=p(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return function(t){return u=t,s=setTimeout(g,e),c?h(t):a}(l);if(f)return s=setTimeout(g,e),h(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=Z(e)||0,K(n)&&(c=!!n.leading,o=(f="maxWait"in n)?Y(Z(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},m.flush=function(){return void 0===s?a:v(G())},m},J=o?o.performance:null,tt=J&&J.now?function(){return J.now()}:function(){return Date.now()},et=function(){if(o){if(o.requestAnimationFrame)return function(t){o.requestAnimationFrame(t)};if(o.mozRequestAnimationFrame)return function(t){o.mozRequestAnimationFrame(t)};if(o.webkitRequestAnimationFrame)return function(t){o.webkitRequestAnimationFrame(t)};if(o.msRequestAnimationFrame)return function(t){o.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(tt())}),1e3/60)}}(),nt=function(t){return et(t)},rt=tt,it=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;!(e=t.next()).done;)n=33*n^e.value;return n>>>0},ot=function(t){return(33*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381)^t)>>>0},at=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return it({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},e)},st=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return it({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},lt=function(){return ut(arguments)},ut=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?st(r):st(r,e)}return e},ct=!0,ft=null!=console.warn,dt=null!=console.trace,ht=Number.MAX_SAFE_INTEGER||9007199254740991,pt=function(){return!0},gt=function(){return!1},vt=function(){return 0},mt=function(){},yt=function(t){throw new Error(t)},_t=function(t){if(void 0===t)return ct;ct=!!t},bt=function(t){_t()&&(ft?console.warn(t):(console.log(t),dt&&console.trace()))},wt=function(t){return null==t?t:p(t)?t.slice():g(t)?function(t){return O({},t)}(t):t},xt=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},kt={},Et=function(){return kt},zt=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=null==n?void 0:n[o];r[o]=void 0===a?t[o]:a}return r}},At=function(t,e,n){for(var r=t.length;r>=0&&(t[r]!==e||(t.splice(r,1),n));r--);},Ct=function(t){t.splice(0,t.length)},Tt=function(t,e,n){return n&&(e=S(n,e)),t[e]},St=function(t,e,n,r){n&&(e=S(n,e)),t[e]=r},Mt="undefined"!=typeof Map?Map:function(){function t(){e(this,t),this._obj={}}return r(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),Nt=function(){function t(n){if(e(this,t),this._obj=Object.create(null),this.size=0,null!=n){var r;r=null!=n.instanceString&&n.instanceString()===this.instanceString()?n.toArray():n;for(var i=0;i<r.length;i++)this.add(r[i])}}return r(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter((function(e){return t.has(e)}))}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Dt="undefined"!==("undefined"==typeof Set?"undefined":t(Set))?Set:Nt,Ot=function(t,e,n){if(n=!(void 0!==n&&!n),void 0!==t&&void 0!==e&&w(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,active:!1,classes:new Dt,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var o=e.renderedPosition,a=t.pan(),s=t.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var l=[];p(e.classes)?l=e.classes:d(e.classes)&&(l=e.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var f=l[u];f&&""!==f&&i.classes.add(f)}this.createEmitter();var h=e.style||e.css;h&&(bt("Setting a `style` bypass at element creation is deprecated"),this.style(h)),(void 0===n||n)&&this.restore()}else yt("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else yt("An element must have a core reference and parameters set")},It=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;g(e)&&!y(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||h(n)?r:n,n=h(n)?n:function(){};for(var o,a=this._private.cy,s=e=d(e)?this.filter(e):e,l=[],u=[],c={},f={},p={},v=0,m=this.byGroup(),_=m.nodes,b=m.edges,w=0;w<s.length;w++){var x=s[w],k=x.id();x.isNode()&&(l.unshift(x),t.bfs&&(p[k]=!0,u.push(x)),f[k]=0)}var E=function(){var e=t.bfs?l.shift():l.pop(),i=e.id();if(t.dfs){if(p[i])return"continue";p[i]=!0,u.push(e)}var a,s=f[i],d=c[i],h=null!=d?d.source():null,g=null!=d?d.target():null,m=null==d?void 0:e.same(h)?g[0]:h[0];if(!0===(a=n(e,d,m,v++,s)))return o=e,"break";if(!1===a)return"break";for(var y=e.connectedEdges().filter((function(t){return(!r||t.source().same(e))&&b.has(t)})),w=0;w<y.length;w++){var x=y[w],k=x.connectedNodes().filter((function(t){return!t.same(e)&&_.has(t)})),E=k.id();0===k.length||p[E]||(l.push(k=k[0]),t.bfs&&(p[E]=!0,u.push(k)),c[E]=x,f[E]=f[i]+1)}};t:for(;0!==l.length;)switch(E()){case"continue":continue;case"break":break t}for(var z=a.collection(),A=0;A<u.length;A++){var C=u[A],T=c[C.id()];null!=T&&z.merge(T),z.merge(C)}return{path:a.collection(z),found:a.collection(o)}}},Pt={breadthFirstSearch:It({bfs:!0}),depthFirstSearch:It({dfs:!0})};Pt.bfs=Pt.breadthFirstSearch,Pt.dfs=Pt.depthFirstSearch;var Lt=function(t,e){return function(t,e){(function(){var e,n,r,i,o,a,s,l,u,c,f,d,h,p,g;r=Math.floor,c=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},u=function(t,e,i,o,a){var s;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)a(e,t[s=r((i+o)/2)])<0?o=s:i=s+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),p(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,g(t,0,e)):i=r,i},l=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,g(t,0,r),i},s=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(e=(i=[t[0],e])[0],t[0]=i[1],g(t,0,r)),e},i=function(t,e){var i,o,a,s,l;for(null==e&&(e=n),s=[],i=0,o=(a=(function(){l=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)l.push(e);return l}).apply(this).reverse()).length;i<o;i++)s.push(g(t,a[i],e));return s},h=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return p(t,0,i,r),g(t,i,r)},f=function(t,e,r){var o,a,l,u;if(null==r&&(r=n),!(o=t.slice(0,e)).length)return o;for(i(o,r),a=0,l=(u=t.slice(e)).length;a<l;a++)s(o,u[a],r);return o.sort(r).reverse()},d=function(t,e,r){var a,s,l,f,d,h,p,g,v;if(null==r&&(r=n),10*e<=t.length){if(!(l=t.slice(0,e).sort(r)).length)return l;for(s=l[l.length-1],f=0,h=(p=t.slice(e)).length;f<h;f++)r(a=p[f],s)<0&&(u(l,a,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(t,r),v=[],d=0,g=c(e,t.length);0<=g?d<g:d>g;0<=g?++d:--d)v.push(o(t,r));return v},p=function(t,e,r,i){var o,a,s;for(null==i&&(i=n),o=t[r];r>e&&i(o,a=t[s=r-1>>1])<0;)t[r]=a,r=s;return t[r]=o},g=function(t,e,r){var i,o,a,s,l;for(null==r&&(r=n),o=t.length,l=e,a=t[e],i=2*e+1;i<o;)(s=i+1)<o&&!(r(t[i],t[s])<0)&&(i=s),t[e]=t[i],i=2*(e=i)+1;return t[e]=a,p(t,l,e,r)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=l,t.pushpop=s,t.heapify=i,t.updateItem=h,t.nlargest=f,t.nsmallest=d,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return h(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),t.exports=e}).call(j)}(e={exports:{}}),e.exports}(),Bt=zt({root:null,weight:function(t){return 1},directed:!1}),jt={dijkstra:function(t){if(!g(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=Bt(t),r=n.root,i=n.weight,o=n.directed,a=this,s=i,l=d(r)?this.filter(r)[0]:r[0],u={},c={},f={},h=this.byGroup(),p=h.nodes,v=h.edges;v.unmergeBy((function(t){return t.isLoop()}));for(var m=function(t){return u[t.id()]},y=function(t,e){u[t.id()]=e,_.updateItem(t)},_=new Lt((function(t,e){return m(t)-m(e)})),b=0;b<p.length;b++){var w=p[b];u[w.id()]=w.same(l)?0:1/0,_.push(w)}for(var x=function(t,e){for(var n,r=(o?t.edgesTo(e):t.edgesWith(e)).intersect(v),i=1/0,a=0;a<r.length;a++){var l=r[a],u=s(l);(u<i||!n)&&(i=u,n=l)}return{edge:n,dist:i}};_.size()>0;){var k=_.pop(),E=m(k),z=k.id();if(f[z]=E,E!==1/0)for(var A=k.neighborhood().intersect(p),C=0;C<A.length;C++){var T=A[C],S=T.id(),M=x(k,T),N=E+M.dist;N<m(T)&&(y(T,N),c[S]={node:k,edge:M.edge})}}return{distanceTo:function(t){var e=d(t)?p.filter(t)[0]:t[0];return f[e.id()]},pathTo:function(t){var e=d(t)?p.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);c[i];){var o=c[i];n.unshift(o.edge),n.unshift(o.node),i=(r=o.node).id()}return a.spawn(n)}}}},Ft={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,o=new Array(i),a=n,s=function(t){for(var e=0;e<o.length;e++)if(o[e].has(t))return e},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var u=r.sort((function(e,n){return t(e)-t(n)})),c=0;c<u.length;c++){var f=u[c],d=f.source()[0],h=f.target()[0],p=s(d),g=s(h),v=o[p],m=o[g];p!==g&&(a.merge(f),v.merge(m),o.splice(g,1))}return a}},Rt=zt({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),qt={aStar:function(t){var e=this.cy(),n=Rt(t),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,s=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var l,u,c=r.id(),f=i.id(),d={},h={},p={},g=new Lt((function(t,e){return h[t.id()]-h[e.id()]})),v=new Dt,m={},y={},_=function(t,e){g.push(t),v.add(e)};_(r,c),d[c]=0,h[c]=o(r);for(var b=0;g.size()>0;){if(u=(l=g.pop()).id(),v.delete(u),b++,u===f){for(var w=[],x=i,k=f,E=y[k];w.unshift(x),null!=E&&w.unshift(E),null!=(x=m[k]);)E=y[k=x.id()];return{found:!0,distance:d[u],path:this.spawn(w),steps:b}}p[u]=!0;for(var z=l._private.edges,A=0;A<z.length;A++){var C=z[A];if(this.hasElementWithId(C.id())&&(!a||C.data("source")===u)){var T=C.source(),S=C.target(),M=T.id()!==u?T:S,N=M.id();if(this.hasElementWithId(N)&&!p[N]){var D=d[u]+s(C);v.has(N)?D<d[N]&&(d[N]=D,h[N]=D+o(M),m[N]=l):(d[N]=D,h[N]=D+o(M),_(M,N),m[N]=l,y[N]=C)}}}}return{found:!1,distance:void 0,path:void 0,steps:b}}},Ht=zt({weight:function(t){return 1},directed:!1}),$t={floydWarshall:function(t){for(var e=this.cy(),n=Ht(t),r=n.directed,i=n.weight,o=this.byGroup(),a=o.nodes,s=o.edges,l=a.length,u=l*l,c=function(t){return a.indexOf(t)},f=function(t){return a[t]},h=new Array(u),p=0;p<u;p++){var g=p%l;h[p]=(p-g)/l===g?0:1/0}for(var v=new Array(u),m=new Array(u),y=0;y<s.length;y++){var _=s[y],b=_.source()[0],w=_.target()[0];if(b!==w){var x=c(b),k=c(w),E=x*l+k,z=i(_);if(h[E]>z&&(h[E]=z,v[E]=k,m[E]=_),!r){var A=k*l+x;!r&&h[A]>z&&(h[A]=z,v[A]=x,m[A]=_)}}}for(var C=0;C<l;C++)for(var T=0;T<l;T++)for(var S=T*l+C,M=0;M<l;M++){var N=T*l+M,D=C*l+M;h[S]+h[D]<h[N]&&(h[N]=h[S]+h[D],v[N]=v[S])}var O=function(t){return c(function(t){return(d(t)?e.filter(t):t)[0]}(t))};return{distance:function(t,e){var n=O(t),r=O(e);return h[n*l+r]},path:function(t,n){var r=O(t),i=O(n),o=f(r);if(r===i)return o.collection();if(null==v[r*l+i])return e.collection();var a=e.collection();for(a.merge(o);r!==i;)a.merge(m[r*l+(r=v[r*l+i])]),a.merge(f(r));return a}}}},Wt=zt({weight:function(t){return 1},directed:!1,root:null}),Ut={bellmanFord:function(t){var e=this,n=Wt(t),r=n.directed,i=n.root,o=n.weight,a=this,s=this.cy(),l=this.byGroup(),u=l.edges,c=l.nodes,f=c.length,h=new Mt,p=!1;i=s.collection(i)[0],u.unmergeBy((function(t){return t.isLoop()}));for(var g=u.length,v=function(t){var e=h.get(t.id());return e||(e={},h.set(t.id(),e)),e},m=function(t){return(d(t)?s.$(t):t)[0]},y=0;y<f;y++){var _=c[y],b=v(_);b.dist=_.same(i)?0:1/0,b.pred=null,b.edge=null}for(var w=!1,x=function(t,e,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=t,i.edge=n,w=!0)},k=1;k<f;k++){w=!1;for(var E=0;E<g;E++){var z=u[E],A=z.source(),C=z.target(),T=o(z),S=v(A),M=v(C);x(A,0,z,S,M,T),r||x(C,0,z,M,S,T)}if(!w)break}if(w)for(var N=0;N<g;N++){var D=u[N],O=D.source(),I=D.target(),P=o(D),L=v(O).dist,B=v(I).dist;if(L+P<B||!r&&B+P<L){bt("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:function(t){return v(m(t)).dist},pathTo:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=[],o=m(t);;){if(null==o)return e.spawn();var s=v(o),l=s.edge,u=s.pred;if(r.unshift(o[0]),o.same(n)&&r.length>0)break;null!=l&&r.unshift(l),o=u}return a.spawn(r)},hasNegativeWeightCycle:p,negativeWeightCycles:[]}}},Vt=Math.sqrt(2),Yt=function(t,e,n){0===n.length&&yt("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=e[r[1]],o=e[r[2]],a=n,s=a.length-1;s>=0;s--){var l=a[s],u=l[1],c=l[2];(e[u]===i&&e[c]===o||e[u]===o&&e[c]===i)&&a.splice(s,1)}for(var f=0;f<a.length;f++){var d=a[f];d[1]===o?(a[f]=d.slice(),a[f][1]=i):d[2]===o&&(a[f]=d.slice(),a[f][2]=i)}for(var h=0;h<e.length;h++)e[h]===o&&(e[h]=i);return a},Xt=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=Yt(i,t,e),n--}return e},Gt={kargerStein:function(){var t=this.byGroup(),e=t.nodes,n=t.edges;n.unmergeBy((function(t){return t.isLoop()}));var r=e.length,i=n.length,o=Math.ceil(Math.pow(Math.log(r)/Math.LN2,2)),a=Math.floor(r/Vt);if(!(r<2)){for(var s=[],l=0;l<i;l++){var u=n[l];s.push([l,e.indexOf(u.source()),e.indexOf(u.target())])}for(var c=1/0,f=[],d=new Array(r),h=new Array(r),p=new Array(r),g=function(t,e){for(var n=0;n<r;n++)e[n]=t[n]},v=0;v<=o;v++){for(var m=0;m<r;m++)h[m]=m;var y=Xt(h,s.slice(),r,a),_=y.slice();g(h,p);var b=Xt(h,y,a,2),w=Xt(p,_,a,2);b.length<=w.length&&b.length<c?(c=b.length,f=b,g(h,d)):w.length<=b.length&&w.length<c&&(c=w.length,f=w,g(p,d))}for(var x=this.spawn(f.map((function(t){return n[t[0]]}))),k=this.spawn(),E=this.spawn(),z=d[0],A=0;A<d.length;A++){var C=e[A];d[A]===z?k.merge(C):E.merge(C)}return{cut:x,partition1:k,partition2:E}}yt("At least 2 nodes are required for Karger-Stein algorithm")}},Kt=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},Zt=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},Qt=function(t){return{x:t[0],y:t[1]}},Jt=function(t,e){return Math.atan2(e,t)-Math.PI/2},te=Math.log2||function(t){return Math.log(t)/Math.log(2)},ee=function(t){return t>0?1:t<0?-1:0},ne=function(t,e){return Math.sqrt(re(t,e))},re=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},ie=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},oe=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},ae=function(t,e,n,r){return{x:oe(t.x,e.x,n.x,r),y:oe(t.y,e.y,n.y,r)}},se=function(t,e,n){return Math.max(t,Math.min(n,e))},le=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},ue=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},ce=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},fe=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},de=function(t,e){t.x1+=e.x,t.x2+=e.x,t.y1+=e.y,t.y2+=e.y},he=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},pe=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},ge=function(t,e){return pe(t,e.x1,e.y1)&&pe(t,e.x2,e.y2)},ve=function(t,e,n,r,i,o,a){var s,l=Ie(i,o),u=i/2,c=o/2,f=r-c-a;if((s=Te(t,e,n,r,n-u+l-a,f,n+u-l+a,f,!1)).length>0)return s;var d=n+u+a;if((s=Te(t,e,n,r,d,r-c+l-a,d,r+c-l+a,!1)).length>0)return s;var h=r+c+a;if((s=Te(t,e,n,r,n-u+l-a,h,n+u-l+a,h,!1)).length>0)return s;var p,g=n-u-a;if((s=Te(t,e,n,r,g,r-c+l-a,g,r+c-l+a,!1)).length>0)return s;var v=n-u+l,m=r-c+l;if((p=Ae(t,e,n,r,v,m,l+a)).length>0&&p[0]<=v&&p[1]<=m)return[p[0],p[1]];var y=n+u-l,_=r-c+l;if((p=Ae(t,e,n,r,y,_,l+a)).length>0&&p[0]>=y&&p[1]<=_)return[p[0],p[1]];var b=n+u-l,w=r+c-l;if((p=Ae(t,e,n,r,b,w,l+a)).length>0&&p[0]>=b&&p[1]>=w)return[p[0],p[1]];var x=n-u+l,k=r+c-l;return(p=Ae(t,e,n,r,x,k,l+a)).length>0&&p[0]<=x&&p[1]>=k?[p[0],p[1]]:[]},me=function(t,e,n,r,i,o,a){var s=a,l=Math.min(n,i),u=Math.max(n,i),c=Math.min(r,o),f=Math.max(r,o);return l-s<=t&&t<=u+s&&c-s<=e&&e<=f+s},ye=function(t,e,n,r,i,o,a,s,l){var u=Math.min(n,a,i)-l,c=Math.max(n,a,i)+l,f=Math.min(r,s,o)-l,d=Math.max(r,s,o)+l;return!(t<u||t>c||e<f||e>d)},_e=function(t,e,n,r,i,o,a,s){var l=[];!function(t,e,n,r,i){var o,a,s,l,u,c,f,d;s=-27*(r/=t)+(e/=t)*(9*(n/=t)-e*e*2),o=(a=(3*n-e*e)/9)*a*a+(s/=54)*s,i[1]=0,f=e/3,o>0?(u=(u=s+Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-f+u+c,i[4]=i[2]=-(f+=(u+c)/2),f=Math.sqrt(3)*(-c+u)/2,i[3]=f,i[5]=-f):(i[5]=i[3]=0,0===o?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-f,i[4]=i[2]=-(d+f)):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),i[0]=-f+d*Math.cos(l/3),i[2]=-f+d*Math.cos((l+2*Math.PI)/3),i[4]=-f+d*Math.cos((l+4*Math.PI)/3)))}(1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var f,d,h,p=-1,g=0;g<u.length;g++)f=Math.pow(1-u[g],2)*n+2*(1-u[g])*u[g]*i+u[g]*u[g]*a,d=Math.pow(1-u[g],2)*r+2*(1-u[g])*u[g]*o+u[g]*u[g]*s,h=Math.pow(f-t,2)+Math.pow(d-e,2),p>=0?h<p&&(p=h):p=h;return p},be=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],f=c*c/l;return c<0?u:f>l?(t-i)*(t-i)+(e-o)*(e-o):u-f},we=function(t,e,n){for(var r,i,o,a,s=0,l=0;l<n.length/2;l++)if(i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),(r=n[2*l])==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(a-i)+i>e&&s++}return s%2!=0},xe=function(t,e,n,r,i,o,a,s,l){var u,c=new Array(n.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var f,d=Math.cos(-u),h=Math.sin(-u),p=0;p<c.length/2;p++)c[2*p]=o/2*(n[2*p]*d-n[2*p+1]*h),c[2*p+1]=a/2*(n[2*p+1]*d+n[2*p]*h),c[2*p]+=r,c[2*p+1]+=i;if(l>0){var g=Ee(c,-l);f=ke(g)}else f=c;return we(t,e,f)},ke=function(t){for(var e,n,r,i,o=new Array(t.length/2),a=0;a<t.length/4;a++){a<t.length/4-1?(e=t[4*(a+1)],n=t[4*(a+1)+1],r=t[4*(a+1)+2],i=t[4*(a+1)+3]):(e=t[0],n=t[1],r=t[2],i=t[3]);var s=Te(t[4*a],t[4*a+1],t[4*a+2],t[4*a+3],e,n,r,i,!0);o[2*a]=s[0],o[2*a+1]=s[1]}return o},Ee=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var l=o-(r=t[2*s+1]),u=-(i-(n=t[2*s])),c=Math.sqrt(l*l+u*u),f=l/c,d=u/c;a[4*s]=n+f*e,a[4*s+1]=r+d*e,a[4*s+2]=i+f*e,a[4*s+3]=o+d*e}return a},ze=function(t,e,n,r,i,o,a){return t-=i,e-=o,(t/=n/2+a)*t+(e/=r/2+a)*e<=1},Ae=function(t,e,n,r,i,o,a){var s=[n-t,r-e],l=[t-i,e-o],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),f=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-a*a);if(f<0)return[];var d=(-c+Math.sqrt(f))/(2*u),h=(-c-Math.sqrt(f))/(2*u),p=Math.min(d,h),g=Math.max(d,h),v=[];if(p>=0&&p<=1&&v.push(p),g>=0&&g<=1&&v.push(g),0===v.length)return[];var m=v[0]*s[0]+t,y=v[0]*s[1]+e;return v.length>1?v[0]==v[1]?[m,y]:[m,y,v[1]*s[0]+t,v[1]*s[1]+e]:[m,y]},Ce=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},Te=function(t,e,n,r,i,o,a,s,l){var u=t-i,c=n-t,f=a-i,d=e-o,h=r-e,p=s-o,g=f*d-p*u,v=c*d-h*u,m=p*c-f*h;if(0!==m){var y=g/m,_=v/m;return-.001<=y&&y<=1.001&&-.001<=_&&_<=1.001||l?[t+y*c,e+y*h]:[]}return 0===g||0===v?Ce(t,n,a)===a?[a,s]:Ce(t,n,i)===i?[i,o]:Ce(i,a,n)===n?[n,r]:[]:[]},Se=function(t,e,n,r,i,o,a,s){var l,u,c,f,d=[],h=new Array(n.length),p=!0;if(null==o&&(p=!1),p){for(var g=0;g<h.length/2;g++)h[2*g]=n[2*g]*o+r,h[2*g+1]=n[2*g+1]*a+i;if(s>0){var v=Ee(h,-s);u=ke(v)}else u=h}else u=n;for(var m=0;m<u.length/2;m++)m<u.length/2-1?(c=u[2*(m+1)],f=u[2*(m+1)+1]):(c=u[0],f=u[1]),0!==(l=Te(t,e,r,i,u[2*m],u[2*m+1],c,f)).length&&d.push(l[0],l[1]);return d},Me=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},Ne=function(t,e){var n=Oe(t,e);return De(n)},De=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<r;l++)e=t[2*l],n=t[2*l+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var u=2/(a-i),c=2/(s-o),f=0;f<r;f++)e=t[2*f]=t[2*f]*u,n=t[2*f+1]=t[2*f+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var d=0;d<r;d++)n=t[2*d+1]=t[2*d+1]+(-1-o);return t},Oe=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},Ie=function(t,e){return Math.min(t/4,e/4,8)},Pe=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Le=zt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),Be={pageRank:function(t){for(var e=Le(t),n=e.dampingFactor,r=e.precision,i=e.iterations,o=e.weight,a=this._private.cy,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,f=u.length,d=new Array(c*c),h=new Array(c),p=(1-n)/c,g=0;g<c;g++){for(var v=0;v<c;v++)d[g*c+v]=0;h[g]=0}for(var m=0;m<f;m++){var y=u[m],_=y.data("source"),b=y.data("target");if(_!==b){var w=l.indexOfId(_),x=l.indexOfId(b),k=o(y);d[x*c+w]+=k,h[w]+=k}}for(var E=1/c+p,z=0;z<c;z++)if(0===h[z])for(var A=0;A<c;A++)d[A*c+z]=E;else for(var C=0;C<c;C++){var T=C*c+z;d[T]=d[T]/h[z]+p}for(var S,M=new Array(c),N=new Array(c),D=0;D<c;D++)M[D]=1;for(var O=0;O<i;O++){for(var I=0;I<c;I++)N[I]=0;for(var P=0;P<c;P++)for(var L=0;L<c;L++)N[P]+=d[P*c+L]*M[L];ie(N),S=M,M=N,N=S;for(var B=0,j=0;j<c;j++){var F=S[j]-M[j];B+=F*F}if(B<r)break}return{rank:function(t){return t=a.collection(t)[0],M[l.indexOf(t)]}}}},je=zt({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Fe={degreeCentralityNormalized:function(t){t=je(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},o={},a=0,s=0,l=0;l<r;l++){var u=n[l],c=u.id();t.root=u;var f=this.degreeCentrality(t);a<f.indegree&&(a=f.indegree),s<f.outdegree&&(s=f.outdegree),i[c]=f.indegree,o[c]=f.outdegree}return{indegree:function(t){return 0==a?0:(d(t)&&(t=e.filter(t)),i[t.id()]/a)},outdegree:function(t){return 0===s?0:(d(t)&&(t=e.filter(t)),o[t.id()]/s)}}}for(var h={},p=0,g=0;g<r;g++){var v=n[g];t.root=v;var m=this.degreeCentrality(t);p<m.degree&&(p=m.degree),h[v.id()]=m.degree}return{degree:function(t){return 0===p?0:(d(t)&&(t=e.filter(t)),h[t.id()]/p)}}},degreeCentrality:function(t){t=je(t);var e=this.cy(),n=this,r=t.root,i=t.weight,o=t.directed,a=t.alpha;if(r=e.collection(r)[0],o){for(var s=r.connectedEdges(),l=s.filter((function(t){return t.target().same(r)&&n.has(t)})),u=s.filter((function(t){return t.source().same(r)&&n.has(t)})),c=l.length,f=u.length,d=0,h=0,p=0;p<l.length;p++)d+=i(l[p]);for(var g=0;g<u.length;g++)h+=i(u[g]);return{indegree:Math.pow(c,1-a)*Math.pow(d,a),outdegree:Math.pow(f,1-a)*Math.pow(h,a)}}for(var v=r.connectedEdges().intersection(n),m=v.length,y=0,_=0;_<v.length;_++)y+=i(v[_]);return{degree:Math.pow(m,1-a)*Math.pow(y,a)}}};Fe.dc=Fe.degreeCentrality,Fe.dcn=Fe.degreeCentralityNormalised=Fe.degreeCentralityNormalized;var Re=zt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),qe={closenessCentralityNormalized:function(t){for(var e=Re(t),n=e.harmonic,r=e.weight,i=e.directed,o=this.cy(),a={},s=0,l=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<l.length;c++){for(var f=0,h=l[c],p=0;p<l.length;p++)if(c!==p){var g=u.distance(h,l[p]);f+=n?1/g:g}n||(f=1/f),s<f&&(s=f),a[h.id()]=f}return{closeness:function(t){return 0==s?0:(t=d(t)?o.filter(t)[0].id():t.id(),a[t]/s)}}},closenessCentrality:function(t){var e=Re(t),n=e.root,r=e.weight,i=e.directed,o=e.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(n)){var f=a.distanceTo(c);s+=o?1/f:f}}return o?s:1/s}};qe.cc=qe.closenessCentrality,qe.ccn=qe.closenessCentralityNormalised=qe.closenessCentralityNormalized;var He=zt({weight:null,directed:!1}),$e={betweennessCentrality:function(t){for(var e=He(t),n=e.directed,r=e.weight,i=null!=r,o=this.cy(),a=this.nodes(),s={},l={},u=0,c=function(t,e){l[t]=e,e>u&&(u=e)},f=function(t){return l[t]},d=0;d<a.length;d++){var h=a[d],p=h.id();s[p]=n?h.outgoers().nodes():h.openNeighborhood().nodes(),c(p,0)}for(var g=function(t){for(var e=a[t].id(),n=[],l={},u={},d={},h=new Lt((function(t,e){return d[t]-d[e]})),p=0;p<a.length;p++){var g=a[p].id();l[g]=[],u[g]=0,d[g]=1/0}for(u[e]=1,d[e]=0,h.push(e);!h.empty();){var v=h.pop();if(n.push(v),i)for(var m=0;m<s[v].length;m++){var y,_=s[v][m],b=o.getElementById(v);y=b.edgesTo(_).length>0?b.edgesTo(_)[0]:_.edgesTo(b)[0];var w=r(y);_=_.id(),d[_]>d[v]+w&&(d[_]=d[v]+w,h.nodes.indexOf(_)<0?h.push(_):h.updateItem(_),u[_]=0,l[_]=[]),d[_]==d[v]+w&&(u[_]=u[_]+u[v],l[_].push(v))}else for(var x=0;x<s[v].length;x++){var k=s[v][x].id();d[k]==1/0&&(h.push(k),d[k]=d[v]+1),d[k]==d[v]+1&&(u[k]=u[k]+u[v],l[k].push(v))}}for(var E={},z=0;z<a.length;z++)E[a[z].id()]=0;for(;n.length>0;)for(var A=n.pop(),C=0;C<l[A].length;C++){var T=l[A][C];E[T]=E[T]+u[T]/u[A]*(1+E[A]),A!=a[t].id()&&c(A,f(A)+E[A])}},v=0;v<a.length;v++)g(v);var m={betweenness:function(t){var e=o.collection(t).id();return f(e)},betweennessNormalized:function(t){if(0==u)return 0;var e=o.collection(t).id();return f(e)/u}};return m.betweennessNormalised=m.betweennessNormalized,m}};$e.bc=$e.betweennessCentrality;var We=zt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Ue=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Ve=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var o=0;o<e;o++)t[o*e+r]=t[o*e+r]/n}},Ye=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=t[i*n+a]*e[a*n+s]}return r},Xe=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=Ye(t,r,e);return t},Ge=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Ve(r,e),r},Ke=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},Ze=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},Qe=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=function(t){return We(t)}(t),o={},a=0;a<e.length;a++)o[e[a].id()]=a;for(var s,l=e.length,u=l*l,c=new Array(u),f=0;f<u;f++)c[f]=0;for(var d=0;d<n.length;d++){var h=n[d],p=o[h.source().id()],g=o[h.target().id()],v=Ue(h,i.attributes);c[p*l+g]+=v,c[g*l+p]+=v}!function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n}(c,l,i.multFactor),Ve(c,l);for(var m=!0,y=0;m&&y<i.maxIterations;)m=!1,s=Xe(c,l,i.expandFactor),c=Ge(s,l,i.inflateFactor),Ke(c,s,u,4)||(m=!0),y++;return function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&Ze(t[e],t[n])&&t.splice(n,1);return t}(function(t,e,n,r){for(var i=[],o=0;o<e;o++){for(var a=[],s=0;s<e;s++)Math.round(1e3*t[o*e+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i}(c,l,e,r))},Je={markovClustering:Qe,mcl:Qe},tn=function(t){return t},en=function(t,e){return Math.abs(e-t)},nn=function(t,e,n){return t+en(e,n)},rn=function(t,e,n){return t+Math.pow(n-e,2)},on=function(t){return Math.sqrt(t)},an=function(t,e,n){return Math.max(t,en(e,n))},sn=function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tn,a=r,s=0;s<t;s++)a=i(a,e(s),n(s));return o(a)},ln={euclidean:function(t,e,n){return t>=2?sn(t,e,n,0,rn,on):sn(t,e,n,0,nn)},squaredEuclidean:function(t,e,n){return sn(t,e,n,0,rn)},manhattan:function(t,e,n){return sn(t,e,n,0,nn)},max:function(t,e,n){return sn(t,e,n,-1/0,an)}};function un(t,e,n,r,i,o){var a;return a=h(t)?t:ln[t]||ln.euclidean,0===e&&h(t)?a(i,o):a(e,n,r,i,o)}ln["squared-euclidean"]=ln.squaredEuclidean,ln.squaredeuclidean=ln.squaredEuclidean;var cn=zt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),fn=function(t){return cn(t)},dn=function(t,e,n,r,i){var o="kMedoids"===i?function(t){return r[t](n)}:function(t){return n[t]};return un(t,r.length,o,(function(t){return r[t](e)}))},hn=function(t,e,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(e),s=null,l=0;l<r;l++)i[l]=t.min(n[l]).value,o[l]=t.max(n[l]).value;for(var u=0;u<e;u++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[u]=s}return a},pn=function(t,e,n,r,i){for(var o=1/0,a=0,s=0;s<e.length;s++){var l=dn(n,t,e[s],r,i);l<o&&(o=l,a=s)}return a},gn=function(t,e,n){for(var r=[],i=null,o=0;o<e.length;o++)n[(i=e[o]).id()]===t&&r.push(i);return r},vn=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},mn=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},yn=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];mn(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var o=0;o<e;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},_n=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=dn("manhattan",e[i],t,n,"kMedoids");return r},bn=function(t,e,n,r,i){for(var o,a,s=0;s<e.length;s++)for(var l=0;l<t.length;l++)r[s][l]=Math.pow(n[s][l],i.m);for(var u=0;u<t.length;u++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var f=0;f<e.length;f++)o+=r[f][u]*i.attributes[c](e[f]),a+=r[f][u];t[u][c]=o/a}},wn=function(t,e,n,r,i){for(var o=0;o<t.length;o++)e[o]=t[o].slice();for(var a,s,l,u=2/(i.m-1),c=0;c<n.length;c++)for(var f=0;f<r.length;f++){a=0;for(var d=0;d<n.length;d++)s=dn(i.distance,r[f],n[c],i.attributes,"cmeans"),l=dn(i.distance,r[f],n[d],i.attributes,"cmeans"),a+=Math.pow(s/l,u);t[f][c]=1/a}},xn=function(t){var e,n,r,i,o=this.cy(),a=this.nodes(),s=fn(t);r=new Array(a.length);for(var l=0;l<a.length;l++)r[l]=new Array(s.k);n=new Array(a.length);for(var u=0;u<a.length;u++)n[u]=new Array(s.k);for(var c=0;c<a.length;c++){for(var f=0,d=0;d<s.k;d++)n[c][d]=Math.random(),f+=n[c][d];for(var h=0;h<s.k;h++)n[c][h]=n[c][h]/f}e=new Array(s.k);for(var p=0;p<s.k;p++)e[p]=new Array(s.attributes.length);i=new Array(a.length);for(var g=0;g<a.length;g++)i[g]=new Array(s.k);for(var v=!0,m=0;v&&m<s.maxIterations;)v=!1,bn(e,a,n,i,s),wn(n,r,e,a,s),vn(n,r,s.sensitivityThreshold)||(v=!0),m++;return{clusters:function(t,e,n,r){for(var i,o,a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var l=0;l<e.length;l++){i=-1/0,o=-1;for(var u=0;u<e[0].length;u++)e[l][u]>i&&(i=e[l][u],o=u);a[o].push(t[l])}for(var c=0;c<a.length;c++)a[c]=r.collection(a[c]);return a}(a,n,s,o),degreeOfMembership:n}},kn={kMeans:function(e){var n,r=this.cy(),i=this.nodes(),o=null,a=fn(e),s=new Array(a.k),l={};n=a.testMode?"number"==typeof a.testCentroids?hn(i,a.k,a.attributes):"object"===t(a.testCentroids)?a.testCentroids:hn(i,a.k,a.attributes):hn(i,a.k,a.attributes);for(var u,c=!0,f=0;c&&f<a.maxIterations;){for(var d=0;d<i.length;d++)l[(o=i[d]).id()]=pn(o,n,a.distance,a.attributes,"kMeans");c=!1;for(var h=0;h<a.k;h++){var p=gn(h,i,l);if(0!==p.length){for(var g=a.attributes.length,v=n[h],m=new Array(g),y=new Array(g),_=0;_<g;_++){y[_]=0;for(var b=0;b<p.length;b++)y[_]+=a.attributes[_](o=p[b]);m[_]=y[_]/p.length,u=a.sensitivityThreshold,Math.abs(v[_]-m[_])<=u||(c=!0)}n[h]=m,s[h]=r.collection(p)}}f++}return s},kMedoids:function(e){var n,r,i=this.cy(),o=this.nodes(),a=null,s=fn(e),l=new Array(s.k),u={},c=new Array(s.k);s.testMode?"number"==typeof s.testCentroids||(n="object"===t(s.testCentroids)?s.testCentroids:yn(o,s.k)):n=yn(o,s.k);for(var f=!0,d=0;f&&d<s.maxIterations;){for(var h=0;h<o.length;h++)u[(a=o[h]).id()]=pn(a,n,s.distance,s.attributes,"kMedoids");f=!1;for(var p=0;p<n.length;p++){var g=gn(p,o,u);if(0!==g.length){c[p]=_n(n[p],g,s.attributes);for(var v=0;v<g.length;v++)(r=_n(g[v],g,s.attributes))<c[p]&&(c[p]=r,n[p]=g[v],f=!0);l[p]=i.collection(g)}}d++}return l},fuzzyCMeans:xn,fcm:xn},En=zt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),zn={single:"min",complete:"max"},An=function(t,e,n,r,i){for(var o,a=0,s=1/0,l=i.attributes,u=function(t,e){return un(i.distance,l.length,(function(e){return l[e](t)}),(function(t){return l[t](e)}))},c=0;c<t.length;c++){var f=t[c].key,d=n[f][r[f]];d<s&&(a=f,s=d)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var h,p=e[a],g=e[r[a]];h="dendrogram"===i.mode?{left:p,right:g,key:p.key}:{value:p.value.concat(g.value),key:p.key},t[p.index]=h,t.splice(g.index,1),e[p.key]=h;for(var v=0;v<t.length;v++){var m=t[v];p.key===m.key?o=1/0:"min"===i.linkage?(o=n[p.key][m.key],n[p.key][m.key]>n[g.key][m.key]&&(o=n[g.key][m.key])):"max"===i.linkage?(o=n[p.key][m.key],n[p.key][m.key]<n[g.key][m.key]&&(o=n[g.key][m.key])):o="mean"===i.linkage?(n[p.key][m.key]*p.size+n[g.key][m.key]*g.size)/(p.size+g.size):"dendrogram"===i.mode?u(m.value,p.value):u(m.value[0],p.value[0]),n[p.key][m.key]=n[m.key][p.key]=o}for(var y=0;y<t.length;y++){var _=t[y].key;if(r[_]===p.key||r[_]===g.key){for(var b=_,w=0;w<t.length;w++){var x=t[w].key;n[_][x]<n[_][b]&&(b=x)}r[_]=b}t[y].index=y}return p.key=g.key=p.index=g.index=null,!0},Cn=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n,r),e.right&&t(e.right,n,r)))},Tn=function(t){for(var e=this.cy(),n=this.nodes(),r=function(t){var e=En(t),n=zn[e.linkage];return null!=n&&(e.linkage=n),e}(t),i=r.attributes,o=function(t,e){return un(r.distance,i.length,(function(e){return i[e](t)}),(function(t){return i[t](e)}))},a=[],s=[],l=[],u=[],c=0;c<n.length;c++){var f={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};a[c]=f,u[c]=f,s[c]=[],l[c]=0}for(var d=0;d<a.length;d++)for(var h=0;h<=d;h++){var p;p="dendrogram"===r.mode?d===h?1/0:o(a[d].value,a[h].value):d===h?1/0:o(a[d].value[0],a[h].value[0]),s[d][h]=p,s[h][d]=p,p<s[d][l[d]]&&(l[d]=h)}for(var g,v=An(a,u,s,l,r);v;)v=An(a,u,s,l,r);return"dendrogram"===r.mode?(g=function t(e,n,r){if(!e)return[];var i=[],o=[],a=[];return 0===n?(e.left&&Cn(e.left,i,r),e.right&&Cn(e.right,o,r),a=i.concat(o),[r.collection(a)]):1===n?e.value?[r.collection(e.value)]:(e.left&&Cn(e.left,i,r),e.right&&Cn(e.right,o,r),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))}(a[0],r.dendrogramDepth,e),r.addDendrogram&&function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return e.value?e.value.id():void 0}(a[0],e)):(g=new Array(a.length),a.forEach((function(t,n){t.key=t.index=null,g[n]=e.collection(t.value)}))),g},Sn={hierarchicalClustering:Tn,hca:Tn},Mn=zt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Nn=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-un(t,r.length,(function(t){return i(e,t)}),(function(t){return i(n,t)}),e,n)},Dn=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var o=-1,a=-1/0,s=0;s<n.length;s++){var l=n[s];e[i*t+l]>a&&(o=l,a=e[i*t+l])}o>0&&r.push(o)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},On=function(t){for(var e,n,r,i,o,a,s=this.cy(),l=this.nodes(),u=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||yt("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some((function(t){return t===n}))||v(n)||yt("Preference must be one of [".concat(r.map((function(t){return"'".concat(t,"'")})).join(", "),"] or a number.  Got: ").concat(n)),Mn(t)}(t),c={},f=0;f<l.length;f++)c[l[f].id()]=f;n=(e=l.length)*e,r=new Array(n);for(var d=0;d<n;d++)r[d]=-1/0;for(var h=0;h<e;h++)for(var p=0;p<e;p++)h!==p&&(r[h*e+p]=Nn(u.distance,l[h],l[p],u.attributes));i=function(t,e){return"median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];r?t=t.slice(e,n):(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e));for(var a=0,s=t.length-1;s>=0;s--){var l=t[s];o?isFinite(l)||(t[s]=-1/0,a++):t.splice(s,1)}i&&t.sort((function(t,e){return t-e}));var u=t.length,c=Math.floor(u/2);return u%2!=0?t[c+1+a]:(t[c-1+a]+t[c+a])/2}(t):"mean"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=0,i=0,o=e;o<n;o++){var a=t[o];isFinite(a)&&(r+=a,i++)}return r/i}(t):"min"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.min(o,r))}return r}(t):"max"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=-1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.max(o,r))}return r}(t):e}(r,u.preference);for(var g=0;g<e;g++)r[g*e+g]=i;o=new Array(n);for(var m=0;m<n;m++)o[m]=0;a=new Array(n);for(var y=0;y<n;y++)a[y]=0;for(var _=new Array(e),b=new Array(e),w=new Array(e),x=0;x<e;x++)_[x]=0,b[x]=0,w[x]=0;for(var k,E=new Array(e*u.minIterations),z=0;z<E.length;z++)E[z]=0;for(k=0;k<u.maxIterations;k++){for(var A=0;A<e;A++){for(var C=-1/0,T=-1/0,S=-1,M=0,N=0;N<e;N++)_[N]=o[A*e+N],(M=a[A*e+N]+r[A*e+N])>=C?(T=C,C=M,S=N):M>T&&(T=M);for(var D=0;D<e;D++)o[A*e+D]=(1-u.damping)*(r[A*e+D]-C)+u.damping*_[D];o[A*e+S]=(1-u.damping)*(r[A*e+S]-T)+u.damping*_[S]}for(var O=0;O<e;O++){for(var I=0,P=0;P<e;P++)_[P]=a[P*e+O],b[P]=Math.max(0,o[P*e+O]),I+=b[P];I-=b[O],b[O]=o[O*e+O],I+=b[O];for(var L=0;L<e;L++)a[L*e+O]=(1-u.damping)*Math.min(0,I-b[L])+u.damping*_[L];a[O*e+O]=(1-u.damping)*(I-b[O])+u.damping*_[O]}for(var B=0,j=0;j<e;j++){var F=a[j*e+j]+o[j*e+j]>0?1:0;E[k%u.minIterations*e+j]=F,B+=F}if(B>0&&(k>=u.minIterations-1||k==u.maxIterations-1)){for(var R=0,q=0;q<e;q++){w[q]=0;for(var H=0;H<u.minIterations;H++)w[q]+=E[H*e+q];0!==w[q]&&w[q]!==u.minIterations||R++}if(R===e)break}}for(var $=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r}(e,o,a),W=function(t,e,n){for(var r=Dn(t,e,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,l=-1/0,u=0;u<o.length;u++){for(var c=0,f=0;f<o.length;f++)c+=e[o[f]*t+o[u]];c>l&&(s=u,l=c)}n[i]=o[s]}return Dn(t,e,n)}(e,r,$),U={},V=0;V<$.length;V++)U[$[V]]=[];for(var Y=0;Y<l.length;Y++){var X=W[c[l[Y].id()]];null!=X&&U[X].push(l[Y])}for(var G=new Array($.length),K=0;K<$.length;K++)G[K]=s.collection(U[$[K]]);return G},In={};[Pt,jt,Ft,qt,$t,Ut,Gt,Be,Fe,qe,$e,Je,kn,Sn,{affinityPropagation:On,ap:On}].forEach((function(t){O(In,t)}));var Pn=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Pn.prototype={fulfill:function(t){return Ln(this,1,"fulfillValue",t)},reject:function(t){return Ln(this,2,"rejectReason",t)},then:function(t,e){var n=new Pn;return this.onFulfilled.push(Fn(t,n,"fulfill")),this.onRejected.push(Fn(e,n,"reject")),Bn(this),n.proxy}};var Ln=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,Bn(t)),t},Bn=function(t){1===t.state?jn(t,"onFulfilled",t.fulfillValue):2===t.state&&jn(t,"onRejected",t.rejectReason)},jn=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Fn=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}Rn(e,i)}}},Rn=function e(n,r){if(n!==r&&n.proxy!==r){var i;if("object"===t(r)&&null!==r||"function"==typeof r)try{i=r.then}catch(t){return void n.reject(t)}if("function"!=typeof i)n.fulfill(r);else{var o=!1;try{i.call(r,(function(t){o||(o=!0,t===r?n.reject(new TypeError("circular thenable chain")):e(n,t))}),(function(t){o||(o=!0,n.reject(t))}))}catch(t){o||n.reject(t)}}}else n.reject(new TypeError("cannot resolve promise with itself"))};Pn.all=function(t){return new Pn((function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then((function(t){o(e,t)}),(function(t){n(t)})):o(e,r)}(a)}))},Pn.resolve=function(t){return new Pn((function(e,n){e(t)}))},Pn.reject=function(t){return new Pn((function(e,n){n(t)}))};var qn="undefined"!=typeof Promise?Promise:Pn,Hn=function(t,e,n){var r=w(t),i=!r,o=this._private=O({duration:1e3},e,n);if(o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&h(o.complete)&&o.completes.push(o.complete),i){var a=t.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(r){var s=t.pan();o.startPan={x:s.x,y:s.y},o.startZoom=t.zoom()}this.length=1,this[0]=this},$n=Hn.prototype;O($n,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),y(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new qn((function(t,n){e.push((function(){t()}))}))}}),$n.complete=$n.completed,$n.run=$n.play,$n.running=$n.playing;var Wn={};[{animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++)t[e]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,o=!n,a=!o;if(!i.styleEnabled())return this;var s=i.style();if(t=O({},t,e),0===Object.keys(t).length)return new Hn(r[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(a&&(t.style=s.getPropsList(t.style||t.css),t.css=void 0),a&&null!=t.renderedPosition){var l=t.renderedPosition,u=i.pan(),c=i.zoom();t.position=Zt(l,c,u)}if(o&&null!=t.panBy){var f=t.panBy,d=i.pan();t.pan={x:d.x+f.x,y:d.y+f.y}}var h=t.center||t.centre;if(o&&null!=h){var p=i.getCenterPan(h.eles,t.zoom);null!=p&&(t.pan=p)}if(o&&null!=t.fit){var v=t.fit,m=i.getFitViewport(v.eles||v.boundingBox,v.padding);null!=m&&(t.pan=m.pan,t.zoom=m.zoom)}if(o&&g(t.zoom)){var y=i.getZoomedViewport(t.zoom);null!=y&&(y.zoomed&&(t.zoom=y.zoom),y.panned&&(t.pan=y.pan))}return new Hn(r[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=O({},t,e));for(var r=0;r<n.length;r++){var i=n[r],o=i.animated()&&(void 0===t.queue||t.queue);i.animation(t,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var o=n[i]._private,a=o.animation.current,s=0;s<a.length;s++)e&&(a[s]._private.duration=0);t&&(o.animation.queue=[]),e||(o.animation.current=[])}return r.notify("draw"),this}}},{data:function(t){return t=O({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=void 0!==this.length,o=i?this:[this],a=i?this[0]:this;if(d(e)){var s;if(r.allowGetting&&void 0===n)return a&&(r.beforeGet(a),s=a._private[r.field][e]),s;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var l=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n);r.beforeSet(this,l);for(var u=0,c=o.length;u<c;u++){var f=o[u];r.canSet(f)&&(f._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&g(e)){var p,v,m=e,y=Object.keys(m);r.beforeSet(this,m);for(var _=0;_<y.length;_++)if(v=m[p=y[_]],!r.immutableKeys[p])for(var b=0;b<o.length;b++){var w=o[b];r.canSet(w)&&(w._private[r.field][p]=v)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&h(e))this.on(r.bindingEvent,e);else if(r.allowGetting&&void 0===e){var x;return a&&(r.beforeGet(a),x=a._private[r.field]),x}return this}},removeData:function(t){return t=O({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(d(e)){for(var i=e.split(/\s+/),o=i.length,a=0;a<o;a++){var s=i[a];if(!k(s)&&!n.immutableKeys[s])for(var l=0,u=r.length;l<u;l++)r[l]._private[n.field][s]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var c=0,f=r.length;c<f;c++)for(var h=r[c]._private[n.field],p=Object.keys(h),g=0;g<p.length;g++){var v=p[g];!n.immutableKeys[v]&&(h[v]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new qn((function(t,e){var i=r.concat([function(e){n.off.apply(n,o),t(e)}]),o=i.concat([]);n.on.apply(n,i)}))}}}].forEach((function(t){O(Wn,t)}));var Un={animate:Wn.animate(),animation:Wn.animation(),animated:Wn.animated(),clearQueue:Wn.clearQueue(),delay:Wn.delay(),delayAnimation:Wn.delayAnimation(),stop:Wn.stop()},Vn={classes:function(t){if(void 0===t){var e=[];return this[0]._private.classes.forEach((function(t){return e.push(t)})),e}p(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],r=new Dt(t),i=0;i<this.length;i++){for(var o=this[i],a=o._private,s=a.classes,l=!1,u=0;u<t.length;u++)if(!s.has(t[u])){l=!0;break}l||(l=s.size!==t.length),l&&(a.classes=r,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){p(t)||(t=t.match(/\S+/g)||[]);for(var n=void 0===e,r=[],i=0,o=this.length;i<o;i++)for(var a=this[i],s=a._private.classes,l=!1,u=0;u<t.length;u++){var c=t[u],f=s.has(c),d=!1;e||n&&!f?(s.add(c),d=!0):(!e||n&&f)&&(s.delete(c),d=!0),!l&&d&&(r.push(a),l=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout((function(){n.removeClass(t)}),e),n}};Vn.className=Vn.classNames=Vn.classes;var Yn={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:N,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Yn.variable="(?:[\\w-]|(?:\\\\"+Yn.metaChar+"))+",Yn.value=Yn.string+"|"+Yn.number,Yn.className=Yn.variable,Yn.id=Yn.variable,function(){var t,e,n;for(t=Yn.comparatorOp.split("|"),n=0;n<t.length;n++)Yn.comparatorOp+="|@"+(e=t[n]);for(t=Yn.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(Yn.comparatorOp+="|\\!"+e)}();var Xn=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort((function(t,e){return function(t,e){return-1*D(t,e)}(t.selector,e.selector)})),Gn=function(){for(var t,e={},n=0;n<Xn.length;n++)e[(t=Xn[n]).selector]=t.matches;return e}(),Kn="("+Xn.map((function(t){return t.selector})).join("|")+")",Zn=function(t){return t.replace(new RegExp("\\\\("+Yn.metaChar+")","g"),(function(t,e){return e}))},Qn=function(t,e,n){t[t.length-1]=n},Jn=[{name:"group",query:!0,regex:"("+Yn.group+")",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:Kn,populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:7,value:r})}},{name:"id",query:!0,regex:"\\#("+Yn.id+")",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:8,value:Zn(r)})}},{name:"className",query:!0,regex:"\\.("+Yn.className+")",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:9,value:Zn(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Yn.variable+")\\s*\\]",populate:function(t,e,n){var r=i(n,1)[0];e.checks.push({type:4,field:Zn(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Yn.variable+")\\s*("+Yn.comparatorOp+")\\s*("+Yn.value+")\\s*\\]",populate:function(t,e,n){var r=i(n,3),o=r[0],a=r[1],s=r[2];s=null!=new RegExp("^"+Yn.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),e.checks.push({type:3,field:Zn(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Yn.boolOp+")\\s*("+Yn.variable+")\\s*\\]",populate:function(t,e,n){var r=i(n,2),o=r[0];e.checks.push({type:5,field:Zn(r[1]),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Yn.meta+")\\s*("+Yn.comparatorOp+")\\s*("+Yn.number+")\\s*\\]\\]",populate:function(t,e,n){var r=i(n,3),o=r[1],a=r[2];e.checks.push({type:6,field:Zn(r[0]),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:Yn.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,o=t[t.length-1];return null!=n&&(o.subject=n,t.currentSubject=null),o.edgeCount=r,o.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Yn.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:11,source:e,target:r}),Qn(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:12,source:e,target:o}),Qn(t,0,i),t.edgeCount++,o}},{name:"undirectedEdge",separator:!0,regex:Yn.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:10,nodes:[e,r]}),Qn(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:14,node:e,neighbor:o}),Qn(t,0,i),o}},{name:"child",separator:!0,regex:Yn.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:15,parent:t[t.length-1],child:r}),Qn(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},a={checks:[]},s={checks:[]},l={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:a}),a.checks=e.checks,e.checks=[{type:20}],l.checks.push({type:20}),o.checks.push({type:17,parent:l,child:s}),Qn(t,0,i),t.currentSubject=a,t.compoundCount++,s}var u={checks:[]},c={checks:[]},f=[{type:17,parent:u,child:c}];return u.checks=e.checks,e.checks=f,t.compoundCount++,c}},{name:"descendant",separator:!0,regex:Yn.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:16,ancestor:t[t.length-1],descendant:r}),Qn(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},a={checks:[]},s={checks:[]},l={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:a}),a.checks=e.checks,e.checks=[{type:20}],l.checks.push({type:20}),o.checks.push({type:18,ancestor:l,descendant:s}),Qn(t,0,i),t.currentSubject=a,t.compoundCount++,s}var u={checks:[]},c={checks:[]},f=[{type:18,ancestor:u,descendant:c}];return u.checks=e.checks,e.checks=f,t.compoundCount++,c}},{name:"subject",modifier:!0,regex:Yn.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return bt("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];Jn.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var tr=function(t){for(var e,n,r,i=0;i<Jn.length;i++){var o=Jn[i],a=o.name,s=t.match(o.regexObj);if(null!=s){n=s,e=o,r=a,t=t.substring(s[0].length);break}}return{expr:e,match:n,name:r,remaining:t}},er={parse:function(t){var e=this.inputText=t,n=this[0]={checks:[]};for(this.length=1,e=function(t){var e=t.match(/^\s+/);return e&&(t=t.substring(e[0].length)),t}(e);;){var r=tr(e);if(null==r.expr)return bt("The selector `"+t+"`is invalid"),!1;var i=r.match.slice(1),o=r.expr.populate(this,n,i);if(!1===o)return!1;if(null!=o&&(n=o),(e=r.remaining).match(/^\s*$/))break}var a=this[this.length-1];null!=this.currentSubject&&(a.subject=this.currentSubject),a.edgeCount=this.edgeCount,a.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var l=this[s];if(l.compoundCount>0&&l.edgeCount>0)return bt("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return bt("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&bt("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return d(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function(r,o){var a=r.value;switch(r.type){case 0:var s=t(a);return s.substring(0,s.length-1);case 3:return"["+r.field+n(t(r.operator))+e(a)+"]";case 5:var l=r.field;return"["+t(r.operator)+l+"]";case 4:return"["+r.field+"]";case 6:return"[["+r.field+n(t(r.operator))+e(a)+"]]";case 7:return a;case 8:return"#"+a;case 9:return"."+a;case 17:case 15:return i(r.parent,o)+n(">")+i(r.child,o);case 18:case 16:return i(r.ancestor,o)+" "+i(r.descendant,o);case 19:var u=i(r.left,o),c=i(r.subject,o),f=i(r.right,o);return u+(u.length>0?" ":"")+c+f;case 20:return""}},i=function(t,e){return t.checks.reduce((function(n,i,o){return n+(e===t&&0===o?"$":"")+r(i,e)}),"")},o="",a=0;a<this.length;a++){var s=this[a];o+=i(s,s.subject),this.length>1&&a<this.length-1&&(o+=", ")}return this.toStringCache=o,o}},nr=function(t,e,n){var r,i,o,a=d(t),s=v(t),l=d(n),u=!1,c=!1,f=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),c=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),u=!0),(a||l||u)&&(i=a||s?""+t:"",o=""+n),u&&(t=i=i.toLowerCase(),n=o=o.toLowerCase()),e){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=t===n;break;case">":f=!0,r=t>n;break;case">=":f=!0,r=t>=n;break;case"<":f=!0,r=t<n;break;case"<=":f=!0,r=t<=n;break;default:r=!1}return!c||null==t&&f||(r=!r),r},rr=function(t,e){return t.data(e)},ir=[],or=function(t,e){return t.checks.every((function(t){return ir[t.type](t,e)}))};ir[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},ir[7]=function(t,e){return function(t,e){return Gn[t](e)}(t.value,e)},ir[8]=function(t,e){var n=t.value;return e.id()===n},ir[9]=function(t,e){return e.hasClass(t.value)},ir[6]=function(t,e){var n=t.operator,r=t.value;return nr(function(t,e){return t[e]()}(e,t.field),n,r)},ir[3]=function(t,e){var n=t.operator,r=t.value;return nr(rr(e,t.field),n,r)},ir[5]=function(t,e){var n=t.operator;return function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(rr(e,t.field),n)},ir[4]=function(t,e){return void 0!==rr(e,t.field)},ir[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return or(n,i)&&or(r,o)||or(r,i)&&or(n,o)},ir[14]=function(t,e){return or(t.node,e)&&e.neighborhood().some((function(e){return e.isNode()&&or(t.neighbor,e)}))},ir[11]=function(t,e){return or(t.source,e.source())&&or(t.target,e.target())},ir[12]=function(t,e){return or(t.source,e)&&e.outgoers().some((function(e){return e.isNode()&&or(t.target,e)}))},ir[13]=function(t,e){return or(t.target,e)&&e.incomers().some((function(e){return e.isNode()&&or(t.source,e)}))},ir[15]=function(t,e){return or(t.child,e)&&or(t.parent,e.parent())},ir[17]=function(t,e){return or(t.parent,e)&&e.children().some((function(e){return or(t.child,e)}))},ir[16]=function(t,e){return or(t.descendant,e)&&e.ancestors().some((function(e){return or(t.ancestor,e)}))},ir[18]=function(t,e){return or(t.ancestor,e)&&e.descendants().some((function(e){return or(t.descendant,e)}))},ir[19]=function(t,e){return or(t.subject,e)&&or(t.left,e)&&or(t.right,e)},ir[20]=function(){return!0},ir[1]=function(t,e){return t.value.has(e)},ir[2]=function(t,e){return(0,t.value)(e)};var ar=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||d(t)&&t.match(/^\s*$/)||(y(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):h(t)?this.addQuery({checks:[{type:2,value:t}]}):d(t)?this.parse(t)||(this.invalid=!0):yt("A selector must be created from a string; found "))},sr=ar.prototype;[er,{matches:function(t){for(var e=0;e<this.length;e++)if(or(this[e],t))return!0;return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++)if(or(e[n],t))return!0;return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}}].forEach((function(t){return O(sr,t)})),sr.text=function(){return this.inputText},sr.size=function(){return this.length},sr.eq=function(t){return this[t]},sr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},sr.addQuery=function(t){this[this.length++]=t},sr.selector=sr.toString;var lr={allAre:function(t){var e=new ar(t);return this.every((function(t){return e.matches(t)}))},is:function(t){var e=new ar(t);return this.some((function(t){return e.matches(t)}))},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every((function(e){return t.hasElementWithId(e.id())})))},anySame:function(t){return t=this.cy().collection(t),this.some((function(e){return t.hasElementWithId(e.id())}))},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every((function(t){return e.hasElementWithId(t.id())}))},contains:function(t){t=this.cy().collection(t);var e=this;return t.every((function(t){return e.hasElementWithId(t.id())}))}};lr.allAreNeighbours=lr.allAreNeighbors,lr.has=lr.contains,lr.equal=lr.equals=lr.same;var ur,cr,fr=function(t,e){return function(n,r,i,o){var a,s=n;if(null==s?a="":y(s)&&1===s.length&&(a=s.id()),1===this.length&&a){var l=this[0]._private,u=l.traversalCache=l.traversalCache||{},c=u[e]=u[e]||[],f=st(a);return c[f]||(c[f]=t.call(this,n,r,i,o))}return t.call(this,n,r,i,o)}},dr={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++)e.push(n[r]);n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter((function(t){return t.isOrphan()})).filter(t)},nonorphans:function(t){return this.stdFilter((function(t){return t.isChild()})).filter(t)},children:fr((function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,{unique:!0}).filter(t)}),"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,{unique:!0}).filter(t)}};function hr(t,e,n,r){for(var i=[],o=new Dt,a=t.cy().hasCompoundNodes(),s=0;s<t.length;s++){var l=t[s];n?i.push(l):a&&r(i,o,l)}for(;i.length>0;){var u=i.shift();e(u),o.add(u.id()),a&&r(i,o,u)}return t}function pr(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function gr(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function vr(t,e,n){gr(t,e,n),pr(t,e,n)}dr.forEachDown=function(t){return hr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],pr)},dr.forEachUp=function(t){return hr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],gr)},dr.forEachUpAndDown=function(t){return hr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],vr)},dr.ancestors=dr.parents,(ur=cr={data:Wn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Wn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Wn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Wn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Wn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Wn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=ur.data,ur.removeAttr=ur.removeData;var mr,yr,_r=cr,br={};function wr(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,o=0;o<i.length;o++){var a=i[o];!e&&a.isLoop()||(n+=t(r,a))}return n}}}function xr(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][t](n);void 0===a||void 0!==r&&!e(a,r)||(r=a)}return r}}O(br,{degree:wr((function(t,e){return e.source().same(e.target())?2:1})),indegree:wr((function(t,e){return e.target().same(t)?1:0})),outdegree:wr((function(t,e){return e.source().same(t)?1:0}))}),O(br,{minDegree:xr("degree",(function(t,e){return t<e})),maxDegree:xr("degree",(function(t,e){return t>e})),minIndegree:xr("indegree",(function(t,e){return t<e})),maxIndegree:xr("indegree",(function(t,e){return t>e})),minOutdegree:xr("outdegree",(function(t,e){return t<e})),maxOutdegree:xr("outdegree",(function(t,e){return t>e}))}),O(br,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var kr=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var o=i._private.position,a={x:null!=e.x?e.x-o.x:0,y:null!=e.y?e.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,n),i.shiftCachedBoundingBox(a)}}},Er={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){kr(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(mr=yr={position:Wn.data(Er),silentPosition:Wn.data(O({},Er,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){kr(t,e,!0)}})),positions:function(t,e){if(g(t))e?this.silentPosition(t):this.position(t);else if(h(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o,a=this[i];(o=n(a,i))&&(e?a.silentPosition(o):a.position(o))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(g(t)?(r={x:v(t.x)?t.x:0,y:v(t.y)?t.y:0},n=e):d(t)&&v(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=a.position(),l={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(l):a.position(l)}i.endBatch()}return this},silentShift:function(t,e){return g(t)?this.shift(t,!0):d(t)&&v(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=g(t)?t:void 0,s=void 0!==a||void 0!==e&&d(t);if(n&&n.isNode()){if(!s){var l=n.position();return a=Kt(l,i,o),void 0===t?a:a[t]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==e?c.position(t,(e-o[t])/i):void 0!==a&&c.position(Zt(a,i,o))}}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=g(t)?t:void 0,o=void 0!==i||void 0!==e&&d(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),l=a?n.parent():null,u=l&&l.length>0;u&&(l=l[0]);var c=u?l.position():{x:0,y:0};return i={x:s.x-c.x,y:s.y-c.y},void 0===t?i:i[t]}for(var f=0;f<this.length;f++){var h=this[f],p=a?h.parent():null,v=p&&p.length>0;v&&(p=p[0]);var m=v?p.position():{x:0,y:0};void 0!==e?h.position(t,e+m[t]):void 0!==i&&h.position({x:i.x+m.x,y:i.y+m.y})}}else if(!o)return;return this}}).modelPosition=mr.point=mr.position,mr.modelPositions=mr.points=mr.positions,mr.renderedPoint=mr.renderedPosition,mr.relativePoint=mr.relativePosition;var zr,Ar,Cr=yr;zr=Ar={},Ar.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,l=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},Ar.dirtyCompoundBoundsCache=function(){var t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var e=t._private;e.compoundBoundsClean=!1,e.bbCache=null,t.emitAndNotify("bounds")}})),this):this},Ar.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),a=e.position;0!==o.w&&0!==o.h||((o={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var f=m(i.width.val-o.w,s,l),d=f.biasDiff,h=f.biasComplementDiff,p=m(i.height.val-o.h,u,c),g=p.biasDiff,v=p.biasComplementDiff;e.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(o.w,o.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(o.w,i.width.val),a.x=(-d+o.x1+o.x2+h)/2,e.autoHeight=Math.max(o.h,i.height.val),a.y=(-g+o.y1+o.y2+v)/2}function m(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean||(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var Tr=function(t){return t===1/0||t===-1/0?0:t},Sr=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Mr=function(t,e){return null==e?t:Sr(t,e.x1,e.y1,e.x2,e.y2)},Nr=function(t,e,n){return Tt(t,e,n)},Dr=function(t,e,n){if(!e.cy().headless()){var r,i,o=e._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var l=o.arrowBounds=o.arrowBounds||{},u=l[n]=l[n]||{};u.x1=r-s,u.y1=i-s,u.x2=r+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,ce(u,1),Sr(t,u.x1,u.y1,u.x2,u.y2)}}},Or=function(t,e,n){if(!e.cy().headless()){var r,i=e._private,o=i.rstyle;if(e.pstyle((r=n?n+"-":"")+"label").strValue){var a,s,l,u,c=e.pstyle("text-halign"),f=e.pstyle("text-valign"),d=Nr(o,"labelWidth",n),h=Nr(o,"labelHeight",n),p=Nr(o,"labelX",n),g=Nr(o,"labelY",n),v=e.pstyle(r+"text-margin-x").pfValue,m=e.pstyle(r+"text-margin-y").pfValue,y=e.isEdge(),_=e.pstyle(r+"text-rotation"),b=e.pstyle("text-outline-width").pfValue,w=e.pstyle("text-border-width").pfValue/2,x=e.pstyle("text-background-padding").pfValue,k=h+2*x,E=d+2*x,z=E/2,A=k/2;if(y)a=p-z,s=p+z,l=g-A,u=g+A;else{switch(c.value){case"left":a=p-E,s=p;break;case"center":a=p-z,s=p+z;break;case"right":a=p,s=p+E}switch(f.value){case"top":l=g-k,u=g;break;case"center":l=g-A,u=g+A;break;case"bottom":l=g,u=g+k}}a+=v-Math.max(b,w),s+=v+Math.max(b,w),l+=m-Math.max(b,w),u+=m+Math.max(b,w);var C=n||"main",T=i.labelBounds,S=T[C]=T[C]||{};S.x1=a,S.y1=l,S.x2=s,S.y2=u,S.w=s-a,S.h=u-l,ce(S,1);var M=y&&"autorotate"===_.strValue;if(M||null!=_.pfValue&&0!==_.pfValue){var N=M?Nr(i.rstyle,"labelAngle",n):_.pfValue,D=Math.cos(N),O=Math.sin(N),I=(a+s)/2,P=(l+u)/2;if(!y){switch(c.value){case"left":I=s;break;case"right":I=a}switch(f.value){case"top":P=u;break;case"bottom":P=l}}var L=function(t,e){return{x:(t-=I)*D-(e-=P)*O+I,y:t*O+e*D+P}},B=L(a,l),j=L(a,u),F=L(s,l),R=L(s,u);a=Math.min(B.x,j.x,F.x,R.x),s=Math.max(B.x,j.x,F.x,R.x),l=Math.min(B.y,j.y,F.y,R.y),u=Math.max(B.y,j.y,F.y,R.y)}Sr(t,a,l,s,u),Sr(i.labelBounds.all,a,l,s,u)}return t}},Ir=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),(r+=n(t.includeLabels))+n(t.includeOverlays)},Pr=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return at([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},Lr=function(t,e){var n,r=t._private,i=(null==e?jr:Ir(e))===jr,o=Pr(t),a=r.bbCachePosKey===o,s=!(e.useCache&&a)||null==r.bbCache;if(s?(a||t.recalculateRenderedStyle(),n=function(t,e){var n,r,i,o,a,s,l,u=t._private.cy,c=u.styleEnabled(),f=u.headless(),d=le(),h=t._private,p=c?t.pstyle("display").value:"element",g=t.isNode(),v=t.isEdge(),m="none"!==p,y=h.rstyle,_=g&&c?t.pstyle("bounds-expansion").pfValue:0;if(m){var b=0;c&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(b=t.pstyle("overlay-padding").value);var w=0;if(c&&(w=t.pstyle("width").pfValue/2),g&&e.includeNodes){var x=t.position();a=x.x,s=x.y;var k=t.outerWidth()/2,E=t.outerHeight()/2;Sr(d,n=a-k,i=s-E,r=a+k,o=s+E)}else if(v&&e.includeEdges)if(c&&!f&&(n=Math.min(y.srcX,y.midX,y.tgtX),r=Math.max(y.srcX,y.midX,y.tgtX),i=Math.min(y.srcY,y.midY,y.tgtY),o=Math.max(y.srcY,y.midY,y.tgtY),Sr(d,n-=w,i-=w,r+=w,o+=w)),c&&!f&&"haystack"===t.pstyle("curve-style").strValue){var z=y.haystackPts||[];if((n=z[0].x)>(r=z[1].x)){var A=n;n=r,r=A}if((i=z[0].y)>(o=z[1].y)){var C=i;i=o,o=C}Sr(d,n-w,i-w,r+w,o+w)}else{for(var T=y.bezierPts||y.linePts||[],S=0;S<T.length;S++){var M=T[S];Sr(d,n=M.x-w,i=M.y-w,r=M.x+w,o=M.y+w)}if(0===T.length){var N=t.source().position(),D=t.target().position();if((n=N.x)>(r=D.x)){var O=n;n=r,r=O}if((i=N.y)>(o=D.y)){var I=i;i=o,o=I}Sr(d,n-=w,i-=w,r+=w,o+=w)}}if(c&&e.includeEdges&&v&&(Dr(d,t,"mid-source"),Dr(d,t,"mid-target"),Dr(d,t,"source"),Dr(d,t,"target")),c&&"yes"===t.pstyle("ghost").value){var P=t.pstyle("ghost-offset-x").pfValue,L=t.pstyle("ghost-offset-y").pfValue;Sr(d,d.x1+P,d.y1+L,d.x2+P,d.y2+L)}var B=h.bodyBounds=h.bodyBounds||{};fe(B,d),ce(B,_),ce(B,1),c&&Sr(d,(n=d.x1)-b,(i=d.y1)-b,(r=d.x2)+b,(o=d.y2)+b);var j=h.overlayBounds=h.overlayBounds||{};fe(j,d),ce(j,_),ce(j,1);var F=h.labelBounds=h.labelBounds||{};null!=F.all?((l=F.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):F.all=le(),c&&e.includeLabels&&(Or(d,t,null),v&&(Or(d,t,"source"),Or(d,t,"target")))}return d.x1=Tr(d.x1),d.y1=Tr(d.y1),d.x2=Tr(d.x2),d.y2=Tr(d.y2),d.w=Tr(d.x2-d.x1),d.h=Tr(d.y2-d.y1),d.w>0&&d.h>0&&m&&(ce(d,_),ce(d,1)),d}(t,Br),r.bbCache=n,r.bbCacheShift.x=r.bbCacheShift.y=0,r.bbCachePosKey=o):n=r.bbCache,!s&&(0!==r.bbCacheShift.x||0!==r.bbCacheShift.y)){var l=de,u=r.bbCacheShift,c=function(t,e){null!=t&&l(t,e)};l(n,u);var f=r.overlayBounds,d=r.labelBounds,h=r.arrowBounds;c(r.bodyBounds,u),c(f,u),null!=h&&(c(h.source,u),c(h.target,u),c(h["mid-source"],u),c(h["mid-target"],u)),null!=d&&(c(d.main,u),c(d.all,u),c(d.source,u),c(d.target,u))}if(r.bbCacheShift.x=r.bbCacheShift.y=0,!i){var p=t.isNode();n=le(),(e.includeNodes&&p||e.includeEdges&&!p)&&Mr(n,e.includeOverlays?r.overlayBounds:r.bodyBounds),e.includeLabels&&Mr(n,r.labelBounds.all),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Br={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeOverlays:!0,useCache:!0},jr=Ir(Br),Fr=zt(Br);Ar.boundingBox=function(t){if(1===this.length&&null!=this[0]._private.bbCache&&(void 0===t||void 0===t.useCache||!0===t.useCache))return t=void 0===t?Br:Fr(t),Lr(this[0],t);var e=le(),n=Fr(t=t||Br);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],o=i._private,a=Pr(i);i.recalculateRenderedStyle(n.useCache&&o.bbCachePosKey===a)}this.updateCompoundBounds();for(var s=0;s<this.length;s++)Mr(e,Lr(this[s],n));return e.x1=Tr(e.x1),e.y1=Tr(e.y1),e.x2=Tr(e.x2),e.y2=Tr(e.y2),e.w=Tr(e.x2-e.x1),e.h=Tr(e.y2-e.y1),e},Ar.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCacheShift.x=e.bbCacheShift.y=0,e.bbCachePosKey=null}return this.emitAndNotify("bounds"),this},Ar.shiftCachedBoundingBox=function(t){for(var e=0;e<this.length;e++){var n=this[e]._private;null!=n.bbCache&&(n.bbCacheShift.x+=t.x,n.bbCacheShift.y+=t.y)}return this.emitAndNotify("bounds"),this},Ar.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes();if(r&&(e=e.filter((function(t){return!t.isParent()}))),g(t)){var i=t;t=function(){return i}}n.startBatch(),e.forEach((function(e,n){return e._private.bbAtOldPos=t(e,n)})).silentPositions(t),r&&this.updateCompoundBounds(!0);var o=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions((function(t){return t._private.bbAtOldPos})),n.endBatch(),o},zr.boundingbox=zr.bb=zr.boundingBox,zr.renderedBoundingbox=zr.renderedBoundingBox;var Rr,qr,Hr=Ar;Rr=qr={};var $r=function(t){t.uppercaseName=M(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=M(t.outerName),Rr[t.name]=function(){var e=this[0],n=e._private;if(e){if(!n.cy._private.styleEnabled)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var r=e.pstyle(t.name);switch(r.strValue){case"label":return e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0;default:return r.pfValue}}},Rr["outer"+t.uppercaseName]=function(){var e=this[0];if(e)return e._private.cy._private.styleEnabled?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},Rr["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},Rr["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};$r({name:"width"}),$r({name:"height"}),qr.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};var Wr=qr,Ur={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},Vr=Object.keys(Ur).reduce((function(t,e){var n=Ur[e],r=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,n.get)},t[r]=n.mult?function(){return function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map((function(t){return Kt(t,i,r)}))}}(this,n.get)}:function(){return function(t,e){if(t.isEdge()){var n=t.cy();return Kt(e(t),n.zoom(),n.pan())}}(this,n.get)},t}),{}),Yr=O({},Cr,Hr,Wr,Vr),Xr=function(t,e){this.recycle(t,e)};function Gr(){return!1}function Kr(){return!0}Xr.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Gr,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Kr:Gr):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Kr;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Kr;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Kr,this.stopPropagation()},isDefaultPrevented:Gr,isPropagationStopped:Gr,isImmediatePropagationStopped:Gr};var Zr=/^([^.]+)(\.(?:[^.]+))?$/,Qr={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Jr=Object.keys(Qr);function ti(t,e){for(var n=0;n<Jr.length;n++){var r=Jr[n];this[r]=t[r]||Qr[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ei=ti.prototype,ni=function(t,e,n,r,i,o,a){h(r)&&(i=r,r=null),a&&(o=null==o?a:O({},o,a));for(var s=p(n)?n:n.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!k(u)){var c=u.match(Zr);if(c&&!1===e(t,u,c[1],c[2]?c[2]:null,r,i,o))break}}},ri=function(t,e){return t.addEventFields(t.context,e),new Xr(e.type,e)};ei.on=ei.addListener=function(t,e,n,r,i){return ni(this,(function(t,e,n,r,i,o,a){h(o)&&t.listeners.push({event:e,callback:o,type:n,namespace:r,qualifier:i,conf:a})}),t,e,n,r,i),this},ei.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},ei.removeListener=ei.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var o=this.listeners,a=function(a){var s=o[a];ni(i,(function(t,e,n,r,i,l){if(s.type===n&&(!r||s.namespace===r)&&(!i||t.qualifierCompare(s.qualifier,i))&&(!l||s.callback===l))return o.splice(a,1),!1}),t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this},ei.emit=ei.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,p(e)||(e=[e]),function(t,e,n){if("event"!==f(n))if(g(n))e(t,ri(t,n));else for(var r=p(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!k(o)){var a=o.match(Zr);a&&e(t,ri(t,{type:a[1],namespace:a[2]?a[2]:null,target:t.context}))}}else e(t,n)}(this,(function(t,o){null!=n&&(i=(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}]).length);for(var a=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,o)){var a=[o];null!=e&&function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])}(a,e),t.beforeEmit(t.context,i,o),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter((function(t){return t!==i})));var s=t.callbackContext(t.context,i,o),l=i.callback.apply(s,a);t.afterEmit(t.context,i,o),!1===l&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);t.bubble(t.context)&&!o.isPropagationStopped()&&t.parent(t.context).emit(o,e)}),t),this.emitting--,this};var ii={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&_(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},oi=function(t){return d(t)?new ar(t):t},ai={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new ti(ii,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},one:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};Wn.eventAliasesOn(ai);var si={nodes:function(t){return this.filter((function(t){return t.isNode()})).filter(t)},edges:function(t){return this.filter((function(t){return t.isEdge()})).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.merge(r):e.merge(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(d(t)||y(t))return new ar(t).filter(this);if(h(t)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(e?t.apply(e,[i,r,this]):t(i,r,this))&&n.merge(i)}return n}return this.spawn()},not:function(t){if(t){d(t)&&(t=this.filter(t));for(var e=[],n=t._private.map,r=0;r<this.length;r++){var i=this[r];n.has(i.id())||e.push(i)}return this.spawn(e)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(d(t))return this.filter(t);for(var e=[],n=this.length<t.length,r=n?t._private.map:this._private.map,i=n?this:t,o=0;o<i.length;o++){var a=r.get(i[o]._private.data.id);a&&e.push(a.ele)}return this.spawn(e)},xor:function(t){var e=this._private.cy;d(t)&&(t=e.$(t));var n=[],r=t,i=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];e.hasElementWithId(i._private.data.id)||n.push(i)}};return i(this,r),i(r,this),this.spawn(n)},diff:function(t){var e=this._private.cy;d(t)&&(t=e.$(t));var n=[],r=[],i=[],o=t,a=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];e.hasElementWithId(o._private.data.id)?i.push(o):n.push(o)}};return a(this,o,n),a(o,this,r),{left:this.spawn(n,{unique:!0}),right:this.spawn(r,{unique:!0}),both:this.spawn(i,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(d(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=[],i=0;i<this.length;i++)r.push(this[i]);for(var o=this._private.map,a=0;a<t.length;a++)!o.has(t[a].id())&&r.push(t[a]);return this.spawn(r)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&d(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(i.has(s)){var l=i.get(s).index;this[l]=a,i.set(s,{ele:a,index:l})}else{var u=this.length++;this[u]=a,i.set(s,{ele:a,index:u})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(e),this.length>1&&t!==this.length-1){var r=this.length-1,i=this[r],o=i._private.data.id;this[r]=void 0,this[t]=i,n.set(o,{ele:i,index:t})}return this.length--,this},unmergeOne:function(t){var e=this._private.map.get((t=t[0])._private.data.id);return e?(this.unmergeAt(e.index),this):this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&d(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(o)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n,r=-1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a>r&&(r=a,n=o)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a<r&&(r=a,n=o)}return{value:r,ele:n}}},li=si;li.u=li["|"]=li["+"]=li.union=li.or=li.add,li["\\"]=li["!"]=li["-"]=li.difference=li.relativeComplement=li.subtract=li.not,li.n=li["&"]=li["."]=li.and=li.intersection=li.intersect,li["^"]=li["(+)"]=li["(-)"]=li.symmetricDifference=li.symdiff=li.xor,li.fnFilter=li.filterFn=li.stdFilter=li.filter,li.complement=li.abscomp=li.absoluteComplement;var ui=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?ht:0}var i=r(t)-r(e);if(0!==i)return i;function o(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var a=o(t)-o(e);if(0!==a)return a;var s=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==s?s:t.poolIndex()-e.poolIndex()},ci={forEach:function(t,e){if(h(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!h(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(ui)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:ht-1}var r=e.target,i=e.source.zDepth(),o=r.zDepth();return Math.max(i,o,0)}}};ci.each=ci.forEach;var fi=zt({nodeDimensionsIncludeLabels:!1}),di={layoutDimensions:function(t){if((t=fi(t)).nodeDimensionsIncludeLabels){var e=this.boundingBox();return{w:e.w,h:e.h}}return{w:this.outerWidth(),h:this.outerHeight()}},layoutPositions:function(t,e,n){var r=this.nodes(),i=this.cy(),o=e.eles,a=function(t){return t.id()},s=A(n,a);t.emit({type:"layoutstart",layout:t}),t.animations=[];var l=e.spacingFactor&&1!==e.spacingFactor,u=function(){if(!l)return null;for(var t=le(),e=0;e<r.length;e++){var n=s(r[e],e);ue(t,n.x,n.y)}return t}(),c=A((function(t,n){var r=s(t,n);return l&&(r=function(t,e,n){var r=e.x1+e.w/2,i=e.y1+e.h/2;return{x:r+(n.x-r)*t,y:i+(n.y-i)*t}}(Math.abs(e.spacingFactor),u,r)),null!=e.transform&&(r=e.transform(t,r)),r}),a);if(e.animate){for(var f=0;f<r.length;f++){var d=r[f],h=c(d,f);if(null==e.animateFilter||e.animateFilter(d,f)){var p=d.animation({position:h,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(p)}else d.position(h)}if(e.fit){var g=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}else if(void 0!==e.zoom&&void 0!==e.pan){var v=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(v)}t.animations.forEach((function(t){return t.play()})),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),qn.all(t.animations.map((function(t){return t.promise()}))).then((function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})}))}else r.positions(c),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(O({},t,{eles:this}))}};function hi(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[t])?r:r=o[t]=e(n)}function pi(t,e){return t=st(t),function(n){return hi(t,e,n)}}function gi(t,e){t=st(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return hi(t,n,e)}}di.createLayout=di.makeLayout=di.layout;var vi={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach((function(t){n(t),t.connectedEdges().forEach(n)})),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=e.hasCompoundNodes(),r=e.style(),i=this;t=!(!t&&void 0!==t),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=r.apply(i);return t?o.emitAndNotify("style"):o.emit("style"),this},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(g(t))r.applyBypass(this,t,!1),this.emitAndNotify("style");else if(d(t)){if(void 0===e){var i=this[0];return i?r.getStylePropertyValue(i,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++)n.removeAllBypasses(this[r],!1);else{t=t.split(/\s+/);for(var i=0;i<this.length;i++)n.removeBypasses(this[i],t,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++)i*=o[a].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function mi(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function yi(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var a=i._private;if(!e(i))return!1;if(i.isNode())return!o||mi(i,r);var s=a.source,l=a.target;return n(s)&&(!o||mi(s,n))&&(s===l||n(l)&&(!o||mi(l,n)))}}}var _i=pi("eleTakesUpSpace",(function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())}));vi.takesUpSpace=gi("takesUpSpace",yi({ok:_i}));var bi=pi("eleInteractive",(function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&_i(t)})),wi=pi("parentInteractive",(function(t){return"visible"===t.pstyle("visibility").value&&_i(t)}));vi.interactive=gi("interactive",yi({ok:bi,parentOk:wi,edgeOkViaNode:_i})),vi.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var xi=pi("eleVisible",(function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&_i(t)}));vi.visible=gi("visible",yi({ok:xi,edgeOkViaNode:_i})),vi.hidden=function(){var t=this[0];if(t)return!t.visible()},vi.isBundledBezier=gi("isBundledBezier",(function(){return!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()})),vi.bypass=vi.css=vi.style,vi.renderedCss=vi.renderedStyle,vi.removeBypass=vi.removeCss=vi.removeStyle,vi.pstyle=vi.parsedStyle;var ki={};function Ei(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length&&h(e[0])){var o=e[0];this.on(t.event,o)}else if(0===e.length||1===e.length&&p(e[0])){for(var a=1===e.length?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(l);if(void 0!==f&&(u=f,!f))return this}u&&(l._private[t.field]=t.value,c&&n.push(l))}var d=this.spawn(n);d.updateStyle(),d.emit(t.event),a&&d.emit(a)}return this}}function zi(t){ki[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},ki[t.on]=Ei({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),ki[t.off]=Ei({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}zi({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),zi({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),zi({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),zi({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),ki.deselect=ki.unselect,ki.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},zi({field:"active",on:"activate",off:"unactivate"}),ki.inactive=function(){var t=this[0];if(t)return!t._private.active};var Ai={},Ci=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target();if(t.noIncomingEdges&&c===i&&u!==i||t.noOutgoingEdges&&u===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)}},Ti=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target();t.outgoing&&l===i?(n.push(s),n.push(u)):t.incoming&&u===i&&(n.push(s),n.push(l))}}return this.spawn(n,{unique:!0}).filter(e)}},Si=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();i[u]||(i[u]=!0,r.push(l),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(e)}};function Mi(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,{unique:!0}).filter(e)}}function Ni(t){return function(e){var n=[],r=this._private.cy,i=t||{};d(e)&&(e=r.$(e));for(var o=0;o<e.length;o++)for(var a=e[o]._private.edges,s=0;s<a.length;s++){var l=a[s],u=l._private.data,c=this.hasElementWithId(u.source)&&e.hasElementWithId(u.target),f=e.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||f){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!f)continue}n.push(l)}}return this.spawn(n,{unique:!0})}}function Di(t){return t=O({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,l=s._private.data.id,u=a.data.target,c=s._private.edges,f=0;f<c.length;f++){var d=c[f],h=d._private.data,p=h.target,g=h.source,v=p===u&&g===l;(i.codirected&&v||!i.codirected&&(v||l===p&&u===g))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(e)}}Ai.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},O(Ai,{roots:Ci({noIncomingEdges:!0}),leaves:Ci({noOutgoingEdges:!0}),outgoers:fr(Ti({outgoing:!0}),"outgoers"),successors:Si({outgoing:!0}),incomers:fr(Ti({incoming:!0}),"incomers"),predecessors:Si({incoming:!0})}),O(Ai,{neighborhood:fr((function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,{unique:!0}).filter(t)}),"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Ai.neighbourhood=Ai.neighborhood,Ai.closedNeighbourhood=Ai.closedNeighborhood,Ai.openNeighbourhood=Ai.openNeighborhood,O(Ai,{source:fr((function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e}),"source"),target:fr((function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e}),"target"),sources:Mi({attr:"source"}),targets:Mi({attr:"target"})}),O(Ai,{edgesWith:fr(Ni(),"edgesWith"),edgesTo:fr(Ni({thisIsSrc:!0}),"edgesTo")}),O(Ai,{connectedEdges:fr((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++)e.push(i[o])}return this.spawn(e,{unique:!0}).filter(t)}),"connectedEdges"),connectedNodes:fr((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)}),"connectedNodes"),parallelEdges:fr(Di(),"parallelEdges"),codirectedEdges:fr(Di({codirected:!0}),"codirectedEdges")}),O(Ai,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),o=[];null!=t&&i.empty()&&(i=t.sources());var a=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var s=function(){var t=n.collection();o.push(t);var r=i[0];a(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return a(e,t)}}),t.forEach((function(e){e.connectedEdges().forEach((function(e){t.has(e.source())&&t.has(e.target())&&t.merge(e)}))}))};do{s()}while(i.length>0);return o},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Ai.componentsOf=Ai.components;var Oi=function(t,e,n){for(var r=null!=n?n:xt();t.hasElementWithId(r);)r=xt();return r},Ii=function(t,e,n){if(void 0!==t&&w(t)){var r=new Mt,i=!1;if(e){if(e.length>0&&g(e[0])&&!_(e[0])){i=!0;for(var o=[],a=new Dt,s=0,l=e.length;s<l;s++){var u=e[s];null==u.data&&(u.data={});var c=u.data;if(null==c.id)c.id=Oi(t);else if(t.hasElementWithId(c.id)||a.has(c.id))continue;var f=new Ot(t,u,!1);o.push(f),a.add(c.id)}e=o}}else e=[];this.length=0;for(var d=0,h=e.length;d<h;d++){var p=e[d];if(null!=p){var v=p._private.data.id;(null==n||n.unique&&!r.has(v))&&(r.set(v,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={cy:t,map:r},i&&this.restore()}else yt("A collection must have a reference to the core")},Pi=Ot.prototype=Ii.prototype;Pi.instanceString=function(){return"collection"},Pi.spawn=function(t,e,n){return w(t)||(n=e,e=t,t=this.cy()),new Ii(t,e,n)},Pi.spawnSelf=function(){return this.spawn(this)},Pi.cy=function(){return this._private.cy},Pi.renderer=function(){return this._private.cy.renderer()},Pi.element=function(){return this[0]},Pi.collection=function(){return b(this)?this:new Ii(this._private.cy,[this])},Pi.unique=function(){return new Ii(this._private.cy,this,{unique:!0})},Pi.hasElementWithId=function(t){return this._private.map.has(t)},Pi.getElementById=function(t){var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new Ii(e)},Pi.$id=Pi.getElementById,Pi.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Pi.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},Pi.indexOfId=function(t){return this._private.map.get(t).index},Pi.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(g(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,l=t.data.target;null!=s&&s!==i.source&&(a.source=s,o=!0),null!=l&&l!==i.target&&(a.target=l,o=!0),o&&(e=e.move(a))}else{var u=t.data.parent;null==u&&null==i.parent||u===i.parent||(void 0===u&&(u=null),e=e.move({parent:u}))}}t.position&&e.position(t.position);var c=function(n,i,o){var a=t[n];null!=a&&a!==r[n]&&(a?e[i]():e[o]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var f={data:wt(r.data),position:wt(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,classes:null};f.classes="";var d=0;return r.classes.forEach((function(t){return f.classes+=0==d++?t:" "+t})),f}}},Pi.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Pi.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Ot(t,r,!1);e.push(i)}return new Ii(t,e)},Pi.copy=Pi.clone,Pi.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.cy(),o=i._private,a=[],s=[],l=0,u=this.length;l<u;l++){var c=this[l];r&&!c.removed()||(c.isNode()?a.push(c):s.push(c))}t=a.concat(s);var f=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var h=t[e],p=h._private,g=p.data;if(h.clearTraversalCache(),r||p.removed)if(void 0===g.id)g.id=Oi(i);else if(v(g.id))g.id=""+g.id;else{if(k(g.id)||!d(g.id)){yt("Can not create element with invalid string ID `"+g.id+"`"),f();continue}if(i.hasElementWithId(g.id)){yt("Can not create second element with ID `"+g.id+"`"),f();continue}}var m=g.id;if(h.isNode()){var y=p.position;null==y.x&&(y.x=0),null==y.y&&(y.y=0)}if(h.isEdge()){for(var _=h,b=["source","target"],w=b.length,x=!1,E=0;E<w;E++){var z=b[E],A=g[z];v(A)&&(A=g[z]=""+g[z]),null==A||""===A?(yt("Can not create edge `"+m+"` with unspecified "+z),x=!0):i.hasElementWithId(A)||(yt("Can not create edge `"+m+"` with nonexistant "+z+" `"+A+"`"),x=!0)}if(x){f();continue}var C=i.getElementById(g.source),T=i.getElementById(g.target);C._private.edges.push(_),T._private.edges.push(_),_._private.source=C,_._private.target=T}p.map=new Mt,p.map.set(m,{ele:h,index:0}),p.removed=!1,r&&i.addToPool(h)}for(var S=0;S<a.length;S++){var M=a[S],N=M._private.data;v(N.parent)&&(N.parent=""+N.parent);var D=N.parent;if(null!=D){var O=i.getElementById(D);if(O.empty())N.parent=void 0;else{for(var I=!1,P=O;!P.empty();){if(M.same(P)){I=!0,N.parent=void 0;break}P=P.parent()}I||(O[0]._private.children.push(M),M._private.parent=O[0],o.hasCompoundNodes=!0)}}}if(t.length>0){for(var L=new Ii(i,t),B=0;B<L.length;B++){var j=L[B];j.isNode()||(j.parallelEdges().clearTraversalCache(),j.source().clearTraversalCache(),j.target().clearTraversalCache())}(o.hasCompoundNodes?i.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):L).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?L.emitAndNotify("add"):r&&L.emit("add")}return this},Pi.removed=function(){var t=this[0];return t&&t._private.removed},Pi.inside=function(){var t=this[0];return t&&!t._private.removed},Pi.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r={},i=this._private.cy;function o(t){var i=r[t.id()];e&&t.removed()||i||(r[t.id()]=!0,t.isNode()?(n.push(t),function(t){for(var e=t._private.edges,n=0;n<e.length;n++)o(e[n])}(t),function(t){for(var e=t._private.children,n=0;n<e.length;n++)o(e[n])}(t)):n.unshift(t))}for(var a=0,s=this.length;a<s;a++)o(this[a]);function l(t,e){At(t._private.edges,e),t.clearTraversalCache()}function u(t){t.clearTraversalCache()}var c=[];function f(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();At(n,e),e._private.parent=null,c.ids[r]||(c.ids[r]=!0,c.push(t))}c.ids={},this.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var d=0;d<n.length;d++){var h=n[d];if(h.isEdge()){var p=h.source()[0],g=h.target()[0];l(p,h),l(g,h);for(var v=h.parallelEdges(),m=0;m<v.length;m++){var y=v[m];u(y),y.isBundledBezier()&&y.dirtyBoundingBoxCache()}}else{var _=h.parent();0!==_.length&&f(_,h)}e&&(h._private.removed=!0)}var b=i._private.elements;i._private.hasCompoundNodes=!1;for(var w=0;w<b.length;w++)if(b[w].isParent()){i._private.hasCompoundNodes=!0;break}var x=new Ii(this.cy(),n);x.size()>0&&(t?x.emitAndNotify("remove"):e&&x.emit("remove"));for(var k=0;k<c.length;k++){var E=c[k];e&&E.removed()||E.updateStyle()}return x},Pi.move=function(t){var e=this._private.cy,n=this;if(void 0!==t.source||void 0!==t.target){var r=t.source,i=t.target,o=null!=r&&e.hasElementWithId(r),a=null!=i&&e.hasElementWithId(i);(o||a)&&(e.batch((function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],s=e._private.data;e.isEdge()&&(o&&(s.source=r),a&&(s.target=i))}n.restore(!1,!1)})),n.emitAndNotify("move"))}else if(void 0!==t.parent){var s=t.parent;if(null===s||e.hasElementWithId(s)){var l=null===s?void 0:s;e.batch((function(){var t=n.remove(!1,!1);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var r=n[e],i=r._private.data;r.isNode()&&(i.parent=l)}t.restore(!1,!1)})),n.emitAndNotify("move")}}return this},[In,Un,Vn,lr,dr,_r,br,Yr,ai,si,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},ci,di,vi,ki,Ai].forEach((function(t){O(Pi,t)}));var Li={add:function(t){var e,n=this;if(y(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],o=0;o<r.length;o++)i.push(r[o].json());e=new Ii(n,i)}}else if(p(t))e=new Ii(n,t);else if(g(t)&&(p(t.nodes)||p(t.edges))){for(var a=t,s=[],l=["nodes","edges"],u=0,c=l.length;u<c;u++){var f=l[u],d=a[f];if(p(d))for(var h=0,v=d.length;h<v;h++){var m=O({group:f},d[h]);s.push(m)}}e=new Ii(n,s)}else e=new Ot(n,t).collection();return e},remove:function(t){return y(t)||d(t)&&(t=this.$(t)),t.remove()}},Bi=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+1/6*(i.dx+2*(o.dx+a.dx)+s.dx)*r,n.v=n.v+l*r,n}return function t(e,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,l.tension=e,l.friction=r,a=(o=null!==i)?(c=t(e,r))/i*.016:.016;s=n(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(t){return u[t*(u.length-1)|0]}:c}}(),ji=function(t,e,n,r){var i=function(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,l=11,u=1/(l-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var f=0;f<4;++f)if("number"!=typeof arguments[f]||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var d=c?new Float32Array(l):new Array(l);function h(t,e){return 1-3*e+3*t}function p(t,e){return 3*e-6*t}function g(t){return 3*t}function v(t,e,n){return((h(e,n)*t+p(e,n))*t+g(e))*t}function m(t,e,n){return 3*h(e,n)*t*t+2*p(e,n)*t+g(e)}function y(e){for(var r=0,c=1,f=l-1;c!==f&&d[c]<=e;++c)r+=u;var h=r+(e-d[--c])/(d[c+1]-d[c])*u,p=m(h,t,n);return p>=o?function(e,r){for(var o=0;o<i;++o){var a=m(r,t,n);if(0===a)return r;r-=(v(r,t,n)-e)/a}return r}(e,h):0===p?h:function(e,r,i){var o,l,u=0;do{(o=v(l=r+(i-r)/2,t,n)-e)>0?i=l:r=l}while(Math.abs(o)>a&&++u<s);return l}(e,r,r+u)}var _=!1;function b(){_=!0,t===e&&n===r||function(){for(var e=0;e<l;++e)d[e]=v(e*u,t,n)}()}var w=function(i){return _||b(),t===e&&n===r?i:0===i?0:1===i?1:v(y(i),e,r)};w.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var x="generateBezier("+[t,e,n,r]+")";return w.toString=function(){return x},w}(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},Fi={linear:function(t,e,n){return t+(e-t)*n},ease:ji(.25,.1,.25,1),"ease-in":ji(.42,0,1,1),"ease-out":ji(0,0,.58,1),"ease-in-out":ji(.42,0,.58,1),"ease-in-sine":ji(.47,0,.745,.715),"ease-out-sine":ji(.39,.575,.565,1),"ease-in-out-sine":ji(.445,.05,.55,.95),"ease-in-quad":ji(.55,.085,.68,.53),"ease-out-quad":ji(.25,.46,.45,.94),"ease-in-out-quad":ji(.455,.03,.515,.955),"ease-in-cubic":ji(.55,.055,.675,.19),"ease-out-cubic":ji(.215,.61,.355,1),"ease-in-out-cubic":ji(.645,.045,.355,1),"ease-in-quart":ji(.895,.03,.685,.22),"ease-out-quart":ji(.165,.84,.44,1),"ease-in-out-quart":ji(.77,0,.175,1),"ease-in-quint":ji(.755,.05,.855,.06),"ease-out-quint":ji(.23,1,.32,1),"ease-in-out-quint":ji(.86,0,.07,1),"ease-in-expo":ji(.95,.05,.795,.035),"ease-out-expo":ji(.19,1,.22,1),"ease-in-out-expo":ji(1,0,0,1),"ease-in-circ":ji(.6,.04,.98,.335),"ease-out-circ":ji(.075,.82,.165,1),"ease-in-out-circ":ji(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return Fi.linear;var r=Bi(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":ji};function Ri(t,e,n,r,i){if(1===r)return n;var o=i(e,n,r);return null==t||((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max))),o}function qi(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function Hi(t,e,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=qi(t,i),s=qi(e,i);if(v(a)&&v(s))return Ri(o,a,s,n,r);if(p(a)&&p(s)){for(var l=[],u=0;u<s.length;u++){var c=a[u],f=s[u];if(null!=c&&null!=f){var d=Ri(o,c,f,n,r);l.push(d)}else l.push(f)}return l}}function $i(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,l=a.startTime,u=(r?t:t.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=Fi.linear;else{var c,f,h;c=d(s)?u.parse("transition-timing-function",s).value:s,d(c)?(f=c,h=[]):(f=c[1],h=c.slice(2).map((function(t){return+t}))),h.length>0?("spring"===f&&h.push(a.duration),a.easingImpl=Fi[f].apply(null,h)):a.easingImpl=Fi[f]}var p,g=a.easingImpl;if(p=0===a.duration?1:(n-l)/a.duration,a.applying&&(p=a.progress),p<0?p=0:p>1&&(p=1),null==a.delay){var v=a.startPosition,m=a.position;if(m&&i&&!t.locked()){var y={};Wi(v.x,m.x)&&(y.x=Hi(v.x,m.x,p,g)),Wi(v.y,m.y)&&(y.y=Hi(v.y,m.y,p,g)),t.position(y)}var _=a.startPan,b=a.pan,w=o.pan,x=null!=b&&r;x&&(Wi(_.x,b.x)&&(w.x=Hi(_.x,b.x,p,g)),Wi(_.y,b.y)&&(w.y=Hi(_.y,b.y,p,g)),t.emit("pan"));var k=a.startZoom,E=a.zoom,z=null!=E&&r;z&&(Wi(k,E)&&(o.zoom=Hi(k,E,p,g)),t.emit("zoom")),(x||z)&&t.emit("viewport");var A=a.style;if(A&&A.length>0&&i){for(var C=0;C<A.length;C++){var T=A[C],S=T.name,M=a.startStyle[S],N=Hi(M,T,p,g,u.properties[M.name]);u.overrideBypass(t,S,N)}t.emit("style")}}return a.progress=p,p}function Wi(t,e){return!(null==t||null==e||!(v(t)&&v(e)||t&&e))}function Ui(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function Vi(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,o=i.animation.current,a=i.animation.queue,s=!1;if(!n&&"none"===e.pstyle("display").value){o=o.splice(0,o.length).concat(a.splice(0,a.length));for(var l=0;l<o.length;l++)o[l].stop()}if(0===o.length){var u=a.shift();u&&o.push(u)}for(var c=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},f=o.length-1;f>=0;f--){var d=o[f],h=d._private;h.stopped?(o.splice(f,1),h.hooked=!1,h.playing=!1,h.started=!1,c(h.frames)):(h.playing||h.applying)&&(h.playing&&h.applying&&(h.applying=!1),h.started||Ui(0,d,t),$i(e,d,t,n),h.applying&&(h.applying=!1),c(h.frames),null!=h.step&&h.step(t),d.completed()&&(o.splice(f,1),h.hooked=!1,h.playing=!1,h.started=!1,c(h.completes)),s=!0)}return n||0!==o.length||0!==a.length||r.push(e),s}for(var o=!1,a=0;a<n.length;a++){var s=i(n[a]);o=o||s}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var Yi={animate:Wn.animate(),animation:Wn.animation(),animated:Wn.animated(),clearQueue:Wn.clearQueue(),delay:Wn.delay(),delayAnimation:Wn.delayAnimation(),stop:Wn.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender((function(e,n){Vi(n,t)}),e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&nt((function(n){Vi(n,t),e()}))}()}}},Xi={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&_(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},Gi=function(t){return d(t)?new ar(t):t},Ki={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new ti(Xi,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,Gi(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,Gi(e),n),this},one:function(t,e,n){return this.emitter().one(t,Gi(e),n),this},once:function(t,e,n){return this.emitter().one(t,Gi(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};Wn.eventAliasesOn(Ki);var Zi={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};Zi.jpeg=Zi.jpg;var Qi={layout:function(t){if(null!=t)if(null!=t.name){var e,n=t.name,r=this.extension("layout",n);if(null!=r)return e=d(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$(),new r(O({},t,{cy:this,eles:e}));yt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else yt("A `name` must be specified to make a layout");else yt("Layout options must be specified to make a layout")}};Qi.createLayout=Qi.makeLayout=Qi.layout;var Ji={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.isDestroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach((function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)}))}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch((function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}}))}},to=zt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),eo={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);if(null!=e){void 0!==t.wheelSensitivity&&bt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=to(t);n.cy=this,this._private.renderer=new e(n),this.notify("init")}else yt("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach((function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]}))},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};eo.invalidateDimensions=eo.resize;var no={collection:function(t,e){return d(t)?this.$(t):y(t)?t.collection():p(t)?new Ii(this,t,e):new Ii(this)},nodes:function(t){var e=this.$((function(t){return t.isNode()}));return t?e.filter(t):e},edges:function(t){var e=this.$((function(t){return t.isEdge()}));return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};no.elements=no.filter=no.$;var ro={apply:function(t){var e=this._private,n=e.cy.collection();e.newStyle&&(e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0));for(var r=0;r<t.length;r++){var i=t[r],o=this.getContextMeta(i);if(!o.empty){var a=this.getContextStyle(o),s=this.applyContextStyle(o,a,i);e.newStyle||this.updateTransitions(i,s.diffProps),this.updateStyleHints(i)&&n.merge(i)}}return e.newStyle=!1,n},getPropertiesDiff:function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var o=[],a={},s=0;s<this.length;s++){var l=this[s],u="t"===e[s],c="t"===t[s]!==u,f=l.mappedProperties.length>0;if(c||u&&f){var d=void 0;c&&f||c?d=l.properties:f&&(d=l.mappedProperties);for(var h=0;h<d.length;h++){for(var p=d[h],g=p.name,v=!1,m=s+1;m<this.length&&("t"!==e[m]||!(v=null!=this[m].properties[p.name]));m++);a[g]||v||(a[g]=!0,o.push(g))}}}return n[r]=o,o},getContextMeta:function(t){var e,n="",r=t._private.styleCxtKey||"";this._private.newStyle&&(r="");for(var i=0;i<this.length;i++){var o=this[i];n+=o.selector&&o.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},getContextStyle:function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if("t"===e[i])for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[e]=r,r},applyContextStyle:function(t,e,n){for(var r=t.diffPropNames,i={},o=this.types,a=0;a<r.length;a++){var s=r[a],l=e[s],u=n.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===o.fn&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(n))===c.prevFnValue)continue}var f=i[s]={prev:u};this.applyParsedProperty(n,l),f.next=n.pstyle(s),f.next&&f.next.bypass&&(f.next=f.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(t){var e,n=t._private,r=this,i=r.propertyGroupKeys,o=function(t,e,n){return r.getPropertiesHash(t,e,n)},a=n.styleKey;if(t.removed())return!1;var s="nodes"===n.group,l=t._private.style;e=Object.keys(l);for(var u=0;u<i.length;u++)n.styleKeys[i[u]]=0;for(var c=function(t,e){return n.styleKeys[e]=ot(t,n.styleKeys[e])},f=function(t){return-128<t&&t<128&&Math.floor(t)!==t?-(1024*t|0):t},d=0;d<e.length;d++){var h=e[d],p=l[h];if(null!=p){var g=this.properties[h],v=g.type,m=g.groupKey;if(v.number){var y=null!=p.pfValue?p.pfValue:p.value;if(v.multiple)for(var _=0;_<y.length;_++)c(f(y[_]),m);else c(f(y),m)}else for(var b=p.strValue,w=0;w<b.length;w++)c(b.charCodeAt(w),m)}}for(var x=0,k=0;k<i.length;k++)x=ot(n.styleKeys[i[k]],x);n.styleKey=x;var E=n.labelDimsKey=n.styleKeys.labelDimensions;if(n.labelKey=o(t,["label"],E),n.labelStyleKey=ot(n.styleKeys.commonLabel,n.labelKey),s||(n.sourceLabelKey=o(t,["source-label"],E),n.sourceLabelStyleKey=ot(n.styleKeys.commonLabel,n.sourceLabelKey),n.targetLabelKey=o(t,["target-label"],E),n.targetLabelStyleKey=ot(n.styleKeys.commonLabel,n.targetLabelKey)),s){var z=n.styleKeys,A=z.pie;n.nodeKey=at([z.nodeBorder,z.backgroundImage,z.compound,A],z.nodeBody),n.hasPie=0!=A}return a!==n.styleKey},clearStyleHints:function(t){var e=t._private;e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},applyParsedProperty:function(t,e){var n,r=this,i=e,o=t._private.style,a=r.types,s=r.properties[i.name].type,l=i.bypass,u=o[i.name],c=u&&u.bypass,f=t._private,d=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},h=function(){var e=d(u),n=d(i);r.checkTriggers(t,i.name,e,n)};if("curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",l)),i.delete)return o[i.name]=void 0,h(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,h(),!0):(h(),!0);if(i.deleteBypass)return u?!!u.bypass&&(o[i.name]=u.bypassed,h(),!0):(h(),!0);var p=function(){bt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var g,m=i.field.split("."),y=f.data,_=0;_<m.length&&y;_++)y=y[m[_]];if(null==y)return p(),!1;if(!v(y))return bt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((g=0===b?0:(y-i.fieldMin)/b)<0?g=0:g>1&&(g=1),s.color){var w=i.valueMin[0],x=i.valueMin[1],k=i.valueMax[1],E=i.valueMin[2],z=i.valueMax[2],A=null==i.valueMin[3]?1:i.valueMin[3],C=null==i.valueMax[3]?1:i.valueMax[3],T=[Math.round(w+(i.valueMax[0]-w)*g),Math.round(x+(k-x)*g),Math.round(E+(z-E)*g),Math.round(A+(C-A)*g)];n={bypass:i.bypass,name:i.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else{if(!s.number)return!1;n=this.parse(i.name,i.valueMin+(i.valueMax-i.valueMin)*g,i.bypass,"mapping")}if(!n)return p(),!1;n.mapping=i,i=n;break;case a.data:for(var S=i.field.split("."),M=f.data,N=0;N<S.length&&M;N++)M=M[S[N]];if(null!=M&&(n=this.parse(i.name,M,i.bypass,"mapping")),!n)return p(),!1;n.mapping=i,i=n;break;case a.fn:var D=null!=i.fnValue?i.fnValue:(0,i.value)(t);if(i.prevFnValue=D,null==D)return bt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,D,i.bypass,"mapping")))return bt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=wt(i),i=n;break;case void 0:break;default:return!1}return l?(i.bypassed=c?u.bypassed:u,o[i.name]=i):c?u.bypassed=i:o[i.name]=i,h(),!0},cleanElements:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else r._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],f=t.pstyle(c),d=e[c];if(d){var h=d.prev,g=null!=d.next?d.next:f,m=!1,y=void 0;h&&(v(h.pfValue)&&v(g.pfValue)?y=h.pfValue+1e-6*(m=g.pfValue-h.pfValue):v(h.value)&&v(g.value)?y=h.value+1e-6*(m=g.value-h.value):p(h.value)&&p(g.value)&&(m=h.value[0]!==g.value[0]||h.value[1]!==g.value[1]||h.value[2]!==g.value[2],y=h.strValue),m&&(s[c]=g.strValue,this.applyBypass(t,c,y),l=!0))}}if(!l)return;r.transitioning=!0,new qn((function(e){a>0?t.delayAnimation(a).play().promise().then(e):e()})).then((function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1}))}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},checkTrigger:function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);null!=s&&s(n,r)&&o(a)},checkZOrderTrigger:function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,(function(t){return t.triggersZOrder}),(function(){i._private.cy.notify("zorder",t)}))},checkBoundsTrigger:function(t,e,n,r){this.checkTrigger(t,e,n,r,(function(t){return t.triggersBounds}),(function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"bezier"!==t.pstyle("curve-style").value&&("curve-style"!==e||"bezier"!==n&&"bezier"!==r)||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach((function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()}))}))},checkTriggers:function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)}},io={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var o=0;o<this.properties.length;o++){var a=this.parse(this.properties[o].name,n,!0);a&&i.push(a)}}else if(d(e)){var s=this.parse(e,n,!0);s&&i.push(s)}else{if(!g(e))return!1;var l=e;r=n;for(var u=Object.keys(l),c=0;c<u.length;c++){var f=u[c],h=l[f];if(void 0===h&&(h=l[T(f)]),void 0!==h){var p=this.parse(f,h,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var v=!1,m=0;m<t.length;m++){for(var y=t[m],_={},b=void 0,w=0;w<i.length;w++){var x=i[w];if(r){var k=y.pstyle(x.name);b=_[x.name]={prev:k}}v=this.applyParsedProperty(y,x)||v,r&&(b.next=y.pstyle(x.name))}v&&this.updateStyleHints(y),r&&this.updateTransitions(y,_,!0)}return v},overrideBypass:function(t,e,n){e=C(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,l=a.mutiple,u=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=s?"rgb("+n.join(",")+")":l?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,u,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),f=o[l.name]={prev:u};this.applyParsedProperty(i,c),f.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}},oo={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(o&&e&&o.getComputedStyle)return o.getComputedStyle(e).getPropertyValue(t)}},ao={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],o=this.getStylePropertyValue(t,i.name,e);null!=o&&(n[i.name]=o,n[T(i.name)]=o)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,o=t.pstyle(r.name);if(o){var a=o.value,s=o.units,l=o.strValue;if(n&&i.number&&null!=a&&v(a)){var u=t.cy().zoom(),c=function(t){return t*u},f=function(t,e){return c(t)+e},h=p(a);return(h?s.every((function(t){return null!=t})):null!=s)?h?a.map((function(t,e){return f(t,s[e])})).join(" "):f(a,s):h?a.map((function(t){return d(t)?t:""+c(t)})).join(" "):""+c(a)}if(null!=l)return l}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,o=t.pstyle(i);void 0!==o&&(o=g(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a],l=r[a]||r[C(a)],u=this.parse(l.name,s);u&&e.push(u)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,o,a,s,l=n;for(a=0;a<e.length;a++)if(null!=(r=t.pstyle(e[a],!1)))if(null!=r.pfValue)l=ot(o,l);else for(i=r.strValue,s=0;s<i.length;s++)o=i.charCodeAt(s),l=ot(o,l);return l}};ao.getPropertiesHash=ao.getNonDefaultPropertiesHash;var so={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,o=Object.keys(i);this.selector(r);for(var a=0;a<o.length;a++){var s=o[a];this.css(s,i[s])}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}},lo={appendFromString:function(t){var e,n,r,i=""+t;function o(){i=i.length>e.length?i.substr(e.length):""}function a(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[\/][*](\s|.)+?[*][\/]/g,"");!i.match(/^\s*$/);){var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){bt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}e=s[0];var l=s[1];if("core"!==l&&new ar(l).invalid)bt("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),o();else{var u=s[2],c=!1;n=u;for(var f=[];!n.match(/^\s*$/);){var d=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!d){bt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}r=d[0];var h=d[1],p=d[2];this.properties[h]?this.parse(h,p)?(f.push({name:h,val:p}),a()):(bt("Skipping property: Invalid property definition in: "+r),a()):(bt("Skipping property: Invalid property name in: "+r),a())}if(c){o();break}this.selector(l);for(var g=0;g<f.length;g++){var v=f[g];this.css(v.name,v.val)}o()}}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},uo={};!function(){var t=N,e=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(e){var n=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+n+")\\s*\\,\\s*("+n+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];uo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","square","pentagon","hexagon","concavehexagon","concave-hexagon","heptagon","octagon","tag","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return d(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]}};var i={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||0==t&&0!=e||0!=t&&0==e},any:function(t,e){return t!=e}},o=uo.types,a=[{name:"label",type:o.text,triggersBounds:i.any},{name:"text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any}],s=[{name:"source-label",type:o.text,triggersBounds:i.any},{name:"source-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:o.size,triggersBounds:i.any}],l=[{name:"target-label",type:o.text,triggersBounds:i.any},{name:"target-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:o.size,triggersBounds:i.any}],u=[{name:"font-family",type:o.fontFamily,triggersBounds:i.any},{name:"font-style",type:o.fontStyle,triggersBounds:i.any},{name:"font-weight",type:o.fontWeight,triggersBounds:i.any},{name:"font-size",type:o.size,triggersBounds:i.any},{name:"text-transform",type:o.textTransform,triggersBounds:i.any},{name:"text-wrap",type:o.textWrap,triggersBounds:i.any},{name:"text-max-width",type:o.size,triggersBounds:i.any},{name:"text-outline-width",type:o.size,triggersBounds:i.any}],c=[{name:"text-valign",type:o.valign,triggersBounds:i.any},{name:"text-halign",type:o.halign,triggersBounds:i.any},{name:"color",type:o.color},{name:"text-outline-color",type:o.color},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-background-color",type:o.color},{name:"text-background-opacity",type:o.zeroOneNumber},{name:"text-background-padding",type:o.size,triggersBounds:i.any},{name:"text-border-opacity",type:o.zeroOneNumber},{name:"text-border-color",type:o.color},{name:"text-border-width",type:o.size,triggersBounds:i.any},{name:"text-border-style",type:o.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:o.textBackgroundShape,triggersBounds:i.any}],f=[{name:"events",type:o.bool},{name:"text-events",type:o.bool}],h=[{name:"display",type:o.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:o.visibility,triggersZOrder:i.any},{name:"opacity",type:o.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:o.zeroOneNumber},{name:"min-zoomed-font-size",type:o.size},{name:"z-compound-depth",type:o.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:o.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:o.nonNegativeInt,triggersZOrder:i.any}],p=[{name:"overlay-padding",type:o.size,triggersBounds:i.any},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero}],g=[{name:"transition-property",type:o.propList},{name:"transition-duration",type:o.time},{name:"transition-delay",type:o.time},{name:"transition-timing-function",type:o.easing}],v=[{name:"height",type:o.nodeSize,triggersBounds:i.any},{name:"width",type:o.nodeSize,triggersBounds:i.any},{name:"shape",type:o.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:o.polygonPointList,triggersBounds:i.any},{name:"background-color",type:o.color},{name:"background-fill",type:o.fill},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-blacken",type:o.nOneOneNumber},{name:"background-gradient-stop-colors",type:o.colors},{name:"background-gradient-stop-positions",type:o.percentages},{name:"background-gradient-direction",type:o.gradientDirection},{name:"padding",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:o.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:o.size,triggersBounds:i.any}],m=[{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size,triggersBounds:i.any},{name:"border-style",type:o.borderStyle}],y=[{name:"background-image",type:o.urls},{name:"background-image-crossorigin",type:o.bgCrossOrigin},{name:"background-image-opacity",type:o.zeroOneNumbers},{name:"background-position-x",type:o.bgPos},{name:"background-position-y",type:o.bgPos},{name:"background-width-relative-to",type:o.bgRelativeTo},{name:"background-height-relative-to",type:o.bgRelativeTo},{name:"background-repeat",type:o.bgRepeat},{name:"background-fit",type:o.bgFit},{name:"background-clip",type:o.bgClip},{name:"background-width",type:o.bgWH},{name:"background-height",type:o.bgWH},{name:"background-offset-x",type:o.bgPos},{name:"background-offset-y",type:o.bgPos}],_=[{name:"position",type:o.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:o.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:o.size,triggersBounds:i.any},{name:"min-width-bias-left",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:o.size,triggersBounds:i.any},{name:"min-height-bias-top",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:o.sizeMaybePercent,triggersBounds:i.any}],b=[{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"line-fill",type:o.fill},{name:"line-cap",type:o.lineCap},{name:"line-dash-pattern",type:o.numbers},{name:"line-dash-offset",type:o.number},{name:"line-gradient-stop-colors",type:o.colors},{name:"line-gradient-stop-positions",type:o.percentages},{name:"curve-style",type:o.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:o.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:o.size,triggersBounds:i.any},{name:"control-point-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:o.numbers,triggersBounds:i.any},{name:"taxi-turn",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:o.size,triggersBounds:i.any},{name:"taxi-direction",type:o.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:o.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:o.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:o.angle,triggersBounds:i.any},{name:"loop-sweep",type:o.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:o.size,triggersBounds:i.any},{name:"target-distance-from-node",type:o.size,triggersBounds:i.any}],w=[{name:"ghost",type:o.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:o.zeroOneNumber}],x=[{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size},{name:"outside-texture-bg-color",type:o.color},{name:"outside-texture-bg-opacity",type:o.zeroOneNumber}],k=[];uo.pieBackgroundN=16,k.push({name:"pie-size",type:o.sizeMaybePercent});for(var E=1;E<=uo.pieBackgroundN;E++)k.push({name:"pie-"+E+"-background-color",type:o.color}),k.push({name:"pie-"+E+"-background-size",type:o.percent}),k.push({name:"pie-"+E+"-background-opacity",type:o.zeroOneNumber});var z=[],A=uo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:o.arrowShape},{name:"arrow-color",type:o.color},{name:"arrow-fill",type:o.arrowFill}].forEach((function(t){A.forEach((function(e){z.push({name:e+"-"+t.name,type:t.type})}))}),{});var C=uo.properties=[].concat(f,g,h,p,w,c,u,a,s,l,v,m,y,k,_,b,z,x),T=uo.propertyGroups={behavior:f,transition:g,visibility:h,overlay:p,ghost:w,commonLabel:c,labelDimensions:u,mainLabel:a,sourceLabel:s,targetLabel:l,nodeBody:v,nodeBorder:m,backgroundImage:y,pie:k,compound:_,edgeLine:b,edgeArrow:z,core:x},S=uo.propertyGroupNames={};(uo.propertyGroupKeys=Object.keys(T)).forEach((function(t){S[t]=T[t].map((function(t){return t.name})),T[t].forEach((function(e){return e.groupKey=t}))}));var M=uo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];uo.propertyNames=C.map((function(t){return t.name}));for(var D=0;D<C.length;D++){var O=C[D];C[O.name]=O}for(var I=0;I<M.length;I++){var P=M[I],L={name:P.name,alias:!0,pointsTo:C[P.pointsTo]};C.push(L),C[P.name]=L}}(),uo.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},uo.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=O({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(t,e){for(var n=1;n<=uo.pieBackgroundN;n++)t[e.name.replace("{{i}}",n)]=e.value;return t}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(t,e){return uo.arrowPrefixes.forEach((function(n){t[n+"-"+e.name]=e.value})),t}),{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=this.parse(o,e[o]);n[o]=a}}return t.defaultProperties=n,t.defaultProperties},uo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var co={parse:function(t,e,n,r){if(h(e))return this.parseImplWarn(t,e,n,r);var i,o=lt(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),a=this.propCache=this.propCache||[];return(i=a[o])||(i=a[o]=this.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(i=wt(i))&&(i.value=wt(i.value)),i},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||bt("The style property `".concat(t,": ").concat(e,"` is invalid")),i},parseImpl:function(t,e,n,r){t=C(t);var i=this.properties[t],o=e,a=this.types;if(!i)return null;if(void 0===e)return null;i.alias&&(t=(i=i.pointsTo).name);var s=d(e);s&&(e=e.trim());var l,u,c=i.type;if(!c)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(h(e))return{name:t,value:e,strValue:"fn",mapped:a.fn,bypass:n};if(!s||r||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(l=new RegExp(a.data.regex).exec(e)))return!n&&{name:t,value:l,strValue:""+e,mapped:a.data,field:l[1],bypass:n};if(e.length>=10&&"m"===e[0]&&(u=new RegExp(a.mapData.regex).exec(e))){if(n)return!1;if(c.multiple)return!1;var f=a.mapData;if(!c.color&&!c.number)return!1;var g=this.parse(t,u[4]);if(!g||g.mapped)return!1;var m=this.parse(t,u[5]);if(!m||m.mapped)return!1;if(g.pfValue===m.pfValue||g.strValue===m.strValue)return bt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+g.strValue+"`"),this.parse(t,g.strValue);if(c.color){var y=g.value,_=m.value;if(!(y[0]!==_[0]||y[1]!==_[1]||y[2]!==_[2]||y[3]!==_[3]&&(null!=y[3]&&1!==y[3]||null!=_[3]&&1!==_[3])))return!1}return{name:t,value:u,strValue:""+e,mapped:f,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:g.value,valueMax:m.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var b;if(b=s?e.split(/\s+/):p(e)?e:[e],c.evenMultiple&&b.length%2!=0)return null;for(var w=[],x=[],k=[],E="",z=!1,A=0;A<b.length;A++){var T=this.parse(t,b[A],n,"multiple");z=z||d(T.value),w.push(T.value),k.push(null!=T.pfValue?T.pfValue:T.value),x.push(T.units),E+=(A>0?" ":"")+T.strValue}return c.validate&&!c.validate(w,x)?null:c.singleEnum&&z?1===w.length&&d(w[0])?{name:t,value:w[0],strValue:w[0],bypass:n}:null:{name:t,value:w,pfValue:k,strValue:E,bypass:n,units:x}}var S,M=function(){for(var r=0;r<c.enums.length;r++)if(c.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(c.number){var D,O="px";if(c.units&&(D=c.units),c.implicitUnits&&(O=c.implicitUnits),!c.unitless)if(s){var P="px|em"+(c.allowPercent?"|\\%":"");D&&(P=D);var L=e.match("^("+N+")("+P+")?$");L&&(e=L[1],D=L[2]||O)}else D&&!c.implicitUnits||(D=O);if(e=parseFloat(e),isNaN(e)&&void 0===c.enums)return null;if(isNaN(e)&&void 0!==c.enums)return e=o,M();if(c.integer&&(!v(S=e)||Math.floor(S)!==S))return null;if(void 0!==c.min&&(e<c.min||c.strictMin&&e===c.min)||void 0!==c.max&&(e>c.max||c.strictMax&&e===c.max))return null;var B={name:t,value:e,strValue:""+e+(D||""),units:D,bypass:n};return B.pfValue=c.unitless||"px"!==D&&"em"!==D?e:"px"!==D&&D?this.getEmSizeInPixels()*e:e,"ms"!==D&&"s"!==D||(B.pfValue="ms"===D?e:1e3*e),"deg"!==D&&"rad"!==D||(B.pfValue="rad"===D?e:Math.PI*e/180),"%"===D&&(B.pfValue=e/100),B}if(c.propList){var j=[],F=""+e;if("none"===F);else{for(var R=F.split(/\s*,\s*|\s+/),q=0;q<R.length;q++){var H=R[q].trim();this.properties[H]?j.push(H):bt("`"+H+"` is not a valid property name")}if(0===j.length)return null}return{name:t,value:j,strValue:0===j.length?"none":j.join(" "),bypass:n}}if(c.color){var $=I(e);return $?{name:t,value:$,pfValue:$,strValue:"rgb("+$[0]+","+$[1]+","+$[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var W=M();if(W)return W}for(var U=c.regexes?c.regexes:[c.regex],V=0;V<U.length;V++){var Y=new RegExp(U[V]).exec(e);if(Y)return{name:t,value:c.singleRegexMatchValue?Y[1]:Y,strValue:""+e,bypass:n}}return null}return c.string?{name:t,value:""+e,strValue:""+e,bypass:n}:c.enums?M():null}},fo=function t(e){if(!(this instanceof t))return new t(e);w(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):yt("A style must have a core reference")},ho=fo.prototype;ho.instanceString=function(){return"style"},ho.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},ho.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ho.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},ho.selector=function(t){var e="core"===t?null:new ar(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},ho.css=function(){var t=arguments;if(1===t.length)for(var e=t[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=e[r.name];void 0===i&&(i=e[T(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},ho.style=ho.css,ho.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},ho.append=function(t){return x(t)?t.appendToStyle(this):p(t)?this.appendFromJson(t):d(t)&&this.appendFromString(t),this},fo.fromJson=function(t,e){var n=new fo(t);return n.fromJson(e),n},fo.fromString=function(t,e){return new fo(t).fromString(e)},[ro,io,oo,ao,so,lo,uo,co].forEach((function(t){O(ho,t)})),fo.types=ho.types,fo.properties=ho.properties,fo.propertyGroups=ho.propertyGroups,fo.propertyGroupNames=ho.propertyGroupNames,fo.propertyGroupKeys=ho.propertyGroupKeys;var po={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return e.style=x(t)?t.generateStyle(this):p(t)?fo.fromJson(this,t):d(t)?fo.fromString(this,t):fo(this),e.style}},go={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(d(o[0]))return a[t=o[0]];if(g(o[0])){if(!this._private.panningEnabled)return this;r=(n=o[0]).x,i=n.y,v(r)&&(a.x=r),v(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[1],"x"!==(t=o[0])&&"y"!==t||!v(e)||(a[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,o,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:g(t)&&(o=(i=s[0]).x,a=i.y,v(o)&&(l.x+=o),v(a)&&(l.y+=a),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!v(r)||(l[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){var n,r;if(v(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled&&(d(t)?t=this.$(t):g(r=t)&&v(r.x1)&&v(r.x2)&&v(r.y1)&&v(r.y2)?((n={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):y(t)||(t=this.mutableElements()),!y(t)||!t.empty())){n=n||t.boundingBox();var i,o=this.width(),a=this.height();if(e=v(e)?e:0,!isNaN(o)&&!isNaN(a)&&o>0&&a>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:i=(i=(i=Math.min((o-2*e)/n.w,(a-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i,pan:{x:(o-i*(n.x1+n.x2))/2,y:(a-i*(n.y1+n.y2))/2}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return v(t)&&v(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):v(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:v(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,o=r.zoom,a=!1;return r.zoomingEnabled||(a=!0),v(t)?n=t:g(t)&&(n=t.level,null!=t.position?e=Kt(t.position,o,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(a=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,!a&&v(n)&&n!==o&&(null==e||v(e.x)&&v(e.y))?null!=e?{zoomed:!0,panned:!0,zoom:n,pan:{x:-n/o*(e.x-i.x)+e.x,y:-n/o*(e.y-i.y)+e.y}}:{zoomed:!0,panned:!1,zoom:n,pan:i}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!t)return this;if(v(t.zoom)||(n=!1),g(t.pan)||(r=!1),!n&&!r)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=s,i.push("zoom"))}if(r&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;v(l.x)&&(e.pan.x=l.x,a=!1),v(l.y)&&(e.pan.y=l.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(d(t)){var n=t;t=this.mutableElements().filter(n)}else y(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),o=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(o-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=o.getComputedStyle(r),{width:r.clientWidth-(e=function(e){return parseFloat(t.getPropertyValue(e))})("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};go.centre=go.center,go.autolockNodes=go.autolock,go.autoungrabifyNodes=go.autoungrabify;var vo=function(t){var e=this,n=(t=O({},t)).container;n&&!m(n)&&m(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var a=void 0!==o&&void 0!==n&&!t.headless,s=t;s.layout=O({name:a?"grid":"null"},s.layout),s.renderer=O({name:a?"canvas":"null"},s.renderer);var l=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},u=this._private={container:n,ready:!1,options:s,elements:new Ii(this),listeners:[],aniEles:new Ii(this),scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:void 0===s.styleEnabled?a:s.styleEnabled,zoom:v(s.zoom)?s.zoom:1,pan:{x:g(s.pan)&&v(s.pan.x)?s.pan.x:0,y:g(s.pan)&&v(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom}),u.styleEnabled&&e.setStyle([]);var c=O({},s,s.renderer);e.initRenderer(c),function(t,e){if(t.some(E))return qn.all(t).then(e);e(t)}([s.style,s.elements],(function(t){var n=t[0],o=t[1];u.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(g(t)||p(t))&&e.add(t),e.one("layoutready",(function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")})).one("layoutstop",(function(){e.one("done",r),e.emit("done")}));var o=O({},e._private.options.layout);o.eles=e.elements(),e.layout(o).run()}(o,(function(){e.startAnimationLoop(),u.ready=!0,h(s.ready)&&e.on("ready",s.ready);for(var t=0;t<i.length;t++)e.on("ready",i[t]);r&&(r.readies=[]),e.emit("ready")}),s.done)}))},mo=vo.prototype;O(mo,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},isDestroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.isDestroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t,e){if(null!=t){var n=this,r=n._private,i=r.options,o=e||{name:"canvas"};return i.renderer=o,!m(t)&&m(t[0])&&(t=t[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=t,r.styleEnabled=!0,n.initRenderer(o),n.startAnimationLoop(),n.style(i.style),n.emit("mount"),n}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return wt(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(g(t)){if(e.startBatch(),t.elements){var i={},o=function(t,n){for(var r=[],o=[],a=0;a<t.length;a++){var s=t[a],l=s.data.id,u=e.getElementById(l);i[l]=!0,0!==u.length?o.push({ele:u,json:s}):n?(s.group=n,r.push(s)):r.push(s)}e.add(r);for(var c=0;c<o.length;c++){var f=o[c];f.ele.json(f.json)}};if(p(t.elements))o(t.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var l=a[s],u=t.elements[l];p(u)&&o(u,l)}var c=e.collection();r.filter((function(t){return!i[t.id()]})).forEach((function(t){t.isParent()?c.merge(t):t.remove()})),c.forEach((function(t){return t.children().move({parent:null})})),c.forEach((function(t){return function(t){return e.getElementById(t.id())}(t).remove()}))}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan));for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],d=0;d<f.length;d++){var h=f[d];null!=t[h]&&e[h](t[h])}return e.endBatch(),this}var v={};t?v.elements=this.elements().map((function(t){return t.json()})):(v.elements={},r.forEach((function(t){var e=t.group();v.elements[e]||(v.elements[e]=[]),v.elements[e].push(t.json())}))),this._private.styleEnabled&&(v.style=e.style().json());var m=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=wt(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=wt(m.renderer),v.hideEdgesOnViewport=m.hideEdgesOnViewport,v.textureOnViewport=m.textureOnViewport,v.wheelSensitivity=m.wheelSensitivity,v.motionBlur=m.motionBlur,v},scratch:Wn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:Wn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),mo.$id=mo.getElementById,[Li,Yi,Ki,Zi,Qi,Ji,eo,no,po,go].forEach((function(t){O(mo,t)}));var yo={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},_o=function(t){return t.scratch("breadthfirst")},bo=function(t,e){return t.scratch("breadthfirst",e)};function wo(t){this.options=O({},yo,t)}wo.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().filter((function(t){return!t.isParent()})),a=i,s=n.directed,l=n.maximal||n.maximalAdjustments>0,u=le(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(y(n.roots))t=n.roots;else if(p(n.roots)){for(var c=[],f=0;f<n.roots.length;f++){var h=r.getElementById(n.roots[f]);c.push(h)}t=r.collection(c)}else if(d(n.roots))t=r.$(n.roots);else if(s)t=o.roots();else{var g=i.components();t=r.collection();for(var v=function(e){var n=g[e],r=n.maxDegree(!1),i=n.filter((function(t){return t.degree(!1)===r}));t=t.add(i)},m=0;m<g.length;m++)v(m)}var _=[],b={},w=function(t,e){null==_[e]&&(_[e]=[]);var n=_[e].length;_[e].push(t),bo(t,{index:n,depth:e})};a.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=t[0],a=o.id();w(o,i),b[a]=!0}});for(var x=[],k=0;k<o.length;k++){var E=o[k];b[E.id()]||x.push(E)}var z=function(t){for(var e=_[t],n=0;n<e.length;n++){var r=e[n];null!=r?bo(r,{depth:t,index:n}):(e.splice(n,1),n--)}},A=function(){for(var t=0;t<_.length;t++)z(t)},C=function(t,e){for(var n=_o(t),r=t.incomers().filter((function(t){return t.isNode()&&i.has(t)})),o=-1,a=t.id(),s=0;s<r.length;s++){var l=_o(r[s]);o=Math.max(o,l.depth)}return n.depth<=o&&(e[a]?null:(function(t,e){var n=_o(t);_[n.depth][n.index]=null,w(t,e)}(t,o+1),e[a]=!0,!0))};if(s&&l){var T=[],S={},M=function(t){return T.push(t)};for(o.forEach((function(t){return T.push(t)}));T.length>0;){var N=T.shift(),O=C(N,S);if(O)N.outgoers().filter((function(t){return t.isNode()&&i.has(t)})).forEach(M);else if(null===O){bt("Detected double maximal shift for node `"+N.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}A();var I=0;if(n.avoidOverlap)for(var P=0;P<o.length;P++){var L=o[P].layoutDimensions(n);I=Math.max(I,L.w,L.h)}for(var B={},j=function(t){if(B[t.id()])return B[t.id()];for(var e=_o(t).depth,n=t.neighborhood(),r=0,i=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var l=_o(s),u=l.index,c=l.depth;null!=u&&null!=c&&c<e&&(r+=u/(_[c].length-1),i++)}}return r/=i=Math.max(1,i),0===i&&(r=0),B[t.id()]=r,r},F=function(t,e){var n=j(t)-j(e);return 0===n?D(t.id(),e.id()):n},R=0;R<_.length;R++)_[R].sort(F),z(R);for(var q=[],H=0;H<x.length;H++)q.push(x[H]);_.unshift(q),A();for(var $=0,W=0;W<_.length;W++)$=Math.max(_[W].length,$);var U=u.x1+u.w/2,V=u.x1+u.h/2,Y=_.reduce((function(t,e){return Math.max(t,e.length)}),0);return o.layoutPositions(this,n,(function(t){var e=_o(t),r=e.depth,i=e.index,o=_[r].length,a=Math.max(u.w/((n.grid?Y:o)+1),I),s=Math.max(u.h/(_.length+1),I),l=Math.min(u.w/2/_.length,u.h/2/_.length);if(l=Math.max(l,I),n.circle){var c=l*r+l-(_.length>0&&_[0].length<=3?l/2:0),f=2*Math.PI/_[r].length*i;return 0===r&&1===_[0].length&&(c=1),{x:U+c*Math.cos(f),y:V+c*Math.sin(f)}}return{x:U+(i+1-(o+1)/2)*a,y:(r+1)*s}})),this};var xo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function ko(t){this.options=O({},xo,t)}ko.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,i=e.eles.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o,a=le(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s=a.x1+a.w/2,l=a.y1+a.h/2,u=(void 0===e.sweep?2*Math.PI-2*Math.PI/i.length:e.sweep)/Math.max(1,i.length-1),c=0,f=0;f<i.length;f++){var d=i[f].layoutDimensions(e);c=Math.max(c,d.w,d.h)}if(o=v(e.radius)?e.radius:i.length<=1?0:Math.min(a.h,a.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var h=Math.cos(u)-Math.cos(0),p=Math.sin(u)-Math.sin(0),g=Math.sqrt(c*c/(h*h+p*p));o=Math.max(g,o)}return i.layoutPositions(this,e,(function(t,n){var i=e.startAngle+n*u*(r?1:-1),a=o*Math.cos(i),c=o*Math.sin(i);return{x:s+a,y:l+c}})),this};var Eo,zo={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ao(t){this.options=O({},zo,t)}Ao.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles.nodes().not(":parent"),o=le(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),a=o.x1+o.w/2,s=o.y1+o.h/2,l=[],u=0,c=0;c<i.length;c++){var f,d=i[c];f=e.concentric(d),l.push({value:f,node:d}),d._private.scratch.concentric=f}i.updateStyle();for(var h=0;h<i.length;h++){var p=i[h].layoutDimensions(e);u=Math.max(u,p.w,p.h)}l.sort((function(t,e){return e.value-t.value}));for(var g=e.levelWidth(i),v=[[]],m=v[0],y=0;y<l.length;y++){var _=l[y];m.length>0&&Math.abs(m[0].value-_.value)>=g&&v.push(m=[]),m.push(_)}var b=u+e.minNodeSpacing;if(!e.avoidOverlap){var w=v.length>0&&v[0].length>1,x=(Math.min(o.w,o.h)/2-b)/(v.length+w?1:0);b=Math.min(b,x)}for(var k=0,E=0;E<v.length;E++){var z=v[E],A=void 0===e.sweep?2*Math.PI-2*Math.PI/z.length:e.sweep,C=z.dTheta=A/Math.max(1,z.length-1);if(z.length>1&&e.avoidOverlap){var T=Math.cos(C)-Math.cos(0),S=Math.sin(C)-Math.sin(0),M=Math.sqrt(b*b/(T*T+S*S));k=Math.max(M,k)}z.r=k,k+=b}if(e.equidistant){for(var N=0,D=0,O=0;O<v.length;O++)N=Math.max(N,v[O].r-D);D=0;for(var I=0;I<v.length;I++){var P=v[I];0===I&&(D=P.r),P.r=D,D+=N}}for(var L={},B=0;B<v.length;B++)for(var j=v[B],F=j.dTheta,R=j.r,q=0;q<j.length;q++){var H=j[q],$=e.startAngle+(n?1:-1)*F*q,W={x:a+R*Math.cos($),y:s+R*Math.sin($)};L[H.node.id()]=W}return i.layoutPositions(this,e,(function(t){var e=t.id();return L[e]})),this};var Co={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1,weaver:!1};function To(t){this.options=O({},Co,t),this.options.layout=this}To.prototype.run=function(){var t=this.options,e=t.cy,n=this,r=this.thread,i=t.weaver?t.weaver.Thread:null,o={listeners:[],on:function(t,e){return this.listeners.push({event:t,callback:e}),this},trigger:function(t){return d(t)&&(t={type:t}),this.listeners.filter((function(e){return e.event===t.type})).forEach((function(e){e.callback(t)})),this},pass:function(t){return this.pass=t,this},run:function(t){var e=this.pass;return new qn((function(n){n(t(e))}))},stop:function(){return this},stopped:function(){return!0}};r&&!r.stopped()||(r=this.thread=i?new i:o),n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),Eo=!0===t.debug;var a=So(e,n,t);Eo&&(void 0)(a),t.randomize&&Do(a,e);var s=Date.now(),l=!1,u=function(n){n=n||{},l&&!n.next||!n.force&&Date.now()-s<t.animationThreshold||(l=!0,nt((function(){Oo(a,e,t),!0===t.fit&&e.fit(t.padding),l=!1,n.next&&n.next()})))};r.on("message",(function(t){a.layoutNodes=t.message,u()})),r.pass({layoutInfo:a,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run((function(t){var e=t.layoutInfo,n=t.options,r=function(t){return-t+2*t*Math.random()},i=function(t,e,n,i){if(t.cmptId===e.cmptId||n.isCompound){var o=e.positionX-t.positionX,l=e.positionY-t.positionY;0===o&&0===l&&(o=r(1),l=r(1));var u=a(t,e,o,l);if(u>0)var c=(d=i.nodeOverlap*u)*o/(y=Math.sqrt(o*o+l*l)),f=d*l/y;else{var d,h=s(t,o,l),p=s(e,-1*o,-1*l),g=p.x-h.x,v=p.y-h.y,m=g*g+v*v,y=Math.sqrt(m);c=(d=(t.nodeRepulsion+e.nodeRepulsion)/m)*g/y,f=d*v/y}t.isLocked||(t.offsetX-=c,t.offsetY-=f),e.isLocked||(e.offsetX+=c,e.offsetY+=f)}},a=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},s=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,l=o/a,u={};return 0===e&&0<n||0===e&&0>n?(u.x=r,u.y=i+o/2,u):0<e&&-1*l<=s&&s<=l?(u.x=r+a/2,u.y=i+a*n/2/e,u):0>e&&-1*l<=s&&s<=l?(u.x=r-a/2,u.y=i-a*n/2/e,u):0<n&&(s<=-1*l||s>=l)?(u.x=r+o*e/2/n,u.y=i+o/2,u):0>n&&(s<=-1*l||s>=l)?(u.x=r-o*e/2/n,u.y=i-o/2,u):u},l=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},u=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o?t(i,n):void 0}},c=0;do{for(var f=0;(f<n.refresh||0===n.refresh)&&c<n.numIter;){var d;if(function(t,e,n){(function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],o=r.length,a=0;a<o;a++)for(var s=t.layoutNodes[t.idToIndex[r[a]]],l=a+1;l<o;l++)i(s,t.layoutNodes[t.idToIndex[r[l]]],t,e)})(t,e),function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.layoutNodes[t.idToIndex[r.sourceId]],o=t.layoutNodes[t.idToIndex[r.targetId]],a=o.positionX-i.positionX,l=o.positionY-i.positionY;if(0!==a||0!==l){var u=s(i,a,l),c=s(o,-1*a,-1*l),f=c.x-u.x,d=c.y-u.y,h=Math.sqrt(f*f+d*d),p=Math.pow(r.idealLength-h,2)/r.elasticity;if(0!==h)var g=p*f/h,v=p*d/h;else g=0,v=0;i.isLocked||(i.offsetX+=g,i.offsetY+=v),o.isLocked||(o.offsetX-=g,o.offsetY-=v)}}}(t),function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[r[0]]].parentId]];o=s.positionX,a=s.positionY}for(var l=0;l<i;l++){var u=t.layoutNodes[t.idToIndex[r[l]]];if(!u.isLocked){var c=o-u.positionX,f=a-u.positionY,d=Math.sqrt(c*c+f*f);if(d>1){var h=e.gravity*f/d;u.offsetX+=e.gravity*c/d,u.offsetY+=h}}}}}(t,e),function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.layoutNodes[t.idToIndex[o]],s=a.children;if(0<s.length&&!a.isLocked){for(var l=a.offsetX,u=a.offsetY,c=0;c<s.length;c++){var f=t.layoutNodes[t.idToIndex[s[c]]];f.offsetX+=l,f.offsetY+=u,n[++i]=s[c]}a.offsetX=0,a.offsetY=0}}}(t),function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=l(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,u(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}}(t)}(e,n),e.temperature=e.temperature*n.coolingFactor,!(d=!(e.temperature<n.minTemp)))break;f++,c++}!0===n.animate&&o.trigger({type:"message",message:e.layoutNodes})}while(d&&c+1<n.numIter);return function(t,n){for(var r=e.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId;(i[s]=i[s]||[]).push(a)}var l=0;for(o=0;o<i.length;o++)if(v=i[o]){v.x1=1/0,v.x2=-1/0,v.y1=1/0,v.y2=-1/0;for(var u=0;u<v.length;u++){var c=v[u];v.x1=Math.min(v.x1,c.positionX-c.width/2),v.x2=Math.max(v.x2,c.positionX+c.width/2),v.y1=Math.min(v.y1,c.positionY-c.height/2),v.y2=Math.max(v.y2,c.positionY+c.height/2)}v.w=v.x2-v.x1,v.h=v.y2-v.y1,l+=v.w*v.h}i.sort((function(t,e){return e.w*e.h-t.w*t.h}));var f=0,d=0,h=0,p=0,g=Math.sqrt(l)*e.clientWidth/e.clientHeight;for(o=0;o<i.length;o++){var v;if(v=i[o]){for(u=0;u<v.length;u++)(c=v[u]).isLocked||(c.positionX+=f,c.positionY+=d);f+=v.w+n.componentSpacing,h+=v.w+n.componentSpacing,p=Math.max(p,v.h),h>g&&(d+=p+n.componentSpacing,f=0,h=0,p=0)}}}(0,n),e})).then((function(t){a.layoutNodes=t.layoutNodes,r.stop(),c()}));var c=function(){!0===t.animate||!1===t.animate?u({force:!0,next:function(){n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n})}}):t.eles.nodes().layoutPositions(n,t,(function(t){var e=a.layoutNodes[a.idToIndex[t.data("id")]];return{x:e.positionX,y:e.positionY}}))};return this},To.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},To.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var So=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:le(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},a=n.eles.components(),s={},l=0;l<a.length;l++)for(var u=a[l],c=0;c<u.length;c++)s[u[c].id()]=l;for(l=0;l<o.nodeSize;l++){var f=(m=i[l]).layoutDimensions(n);(N={}).isLocked=m.locked(),N.id=m.data("id"),N.parentId=m.data("parent"),N.cmptId=s[m.id()],N.children=[],N.positionX=m.position("x"),N.positionY=m.position("y"),N.offsetX=0,N.offsetY=0,N.height=f.w,N.width=f.h,N.maxX=N.positionX+N.width/2,N.minX=N.positionX-N.width/2,N.maxY=N.positionY+N.height/2,N.minY=N.positionY-N.height/2,N.padLeft=parseFloat(m.style("padding")),N.padRight=parseFloat(m.style("padding")),N.padTop=parseFloat(m.style("padding")),N.padBottom=parseFloat(m.style("padding")),N.nodeRepulsion=h(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,o.layoutNodes.push(N),o.idToIndex[N.id]=l}var d=[],p=0,g=-1,v=[];for(l=0;l<o.nodeSize;l++){var m,y=(m=o.layoutNodes[l]).parentId;null!=y?o.layoutNodes[o.idToIndex[y]].children.push(m.id):(d[++g]=m.id,v.push(m.id))}for(o.graphSet.push(v);p<=g;){var _=d[p++],b=o.layoutNodes[o.idToIndex[_]].children;if(b.length>0)for(o.graphSet.push(b),l=0;l<b.length;l++)d[++g]=b[l]}for(l=0;l<o.graphSet.length;l++){var w=o.graphSet[l];for(c=0;c<w.length;c++)o.indexToGraph[o.idToIndex[w[c]]]=l}for(l=0;l<o.edgeSize;l++){var x=r[l],k={};k.id=x.data("id"),k.sourceId=x.data("source"),k.targetId=x.data("target");var E=h(n.idealEdgeLength)?n.idealEdgeLength(x):n.idealEdgeLength,z=h(n.edgeElasticity)?n.edgeElasticity(x):n.edgeElasticity,A=o.idToIndex[k.sourceId],C=o.idToIndex[k.targetId];if(o.indexToGraph[A]!=o.indexToGraph[C]){for(var T=Mo(k.sourceId,k.targetId,o),S=o.graphSet[T],M=0,N=o.layoutNodes[A];-1===S.indexOf(N.id);)N=o.layoutNodes[o.idToIndex[N.parentId]],M++;for(N=o.layoutNodes[C];-1===S.indexOf(N.id);)N=o.layoutNodes[o.idToIndex[N.parentId]],M++;E*=M*n.nestingFactor}k.idealLength=E,k.elasticity=z,o.layoutEdges.push(k)}return o},Mo=function(t,e,n){var r=No(t,e,0,n);return 2>r.count?0:r.graph},No=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var l=i.layoutNodes[i.idToIndex[o[s]]].children;if(0!==l.length){var u=t(e,n,i.indexToGraph[i.idToIndex[l[0]]],i);if(0!==u.count){if(1!==u.count)return u;if(2==++a)break}}}return{count:a,graph:r}},Do=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},Oo=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};n.boundingBox&&(i.forEach((function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)})),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions((function(e,r){var i=t.layoutNodes[t.idToIndex[e.data("id")]];return n.boundingBox?{x:o.x1+(i.positionX-a.x1)/a.w*o.w,y:o.y1+(i.positionY-a.y1)/a.h*o.h}:{x:i.positionX,y:i.positionY}})),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},Io={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Po(t){this.options=O({},Io,t)}Po.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var i=le(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===i.h||0===i.w)r.layoutPositions(this,e,(function(t){return{x:i.x1,y:i.y1}}));else{var o=r.size(),a=Math.sqrt(o*i.h/i.w),s=Math.round(a),l=Math.round(i.w/i.h*a),u=function(t){if(null==t)return Math.min(s,l);Math.min(s,l)==s?s=t:l=t},c=function(t){if(null==t)return Math.max(s,l);Math.max(s,l)==s?s=t:l=t},f=e.rows,d=null!=e.cols?e.cols:e.columns;if(null!=f&&null!=d)s=f,l=d;else if(null!=f&&null==d)s=f,l=Math.ceil(o/s);else if(null==f&&null!=d)l=d,s=Math.ceil(o/l);else if(l*s>o){var h=u(),p=c();(h-1)*p>=o?u(h-1):(p-1)*h>=o&&c(p-1)}else for(;l*s<o;){var g=u(),v=c();(v+1)*g>=o?c(v+1):u(g+1)}var m=i.w/l,y=i.h/s;if(e.condense&&(m=0,y=0),e.avoidOverlap)for(var _=0;_<r.length;_++){var b=r[_],w=b._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var x=b.layoutDimensions(e),k=e.avoidOverlapPadding,E=x.h+k;m=Math.max(m,x.w+k),y=Math.max(y,E)}for(var z={},A=function(t,e){return!!z["c-"+t+"-"+e]},C=function(t,e){z["c-"+t+"-"+e]=!0},T=0,S=0,M=function(){++S>=l&&(S=0,T++)},N={},D=0;D<r.length;D++){var O=r[D],I=e.position(O);if(I&&(void 0!==I.row||void 0!==I.col)){var P={row:I.row,col:I.col};if(void 0===P.col)for(P.col=0;A(P.row,P.col);)P.col++;else if(void 0===P.row)for(P.row=0;A(P.row,P.col);)P.row++;N[O.id()]=P,C(P.row,P.col)}}r.layoutPositions(this,e,(function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var o=N[t.id()];if(o)n=o.col*m+m/2+i.x1,r=o.row*y+y/2+i.y1;else{for(;A(T,S);)M();n=S*m+m/2+i.x1,r=T*y+y/2+i.y1,C(T,S),M()}return{x:n,y:r}}))}return this};var Lo={ready:function(){},stop:function(){}};function Bo(t){this.options=O({},Lo,t)}Bo.prototype.run=function(){var t=this.options,e=t.eles;return this.emit("layoutstart"),e.nodes().positions((function(){return{x:0,y:0}})),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},Bo.prototype.stop=function(){return this};var jo={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Fo(t){this.options=O({},jo,t)}Fo.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=h(t.positions);return e.layoutPositions(this,t,(function(e,r){var i=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i})),this};var Ro={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function qo(t){this.options=O({},Ro,t)}qo.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles.nodes().not(":parent"),r=le(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.layoutPositions(this,t,(function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}})),this};var Ho=[{name:"breadthfirst",impl:wo},{name:"circle",impl:ko},{name:"concentric",impl:Ao},{name:"cose",impl:To},{name:"grid",impl:Po},{name:"null",impl:Bo},{name:"preset",impl:Fo},{name:"random",impl:qo}];function $o(t){this.options=t,this.notifications=0}var Wo=function(){};$o.prototype={recalculateRenderedStyle:Wo,notify:function(){this.notifications++},init:Wo,isHeadless:function(){return!0}};var Uo={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,a){return i.x-n/2-a<=t&&t<=i.x+n/2+a&&i.y-n/2-a<=e&&e<=i.y+n/2+a},r=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=(t*Math.sin(r)+e*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},i=function(t,e,n,i){for(var o=[],a=0;a<t.length;a+=2)o.push(r(t[a],t[a+1],e,n,i));return o},o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},a=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},s=function(r,s){d(s)&&(s=t[s]),t[r]=O({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,a,s){var l=o(i(this.points,n+2*s,r,a));return we(t,e,l)},roughCollide:n,draw:function(t,n,r,o){var a=i(this.points,n,r,o);e.arrowShapeImpl("polygon")(t,a)},spacing:function(t){return 0},gap:a},s)};s("none",{collide:gt,roughCollide:gt,draw:mt,spacing:vt,gap:vt}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,o,a,s){var l=i(this.points,n,o,a),u=this.controlPoint,c=r(u[0],u[1],n,o,a);e.arrowShapeImpl(this.name)(t,l,c)},gap:function(t){return.8*a(t)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.pointsTee,n+2*l,r,a));return we(t,e,u)||we(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.pointsTee,n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.crossLinePts(n,s),n+2*l,r,a));return we(t,e,u)||we(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.crossLinePts(n,a),n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*a(t)}}),s("circle",{radius:.15,collide:function(t,e,n,r,i,o,a){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},Vo={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),l=n.zoom();return[((t-i)/a-s.x)/l,((e-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=o.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i=r("padding-left"),a=r("padding-right"),s=r("padding-top"),l=r("padding-bottom"),u=r("border-left-width"),c=r("border-right-width"),f=r("border-top-width"),d=(r("border-bottom-width"),t.clientWidth);return this.containerBB=[e.left+i+u,e.top+s+f,d-(i+a),t.clientHeight-(s+l),e.width/(d+(u+c))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,o,a=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),f=s.cy.hasCompoundNodes(),d=(r?24:8)/c,h=(r?8:2)/c,p=(r?8:2)/c,g=1/0;function v(t,e){if(t.isNode()){if(o)return;o=t,u.push(t)}if(t.isEdge()&&(null==e||e<g))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<u.length;n++)if(u[n].isEdge()){u[n]=t,i=t,g=null!=e?e:g;break}}else u.push(t),i=t,g=null!=e?e:g}function m(n){var r=n.outerWidth()+2*h,i=n.outerHeight()+2*h,o=r/2,l=i/2,u=n.position();if(u.x-o<=t&&t<=u.x+o&&u.y-l<=e&&e<=u.y+l&&s.nodeShapes[a.getNodeShape(n)].checkPoint(t,e,0,r,i,u.x,u.y))return v(n,0),!0}function y(n){var r,i=n._private,o=i.rscratch,l=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,h=l/2+d,p=h*h,g=2*h,y=i.source,_=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var b=o.allpts,w=0;w+3<b.length;w+=2)if(me(t,e,b[w],b[w+1],b[w+2],b[w+3],g)&&p>(r=be(t,e,b[w],b[w+1],b[w+2],b[w+3])))return v(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(b=o.allpts,w=0;w+5<o.allpts.length;w+=4)if(ye(t,e,b[w],b[w+1],b[w+2],b[w+3],b[w+4],b[w+5],g)&&p>(r=_e(t,e,b[w],b[w+1],b[w+2],b[w+3],b[w+4],b[w+5])))return v(n,r),!0;y=y||i.source,_=_||i.target;var x=a.getArrowWidth(l,c),k=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(w=0;w<k.length;w++){var E=k[w],z=s.arrowShapes[n.pstyle(E.name+"-arrow-shape").value],A=n.pstyle("width").pfValue;if(z.roughCollide(t,e,x,E.angle,{x:E.x,y:E.y},A,d)&&z.collide(t,e,x,E.angle,{x:E.x,y:E.y},A,d))return v(n),!0}f&&u.length>0&&(m(y),m(_))}function _(t,e,n){return Tt(t,e,n)}function b(n,r){var i=n._private,o=p,a=n.pstyle((r?r+"-":"")+"label").value;if("yes"===n.pstyle("text-events").strValue&&a){var s=i.rstyle,l=n.pstyle("text-border-width").pfValue,u=n.pstyle("text-background-padding").pfValue,c=_(s,"labelWidth",r)+l+2*o+2*u,f=_(s,"labelHeight",r)+l+2*o+2*u,d=_(s,"labelX",r),h=_(s,"labelY",r),g=_(i.rscratch,"labelAngle",r),m=d-c/2,y=d+c/2,b=h-f/2,w=h+f/2;if(g){var x=Math.cos(g),k=Math.sin(g),E=function(t,e){return{x:(t-=d)*x-(e-=h)*k+d,y:t*k+e*x+h}},z=E(m,b),A=E(m,w),C=E(y,b),T=E(y,w);if(we(t,e,[z.x,z.y,C.x,C.y,T.x,T.y,A.x,A.y]))return v(n),!0}else if(pe({w:c,h:f,x1:m,x2:y,y1:b,y2:w},t,e))return v(n),!0}}n&&(l=l.interactive);for(var w=l.length-1;w>=0;w--){var x=l[w];x.isNode()?m(x)||b(x):y(x)||b(x)||b(x,"source")||b(x,"target")}return u},getAllInBox:function(t,e,n,r){for(var i,o=this.getCachedZSortedEles().interactive,a=[],s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),f=le({x1:t=s,y1:e=u,x2:n=l,y2:r=c}),d=0;d<o.length;d++){var h=o[d];if(h.isNode()){var p=h,g=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});he(f,g)&&!ge(g,f)&&a.push(p)}else{var v=h,m=v._private,y=m.rscratch;if(null!=y.startX&&null!=y.startY&&!pe(f,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!pe(f,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var _=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,b=!0,w=0;w<_.length;w++)if(!pe(f,(i=_[w]).x,i.y)){b=!1;break}b&&a.push(v)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||a.push(v)}}return a}},Yo={calculateArrowAngles:function(t){var e,n,r,i,o,a,s=t._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,f="segments"===s.edgeType,d="compound"===s.edgeType,h="self"===s.edgeType;l?(r=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),p=s.midX,g=s.midY,f?(e=r-s.segpts[0],n=i-s.segpts[1]):c||d||h||u?(e=r-oe((k=s.allpts)[0],k[2],k[4],.1),n=i-oe(k[1],k[3],k[5],.1)):(e=r-p,n=i-g),s.srcArrowAngle=Jt(e,n);var p=s.midX,g=s.midY;if(l&&(p=(r+o)/2,g=(i+a)/2),e=o-r,n=a-i,f)if((k=s.allpts).length/2%2==0){var v=(m=k.length/2)-2;e=k[m]-k[v],n=k[m+1]-k[v+1]}else{v=(m=k.length/2-1)-2;var m,y=m+2;e=k[m]-k[v],n=k[m+1]-k[v+1]}else if(c||d||h){var _,b,w,x,k=s.allpts;if(s.ctrlpts.length/2%2==0){var E=2+(z=2+(A=k.length/2-1));_=oe(k[A],k[z],k[E],0),b=oe(k[A+1],k[z+1],k[E+1],0),w=oe(k[A],k[z],k[E],1e-4),x=oe(k[A+1],k[z+1],k[E+1],1e-4)}else{var z,A;E=2+(z=k.length/2-1),_=oe(k[A=z-2],k[z],k[E],.4999),b=oe(k[A+1],k[z+1],k[E+1],.4999),w=oe(k[A],k[z],k[E],.5),x=oe(k[A+1],k[z+1],k[E+1],.5)}e=w-_,n=x-b}if(s.midtgtArrowAngle=Jt(e,n),s.midDispX=e,s.midDispY=n,e*=-1,n*=-1,f&&((k=s.allpts).length/2%2==0||(e=-(k[y=2+(m=k.length/2-1)]-k[m]),n=-(k[y+1]-k[m+1]))),s.midsrcArrowAngle=Jt(e,n),f)e=o-s.segpts[s.segpts.length-2],n=a-s.segpts[s.segpts.length-1];else if(c||d||h||u){var C=(k=s.allpts).length;e=o-oe(k[C-6],k[C-4],k[C-2],.9),n=a-oe(k[C-5],k[C-3],k[C-1],.9)}else e=o-p,n=a-g;s.tgtArrowAngle=Jt(e,n)}};Yo.getArrowWidth=Yo.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var Xo={};function Go(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2)e.push({x:t[n],y:t[n+1]});return e}}Xo.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,l=a.position(),u=s.position(),c=a.width(),f=s.width(),d=a.height(),h=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*d*p+l.y,i.target.x*f*p+u.x,i.target.y*h*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},Xo.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,o=e.vectorNormInverse,a=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<u;c++){var f=s.pfValue[c],d=l.pfValue[c],h=1-f,p="node-position"===a?r:i,g={x:p.x1*h+p.x2*f,y:p.y1*h+p.y2*f};n.segpts.push(g.x+o.x*d,g.y+o.y*d)}},Xo.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,h=f;r&&(d=0,h=l);var p=u-Math.PI/2,g=p-c/2,v=p+c/2,m=String(u+"_"+c);d=void 0===o[m]?o[m]=0:++o[m],i.ctrlpts=[a.x+1.4*Math.cos(g)*h*(d/3+1),a.y+1.4*Math.sin(g)*h*(d/3+1),a.x+1.4*Math.cos(v)*h*(d/3+1),a.y+1.4*Math.sin(v)*h*(d/3+1)]},Xo.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),h=n,p=f;r&&(h=0,p=d?d.pfValue[0]:void 0);var g={x:o.x-s/2,y:o.y-l/2},v={x:a.x-u/2,y:a.y-c/2},m={x:Math.min(g.x,v.x),y:Math.min(g.y,v.y)},y=Math.max(.5,Math.log(.01*s)),_=Math.max(.5,Math.log(.01*u));i.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*p*(h/3+1)*y,m.x-(1+Math.pow(50,1.12)/100)*p*(h/3+1)*_,m.y]},Xo.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},Xo.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),d=t.pstyle("control-point-weights"),h=f&&d?Math.min(f.value.length,d.value.length):1,p=f?f.pfValue[0]:void 0,g=d.value[0],v=r;o.edgeType=v?"multibezier":"bezier",o.ctrlpts=[];for(var m=0;m<h;m++){var y,_=(.5-e.eles.length/2+n)*c*(i?-1:1),b=ee(_);v&&(p=f?f.pfValue[m]:c,g=d.value[m]);var w=void 0!==(y=r?p:void 0!==p?b*p:void 0)?y:_,x=1-g,k="node-position"===u?s:l,E={x:k.x1*x+k.x2*g,y:k.y1*x+k.y2*g};o.ctrlpts.push(E.x+a.x*w,E.y+a.y*w)}},Xo.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r=e.posPts,i=e.srcW,o=e.srcH,a=e.tgtW,s=e.tgtH,l="node-position"!==t.pstyle("edge-distances").value,u=t.pstyle("taxi-direction").value,c=u,f=t.pstyle("taxi-turn"),d=f.pfValue,h=t.pstyle("taxi-turn-min-distance").pfValue,p="%"===f.units,g=l?(o+s)/2:0,v=r.x2-r.x1,m=r.y2-r.y1,y=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},_=y(v,l?(i+a)/2:0),b=y(m,g),w=!1;"auto"===u?u=Math.abs(_)>Math.abs(b)?"horizontal":"vertical":"upward"===u||"downward"===u?(u="vertical",w=!0):"leftward"!==u&&"rightward"!==u||(u="horizontal",w=!0);var x="vertical"===u,k=x?b:_,E=x?m:v,z=ee(E),A=!1;w&&p||!("downward"===c&&E<0||"upward"===c&&E>0||"leftward"===c&&E>0||"rightward"===c&&E<0)||(k=(z*=-1)*Math.abs(k),A=!0);var C=p?d*k:d*z,T=function(t){return Math.abs(t)<h||Math.abs(t)>=Math.abs(k)},S=T(C),M=T(k-C);if(!S&&!M||A)if(x){var N=r.y1+C+(l?o/2*z:0);n.segpts=[r.x1,N,r.x2,N]}else{var D=r.x1+C+(l?i/2*z:0);n.segpts=[D,r.y1,D,r.y2]}else if(x){var O=Math.abs(E)<=o/2,I=Math.abs(v)<=a/2;if(O){var P=(r.x1+r.x2)/2;n.segpts=[P,r.y1,P,r.y2]}else if(I){var L=(r.y1+r.y2)/2;n.segpts=[r.x1,L,r.x2,L]}else n.segpts=[r.x1,r.y2]}else{var B=Math.abs(E)<=i/2,j=Math.abs(m)<=s/2;if(B){var F=(r.y1+r.y2)/2;n.segpts=[r.x1,F,r.x2,F]}else if(j){var R=(r.x1+r.x2)/2;n.segpts=[R,r.y1,R,r.y2]}else n.segpts=[r.x2,r.y1]}},Xo.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=!v(n.startX)||!v(n.startY),d=!v(n.arrowStartX)||!v(n.arrowStartY),h=!v(n.endX)||!v(n.endY),p=!v(n.arrowEndX)||!v(n.arrowEndY),g=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,m=ne({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),y=m<g,_=ne({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=_<g,w=!1;if(f||d||y){w=!0;var x={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},k=Math.sqrt(x.x*x.x+x.y*x.y),E={x:x.x/k,y:x.y/k},z=Math.max(o,a),A={x:n.ctrlpts[0]+2*E.x*z,y:n.ctrlpts[1]+2*E.y*z},C=u.intersectLine(r.x,r.y,o,a,A.x,A.y,0);y?(n.ctrlpts[0]=n.ctrlpts[0]+E.x*(g-m),n.ctrlpts[1]=n.ctrlpts[1]+E.y*(g-m)):(n.ctrlpts[0]=C[0]+E.x*g,n.ctrlpts[1]=C[1]+E.y*g)}if(h||p||b){w=!0;var T={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},S=Math.sqrt(T.x*T.x+T.y*T.y),M={x:T.x/S,y:T.y/S},N=Math.max(o,a),D={x:n.ctrlpts[0]+2*M.x*N,y:n.ctrlpts[1]+2*M.y*N},O=c.intersectLine(i.x,i.y,s,l,D.x,D.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+M.x*(g-_),n.ctrlpts[1]=n.ctrlpts[1]+M.y*(g-_)):(n.ctrlpts[0]=O[0]+M.x*g,n.ctrlpts[1]=O[1]+M.y*g)}w&&this.findEndpoints(t)}},Xo.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(e.midX=e.allpts[r=e.allpts.length/2-1],e.midY=e.allpts[r+1]):(e.midX=oe(e.allpts[r=e.allpts.length/2-3],e.allpts[r+2],e.allpts[r+4],.5),e.midY=oe(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var a=e.segpts.length/2-1;e.midX=e.segpts[a],e.midY=e.segpts[a+1]}},Xo.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||v(e.startX)&&v(e.startY)&&v(e.endX)&&v(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,bt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Xo.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i=new Mt,o=[],a=[],s=0;s<t.length;s++){var l=t[s],u=l._private,c=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==c){var f="unbundled-bezier"===c||"segments"===c||"straight"===c||"taxi"===c,d="unbundled-bezier"===c||"bezier"===c,h=u.source.poolIndex(),p=u.target.poolIndex(),g=(f?-1:1)*at([h,p].sort()),m=i.get(g);null==m&&(i.set(g,m={eles:[]}),o.push(g)),m.eles.push(l),f&&(m.hasUnbundled=!0),d&&(m.hasBezier=!0)}else a.push(l)}for(var y=function(t){var a=i.get(o[t]),s=void 0;if(!a.hasUnbundled){var l=a.eles[0].parallelEdges().filter((function(t){return t.isBundledBezier()}));Ct(a.eles),l.forEach((function(t){return a.eles.push(t)})),a.eles.sort((function(t,e){return t.poolIndex()-e.poolIndex()}))}var u=a.eles[0],c=u.source(),f=u.target();if(c.poolIndex()>f.poolIndex()){var d=c;c=f,f=d}var h=a.srcPos=c.position(),p=a.tgtPos=f.position(),g=a.srcW=c.outerWidth(),m=a.srcH=c.outerHeight(),y=a.tgtW=f.outerWidth(),_=a.tgtH=f.outerHeight(),b=a.srcShape=n.nodeShapes[e.getNodeShape(c)],w=a.tgtShape=n.nodeShapes[e.getNodeShape(f)];a.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var x=0;x<a.eles.length;x++){var k=a.eles[x],E=k[0]._private.rscratch,z=k.pstyle("curve-style").value,A="unbundled-bezier"===z||"segments"===z||"taxi"===z,C=!c.same(k.source());if(!a.calculatedIntersection&&c!==f&&(a.hasBezier||a.hasUnbundled)){a.calculatedIntersection=!0;var T=b.intersectLine(h.x,h.y,g,m,p.x,p.y,0),S=a.srcIntn=T,M=w.intersectLine(p.x,p.y,y,_,h.x,h.y,0),N=a.tgtIntn=M,D=a.intersectionPts={x1:T[0],x2:M[0],y1:T[1],y2:M[1]},O=a.posPts={x1:h.x,x2:p.x,y1:h.y,y2:p.y},I=M[1]-T[1],P=M[0]-T[0],L=Math.sqrt(P*P+I*I),B=a.vector={x:P,y:I},j=a.vectorNorm={x:B.x/L,y:B.y/L},F={x:-j.y,y:j.x};a.nodesOverlap=!v(L)||w.checkPoint(T[0],T[1],0,y,_,p.x,p.y)||b.checkPoint(M[0],M[1],0,g,m,h.x,h.y),a.vectorNormInverse=F,s={nodesOverlap:a.nodesOverlap,dirCounts:a.dirCounts,calculatedIntersection:!0,hasBezier:a.hasBezier,hasUnbundled:a.hasUnbundled,eles:a.eles,srcPos:p,tgtPos:h,srcW:y,srcH:_,tgtW:g,tgtH:m,srcIntn:N,tgtIntn:S,srcShape:w,tgtShape:b,posPts:{x1:O.x2,y1:O.y2,x2:O.x1,y2:O.y1},intersectionPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},vector:{x:-B.x,y:-B.y},vectorNorm:{x:-j.x,y:-j.y},vectorNormInverse:{x:-F.x,y:-F.y}}}var R=C?s:a;E.nodesOverlap=R.nodesOverlap,E.srcIntn=R.srcIntn,E.tgtIntn=R.tgtIntn,r&&(c.isParent()||c.isChild()||f.isParent()||f.isChild())&&(c.parents().anySame(f)||f.parents().anySame(c)||c.same(f))?e.findCompoundLoopPoints(k,R,x,A):c===f?e.findLoopPoints(k,R,x,A):"segments"===z?e.findSegmentsPoints(k,R):"taxi"===z?e.findTaxiPoints(k,R):"straight"===z||!A&&a.eles.length%2==1&&x===Math.floor(a.eles.length/2)?e.findStraightEdgePoints(k):e.findBezierPoints(k,R,x,A,C),e.findEndpoints(k),e.tryToCorrectInvalidPoints(k,R),e.checkForInvalidEdgeWarning(k),e.storeAllpts(k),e.storeEdgeProjections(k),e.calculateArrowAngles(k),e.recalculateEdgeLabelProjections(k),e.calculateLabelAngles(k)}},_=0;_<o.length;_++)y(_);this.findHaystackPoints(a)}},Xo.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),Go(e.segpts)},Xo.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),Go(e.ctrlpts)},Xo.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Ko={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*r),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var a=e.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(r,i),l=[n.x+Math.cos(a)*s,n.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,l[0],l[1],0)},findEndpoints:function(t){var e,n,r,i,o,a=this,s=t.source()[0],l=t.target()[0],u=s.position(),c=l.position(),f=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,h=t.pstyle("target-distance-from-node").pfValue,p=t.pstyle("source-distance-from-node").pfValue,g=t._private.rscratch,m=g.edgeType,y="self"===m||"compound"===m,_="bezier"===m||"multibezier"===m||y,b="bezier"!==m,w="straight"===m||"segments"===m,x="segments"===m,k=_||b||w,E=t.pstyle("source-endpoint"),z=y?"outside-to-node":E.value,A=t.pstyle("target-endpoint"),C=y?"outside-to-node":A.value;if(g.srcManEndpt=E,g.tgtManEndpt=A,_){var T=[g.ctrlpts[0],g.ctrlpts[1]];n=b?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:T,r=T}else if(w){var S=x?g.segpts.slice(0,2):[c.x,c.y];n=x?g.segpts.slice(g.segpts.length-2):[u.x,u.y],r=S}if("inside-to-node"===C)e=[c.x,c.y];else if(A.units)e=this.manualEndptToPx(l,A);else if("outside-to-line"===C)e=g.tgtIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?i=n:"outside-to-line"!==C&&"outside-to-line-or-label"!==C||(i=[u.x,u.y]),e=a.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var M=l._private.rscratch,N=M.labelWidth,D=M.labelHeight,O=M.labelX,I=M.labelY,P=l.pstyle("text-valign").value;"top"===P?I-=D/2:"bottom"===P&&(I+=D/2);var L=l.pstyle("text-halign").value;"left"===L?O-=N/2:"right"===L&&(O+=N/2);var B=a.nodeShapes.rectangle.intersectLine(O,I,N,D,i[0],i[1],0),j=u,F=re(j,Qt(e));re(j,Qt(B))<F&&(e=B)}var R=Me(e,n,a.arrowShapes[f].spacing(t)+h),q=Me(e,n,a.arrowShapes[f].gap(t)+h);if(g.endX=q[0],g.endY=q[1],g.arrowEndX=R[0],g.arrowEndY=R[1],"inside-to-node"===z)e=[u.x,u.y];else if(E.units)e=this.manualEndptToPx(s,E);else if("outside-to-line"===z)e=g.srcIntn;else if("outside-to-node"===z||"outside-to-node-or-label"===z?o=r:"outside-to-line"!==z&&"outside-to-line-or-label"!==z||(o=[c.x,c.y]),e=a.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===z||"outside-to-line-or-label"===z){var H=s._private.rscratch,$=H.labelWidth,W=H.labelHeight,U=H.labelX,V=H.labelY,Y=s.pstyle("text-valign").value;"top"===Y?V-=W/2:"bottom"===Y&&(V+=W/2);var X=s.pstyle("text-halign").value;"left"===X?U-=$/2:"right"===X&&(U+=$/2);var G=a.nodeShapes.rectangle.intersectLine(U,V,$,W,o[0],o[1],0),K=c,Z=re(K,Qt(e));re(K,Qt(G))<Z&&(e=G)}var Q=Me(e,r,a.arrowShapes[d].spacing(t)+p),J=Me(e,r,a.arrowShapes[d].gap(t)+p);g.startX=J[0],g.startY=J[1],g.arrowStartX=Q[0],g.arrowStartY=Q[1],k&&(g.badLine=!(v(g.startX)&&v(g.startY)&&v(g.endX)&&v(g.endY)))},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}}},Zo={};function Qo(t,e,n){for(var r=function(t,e,n,r){return oe(t,e,n,r)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var a=t.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],a),y:r(n[1],n[3],n[5],a)})}}Zo.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)Qo(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var o=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},Zo.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Jo={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!k(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=i.rscratch,d=i.rstyle;switch(u){case"left":n=l.x-o/2-s;break;case"right":n=l.x+o/2+s;break;default:n=l.x}switch(c){case"top":r=l.y-a/2-s;break;case"bottom":r=l.y+a/2+s;break;default:r=l.y}f.labelX=n,f.labelY=r,d.labelX=n,d.labelY=r,this.applyLabelDimensions(t)}}},ta=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},ea=function(t,e){return ta(e.x-t.x,e.y-t.y)};Jo.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){var a=function(t,e,r){St(n.rscratch,t,e,r),St(n.rstyle,t,e,r)};a("labelX",null,(e={x:r.midX,y:r.midY}).x),a("labelY",null,e.y);var s=ta(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var l=function(s){var l,u="source"===s;if(o[s]){var c=t.pstyle(s+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var f,d=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<r.allpts.length;o+=4)e.push({p0:{x:r.allpts[o],y:r.allpts[o+1]},p1:{x:r.allpts[o+2],y:r.allpts[o+3]},p2:{x:r.allpts[o+4],y:r.allpts[o+5]},startDist:0,length:0,segments:[]});var a=n.rstyle.bezierPts,s=i.bezierProjPcts.length;function l(t,e,n,r,i){var o=ne(e,n),a=t.segments[t.segments.length-1];t.segments.push({p0:e,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o}),t.length+=o}for(o=0;o<e.length;o++){var u=e[o],c=e[o-1];c&&(u.startDist=c.startDist+c.length),l(u,u.p0,a[o*s],0,i.bezierProjPcts[0]);for(var f=0;f<s-1;f++)l(u,a[o*s+f],a[o*s+f+1],i.bezierProjPcts[f],i.bezierProjPcts[f+1]);l(u,a[o*s+s-1],u.p2,i.bezierProjPcts[s-1],1)}return t.cache=e}(),h=0,p=0,g=0;g<d.length;g++){for(var v=d[u?g:d.length-1-g],m=0;m<v.segments.length;m++){var y=v.segments[u?m:v.segments.length-1-m];if(h=p,(p+=y.length)>=c||g===d.length-1&&m===v.segments.length-1){f={cp:v,segment:y};break}}if(f)break}v=f.cp;var _=(c-h)/(y=f.segment).length,b=y.t1-y.t0,w=u?y.t0+b*_:y.t1-b*_;w=se(0,w,1),e=ae(v.p0,v.p1,v.p2,w),l=function(t,e,n,r){var i=se(0,r-.001,1),o=se(0,r+.001,1),a=ae(t,e,n,i),s=ae(t,e,n,o);return ea(a,s)}(v.p0,v.p1,v.p2,w);break;case"straight":case"segments":case"haystack":var x,k,E,z,A=0,C=r.allpts.length;for(g=0;g+3<C&&(u?(E={x:r.allpts[g],y:r.allpts[g+1]},z={x:r.allpts[g+2],y:r.allpts[g+3]}):(E={x:r.allpts[C-2-g],y:r.allpts[C-1-g]},z={x:r.allpts[C-4-g],y:r.allpts[C-3-g]}),k=A,!((A+=x=ne(E,z))>=c));g+=2);w=se(0,w=(c-k)/x,1),e=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=ne(t,e);return n=null==n?0:n,{x:t.x+i/a*(r=null!=r?r:n*a),y:t.y+o/a*r}}(E,z,w),l=ea(E,z)}a("labelX",s,e.x),a("labelY",s,e.y),a("labelAutoAngle",s,l)}};l("source"),l("target"),this.applyLabelDimensions(t)}},Jo.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Jo.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r);St(n.rstyle,"labelWidth",e,i.width),St(n.rscratch,"labelWidth",e,i.width),St(n.rstyle,"labelHeight",e,i.height),St(n.rscratch,"labelHeight",e,i.height)},Jo.getLabelText=function(t,e){var n=t._private,r=t.pstyle((e?e+"-":"")+"label").strValue,i=t.pstyle("text-transform").value,o=function(t,r){return r?(St(n.rscratch,t,e,r),r):Tt(n.rscratch,t,e)};if(!r)return"";"none"==i||("uppercase"==i?r=r.toUpperCase():"lowercase"==i&&(r=r.toLowerCase()));var a=t.pstyle("text-wrap").value;if("wrap"===a){var s=o("labelKey");if(null!=s&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var l=r.split("\n"),u=t.pstyle("text-max-width").pfValue,c=[],f=0;f<l.length;f++){var d=l[f];if(this.calculateLabelDimensions(t,d).width>u){for(var h=d.split(/\s+/),p="",g=0;g<h.length;g++){var v=h[g];this.calculateLabelDimensions(t,0===p.length?v:p+" "+v).width<=u?p+=v+" ":(c.push(p),p=v+" ")}p.match(/^\s+$/)||c.push(p)}else c.push(d)}o("labelWrapCachedLines",c),r=o("labelWrapCachedText",c.join("\n")),o("labelWrapKey",s)}else if("ellipsis"===a){u=t.pstyle("text-max-width").pfValue;for(var m="",y=!1,_=0;_<r.length&&!(this.calculateLabelDimensions(t,m+r[_]+"\u2026").width>u);_++)m+=r[_],_===r.length-1&&(y=!0);return y||(m+="\u2026"),m}return r},Jo.calculateLabelDimensions=function(t,e){var n=st(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var o=t.pstyle("font-style").strValue,a=1*t.pstyle("font-size").pfValue+"px",s=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,u=this.labelCalcDiv;u||(u=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(u));var c=u.style;return c.fontFamily=s,c.fontStyle=o,c.fontSize=a,c.fontWeight=l,c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none",c.padding="0",c.lineHeight="1",c.whiteSpace="wrap"===t.pstyle("text-wrap").value?"pre":"normal",u.textContent=e,r[n]={width:Math.ceil(u.clientWidth/1),height:Math.ceil(u.clientHeight/1)}},Jo.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=t.pstyle((e?e+"-":"")+"text-rotation"),o=i.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:i.pfValue},Jo.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var na={},ra=!1;na.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return ra||(bt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ra=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"cutrectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var ia={};[Vo,Yo,Xo,Ko,Zo,Jo,na,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++)t[r]._private.rstyle.clean=!1};n.binder(t).on("bounds.* dirty.*",(function(t){r(t.target)})).on("style.* background.*",(function(t){r(t.target,!1)}));var i=function(i){if(i){for(var o=n.onUpdateEleCalcsFns,a=0;a<e.length;a++){var s=e[a];s.isNode()&&!s._private.rstyle.clean&&r(s.connectedEdges())}if(o)for(a=0;a<o.length;a++)(0,o[a])(i,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=[],r=[];if(!this.destroyed){void 0===e&&(e=!0);for(var i=0;i<t.length;i++){var o=(l=(s=t[i])._private).rstyle;e&&o.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===l.group?r.push(s):n.push(s),o.clean=!0)}for(i=0;i<r.length;i++){o=(l=(s=r[i])._private).rstyle;var a=s.position();this.recalculateNodeLabelProjection(s),o.nodeX=a.x,o.nodeY=a.y,o.nodeW=s.pstyle("width").pfValue,o.nodeH=s.pstyle("height").pfValue}for(this.recalculateEdgeProjections(n),i=0;i<n.length;i++){o=(l=(s=n[i])._private).rstyle;var s,l,u=l.rscratch;o.srcX=u.arrowStartX,o.srcY=u.arrowStartY,o.tgtX=u.arrowEndX,o.tgtY=u.arrowEndY,o.midX=u.midX,o.midY=u.midY,o.labelAngle=u.labelAngle,o.sourceLabelAngle=u.sourceLabelAngle,o.targetLabelAngle=u.targetLabelAngle}}}},{updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(ui),e.interactive=e.filter((function(t){return t.interactive()})),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}}].forEach((function(t){O(ia,t)}));var oa={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[t]=r[t]||{}).image=new Image;return o.addEventListener("load",n),o.addEventListener("error",(function(){o.error=!0})),"data:"===t.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=e),o.src=t,o}},aa={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},binder:function(t){var e=this,n=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==e.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(t){}e.supportsPassiveEvents=r}var o=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=function(t){return t.selected()},n=function(e,n,r,i){null==e&&(e=t.cy);for(var o=0;o<n.length;o++)e.emit({originalEvent:r,type:n[o],position:i})},r=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},i=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.isEdge()){for(var i=0;n&&i<n.length;i++)if((e=n[i]).isNode()&&e.isParent()){r=!1;break}}else r=!0;return r},o=function(t){t[0]._private.rscratch.inDragLayer=!0},a=function(t){t[0]._private.rscratch.isGrabTarget=!0},s=function(t,e){var n=e.addToList;n.has(t)||(n.merge(t),function(t){t[0]._private.grabbed=!0}(t))},l=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(o),e.neighborhood().stdFilter((function(t){return!r||t.isEdge()})).forEach(o)),n.addToList&&e.forEach((function(t){s(t,n)})),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(o),n.connectedEdges().forEach(o)),e.addToList&&e.addToList.unmerge(n)}}(e,n),f(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},u=l,c=function(e){e&&(t.getCachedZSortedEles().forEach((function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)})),t.updateCachedGrabbedEles())},f=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(o),r.forEach(o)),e.addToList&&r.forEach((function(t){s(t,e)}))}}},d=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},h="undefined"!=typeof MutationObserver;h?(t.removeObserver=new MutationObserver((function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++)if(r[i]===t.container){t.destroy();break}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(e){t.destroy()}));var p=Q((function(){t.cy.resize()}),100);h&&(t.styleObserver=new MutationObserver(p),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",p);var g=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,(function(e){t.registerBinding(e,"transitionend",g),t.registerBinding(e,"animationend",g),t.registerBinding(e,"scroll",g)})),t.registerBinding(t.container,"contextmenu",(function(t){t.preventDefault()}));var m,y,_,b,w,x,k,E,z,A,C,T,S,M=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],l=!1,u=0;u<s.length;u++){var c=s[u];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var f=t.container,d=e.target.parentNode,h=!1;d;){if(d===f){h=!0;break}d=d.parentNode}return!!h};t.registerBinding(t.container,"mousedown",(function(e){if(M(e)){e.preventDefault(),d(),t.hoverData.capture=!0,t.hoverData.which=e.which;var r=t.cy,i=[e.clientX,e.clientY],o=t.projectIntoViewport(i[0],i[1]),s=t.selection,c=t.findNearestElements(o[0],o[1],!0,!1),f=c[0],h=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i,3==e.which){t.hoverData.cxtStarted=!0;var p={originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}};f?(f.activate(),f.emit(p),t.hoverData.down=f):r.emit(p),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(f&&f.activate(),null!=f&&t.nodeIsGrabbable(f)){var g=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(a(f),f.selected()){h=t.dragData.possibleDragElements=r.collection();var v=r.$((function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)}));l(v,{addToList:h}),f.emit(g("grabon")),v.forEach((function(t){t.emit(g("grab"))}))}else h=t.dragData.possibleDragElements=r.collection(),u(f,{addToList:h}),f.emit(g("grabon")).emit(g("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=f,t.hoverData.downs=c,t.hoverData.downTime=(new Date).getTime(),n(f,["mousedown","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==f?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):f.isEdge()&&(s[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}})}}),t.tapholdDuration)}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}}),!1),t.registerBinding(window,"mousemove",(function(e){if(t.hoverData.capture||M(e)){var o=!1,a=t.cy,s=a.zoom(),u=[e.clientX,e.clientY],f=t.projectIntoViewport(u[0],u[1]),d=t.hoverData.mdownPos,h=t.hoverData.mdownGPos,p=t.selection,g=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(g=t.findNearestElement(f[0],f[1],!0,!1));var m,y=t.hoverData.last,_=t.hoverData.down,b=[f[0]-p[2],f[1]-p[3]],w=t.dragData.possibleDragElements;if(h){var x=u[0]-h[0],k=u[1]-h[1];t.hoverData.isOverThresholdDrag=m=x*x+k*k>=t.desktopTapThreshold2}var E=r(e);m&&(t.hoverData.tapholdCancelled=!0),o=!0,n(g,["mousemove","vmousemove","tapdrag"],e,{x:f[0],y:f[1]});var z=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:f[0],y:f[1]}}),p[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(m){var A={originalEvent:e,type:"cxtdrag",position:{x:f[0],y:f[1]}};_?_.emit(A):a.emit(A),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&g===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:f[0],y:f[1]}}),t.hoverData.cxtOver=g,g&&g.emit({originalEvent:e,type:"cxtdragover",position:{x:f[0],y:f[1]}}))}}else if(t.hoverData.dragging){if(o=!0,a.panningEnabled()&&a.userPanningEnabled()){var C;if(t.hoverData.justStartedPan){var T=t.hoverData.mdownPos;C={x:(f[0]-T[0])*s,y:(f[1]-T[1])*s},t.hoverData.justStartedPan=!1}else C={x:b[0]*s,y:b[1]*s};a.panBy(C),t.hoverData.dragged=!0}f=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=p[4]||null!=_&&!_.isEdge()){if(_&&_.isEdge()&&_.active()&&_.unactivate(),_&&_.grabbed()||g==y||(y&&n(y,["mouseout","tapdragout"],e,{x:f[0],y:f[1]}),g&&n(g,["mouseover","tapdragover"],e,{x:f[0],y:f[1]}),t.hoverData.last=g),_)if(m){if(a.boxSelectionEnabled()&&E)_&&_.grabbed()&&(c(w),_.emit("freeon"),w.emit("free"),t.dragData.didDrag&&(_.emit("dragfreeon"),w.emit("dragfree"))),z();else if(_&&_.grabbed()&&t.nodeIsDraggable(_)){var S=!t.dragData.didDrag;S&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var N=a.collection();t.hoverData.draggingEles||l(w,{inDragLayer:!0});var D={x:0,y:0};if(v(b[0])&&v(b[1])&&(D.x+=b[0],D.y+=b[1],S)){var O=t.hoverData.dragDelta;O&&v(O[0])&&v(O[1])&&(D.x+=O[0],D.y+=O[1])}for(var I=0;I<w.length;I++){var P=w[I];t.nodeIsDraggable(P)&&P.grabbed()&&N.merge(P)}t.hoverData.draggingEles=!0,N.silentShift(D).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(b[0]),e.push(b[1])):(e[0]+=b[0],e[1]+=b[1])}();o=!0}else m&&(t.hoverData.dragging||!a.boxSelectionEnabled()||!E&&a.panningEnabled()&&a.userPanningEnabled()?!t.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()&&i(_,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,p[4]=0,t.data.bgActivePosistion=Qt(d),t.redrawHint("select",!0),t.redraw()):z(),_&&_.isEdge()&&_.active()&&_.unactivate());return p[2]=f[0],p[3]=f[1],o?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}}),!1),t.registerBinding(window,"mouseup",(function(i){if(t.hoverData.capture){t.hoverData.capture=!1;var o=t.cy,a=t.projectIntoViewport(i.clientX,i.clientY),s=t.selection,l=t.findNearestElement(a[0],a[1],!0,!1),u=t.dragData.possibleDragElements,f=t.hoverData.down,d=r(i);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,f&&f.unactivate(),3===t.hoverData.which){var h={originalEvent:i,type:"cxttapend",position:{x:a[0],y:a[1]}};if(f?f.emit(h):o.emit(h),!t.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:a[0],y:a[1]}};f?f.emit(p):o.emit(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(l,["mouseup","tapend","vmouseup"],i,{x:a[0],y:a[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||n(f,["click","tap","vclick"],i,{x:a[0],y:a[1]}),null!=f||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(i)||(o.$(e).unselect(["tapunselect"]),u.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=u=o.collection()),l!=f||t.dragData.didDrag||t.hoverData.selecting||null!=l&&l._private.selectable&&(t.hoverData.dragging||("additive"===o.selectionType()||d?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):d||(o.$(e).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var g=o.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),g.length>0&&t.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:i,position:{x:a[0],y:a[1]}}),"additive"===o.selectionType()||d||o.$(e).unmerge(g).unselect(),g.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var v=f&&f.grabbed();c(u),v&&(f.emit("freeon"),u.emit("free"),t.dragData.didDrag&&(f.emit("dragfreeon"),u.emit("dragfree")))}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}}),!1),t.registerBinding(t.container,"wheel",(function(e){if(!t.scrollingPage){var n,r=t.cy,i=t.projectIntoViewport(e.clientX,e.clientY),o=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4]?e.preventDefault():r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()&&(e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),n=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,n*=t.wheelSensitivity,1===e.deltaMode&&(n*=33),r.zoom({level:r.zoom()*Math.pow(10,n),renderedPosition:{x:o[0],y:o[1]}}))}}),!0),t.registerBinding(window,"scroll",(function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),!0),t.registerBinding(t.container,"mouseout",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})}),!1),t.registerBinding(t.container,"mouseover",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})}),!1);var N,D,O,I,P=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},L=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",N=function(e){if(M(e)){d(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(e.touches[0]){var s=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(e.touches[1]&&(s=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),i[2]=s[0],i[3]=s[1]),e.touches[2]&&(s=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),i[4]=s[0],i[5]=s[1]),e.touches[1]){c(t.dragData.touchDragEles);var f=t.findContainerClientCoords();C=f[2],T=f[3],y=e.touches[0].clientY-(A=f[1]),_=e.touches[1].clientX-(z=f[0]),b=e.touches[1].clientY-A,S=0<=(m=e.touches[0].clientX-z)&&m<=C&&0<=_&&_<=C&&0<=y&&y<=T&&0<=b&&b<=T;var h=r.pan(),p=r.zoom();if(w=P(m,y,_,b),x=L(m,y,_,b),E=[((k=[(m+_)/2,(y+b)/2])[0]-h.x)/p,(k[1]-h.y)/p],x<4e4&&!e.touches[2]){var g=t.findNearestElement(i[0],i[1],!0,!0),v=t.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):v&&v.isNode()?(v.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=v):r.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2]);else if(e.touches[1]);else if(e.touches[0]){var N=t.findNearestElements(i[0],i[1],!0,!0),D=N[0];if(null!=D&&(D.activate(),t.touchData.start=D,t.touchData.starts=N,t.nodeIsGrabbable(D))){var O=t.dragData.touchDragEles=r.collection(),I=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),D.selected()?(I=r.$((function(e){return e.selected()&&t.nodeIsGrabbable(e)})),l(I,{addToList:O})):u(D,{addToList:O}),a(D);var B=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};D.emit(B("grabon")),I?I.forEach((function(t){t.emit(B("grab"))})):D.emit(B("grab"))}n(D,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==D&&(t.data.bgActivePosistion={x:s[0],y:s[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})}),t.tapholdDuration)}if(e.touches.length>=1){for(var j=t.touchData.startPosition=[],F=0;F<i.length;F++)j[F]=o[F]=i[F];var R=e.touches[0];t.touchData.startGPosition=[R.clientX,R.clientY]}}},!1),t.registerBinding(window,"touchmove",D=function(e){var r=t.touchData.capture;if(r||M(e)){var o=t.selection,a=t.cy,s=t.touchData.now,u=t.touchData.earlier,f=a.zoom();if(e.touches[0]){var d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=d[0],s[1]=d[1]}e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=d[0],s[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=d[0],s[5]=d[1]);var h,p=t.touchData.startGPosition;if(r&&e.touches[0]&&p){for(var g=[],k=0;k<s.length;k++)g[k]=s[k]-u[k];var C=e.touches[0].clientX-p[0],T=e.touches[0].clientY-p[1];h=C*C+T*T>=t.touchTapThreshold2}if(r&&t.touchData.cxt){e.preventDefault();var N=e.touches[0].clientX-z,D=e.touches[0].clientY-A,O=e.touches[1].clientX-z,I=e.touches[1].clientY-A,B=L(N,D,O,I);if(B/x>=2.25||B>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var j={originalEvent:e,type:"cxttapend",position:{x:s[0],y:s[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(j),t.touchData.start=null):a.emit(j)}}if(r&&t.touchData.cxt){j={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(j):a.emit(j),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var F=t.findNearestElement(s[0],s[1],!0,!0);t.touchData.cxtOver&&F===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),t.touchData.cxtOver=F,F&&F.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&e.touches[2]&&a.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),t.touchData.selecting=!0,t.redrawHint("select",!0),o&&0!==o.length&&void 0!==o[0]?(o[2]=(s[0]+s[2]+s[4])/3,o[3]=(s[1]+s[3]+s[5])/3):(o[0]=(s[0]+s[2]+s[4])/3,o[1]=(s[1]+s[3]+s[5])/3,o[2]=(s[0]+s[2]+s[4])/3+1,o[3]=(s[1]+s[3]+s[5])/3+1),o[4]=1,t.touchData.selecting=!0,t.redraw();else if(r&&e.touches[1]&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),J=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var R=0;R<J.length;R++){var q=J[R]._private;q.grabbed=!1,q.rscratch.inDragLayer=!1}}var H=t.touchData.start,$=P(N=e.touches[0].clientX-z,D=e.touches[0].clientY-A,O=e.touches[1].clientX-z,I=e.touches[1].clientY-A),W=$/w;if(S){var U=(N-m+(O-_))/2,V=(D-y+(I-b))/2,Y=a.zoom(),X=Y*W,G=a.pan(),K=E[0]*Y+G.x,Z=E[1]*Y+G.y,Q={x:-X/Y*(K-G.x-U)+K,y:-X/Y*(Z-G.y-V)+Z};if(H&&H.active()){var J=t.dragData.touchDragEles;c(J),t.redrawHint("drag",!0),t.redrawHint("eles",!0),H.unactivate().emit("freeon"),J.emit("free"),t.dragData.didDrag&&(H.emit("dragfreeon"),J.emit("dragfree"))}a.viewport({zoom:X,pan:Q,cancelOnFailedZoom:!0}),w=$,m=N,y=D,_=O,b=I,t.pinching=!0}e.touches[0]&&(d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=d[0],s[1]=d[1]),e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=d[0],s[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=d[0],s[5]=d[1])}else if(e.touches[0]){var tt=t.touchData.start,et=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(F=t.findNearestElement(s[0],s[1],!0,!0)),r&&null!=tt&&e.preventDefault(),r&&null!=tt&&t.nodeIsDraggable(tt))if(h){J=t.dragData.touchDragEles;var nt=!t.dragData.didDrag;nt&&l(J,{inDragLayer:!0}),t.dragData.didDrag=!0;var rt={x:0,y:0};v(g[0])&&v(g[1])&&(rt.x+=g[0],rt.y+=g[1],nt&&(t.redrawHint("eles",!0),(it=t.touchData.dragDelta)&&v(it[0])&&v(it[1])&&(rt.x+=it[0],rt.y+=it[1]))),t.hoverData.draggingEles=!0,J.silentShift(rt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==u[0]&&t.touchData.startPosition[1]==u[1]&&t.redrawHint("eles",!0),t.redraw()}else{var it;0===(it=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(it.push(g[0]),it.push(g[1])):(it[0]+=g[0],it[1]+=g[1])}if(n(tt||F,["touchmove","tapdrag","vmousemove"],e,{x:s[0],y:s[1]}),tt&&tt.grabbed()||F==et||(et&&et.emit({originalEvent:e,type:"tapdragout",position:{x:s[0],y:s[1]}}),F&&F.emit({originalEvent:e,type:"tapdragover",position:{x:s[0],y:s[1]}})),t.touchData.last=F,r)for(R=0;R<s.length;R++)s[R]&&t.touchData.startPosition[R]&&h&&(t.touchData.singleTouchMoved=!0);r&&(null==tt||tt.isEdge())&&a.panningEnabled()&&a.userPanningEnabled()&&(i(tt,t.touchData.starts)&&(e.preventDefault(),t.swipePanning?a.panBy({x:g[0]*f,y:g[1]*f}):h&&(t.swipePanning=!0,a.panBy({x:C*f,y:T*f}),tt&&(tt.unactivate(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Qt(t.touchData.startPosition)),t.redrawHint("select",!0),t.touchData.start=null))),d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=d[0],s[1]=d[1])}for(k=0;k<s.length;k++)u[k]=s[k];r&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",O=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",I=function(r){var i=t.touchData.start;if(t.touchData.capture){0===r.touches.length&&(t.touchData.capture=!1),r.preventDefault();var o=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var a,s=t.cy,l=s.zoom(),u=t.touchData.now,f=t.touchData.earlier;if(r.touches[0]){var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=d[0],u[1]=d[1]}if(r.touches[1]&&(d=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),u[2]=d[0],u[3]=d[1]),r.touches[2]&&(d=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),u[4]=d[0],u[5]=d[1]),i&&i.unactivate(),t.touchData.cxt){if(a={originalEvent:r,type:"cxttapend",position:{x:u[0],y:u[1]}},i?i.emit(a):s.emit(a),!t.touchData.cxtDragged){var h={originalEvent:r,type:"cxttap",position:{x:u[0],y:u[1]}};i?i.emit(h):s.emit(h)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=s.collection(t.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,t.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:u[0],y:u[1]}}),p.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),r.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=i){var v=i._private.grabbed;c(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),v&&(i.emit("freeon"),g.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]}),i.unactivate(),t.touchData.start=null}else{var m=t.findNearestElement(u[0],u[1],!0,!0);n(m,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]})}var y=t.touchData.startPosition[0]-u[0],_=t.touchData.startPosition[1]-u[1],b=(y*y+_*_)*l*l;t.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:u[0],y:u[1]})),null!=i&&!t.dragData.didDrag&&i._private.selectable&&b<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(e).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var w=0;w<u.length;w++)f[w]=u[w];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null),r.touches.length<2&&(t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var B=[],j=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},F=function(t){for(var e=0;e<B.length;e++)if(B[e].event.pointerId===t.pointerId)return void B.splice(e,1)},R=function(t){t.touches=B.map((function(t){return t.touch}))},q=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",(function(t){q(t)||(t.preventDefault(),function(t){B.push(function(t){return{event:t,touch:j(t)}}(t))}(t),R(t),N(t))})),t.registerBinding(t.container,"pointerup",(function(t){q(t)||(F(t),R(t),I(t))})),t.registerBinding(t.container,"pointercancel",(function(t){q(t)||(F(t),R(t),O())})),t.registerBinding(t.container,"pointermove",(function(t){q(t)||(t.preventDefault(),function(t){var e=B.filter((function(e){return e.event.pointerId===t.pointerId}))[0];e.event=t,e.touch=j(t)}(t),R(t),D(t))}))}}},sa={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return Se(i,o,this.points,t,e,n/2,r/2,a)},checkPoint:function(t,e,n,r,i,o,a){return xe(t,e,this.points,o,a,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(n-t)*c+t,(r-e)*c+e]}(i,o,t,e,n/2+a,r/2+a)},checkPoint:function(t,e,n,r,i,o,a){return ze(t,e,r,i,o,a,n)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ne(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return ve(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Ie(r,i),l=2*s;return!!(xe(t,e,this.points,o,a,r,i-l,[0,-1],n)||xe(t,e,this.points,o,a,r-l,i,[0,-1],n)||ze(t,e,l,l,o-r/2+s,a-i/2+s,n)||ze(t,e,l,l,o+r/2-s,a-i/2+s,n)||ze(t,e,l,l,o+r/2-s,a+i/2-s,n)||ze(t,e,l,l,o-r/2+s,a+i/2-s,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Ne(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,a=t/2,s=n-a,l=n+a,u=r-o,c=r+o;return{topLeft:[s,u+i,s+i,u,s+i,u+i],topRight:[l-i,u,l,u+i,l-i,u+i],bottomRight:[l,c-i,l-i,c,l-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateCutTrianglePts(n+2*a,r+2*a,t,e),l=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return Se(i,o,l,t,e)},checkPoint:function(t,e,n,r,i,o,a){if(xe(t,e,this.points,o,a,r,i-2*this.cornerLength,[0,-1],n))return!0;if(xe(t,e,this.points,o,a,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,o,a);return we(t,e,s.topLeft)||we(t,e,s.topRight)||we(t,e,s.bottomRight)||we(t,e,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ne(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateBarrelBezierPts(n+2*a,r+2*a,t,e),l=function(t){var e=ae({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=ae({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),r=ae({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},u=[].concat(l(s.topLeft),l(s.topRight),l(s.bottomRight),l(s.bottomLeft));return Se(i,o,u,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,o=t/2,a=n-o,s=n+o,l=r-i,u=r+i,c=Pe(t,e),f=c.heightOffset,d=c.widthOffset,h=c.ctrlPtOffsetPct*t,p={topLeft:[a,l+f,a+h,l,a+d,l],topRight:[s-d,l,s-h,l,s,l+f],bottomRight:[s,u-f,s-h,u,s-d,u],bottomLeft:[a+d,u,a+h,u,a,u-f]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(t,e,n,r,i,o,a){var s=Pe(r,i),l=s.widthOffset;if(xe(t,e,this.points,o,a,r,i-2*s.heightOffset,[0,-1],n))return!0;if(xe(t,e,this.points,o,a,r-2*l,i,[0,-1],n))return!0;for(var u=this.generateBarrelBezierPts(r,i,o,a),c=function(t,e,n){var r,i,o=n[4],a=n[2],s=n[0],l=n[5],u=n[1],c=Math.min(o,s),f=Math.max(o,s),d=Math.min(l,u),h=Math.max(l,u);if(c<=t&&t<=f&&d<=e&&e<=h){var p=[(r=o)-2*(i=a)+s,2*(i-r),r],g=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*t;return[(-e+o)/a,(-e-o)/a]}(p[0],p[1],p[2],t).filter((function(t){return 0<=t&&t<=1}));if(g.length>0)return g[0]}return null},f=Object.keys(u),d=0;d<f.length;d++){var h=u[f[d]],p=c(t,e,h);if(null!=p){var g=oe(h[5],h[3],h[1],p);if(h.isTop&&g<=e)return!0;if(h.isBottom&&e<=g)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ne(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=e-(r/2+a),l=Te(i,o,t,e,t-(n/2+a),s,t+(n/2+a),s,!1);return l.length>0?l:ve(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Ie(r,i),l=2*s;if(xe(t,e,this.points,o,a,r,i-l,[0,-1],n))return!0;if(xe(t,e,this.points,o,a,r-l,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n;return!!we(t,e,[o-u,a-c,o-u,a,o+u,a,o+u,a-c])||!!ze(t,e,l,l,o+r/2-s,a+i/2-s,n)||!!ze(t,e,l,l,o-r/2+s,a+i/2-s,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Ne(3,0)),this.generatePolygon("rectangle",Ne(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",Ne(5,0)),this.generatePolygon("hexagon",Ne(6,0)),this.generatePolygon("heptagon",Ne(7,0)),this.generatePolygon("octagon",Ne(8,0));var n=new Array(20),r=Oe(5,0),i=Oe(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var a=0;a<i.length/2;a++)i[2*a]*=o,i[2*a+1]*=o;for(a=0;a<5;a++)n[4*a]=r[2*a],n[4*a+1]=r[2*a+1],n[4*a+2]=i[2*a],n[4*a+3]=i[2*a+1];n=De(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]),this.generatePolygon("tag",[-1,-1,.25,-1,1,0,.25,1,-1,1]),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}},la={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Et();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&yt("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort((function(t,e){return e.priority-t.priority}))}}},ua=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};la.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,nt((function n(r){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){ua(t,!0,r);var i=rt();t.render(t.renderOptions);var o=t.lastDrawTime=rt();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var a=o-i;t.redrawTotalTime+=a,t.lastRedrawTime=a,t.averageRedrawTime=t.averageRedrawTime/2+a/2,t.requestedFrame=!1}else ua(t,!1,r);t.skipFrame=!1,nt(n)}})))};var ca=function(t){this.init(t)},fa=ca.prototype;fa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],fa.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(o){var r=o.document,i=r.head,a="__________cytoscape_container",s=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(a)<0&&(n.className=(n.className||"")+" "+a),!s){var l=r.createElement("style");l.id="__________cytoscape_stylesheet",l.innerHTML="."+a+" { position: relative; }",i.insertBefore(l,i.children[0])}"static"===o.getComputedStyle(n).getPropertyValue("position")&&bt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.hideLabelsOnViewport=t.hideLabelsOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=v(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},fa.notify=function(t,e){var n=this;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&n.cy.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},fa.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},fa.isHeadless=function(){return!1},[Uo,ia,oa,aa,sa,la].forEach((function(t){O(fa,t)}));var da=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=Q((function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()}),t.deqRedrawThreshold);n.beforeRender((function(i,o){var a=rt(),s=n.averageRedrawTime,l=n.lastRedrawTime,u=[],c=n.cy.extent(),f=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=rt(),h=d-a,p=d-o;if(l<1e3/60){if(p>=t.deqFastCost*(1e3/60-(i?s:0)))break}else if(i){if(h>=t.deqCost*l||h>=t.deqAvgCost*s)break}else if(p>=t.deqNoDrawCost*(1e3/60))break;var g=t.deq(e,f,c);if(!(g.length>0))break;for(var v=0;v<g.length;v++)u.push(g[v])}u.length>0&&(t.onDeqd(e,u),!i&&t.shouldRedraw(e,u,f,c)&&r())}),(t.priority||mt)(e))}}},ha=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt;e(this,t),this.idsByKey=new Mt,this.keyForId=new Mt,this.cachesByLvl=new Mt,this.lvls=[],this.getKey=n,this.doesEleInvalidateKey=r}return r(t,[{key:"getIdsFor",value:function(t){null==t&&yt("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new Dt,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new Mt,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach((function(n){return e.deleteCache(t,n)}))}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),pa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},ga=zt({getKey:null,doesEleInvalidateKey:gt,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:pt,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),va=function(t,e){this.renderer=t,this.onDequeues=[];var n=ga(e);O(this,n),this.lookup=new ha(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},ma=va.prototype;ma.reasons=pa,ma.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},ma.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},ma.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Lt((function(t,e){return e.reqs-t.reqs}))},ma.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ma.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),l=this.lookup;if(0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible())return null;if(!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(te(s*n))),r<-4)r=-4;else if(s>=7.99||r>3)return null;var u=Math.pow(2,r),c=e.h*u,f=e.w*u,d=a.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,d))return null;var h,p=l.get(t,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(h=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||f>1024)return null;var g=o.getTextureQueue(h),v=g[g.length-2],m=function(){return o.recycleTexture(h,f)||o.addTexture(h,f)};v||(v=g[g.length-1]),v||(v=m()),v.width-v.usedWidth<f&&(v=m());for(var y,_=function(t){return t&&t.scaledLabelShown===d},b=i&&i===pa.dequeue,w=i&&i===pa.highQuality,x=i&&i===pa.downscale,k=r+1;k<=3;k++){var E=l.get(t,k);if(E){y=E;break}}var z=y&&y.level===r+1?y:null,A=function(){v.context.drawImage(z.texture.canvas,z.x,0,z.width,z.height,v.usedWidth,0,f,c)};if(v.context.setTransform(1,0,0,1,0,0),v.context.clearRect(v.usedWidth,0,f,h),_(z))A();else if(_(y)){if(!w)return o.queueElement(t,y.level-1),y;for(var C=y.level;C>r;C--)z=o.getElement(t,e,n,C,pa.downscale);A()}else{var T;if(!b&&!w&&!x)for(var S=r-1;S>=-4;S--){var M=l.get(t,S);if(M){T=M;break}}if(_(T))return o.queueElement(t,r),T;v.context.translate(v.usedWidth,0),v.context.scale(u,u),this.drawElement(v.context,t,e,d,!1),v.context.scale(1/u,1/u),v.context.translate(-v.usedWidth,0)}return p={x:v.usedWidth,texture:v,level:r,scale:u,width:f,height:c,scaledLabelShown:d},v.usedWidth+=Math.ceil(f+8),v.eleCaches.push(p),l.set(t,r,p),o.checkTextureFullness(v),p},ma.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},ma.invalidateElement=function(t){var e=this.lookup,n=[];if(e.isInvalid(t)){for(var r=-4;r<=3;r++){var i=e.getForCachedKey(t,r);i&&n.push(i)}if(e.invalidate(t))for(var o=0;o<n.length;o++){var a=n[o],s=a.texture;s.invalidatedWidth+=a.width,a.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(t)}},ma.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},ma.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?At(e,t):t.fullnessChecks++},ma.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;At(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var a=i[o];r.deleteCache(a.key,a.level)}Ct(i),this.getRetiredTextureQueue(e).push(t)},ma.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},ma.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var o=r[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Ct(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),At(r,o),n.push(o),o}},ma.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),o=r[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var a={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(a),r[i]=a}},ma.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,o=0;o<1&&e.size()>0;o++){var a=e.pop(),s=a.key,l=a.eles[0],u=i.hasCache(l,a.level);if(n[s]=null,!u){r.push(a);var c=this.getBoundingBox(l);this.getElement(l,c,t,a.level,pa.dequeue)}}return r},ma.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=ht,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},ma.onDequeue=function(t){this.onDequeues.push(t)},ma.offDequeue=function(t){At(this.onDequeues,t)},ma.setupDequeueing=da({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var o=e[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(he(s,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var ya=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=rt()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=Q((function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)}),50),n.beforeRender((function(t,n){e.skipping=n-e.lastInvalidationTime<=250}),n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new Lt((function(t,e){return e.reqs-t.reqs})),e.setupDequeueing()},_a=ya.prototype,ba=0,wa=Math.pow(2,53)-1;_a.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:ba=++ba%wa,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,u=-a.bb.y1;return s.scale(n,n),s.translate(l,u),a},_a.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(te(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var a,s,l=r.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[];if(r.levelIsComplete(n,t))return c;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return s=l[e],!0},i=function(t){if(!s)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var a=c[o];a.invalid&&At(c,a)}}();var f=function(e){var i=(e=e||{}).after;if(function(){if(!a){a=le();for(var e=0;e<t.length;e++)n=a,r=t[e].boundingBox(),n.x1=Math.min(n.x1,r.x1),n.x2=Math.max(n.x2,r.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,r.y1),n.y2=Math.max(n.y2,r.y2),n.h=n.y2-n.y1}var n,r}(),a.w*u*(a.h*u)>16e6)return null;var o=r.makeLayer(a,n);if(null!=i){var s=c.indexOf(i)+1;c.splice(s,0,o)}else(void 0===e.insert||e.insert)&&c.unshift(o);return o};if(r.skipping&&!o)return null;for(var d=null,h=t.length/1,p=!o,g=0;g<t.length;g++){var v=t[g],m=v._private.rscratch,y=m.imgLayerCaches=m.imgLayerCaches||{},_=y[n];if(_)d=_;else{if((!d||d.eles.length>=h||!ge(d.bb,v.boundingBox()))&&!(d=f({insert:!0,after:d})))return null;s||p?r.queueLayer(d,v):r.drawEleInLayer(d,v,n,e),d.eles.push(v),y[n]=d}}return s||(p?null:c)},_a.getEleLevelForLayerLevel=function(t,e){return t},_a.drawEleInLayer=function(t,e,n,r){var i=this.renderer,o=t.context,a=e.boundingBox();0!==a.w&&0!==a.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,n,!0),i.setImgSmoothing(o,!0))},_a.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===e.length},_a.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}}},_a.updateElementsInLayers=function(t,e){for(var n=_(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],o=n?t[r]:t[r].ele,a=o._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||e(u,o,i))}},_a.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},_a.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=rt(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,(function(t,n,r){e.invalidateLayer(t)})))},_a.invalidateLayer=function(t){if(this.lastInvalidationTime=rt(),!t.invalid){var e=t.level,n=t.eles;At(this.layersByLevel[e],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var r=0;r<n.length;r++){var i=n[r]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}},_a.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,(function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])}))},_a.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},_a.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},_a.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},_a.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[t.level]=t)}this.requestRedraw()}},_a.requestRedraw=Q((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),_a.setupDequeueing=da({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:mt,shouldRedraw:pt,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var xa,ka={};function Ea(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function za(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Aa(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];for(t.moveTo(s.x,s.y),i=1;i<a.length;i++)t.lineTo((o=a[i]).x,o.y);t.closePath&&t.closePath()}function Ca(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}ka.arrowShapeImpl=function(t){return(xa||(xa={polygon:Ea,"triangle-backcurve":za,"triangle-tee":Aa,"triangle-cross":Aa,circle:Ca}))[t]};var Ta={drawElement:function(t,e,n,r,i,o){e.isNode()?this.drawNode(t,e,n,r,i,o):this.drawEdge(t,e,n,r,i,o)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,o,a){var s=this,l=n.getBoundingBox(e);if(0!==l.w&&0!==l.h){var u=n.getElement(e,l,r,i,o);if(null!=u){var c=e.effectiveOpacity();if(0===c)return;var f,d,h,p,g,v,m=a(s,e),y=l.x1,_=l.y1,b=l.w,w=l.h;if(0!==m){var x=n.getRotationPoint(e);t.translate(h=x.x,p=x.y),t.rotate(m),(g=s.getImgSmoothing(t))||s.setImgSmoothing(t,!0);var k=n.getRotationOffset(e);f=k.x,d=k.y}else f=y,d=_;1!==c&&(t.globalAlpha=(v=t.globalAlpha)*c),t.drawImage(u.texture.canvas,u.x,0,u.width,u.height,f,d,b,w),1!==c&&(t.globalAlpha=v),0!==m&&(t.rotate(-m),t.translate(-h,-p),g||s.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},Sa=function(){return 0},Ma=function(t,e){return t.getTextAngle(e,null)},Na=function(t,e){return t.getTextAngle(e,"source")},Da=function(t,e){return t.getTextAngle(e,"target")};Ta.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,d=e.boundingBox(),h=!0===o?l.reasons.highQuality:null;0!==d.w&&0!==d.h&&e.visible()&&(r&&!he(d,r)||(a.drawCachedElementPortion(t,e,l,n,i,h,Sa),a.drawCachedElementPortion(t,e,u,n,i,h,Ma),e.isEdge()&&(a.drawCachedElementPortion(t,e,c,n,i,h,Na),a.drawCachedElementPortion(t,e,f,n,i,h,Da)),a.drawElementOverlay(t,e)))},Ta.drawElements=function(t,e){for(var n=0;n<e.length;n++)this.drawElement(t,e[n])},Ta.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++)this.drawCachedElement(t,e[i],n,r)},Ta.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,n,r)}},Ta.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&t.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(t,e,n,r)};for(var Oa={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=e._private.rscratch;if(e.visible()&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;n&&t.translate(-(l=n).x1,-l.y1);var u=o?e.pstyle("opacity").value:1,c=e.pstyle("line-style").value,f=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;t.lineWidth=f,t.lineCap=d,a.eleStrokeStyle(t,e,n),a.drawEdgePath(e,t,s.allpts,c),t.lineCap="butt"},p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;a.drawArrowheads(t,e,n)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var g=e.pstyle("ghost-offset-x").pfValue,v=e.pstyle("ghost-offset-y").pfValue,m=e.pstyle("ghost-opacity").value,y=u*m;t.translate(g,v),h(y),p(y),t.translate(-g,-v)}h(),p(),i&&a.drawEdgeOverlay(t,e),a.drawElementText(t,e,null,r),n&&t.translate(l.x1,l.y1)}},drawEdgeOverlay:function(t,e){if(e.visible()){var n=e.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),o=e._private.rscratch,a=2*e.pstyle("overlay-padding").pfValue,s=e.pstyle("overlay-color").value;t.lineWidth=a,t.lineCap="self"!==o.edgeType||i?"round":"butt",r.colorStrokeStyle(t,s[0],s[1],s[2],n),r.drawEdgePath(e,t,o.allpts,"solid")}}},drawEdgePath:function(t,e,n,r){var i,o=t._private.rscratch,a=e,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=n.join("$");o.pathCacheKey&&o.pathCacheKey===f?(i=e=o.pathCache,s=!0):(i=e=new Path2D,o.pathCacheKey=f,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)e.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var h=2;h+1<n.length;h+=2)e.lineTo(n[h],n[h+1])}e=a,l?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(t,e,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=e.pstyle(n+"-arrow-shape").value;if("none"!==s){var l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",u=e.pstyle(n+"-arrow-fill").value,c=e.pstyle("width").pfValue,f=e.pstyle("opacity").value;void 0===a&&(a=f);var d=t.globalCompositeOperation;1===a&&"hollow"!==u||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(e,t,l,c,s,r,i,o),t.globalCompositeOperation=d);var h=e.pstyle(n+"-arrow-color").value;this.colorFillStyle(t,h[0],h[1],h[2],a),this.colorStrokeStyle(t,h[0],h[1],h[2],a),this.drawArrowShape(e,t,u,c,s,r,i,o)}}},drawArrowShape:function(t,e,n,r,i,o,a,s){var l,u=this,c=this.usePaths()&&"triangle-cross"!==i,f=!1,d=e,h={x:o,y:a},p=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,p),v=u.arrowShapes[i];if(c){var m=u.arrowPathCache=u.arrowPathCache||[],y=st(i),_=m[y];null!=_?(l=e=_,f=!0):(l=e=new Path2D,m[y]=l)}e.beginPath&&e.beginPath(),f||(c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,g,s,h,r)),e.closePath&&e.closePath(),e=d,c&&(e.translate(o,a),e.rotate(s),e.scale(g,g)),"filled"!==n&&"both"!==n||(c?e.fill(l):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(v.matchEdgeWidth?r:1)/(c?g:1),e.lineJoin="miter",c?e.stroke(l):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-o,-a))}},Ia={safeDrawImage:function(t,e,n,r,i,o,a,s,l,u){i<=0||o<=0||l<=0||u<=0||t.drawImage(e,n,r,i,o,a,s,l,u)},drawInscribedImage:function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,l=a.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),f=c(n,"background-fit","value",r),d=c(n,"background-repeat","value",r),h=n.width(),p=n.height(),g=2*n.padding(),v=h+("inner"===c(n,"background-width-relative-to","value",r)?0:g),m=p+("inner"===c(n,"background-height-relative-to","value",r)?0:g),y=n._private.rscratch,_="node"===n.pstyle("background-clip").value,b=c(n,"background-image-opacity","value",r)*i,w=e.width||e.cachedW,x=e.height||e.cachedH;null!=w&&null!=x||(document.body.appendChild(e),w=e.cachedW=e.width||e.offsetWidth,x=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var k=w,E=x;if("auto"!==c(n,"background-width","value",r)&&(k="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*v:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(E="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*m:c(n,"background-height","pfValue",r)),0!==k&&0!==E){if("contain"===f)k*=z=Math.min(v/k,m/E),E*=z;else if("cover"===f){var z;k*=z=Math.max(v/k,m/E),E*=z}var A=s-v/2,C=c(n,"background-position-x","units",r),T=c(n,"background-position-x","pfValue",r);A+="%"===C?(v-k)*T:T;var S=c(n,"background-offset-x","units",r),M=c(n,"background-offset-x","pfValue",r);A+="%"===S?(v-k)*M:M;var N=l-m/2,D=c(n,"background-position-y","units",r),O=c(n,"background-position-y","pfValue",r);N+="%"===D?(m-E)*O:O;var I=c(n,"background-offset-y","units",r),P=c(n,"background-offset-y","pfValue",r);N+="%"===I?(m-E)*P:P,y.pathCache&&(A-=s,N-=l,s=0,l=0);var L=t.globalAlpha;if(t.globalAlpha=b,"no-repeat"===d)_&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,v,m),t.clip())),o.safeDrawImage(t,e,0,0,w,x,A,N,k,E),_&&t.restore();else{var B=t.createPattern(e,d);t.fillStyle=B,o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,v,m),t.translate(A,N),t.fill(),t.translate(-A,-N)}t.globalAlpha=L}}},Pa={eleTextBiggerThanMin:function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(te(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},drawElementText:function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(!a.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){if(!(s=e.pstyle("label"))||!s.value)return;switch(e.pstyle("text-halign").strValue){case"left":t.textAlign="right";break;case"right":t.textAlign="left";break;default:t.textAlign="center"}t.textBaseline="bottom"}else{var s=e.pstyle("label"),l=e.pstyle("source-label"),u=e.pstyle("target-label");if(!(s&&s.value||l&&l.value||u&&u.value))return;t.textAlign="center",t.textBaseline="bottom"}var c,f=!n;n&&t.translate(-(c=n).x1,-c.y1),null==i?(a.drawText(t,e,null,f,o),e.isEdge()&&(a.drawText(t,e,"source",f,o),a.drawText(t,e,"target",f,o))):a.drawText(t,e,i,f,o),n&&t.translate(c.x1,c.y1)},getFontCache:function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return this.fontCaches.push(e={context:t}),e},setupTextStyle:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=e.pstyle("text-opacity").value*(n?e.effectiveOpacity():1),l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],l)},getTextAngle:function(t,e){var n=t._private.rscratch,r=t.pstyle((e?e+"-":"")+"text-rotation"),i=Tt(n,"labelAngle",e);return"autorotate"===r.strValue?t.isEdge()?i:0:"none"===r.strValue?0:r.pfValue},drawText:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private.rscratch,a=i?e.effectiveOpacity():1;if(0!==a&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var s,l,u,c,f,d,h=Tt(o,"labelX",n),p=Tt(o,"labelY",n),g=this.getLabelText(e,n);if(null!=g&&""!==g&&!isNaN(h)&&!isNaN(p)){this.setupTextStyle(t,e,i);var v,m=n?n+"-":"",y=Tt(o,"labelWidth",n),_=Tt(o,"labelHeight",n),b=e.pstyle(m+"text-margin-x").pfValue,w=e.pstyle(m+"text-margin-y").pfValue,x=e.isEdge(),k=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;if(x&&(k="center",E="center"),h+=b,p+=w,0!==(v=r?this.getTextAngle(e,n):0)){var z=h,A=p;t.translate(z,A),t.rotate(v),h=0,p=0}switch(E){case"top":break;case"center":p+=_/2;break;case"bottom":p+=_}var C=e.pstyle("text-background-opacity").value,T=e.pstyle("text-border-opacity").value,S=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue;if(C>0||S>0&&T>0){var N=h-M;switch(k){case"left":N-=y;break;case"center":N-=y/2}var D=p-_-M,O=y+2*M,I=_+2*M;if(C>0){var P=t.fillStyle,L=e.pstyle("text-background-color").value;t.fillStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+C*a+")","roundrectangle"==e.pstyle("text-background-shape").strValue?(l=N,u=D,c=O,f=I,d=(d=2)||5,(s=t).beginPath(),s.moveTo(l+d,u),s.lineTo(l+c-d,u),s.quadraticCurveTo(l+c,u,l+c,u+d),s.lineTo(l+c,u+f-d),s.quadraticCurveTo(l+c,u+f,l+c-d,u+f),s.lineTo(l+d,u+f),s.quadraticCurveTo(l,u+f,l,u+f-d),s.lineTo(l,u+d),s.quadraticCurveTo(l,u,l+d,u),s.closePath(),s.fill()):t.fillRect(N,D,O,I),t.fillStyle=P}if(S>0&&T>0){var B=t.strokeStyle,j=t.lineWidth,F=e.pstyle("text-border-color").value,R=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+F[0]+","+F[1]+","+F[2]+","+T*a+")",t.lineWidth=S,t.setLineDash)switch(R){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=S/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(N,D,O,I),"double"===R){var q=S/2;t.strokeRect(N+q,D+q,O-2*q,I-2*q)}t.setLineDash&&t.setLineDash([]),t.lineWidth=j,t.strokeStyle=B}}var H=2*e.pstyle("text-outline-width").pfValue;if(H>0&&(t.lineWidth=H),"wrap"===e.pstyle("text-wrap").value){var $=Tt(o,"labelWrapCachedLines",n),W=_/$.length;switch(E){case"top":p-=($.length-1)*W;break;case"center":case"bottom":p-=($.length-1)*W}for(var U=0;U<$.length;U++)H>0&&t.strokeText($[U],h,p),t.fillText($[U],h,p),p+=W}else H>0&&t.strokeText(g,h,p),t.fillText(g,h,p);0!==v&&(t.rotate(-v),t.translate(-z,-A))}}}},La={drawNode:function(t,e,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=e._private,c=u.rscratch,f=e.position();if(v(f.x)&&v(f.y)&&e.visible()){var d,h,p=s?e.effectiveOpacity():1,g=l.usePaths(),m=!1,y=e.padding();r=e.width()+2*y,i=e.height()+2*y,n&&t.translate(-(h=n).x1,-h.y1);for(var _=e.pstyle("background-image").value,b=new Array(_.length),w=new Array(_.length),x=0,k=0;k<_.length;k++){var E=_[k];if(b[k]=null!=E&&"none"!==E){var z=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",k);x++,w[k]=l.getCachedImage(E,z,(function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")}))}}var A=e.pstyle("background-blacken").value,C=e.pstyle("border-width").pfValue,T=e.pstyle("background-opacity").value*p,S=e.pstyle("border-color").value,M=e.pstyle("border-style").value,N=e.pstyle("border-opacity").value*p;t.lineJoin="miter";var D=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;l.eleFillStyle(t,e,n)},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;l.colorStrokeStyle(t,S[0],S[1],S[2],e)},I=e.pstyle("shape").strValue,P=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(f.x,f.y);var L=l.nodePathCache=l.nodePathCache||[],B=lt("polygon"===I?I+","+P.join(","):I,""+i,""+r),j=L[B];null!=j?(m=!0,c.pathCache=d=j):(d=new Path2D,L[B]=c.pathCache=d)}var F=function(){if(!m){var n=f;g&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(e)].draw(d||t,n.x,n.y,r,i)}g?t.fill(d):t.fill()},R=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=u.backgrounding,i=0,o=0;o<w.length;o++)b[o]&&w[o].complete&&!w[o].error&&(i++,l.drawInscribedImage(t,w[o],e,o,n));u.backgrounding=!(i===x),r!==u.backgrounding&&e.updateStyle(!1)},q=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;l.hasPie(e)&&(l.drawPie(t,e,o),n&&(g||l.nodeShapes[l.getNodeShape(e)].draw(t,f.x,f.y,r,i)))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=(A>0?A:-A)*e,r=A>0?0:255;0!==A&&(l.colorFillStyle(t,r,r,r,n),g?t.fill(d):t.fill())},$=function(){if(C>0){if(t.lineWidth=C,t.lineCap="butt",t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(g?t.stroke(d):t.stroke(),"double"===M){t.lineWidth=C/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(d):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}};if("yes"===e.pstyle("ghost").value){var W=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue,V=e.pstyle("ghost-opacity").value,Y=V*p;t.translate(W,U),D(V*T),F(),R(Y),q(0!==A||0!==C),H(Y),O(V*N),$(),t.translate(-W,-U)}D(),F(),R(),q(0!==A||0!==C),H(),O(),$(),g&&t.translate(-f.x,-f.y),l.drawElementText(t,e,null,o),a&&l.drawNodeOverlay(t,e,f,r,i),n&&t.translate(h.x1,h.y1)}},drawNodeOverlay:function(t,e,n,r,i){if(e.visible()){var o=e.pstyle("overlay-padding").pfValue,a=e.pstyle("overlay-opacity").value,s=e.pstyle("overlay-color").value;if(a>0){if(n=n||e.position(),null==r||null==i){var l=e.padding();r=e.width()+2*l,i=e.height()+2*l}this.colorFillStyle(t,s[0],s[1],s[2],a),this.nodeShapes.roundrectangle.draw(t,n.x,n.y,r+2*o,i+2*o),t.fill()}}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,l=e.width(),u=e.height(),c=Math.min(l,u)/2,f=0;this.usePaths()&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var h=e.pstyle("pie-"+d+"-background-size").value,p=e.pstyle("pie-"+d+"-background-color").value,g=e.pstyle("pie-"+d+"-background-opacity").value*n,v=h/100;v+f>1&&(v=1-f);var m=1.5*Math.PI+2*Math.PI*f,y=m+2*Math.PI*v;0===h||f>=1||f+v>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,c,m,y),t.closePath(),this.colorFillStyle(t,p[0],p[1],p[2],g),t.fill(),f+=v)}}},Ba={getPixelRatio:function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&n.push(e={context:t}),e},createGradientStyleFor:function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,l=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),f=n.midpoint(),d=ne(u,f),h=ne(c,f);o=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,h))}else{var p=a?{x:0,y:0}:n.position(),g=n.width(),v=n.height();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,v))}else if(n.isEdge()){var m=n.sourceEndpoint(),y=n.targetEndpoint();o=t.createLinearGradient(m.x,m.y,y.x,y.y)}else{var _=a?{x:0,y:0}:n.position(),b=n.width()/2,w=n.height()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=t.createLinearGradient(_.x,_.y-w,_.x,_.y+w);break;case"to-top":o=t.createLinearGradient(_.x,_.y+w,_.x,_.y-w);break;case"to-left":o=t.createLinearGradient(_.x-b,_.y,_.x+b,_.y);break;case"to-right":o=t.createLinearGradient(_.x+b,_.y,_.x-b,_.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(_.x-b,_.y-w,_.x+b,_.y+w);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(_.x-b,_.y+w,_.x+b,_.y-w);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(_.x+b,_.y-w,_.x-b,_.y+w);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(_.x+b,_.y+w,_.x-b,_.y-w)}}if(!o)return null;for(var x=l.length===s.length,k=s.length,E=0;E<k;E++)o.addColorStop(x?l[E]:E/(k-1),"rgba("+s[E][0]+","+s[E][1]+","+s[E][2]+","+i+")");return o},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio();t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=e.motionBlurPxRatio);var s,l=i*a,u=o*a;if(l!==e.canvasWidth||u!==e.canvasHeight){e.fontCaches=null;var c=n.canvasContainer;c.style.width=i+"px",c.style.height=o+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)(s=n.canvases[f]).width=l,s.height=u,s.style.width=i+"px",s.style.height=o+"px";for(f=0;f<e.BUFFER_COUNT;f++)(s=n.bufferCanvases[f]).width=l,s.height=u,s.style.width=i+"px",s.style.height=o+"px";e.textureMult=1,a<=1&&(s=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,s.width=l*e.textureMult,s.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||Et()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,a=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,l=a.cy,u=a.data,c=u.canvasNeedsRedraw,f=a.textureOnViewport&&!e&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),d=void 0!==t.motionBlur?t.motionBlur:a.motionBlur,h=a.motionBlurPxRatio,p=l.hasCompoundNodes(),g=a.hoverData.draggingEles,v=d=d&&!e&&a.motionBlurEnabled&&!(a.hoverData.selecting||a.touchData.selecting);e||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!e&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),d&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(v=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!f&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var m=l.style(),y=l.zoom(),_=void 0!==i?i:y,b=l.pan(),w={x:b.x,y:b.y},x={zoom:y,pan:{x:b.x,y:b.y}},k=a.prevViewport;void 0===k||x.zoom!==k.zoom||x.pan.x!==k.pan.x||x.pan.y!==k.pan.y||g&&!p||(a.motionBlurPxRatio=1),o&&(w=o),_*=s,w.x*=s,w.y*=s;var E=a.getCachedZSortedEles();function z(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",a.colorFillStyle(t,255,255,255,a.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function A(t,r){var s,l,c,f;a.clearingMotionBlur||t!==u.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&t!==u.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=w,l=_,c=a.canvasWidth,f=a.canvasHeight):(s={x:b.x*h,y:b.y*h},l=y*h,c=a.canvasWidth*h,f=a.canvasHeight*h),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?z(t,0,0,c,f):e||void 0!==r&&!r||t.clearRect(0,0,c,f),n||(t.translate(s.x,s.y),t.scale(l,l)),o&&t.translate(o.x,o.y),i&&t.scale(i,i)}if(f||(a.textureDrawLastFrame=!1),f){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=l.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var C=a.data.bufferContexts[a.TEXTURE_BUFFER];C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:C,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(x=a.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var T=u.contexts[a.NODE],S=a.textureCache.texture;x=a.textureCache.viewport,T.setTransform(1,0,0,1,0,0),d?z(T,0,0,x.width,x.height):T.clearRect(0,0,x.width,x.height);var M=m.core("outside-texture-bg-color").value,N=m.core("outside-texture-bg-opacity").value;a.colorFillStyle(T,M[0],M[1],M[2],N),T.fillRect(0,0,x.width,x.height),y=l.zoom(),A(T,!1),T.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s),T.drawImage(S,x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s)}else a.textureOnViewport&&!e&&(a.textureCache=null);var D=l.extent(),O=a.hideEdgesOnViewport&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles),I=[];if(I[a.NODE]=!c[a.NODE]&&d&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,I[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),I[a.DRAG]=!c[a.DRAG]&&d&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,I[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||n||r||I[a.NODE]){var P=d&&!I[a.NODE]&&1!==h;A(T=e||(P?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:u.contexts[a.NODE]),d&&!P?"motionBlur":void 0),O?a.drawCachedNodes(T,E.nondrag,s,D):a.drawLayeredElements(T,E.nondrag,s,D),a.debug&&a.drawDebugPoints(T,E.nondrag),n||d||(c[a.NODE]=!1)}if(!r&&(c[a.DRAG]||n||I[a.DRAG])&&(P=d&&!I[a.DRAG]&&1!==h,A(T=e||(P?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:u.contexts[a.DRAG]),d&&!P?"motionBlur":void 0),O?a.drawCachedNodes(T,E.drag,s,D):a.drawCachedElements(T,E.drag,s,D),a.debug&&a.drawDebugPoints(T,E.drag),n||d||(c[a.DRAG]=!1)),a.showFps||!r&&c[a.SELECT_BOX]&&!n){if(A(T=e||u.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){y=a.cy.zoom();var L=m.core("selection-box-border-width").value/y;T.lineWidth=L,T.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",T.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),L>0&&(T.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",T.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(u.bgActivePosistion&&!a.hoverData.selecting){y=a.cy.zoom();var B=u.bgActivePosistion;T.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",T.beginPath(),T.arc(B.x,B.y,m.core("active-bg-size").pfValue/y,0,2*Math.PI),T.fill()}var j=a.lastRedrawTime;if(a.showFps&&j){j=Math.round(j);var F=Math.round(1e3/j);T.setTransform(1,0,0,1,0,0),T.fillStyle="rgba(255, 0, 0, 0.75)",T.strokeStyle="rgba(255, 0, 0, 0.75)",T.lineWidth=1,T.fillText("1 frame = "+j+" ms = "+F+" fps",0,20),T.strokeRect(0,30,250,20),T.fillRect(0,30,250*Math.min(F/60,1),20)}n||(c[a.SELECT_BOX]=!1)}if(d&&1!==h){var R=u.contexts[a.DRAG],q=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],H=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!v?t.clearRect(0,0,a.canvasWidth,a.canvasHeight):z(t,0,0,a.canvasWidth,a.canvasHeight),t.drawImage(e,0,0,a.canvasWidth*h,a.canvasHeight*h,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||I[a.NODE])&&(H(u.contexts[a.NODE],a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],I[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||I[a.DRAG])&&(H(R,q,I[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=x,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),d&&(a.motionBlurTimeout=setTimeout((function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!f,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()}),100)),e||l.emit("render")}},ja={drawPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+a*o[2*l],n+s*o[2*l+1]);t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Ie(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.arcTo(e+o,n-a,e+o,n,s),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.arcTo(e-o,n-a,e,n-a,s),t.lineTo(e,n-a),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Ie(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.lineTo(e+o,n-a),t.lineTo(e+o,n),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.lineTo(e-o,n-a),t.lineTo(e,n-a),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-o+8,n-a),t.lineTo(e+o-8,n-a),t.lineTo(e+o,n-a+8),t.lineTo(e+o,n+a-8),t.lineTo(e+o-8,n+a),t.lineTo(e-o+8,n+a),t.lineTo(e-o,n+a-8),t.lineTo(e-o,n-a+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,l=e+o,u=n-a,c=n+a,f=Pe(r,i),d=f.widthOffset,h=f.heightOffset,p=f.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,u+h),t.lineTo(s,c-h),t.quadraticCurveTo(s+p,c,s+d,c),t.lineTo(l-d,c),t.quadraticCurveTo(l-p,c,l,c-h),t.lineTo(l,u+h),t.quadraticCurveTo(l-p,u,l-d,u),t.lineTo(s+d,u),t.quadraticCurveTo(s+p,u,s,u+h),t.closePath()}},Fa=Math.sin(0),Ra=Math.cos(0),qa={},Ha={},$a=Math.PI/40,Wa=0*Math.PI;Wa<2*Math.PI;Wa+=$a)qa[Wa]=Math.sin(Wa),Ha[Wa]=Math.cos(Wa);ja.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=$a)o=e-s*qa[u]*Fa+s*Ha[u]*Ra,a=n+l*Ha[u]*Fa+l*qa[u]*Ra,0===u?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var Ua={};function Va(t){var e=t.indexOf(",");return t.substr(e+1)}function Ya(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new qn((function(r,i){try{e.toBlob((function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),n,t.quality)}catch(t){i(t)}}));case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}(Va(r()),n);case"base64":return Va(r());case"base64uri":default:return r()}}Ua.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},Ua.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],o=t.full?Math.ceil(n.h):r[3],a=v(t.maxWidth)||v(t.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,l=t.scale;else if(a){var u=1/0,c=1/0;v(t.maxWidth)&&(u=l*t.maxWidth/i),v(t.maxHeight)&&(c=l*t.maxHeight/o),i*=l=Math.min(u,c),o*=l}a||(i*=s,o*=s,l*=s);var f=document.createElement("canvas");f.width=i,f.height=o,f.style.width=i+"px",f.style.height=o+"px";var d=f.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o),d.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,h),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var p=e.pan(),g={x:p.x*l,y:p.y*l};l*=e.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,h),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,o),d.fill())}return f},Ua.png=function(t){return Ya(t,this.bufferCanvasImage(t),"image/png")},Ua.jpg=function(t){return Ya(t,this.bufferCanvasImage(t),"image/jpeg")};var Xa=Ka,Ga=Ka.prototype;function Ka(t){var e=this;e.data={canvases:new Array(Ga.CANVAS_LAYERS),contexts:new Array(Ga.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ga.CANVAS_LAYERS),bufferCanvases:new Array(Ga.BUFFER_COUNT),bufferContexts:new Array(Ga.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color: rgba(0,0,0,0);";e.data.canvasContainer=document.createElement("div");var r=e.data.canvasContainer.style;e.data.canvasContainer.setAttribute("style",n),r.position="relative",r.zIndex="0",r.overflow="hidden";var i=t.cy.container();i.appendChild(e.data.canvasContainer),(i.getAttribute("style")||"").indexOf(n)<0&&i.setAttribute("style",(i.getAttribute("style")||"")+n);for(var o=0;o<Ga.CANVAS_LAYERS;o++){var a=e.data.canvases[o]=document.createElement("canvas");e.data.contexts[o]=a.getContext("2d"),a.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(z()?" -ms-touch-action: none; touch-action: none; ":"")),a.style.position="absolute",a.setAttribute("data-id","layer"+o),a.style.zIndex=String(Ga.CANVAS_LAYERS-o),e.data.canvasContainer.appendChild(a),e.data.canvasNeedsRedraw[o]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[Ga.NODE].setAttribute("data-id","layer"+Ga.NODE+"-node"),e.data.canvases[Ga.SELECT_BOX].setAttribute("data-id","layer"+Ga.SELECT_BOX+"-selectbox"),e.data.canvases[Ga.DRAG].setAttribute("data-id","layer"+Ga.DRAG+"-drag"),o=0;o<Ga.BUFFER_COUNT;o++)e.data.bufferCanvases[o]=document.createElement("canvas"),e.data.bufferContexts[o]=e.data.bufferCanvases[o].getContext("2d"),e.data.bufferCanvases[o].style.position="absolute",e.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),e.data.bufferCanvases[o].style.zIndex=String(-o-1),e.data.bufferCanvases[o].style.visibility="hidden";e.pathsEnabled=!0;var s=le(),l=function(t){return{x:-t.w/2,y:-t.h/2}},u=function(t){return t.boundingBox(),t[0]._private.bodyBounds},c=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||s},f=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||s},d=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||s},h=function(t,e){return e},p=function(t,e){return{x:t.x+e.pstyle("text-margin-x").pfValue,y:t.y+e.pstyle("text-margin-y").pfValue}},g=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},v=e.data.eleTxrCache=new va(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,n,r,i,o){return e.drawElement(t,n,r,!1,!1,o)},getBoundingBox:u,getRotationPoint:function(t){return{x:((e=u(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return l(u(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),m=e.data.lblTxrCache=new va(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"main",o)},getBoundingBox:c,getRotationPoint:function(t){return p(g(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=c(t),n=l(c(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},isVisible:h}),y=e.data.slbTxrCache=new va(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"source",o)},getBoundingBox:f,getRotationPoint:function(t){return p(g(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return l(f(t))},isVisible:h}),_=e.data.tlbTxrCache=new va(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"target",o)},getBoundingBox:d,getRotationPoint:function(t){return p(g(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return l(d(t))},isVisible:h}),b=e.data.lyrTxrCache=new ya(e);e.onUpdateEleCalcs((function(t,e){v.invalidateElements(e),m.invalidateElements(e),y.invalidateElements(e),_.invalidateElements(e),b.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}}));var w=function(t){for(var e=0;e<t.length;e++)b.enqueueElementRefinement(t[e].ele)};v.onDequeue(w),m.onDequeue(w),y.onDequeue(w),_.onDequeue(w)}Ga.CANVAS_LAYERS=3,Ga.SELECT_BOX=0,Ga.DRAG=1,Ga.NODE=2,Ga.BUFFER_COUNT=3,Ga.TEXTURE_BUFFER=0,Ga.MOTIONBLUR_BUFFER_NODE=1,Ga.MOTIONBLUR_BUFFER_DRAG=2,Ga.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[Ga.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[Ga.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[Ga.SELECT_BOX]=e}};var Za="undefined"!=typeof Path2D;Ga.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},Ga.usePaths=function(){return Za&&this.pathsEnabled},Ga.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},Ga.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},Ga.makeOffscreenCanvas=function(e,n){var r;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":t(OffscreenCanvas))?r=new OffscreenCanvas(e,n):((r=document.createElement("canvas")).width=e,r.height=n),r},[ka,Ta,Oa,Ia,Pa,La,Ba,ja,Ua,{nodeShapeImpl:function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}}].forEach((function(t){O(Ga,t)}));var Qa=[{type:"layout",extensions:Ho},{type:"renderer",extensions:[{name:"null",impl:$o},{name:"base",impl:ca},{name:"canvas",impl:Xa}]}],Ja={},ts={};function es(t,e,n){var r=n,i=function(n){yt("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(vo.prototype[e])return i(e);vo.prototype[e]=n}else if("collection"===t){if(Ii.prototype[e])return i(e);Ii.prototype[e]=n}else if("layout"===t){for(var o=function(t){this.options=t,n.call(this,t),g(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var u=s[l];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var f=function(t){return t._private.cy},d={addEventFields:function(t,e){e.layout=t,e.cy=f(t),e.target=t},bubble:function(){return!0},parent:function(t){return f(t)}};O(a,{createEmitter:function(){return this._private.emitter=new ti(d,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),Wn.eventAliasesOn(a),r=o}else if("renderer"===t&&"null"!==e&&"base"!==e){var h=ns("renderer","base"),p=h.prototype,v=n,m=n.prototype,y=function(){h.apply(this,arguments),v.apply(this,arguments)},_=y.prototype;for(var b in p){var w=p[b];if(null!=m[b])return i(b);_[b]=w}for(var x in m)_[x]=m[x];p.clientFunctions.forEach((function(t){_[t]=_[t]||function(){yt("Renderer does not implement `renderer."+t+"()` on its prototype")}})),r=y}return L({map:Ja,keys:[t,e],value:r})}function ns(t,e){return B({map:Ja,keys:[t,e]})}var rs=function(){return 2===arguments.length?ns.apply(null,arguments):3===arguments.length?es.apply(null,arguments):4===arguments.length?(function(t,e,n,r){return B({map:ts,keys:[t,e,n,r]})}).apply(null,arguments):5===arguments.length?(function(t,e,n,r,i){return L({map:ts,keys:[t,e,n,r],value:i})}).apply(null,arguments):void yt("Invalid extension access syntax")};vo.prototype.extension=rs,Qa.forEach((function(t){t.extensions.forEach((function(e){es(t.type,e.name,e.impl)}))}));var is=function t(){if(!(this instanceof t))return new t;this.length=0},os=is.prototype;os.instanceString=function(){return"stylesheet"},os.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},os.css=function(t,e){var n=this.length-1;if(d(t))this[n].properties.push({name:t,value:e});else if(g(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var l=fo.properties[a]||fo.properties[T(a)];null!=l&&this[n].properties.push({name:l.name,value:s})}}return this},os.style=os.css,os.generateStyle=function(t){var e=new fo(t);return this.appendToStyle(e)},os.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.properties;t.selector(n.selector);for(var i=0;i<r.length;i++){var o=r[i];t.css(o.name,o.value)}}return t};var as=function(t){return void 0===t&&(t={}),g(t)?new vo(t):d(t)?rs.apply(rs,arguments):void 0};return as.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(as),t.apply(null,e),this},as.warnings=function(t){return _t(t)},as.version="3.5.1",as.stylesheet=as.Stylesheet=is,as})),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],(function(t){return e(t)})):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,(function(t){!function(t){"use strict";function e(t){var e,n=[],r=t&&t.options;if(t.multiple)for(var i=0,o=r.length;i<o;i++)(e=r[i]).selected&&n.push(e.value||e.text);else n=t.value;return n}function n(t,e,n,r){for(var o=["content","subtext","tokens"],a=!1,s=0;s<o.length;s++){var l=o[s],u=t[l];if(u&&(u=u.toString(),"content"===l&&(u=u.replace(/<[^>]+>/g,"")),r&&(u=i(u)),u=u.toUpperCase(),a="contains"===n?u.indexOf(e)>=0:u.startsWith(e)))break}return a}function r(t){return parseInt(t,10)||0}function i(e){return t.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],(function(){e=e?e.replace(this.re,this.ch):""})),e}function o(e){var n=arguments,r=e;[].shift.apply(n);var i,o=this.each((function(){var e=t(this);if(e.is("select")){var o=e.data("selectpicker"),a="object"==typeof r&&r;if(o){if(a)for(var s in a)a.hasOwnProperty(s)&&(o.options[s]=a[s])}else{var l=t.extend({},_.DEFAULTS,t.fn.selectpicker.defaults||{},e.data(),a);l.template=t.extend({},_.DEFAULTS.template,t.fn.selectpicker.defaults?t.fn.selectpicker.defaults.template:{},e.data().template,a.template),e.data("selectpicker",o=new _(this,l))}"string"==typeof r&&(i=o[r]instanceof Function?o[r].apply(o,n):o.options[r])}}));return void 0!==i?i:o}var a=document.createElement("_");if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:s.call(this,t)}}String.prototype.startsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e={}.toString,n=function(t){if(null==this)throw new TypeError;var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var r=n.length,i=String(t),o=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;s!=s&&(s=0);var l=Math.min(Math.max(s,0),r);if(o+l>r)return!1;for(var u=-1;++u<o;)if(n.charCodeAt(l+u)!=i.charCodeAt(u))return!1;return!0};t?t(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),Object.keys||(Object.keys=function(t,e,n){for(e in n=[],t)n.hasOwnProperty.call(t,e)&&n.push(e);return n});var l={useDefault:!1,_set:t.valHooks.select.set};t.valHooks.select.set=function(e,n){return n&&!l.useDefault&&t(e).data("selected",!0),l._set.apply(this,arguments)};var u=null,c=function(){try{return new Event("change"),!0}catch(t){return!1}}();t.fn.triggerNative=function(t){var e,n=this[0];n.dispatchEvent?(c?e=new Event(t,{bubbles:!0}):(e=document.createEvent("Event")).initEvent(t,!0,!1),n.dispatchEvent(e)):n.fireEvent?((e=document.createEventObject()).eventType=t,n.fireEvent("on"+t,e)):this.trigger(t)};var f=function(t){var e=function(e){return t[e]},n="(?:"+Object.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(i,e):t}},d=f({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}),h=f({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"}),p={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},g={};try{g.full=(t.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),g.major=g.full[0]}catch(t){console.error("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision.",t),g.major="3"}var v={DISABLED:"disabled",DIVIDER:"4"===g.major?"dropdown-divider":"divider",SHOW:"4"===g.major?"show":"open",DROPUP:"dropup",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"4"===g.major?"btn-light":"btn-default",POPOVERHEADER:"4"===g.major?"popover-header":"popover-title"},m=new RegExp("38|40"),y=new RegExp("^9$|27"),_=(new RegExp("13|32"),function(e,n){var r=this;l.useDefault||(t.valHooks.select.set=l._set,l.useDefault=!0),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.options=n,this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout((function(){r.selectpicker.keydown.keyHistory=""}),800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var i=this.options.windowPadding;"number"==typeof i&&(this.options.windowPadding=[i,i,i,i]),this.val=_.prototype.val,this.render=_.prototype.render,this.refresh=_.prototype.refresh,this.setStyle=_.prototype.setStyle,this.selectAll=_.prototype.selectAll,this.deselectAll=_.prototype.deselectAll,this.destroy=_.prototype.destroy,this.remove=_.prototype.remove,this.show=_.prototype.show,this.hide=_.prototype.hide,this.init()});_.VERSION="1.13.1",_.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(t,e){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){return[1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600},"4"===g.major&&(_.DEFAULTS.style="btn-light",_.DEFAULTS.iconBase="",_.DEFAULTS.tickIcon="bs-ok-default"),_.prototype={constructor:_,init:function(){var t=this,e=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createDropdown(),this.createLi(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu.addClass(v.MENURIGHT),void 0!==e&&this.$button.attr("data-id",e),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide.bs.select",(function(){if(t.isVirtual()){var e=t.$menuInner[0],n=e.firstChild.cloneNode(!1);e.replaceChild(n,e.firstChild),e.scrollTop=0}})),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!1),t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!0),t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),t.$element[0].hasAttribute("required")&&this.$element.on("invalid",(function(){t.$button.addClass("bs-invalid"),t.$element.on({"shown.bs.select":function(){t.$element.val(t.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&t.$button.removeClass("bs-invalid"),t.$element.off("rendered.bs.select")}}),t.$button.on("blur.bs.select",(function(){t.$element.focus().blur(),t.$button.off("blur.bs.select")}))})),setTimeout((function(){t.$element.trigger("loaded.bs.select")}))},createDropdown:function(){var e=this.multiple||this.options.showTick?" show-tick":"",n=this.autofocus?" autofocus":"",r=this.options.header?'<div class="'+v.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",i=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+d(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"";return t('<div class="dropdown bootstrap-select'+e+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+n+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===g.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="dropdown-menu '+("4"===g.major?"":v.SHOW)+'" role="combobox">'+r+i+(this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+v.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+v.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>":"")+'<div class="inner '+v.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="dropdown-menu inner '+("4"===g.major?v.SHOW:"")+'"></ul></div>'+(this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+v.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>":"")+"</div></div>")},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var t=0;t<this.selectpicker.current.data.length;t++){var e=this.selectpicker.current.data[t],n=!0;"divider"===e.type?(n=!1,e.height=this.sizeInfo.dividerHeight):"optgroup-label"===e.type?(n=!1,e.height=this.sizeInfo.dropdownHeaderHeight):e.height=this.sizeInfo.liHeight,e.disabled&&(n=!1),this.selectpicker.view.canHighlight.push(n),e.position=(0===t?0:this.selectpicker.current.data[t-1].position)+e.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(e,n){function r(t,n){var r,l,u,c,f,d,h,p=i.selectpicker.current.elements.length,g=[],v=void 0,m=!0,y=i.isVirtual();i.selectpicker.view.scrollTop=t,!0===y&&i.sizeInfo.hasScrollBar&&i.$menu[0].offsetWidth>i.sizeInfo.totalMenuWidth&&(i.sizeInfo.menuWidth=i.$menu[0].offsetWidth,i.sizeInfo.totalMenuWidth=i.sizeInfo.menuWidth+i.sizeInfo.scrollBarWidth,i.$menu.css("min-width",i.sizeInfo.menuWidth)),r=Math.ceil(i.sizeInfo.menuInnerHeight/i.sizeInfo.liHeight*1.5),l=Math.round(p/r)||1;for(var _=0;_<l;_++){var b=(_+1)*r;if(_===l-1&&(b=p),g[_]=[_*r+(_?1:0),b],!p)break;void 0===v&&t<=i.selectpicker.current.data[b-1].position-i.sizeInfo.menuInnerHeight&&(v=_)}if(void 0===v&&(v=0),f=[i.selectpicker.view.position0,i.selectpicker.view.position1],u=Math.max(0,v-1),c=Math.min(l-1,v+1),i.selectpicker.view.position0=Math.max(0,g[u][0])||0,i.selectpicker.view.position1=Math.min(p,g[c][1])||0,d=f[0]!==i.selectpicker.view.position0||f[1]!==i.selectpicker.view.position1,void 0!==i.activeIndex&&(a=i.selectpicker.current.elements[i.selectpicker.current.map.newIndex[i.prevActiveIndex]],s=i.selectpicker.current.elements[i.selectpicker.current.map.newIndex[i.activeIndex]],o=i.selectpicker.current.elements[i.selectpicker.current.map.newIndex[i.selectedIndex]],n&&(i.activeIndex!==i.selectedIndex&&(s.classList.remove("active"),s.firstChild&&s.firstChild.classList.remove("active")),i.activeIndex=void 0),i.activeIndex&&i.activeIndex!==i.selectedIndex&&o&&o.length&&(o.classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active"))),void 0!==i.prevActiveIndex&&i.prevActiveIndex!==i.activeIndex&&i.prevActiveIndex!==i.selectedIndex&&a&&a.length&&(a.classList.remove("active"),a.firstChild&&a.firstChild.classList.remove("active")),(n||d)&&(h=i.selectpicker.view.visibleElements?i.selectpicker.view.visibleElements.slice():[],i.selectpicker.view.visibleElements=i.selectpicker.current.elements.slice(i.selectpicker.view.position0,i.selectpicker.view.position1),i.setOptionStatus(),(e||!1===y&&n)&&(m=!function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}(h,i.selectpicker.view.visibleElements)),(n||!0===y)&&m)){var w,x=i.$menuInner[0],k=document.createDocumentFragment(),E=x.firstChild.cloneNode(!1),z=!0===y?i.selectpicker.view.visibleElements:i.selectpicker.current.elements;x.replaceChild(E,x.firstChild),_=0;for(var A=z.length;_<A;_++)k.appendChild(z[_]);!0===y&&(w=i.selectpicker.view.position1>p-1?0:i.selectpicker.current.data[p-1].position-i.selectpicker.current.data[i.selectpicker.view.position1-1].position,x.firstChild.style.marginTop=(0===i.selectpicker.view.position0?0:i.selectpicker.current.data[i.selectpicker.view.position0-1].position)+"px",x.firstChild.style.marginBottom=w+"px"),x.firstChild.appendChild(k)}if(i.prevActiveIndex=i.activeIndex,i.options.liveSearch){if(e&&n){var C,T=0;i.selectpicker.view.canHighlight[T]||(T=1+i.selectpicker.view.canHighlight.slice(1).indexOf(!0)),C=i.selectpicker.view.visibleElements[T],i.selectpicker.view.currentActive&&(i.selectpicker.view.currentActive.classList.remove("active"),i.selectpicker.view.currentActive.firstChild&&i.selectpicker.view.currentActive.firstChild.classList.remove("active")),C&&(C.classList.add("active"),C.firstChild&&C.firstChild.classList.add("active")),i.activeIndex=i.selectpicker.current.map.originalIndex[T]}}else i.$menuInner.focus()}n=n||0;var i=this;this.selectpicker.current=e?this.selectpicker.search:this.selectpicker.main;var o,a,s=[];this.setPositionData(),r(n,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",(function(t,e){i.noScroll||r(this.scrollTop,e),i.noScroll=!1})),t(window).off("resize.createView").on("resize.createView",(function(){r(i.$menuInner[0].scrollTop)}))},createLi:function(){var e,n=this,r=[],i=0,o=0,a=[],s=0,l=0,u=-1;this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option"));var c={span:document.createElement("span"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode("\xa0")},f=c.span.cloneNode(!1),h=document.createDocumentFragment();f.className=n.options.iconBase+" "+n.options.tickIcon+" check-mark",c.a.appendChild(f),c.a.setAttribute("role","option"),c.subtext.className="text-muted",c.text=c.span.cloneNode(!1),c.text.className="text";var p=function(t,e,n,r){var i=c.li.cloneNode(!1);return t&&(1===t.nodeType||11===t.nodeType?i.appendChild(t):i.innerHTML=t),void 0!==n&&""!==n&&(i.className=n),null!=r&&i.classList.add("optgroup-"+r),i},m=function(t,e,n){var r=c.a.cloneNode(!0);return t&&(11===t.nodeType?r.appendChild(t):r.insertAdjacentHTML("beforeend",t)),void 0!==e&""!==e&&(r.className=e),"4"===g.major&&r.classList.add("dropdown-item"),n&&r.setAttribute("style",n),r},y=function(t){var e,r,i=c.text.cloneNode(!1);if(t.optionContent)i.innerHTML=t.optionContent;else{if(i.textContent=t.text,t.optionIcon){var o=c.whitespace.cloneNode(!1);(r=c.span.cloneNode(!1)).className=n.options.iconBase+" "+t.optionIcon,h.appendChild(r),h.appendChild(o)}t.optionSubtext&&((e=c.subtext.cloneNode(!1)).innerHTML=t.optionSubtext,i.appendChild(e))}return h.appendChild(i),h},_=function(t){var e,r,i=c.text.cloneNode(!1);if(i.textContent=t.labelEscaped,t.labelIcon){var o=c.whitespace.cloneNode(!1);(r=c.span.cloneNode(!1)).className=n.options.iconBase+" "+t.labelIcon,h.appendChild(r),h.appendChild(o)}return t.labelSubtext&&((e=c.subtext.cloneNode(!1)).textContent=t.labelSubtext,i.appendChild(e)),h.appendChild(i),h};if(this.options.title&&!this.multiple){u--;var b=this.$element[0],w=!1,x=!this.selectpicker.view.titleOption.parentNode;x&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",w=void 0===t(b.options[b.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")),(x||0!==this.selectpicker.view.titleOption.index)&&b.insertBefore(this.selectpicker.view.titleOption,b.firstChild),w&&(b.selectedIndex=0)}var k=this.$element.find("option");k.each((function(c){var f=t(this);if(u++,!f.hasClass("bs-title-option")){var h,g,b=f.data(),w=this.className||"",x=d(this.style.cssText),E=b.content,z=this.textContent,A=b.tokens,C=b.subtext,T=b.icon,S=f.parent(),M=S[0],N="OPTGROUP"===M.tagName,D=N&&M.disabled,O=this.disabled||D,I=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName,P=S.data();if(!0===b.hidden||n.options.hideDisabled&&(O&&!N||D))return h=b.prevHiddenIndex,f.next().data("prevHiddenIndex",void 0!==h?h:c),u--,I||void 0===h||(H=k[h].previousElementSibling)&&"OPTGROUP"===H.tagName&&!H.disabled&&(I=!0),void(I&&"divider"!==a[a.length-1].type&&(u++,r.push(p(!1,0,v.DIVIDER,s+"div")),a.push({type:"divider",optID:s,originalIndex:c})));if(N&&!0!==b.divider){if(n.options.hideDisabled&&O){if(void 0===P.allOptionsDisabled){var L=S.children();S.data("allOptionsDisabled",L.filter(":disabled").length===L.length)}if(S.data("allOptionsDisabled"))return void u--}var B=" "+M.className||"";if(!this.previousElementSibling){s+=1;var j=d(M.label),F=P.subtext,R=P.icon;0!==c&&r.length>0&&(u++,r.push(p(!1,0,v.DIVIDER,s+"div")),a.push({type:"divider",optID:s,originalIndex:c})),u++;var q=_({labelEscaped:j,labelSubtext:F,labelIcon:R});r.push(p(q,0,"dropdown-header"+B,s)),a.push({content:j,subtext:F,type:"optgroup-label",optID:s,originalIndex:c}),l=u-1}if(n.options.hideDisabled&&O||!0===b.hidden)return void u--;g=y({text:z,optionContent:E,optionSubtext:C,optionIcon:T}),r.push(p(m(g,"opt "+w+B,x),0,"",s)),a.push({content:E||z,subtext:C,tokens:A,type:"option",optID:s,headerIndex:l,lastIndex:l+M.childElementCount,originalIndex:c,data:b}),i++}else if(!0===b.divider)r.push(p(!1,0,"divider")),a.push({type:"divider",originalIndex:c});else{var H;!I&&n.options.hideDisabled&&void 0!==(h=b.prevHiddenIndex)&&(H=k[h].previousElementSibling)&&"OPTGROUP"===H.tagName&&!H.disabled&&(I=!0),I&&"divider"!==a[a.length-1].type&&(u++,r.push(p(!1,0,v.DIVIDER,s+"div")),a.push({type:"divider",optID:s,originalIndex:c})),g=y({text:z,optionContent:E,optionSubtext:C,optionIcon:T}),r.push(p(m(g,w,x))),a.push({content:E||z,subtext:C,tokens:A,type:"option",originalIndex:c,data:b}),i++}n.selectpicker.main.map.newIndex[c]=u,n.selectpicker.main.map.originalIndex[u]=c;var $=a[a.length-1];$.disabled=O;var W=0;$.content&&(W+=$.content.length),$.subtext&&(W+=$.subtext.length),T&&(W+=1),W>o&&(o=W,e=r[r.length-1])}})),this.selectpicker.main.elements=r,this.selectpicker.main.data=a,this.selectpicker.current=this.selectpicker.main,this.selectpicker.view.widestOption=e,this.selectpicker.view.availableOptionsCount=i},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var t=this,e=this.$element.find("option"),n=[],r=[];this.togglePlaceholder(),this.tabIndex();for(var i=0,o=this.selectpicker.main.elements.length;i<o;i++){var a=e[this.selectpicker.main.map.originalIndex[i]];if(a&&a.selected&&(n.push(a),r.length<100&&"count"!==t.options.selectedTextFormat||1===n.length)){if(t.options.hideDisabled&&(a.disabled||"OPTGROUP"===a.parentNode.tagName&&a.parentNode.disabled))return;var s,l,u=this.selectpicker.main.data[i].data,c=u.icon&&t.options.showIcon?'<i class="'+t.options.iconBase+" "+u.icon+'"></i> ':"";s=t.options.showSubtext&&u.subtext&&!t.multiple?' <small class="text-muted">'+u.subtext+"</small>":"",l=a.title?a.title:u.content&&t.options.showContent?u.content.toString():c+a.innerHTML.trim()+s,r.push(l)}}var f=this.multiple?r.join(this.options.multipleSeparator):r[0];if(n.length>50&&(f+="..."),this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")){var d=this.options.selectedTextFormat.split(">");if(d.length>1&&n.length>d[1]||1===d.length&&n.length>=2){var p=this.selectpicker.view.availableOptionsCount;f=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(n.length,p):this.options.countSelectedText).replace("{0}",n.length.toString()).replace("{1}",p.toString())}}null==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(f=this.options.title),f||(f=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button[0].title=h(f.replace(/<[^>]*>?/g,"").trim()),this.$button.find(".filter-option-inner-inner")[0].innerHTML=f,this.$element.trigger("rendered.bs.select")},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var n=t||this.options.style;"add"==e?this.$button.addClass(n):"remove"==e?this.$button.removeClass(n):(this.$button.removeClass(this.options.style),this.$button.addClass(n))},liHeight:function(e){if(e||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),a=document.createElement("ul"),s=document.createElement("li"),l=document.createElement("li"),u=document.createElement("li"),c=document.createElement("a"),f=document.createElement("span"),d=this.options.header&&this.$menu.find("."+v.POPOVERHEADER).length>0?this.$menu.find("."+v.POPOVERHEADER)[0].cloneNode(!0):null,h=this.options.liveSearch?document.createElement("div"):null,p=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,f.className="text",c.className="dropdown-item",n.className=this.$menu[0].parentNode.className+" "+v.SHOW,n.style.width=this.sizeInfo.selectWidth+"px",i.className="dropdown-menu "+v.SHOW,o.className="inner "+v.SHOW,a.className="dropdown-menu inner "+("4"===g.major?v.SHOW:""),s.className=v.DIVIDER,l.className="dropdown-header",f.appendChild(document.createTextNode("Inner text")),c.appendChild(f),u.appendChild(c),l.appendChild(f.cloneNode(!0)),this.selectpicker.view.widestOption&&a.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),a.appendChild(u),a.appendChild(s),a.appendChild(l),d&&i.appendChild(d),h){var y=document.createElement("input");h.className="bs-searchbox",y.className="form-control",h.appendChild(y),i.appendChild(h)}p&&i.appendChild(p),o.appendChild(a),i.appendChild(o),m&&i.appendChild(m),n.appendChild(i),document.body.appendChild(n);var _,b=c.offsetHeight,w=l?l.offsetHeight:0,x=d?d.offsetHeight:0,k=h?h.offsetHeight:0,E=p?p.offsetHeight:0,z=m?m.offsetHeight:0,A=t(s).outerHeight(!0),C=!!window.getComputedStyle&&window.getComputedStyle(i),T=i.offsetWidth,S=C?null:t(i),M={vert:r(C?C.paddingTop:S.css("paddingTop"))+r(C?C.paddingBottom:S.css("paddingBottom"))+r(C?C.borderTopWidth:S.css("borderTopWidth"))+r(C?C.borderBottomWidth:S.css("borderBottomWidth")),horiz:r(C?C.paddingLeft:S.css("paddingLeft"))+r(C?C.paddingRight:S.css("paddingRight"))+r(C?C.borderLeftWidth:S.css("borderLeftWidth"))+r(C?C.borderRightWidth:S.css("borderRightWidth"))},N={vert:M.vert+r(C?C.marginTop:S.css("marginTop"))+r(C?C.marginBottom:S.css("marginBottom"))+2,horiz:M.horiz+r(C?C.marginLeft:S.css("marginLeft"))+r(C?C.marginRight:S.css("marginRight"))+2};o.style.overflowY="scroll",_=i.offsetWidth-T,document.body.removeChild(n),this.sizeInfo.liHeight=b,this.sizeInfo.dropdownHeaderHeight=w,this.sizeInfo.headerHeight=x,this.sizeInfo.searchHeight=k,this.sizeInfo.actionsHeight=E,this.sizeInfo.doneButtonHeight=z,this.sizeInfo.dividerHeight=A,this.sizeInfo.menuPadding=M,this.sizeInfo.menuExtras=N,this.sizeInfo.menuWidth=T,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=_,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var e,n=this,r=t(window),i=n.$newElement.offset(),o=t(n.options.container);n.options.container&&!o.is("body")?((e=o.offset()).top+=parseInt(o.css("borderTopWidth")),e.left+=parseInt(o.css("borderLeftWidth"))):e={top:0,left:0};var a=n.options.windowPadding;this.sizeInfo.selectOffsetTop=i.top-e.top-r.scrollTop(),this.sizeInfo.selectOffsetBot=r.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-e.top-a[2],this.sizeInfo.selectOffsetLeft=i.left-e.left-r.scrollLeft(),this.sizeInfo.selectOffsetRight=r.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-e.left-a[1],this.sizeInfo.selectOffsetTop-=a[0],this.sizeInfo.selectOffsetLeft-=a[3]},setMenuSize:function(t){this.getSelectPosition();var e,n,r,i,o,a,s=this.sizeInfo.selectWidth,l=this.sizeInfo.liHeight,u=this.sizeInfo.headerHeight,c=this.sizeInfo.searchHeight,f=this.sizeInfo.actionsHeight,d=this.sizeInfo.doneButtonHeight,h=this.sizeInfo.dividerHeight,p=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&this.$newElement.toggleClass(v.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&l*this.selectpicker.current.elements.length+p.vert+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot),"auto"===this.options.size)n=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,r=(i=this.selectpicker.current.elements.length>3?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0)+u+c+f+d,a=Math.max(i-p.vert,0),this.$newElement.hasClass(v.DROPUP)&&(n=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),o=n,e=n-u-c-f-d-p.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var m=0;m<this.options.size;m++)"divider"===this.selectpicker.current.data[m].type&&g++;e=(n=l*this.options.size+g*h+p.vert)-p.vert,o=n+u+c+f+d,r=a=""}"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(v.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.$menu[0].offsetWidth-s),this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":r+"px"}),this.$menuInner.css({"max-height":e+"px","overflow-y":"auto","min-height":a+"px"}),this.sizeInfo.menuInnerHeight=e,this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth,this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(e){if(this.liHeight(e),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var n,r=this,i=t(window),o=0;this.setMenuSize(),"auto"===this.options.size?(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",(function(){return r.setMenuSize()})),i.off("resize.setMenuSize scroll.setMenuSize").on("resize.setMenuSize scroll.setMenuSize",(function(){return r.setMenuSize()}))):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize"),i.off("resize.setMenuSize scroll.setMenuSize")),e?o=this.$menuInner[0].scrollTop:r.multiple||"number"==typeof(n=r.selectpicker.main.map.newIndex[r.$element[0].selectedIndex])&&!1!==r.options.size&&(o=(o=r.sizeInfo.liHeight*n)-r.sizeInfo.menuInnerHeight/2+r.sizeInfo.liHeight/2),r.createView(!1,o)}},setWidth:function(){var t=this;"auto"===this.options.width?requestAnimationFrame((function(){t.$menu.css("min-width","0"),t.liHeight(),t.setMenuSize();var e=t.$newElement.clone().appendTo("body"),n=e.css("width","auto").children("button").outerWidth();e.remove(),t.sizeInfo.selectWidth=Math.max(t.sizeInfo.totalMenuWidth,n),t.$newElement.css("width",t.sizeInfo.selectWidth+"px")})):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=t('<div class="bs-container" />');var e,n,r,i=this,o=t(this.options.container),a=function(t){var a={};i.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(v.DROPUP,t.hasClass(v.DROPUP)),e=t.offset(),o.is("body")?n={top:0,left:0}:((n=o.offset()).top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),n.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),r=t.hasClass(v.DROPUP)?0:t[0].offsetHeight,g.major<4&&(a.top=e.top-n.top+r,a.left=e.left-n.left),a.width=t[0].offsetWidth,i.$bsContainer.css(a)};this.$button.on("click.bs.dropdown.data-api",(function(){i.isDisabled()||(a(i.$newElement),i.$bsContainer.appendTo(i.options.container).toggleClass(v.SHOW,!i.$button.hasClass(v.SHOW)).append(i.$menu))})),t(window).on("resize scroll",(function(){a(i.$newElement)})),this.$element.on("hide.bs.select",(function(){i.$menu.data("height",i.$menu.height()),i.$bsContainer.detach()}))},setOptionStatus:function(){var t=this,e=this.$element.find("option");if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length)for(var n=0;n<t.selectpicker.view.visibleElements.length;n++){var r=t.selectpicker.current.map.originalIndex[n+t.selectpicker.view.position0],i=e[r];if(i){var o=this.selectpicker.main.map.newIndex[r],a=this.selectpicker.main.elements[o];t.setDisabled(r,i.disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled,o,a),t.setSelected(r,i.selected,o,a)}}},setSelected:function(t,e,n,r){var i,o,a=void 0!==this.activeIndex,s=this.activeIndex===t||e&&!this.multiple&&!a;n||(n=this.selectpicker.main.map.newIndex[t]),r||(r=this.selectpicker.main.elements[n]),o=r.firstChild,e&&(this.selectedIndex=t),r.classList.toggle("selected",e),r.classList.toggle("active",s),s&&(this.selectpicker.view.currentActive=r,this.activeIndex=t),o&&(o.classList.toggle("selected",e),o.classList.toggle("active",s),o.setAttribute("aria-selected",e)),s||!a&&e&&void 0!==this.prevActiveIndex&&((i=this.selectpicker.main.elements[this.selectpicker.main.map.newIndex[this.prevActiveIndex]]).classList.remove("selected"),i.classList.remove("active"),i.firstChild&&(i.firstChild.classList.remove("selected"),i.firstChild.classList.remove("active")))},setDisabled:function(t,e,n,r){var i;n||(n=this.selectpicker.main.map.newIndex[t]),r||(r=this.selectpicker.main.elements[n]),i=r.firstChild,r.classList.toggle(v.DISABLED,e),i&&("4"===g.major&&i.classList.toggle(v.DISABLED,e),i.setAttribute("aria-disabled",e),i.setAttribute("tabindex",e?-1:0))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var t=this;this.isDisabled()?(this.$newElement.addClass(v.DISABLED),this.$button.addClass(v.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass(v.DISABLED)&&(this.$newElement.removeClass(v.DISABLED),this.$button.removeClass(v.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click((function(){return!t.isDisabled()}))},togglePlaceholder:function(){var t=this.$element[0],e=t.selectedIndex,n=-1===e;n||t.options[e].value||(n=!0),this.$button.toggleClass("bs-placeholder",n)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var n=this,r=t(document);r.data("spaceSelect",!1),this.$button.on("keyup",(function(t){/(32)/.test(t.keyCode.toString(10))&&r.data("spaceSelect")&&(t.preventDefault(),r.data("spaceSelect",!1))})),this.$newElement.on("show.bs.dropdown",(function(){g.major>3&&!n.dropdown&&(n.dropdown=n.$button.data("bs.dropdown"),n.dropdown._menu=n.$menu[0])})),this.$button.on("click.bs.dropdown.data-api",(function(){n.$newElement.hasClass(v.SHOW)||n.setSize()})),this.$element.on("shown.bs.select",(function(){n.$menuInner[0].scrollTop!==n.selectpicker.view.scrollTop&&(n.$menuInner[0].scrollTop=n.selectpicker.view.scrollTop),n.options.liveSearch?n.$searchbox.focus():n.$menuInner.focus()})),this.$menuInner.on("click","li a",(function(r,i){var o=t(this),a=n.isVirtual()?n.selectpicker.view.position0:0,s=n.selectpicker.current.map.originalIndex[o.parent().index()+a],l=e(n.$element[0]),c=n.$element.prop("selectedIndex"),f=!0;if(n.multiple&&1!==n.options.maxOptions&&r.stopPropagation(),r.preventDefault(),!n.isDisabled()&&!o.parent().hasClass(v.DISABLED)){var d=n.$element.find("option"),h=d.eq(s),p=h.prop("selected"),g=h.parent("optgroup"),m=n.options.maxOptions,y=g.data("maxOptions")||!1;if(s===n.activeIndex&&(i=!0),i||(n.prevActiveIndex=n.activeIndex,n.activeIndex=void 0),n.multiple){if(h.prop("selected",!p),n.setSelected(s,!p),o.blur(),!1!==m||!1!==y){var _=m<d.filter(":selected").length,b=y<g.find("option:selected").length;if(m&&_||y&&b)if(m&&1==m)d.prop("selected",!1),h.prop("selected",!0),n.$menuInner.find(".selected").removeClass("selected"),n.setSelected(s,!0);else if(y&&1==y){g.find("option:selected").prop("selected",!1),h.prop("selected",!0);var w=n.selectpicker.current.data[o.parent().index()+n.selectpicker.view.position0].optID;n.$menuInner.find(".optgroup-"+w).removeClass("selected"),n.setSelected(s,!0)}else{var x="string"==typeof n.options.maxOptionsText?[n.options.maxOptionsText,n.options.maxOptionsText]:n.options.maxOptionsText,k="function"==typeof x?x(m,y):x,E=k[0].replace("{n}",m),z=k[1].replace("{n}",y),A=t('<div class="notify"></div>');k[2]&&(E=E.replace("{var}",k[2][m>1?0:1]),z=z.replace("{var}",k[2][y>1?0:1])),h.prop("selected",!1),n.$menu.append(A),m&&_&&(A.append(t("<div>"+E+"</div>")),f=!1,n.$element.trigger("maxReached.bs.select")),y&&b&&(A.append(t("<div>"+z+"</div>")),f=!1,n.$element.trigger("maxReachedGrp.bs.select")),setTimeout((function(){n.setSelected(s,!1)}),10),A.delay(750).fadeOut(300,(function(){t(this).remove()}))}}}else d.prop("selected",!1),h.prop("selected",!0),n.setSelected(s,!0);!n.multiple||n.multiple&&1===n.options.maxOptions?n.$button.focus():n.options.liveSearch&&n.$searchbox.focus(),f&&(l!=e(n.$element[0])&&n.multiple||c!=n.$element.prop("selectedIndex")&&!n.multiple)&&(u=[s,h.prop("selected"),l],n.$element.triggerNative("change"))}})),this.$menu.on("click","li."+v.DISABLED+" a, ."+v.POPOVERHEADER+", ."+v.POPOVERHEADER+" :not(.close)",(function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),n.options.liveSearch&&!t(e.target).hasClass("close")?n.$searchbox.focus():n.$button.focus())})),this.$menuInner.on("click",".divider, .dropdown-header",(function(t){t.preventDefault(),t.stopPropagation(),n.options.liveSearch?n.$searchbox.focus():n.$button.focus()})),this.$menu.on("click","."+v.POPOVERHEADER+" .close",(function(){n.$button.click()})),this.$searchbox.on("click",(function(t){t.stopPropagation()})),this.$menu.on("click",".actions-btn",(function(e){n.options.liveSearch?n.$searchbox.focus():n.$button.focus(),e.preventDefault(),e.stopPropagation(),t(this).hasClass("bs-select-all")?n.selectAll():n.deselectAll()})),this.$element.on({change:function(){n.render(),n.$element.trigger("changed.bs.select",u),u=null},focus:function(){n.$button.focus()}})},liveSearchListener:function(){var t=this,e=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",(function(){t.$searchbox.val()&&t.$searchbox.val("")})),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",(function(t){t.stopPropagation()})),this.$searchbox.on("input propertychange",(function(){var r=t.$searchbox.val();if(t.selectpicker.search.map.newIndex={},t.selectpicker.search.map.originalIndex={},t.selectpicker.search.elements=[],t.selectpicker.search.data=[],r){var i=[],o=r.toUpperCase(),a={},s=[],l=t._searchStyle(),u=t.options.liveSearchNormalize;t._$lisSelected=t.$menuInner.find(".selected");for(var c=0;c<t.selectpicker.main.data.length;c++){var f=t.selectpicker.main.data[c];a[c]||(a[c]=n(f,o,l,u)),a[c]&&void 0!==f.headerIndex&&-1===s.indexOf(f.headerIndex)&&(f.headerIndex>0&&(a[f.headerIndex-1]=!0,s.push(f.headerIndex-1)),a[f.headerIndex]=!0,s.push(f.headerIndex),a[f.lastIndex+1]=!0),a[c]&&"optgroup-label"!==f.type&&s.push(c)}c=0;for(var h=s.length;c<h;c++){var p=s[c],g=t.selectpicker.main.data[s[c-1]];("divider"!==(f=t.selectpicker.main.data[p]).type||"divider"===f.type&&g&&"divider"!==g.type&&h-1!==c)&&(t.selectpicker.search.data.push(f),i.push(t.selectpicker.main.elements[p]),t.selectpicker.search.map.newIndex[f.originalIndex]=i.length-1,t.selectpicker.search.map.originalIndex[i.length-1]=f.originalIndex)}t.activeIndex=void 0,t.noScroll=!0,t.$menuInner.scrollTop(0),t.selectpicker.search.elements=i,t.createView(!0),i.length||(e.className="no-results",e.innerHTML=t.options.noneResultsText.replace("{0}",'"'+d(r)+'"'),t.$menuInner[0].firstChild.appendChild(e))}else t.$menuInner.scrollTop(0),t.createView(!1)}))},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(t){return void 0!==t?(this.$element.val(t).triggerNative("change"),this.$element):this.$element.val()},changeAll:function(t){if(this.multiple){void 0===t&&(t=!0);var n=this.$element.find("option"),r=0,i=0,o=e(this.$element[0]);this.$element.addClass("bs-select-hidden");for(var a=0;a<this.selectpicker.current.elements.length;a++){var s=n[this.selectpicker.current.map.originalIndex[a]];s&&(s.selected&&r++,s.selected=t,s.selected&&i++)}this.$element.removeClass("bs-select-hidden"),r!==i&&(this.setOptionStatus(),this.togglePlaceholder(),u=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(t){(t=t||window.event)&&t.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(e){var r,i,o,a,s,l=t(this),u=(l.is("input")?l.parent().parent():l.parent()).data("this"),c=u.findLis(),f=!1,d=9===e.which&&!l.hasClass("dropdown-toggle")&&!u.options.selectOnTab,h=m.test(e.which)||d,g=u.$menuInner[0].scrollTop,_=u.isVirtual(),b=!0===_?u.selectpicker.view.position0:0;if(!(i=u.$newElement.hasClass(v.SHOW))&&(h||e.which>=48&&e.which<=57||e.which>=96&&e.which<=105||e.which>=65&&e.which<=90)&&u.$button.trigger("click.bs.dropdown.data-api"),27===e.which&&i&&(e.preventDefault(),u.$button.trigger("click.bs.dropdown.data-api").focus()),h){if(!c.length)return;void 0===(r=!0===_?c.index(c.filter(".active")):u.selectpicker.current.map.newIndex[u.activeIndex])&&(r=-1),-1!==r&&((o=u.selectpicker.current.elements[r+b]).classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active")),38===e.which?(-1!==r&&r--,r+b<0&&(r+=c.length),u.selectpicker.view.canHighlight[r+b]||-1==(r=u.selectpicker.view.canHighlight.slice(0,r+b).lastIndexOf(!0)-b)&&(r=c.length-1)):(40===e.which||d)&&(++r+b>=u.selectpicker.view.canHighlight.length&&(r=0),u.selectpicker.view.canHighlight[r+b]||(r=r+1+u.selectpicker.view.canHighlight.slice(r+b+1).indexOf(!0))),e.preventDefault();var w=b+r;38===e.which?0===b&&r===c.length-1?(u.$menuInner[0].scrollTop=u.$menuInner[0].scrollHeight,w=u.selectpicker.current.elements.length-1):f=(s=(a=u.selectpicker.current.data[w]).position-a.height)<g:(40===e.which||d)&&(0!==b&&0===r?(u.$menuInner[0].scrollTop=0,w=0):f=(s=(a=u.selectpicker.current.data[w]).position-u.sizeInfo.menuInnerHeight)>g),(o=u.selectpicker.current.elements[w]).classList.add("active"),o.firstChild&&o.firstChild.classList.add("active"),u.activeIndex=u.selectpicker.current.map.originalIndex[w],u.selectpicker.view.currentActive=o,f&&(u.$menuInner[0].scrollTop=s),u.options.liveSearch?u.$searchbox.focus():l.focus()}else if(!l.is("input")&&!y.test(e.which)||32===e.which&&u.selectpicker.keydown.keyHistory){var x,k,E=[];e.preventDefault(),u.selectpicker.keydown.keyHistory+=p[e.which],u.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(u.selectpicker.keydown.resetKeyHistory.cancel),u.selectpicker.keydown.resetKeyHistory.cancel=u.selectpicker.keydown.resetKeyHistory.start(),/^(.)\1+$/.test(k=u.selectpicker.keydown.keyHistory)&&(k=k.charAt(0));for(var z=0;z<u.selectpicker.current.data.length;z++){var A=u.selectpicker.current.data[z];n(A,k,"startsWith",!0)&&u.selectpicker.view.canHighlight[z]&&(A.index=z,E.push(A.originalIndex))}if(E.length){var C=0;c.removeClass("active").find("a").removeClass("active"),1===k.length&&(-1===(C=E.indexOf(u.activeIndex))||C===E.length-1?C=0:C++),g-(a=u.selectpicker.current.data[x=u.selectpicker.current.map.newIndex[E[C]]]).position>0?(s=a.position-a.height,f=!0):(s=a.position-u.sizeInfo.menuInnerHeight,f=a.position>g+u.sizeInfo.menuInnerHeight),(o=u.selectpicker.current.elements[x]).classList.add("active"),o.firstChild&&o.firstChild.classList.add("active"),u.activeIndex=E[C],o.firstChild.focus(),f&&(u.$menuInner[0].scrollTop=s),l.focus()}}i&&(32===e.which&&!u.selectpicker.keydown.keyHistory||13===e.which||9===e.which&&u.options.selectOnTab)&&(32!==e.which&&e.preventDefault(),u.options.liveSearch&&32===e.which||(u.$menuInner.find(".active a").trigger("click",!0),l.focus(),u.options.liveSearch||(e.preventDefault(),t(document).data("spaceSelect",!0))))},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){var e=t.extend({},this.options,this.$element.data());this.options=e,this.selectpicker.main.map.newIndex={},this.selectpicker.main.map.originalIndex={},this.createLi(),this.checkDisabled(),this.render(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var b=t.fn.selectpicker;t.fn.selectpicker=o,t.fn.selectpicker.Constructor=_,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=b,this},t(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.select",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',_.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',(function(t){t.stopPropagation()})),t(window).on("load.bs.select.data-api",(function(){t(".selectpicker").each((function(){var e=t(this);o.call(e,e.data())}))}))}(t)}));